<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Flashcards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card-flip {
            perspective: 1000px;
        }
        .card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card-flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            backface-visibility: hidden;
        }
        .card-back {
            transform: rotateY(180deg);
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 min-h-screen">
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <div class="container mx-auto px-4 py-8 max-w-2xl">
        <h1 class="text-3xl font-bold text-center mb-8 text-gray-800 dark:text-white">
            Chinese Flashcards
        </h1>

        <!-- Game Screen -->
        <div id="gameScreen" class="space-y-6">
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                <div id="progressBar" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            
            <!-- Card Counter -->
            <div class="text-center text-gray-600 dark:text-gray-400">
                <span id="cardCounter">1 / 20</span>
            </div>

            <!-- Flashcard -->
            <div class="card-flip">
                <div id="flashcard" class="card-inner relative w-full h-80 cursor-pointer">
                    <!-- Front of card (Chinese + Pinyin) -->
                    <div class="card-front absolute inset-0 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 flex flex-col items-center justify-center p-8">
                        <div id="chineseChar" class="text-6xl font-bold text-gray-800 dark:text-white mb-4">你好</div>
                        <div id="pinyin" class="text-2xl text-gray-600 dark:text-gray-400">nǐ hǎo</div>
                        <div class="text-sm text-gray-500 dark:text-gray-500 mt-6">Click to reveal translation</div>
                    </div>
                    
                    <!-- Back of card (French translation) -->
                    <div class="card-back absolute inset-0 bg-blue-50 dark:bg-blue-900 rounded-xl shadow-lg border border-blue-200 dark:border-blue-700 flex flex-col items-center justify-center p-8">
                        <div id="frenchTranslation" class="text-3xl font-semibold text-blue-800 dark:text-blue-200 text-center">salut</div>
                        <div class="text-sm text-blue-600 dark:text-blue-400 mt-6">Click to flip back</div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4">
                <button id="knowItBtn" class="flex items-center space-x-2 bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span>Know it</span>
                </button>
                
                <button id="dontKnowBtn" class="flex items-center space-x-2 bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                    <span>Don't know</span>
                </button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden text-center space-y-6">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6">Session Complete!</h2>
            
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="text-center">
                        <div id="correctCount" class="text-3xl font-bold text-green-500">0</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Known</div>
                    </div>
                    <div class="text-center">
                        <div id="incorrectCount" class="text-3xl font-bold text-red-500">0</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Unknown</div>
                    </div>
                </div>
                
                <div class="text-center">
                    <div id="accuracyPercent" class="text-4xl font-bold text-blue-500">0%</div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">Accuracy</div>
                </div>
            </div>

            <div class="space-y-3">
                <button id="reviewMissedBtn" class="w-full bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    Review Missed Cards
                </button>
                <button id="restartBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    Start New Session
                </button>
            </div>
        </div>
    </div>

    <script>
        // Flashcard data
        const flashcards = [
            { chinese: "你好", pinyin: "nǐ hǎo", french: "salut" },
            { chinese: "谢谢", pinyin: "xiè xiè", french: "merci" },
            { chinese: "再见", pinyin: "zài jiàn", french: "au revoir" },
            { chinese: "水", pinyin: "shuǐ", french: "eau" },
            { chinese: "吃", pinyin: "chī", french: "manger" },
            { chinese: "家", pinyin: "jiā", french: "maison" },
            { chinese: "学校", pinyin: "xué xiào", french: "école" },
            { chinese: "朋友", pinyin: "péng yǒu", french: "ami" },
            { chinese: "时间", pinyin: "shí jiān", french: "temps" },
            { chinese: "工作", pinyin: "gōng zuò", french: "travail" },
            { chinese: "爱", pinyin: "ài", french: "amour" },
            { chinese: "钱", pinyin: "qián", french: "argent" },
            { chinese: "书", pinyin: "shū", french: "livre" },
            { chinese: "电话", pinyin: "diàn huà", french: "téléphone" },
            { chinese: "车", pinyin: "chē", french: "voiture" },
            { chinese: "医生", pinyin: "yī shēng", french: "médecin" },
            { chinese: "学生", pinyin: "xué shēng", french: "étudiant" },
            { chinese: "老师", pinyin: "lǎo shī", french: "professeur" },
            { chinese: "饭", pinyin: "fàn", french: "riz/repas" },
            { chinese: "中国", pinyin: "zhōng guó", french: "Chine" }
        ];

        class FlashcardApp {
            constructor() {
                this.currentDeck = [];
                this.currentIndex = 0;
                this.correctAnswers = [];
                this.incorrectAnswers = [];
                this.isFlipped = false;
                
                this.initializeElements();
                this.setupEventListeners();
                this.startNewSession();
            }

            initializeElements() {
                this.gameScreen = document.getElementById('gameScreen');
                this.resultsScreen = document.getElementById('resultsScreen');
                this.flashcard = document.getElementById('flashcard');
                this.chineseChar = document.getElementById('chineseChar');
                this.pinyin = document.getElementById('pinyin');
                this.frenchTranslation = document.getElementById('frenchTranslation');
                this.progressBar = document.getElementById('progressBar');
                this.cardCounter = document.getElementById('cardCounter');
                this.knowItBtn = document.getElementById('knowItBtn');
                this.dontKnowBtn = document.getElementById('dontKnowBtn');
                this.correctCount = document.getElementById('correctCount');
                this.incorrectCount = document.getElementById('incorrectCount');
                this.accuracyPercent = document.getElementById('accuracyPercent');
                this.reviewMissedBtn = document.getElementById('reviewMissedBtn');
                this.restartBtn = document.getElementById('restartBtn');
            }

            setupEventListeners() {
                this.flashcard.addEventListener('click', () => this.flipCard());
                this.knowItBtn.addEventListener('click', () => this.markAnswer(true));
                this.dontKnowBtn.addEventListener('click', () => this.markAnswer(false));
                this.reviewMissedBtn.addEventListener('click', () => this.reviewMissedCards());
                this.restartBtn.addEventListener('click', () => this.startNewSession());
            }

            shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }

            startNewSession() {
                this.currentDeck = this.shuffleArray(flashcards);
                this.currentIndex = 0;
                this.correctAnswers = [];
                this.incorrectAnswers = [];
                this.showGameScreen();
                this.displayCurrentCard();
            }

            reviewMissedCards() {
                if (this.incorrectAnswers.length === 0) return;
                
                this.currentDeck = this.shuffleArray(this.incorrectAnswers);
                this.currentIndex = 0;
                this.correctAnswers = [];
                this.incorrectAnswers = [];
                this.showGameScreen();
                this.displayCurrentCard();
            }

            showGameScreen() {
                this.gameScreen.classList.remove('hidden');
                this.resultsScreen.classList.add('hidden');
            }

            showResultsScreen() {
                this.gameScreen.classList.add('hidden');
                this.resultsScreen.classList.remove('hidden');
                this.displayResults();
            }

            displayCurrentCard() {
                if (this.currentIndex >= this.currentDeck.length) {
                    this.showResultsScreen();
                    return;
                }

                const card = this.currentDeck[this.currentIndex];
                this.chineseChar.textContent = card.chinese;
                this.pinyin.textContent = card.pinyin;
                this.frenchTranslation.textContent = card.french;
                
                this.updateProgress();
                this.resetCard();
            }

            updateProgress() {
                const progress = (this.currentIndex / this.currentDeck.length) * 100;
                this.progressBar.style.width = `${progress}%`;
                this.cardCounter.textContent = `${this.currentIndex + 1} / ${this.currentDeck.length}`;
            }

            flipCard() {
                this.isFlipped = !this.isFlipped;
                this.flashcard.classList.toggle('card-flipped');
            }

            resetCard() {
                this.isFlipped = false;
                this.flashcard.classList.remove('card-flipped');
            }

            markAnswer(correct) {
                const currentCard = this.currentDeck[this.currentIndex];
                
                if (correct) {
                    this.correctAnswers.push(currentCard);
                } else {
                    this.incorrectAnswers.push(currentCard);
                }

                this.currentIndex++;
                this.displayCurrentCard();
            }

            displayResults() {
                const total = this.correctAnswers.length + this.incorrectAnswers.length;
                const accuracy = total > 0 ? Math.round((this.correctAnswers.length / total) * 100) : 0;

                this.correctCount.textContent = this.correctAnswers.length;
                this.incorrectCount.textContent = this.incorrectAnswers.length;
                this.accuracyPercent.textContent = `${accuracy}%`;

                // Enable/disable review button based on missed cards
                this.reviewMissedBtn.disabled = this.incorrectAnswers.length === 0;
            }
        }

        // Initialize the app
        new FlashcardApp();
    </script>
</body>
</html>
