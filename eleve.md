IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationpageserreursco.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesCurseur = void 0;
        require("Curseur.css");
        exports.StylesCurseur = {
            AvecMain: 'AvecMain',
            SansMain: 'SansMain',
            AvecAide: 'AvecAide',
            AvecResize: 'AvecResize',
            AvecResizeHorizontal: 'AvecResizeHorizontal',
            AvecResizeVertical: 'AvecResizeVertical',
            AvecInterdiction: 'AvecInterdiction',
            AvecMove: 'AvecMove',
            AvecTexte: 'AvecTexte',
            Curseur_DoubleClick: 'Curseur_DoubleClick',
            Curseur_Pinceau: 'Curseur_Pinceau',
            Curseur_PinceauVert: 'Curseur_PinceauVert',
            Curseur_PinceauGris: 'Curseur_PinceauGris',
            Curseur_PeriodeCloturee: 'Curseur_PeriodeCloturee',
            Curseur_AssistantSaisieActif: 'Curseur_AssistantSaisieActif',
            Curseur_MethodeCalculMoyenneActif: 'Curseur_MethodeCalculMoyenneActif'
        };
    },
    fn: 'curseur.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("Curseur.css");
    },
    fn: 'declarationcurseurpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationgeogebra.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesTheme_Modele = void 0;
        require("Theme_Modele.css");
        exports.StylesTheme_Modele = {
            Lien: 'Lien',
            LienAccueil: 'LienAccueil',
            SansMain: 'SansMain',
            LienAccueilNeutre: 'LienAccueilNeutre',
            LienWidget: 'LienWidget',
            LienFenetre: 'LienFenetre',
            LienMoyenne: 'LienMoyenne',
            Bouton: 'Bouton',
            CelluleZoneTexte: 'CelluleZoneTexte',
            CelluleTexte: 'CelluleTexte',
            Bordure: 'Bordure',
            Legende: 'Legende',
            Image_Menu_FlecheSousOnglet: 'Image_Menu_FlecheSousOnglet'
        };
    },
    fn: 'theme_modele.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesCouleurs = void 0;
        require("Couleurs.css");
        exports.StylesCouleurs = {
            FondBlanc: 'FondBlanc',
            Blanc: 'Blanc',
            Noir: 'Noir',
            bgRedFoncee: 'bg-red-foncee',
            colorRedFoncee: 'color-red-foncee',
            texteRedFoncee: 'texte-red-foncee',
            bgRedMoyen: 'bg-red-moyen',
            colorRedMoyen: 'color-red-moyen',
            texteRedMoyen: 'texte-red-moyen',
            bgRedClaire: 'bg-red-claire',
            colorRedClaire: 'color-red-claire',
            texteRedClaire: 'texte-red-claire',
            bgGreenFoncee: 'bg-green-foncee',
            colorGreenFoncee: 'color-green-foncee',
            texteGreenFoncee: 'texte-green-foncee',
            bgGreenMoyen: 'bg-green-moyen',
            colorGreenMoyen: 'color-green-moyen',
            texteGreenMoyen: 'texte-green-moyen',
            bgGreenClaire: 'bg-green-claire',
            colorGreenClaire: 'color-green-claire',
            texteGreenClaire: 'texte-green-claire',
            bgOrangeFoncee: 'bg-orange-foncee',
            colorOrangeFoncee: 'color-orange-foncee',
            texteOrangeFoncee: 'texte-orange-foncee',
            bgOrangeMoyen: 'bg-orange-moyen',
            colorOrangeMoyen: 'color-orange-moyen',
            texteOrangeMoyen: 'texte-orange-moyen',
            bgOrangeClaire: 'bg-orange-claire',
            colorOrangeClaire: 'color-orange-claire',
            texteOrangeClaire: 'texte-orange-claire',
            bgBlueFoncee: 'bg-blue-foncee',
            colorBlueFoncee: 'color-blue-foncee',
            texteBlueFoncee: 'texte-blue-foncee',
            bgBlueMoyen: 'bg-blue-moyen',
            colorBlueMoyen: 'color-blue-moyen',
            texteBlueMoyen: 'texte-blue-moyen',
            bgBlueClaire: 'bg-blue-claire',
            colorBlueClaire: 'color-blue-claire',
            texteBlueClaire: 'texte-blue-claire',
            bgNeutreLight: 'bg-neutre-light',
            colorNeutreLight: 'color-neutre-light',
            bgNeutreLegere: 'bg-neutre-legere',
            colorNeutreLegere: 'color-neutre-legere',
            bgNeutreLegere2: 'bg-neutre-legere2',
            colorNeutreLegere2: 'color-neutre-legere2',
            bgNeutreClaire: 'bg-neutre-claire',
            colorNeutreClaire: 'color-neutre-claire',
            bgNeutreMoyen1: 'bg-neutre-moyen1',
            colorNeutreMoyen1: 'color-neutre-moyen1',
            bgNeutreMoyen2: 'bg-neutre-moyen2',
            colorNeutreMoyen2: 'color-neutre-moyen2',
            bgNeutreMoyen3: 'bg-neutre-moyen3',
            colorNeutreMoyen3: 'color-neutre-moyen3',
            bgNeutreFoncee: 'bg-neutre-foncee',
            colorNeutreFoncee: 'color-neutre-foncee',
            bgNeutreSombre: 'bg-neutre-sombre',
            colorNeutreSombre: 'color-neutre-sombre'
        };
    },
    fn: 'couleurs.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesDivers = void 0;
        require("Divers.css");
        exports.StylesDivers = {
            GroupeRadioButton: 'GroupeRadioButton',
            debugOutlineFocus: 'debug-outline-focus',
            objetbandeauentete_global: 'objetbandeauentete_global',
            asResponsive: 'as-responsive',
            objetBandeauEntete_menu: 'objetBandeauEntete_menu',
            focusVisibleContrasted: 'focusVisibleContrasted',
            browserDefault: 'browser-default',
            tinyView: 'tiny-view',
            visuallyHidden: 'visually-hidden',
            srOnly: 'sr-only',
            print: 'print',
            noPrint: 'no-print',
            dot: 'dot',
            circle: 'circle',
            square: 'square',
            flexContain: 'flex-contain',
            inlineFlex: 'inline-flex',
            flexInlineContain: 'flex-inline-contain',
            rowReverse: 'row-reverse',
            flexRowReverse: 'flex-row-reverse',
            cols: 'cols',
            flexCols: 'flex-cols',
            colsReverse: 'cols-reverse',
            flexColsReverse: 'flex-cols-reverse',
            fWrap: 'f-wrap',
            flexWrap: 'flex-wrap',
            justifyBetween: 'justify-between',
            justifyEvenly: 'justify-evenly',
            justifyCenter: 'justify-center',
            justifyEnd: 'justify-end',
            justifyStart: 'justify-start',
            fluidBloc: 'fluid-bloc',
            shrinkBloc: 'shrink-bloc',
            growBloc: 'grow-bloc',
            fixBloc: 'fix-bloc',
            flexCenter: 'flex-center',
            flexEnd: 'flex-end',
            flexStart: 'flex-start',
            flexStretch: 'flex-stretch',
            selfStart: 'self-start',
            selfCenter: 'self-center',
            selfEnd: 'self-end',
            selfStretch: 'self-stretch',
            flexGapS: 'flex-gap-s',
            flexGap: 'flex-gap',
            flexGapL: 'flex-gap-l',
            flexGapXl: 'flex-gap-xl',
            flexGapXxl: 'flex-gap-xxl',
            flexGapBig: 'flex-gap-big',
            gdSelfEnd: 'gd-self-end',
            gridContain: 'grid-contain',
            InlineBlock: 'InlineBlock',
            inlineBlockContain: 'inline-block-contain',
            Inline: 'Inline',
            inlineContain: 'inline-contain',
            Block: 'Block',
            blocContain: 'bloc-contain',
            tableContain: 'table-contain',
            asCell: 'as-cell',
            pAllNone: 'p-all-none',
            pAll: 'p-all',
            tiny: 'tiny',
            pAllS: 'p-all-s',
            large: 'large',
            pAllL: 'p-all-l',
            xl: 'xl',
            pAllXl: 'p-all-xl',
            pAllXlb: 'p-all-xlb',
            pAllXxl: 'p-all-xxl',
            pAllBig: 'p-all-big',
            pBottomNone: 'p-bottom-none',
            pBottom: 'p-bottom',
            pBottomS: 'p-bottom-s',
            pBottomL: 'p-bottom-l',
            pBottomXl: 'p-bottom-xl',
            pBottomXlb: 'p-bottom-xlb',
            pBottomXxl: 'p-bottom-xxl',
            pBottomBig: 'p-bottom-big',
            pRightNone: 'p-right-none',
            pRight: 'p-right',
            pRightS: 'p-right-s',
            pRightL: 'p-right-l',
            pRightLb: 'p-right-lb',
            pRightXl: 'p-right-xl',
            pRightXlb: 'p-right-xlb',
            pRightXxl: 'p-right-xxl',
            pRightBig: 'p-right-big',
            pTopNone: 'p-top-none',
            pTop: 'p-top',
            pTopS: 'p-top-s',
            pTopL: 'p-top-l',
            pTopLb: 'p-top-lb',
            pTopXl: 'p-top-xl',
            pTopXlb: 'p-top-xlb',
            pTopXxl: 'p-top-xxl',
            pTopBig: 'p-top-big',
            pLeftNone: 'p-left-none',
            pLeft: 'p-left',
            pLeftS: 'p-left-s',
            pLeftL: 'p-left-l',
            pLeftLb: 'p-left-lb',
            pLeftXl: 'p-left-xl',
            pLeftXlb: 'p-left-xlb',
            pLeftXxl: 'p-left-xxl',
            pLeftBig: 'p-left-big',
            pXNone: 'p-x-none',
            pX: 'p-x',
            pXS: 'p-x-s',
            pXL: 'p-x-l',
            pXLb: 'p-x-lb',
            pXXl: 'p-x-xl',
            pXXlb: 'p-x-xlb',
            pXXxl: 'p-x-xxl',
            pXBig: 'p-x-big',
            pYNone: 'p-y-none',
            pY: 'p-y',
            pYS: 'p-y-s',
            pYL: 'p-y-l',
            pYLb: 'p-y-lb',
            pYXl: 'p-y-xl',
            pYXlb: 'p-y-xlb',
            pYXxl: 'p-y-xxl',
            pYBig: 'p-y-big',
            mAllNone: 'm-all-none',
            mAll: 'm-all',
            mAllS: 'm-all-s',
            mAllL: 'm-all-l',
            mAllXl: 'm-all-xl',
            mAllXxl: 'm-all-xxl',
            mAllBig: 'm-all-big',
            mAllAuto: 'm-all-auto',
            mBottomNone: 'm-bottom-none',
            mBottom: 'm-bottom',
            mBottomS: 'm-bottom-s',
            mBottomL: 'm-bottom-l',
            mBottomXl: 'm-bottom-xl',
            mBottomXxl: 'm-bottom-xxl',
            mBottomBig: 'm-bottom-big',
            mBottomAuto: 'm-bottom-auto',
            mRightNone: 'm-right-none',
            mRight: 'm-right',
            mRightS: 'm-right-s',
            mRightL: 'm-right-l',
            mRightXl: 'm-right-xl',
            mRightXxl: 'm-right-xxl',
            mRightBig: 'm-right-big',
            mRightAuto: 'm-right-auto',
            mLeftNone: 'm-left-none',
            mLeft: 'm-left',
            mLeftS: 'm-left-s',
            mLeftL: 'm-left-l',
            mLeftXl: 'm-left-xl',
            mLeftXxl: 'm-left-xxl',
            mLeftBig: 'm-left-big',
            mLeftAuto: 'm-left-auto',
            mTopNone: 'm-top-none',
            mTop: 'm-top',
            mTopS: 'm-top-s',
            mTopL: 'm-top-l',
            mTopXl: 'm-top-xl',
            mTopXxl: 'm-top-xxl',
            mTopBig: 'm-top-big',
            mTopAuto: 'm-top-auto',
            mXNone: 'm-x-none',
            mXS: 'm-x-s',
            mX: 'm-x',
            mXL: 'm-x-l',
            mXXl: 'm-x-xl',
            mXXxl: 'm-x-xxl',
            mXBig: 'm-x-big',
            mXAuto: 'm-x-auto',
            mYNone: 'm-y-none',
            mYS: 'm-y-s',
            mY: 'm-y',
            mYL: 'm-y-l',
            mYXl: 'm-y-xl',
            mYXxl: 'm-y-xxl',
            mYBig: 'm-y-big',
            mYAuto: 'm-y-auto',
            mAllNegaS: 'm-all-nega-s',
            mAllNega: 'm-all-nega',
            mAllNegaL: 'm-all-nega-l',
            mAllNegaXl: 'm-all-nega-xl',
            mAllNegaXxl: 'm-all-nega-xxl',
            mAllNegaBig: 'm-all-nega-big',
            mBottomNegaS: 'm-bottom-nega-s',
            mBottomNega: 'm-bottom-nega',
            mBottomNegaL: 'm-bottom-nega-l',
            mBottomNegaXl: 'm-bottom-nega-xl',
            mBottomNegaXxl: 'm-bottom-nega-xxl',
            mBottomNegaBig: 'm-bottom-nega-big',
            mRightNegaS: 'm-right-nega-s',
            mRightNega: 'm-right-nega',
            mRightNegaL: 'm-right-nega-l',
            mRightNegaXl: 'm-right-nega-xl',
            mRightNegaXxl: 'm-right-nega-xxl',
            mRightNegaBig: 'm-right-nega-big',
            mLeftNegaS: 'm-left-nega-s',
            mLeftNega: 'm-left-nega',
            mLeftNegaL: 'm-left-nega-l',
            mLeftNegaXl: 'm-left-nega-xl',
            mLeftNegaXxl: 'm-left-nega-xxl',
            mLeftNegaBig: 'm-left-nega-big',
            mTopNegaS: 'm-top-nega-s',
            mTopNega: 'm-top-nega',
            mTopNegaL: 'm-top-nega-l',
            mTopNegaXl: 'm-top-nega-xl',
            mTopNegaXxl: 'm-top-nega-xxl',
            mTopNegaBig: 'm-top-nega-big',
            mXNegaS: 'm-x-nega-s',
            mXNega: 'm-x-nega',
            mXNegaL: 'm-x-nega-l',
            mXNegaXl: 'm-x-nega-xl',
            mXNegaXxl: 'm-x-nega-xxl',
            mXNegaBig: 'm-x-nega-big',
            mYNegaS: 'm-y-nega-s',
            mYNega: 'm-y-nega',
            mYNegaL: 'm-y-nega-l',
            mYNegaXl: 'm-y-nega-xl',
            mYNegaXxl: 'm-y-nega-xxl',
            mYNegaBig: 'm-y-nega-big',
            Espace: 'Espace',
            EspaceGauche: 'EspaceGauche',
            EspaceGauche10: 'EspaceGauche10',
            EspaceDroit: 'EspaceDroit',
            EspaceDroit10: 'EspaceDroit10',
            EspaceHaut: 'EspaceHaut',
            EspaceHaut10: 'EspaceHaut10',
            EspaceBas: 'EspaceBas',
            EspaceBas10: 'EspaceBas10',
            DoubleEspace: 'DoubleEspace',
            GrandEspaceGauche: 'GrandEspaceGauche',
            GrandEspaceHaut: 'GrandEspaceHaut',
            GrandEspaceBas: 'GrandEspaceBas',
            GrandEspaceDroit: 'GrandEspaceDroit',
            PetitEspace: 'PetitEspace',
            PetitEspaceGauche: 'PetitEspaceGauche',
            PetitEspaceDroit: 'PetitEspaceDroit',
            PetitEspaceHaut: 'PetitEspaceHaut',
            PetitEspaceBas: 'PetitEspaceBas',
            EspaceInput: 'EspaceInput',
            AvecMarge: 'AvecMarge',
            MargeHaut: 'MargeHaut',
            MargeBas: 'MargeBas',
            MargeDroit: 'MargeDroit',
            MargeGauche: 'MargeGauche',
            AlignementGauche: 'AlignementGauche',
            textLeft: 'text-left',
            textStart: 'text-start',
            AlignementDroit: 'AlignementDroit',
            textRight: 'text-right',
            textEnd: 'text-end',
            AlignementMilieu: 'AlignementMilieu',
            textCenter: 'text-center',
            textJustify: 'text-justify',
            AlignementDivMilieu: 'AlignementDivMilieu',
            AlignementHaut: 'AlignementHaut',
            AlignementMilieuVertical: 'AlignementMilieuVertical',
            AlignementBas: 'AlignementBas',
            AlignementDivMilieuVertical: 'AlignementDivMilieuVertical',
            extraLight: 'extra-light',
            light: 'light',
            regular: 'regular',
            medium: 'medium',
            semiBold: 'semi-bold',
            Gras: 'Gras',
            bold: 'bold',
            bolder: 'bolder',
            firstCapitalize: 'first-capitalize',
            capitalize: 'capitalize',
            uppercase: 'uppercase',
            lowercase: 'lowercase',
            italic: 'italic',
            tailleS: 'taille-s',
            tailleM: 'taille-m',
            tailleL: 'taille-l',
            iconeS: 'icone-s',
            iconeM: 'icone-m',
            iconeL: 'icone-l',
            whiteSpaceNormal: 'white-space-normal',
            whiteSpacePre: 'white-space-pre',
            whiteSpacePreLine: 'white-space-pre-line',
            whiteSpacePreWrap: 'white-space-pre-wrap',
            whiteSpaceInherit: 'white-space-inherit',
            whiteSpaceInitial: 'white-space-initial',
            whiteSpaceRevert: 'white-space-revert',
            whiteSpaceRevertLayer: 'white-space-revert-layer',
            whiteSpaceUnset: 'white-space-unset',
            ieLineColor: 'ie-line-color',
            static: 'static',
            asDot: 'as-dot',
            onlyColor: 'only-color',
            varHeight: 'var-height',
            ieShadowTop: 'ie-shadow-top',
            ieShadowBottom: 'ie-shadow-bottom',
            radiusAllS: 'radius-all-s',
            radiusAllM: 'radius-all-m',
            radiusAllL: 'radius-all-l',
            asUlDot: 'as-ul-dot',
            asHeaderBullet: 'as-header-bullet',
            lyCols1: 'ly-cols-1',
            contentBloc: 'content-bloc',
            childAsAbsolute: 'child-as-absolute',
            shadowed: 'shadowed',
            value: 'value',
            message: 'message',
            lyCols2: 'ly-cols-2',
            mainContent: 'main-content',
            asideContent: 'aside-content',
            lyTripleEcrans: 'ly-triple-ecrans',
            navContent: 'nav-content',
            multi: 'multi',
            mono: 'mono',
            cursorAuto: 'cursor-auto',
            cursorDefault: 'cursor-default',
            cursorNone: 'cursor-none',
            cursorContextMenu: 'cursor-context-menu',
            cursorHelp: 'cursor-help',
            cursorPointer: 'cursor-pointer',
            cursorProgress: 'cursor-progress',
            cursorWait: 'cursor-wait',
            cursorCell: 'cursor-cell',
            cursorCrosshair: 'cursor-crosshair',
            cursorText: 'cursor-text',
            cursorVerticalText: 'cursor-vertical-text',
            cursorAlias: 'cursor-alias',
            cursorCopy: 'cursor-copy',
            cursorMove: 'cursor-move',
            cursorNoDrop: 'cursor-no-drop',
            cursorNotAllowed: 'cursor-not-allowed',
            cursorGrab: 'cursor-grab',
            cursorGrabbing: 'cursor-grabbing',
            cursorResizeE: 'cursor-resize-e',
            cursorResizeN: 'cursor-resize-n',
            cursorResizeNe: 'cursor-resize-ne',
            cursorResizeNw: 'cursor-resize-nw',
            cursorResizeS: 'cursor-resize-s',
            cursorResizeSe: 'cursor-resize-se',
            cursorResizeSw: 'cursor-resize-sw',
            cursorResizeW: 'cursor-resize-w',
            bgEnej: 'bg-enej',
            disableDarkMode: 'disable-dark-mode',
            ThemeProduitHP: 'ThemeProduitHP',
            ThemeMobileHP: 'ThemeMobileHP',
            ThemeBordeaux: 'ThemeBordeaux',
            ThemeCatResultat: 'ThemeCat-resultat',
            ThemeJaune: 'ThemeJaune',
            ThemeCatViescolaire: 'ThemeCat-viescolaire',
            ThemeBleu: 'ThemeBleu',
            ThemeCatEdt: 'ThemeCat-edt',
            ThemeTurquoise: 'ThemeTurquoise',
            ThemeProduitPN: 'ThemeProduitPN',
            ThemePronote: 'ThemePronote',
            ThemeCatCommunication: 'ThemeCat-communication',
            ThemeVert: 'ThemeVert',
            ThemeCatPedagogie: 'ThemeCat-pedagogie',
            ThemeViolet: 'ThemeViolet',
            ThemeColIdf: 'ThemeColIdf',
            ThemeIdf: 'ThemeIdf',
            ThemeProduitEDT: 'ThemeProduitEDT',
            ThemeEDT: 'ThemeEDT',
            ThemeEdt: 'ThemeEdt',
            ThemeNeutre: 'ThemeNeutre',
            white: 'white',
            bgWhite: 'bg-white',
            transparent: 'transparent',
            Bandeau: 'Bandeau',
            Cadre: 'Cadre',
            Debug: 'Debug',
            debugPoliceRGAA: 'debug-policeRGAA',
            debugOnlyPhrasingContent: 'debug-only-phrasingContent',
            ocb_cont: 'ocb_cont',
            asInput: 'as-input',
            div: 'div',
            interface_affV: 'interface_affV',
            checkbox: 'checkbox',
            vTop: 'v-top',
            vMiddle: 'v-middle',
            vBottom: 'v-bottom',
            vBaseline: 'v-baseline',
            SansSelectionTexte: 'SansSelectionTexte',
            AvecSelectionTexte: 'AvecSelectionTexte',
            cellspacing1: 'cellspacing-1',
            cellpadding1: 'cellpadding-1',
            cellspacing2: 'cellspacing-2',
            cellpadding2: 'cellpadding-2',
            cellspacing3: 'cellspacing-3',
            cellpadding3: 'cellpadding-3',
            cellspacing4: 'cellspacing-4',
            cellpadding4: 'cellpadding-4',
            cellspacing5: 'cellspacing-5',
            cellpadding5: 'cellpadding-5',
            asHeader: 'as-header',
            asContent: 'as-content',
            deploiement: 'deploiement',
            deploye: 'deploye',
            asFooter: 'as-footer',
            Insecable: 'Insecable',
            overflowAuto: 'overflow-auto',
            overflowYAuto: 'overflow-y-auto',
            overflowScroll: 'overflow-scroll',
            Collapse: 'Collapse',
            Selection: 'Selection',
            BorderInvisible: 'BorderInvisible',
            NoBorder: 'NoBorder',
            Zone: 'Zone',
            TitreZone: 'TitreZone',
            hide: 'hide',
            Fiche: 'Fiche',
            show: 'show',
            Masquer: 'Masquer',
            BloquerInterface: 'BloquerInterface',
            blocagePatience: 'blocage-patience',
            VoileOpaque50: 'VoileOpaque50',
            VoileOpaqueComplet: 'VoileOpaqueComplet',
            zoneFenetre: 'zone-fenetre',
            onDrag: 'on-drag',
            supportCssTest: 'support-css-test',
            BordureReliefHaut: 'BordureReliefHaut',
            BordureReliefBas: 'BordureReliefBas',
            Table: 'Table',
            fullSize: 'full-size',
            heightAuto: 'height-auto',
            widthAuto: 'width-auto',
            fullWidth: 'full-width',
            fullHeight: 'full-height',
            maxWidth: 'max-width',
            maxWidthVw: 'max-width-vw',
            maxHeight: 'max-height',
            maxHeightVh: 'max-height-vh',
            TableauSansHaut: 'TableauSansHaut',
            Cellule: 'Cellule',
            CelluleSaisie: 'CelluleSaisie',
            LienConsole: 'LienConsole',
            SansOutline: 'SansOutline',
            LienNoir: 'LienNoir',
            AvecScrollHorizontal: 'AvecScrollHorizontal',
            AvecScrollVertical: 'AvecScrollVertical',
            AvecScrollVerticalAuto: 'AvecScrollVerticalAuto',
            SansOverflow: 'SansOverflow',
            ImageMobile: 'ImageMobile',
            DegradeLineaireHorizontal: 'DegradeLineaireHorizontal',
            Bordure_Accessible: 'Bordure_Accessible',
            CelluleZoneTexte_Accessible: 'CelluleZoneTexte_Accessible',
            CelluleTexte_Accessible: 'CelluleTexte_Accessible',
            CelluleTexte: 'CelluleTexte',
            CelluleZoneTexte: 'CelluleZoneTexte',
            NoWrap: 'NoWrap',
            WhiteSpaceNormal: 'WhiteSpaceNormal',
            InputFile: 'InputFile',
            ieEllipsis: 'ie-ellipsis',
            ieTelephone: 'ie-telephone',
            ieIndicatiftel: 'ie-indicatiftel',
            socialNum: 'social-num',
            BorderBox: 'BorderBox',
            ContentBox: 'ContentBox',
            NePasImprimer: 'NePasImprimer',
            Masquer_Screen: 'Masquer_Screen',
            LibelleHaut: 'LibelleHaut',
            checkConteneur: 'check-conteneur',
            icon: 'icon',
            iSmall: 'i-small',
            iMedium: 'i-medium',
            iLarge: 'i-large',
            iAsDeco: 'i-as-deco',
            infosIcon: 'infos-icon',
            off: 'off',
            hasText: 'has-text',
            libelle: 'libelle',
            pseudoIconeDs: 'pseudo-icone-ds',
            icon_piece_jointe: 'icon_piece_jointe',
            icon_personnalise_pj: 'icon_personnalise_pj',
            ieTexte: 'ie-texte',
            ieTexteSmall: 'ie-texte-small',
            colored: 'colored',
            ieTitre: 'ie-titre',
            ieTitreCouleur: 'ie-titre-couleur',
            ieTitreCouleurLowercase: 'ie-titre-couleur-lowercase',
            ieTitrePetit: 'ie-titre-petit',
            ieTitreCouleurPetit: 'ie-titre-couleur-petit',
            ieSousTitre: 'ie-sous-titre',
            ieTitreGros: 'ie-titre-gros',
            souligne: 'souligne',
            linkIconAfter: 'link-icon-after',
            withUnderline: 'with-underline',
            linkIcon: 'link-icon',
            onlyMobile: 'only-mobile',
            onlyEspace: 'only-espace',
            messageConteneur: 'message-conteneur',
            iconic: 'iconic',
            icon_qcm: 'icon_qcm',
            sep: 'sep',
            borderL: 'border-l',
            borderB: 'border-b',
            zoneFiltres: 'zone-filtres',
            objetFiltre: 'objet-filtre',
            fieldContain: 'field-contain',
            ObjetSaisie: 'ObjetSaisie',
            filtreFooter: 'filtre-footer',
            filtreCbsWrapper: 'filtre-cbs-wrapper',
            cbItem: 'cb-item',
            DonneesListe_FeuilleAppel: 'DonneesListe_FeuilleAppel',
            inTd: 'in-td',
            iconesContain: 'icones-contain',
            salles: 'salles',
            theme_color_claire: 'theme_color_claire',
            theme_color_moyen1: 'theme_color_moyen1',
            theme_color_foncee: 'theme_color_foncee',
            theme_color_sombre: 'theme_color_sombre',
            theme_bg_claire: 'theme_bg_claire',
            theme_bg_moyen1: 'theme_bg_moyen1',
            theme_bg_foncee: 'theme_bg_foncee',
            theme_bg_sombre: 'theme_bg_sombre',
            notation_pastille_moy_NR: 'notation_pastille_moy_NR',
            bandeauQcm: 'bandeau-qcm',
            timeContain: 'time-contain',
            dateContain: 'date-contain',
            colore: 'colore',
            listeRecap: 'liste-recap',
            ellipsisMultilignes: 'ellipsis-multilignes',
            ellipsisSansHyphens: 'ellipsis-sans-hyphens',
            nbr3: 'nbr3',
            nbr4: 'nbr4',
            nbr5: 'nbr5',
            nbr6: 'nbr6',
            tableHeader: 'table-header',
            titre: 'titre',
            btaContain: 'bta-contain',
            divHeader: 'div-header',
            ieHint: 'ie-hint',
            visible: 'visible',
            ieHintCont: 'ie-hint-cont',
            surlignageConteneur: 'surlignage-conteneur',
            surlignageRechercheTexte: 'surlignage-recherche-texte',
            noBorder: 'no-border',
            horairesConteneur: 'horaires-conteneur',
            horaire: 'horaire',
            iecb: 'iecb',
            wrapperInput: 'wrapper-input',
            asGrid: 'as-grid',
            hasDots: 'has-dots',
            selecfile: 'selecfile',
            labelContain: 'label-contain',
            chipsContain: 'chips-contain',
            evals: 'evals',
            listeUrlChips: 'liste-url-chips',
            labelUp: 'label-up',
            fixedHeight: 'fixed-height',
            constrainedBloc: 'constrained-bloc',
            inputWrapper: 'input-wrapper',
            asMultiChoix: 'as-multi-choix',
            ocbLibelle: 'ocb-libelle',
            txtComment: 'txt-comment',
            periodeContain: 'periode-contain',
            asDatePicker: 'as-date-picker',
            asPlaceholder: 'as-placeholder',
            timeConteneur: 'time-conteneur',
            attestationContain: 'attestation-contain',
            sharedContain: 'shared-contain',
            carreFacultatif: 'carre-facultatif',
            locked: 'locked',
            inRow: 'in-row',
            ieBtnselecteur: 'ie-btnselecteur',
            chipsInside: 'chips-inside',
            bsLibelle: 'bs-libelle',
            ieCombo: 'ie-combo',
            echeance: 'echeance',
            dateEcheance: 'date-echeance',
            eventsContain: 'events-contain',
            comboSelecteur: 'combo-selecteur',
            ObjetSaisie_100P: 'ObjetSaisie_100P',
            noLine: 'no-line',
            withCombo: 'with-combo',
            periodeConteneur: 'periode-conteneur',
            dureeConteneur: 'duree-conteneur',
            baremeConteneur: 'bareme-conteneur',
            publicConteneur: 'public-conteneur',
            inputNote: 'input-note',
            inputTime: 'input-time',
            chip: 'chip',
            devoirsContain: 'devoirs-contain',
            tightened: 'tightened',
            lockContain: 'lock-contain',
            facultatifContain: 'facultatif-contain',
            facultatifCarre: 'facultatif-carre',
            zoneFacultatif: 'zone-facultatif',
            marge: 'marge',
            asStrong: 'as-strong',
            inputWrapperDisabled: 'input-wrapper-disabled',
            datesContain: 'dates-contain',
            dateWrapper: 'date-wrapper',
            colsOnMobile: 'cols-on-mobile',
            avecBordure: 'avec-bordure',
            borderBottom: 'border-bottom',
            selectFile: 'select-file',
            pjIcon: 'pj-icon',
            pjGlobalConteneur: 'pj-global-conteneur',
            pjCols: 'pj-cols',
            isDisabled: 'is-disabled',
            btnImage: 'btnImage',
            btnImageIcon: 'btnImageIcon',
            colorNeutre: 'color-neutre',
            btnImageDisable: 'btnImageDisable',
            docsJoints: 'docs-joints',
            pjListeConteneur: 'pj-liste-conteneur',
            pjCarrousselConteneur: 'pj-carroussel-conteneur',
            modulePjListe: 'module-pj-liste',
            ObjetGalerieCarrousel: 'ObjetGalerieCarrousel',
            zoneContenu: 'zoneContenu',
            zoneVisu: 'zoneVisu',
            conteneurDiapos: 'conteneurDiapos',
            onlyOne: 'onlyOne',
            diapo: 'diapo',
            on: 'on',
            squareColorAppel: 'square-color-appel',
            fontVerdana: 'font-verdana',
            Bordure: 'Bordure',
            bordure: 'bordure',
            bordureBasse: 'bordure-basse',
            bordureHaute: 'bordure-haute',
            bordureGauche: 'bordure-gauche',
            bordureDroite: 'bordure-droite',
            identiteVignette: 'identite-vignette',
            asCircle: 'as-circle',
            identiteAppli: 'identite-appli',
            bulle: 'bulle',
            test1: 'test-1',
            test2: 'test-2',
            test3: 'test-3',
            test4: 'test-4',
            lottiePatience: 'lottie-patience',
            champRequis: 'champ-requis',
            fixResetCssTableAvant2023: 'fix-reset-css-table-avant-2023',
            widthFitContent: 'width-fit-content',
            themeColorClaire: 'theme-color-claire',
            themeColorMoyen: 'theme-color-moyen',
            themeColorFoncee: 'theme-color-foncee',
            themeColorSombre: 'theme-color-sombre',
            themeBgClaire: 'theme-bg-claire',
            themeBgMoyen: 'theme-bg-moyen',
            themeBgFoncee: 'theme-bg-foncee',
            themeBgSombre: 'theme-bg-sombre',
            debugWAIBk: 'debug-WAI-bk',
            flexResponsive: 'flex-responsive',
            dateNotif: 'date-notif'
        };
    },
    fn: 'divers.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesStyles = void 0;
        require("Styles.css");
        exports.StylesStyles = {
            Gras: 'Gras',
            GrasFocus: 'GrasFocus',
            GrasSurvol: 'GrasSurvol',
            Maigre: 'Maigre',
            Italique: 'Italique',
            Souligne: 'Souligne',
            SouligneSurvol: 'SouligneSurvol',
            Barre: 'Barre'
        };
    },
    fn: 'styles.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesTexte = void 0;
        require("Texte.css");
        exports.StylesTexte = {
            Texte: 'Texte',
            Texte5: 'Texte5',
            Texte6: 'Texte6',
            Texte7: 'Texte7',
            Texte8: 'Texte8',
            Texte9: 'Texte9',
            Texte10: 'Texte10',
            Texte11: 'Texte11',
            Texte12: 'Texte12',
            Texte13: 'Texte13',
            Texte14: 'Texte14',
            Texte16: 'Texte16',
            Texte18: 'Texte18',
            Texte20: 'Texte20',
            Texte24: 'Texte24',
            Titre: 'Titre',
            TitreSansTaille: 'TitreSansTaille',
            Titre11Ombre: 'Titre11Ombre',
            Fenetre_Impression: 'Fenetre_Impression',
            fontSize11: 'font-size-11',
            fontSize12: 'font-size-12',
            fontSize13: 'font-size-13',
            fontSize15: 'font-size-15',
            fontSize16: 'font-size-16',
            fontSize19: 'font-size-19',
            fontSize21: 'font-size-21',
            fontSize24: 'font-size-24',
            fontSize29: 'font-size-29'
        };
    },
    fn: 'texte.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesSurFocus = void 0;
        require("SurFocus.css");
        exports.StylesSurFocus = {
            SouligneSurFocus: 'SouligneSurFocus',
            GrasSurFocus: 'GrasSurFocus',
            CouleurFondSurFocus: 'CouleurFondSurFocus',
            CouleurFondFenetreSurFocus: 'CouleurFondFenetreSurFocus'
        };
    },
    fn: 'surfocus.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesCommunEspace = void 0;
        require("communEspace.css");
        exports.StylesCommunEspace = {
            messageVide: 'message-vide',
            message: 'message',
            Image_No_Data: 'Image_No_Data',
            ThemePronote: 'ThemePronote',
            evitement: 'evitement'
        };
    },
    fn: 'communespace.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesPage = void 0;
        require("Page.css");
        exports.StylesPage = {
            Actualites_Actualite: 'Actualites_Actualite',
            Actualites_ListeActualites: 'Actualites_ListeActualites',
            Actualites_ListeSelectionnee: 'Actualites_ListeSelectionnee',
            Actualites_ZoneDeSaisie: 'Actualites_ZoneDeSaisie',
            InformationMedicales_Ligne: 'InformationMedicales_Ligne',
            InformationMedicales_Titre: 'InformationMedicales_Titre',
            InformationMedicales_TextArea: 'InformationMedicales_TextArea',
            ListeOrientations_Liste: 'ListeOrientations_Liste',
            Menus_Tableau: 'Menus_Tableau',
            Menus_TableauImpression: 'Menus_TableauImpression',
            Menus_CelluleTitreImpression: 'Menus_CelluleTitreImpression',
            Menus_Cellule: 'Menus_Cellule',
            Menus_CelluleImpression: 'Menus_CelluleImpression',
            Menus_CelluleTitre: 'Menus_CelluleTitre',
            CouleurFond_Absence: 'CouleurFond_Absence',
            CouleurFond_Retard: 'CouleurFond_Retard',
            CouleurFond_Exclusion: 'CouleurFond_Exclusion'
        };
    },
    fn: 'page.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesWidget = void 0;
        require("Widget.css");
        exports.StylesWidget = {
            WidgetToutVoir: 'WidgetToutVoir',
            WidgetFermer: 'WidgetFermer',
            WidgetActualiser: 'WidgetActualiser',
            WidgetDSEvaluation: 'WidgetDSEvaluation',
            WidgetTitre: 'WidgetTitre',
            WidgetLignePaire: 'WidgetLignePaire',
            WidgetLigneImpaire: 'WidgetLigneImpaire',
            WidgetCumul: 'WidgetCumul',
            WidgetEspaceGauche: 'WidgetEspaceGauche'
        };
    },
    fn: 'widget.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        if (typeof Object.assign !== 'function') {
            (function() {
                Object.assign = function(target) {
                    'use strict';
                    if (target === undefined || target === null) {
                        throw new TypeError('Cannot convert undefined or null to object');
                    }
                    var output = Object(target);
                    for (var index = 1; index < arguments.length; index++) {
                        var source = arguments[index];
                        if (source !== undefined && source !== null) {
                            for (var nextKey in source) {
                                if (source.hasOwnProperty(nextKey)) {
                                    output[nextKey] = source[nextKey];
                                }
                            }
                        }
                    }
                    return output;
                }
                ;
            }
            )();
        }
    },
    fn: 'object.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        String.prototype.ucfirst = function() {
            return this.replace(this.charAt(0), this.charAt(0).toUpperCase());
        }
        ;
        if (!String.prototype.trim) {
            String.prototype.trim = function() {
                return this.replace(/^\s+|\s+$/g, '');
            }
            ;
        }
        if (!String.prototype.trimStart) {
            String.prototype.trimStart = function() {
                return this.replace(/^\s+/, '');
            }
            ;
        }
        if (!String.prototype.trimEnd) {
            String.prototype.trimEnd = function() {
                return this.replace(/\s+$/, '');
            }
            ;
        }
        String.prototype.avecQuotes = function() {
            return '&quot;' + this + '&quot;';
        }
        ;
        String.prototype.enleverZero = function() {
            return parseFloat(this.replace(/,/g, '.')).toString();
        }
        ;
        String.prototype.escapeJQ = function() {
            return this.replace(/(:|\.|\[|\]|\/|#)/g, '\\$1');
        }
        ;
        String.prototype.replaceRCToHTML = function(aChaineRemplacement) {
            return !!this ? this.replace(/\r\n|\n|\r|&#32;/g, aChaineRemplacement || '<br>') : '';
        }
        ;
        String.prototype.toAttrValue = function() {
            return this.replace(/"/g, '&quot;');
        }
        ;
        String.prototype.toTitle = function() {
            return this.replace(/\r\n|\n|\r/g, '&#010;').toAttrValue();
        }
        ;
        String.prototype.ajouterEntites = function(aSansQuote) {
            let re = aSansQuote ? /([<>'&])/g : /([<>"'&])/g;
            return this.replace(re, (m) => {
                if (m === '<') {
                    return '&lt;';
                }
                if (m === '>') {
                    return '&gt;';
                }
                if (m === '"') {
                    return '&quot;';
                }
                if (m === '\'') {
                    return '&#039;';
                }
                if (m === '&') {
                    return '&amp;';
                }
                return m;
            }
            );
        }
        ;
        String.prototype.enleverEntites = function() {
            let re = /&(lt|gt|quot|#039|amp);/g;
            return this.replace(re, (m) => {
                if (m === '&lt;') {
                    return '<';
                }
                if (m === '&gt;') {
                    return '>';
                }
                if (m === '&quot;') {
                    return '"';
                }
                if (m === '&#039;') {
                    return '\'';
                }
                if (m === '&amp;') {
                    return '&';
                }
                return m;
            }
            );
        }
        ;
        String.prototype.format = function(aTabElements) {
            if (!Array.isArray(aTabElements)) {
                if (typeof aTabElements !== 'number' && typeof aTabElements !== 'string') {
                    return this;
                }
                aTabElements = [aTabElements];
            }
            const lMapElements = aTabElements.map( (aElement) => {
                if (typeof aElement === 'function') {
                    try {
                        return aElement();
                    } catch (e) {
                        return '';
                    }
                }
                return aElement;
            }
            );
            const lFuncSubst = (aSubst, aCarSuiv) => {
                let lSubst = aSubst;
                if (aCarSuiv === 'd') {
                    lSubst = parseInt(lSubst);
                    if (isNaN(lSubst)) {
                        lSubst = '';
                    }
                }
                return lSubst;
            }
            ;
            let lIndex = 0;
            let lStrResult = '';
            let lCar;
            let lCarSuiv;
            let lIndexSubsSansNumero = 0;
            let lDieseEnCours = false;
            let lStrPourcentEnCours = '';
            let lStrNumeroSubst = '';
            let lNumeroSubst;
            const lRegNumber = new RegExp('[0-9]');
            const lRegExType = new RegExp('(s|d|e|f|g|n|m)');
            while (lIndex < this.length) {
                lCar = this[lIndex];
                lCarSuiv = this[lIndex + 1];
                if (lStrPourcentEnCours) {
                    if (lCarSuiv && lCar === ':' && lCarSuiv.match(lRegExType)) {
                        lNumeroSubst = parseInt(lStrPourcentEnCours);
                        if (lNumeroSubst < lMapElements.length) {
                            lStrResult += lFuncSubst(lMapElements[lNumeroSubst], lCarSuiv);
                        }
                        lIndex += 1;
                        lStrPourcentEnCours = '';
                    } else if (lCarSuiv && lCarSuiv.match(lRegNumber)) {
                        lStrPourcentEnCours += lCarSuiv;
                    } else {
                        lStrResult += '%' + lStrPourcentEnCours + lCar;
                        lStrPourcentEnCours = '';
                    }
                } else if (lDieseEnCours) {
                    lStrNumeroSubst += lCar;
                    if (!lCarSuiv || !lCarSuiv.match(lRegNumber)) {
                        lDieseEnCours = false;
                        lNumeroSubst = parseInt(lStrNumeroSubst) - 1;
                        if (lNumeroSubst < lMapElements.length) {
                            lStrResult += lMapElements[lNumeroSubst];
                        }
                        lStrNumeroSubst = '';
                    }
                } else {
                    switch (lCar) {
                    case '#':
                        if (lCarSuiv.match(lRegNumber)) {
                            lDieseEnCours = true;
                        }
                        break;
                    case '%':
                        if (lCarSuiv === 's' || lCarSuiv === 'd') {
                            lIndex += 1;
                            if (lIndexSubsSansNumero < lMapElements.length) {
                                lStrResult += lFuncSubst(lMapElements[lIndexSubsSansNumero], lCarSuiv);
                            }
                            lIndexSubsSansNumero += 1;
                        } else if (lCarSuiv.match(lRegNumber)) {
                            lStrPourcentEnCours = lCarSuiv;
                            lIndex += 1;
                        } else {
                            lStrResult += lCar;
                        }
                        break;
                    default:
                        lStrResult += lCar;
                    }
                }
                lIndex += 1;
            }
            return lStrResult;
        }
        ;
        if (!String.prototype.startsWith) {
            String.prototype.startsWith = function(searchString, position) {
                position = position || 0;
                return this.substr(position, searchString.length) === searchString;
            }
            ;
        }
        if (!String.prototype.endsWith) {
            String.prototype.endsWith = function(searchString, position) {
                let subjectString = this.toString();
                if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {
                    position = subjectString.length;
                }
                position -= searchString.length;
                let lastIndex = subjectString.indexOf(searchString, position);
                return lastIndex !== -1 && lastIndex === position;
            }
            ;
        }
        if (!String.prototype.includes) {
            String.prototype.includes = function(search, start) {
                if (typeof start !== 'number') {
                    start = 0;
                }
                if (start + search.length > this.length) {
                    return false;
                } else {
                    return this.indexOf(search, start) !== -1;
                }
            }
            ;
        }
        if (!String.prototype.replaceAll) {
            String.prototype.replaceAll = function(search, replacement) {
                if (typeof search !== 'string' && !(search instanceof RegExp)) {}
                const pattern = search instanceof RegExp ? search : new RegExp(search,'g');
                return this.replace(pattern, replacement);
            }
            ;
        }
    },
    fn: 'string.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Math.borner = function(aValeur, aMin, aMax) {
            return Math.max(Math.min(aValeur, aMax), aMin);
        }
        ;
        Math.log10 = Math.log10 || function(x) {
            return Math.log(x) * Math.LOG10E;
        }
        ;
        (function() {
            function decimalAdjust(type, value, exp) {
                if (typeof exp === 'undefined' || +exp === 0) {
                    return Math[type](value);
                }
                value = +value;
                exp = +exp;
                if (value === null || isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {
                    return NaN;
                }
                if (value < 0) {
                    return -decimalAdjust(type, -value, exp);
                }
                value = value.toString().split('e');
                value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));
                value = value.toString().split('e');
                return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));
            }
            if (!Math.round10) {
                Math.round10 = function(value, exp) {
                    return decimalAdjust('round', value, exp);
                }
                ;
            }
            if (!Math.floor10) {
                Math.floor10 = function(value, exp) {
                    return decimalAdjust('floor', value, exp);
                }
                ;
            }
            if (!Math.ceil10) {
                Math.ceil10 = function(value, exp) {
                    return decimalAdjust('ceil', value, exp);
                }
                ;
            }
        }
        )();
    },
    fn: 'math.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("es6-promise.auto.min.js");
        require("es6-promise.auto.js");
        if (!Promise.prototype['finally']) {
            Promise.prototype['finally'] = function finallyPolyfill(callback) {
                let {constructor} = this;
                return this.then( (value) => {
                    return constructor.resolve(callback()).then( () => {
                        return value;
                    }
                    );
                }
                , (reason) => {
                    return constructor.resolve(callback()).then( () => {
                        throw reason;
                    }
                    );
                }
                );
            }
            ;
        }
    },
    fn: 'promise.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        (function(n, l) {
            "object" === typeof exports && "undefined" !== typeof module ? module.exports = l() : "function" === typeof define && define.amd ? define(l) : n.ResizeObserver = l()
        }
        )(this, function() {
            function n(b) {
                for (var a = [], c = arguments.length - 1; 0 < c--; )
                    a[c] = arguments[c + 1];
                return a.reduce(function(a, c) {
                    return a + (parseFloat(b["border-" + c + "-width"]) || 0)
                }, 0)
            }
            var l = function() {
                function b(b, c) {
                    var a = -1;
                    b.some(function(b, e) {
                        return b[0] === c ? (a = e,
                        !0) : !1
                    });
                    return a
                }
                return "undefined" !== typeof Map ? Map : function() {
                    function a() {
                        this.__entries__ = []
                    }
                    var c = {
                        size: {
                            configurable: !0
                        }
                    };
                    c.size.get = function() {
                        return this.__entries__.length
                    }
                    ;
                    a.prototype.get = function(a) {
                        a = b(this.__entries__, a);
                        return (a = this.__entries__[a]) && a[1]
                    }
                    ;
                    a.prototype.set = function(a, c) {
                        var e = b(this.__entries__, a);
                        ~e ? this.__entries__[e][1] = c : this.__entries__.push([a, c])
                    }
                    ;
                    a.prototype["delete"] = function(a) {
                        var c = this.__entries__;
                        a = b(c, a);
                        ~a && c.splice(a, 1)
                    }
                    ;
                    a.prototype.has = function(a) {
                        return !!~b(this.__entries__, a)
                    }
                    ;
                    a.prototype.clear = function() {
                        this.__entries__.splice(0)
                    }
                    ;
                    a.prototype.forEach = function(a, b) {
                        void 0 === b && (b = null);
                        for (var c = 0, e = this.__entries__; c < e.length; c += 1) {
                            var g = e[c];
                            a.call(b, g[1], g[0])
                        }
                    }
                    ;
                    Object.defineProperties(a.prototype, c);
                    return a
                }()
            }()
              , q = "undefined" !== typeof window && "undefined" !== typeof document && window.document === document
              , p = "undefined" !== typeof global && global.Math === Math ? global : "undefined" !== typeof self && self.Math === Math ? self : "undefined" !== typeof window && Math === Math ? window : Function("return this")()
              , x = function() {
                return "function" === typeof requestAnimationFrame ? requestAnimationFrame.bind(p) : function(b) {
                    return setTimeout(function() {
                        return b(Date.now())
                    }, 1E3 / 60)
                }
            }()
              , y = function(b, a) {
                function c() {
                    f && (f = !1,
                    b());
                    h && g()
                }
                function e() {
                    x(c)
                }
                function g() {
                    var b = Date.now();
                    if (f) {
                        if (2 > b - d)
                            return;
                        h = !0
                    } else
                        f = !0,
                        h = !1,
                        setTimeout(e, a);
                    d = b
                }
                var f = !1
                  , h = !1
                  , d = 0;
                return g
            }
              , z = "top right bottom left width height size weight".split(" ")
              , A = "undefined" !== typeof MutationObserver
              , d = function() {
                this.mutationEventsAdded_ = this.connected_ = !1;
                this.mutationsObserver_ = null;
                this.observers_ = [];
                this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);
                this.refresh = y(this.refresh.bind(this), 20)
            };
            d.prototype.addObserver = function(b) {
                ~this.observers_.indexOf(b) || this.observers_.push(b);
                this.connected_ || this.connect_()
            }
            ;
            d.prototype.removeObserver = function(b) {
                var a = this.observers_;
                b = a.indexOf(b);
                ~b && a.splice(b, 1);
                !a.length && this.connected_ && this.disconnect_()
            }
            ;
            d.prototype.refresh = function() {
                this.updateObservers_() && this.refresh()
            }
            ;
            d.prototype.updateObservers_ = function() {
                var b = this.observers_.filter(function(a) {
                    return a.gatherActive(),
                    a.hasActive()
                });
                b.forEach(function(a) {
                    return a.broadcastActive()
                });
                return 0 < b.length
            }
            ;
            d.prototype.connect_ = function() {
                q && !this.connected_ && (document.addEventListener("transitionend", this.onTransitionEnd_),
                window.addEventListener("resize", this.refresh),
                A ? (this.mutationsObserver_ = new MutationObserver(this.refresh),
                this.mutationsObserver_.observe(document, {
                    attributes: !0,
                    childList: !0,
                    characterData: !0,
                    subtree: !0
                })) : (document.addEventListener("DOMSubtreeModified", this.refresh),
                this.mutationEventsAdded_ = !0),
                this.connected_ = !0)
            }
            ;
            d.prototype.disconnect_ = function() {
                q && this.connected_ && (document.removeEventListener("transitionend", this.onTransitionEnd_),
                window.removeEventListener("resize", this.refresh),
                this.mutationsObserver_ && this.mutationsObserver_.disconnect(),
                this.mutationEventsAdded_ && document.removeEventListener("DOMSubtreeModified", this.refresh),
                this.mutationsObserver_ = null,
                this.connected_ = this.mutationEventsAdded_ = !1)
            }
            ;
            d.prototype.onTransitionEnd_ = function(b) {
                var a = b.propertyName;
                void 0 === a && (a = "");
                z.some(function(b) {
                    return !!~a.indexOf(b)
                }) && this.refresh()
            }
            ;
            d.getInstance = function() {
                this.instance_ || (this.instance_ = new d);
                return this.instance_
            }
            ;
            d.instance_ = null;
            var u = function(b, a) {
                for (var c = 0, e = Object.keys(a); c < e.length; c += 1) {
                    var g = e[c];
                    Object.defineProperty(b, g, {
                        value: a[g],
                        enumerable: !1,
                        writable: !1,
                        configurable: !0
                    })
                }
                return b
            }
              , m = function(b) {
                return b && b.ownerDocument && b.ownerDocument.defaultView || p
            }
              , v = {
                x: 0,
                y: 0,
                width: 0,
                height: 0
            }
              , B = function() {
                return "undefined" !== typeof SVGGraphicsElement ? function(b) {
                    return b instanceof m(b).SVGGraphicsElement
                }
                : function(b) {
                    return b instanceof m(b).SVGElement && "function" === typeof b.getBBox
                }
            }()
              , r = function(b) {
                this.broadcastHeight = this.broadcastWidth = 0;
                this.contentRect_ = {
                    x: 0,
                    y: 0,
                    width: 0,
                    height: 0
                };
                this.target = b
            };
            r.prototype.isActive = function() {
                var b = this.target;
                if (q)
                    if (B(b)) {
                        var a = b.getBBox();
                        a = {
                            x: 0,
                            y: 0,
                            width: a.width,
                            height: a.height
                        }
                    } else {
                        var c = b.clientWidth
                          , e = b.clientHeight;
                        if (c || e) {
                            var g = m(b).getComputedStyle(b);
                            a = {};
                            for (var f = 0, h = ["top", "right", "bottom", "left"]; f < h.length; f += 1) {
                                var d = h[f];
                                a[d] = parseFloat(g["padding-" + d]) || 0
                            }
                            var k = a.left + a.right;
                            d = a.top + a.bottom;
                            f = parseFloat(g.width) || 0;
                            h = parseFloat(g.height) || 0;
                            "border-box" === g.boxSizing && (Math.round(f + k) !== c && (f -= n(g, "left", "right") + k),
                            Math.round(h + d) !== e && (h -= n(g, "top", "bottom") + d));
                            b !== m(b).document.documentElement && (b = Math.round(f + k) - c,
                            e = Math.round(h + d) - e,
                            1 !== Math.abs(b) && (f -= b),
                            1 !== Math.abs(e) && (h -= e));
                            a = {
                                x: a.left,
                                y: a.top,
                                width: f,
                                height: h
                            }
                        } else
                            a = v
                    }
                else
                    a = v;
                this.contentRect_ = a;
                return a.width !== this.broadcastWidth || a.height !== this.broadcastHeight
            }
            ;
            r.prototype.broadcastRect = function() {
                var b = this.contentRect_;
                this.broadcastWidth = b.width;
                this.broadcastHeight = b.height;
                return b
            }
            ;
            var C = function(b, a) {
                var c = a.x
                  , e = a.y
                  , d = a.width
                  , f = a.height
                  , h = Object.create(("undefined" !== typeof DOMRectReadOnly ? DOMRectReadOnly : Object).prototype);
                u(h, {
                    x: c,
                    y: e,
                    width: d,
                    height: f,
                    top: e,
                    right: c + d,
                    bottom: f + e,
                    left: c
                });
                u(this, {
                    target: b,
                    contentRect: h
                })
            }
              , k = function(b, a, c) {
                this.activeObservations_ = [];
                this.observations_ = new l;
                if ("function" !== typeof b)
                    throw new TypeError("The callback provided as parameter 1 is not a function.");
                this.callback_ = b;
                this.controller_ = a;
                this.callbackCtx_ = c
            };
            k.prototype.observe = function(b) {
                if (!arguments.length)
                    throw new TypeError("1 argument required, but only 0 present.");
                if ("undefined" !== typeof Element && Element instanceof Object) {
                    if (!(b instanceof m(b).Element))
                        throw new TypeError('parameter 1 is not of type "Element".');
                    var a = this.observations_;
                    a.has(b) || (a.set(b, new r(b)),
                    this.controller_.addObserver(this),
                    this.controller_.refresh())
                }
            }
            ;
            k.prototype.unobserve = function(b) {
                if (!arguments.length)
                    throw new TypeError("1 argument required, but only 0 present.");
                if ("undefined" !== typeof Element && Element instanceof Object) {
                    if (!(b instanceof m(b).Element))
                        throw new TypeError('parameter 1 is not of type "Element".');
                    var a = this.observations_;
                    a.has(b) && (a["delete"](b),
                    a.size || this.controller_.removeObserver(this))
                }
            }
            ;
            k.prototype.disconnect = function() {
                this.clearActive();
                this.observations_.clear();
                this.controller_.removeObserver(this)
            }
            ;
            k.prototype.gatherActive = function() {
                var b = this;
                this.clearActive();
                this.observations_.forEach(function(a) {
                    a.isActive() && b.activeObservations_.push(a)
                })
            }
            ;
            k.prototype.broadcastActive = function() {
                if (this.hasActive()) {
                    var b = this.callbackCtx_
                      , a = this.activeObservations_.map(function(a) {
                        return new C(a.target,a.broadcastRect())
                    });
                    this.callback_.call(b, a, b);
                    this.clearActive()
                }
            }
            ;
            k.prototype.clearActive = function() {
                this.activeObservations_.splice(0)
            }
            ;
            k.prototype.hasActive = function() {
                return 0 < this.activeObservations_.length
            }
            ;
            var w = "undefined" !== typeof WeakMap ? new WeakMap : new l
              , t = function(b) {
                if (!(this instanceof t))
                    throw new TypeError("Cannot call a class as a function.");
                if (!arguments.length)
                    throw new TypeError("1 argument required, but only 0 present.");
                var a = d.getInstance();
                a = new k(b,a,this);
                w.set(this, a)
            };
            ["observe", "unobserve", "disconnect"].forEach(function(b) {
                t.prototype[b] = function() {
                    var a;
                    return (a = w.get(this))[b].apply(a, arguments)
                }
            });
            var D = "undefined" !== typeof p.ResizeObserver ? p.ResizeObserver : t;
            return D
        });
    },
    fn: 'resizeobserver_polyfill.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        (function() {
            function l(a) {
                try {
                    return a.defaultView && a.defaultView.frameElement || null
                } catch (b) {
                    return null
                }
            }
            function v(a) {
                this.time = a.time;
                this.target = a.target;
                this.rootBounds = u(a.rootBounds);
                this.boundingClientRect = u(a.boundingClientRect);
                this.intersectionRect = u(a.intersectionRect || m());
                this.isIntersecting = !!a.intersectionRect;
                a = this.boundingClientRect;
                a = a.width * a.height;
                var b = this.intersectionRect;
                b = b.width * b.height;
                this.intersectionRatio = a ? Number((b / a).toFixed(4)) : this.isIntersecting ? 1 : 0
            }
            function g(a, b) {
                var c = b || {};
                if ("function" != typeof a)
                    throw Error("callback must be a function");
                if (c.root && 1 != c.root.nodeType && 9 != c.root.nodeType)
                    throw Error("root must be a Document or Element");
                this.l = A(this.l.bind(this), this.F);
                this.H = a;
                this.g = [];
                this.h = [];
                this.v = this.M(c.rootMargin);
                this.thresholds = this.L(c.threshold);
                this.root = c.root || null;
                this.rootMargin = this.v.map(function(d) {
                    return d.value + d.D
                }).join(" ");
                this.i = [];
                this.j = []
            }
            function A(a, b) {
                var c = null;
                return function() {
                    c || (c = setTimeout(function() {
                        a();
                        c = null
                    }, b))
                }
            }
            function w(a, b, c, d) {
                "function" == typeof a.addEventListener ? a.addEventListener(b, c, d || !1) : "function" == typeof a.attachEvent && a.attachEvent("on" + b, c)
            }
            function x(a, b, c, d) {
                "function" == typeof a.removeEventListener ? a.removeEventListener(b, c, d || !1) : "function" == typeof a.R && a.R("on" + b, c)
            }
            function n(a) {
                try {
                    var b = a.getBoundingClientRect()
                } catch (c) {}
                if (!b)
                    return m();
                b.width && b.height || (b = {
                    top: b.top,
                    right: b.right,
                    bottom: b.bottom,
                    left: b.left,
                    width: b.right - b.left,
                    height: b.bottom - b.top
                });
                return b
            }
            function m() {
                return {
                    top: 0,
                    bottom: 0,
                    left: 0,
                    right: 0,
                    width: 0,
                    height: 0
                }
            }
            function u(a) {
                return !a || "x"in a ? a : {
                    top: a.top,
                    y: a.top,
                    bottom: a.bottom,
                    left: a.left,
                    x: a.left,
                    right: a.right,
                    width: a.width,
                    height: a.height
                }
            }
            function y(a, b) {
                for (var c = b; c; ) {
                    if (c == a)
                        return !0;
                    c = p(c)
                }
                return !1
            }
            function p(a) {
                var b = a.parentNode;
                if (9 == a.nodeType && a != k)
                    return l(a);
                b && b.assignedSlot && (b = b.assignedSlot.parentNode);
                return b && 11 == b.nodeType && b.host ? b.host : b
            }
            function z(a) {
                return a && 9 === a.nodeType
            }
            if ("object" === typeof window)
                if ("IntersectionObserver"in window && "IntersectionObserverEntry"in window && "intersectionRatio"in window.IntersectionObserverEntry.prototype)
                    "isIntersecting"in window.IntersectionObserverEntry.prototype || Object.defineProperty(window.IntersectionObserverEntry.prototype, "isIntersecting", {
                        get: function() {
                            return 0 < this.intersectionRatio
                        }
                    });
                else {
                    var k = function(a) {
                        for (var b = l(a); b; )
                            a = b.ownerDocument,
                            b = l(a);
                        return a
                    }(window.document)
                      , q = [];
                    g.prototype.F = 100;
                    g.prototype.m = null;
                    g.prototype.G = !0;
                    g.prototype.observe = function(a) {
                        if (!this.g.some(function(b) {
                            return b.element == a
                        })) {
                            if (!a || 1 != a.nodeType)
                                throw Error("target must be an Element");
                            this.N();
                            this.g.push({
                                element: a,
                                C: null
                            });
                            this.s(a.ownerDocument);
                            this.l()
                        }
                    }
                    ;
                    g.prototype.unobserve = function(a) {
                        this.g = this.g.filter(function(b) {
                            return b.element != a
                        });
                        this.A(a.ownerDocument);
                        0 == this.g.length && this.B()
                    }
                    ;
                    g.prototype.disconnect = function() {
                        this.g = [];
                        this.P();
                        this.B()
                    }
                    ;
                    g.prototype.takeRecords = function() {
                        var a = this.h.slice();
                        this.h = [];
                        return a
                    }
                    ;
                    g.prototype.L = function(a) {
                        a = a || [0];
                        Array.isArray(a) || (a = [a]);
                        return a.sort().filter(function(b, c, d) {
                            if ("number" != typeof b || isNaN(b) || 0 > b || 1 < b)
                                throw Error("threshold must be a number between 0 and 1 inclusively");
                            return b !== d[c - 1]
                        })
                    }
                    ;
                    g.prototype.M = function(a) {
                        a = (a || "0px").split(/\s+/).map(function(b) {
                            b = /^(-?\d*\.?\d+)(px|%)$/.exec(b);
                            if (!b)
                                throw Error("rootMargin must be specified in pixels or percent");
                            return {
                                value: parseFloat(b[1]),
                                D: b[2]
                            }
                        });
                        a[1] = a[1] || a[0];
                        a[2] = a[2] || a[0];
                        a[3] = a[3] || a[1];
                        return a
                    }
                    ;
                    g.prototype.s = function(a) {
                        var b = a.defaultView;
                        if (b && -1 == this.i.indexOf(a)) {
                            var c = this.l
                              , d = null
                              , e = null;
                            this.m ? d = b.setInterval(c, this.m) : (w(b, "resize", c, !0),
                            w(a, "scroll", c, !0),
                            this.G && "MutationObserver"in b && (e = new b.MutationObserver(c),
                            e.observe(a, {
                                attributes: !0,
                                childList: !0,
                                characterData: !0,
                                subtree: !0
                            })));
                            this.i.push(a);
                            this.j.push(function() {
                                var f = a.defaultView;
                                f && (d && f.clearInterval(d),
                                x(f, "resize", c, !0));
                                x(a, "scroll", c, !0);
                                e && e.disconnect()
                            });
                            a != (this.root && (this.root.ownerDocument || this.root) || k) && (b = l(a)) && this.s(b.ownerDocument)
                        }
                    }
                    ;
                    g.prototype.A = function(a) {
                        var b = this.i.indexOf(a);
                        if (-1 != b) {
                            var c = this.root && (this.root.ownerDocument || this.root) || k;
                            if (!this.g.some(function(e) {
                                e = e.element.ownerDocument;
                                if (e == a)
                                    return !0;
                                for (; e && e != c; )
                                    if (e = (e = l(e)) && e.ownerDocument,
                                    e == a)
                                        return !0;
                                return !1
                            })) {
                                var d = this.j[b];
                                this.i.splice(b, 1);
                                this.j.splice(b, 1);
                                d();
                                a != c && (b = l(a)) && this.A(b.ownerDocument)
                            }
                        }
                    }
                    ;
                    g.prototype.P = function() {
                        var a = this.j.slice(0);
                        this.i.length = 0;
                        for (var b = this.j.length = 0; b < a.length; b++)
                            a[b]()
                    }
                    ;
                    g.prototype.l = function() {
                        var a = this.O()
                          , b = a ? this.J() : m();
                        this.g.forEach(function(c) {
                            var d = c.element
                              , e = n(d)
                              , f = this.u(d)
                              , h = c.C
                              , r = a && f && this.o(d, e, b);
                            var t = this.u(d) ? b : m();
                            c = c.C = new v({
                                time: window.performance && performance.now && performance.now(),
                                target: d,
                                boundingClientRect: e,
                                rootBounds: t,
                                intersectionRect: r
                            });
                            h ? a && f ? this.K(h, c) && this.h.push(c) : h && h.isIntersecting && this.h.push(c) : this.h.push(c)
                        }, this);
                        this.h.length && this.H(this.takeRecords(), this)
                    }
                    ;
                    g.prototype.o = function(a, b, c) {
                        if ("none" != window.getComputedStyle(a).display) {
                            var d = b;
                            b = p(a);
                            for (a = !1; !a && b; ) {
                                var e = null
                                  , f = 1 == b.nodeType ? window.getComputedStyle(b) : {};
                                if ("none" == f.display)
                                    return null;
                                if (b == this.root || 9 == b.nodeType)
                                    if (a = !0,
                                    b == this.root || b == k)
                                        e = c;
                                    else {
                                        var h = (b = p(b)) && n(b);
                                        f = b && this.o(b, h, c);
                                        h && f ? (e = f.top - h.top,
                                        h = f.left - h.left,
                                        e = {
                                            top: e,
                                            left: h,
                                            height: f.height,
                                            width: f.width,
                                            bottom: e + f.height,
                                            right: h + f.width
                                        }) : d = b = null
                                    }
                                else
                                    h = b.ownerDocument,
                                    b != h.body && b != h.documentElement && "visible" != f.overflow && (e = n(b));
                                if (e) {
                                    f = Math.max(e.top, d.top);
                                    h = Math.min(e.bottom, d.bottom);
                                    var r = Math.max(e.left, d.left);
                                    d = Math.min(e.right, d.right);
                                    e = d - r;
                                    var t = h - f;
                                    d = 0 <= e && 0 <= t && {
                                        top: f,
                                        bottom: h,
                                        left: r,
                                        right: d,
                                        width: e,
                                        height: t
                                    } || null
                                }
                                if (!d)
                                    break;
                                b = b && p(b)
                            }
                            return d
                        }
                    }
                    ;
                    g.prototype.J = function() {
                        if (this.root && !z(this.root))
                            var a = n(this.root);
                        else {
                            var b = z(this.root) ? this.root : k;
                            a = b.documentElement;
                            b = b.body;
                            a = {
                                top: 0,
                                left: 0,
                                right: a.clientWidth || b.clientWidth,
                                width: a.clientWidth || b.clientWidth,
                                bottom: a.clientHeight || b.clientHeight,
                                height: a.clientHeight || b.clientHeight
                            }
                        }
                        return this.I(a)
                    }
                    ;
                    g.prototype.I = function(a) {
                        var b = this.v.map(function(c, d) {
                            return "px" == c.D ? c.value : c.value * (d % 2 ? a.width : a.height) / 100
                        });
                        b = {
                            top: a.top - b[0],
                            right: a.right + b[1],
                            bottom: a.bottom + b[2],
                            left: a.left - b[3]
                        };
                        b.width = b.right - b.left;
                        b.height = b.bottom - b.top;
                        return b
                    }
                    ;
                    g.prototype.K = function(a, b) {
                        var c = a && a.isIntersecting ? a.intersectionRatio || 0 : -1
                          , d = b.isIntersecting ? b.intersectionRatio || 0 : -1;
                        if (c !== d)
                            for (var e = 0; e < this.thresholds.length; e++) {
                                var f = this.thresholds[e];
                                if (f == c || f == d || f < c !== f < d)
                                    return !0
                            }
                    }
                    ;
                    g.prototype.O = function() {
                        return !this.root || y(k, this.root)
                    }
                    ;
                    g.prototype.u = function(a) {
                        var b = this.root && (this.root.ownerDocument || this.root) || k;
                        return y(b, a) && (!this.root || b == a.ownerDocument)
                    }
                    ;
                    g.prototype.N = function() {
                        0 > q.indexOf(this) && q.push(this)
                    }
                    ;
                    g.prototype.B = function() {
                        var a = q.indexOf(this);
                        -1 != a && q.splice(a, 1)
                    }
                    ;
                    window.IntersectionObserver = g;
                    window.IntersectionObserverEntry = v
                }
        }
        )();
    },
    fn: 'intersectionobserver_polyfill.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("Object");
        require("String");
        require("Math");
        require("Promise");
        if (!global.ResizeObserver) {
            global.ResizeObserver = require('ResizeObserver_polyfill.js');
        }
        require("IntersectionObserver_polyfill");
    },
    fn: 'declarationextensionsobjetnatif.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.assert = void 0;
        exports.breakpoint = breakpoint;
        require("DeclarationExtensionsObjetNatif");
        const assert = ( (aIgnorer, aMessage) => {}
        );
        exports.assert = assert;
        global.assert = assert;
        function breakpoint() {}
    },
    fn: 'divers.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UniqueNumberGenerator = exports.GUID = exports.GenerateurGUID = void 0;
        require("NamespaceIE");
        let lGUID_id = 1;
        let lGUID_ClassCss = 1;
        class GenerateurGUID {
            constructor() {
                this.fGUID = 1;
                this.fCompteur = 0;
            }
            get() {
                let lResult = 'g';
                if (this.fCompteur > 0) {
                    lResult += this.fCompteur + 'x';
                }
                lResult += this.fGUID;
                if (this.fGUID === Number.MAX_VALUE) {
                    this.fGUID = 1;
                    this.fCompteur += 1;
                } else {
                    this.fGUID += 1;
                }
                return lResult;
            }
        }
        exports.GenerateurGUID = GenerateurGUID;
        let GUID = {
            getId() {
                const lResult = 'id_' + lGUID_id;
                lGUID_id += 1;
                return lResult;
            },
            getClassCss() {
                const lResult = 'c_' + lGUID_ClassCss;
                lGUID_ClassCss += 1;
                return lResult;
            },
            generateur: GenerateurGUID,
            getGUIDDelphiVide() {
                return '{00000000-0000-0000-0000-000000000000}';
            }
        };
        exports.GUID = GUID;
        class UniqueNumberGenerator {
            constructor() {
                this.currentNumber = 1;
                this.releasedNumbers = new Set();
                this.activeNumbers = new Set();
            }
            generate() {
                let lNum;
                if (this.releasedNumbers.size > 0) {
                    lNum = this.releasedNumbers.values().next().value;
                    this.releasedNumbers.delete(lNum);
                } else {
                    lNum = this.currentNumber++;
                }
                this.activeNumbers.add(lNum);
                return lNum;
            }
            release(num) {
                if (this.activeNumbers.has(num)) {
                    this.activeNumbers.delete(num);
                    this.releasedNumbers.add(num);
                }
            }
            isActive(num) {
                return this.activeNumbers.has(num);
            }
        }
        exports.UniqueNumberGenerator = UniqueNumberGenerator;
    },
    fn: 'guid.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.MethodesObjet = MethodesObjet;
        require("NamespaceIE");
        require("DeclarationExtensionsObjetNatif");
        function MethodesObjet() {}
        MethodesObjet.getObjectClass = function(aObjet) {
            if (aObjet && aObjet.constructor) {
                return MethodesObjet.getNomClassDeConstructeur(aObjet.constructor);
            }
            return undefined;
        }
        ;
        MethodesObjet.getNomClassDeConstructeur = function(aConstructeur) {
            if (aConstructeur && aConstructeur.name) {
                return aConstructeur.name;
            }
            if (aConstructeur && aConstructeur.toString && MethodesObjet.isFunction(aConstructeur)) {
                const T = aConstructeur.toString().match(/function\s*(\w+)/);
                if (T && T.length === 2) {
                    return T[1];
                }
            }
            return undefined;
        }
        ;
        function _dupliquer(aObjet, _aProfondeur, _aDuplicationParesseuse, aProprietaires, aProprietairesCopie) {
            if ((!aObjet) || (!MethodesObjet.isObject(aObjet))) {
                return aObjet;
            }
            if ('dupliquer'in aObjet && MethodesObjet.isFunction(aObjet.dupliquer)) {
                return aObjet.dupliquer();
            }
            if (Object.prototype.toString.call(aObjet) === '[object File]') {
                return aObjet;
            }
            if (_aProfondeur > 1000) {
                return aObjet;
            }
            let lIndice = -1;
            if (aProprietaires.length > 0) {
                lIndice = aProprietaires.indexOf(aObjet);
            }
            if (lIndice >= 0) {
                return aProprietairesCopie[lIndice];
            }
            let lObjetDuplique, lProp;
            if (MethodesObjet.isArray(aObjet)) {
                lObjetDuplique = new Array(aObjet.length);
            } else if (MethodesObjet.isDate(aObjet)) {
                lObjetDuplique = new Date();
                lObjetDuplique.setTime(aObjet.getTime());
            } else if (MethodesObjet.isBlob(aObjet)) {
                lObjetDuplique = new Blob([aObjet],{
                    type: aObjet.type
                });
            } else {
                lObjetDuplique = Object.create(aObjet.constructor.prototype);
            }
            const lProfondeur = _aProfondeur + 1;
            aProprietaires.push(aObjet);
            aProprietairesCopie.push(lObjetDuplique);
            try {
                const lKeys = Object.keys(aObjet);
                for (let i = 0; i < lKeys.length; i++) {
                    lProp = lKeys[i];
                    const lValeur = aObjet[lProp];
                    if (MethodesObjet.isObject(lValeur)) {
                        if (_aDuplicationParesseuse && (_aProfondeur === 0)) {
                            lObjetDuplique[lProp] = lValeur;
                        } else {
                            lObjetDuplique[lProp] = _dupliquer(lValeur, lProfondeur, false, aProprietaires, aProprietairesCopie);
                        }
                    } else {
                        lObjetDuplique[lProp] = lValeur;
                    }
                }
            } finally {
                aProprietaires.pop();
                aProprietairesCopie.pop();
            }
            return lObjetDuplique;
        }
        MethodesObjet.dupliquer = function(aObjet, aDuplicationParesseuse) {
            return _dupliquer(aObjet, 0, !!aDuplicationParesseuse, [], []);
        }
        ;
        MethodesObjet.isArray = function(object) {
            return Array.isArray(object);
        }
        ;
        MethodesObjet.isFunction = function(object) {
            return typeof object === 'function';
        }
        ;
        MethodesObjet.isString = function(object) {
            return Object.prototype.toString.call(object) === '[object String]';
        }
        ;
        MethodesObjet.isNumber = function(object) {
            return !isNaN(object) && Object.prototype.toString.call(object) === '[object Number]';
        }
        ;
        MethodesObjet.isUndefined = function(object) {
            return typeof object === 'undefined';
        }
        ;
        MethodesObjet.isObject = function(object) {
            return !!object && typeof object === 'object';
        }
        ;
        MethodesObjet.isDate = function(object) {
            return Object.prototype.toString.call(object) === '[object Date]';
        }
        ;
        MethodesObjet.isNan = function(object) {
            const rdigit = /\d/;
            return object === null || object === undefined || !rdigit.test(object) || isNaN(object);
        }
        ;
        MethodesObjet.isNumeric = function(object) {
            return !isNaN(parseFloat(object)) && isFinite(object);
        }
        ;
        MethodesObjet.isBoolean = function(object) {
            return object === true || object === false;
        }
        ;
        MethodesObjet.isWindow = function(object) {
            return !!object && typeof object === 'object' && 'setInterval'in object;
        }
        ;
        MethodesObjet.isBlob = function(object) {
            return Object.prototype.toString.call(object) === '[object Blob]';
        }
        ;
        MethodesObjet.get = function(aObjet, aAccesseur) {
            var _a;
            let lObjet, i, lNomProp, lIndexProp;
            if (!aObjet || !aAccesseur || !aAccesseur.length) {
                return aObjet;
            }
            if (typeof aAccesseur === 'string') {
                aAccesseur = aAccesseur.split('.');
            }
            const lLength = aAccesseur.length;
            if (lLength === 0) {
                return aObjet;
            }
            lObjet = aObjet;
            for (i = 0; i < lLength; i++) {
                if (!lObjet) {
                    return undefined;
                }
                lNomProp = aAccesseur[i];
                lIndexProp = false;
                if (lNomProp.indexOf('[') > 0 && lNomProp.indexOf(']') === lNomProp.length - 1) {
                    lIndexProp = (_a = lNomProp.match(/\[['"]?(.*)['"]?\]$/)) === null || _a === void 0 ? void 0 : _a[1];
                    lNomProp = lNomProp.replace(/\[['"]?(.*)['"]?\]$/, '');
                }
                lObjet = lObjet[lNomProp];
                if (lIndexProp) {
                    lObjet = lObjet[lIndexProp];
                }
            }
            return lObjet;
        }
        ;
        MethodesObjet.set = function(aObjet, aAccesseur, aValue) {
            if (aAccesseur && typeof aAccesseur === 'string') {
                aAccesseur = aAccesseur.split('.');
            }
            let lConteneur;
            let lNomProp;
            if (!aAccesseur || !aAccesseur.length) {
                return false;
            }
            lNomProp = aAccesseur[aAccesseur.length - 1];
            if (aAccesseur.length === 1) {
                lConteneur = aObjet;
            } else {
                lConteneur = MethodesObjet.get(aObjet, aAccesseur.slice(0, aAccesseur.length - 1));
            }
            if (lConteneur && lNomProp) {
                lConteneur[lNomProp] = aValue;
                return true;
            }
            return false;
        }
        ;
        MethodesObjet.nomProprieteDeValeur = function(aObjet, aValeur) {
            const lKeys = Object.keys(aObjet);
            for (let i = 0; i < lKeys.length; i++) {
                if (aValeur === aObjet[lKeys[i]]) {
                    return lKeys[i];
                }
            }
            return '';
        }
        ;
        function _indenterEnumere(aEnumere, aParam) {
            let lProp;
            if (!aParam) {
                aParam = {};
            }
            aParam.indice = aParam.indice || 0;
            if (!aEnumere) {
                return;
            }
            for (lProp in aEnumere) {
                if (MethodesObjet.isNumber(aEnumere[lProp])) {
                    aEnumere[lProp] = aParam.indice;
                    aParam.indice += 1;
                } else if (MethodesObjet.isObject(aEnumere[lProp])) {
                    _indenterEnumere(aEnumere[lProp], aParam);
                }
            }
        }
        MethodesObjet.indenterEnumere = function(aEnumere, aIndiceInitiale) {
            if (MethodesObjet.isObject(aEnumere)) {
                _indenterEnumere(aEnumere, {
                    indice: aIndiceInitiale
                });
            }
        }
        ;
        function _affecterValeurEnumere(aEnumere) {
            let lProp;
            if (!aEnumere) {
                return;
            }
            const lKeys = Object.keys(aEnumere);
            for (let i = 0; i < lKeys.length; i++) {
                lProp = lKeys[i];
                if (MethodesObjet.isObject(aEnumere[lProp])) {
                    _affecterValeurEnumere(aEnumere[lProp]);
                } else {
                    aEnumere[lProp] = lProp;
                }
            }
        }
        MethodesObjet.affecterValeurEnumere = function(aEnumere) {
            if (MethodesObjet.isObject(aEnumere)) {
                _affecterValeurEnumere(aEnumere);
            }
        }
        ;
        MethodesObjet.objetsIdentiques = function(aObjet1, aObjet2, aComparaisonProfonde) {
            if (!aObjet1 && aObjet2 || aObjet1 && !aObjet2) {
                return false;
            }
            if (!aObjet1 && !aObjet2) {
                return true;
            }
            if (aObjet1 === aObjet2) {
                return true;
            }
            let i;
            let lKeys = Object.keys(aObjet1);
            const lDejaCompare = {};
            for (i = 0; i < lKeys.length; i++) {
                if (aObjet1[lKeys[i]] !== aObjet2[lKeys[i]]) {
                    if (aComparaisonProfonde === true && MethodesObjet.isObject(aObjet1[lKeys[i]]) && MethodesObjet.isObject(aObjet2[lKeys[i]])) {
                        lDejaCompare[lKeys[i]] = true;
                        if (!MethodesObjet.objetsIdentiques(aObjet1[lKeys[i]], aObjet2[lKeys[i]], true)) {
                            return false;
                        }
                    } else {
                        return false;
                    }
                }
            }
            lKeys = Object.keys(aObjet2);
            for (i = 0; i < lKeys.length; i++) {
                if (aObjet1[lKeys[i]] !== aObjet2[lKeys[i]]) {
                    if (aComparaisonProfonde === true) {
                        if (!lDejaCompare[lKeys[i]] && MethodesObjet.isObject(aObjet1[lKeys[i]]) && MethodesObjet.isObject(aObjet2[lKeys[i]]) && !MethodesObjet.objetsIdentiques(aObjet1[lKeys[i]], aObjet2[lKeys[i]], true)) {
                            return false;
                        }
                    } else {
                        return false;
                    }
                }
            }
            return true;
        }
        ;
        MethodesObjet.enumKeys = function(aEnum) {
            return Object.keys(aEnum || {}).filter(aVal => Number.isNaN(+aVal));
        }
        ;
        MethodesObjet.valueInEnum = function(aValue, aEnum) {
            for (const lKey of MethodesObjet.enumKeys(aEnum)) {
                const lVal = aEnum[lKey];
                if (lVal === aValue) {
                    return true;
                }
            }
            return false;
        }
        ;
    },
    fn: 'methodesobjet.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Invocateur = exports.ObjetInvocateur = void 0;
        require("NamespaceIE");
        require("DeclarationJQuery.js");
        require("Divers.js");
        require("String");
        const GUID_1 = require("GUID");
        const MethodesObjet_1 = require("MethodesObjet");
        const lGUID_GlobalNomPile = new GUID_1.GUID.generateur();
        class ObjetInvocateur {
            constructor(aAbonnementInstanceInterdite=false) {
                this.abonnementInstanceInterdite = false;
                this.pile = {};
                this.pileEvents = {};
                this.generateurGUID = new GUID_1.GUID.generateur();
                this.abonnementInstanceInterdite = aAbonnementInstanceInterdite;
                this.nomPileInstance = '__pileInvocateur__' + (aAbonnementInstanceInterdite ? '' : lGUID_GlobalNomPile.get());
            }
            abonner(aEvent, aCallback, aInstance, aAvecAbonnementUnicite) {
                if (this.abonnementInstanceInterdite && aInstance) {
                    throw new Error('interdiction');
                }
                return this._abonnerTous({
                    e: aEvent,
                    callB: aCallback,
                    inst: aInstance,
                    unicite: aAvecAbonnementUnicite !== false
                });
            }
            abonnerUnique(aEvent, aCallback, aInstance, aAvecAbonnementUnicite) {
                return this._abonnerTous({
                    e: aEvent,
                    callB: aCallback,
                    inst: aInstance,
                    u: true,
                    unicite: aAvecAbonnementUnicite !== false
                });
            }
            desabonner(aParam1, aParam2, aParam3) {
                if (!aParam1) {
                    return;
                }
                let lEvent, lInstance, lCallBack, lEventsASupprimer, lId;
                if (Array.isArray(aParam1)) {
                    this._supprimerIds(aParam1);
                    return;
                }
                if (typeof aParam1 === 'object') {
                    lInstance = aParam1;
                    if (typeof aParam2 !== 'object') {
                        lCallBack = aParam2;
                    }
                } else {
                    lEvent = aParam1.toString();
                    if (typeof aParam2 === 'object') {
                        lInstance = aParam2;
                    } else {
                        lCallBack = aParam2;
                        if (typeof aParam3 === 'object') {
                            lInstance = aParam3;
                        }
                    }
                }
                if (lEvent) {
                    const lTab = lEvent.split(' ');
                    for (let i = 0; i < lTab.length; i++) {
                        this._desabonnerParEvent(lTab[i].trim(), lInstance, lCallBack);
                    }
                } else if (this.isInstanceAbonnable(lInstance)) {
                    const lPile = lInstance.getPileAbonnement();
                    const lPileInstance = lPile[this.nomPileInstance];
                    if (lPileInstance) {
                        lEventsASupprimer = [];
                        for (lId in lPileInstance) {
                            if (lPileInstance.hasOwnProperty(lId)) {
                                if (lCallBack) {
                                    if (this.pile[lId] && this.pile[lId].callB === lCallBack) {
                                        lEventsASupprimer.push(lId);
                                    }
                                } else {
                                    lEventsASupprimer.push(lId);
                                }
                            }
                        }
                        if (!lCallBack) {
                            delete lPile[this.nomPileInstance];
                        }
                        this._supprimerIds(lEventsASupprimer);
                    }
                }
            }
            evenement(aEvent, ...aArgs) {
                if (!aEvent) {
                    return;
                }
                const lEvent = aEvent.toString();
                const lEvents = this.pileEvents[lEvent];
                let lId, lElement, lResult;
                const lEventsATraiter = [];
                let lAvecEvenement = false;
                if (lEvents) {
                    for (lId in lEvents) {
                        lAvecEvenement = true;
                        lElement = this.pile[lId];
                        if (lElement && lElement.callB) {
                            lEventsATraiter.push(lElement);
                        }
                    }
                }
                if (!lAvecEvenement) {
                    delete this.pileEvents[lEvent];
                }
                for (let i = 0, lLength = lEventsATraiter.length; i < lLength; i += 1) {
                    lElement = lEventsATraiter[i];
                    if (lElement && !lElement.__INACTIF__) {
                        if (lElement.u) {
                            this._supprimerIds([lElement.id]);
                        }
                        ;if (lElement.callB) {
                            lResult = lElement.callB.call(lElement.inst, ...aArgs);
                            if (lResult === false) {
                                return;
                            }
                        }
                    }
                }
            }
            _abonner(aParams) {
                if (!aParams.e || !aParams.e.toString) {
                    return null;
                }
                aParams.e = aParams.e.toString();
                if (!aParams.callB) {
                    return null;
                }
                const lInstanceAbo = this.isInstanceAbonnable(aParams.inst) ? aParams.inst : undefined;
                if (aParams.unicite) {
                    this.desabonner(aParams.e, aParams.callB, lInstanceAbo);
                }
                if (!this.pileEvents[aParams.e]) {
                    this.pileEvents[aParams.e] = {};
                }
                const lId = this.generateurGUID.get();
                aParams.id = lId;
                this.pile[lId] = aParams;
                this.pileEvents[aParams.e][lId] = true;
                if (lInstanceAbo) {
                    const lPile = lInstanceAbo.getPileAbonnement();
                    if (!lPile[this.nomPileInstance]) {
                        lPile[this.nomPileInstance] = {};
                    }
                    lPile[this.nomPileInstance][lId] = true;
                }
                return lId;
            }
            _supprimerIds(aIds) {
                if (!aIds) {
                    return;
                }
                let lId, i, lElement, lInstance, lLength;
                for (i = 0,
                lLength = aIds.length; i < lLength; i += 1) {
                    lId = aIds[i];
                    lElement = this.pile[lId];
                    if (lElement) {
                        lInstance = lElement.inst;
                        if (this.isInstanceAbonnable(lInstance)) {
                            const lPile = lInstance.getPileAbonnement();
                            if (lPile && lPile[this.nomPileInstance] && lPile[this.nomPileInstance][lId]) {
                                delete lPile[this.nomPileInstance][lId];
                                if ($.isEmptyObject(lPile[this.nomPileInstance])) {
                                    delete lPile[this.nomPileInstance];
                                }
                            }
                        }
                        if (this.pileEvents[lElement.e]) {
                            if (this.pileEvents[lElement.e][lId]) {
                                delete this.pileEvents[lElement.e][lId];
                            }
                        }
                        lElement = undefined;
                        if (this.pile[lId]) {
                            this.pile[lId].__INACTIF__ = true;
                        }
                        delete this.pile[lId];
                    }
                }
            }
            _abonnerTous(aParam) {
                const lIds = [];
                let lEvent;
                if (aParam.e && aParam.e.split) {
                    const lTab = aParam.e.split(' ');
                    for (let i = 0, lNb = lTab.length; i < lNb; i++) {
                        lEvent = lTab[i].trim();
                        const lId = this._abonner({
                            e: lEvent,
                            callB: aParam.callB,
                            inst: aParam.inst,
                            unicite: aParam.unicite,
                            u: aParam.u
                        });
                        if (lId) {
                            lIds.push(lId);
                        }
                    }
                }
                if (lIds.length === 0) {
                    return null;
                }
                if (lIds.length === 1) {
                    return lIds[0];
                }
                return lIds;
            }
            _desabonnerParEvent(aEvent, aInstance, aCallback) {
                const lEvents = this.pileEvents[aEvent];
                let lEventsASupprimer, lId, lElement;
                if (!lEvents) {
                    return;
                }
                if (aInstance) {
                    if (this.isInstanceAbonnable(aInstance)) {
                        const lPileInstance = aInstance.getPileAbonnement()[this.nomPileInstance];
                        if (!lPileInstance) {
                            return;
                        }
                        lEventsASupprimer = [];
                        for (lId in lPileInstance) {
                            if (lPileInstance.hasOwnProperty(lId)) {
                                lElement = this.pile[lId];
                                if (lElement && lElement.e === aEvent) {
                                    if (!aCallback || aCallback === lElement.callB) {
                                        lEventsASupprimer.push(lId);
                                    }
                                }
                            }
                        }
                    }
                } else if (aCallback) {
                    lEventsASupprimer = [];
                    for (lId in lEvents) {
                        if (this.pile[lId] && this.pile[lId].callB === aCallback) {
                            lEventsASupprimer.push(lId);
                        }
                    }
                } else {
                    lEventsASupprimer = lEvents;
                    delete this.pileEvents[aEvent];
                }
                if (lEventsASupprimer && Array.isArray(lEventsASupprimer) && lEventsASupprimer.length > 0) {
                    this._supprimerIds(lEventsASupprimer);
                }
            }
            isInstanceAbonnable(aInstance) {
                return !!(aInstance && ('getPileAbonnement'in aInstance) && MethodesObjet_1.MethodesObjet.isFunction(aInstance.getPileAbonnement));
            }
        }
        exports.ObjetInvocateur = ObjetInvocateur;
        (function(ObjetInvocateur) {
            let events;
            (function(events) {
                events["initChiffrement"] = "IIE_initChiffrement";
                events["patience"] = "IIE_patience";
                events["modificationModeExclusif"] = "IIE_modification_ModeExclusif";
                events["modeExclusif"] = "IIE_ModeExclusif";
                events["modificationPresenceUtilisateur"] = "IIE_ModificationPresenceUtilisateur";
                events["interruption_Requete"] = "IIE_Interruption_Requete";
                events["activationImpression"] = "IIE_Activation_Impression";
                events["choixImpression"] = "IIE_choix_impression";
                events["autorisationRechargementPage"] = "IIE_AutorisationRechargementPage";
                events["surRechargementPage"] = "IIE_SurRechargementPage";
                events["etatSaisie"] = "IIE_setEtatSaisie";
                events["fermerFenetres"] = "IIE_fermer_fenetres";
                events["resizeNavigateur"] = "IIE_resizeNavigateur";
                events["actualisationAffichage"] = "IIE_actualisation_affichage";
                events["eventReponseUpload"] = "IIE_eventReponseUpload";
                events["eventIOAjax"] = "IIE_eventIOAjax";
                events["refreshIEHtml"] = "IEE_refreshIEHtml";
                events["erreurCommunication"] = "IEE_erreurCommunication";
                events["navigationOnglet"] = "IEE_navigationOnglet";
                events["changerMembre"] = "IEE_changerMembre";
                events["nettoyerJSX"] = "IEE_nettoyerJSX";
                events["toucheDEBUG"] = "IIE_ToucheDEBUG";
                events["DEBUG_log"] = "IIE_ADDLOG";
                events["DEBUG_logRequete"] = "IIE_ADDLOG_REQUETE";
            }
            )(events = ObjetInvocateur.events || (ObjetInvocateur.events = {}));
        }
        )(ObjetInvocateur || (exports.ObjetInvocateur = ObjetInvocateur = {}));
        exports.Invocateur = new ObjetInvocateur();
    },
    fn: 'invocateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Support = void 0;
        require("DeclarationJQuery.js");
        const MethodesObjet_1 = require("MethodesObjet");
        const GenreNavigateur = {
            Standard: 1,
            Webkit: 2,
            Moz: 3,
            Opera: 4,
            IE: 5
        };
        let Support = {
            init: false,
            GenreNavigateur: GenreNavigateur,
            supportFilterIE: false,
            supportEventOnPopState: false,
            supportEventPaste: false,
            supportEventInput: false,
            supportTouch: false,
            tactile: false,
            supportBorderRadius: _initTableau(),
            avecBorderRadius: false,
            supportGradient: _initTableau(),
            supportOpacity: _initTableau(),
            avecSupportOpacity: false,
            supportBoxShadow: _initTableau(),
            avecSupportBoxShadow: false,
            supportTransitions: _initTableau(),
            avecSupportTransitions: false,
            transitionEndEvent: '',
            supportTransforms: _initTableau(),
            avecSupportTransform: false,
            supportBackgroundSize: _initTableau(),
            avecBackgroundSize: false,
            bordureExterneDIV: false,
            bordureExterneTD: false,
            div100PourcentDansTDGardeHauteurTD: false,
            tailleScrollBar: 0,
            estOverlayScrollbar: false,
            scrollBarWidth: -1,
            avecSupportFileUpload: false,
            supportPointerEventsNone: false,
            supportCanvas: false,
            supportCanvasText: false,
            supportBlob: false,
            speechRecognition: false,
            speechSynthesis: false,
            contentEditable: false,
            permissionNotification: {
                defaut: 'default',
                granted: 'granted',
                denied: 'denied'
            },
            refreshNotification: null,
            addInit(aCallback) {
                if (this.init) {
                    aCallback();
                } else {
                    uPileInit.push(aCallback);
                }
            },
            toString() {
                let lChaine = '';
                let lValeur;
                let lChaineSupport;
                for (const lProp in Support) {
                    lValeur = Support[lProp];
                    if (MethodesObjet_1.MethodesObjet.isArray(lValeur)) {
                        lChaine += lProp + ' - [';
                        lChaineSupport = '';
                        for (const i in lValeur) {
                            if (lValeur[i]) {
                                lChaineSupport += (lChaineSupport.length > 0 ? ', ' : '') + MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, parseInt(i, 10));
                            }
                        }
                        lChaine += (lChaineSupport.length > 0 ? lChaineSupport : 'NON SUPPORTE') + ']\n';
                    } else if (!MethodesObjet_1.MethodesObjet.isFunction(lValeur) && !MethodesObjet_1.MethodesObjet.isObject(lValeur)) {
                        lChaine += lProp + ' - ' + Support[lProp] + '\n';
                    }
                }
                return lChaine;
            }
        };
        exports.Support = Support;
        function _initTableau() {
            const lTableau = [];
            for (const lProp in GenreNavigateur) {
                lTableau[GenreNavigateur[lProp]] = false;
            }
            return lTableau;
        }
        let uPileInit = [];
        function _testerSupports(aDoc) {
            let lProp;
            const LExtensionsStyle = {};
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Standard))] = '';
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Webkit))] = 'Webkit';
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Moz))] = 'Moz';
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Opera))] = 'O';
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.IE))] = 'MS';
            const lExtensionsCss = {};
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Standard))] = '';
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Webkit))] = '-webkit-';
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Moz))] = '-moz-';
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Opera))] = '-o-';
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.IE))] = '-ms-';
            const lElement = aDoc.createElement('div');
            function _contains(aChaine, aSousChaine) {
                return ('' + aChaine).indexOf(aSousChaine) !== -1;
            }
            function _getNomPropEtendu(aStyle, aExtension) {
                return (aExtension.length > 0) ? aExtension + aStyle.ucfirst() : aStyle;
            }
            function _existeStyle(aStyle, aExtension) {
                return !MethodesObjet_1.MethodesObjet.isUndefined(lElement.style[_getNomPropEtendu(aStyle, aExtension)]);
            }
            function _leStyleContientLaChaine(aStyle, aExtension, aChaine) {
                const lStyle = lElement.style[_getNomPropEtendu(aStyle, aExtension)];
                return !MethodesObjet_1.MethodesObjet.isUndefined(lStyle) && _contains(lStyle, aChaine);
            }
            Support.supportFilterIE = !MethodesObjet_1.MethodesObjet.isUndefined(lElement.style.filter);
            if (!MethodesObjet_1.MethodesObjet.isUndefined(lElement.style.filter)) {
                lElement.style.filter = 'progid:DXImageTransform.Microsoft.Gradient(gradientType=1,startColorStr=yellow,endColorStr=red);';
                Support.supportFilterIE = (lElement.style.filter.length > 0);
            }
            for (lProp in LExtensionsStyle) {
                Support.supportBorderRadius[GenreNavigateur[lProp]] = _existeStyle('borderRadius', LExtensionsStyle[lProp]);
                if (Support.supportBorderRadius[GenreNavigateur[lProp]]) {
                    Support.avecBorderRadius = true;
                }
            }
            lElement.style.cssText = 'background: linear-gradient(180deg, yellow, blue);';
            Support.supportGradient[GenreNavigateur.Standard] = _contains(lElement.style.background, 'gradient');
            lElement.style.cssText = 'background: -ms-linear-gradient(180deg, yellow, blue);';
            Support.supportGradient[GenreNavigateur.IE] = _contains(lElement.style.background, 'gradient');
            lElement.style.cssText = 'background: -webkit-gradient(180deg, left top, right top, from(blue), to(yellow));';
            Support.supportGradient[GenreNavigateur.Webkit] = _contains(lElement.style.background, 'gradient');
            lElement.style.cssText = 'background: -moz-linear-gradient(180deg, yellow, blue);';
            Support.supportGradient[GenreNavigateur.Moz] = _contains(lElement.style.background, 'gradient');
            for (lProp in LExtensionsStyle) {
                lElement.style.cssText = lExtensionsCss[lProp] + 'opacity:.5;';
                Support.supportOpacity[GenreNavigateur[lProp]] = _leStyleContientLaChaine('opacity', LExtensionsStyle[lProp], '0.5');
                if (Support.supportOpacity[GenreNavigateur[lProp]]) {
                    Support.avecSupportOpacity = true;
                }
            }
            for (lProp in LExtensionsStyle) {
                Support.supportBoxShadow[GenreNavigateur[lProp]] = _existeStyle('boxShadow', LExtensionsStyle[lProp]);
                if (Support.supportBoxShadow[GenreNavigateur[lProp]]) {
                    Support.avecSupportBoxShadow = true;
                }
            }
            for (lProp in LExtensionsStyle) {
                Support.supportBackgroundSize[GenreNavigateur[lProp]] = _existeStyle('backgroundSize', LExtensionsStyle[lProp]);
                if (Support.supportBackgroundSize[GenreNavigateur[lProp]]) {
                    Support.avecBackgroundSize = true;
                }
            }
            for (lProp in LExtensionsStyle) {
                Support.supportTransitions[GenreNavigateur[lProp]] = _existeStyle('transitionProperty', LExtensionsStyle[lProp]);
                if (Support.supportTransitions[GenreNavigateur[lProp]]) {
                    Support.avecSupportTransitions = true;
                }
            }
            Support.transitionEndEvent = (function() {
                const el = document.createElement('fakeelement');
                const transitions = {
                    'WebkitTransition': 'webkitTransitionEnd',
                    'MozTransition': 'transitionend',
                    'MSTransition': 'msTransitionEnd',
                    'OTransition': 'oTransitionEnd',
                    'transition': 'transitionEnd'
                };
                for (const t in transitions) {
                    if (el.style[t] !== undefined) {
                        return transitions[t];
                    }
                }
            }
            )();
            let lNomTransform;
            for (const lProp in LExtensionsStyle) {
                lNomTransform = '';
                switch (GenreNavigateur[lProp]) {
                case GenreNavigateur.Standard:
                    lNomTransform = 'transform';
                    break;
                case GenreNavigateur.Webkit:
                    lNomTransform = 'WebkitTransform';
                    break;
                case GenreNavigateur.Moz:
                    lNomTransform = 'MozTransform';
                    break;
                case GenreNavigateur.Opera:
                    lNomTransform = 'OTransform';
                    break;
                case GenreNavigateur.IE:
                    lNomTransform = 'msTransform';
                    break;
                }
                Support.supportTransforms[GenreNavigateur[lProp]] = !MethodesObjet_1.MethodesObjet.isUndefined(lElement.style[lNomTransform]);
                if (Support.supportTransforms[GenreNavigateur[lProp]]) {
                    Support.avecSupportTransform = true;
                }
            }
            Support.supportEventOnPopState = !MethodesObjet_1.MethodesObjet.isUndefined(window.onpopstate);
            Support.supportEventPaste = 'onpaste'in lElement;
            Support.supportEventInput = 'oninput'in lElement;
            Support.supportTouch = ('ontouchstart'in window) || !!(window.DocumentTouch && document instanceof window.DocumentTouch);
            Support.tactile = Support.supportTouch || window.navigator.maxTouchPoints > 0;
            Support.avecSupportFileUpload = (function() {
                if (navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/)) {
                    return false;
                }
                const el = document.createElement('input');
                el.type = 'file';
                return !el.disabled;
            }
            )();
            Support.supportCanvas = !!aDoc.createElement('canvas').getContext;
            Support.supportCanvasText = !!(Support.supportCanvas && typeof (aDoc.createElement('canvas').getContext('2d').fillText) === 'function');
            Support.supportBlob = _supportBlob();
            Support.speechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || null;
            Support.speechSynthesis = !!window.speechSynthesis;
            Support.contentEditable = false;
            if ('contentEditable'in document.documentElement) {
                lElement.contentEditable = 'true';
                Support.contentEditable = lElement.contentEditable === 'true';
            }
        }
        function _supportBlob() {
            let lBlob;
            try {
                lBlob = new Blob(['a'],{
                    type: 'text/plain'
                });
            } catch (e1) {
                try {
                    const BlobBuilder = window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder;
                    if (e1.name === 'TypeError' && window.BlobBuilder) {
                        const bb = new BlobBuilder();
                        bb.append(['a']);
                        lBlob = bb.getBlob('text/plain');
                    } else if (e1.name === 'InvalidStateError') {
                        lBlob = new Blob(['a'],{
                            type: 'text/plain'
                        });
                    }
                } catch (e2) {
                    return false;
                }
            }
            if (lBlob) {
                return true;
            }
            return false;
        }
        function _testerSupportHtml() {
            const lBody = document.getElementsByTagName('BODY')[0];
            const lElement = document.createElement('div');
            lBody.appendChild(lElement);
            const lTaille = 50;
            const lId = '_test_';
            lElement.innerHTML = '<div id="' + lId + '" style="height:auto;"><div style="height:' + lTaille + 'px; padding:4px;">&nbsp;</div></div>';
            Support.bordureExterneDIV = document.getElementById(lId).offsetHeight === lTaille;
            lElement.innerHTML = '<table><tr><td class="PetitEspace" id="' + lId + '" style="height:' + lTaille + 'px;"><div>&nbsp;</div></td></tr></table>';
            Support.bordureExterneTD = document.getElementById(lId).offsetHeight === lTaille;
            lElement.innerHTML = '<table style="position:absolute; z-index:-1; visibility:hidden"><tr>' + '<td style="height:' + lTaille + 'px;">' + '<div id="' + lId + '" style="height:100%"><div style="height:' + (lTaille + 20) + 'px;"></div></div>' + '</td></tr></table>';
            Support.div100PourcentDansTDGardeHauteurTD = document.getElementById(lId).offsetHeight === lTaille;
            lElement.innerHTML = '<div id="dessous" style="position:absolute;height:10px;width:10px;top:0;left:0;"></div>' + '<div id="dessus" style="position:absolute;height:10px;width:10px;top:0;left:0; pointer-events:none;"></div>';
            const lTrouve = document.elementFromPoint ? document.elementFromPoint(1, 1) : null;
            Support.supportPointerEventsNone = !!lTrouve && lTrouve.id === 'dessous';
            lElement.innerHTML = '<div style="overflow:scroll;"><div></div></div>';
            Support.tailleScrollBar = $(lElement).find('>div').get(0).offsetWidth - $(lElement).find('>div>div').get(0).offsetWidth;
            Support.estOverlayScrollbar = Support.tailleScrollBar === 0;
            lBody.removeChild(lElement);
        }
        $(window).on('load', () => {
            Support.init = true;
            _testerSupports(window.document);
            _testerSupportHtml();
            uPileInit.forEach( (aCallback) => {
                aCallback();
            }
            );
            uPileInit = [];
        }
        );
    },
    fn: 'objetsupport.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationJQuery");
        $.fn.extend({
            inputDisabled(aValue) {
                const $this = $(this);
                if (aValue === undefined) {
                    return $this.is(':disabled');
                } else {
                    $this.attr('disabled', aValue ? 'disabled' : null);
                    $this.trigger('IEDisabled');
                    return $this;
                }
            }
        });
    },
    fn: 'jinputdisabled.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationJQuery");
        $.fn.extend({
            inputChecked(aValue) {
                const $this = $(this);
                if (aValue === undefined) {
                    return $this.is(':checked');
                }
                $this.prop('checked', aValue);
                $this.trigger('IEChecked');
                return $this;
            }
        });
    },
    fn: 'jinputchecked.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.getApp = getApp;
        exports.setApp = setApp;
        setApp(null);
        function getApp() {
            return global.GApplication;
        }
        function setApp(aApp) {
            global.GApplication = aApp;
        }
    },
    fn: 'accessapp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ControleSaisieEvenement = void 0;
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const AccessApp_1 = require("AccessApp");
        let uSaisieEnCours = null
          , uSaisieEnCoursExecution = false;
        const ControleSaisieEvenement = (aCallback, aSansControleNavigation) => {
            var _a;
            if (!aCallback || !MethodesObjet_1.MethodesObjet.isFunction(aCallback)) {
                return;
            }
            if (aSansControleNavigation !== true && !((_a = (0,
            AccessApp_1.getApp)()) === null || _a === void 0 ? void 0 : _a.getModeExclusif())) {
                let lCallback = null;
                if (_avecSaisieEnCoursActive()) {
                    lCallback = uSaisieEnCours.saisie.bind(null, aCallback);
                    uSaisieEnCours = null;
                }
                if (lCallback || (window.GEtatUtilisateur && window.GEtatUtilisateur.EtatSaisie)) {
                    let lPage = window.GEtatUtilisateur && window.GEtatUtilisateur.getPageCourante ? window.GEtatUtilisateur.getPageCourante() : null;
                    if (!lPage) {
                        lPage = window.GInterface && window.GInterface.getPageCourante ? window.GInterface.getPageCourante() : null;
                    }
                    if (!lPage || !('setCallbackNavigation'in lPage)) {
                        aCallback();
                        return;
                    }
                    if (!lCallback) {
                        lCallback = lPage.valider ? lPage.valider.bind(lPage) : null;
                    }
                    if (!MethodesObjet_1.MethodesObjet.isFunction(lCallback)) {
                        aCallback();
                        return;
                    }
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.etatSaisie, false);
                    lPage.setCallbackNavigation(null);
                    let lCallbackTransmis = false;
                    if (!IE.estMobile) {
                        lPage.setCallbackNavigation(aCallback);
                        lCallbackTransmis = true;
                    }
                    const lResult = lCallback();
                    if (lPage) {
                        lPage.focusSurPremierObjet();
                    }
                    if (!lCallbackTransmis) {
                        aCallback();
                    }
                    return lResult;
                }
            }
            return aCallback();
        }
        ;
        exports.ControleSaisieEvenement = ControleSaisieEvenement;
        function _avecSaisieEnCoursActive() {
            if (uSaisieEnCours) {
                if (uSaisieEnCours.instance && MethodesObjet_1.MethodesObjet.isFunction(uSaisieEnCours.instance.isDestroyed) && uSaisieEnCours.instance.isDestroyed()) {
                    uSaisieEnCours = null;
                    return false;
                }
                return MethodesObjet_1.MethodesObjet.isFunction(uSaisieEnCours.saisie) && (!MethodesObjet_1.MethodesObjet.isFunction(uSaisieEnCours.actif) || uSaisieEnCours.actif() === true);
            }
            return false;
        }
        exports.ControleSaisieEvenement.saisieEnCours = (...aParams) => {
            var _a;
            if ((_a = (0,
            AccessApp_1.getApp)()) === null || _a === void 0 ? void 0 : _a.getModeExclusif()) {
                uSaisieEnCours = null;
                uSaisieEnCoursExecution = false;
                return false;
            }
            if (_avecSaisieEnCoursActive()) {
                if (!uSaisieEnCoursExecution) {
                    uSaisieEnCoursExecution = true;
                    const lSaisieEnCours = uSaisieEnCours;
                    uSaisieEnCours = null;
                    Promise.resolve().then( () => {
                        return lSaisieEnCours.saisie(...aParams);
                    }
                    ).catch( (e) => {
                        IE.log.addLog('erreur saisieEnCours ' + e);
                    }
                    ).then( () => {
                        uSaisieEnCoursExecution = false;
                    }
                    );
                }
                return true;
            }
            return false;
        }
        ;
        exports.ControleSaisieEvenement.addSaisieEnCours = (aCallback) => {
            var _a;
            uSaisieEnCoursExecution = false;
            if ((_a = (0,
            AccessApp_1.getApp)()) === null || _a === void 0 ? void 0 : _a.getModeExclusif()) {
                uSaisieEnCours = null;
                return;
            }
            const lSaisie = {
                actif: null,
                saisie: null,
                instance: null
            };
            if (MethodesObjet_1.MethodesObjet.isFunction(aCallback)) {
                lSaisie.saisie = aCallback;
            } else if (MethodesObjet_1.MethodesObjet.isObject(aCallback) && MethodesObjet_1.MethodesObjet.isFunction(aCallback.saisie)) {
                lSaisie.saisie = aCallback.saisie;
                lSaisie.actif = aCallback.actif;
                lSaisie.instance = aCallback.instance;
            }
            if (lSaisie.saisie) {
                uSaisieEnCours = lSaisie;
            } else {
                uSaisieEnCours = null;
            }
        }
        ;
    },
    fn: 'controlesaisieevenement.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeChampsJSON = void 0;
        const TypeChampsJSON = {
            type: '_T',
            valeur: 'V'
        };
        exports.TypeChampsJSON = TypeChampsJSON;
    },
    fn: 'enumere_champsjson.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreEtat = void 0;
        var EGenreEtat;
        (function(EGenreEtat) {
            EGenreEtat[EGenreEtat["Aucun"] = 0] = "Aucun";
            EGenreEtat[EGenreEtat["Creation"] = 1] = "Creation";
            EGenreEtat[EGenreEtat["Modification"] = 2] = "Modification";
            EGenreEtat[EGenreEtat["Suppression"] = 3] = "Suppression";
            EGenreEtat[EGenreEtat["FilsModification"] = 4] = "FilsModification";
        }
        )(EGenreEtat || (exports.EGenreEtat = EGenreEtat = {}));
    },
    fn: 'enumere_etat.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetElement = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_Etat_1 = require("Enumere_Etat");
        let _numeroCreation = -1000;
        class ObjetElement {
            constructor(aLibelle, aNumero, aGenre, aPosition, aActif) {
                this.Libelle = aLibelle;
                this.Numero = aNumero;
                this.Genre = aGenre;
                this.Position = aPosition;
                this.Actif = aActif === null || aActif === undefined ? true : aActif;
                this.Etat = Enumere_Etat_1.EGenreEtat.Aucun;
                if (arguments.length === 1 && MethodesObjet_1.MethodesObjet.isObject(aLibelle)) {
                    this.Libelle = undefined;
                    Object.assign(this, aLibelle);
                }
            }
            static create(aProps) {
                const lElement = new ObjetElement();
                if (aProps && MethodesObjet_1.MethodesObjet.isObject(aProps)) {
                    Object.assign(lElement, aProps);
                }
                return lElement;
            }
            toJSON() {
                return this._toJSON(this);
            }
            toJSONAll() {
                const lJSON = this._toJSON(this);
                return this._propToJSONHorsFormat(this, lJSON);
            }
            fromJSON(aJSON) {
                if (!aJSON) {
                    return this;
                }
                const lJSON = aJSON;
                this.Libelle = lJSON[ObjetElement.const_JSON.libelle.JSON] || '';
                this.Numero = lJSON[ObjetElement.const_JSON.numero.JSON] === '0' ? 0 : lJSON[ObjetElement.const_JSON.numero.JSON];
                this.Genre = lJSON[ObjetElement.const_JSON.genre.JSON];
                this.Position = lJSON[ObjetElement.const_JSON.position.JSON];
                if (lJSON[ObjetElement.const_JSON.actif.JSON] !== undefined) {
                    this.Actif = lJSON[ObjetElement.const_JSON.actif.JSON];
                }
                return this;
            }
            copieJSON(aJSON) {
                for (const lProp in aJSON) {
                    if (lProp !== ObjetElement.const_JSON.libelle.JSON && lProp !== ObjetElement.const_JSON.numero.JSON && lProp !== ObjetElement.const_JSON.genre.JSON && lProp !== ObjetElement.const_JSON.position.JSON) {
                        this[lProp] = aJSON[lProp];
                    }
                }
                return this;
            }
            copieToJSON(aJSON) {
                return this._propToJSONHorsFormat(this, aJSON);
            }
            getLibelle() {
                return this.Libelle;
            }
            getNumero() {
                return this.Numero;
            }
            getGenre() {
                return this.Genre;
            }
            getActif() {
                return this.Actif;
            }
            getPosition() {
                return this.Position;
            }
            getEtat() {
                return this.Etat;
            }
            getDonnees() {
                return this.donnees;
            }
            getCleHash() {
                return `${this.Numero}_${this.Genre}`;
            }
            existeNumero() {
                const lNumero = this.getNumero();
                if (lNumero && lNumero !== 0 && MethodesObjet_1.MethodesObjet.isNumber(lNumero)) {
                    return true;
                }
                if (typeof lNumero === 'string' && lNumero.match) {
                    return !!lNumero.match(new RegExp(`^${ObjetElement.regexNumeroExiste}$`));
                }
                return false;
            }
            existe() {
                return this.getEtat() !== Enumere_Etat_1.EGenreEtat.Suppression;
            }
            pourValidation() {
                return this._validationSaisie || false;
            }
            setLibelle(aLibelle) {
                this.Libelle = aLibelle;
            }
            setNumero(aNumero) {
                this.Numero = aNumero;
            }
            setActif(aActif) {
                this.Actif = aActif;
            }
            setDonnees(aDonnees) {
                this.donnees = aDonnees;
            }
            getGenreTable() {
                const lNumero = this.getNumero();
                if (typeof lNumero === 'string') {
                    const lIndex = lNumero.indexOf(ObjetElement.const_JSON.separateurTableNumero);
                    if (lIndex > 0) {
                        const lGenreTable = parseInt(lNumero.substring(0, lIndex), 10);
                        if (MethodesObjet_1.MethodesObjet.isNumber(lGenreTable)) {
                            return lGenreTable;
                        }
                    }
                }
                return 0;
            }
            egalParNumeroEtGenre(aNumero, aGenre, aAvecExiste) {
                if ((aNumero === null || aNumero === undefined) && (aGenre === null || aGenre === undefined)) {
                    return false;
                }
                return (!aAvecExiste || this.existe()) && ((aNumero === null || aNumero === undefined) || (this.getNumero() === aNumero)) && ((aGenre === null || aGenre === undefined) || (this.getGenre() === aGenre));
            }
            getCle() {
                return '_' + this.Genre + '_' + this.Numero;
            }
            setEtat(AEtat) {
                if (this.Etat === AEtat) {
                    return this;
                }
                switch (AEtat) {
                case Enumere_Etat_1.EGenreEtat.Aucun:
                    delete this._validationSaisie;
                    this.Etat = Enumere_Etat_1.EGenreEtat.Aucun;
                    break;
                case Enumere_Etat_1.EGenreEtat.Creation:
                    if (this.Etat === Enumere_Etat_1.EGenreEtat.Aucun) {
                        this._validationSaisie = true;
                        this.Etat = Enumere_Etat_1.EGenreEtat.Creation;
                        if (this.Numero === null || this.Numero === undefined) {
                            this.Numero = ObjetElement.getNumeroCreation();
                        }
                    }
                    break;
                case Enumere_Etat_1.EGenreEtat.Modification:
                    if ((this.Etat === Enumere_Etat_1.EGenreEtat.Aucun) || (this.Etat === Enumere_Etat_1.EGenreEtat.FilsModification)) {
                        this._validationSaisie = true;
                        this.Etat = (this.Numero !== 0) && ((this.Numero !== null && this.Numero !== undefined)) ? Enumere_Etat_1.EGenreEtat.Modification : Enumere_Etat_1.EGenreEtat.Creation;
                        if (this.Numero === null || this.Numero === undefined) {
                            this.Numero = ObjetElement.getNumeroCreation();
                        }
                    }
                    break;
                case Enumere_Etat_1.EGenreEtat.Suppression:
                    if (this.Etat === Enumere_Etat_1.EGenreEtat.Creation) {
                        delete this._validationSaisie;
                    } else {
                        this._validationSaisie = true;
                    }
                    this.Etat = Enumere_Etat_1.EGenreEtat.Suppression;
                    break;
                case Enumere_Etat_1.EGenreEtat.FilsModification:
                    if (this.Etat === Enumere_Etat_1.EGenreEtat.Aucun) {
                        this._validationSaisie = true;
                        this.Etat = Enumere_Etat_1.EGenreEtat.FilsModification;
                    }
                    break;
                }
                return this;
            }
            setValidationSaisie(aValue) {
                this._validationSaisie = aValue;
            }
            afficher() {}
            static getNumeroCreation() {
                _numeroCreation += -1;
                return _numeroCreation;
            }
            _toJSON(aElement) {
                const lNumero = aElement.getNumero()
                  , lGenre = aElement.getGenre()
                  , lLibelle = aElement.getLibelle();
                const lJSON = {};
                lJSON[ObjetElement.const_JSON.numero.JSON] = lNumero;
                if (lGenre !== undefined && lGenre !== null) {
                    lJSON[ObjetElement.const_JSON.genre.JSON] = lGenre;
                }
                if (lLibelle) {
                    lJSON[ObjetElement.const_JSON.libelle.JSON] = lLibelle;
                }
                if (aElement.Etat) {
                    lJSON[ObjetElement.const_JSON.etat.JSON] = aElement.Etat;
                }
                return lJSON;
            }
            _propToJSONHorsFormat(aSource, aCible) {
                let lProp;
                const lCible = aCible || {};
                const lKeys = Object.keys(aSource);
                for (let i = 0; i < lKeys.length; i++) {
                    lProp = lKeys[i];
                    if (aSource[lProp] !== undefined && !MethodesObjet_1.MethodesObjet.isFunction(aSource[lProp]) && lProp !== ObjetElement.const_JSON.libelle.champ && lProp !== ObjetElement.const_JSON.numero.champ && lProp !== ObjetElement.const_JSON.genre.champ && lProp !== ObjetElement.const_JSON.position.champ && lProp !== ObjetElement.const_JSON.etat.champ) {
                        lCible[lProp] = aSource[lProp];
                    }
                }
                return lCible;
            }
        }
        exports.ObjetElement = ObjetElement;
        ObjetElement.const_JSON = {
            numero: {
                JSON: 'N',
                champ: 'Numero'
            },
            libelle: {
                JSON: 'L',
                champ: 'Libelle'
            },
            genre: {
                JSON: 'G',
                champ: 'Genre'
            },
            position: {
                JSON: 'P',
                champ: 'Position'
            },
            etat: {
                JSON: 'E',
                champ: 'Etat'
            },
            actif: {
                JSON: 'A',
                champ: 'Actif'
            },
            separateurTableNumero: '#'
        };
        ObjetElement.regexNumeroExiste = `[0-9]{1,3}${ObjetElement.const_JSON.separateurTableNumero}[a-zA-Z0-9\\-_]{43}`;
        ObjetElement.regexCaptureNumero = `(0|${ObjetElement.regexNumeroExiste})`;
    },
    fn: 'objetelement.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.MethodesTableau = MethodesTableau;
        require("DeclarationExtensionsObjetNatif");
        function MethodesTableau() {}
        MethodesTableau.intersection = function(aTableau1, aTableau2) {
            if (aTableau1 && aTableau1.filter) {
                return aTableau1.filter( (aElement) => {
                    return aTableau2.indexOf(aElement) !== -1;
                }
                );
            }
            let lResult = [];
            for (let i = 0; i < aTableau1.length; i++) {
                if (aTableau2.includes(aTableau1[i])) {
                    lResult.push(aTableau1[i]);
                }
            }
            return lResult;
        }
        ;
        MethodesTableau.existeIntersection = function(aTableau1, aTableau2) {
            return MethodesTableau.intersection(aTableau1, aTableau2).length > 0;
        }
        ;
        function _everyInclus(aTableauCompare, aElement) {
            return aTableauCompare.indexOf(aElement) !== -1;
        }
        MethodesTableau.inclus = function(aTableau1, aTableau2) {
            if (!Array.isArray(aTableau1) || !Array.isArray(aTableau2)) {
                return false;
            }
            if (aTableau1.every) {
                return !!aTableau1.every(_everyInclus.bind(this, aTableau2));
            }
            for (let I = 0; I < aTableau1.length; I++) {
                if (!_everyInclus(aTableau2, aTableau1[I])) {
                    return false;
                }
            }
            return true;
        }
        ;
        MethodesTableau.insererElement = function(aValeur, aTableau, aIndex) {
            if (!Array.isArray(aTableau)) {
                return false;
            }
            if (aIndex >= 0) {
                const T = aTableau.slice(aIndex);
                aTableau.length = aIndex;
                aTableau.push(aValeur);
                Array.prototype.push.apply(aTableau, T);
            } else {
                aTableau.push(aValeur);
            }
        }
        ;
        MethodesTableau.supprimerElement = function(aTableau, aIndex) {
            aTableau.splice(aIndex, 1);
        }
        ;
        MethodesTableau.supprimerTabIndex = function(aTableau, aTabIndexSuppr) {
            if (aTabIndexSuppr && Array.isArray(aTabIndexSuppr)) {
                [...aTabIndexSuppr].sort( (a, b) => a - b).reverse().forEach( (aIndiceSuppr) => {
                    if (aIndiceSuppr >= 0) {
                        aTableau.splice(aIndiceSuppr, 1);
                    }
                }
                );
            }
        }
        ;
        MethodesTableau.remove = function(aTableau, aElement) {
            let lIndex = aTableau.indexOf(aElement);
            let lResult = false;
            while (lIndex >= 0) {
                aTableau.splice(lIndex, 1);
                lResult = true;
                lIndex = aTableau.indexOf(aElement);
            }
            return lResult;
        }
        ;
        MethodesTableau.nombreElements = function(aTableau) {
            let lNombre = 0;
            for (let i = 0; i < aTableau.length; i++) {
                let lElement = aTableau[i];
                if (lElement !== null || lElement !== undefined) {
                    lNombre++;
                }
            }
            return lNombre;
        }
        ;
        MethodesTableau.binaryIndexOf = function(aArray, aIndex) {
            if (!Array.isArray(aArray)) {
                return -1;
            }
            let lMinIndex = 0;
            let lMaxIndex = aArray.length - 1;
            let lIndexCourant;
            let lElementCourant;
            while (lMinIndex <= lMaxIndex) {
                lIndexCourant = (lMinIndex + lMaxIndex) / 2 | 0;
                lElementCourant = aArray[lIndexCourant];
                if (lElementCourant < aIndex) {
                    lMinIndex = lIndexCourant + 1;
                } else if (lElementCourant > aIndex) {
                    lMaxIndex = lIndexCourant - 1;
                } else {
                    return lIndexCourant;
                }
            }
            return -1;
        }
        ;
        MethodesTableau.indexOfMask = function(aArray, aMask) {
            let lIndice = -1;
            if (!Array.isArray(aArray)) {
                return lIndice;
            }
            if (!aMask || aArray.length === 0) {
                return lIndice;
            }
            try {
                const lKeys = Object.keys(aMask);
                if (lKeys.length > 0) {
                    aArray.every( (aElement, aIndice) => {
                        let lTrouve = true;
                        lKeys.every( (aKey) => {
                            if (aElement && (aKey in aMask) && (aKey in aElement) && (aMask[aKey] === aElement[aKey])) {
                                return true;
                            }
                            lTrouve = false;
                            return false;
                        }
                        );
                        if (lTrouve) {
                            lIndice = aIndice;
                        }
                        return lIndice < 0;
                    }
                    );
                }
            } catch (e) {
                lIndice = -1;
            }
            return lIndice;
        }
        ;
    },
    fn: 'methodestableau.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreTriElement = void 0;
        var EGenreTriElement;
        (function(EGenreTriElement) {
            EGenreTriElement[EGenreTriElement["Croissant"] = 1] = "Croissant";
            EGenreTriElement[EGenreTriElement["Decroissant"] = -1] = "Decroissant";
        }
        )(EGenreTriElement || (exports.EGenreTriElement = EGenreTriElement = {}));
    },
    fn: 'enumere_trielement.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ComparateurChaines = void 0;
        let uSupportLocaleCompare = false, uSupportCollator = !!(window.Intl && window.Intl.Collator), uLocales, uCollator = uSupportCollator ? new window.Intl.Collator(uLocales,{
            sensitivity: 'accent'
        }) : null, uCollatorCaseSensitive = uSupportCollator ? new window.Intl.Collator(uLocales,{
            sensitivity: 'variant'
        }) : null, uCollator_NonCaseSensitive_IgnoreAccent = uSupportCollator ? new window.Intl.Collator(uLocales,{
            sensitivity: 'base'
        }) : null, uCollator_CaseSensitive_IgnoreAccent = uSupportCollator ? new window.Intl.Collator(uLocales,{
            sensitivity: 'case'
        }) : null;
        const ComparateurChaines = {
            egal(aStrA, aStrB, aOptions) {
                return ComparateurChaines.compare(aStrA, aStrB, aOptions) === 0;
            },
            compare(aStrA, aStrB, aOptions) {
                const lOptions = Object.assign({
                    caseSensitive: false,
                    accentSensitive: false,
                    avecTrim: false,
                    unifierEspacements: false,
                    unifierCarWord: false
                }, aOptions);
                const lResult = ComparateurChaines.compareChamps(ComparateurChaines.getValeurPourTri(aStrA, lOptions), ComparateurChaines.getValeurPourTri(aStrB, lOptions), lOptions);
                return lResult === false ? 0 : lResult;
            },
            normalize(aChaine) {
                if (typeof aChaine !== 'string') {
                    return '';
                }
                if (aChaine && aChaine.normalize) {
                    return aChaine.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
                }
                return ComparateurChaines.latinize(aChaine);
            },
            latinize(aChaine) {
                return aChaine && aChaine.replace ? aChaine.replace(new RegExp('[' + _latinize() + ']','gi'), _latinize) : '';
            },
            getValeurPourTri(aChamp, aOptions) {
                let lResult = aChamp;
                if (!lResult) {
                    return lResult;
                }
                if (lResult.getTime) {
                    return lResult.getTime();
                }
                if (lResult.enleverEntites) {
                    lResult = lResult.enleverEntites();
                    if (!uSupportLocaleCompare && !uSupportCollator && !aOptions.accentSensitive) {
                        lResult = ComparateurChaines.normalize(lResult);
                    }
                    if (aOptions.avecTrim) {
                        lResult = lResult.trim();
                    }
                    if (aOptions.unifierEspacements) {
                        lResult = lResult.replace(/\s+/gi, ' ');
                    }
                    if (aOptions.unifierCarWord) {
                        lResult = lResult.replace(//g, '\'').replace(/|/g, '"');
                    }
                }
                if (!aOptions.caseSensitive && !uSupportCollator && !uSupportLocaleCompare && lResult && lResult.toLowerCase) {
                    lResult = lResult.toLowerCase();
                }
                return lResult;
            },
            compareChamps: function(aChampA, aChampB, aOptions) {
                const lChampAString = aChampA && aChampA.localeCompare;
                const lChampBString = aChampB && aChampB.localeCompare;
                if ((uSupportLocaleCompare || uSupportCollator) && lChampAString && lChampBString) {
                    let lResult = 0;
                    if (uSupportCollator) {
                        const lCollator = aOptions.caseSensitive ? aOptions.accentSensitive ? uCollatorCaseSensitive : uCollator_CaseSensitive_IgnoreAccent : aOptions.accentSensitive ? uCollator : uCollator_NonCaseSensitive_IgnoreAccent;
                        if (lCollator) {
                            lResult = lCollator.compare(aChampA, aChampB);
                        }
                    } else {
                        lResult = aChampA.localeCompare(aChampB, 'fr', {
                            sensitivity: (aOptions.caseSensitive ? aOptions.accentSensitive ? 'variant' : 'case' : aOptions.accentSensitive ? 'accent' : 'base')
                        });
                    }
                    if (lResult < 0) {
                        return -1;
                    }
                    if (lResult > 0) {
                        return 1;
                    }
                    return false;
                }
                const lChampANull = aChampA === undefined || aChampA === null
                  , lChampBNull = aChampB === undefined || aChampB === null;
                if (lChampANull && lChampBNull) {
                    return false;
                }
                if (lChampAString && aChampB === ComparateurChaines.MAX_STRING) {
                    return -1;
                }
                if (lChampBString && aChampA === ComparateurChaines.MAX_STRING) {
                    return 1;
                }
                if (aChampA > aChampB || lChampBNull) {
                    return 1;
                }
                if (aChampA < aChampB || lChampANull) {
                    return -1;
                }
                return false;
            },
            MAX_STRING: {
                MAX_STRING: true
            }
        };
        exports.ComparateurChaines = ComparateurChaines;
        try {
            if (''.localeCompare) {
                uSupportLocaleCompare = 'e'.localeCompare('', 'fr', {
                    sensitivity: 'base'
                }) === 0;
            }
        } catch (e) {
            uSupportLocaleCompare = false;
        }
        let uCache_regexLatinize = null;
        function _latinize(aMatch) {
            let x;
            const lTranslate = {
                '': 'a',
                '': 'a',
                '': 'a',
                '': 'a',
                '': 'a',
                '': 'c',
                '': 'e',
                '': 'e',
                '': 'e',
                '': 'e',
                '': 'i',
                '': 'i',
                '': 'i',
                '': 'i',
                '': 'n',
                '': 'o',
                '': 'o',
                '': 'o',
                '': 'o',
                '': 'o',
                '': 'o',
                '': 'ss',
                '': 'szz',
                '': 'u',
                '': 'u',
                '': 'u',
                '': 'u',
                '': 'u',
                '': 'y',
                '': 'y',
                '': 'ae',
                '': 'oe'
            };
            if (!aMatch) {
                if (!uCache_regexLatinize) {
                    const lRegex = [];
                    for (x in lTranslate) {
                        lRegex.push(x);
                    }
                    uCache_regexLatinize = lRegex.join('');
                }
                return uCache_regexLatinize;
            }
            const lMatchLower = aMatch.toLowerCase();
            const lIsUpperCase = lMatchLower !== aMatch;
            return lIsUpperCase ? lTranslate[lMatchLower].ucfirst() : lTranslate[lMatchLower];
        }
    },
    fn: 'comparateurchaines.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetTri = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_TriElement_1 = require("Enumere_TriElement");
        const ComparateurChaines_1 = require("ComparateurChaines");
        class ObjetTri {
            static init(aNomChamp, aGenreTri, aCaseSensitive, aIgnorerAccents) {
                return {
                    estFonction: MethodesObjet_1.MethodesObjet.isFunction(aNomChamp),
                    estAccesseurChaine: typeof aNomChamp === 'string' && aNomChamp.indexOf('.') >= 0,
                    nomChamp: aNomChamp,
                    ordreTri: aGenreTri === Enumere_TriElement_1.EGenreTriElement.Decroissant ? aGenreTri : Enumere_TriElement_1.EGenreTriElement.Croissant,
                    caseSensitive: aCaseSensitive === true,
                    accentSensitive: aIgnorerAccents !== true
                };
            }
            static initRecursif(aNomChampPere, aTris) {
                const lTris = aTris;
                return {
                    triRecursif: true,
                    nomChampPere: aNomChampPere,
                    tris: lTris,
                    ordreTri: Enumere_TriElement_1.EGenreTriElement.Croissant
                };
            }
            static trierTableau(aTableau, aTris) {
                if (!aTableau || !aTableau.sort || !aTris || aTableau.length < 2) {
                    return;
                }
                const lLength = aTableau.length;
                const lTableau = new Array(lLength);
                let lValeur;
                for (let i = 0; i < lLength; i++) {
                    lValeur = aTableau[i];
                    if (lValeur !== undefined || lValeur !== null) {
                        lTableau[i] = {
                            contenu: lValeur,
                            cache: [],
                            ordre: i
                        };
                    } else {
                        lTableau[i] = lValeur;
                    }
                }
                lTableau.sort( (a, b) => {
                    return ObjetTri._comparer(aTris, a, b);
                }
                );
                for (let i = 0; i < lLength; i++) {
                    lValeur = lTableau[i];
                    if (lValeur !== undefined || lValeur !== null) {
                        aTableau[i] = lValeur.contenu;
                    } else {
                        aTableau[i] = lValeur;
                    }
                }
            }
            static _construirePilePere(aValeur, aNomChampePere, aPile) {
                let lObjet = aValeur;
                while (lObjet && lObjet[aNomChampePere] && MethodesObjet_1.MethodesObjet.isObject(lObjet[aNomChampePere]) && !aPile.includes(lObjet[aNomChampePere])) {
                    lObjet = lObjet[aNomChampePere];
                    aPile.push(lObjet);
                }
            }
            static _comparerTriRecursif(A, B, aTri) {
                let lPileParentA = [A.contenu], lPileParentB = [B.contenu], i, lResult, j, lNb, lTri, lCount, lA, lB;
                if (!aTri.tris) {
                    return false;
                }
                ObjetTri._construirePilePere(A.contenu, aTri.nomChampPere, lPileParentA);
                ObjetTri._construirePilePere(B.contenu, aTri.nomChampPere, lPileParentB);
                lPileParentA.reverse();
                lPileParentB.reverse();
                lCount = Math.max(lPileParentA.length, lPileParentB.length);
                for (i = 0; i < lCount; i++) {
                    lA = lPileParentA[i];
                    lB = lPileParentB[i];
                    if ((!lA && lB) || (!lA && !lB)) {
                        return -aTri.ordreTri;
                    } else if (lA && !lB) {
                        return aTri.ordreTri;
                    } else if (lA === lB) {
                        continue;
                    }
                    for (j = 0,
                    lNb = aTri.tris.length; j < lNb; j++) {
                        lTri = aTri.tris[j];
                        lResult = ObjetTri._comparerTri(lA, lB, lTri, -1, false, i);
                        if (lResult !== false) {
                            return lResult;
                        }
                    }
                }
                return false;
            }
            static _getValeurPourTri(aTri, aElement, aProfondeur) {
                let lResult;
                if (aTri.estFonction) {
                    lResult = aTri.nomChamp(aElement, aProfondeur);
                } else if (aTri.estAccesseurChaine) {
                    lResult = MethodesObjet_1.MethodesObjet.get(aElement, aTri.nomChamp);
                } else {
                    if (!aElement) {
                        return aElement;
                    }
                    lResult = aElement[aTri.nomChamp];
                }
                return ComparateurChaines_1.ComparateurChaines.getValeurPourTri(lResult, {
                    caseSensitive: aTri.caseSensitive,
                    accentSensitive: aTri.accentSensitive
                });
            }
            static _comparerTri(A, B, aTri, aIndiceTri, aAvecCacheTri, aProfondeur) {
                let lChampTriA;
                let lChampTriB;
                if (aAvecCacheTri) {
                    if (!A.cache[aIndiceTri]) {
                        lChampTriA = ObjetTri._getValeurPourTri(aTri, A.contenu, aProfondeur);
                        A.cache[aIndiceTri] = {
                            valeur: lChampTriA
                        };
                    } else {
                        lChampTriA = A.cache[aIndiceTri].valeur;
                    }
                    if (!B.cache[aIndiceTri]) {
                        lChampTriB = ObjetTri._getValeurPourTri(aTri, B.contenu, aProfondeur);
                        B.cache[aIndiceTri] = {
                            valeur: lChampTriB
                        };
                    } else {
                        lChampTriB = B.cache[aIndiceTri].valeur;
                    }
                } else {
                    lChampTriA = ObjetTri._getValeurPourTri(aTri, A, aProfondeur);
                    lChampTriB = ObjetTri._getValeurPourTri(aTri, B, aProfondeur);
                }
                if (lChampTriA === lChampTriB || (lChampTriA === undefined && lChampTriB === null) || (lChampTriB === undefined && lChampTriA === null)) {
                    return false;
                }
                const lResult = ComparateurChaines_1.ComparateurChaines.compareChamps(lChampTriA, lChampTriB, {
                    caseSensitive: aTri.caseSensitive,
                    accentSensitive: aTri.accentSensitive
                });
                if (lResult === false) {
                    return false;
                }
                return lResult * aTri.ordreTri;
            }
            static _comparer(aTris, A, B) {
                let i, lNb, lTri, lResult;
                for (i = 0,
                lNb = aTris.length; i < lNb; i++) {
                    lTri = aTris[i];
                    if (!lTri) {
                        return 0;
                    }
                    if (lTri.triRecursif) {
                        lResult = ObjetTri._comparerTriRecursif(A, B, lTri);
                    } else {
                        lResult = ObjetTri._comparerTri(A, B, lTri, i, true, 0);
                    }
                    if (lResult !== false) {
                        return lResult;
                    }
                }
                return A.ordre - B.ordre;
            }
        }
        exports.ObjetTri = ObjetTri;
        ObjetTri.genreTri = Enumere_TriElement_1.EGenreTriElement;
    },
    fn: 'objettri.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetListeElements = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const MethodesTableau_1 = require("MethodesTableau");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const Enumere_TriElement_1 = require("Enumere_TriElement");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetElement_1 = require("ObjetElement");
        const ComparateurChaines_1 = require("ComparateurChaines");
        class ObjetListeElements {
            constructor(aElement) {
                this.ListeElements = [];
                this._tris = null;
                this.serialisateurJSON = null;
                this.vider();
                if (aElement) {
                    this.add(aElement);
                }
            }
            add(aElement) {
                if (aElement) {
                    if (aElement instanceof ObjetElement_1.ObjetElement) {
                        this.ListeElements.push(aElement);
                        return this;
                    }
                    if (aElement instanceof ObjetListeElements) {
                        aElement.parcourir( (a) => {
                            this.add(a);
                        }
                        );
                        return this;
                    }
                    if (Array.isArray(aElement)) {
                        aElement.forEach( (a) => {
                            this.add(a);
                        }
                        );
                        return this;
                    }
                }
                if (IE.log) {
                    IE.log.addLog('ObjetListeElements.add : aElement incorrect => ' + aElement);
                }
                return this;
            }
            get(aIndex) {
                return this.ListeElements[aIndex];
            }
            remove(aIndexOuTabIndex) {
                if (aIndexOuTabIndex >= 0 && MethodesObjet_1.MethodesObjet.isNumber(aIndexOuTabIndex)) {
                    MethodesTableau_1.MethodesTableau.supprimerElement(this.ListeElements, aIndexOuTabIndex);
                } else if (aIndexOuTabIndex && Array.isArray(aIndexOuTabIndex)) {
                    MethodesTableau_1.MethodesTableau.supprimerTabIndex(this.ListeElements, aIndexOuTabIndex);
                }
                return this;
            }
            pop() {
                return this.ListeElements.pop();
            }
            count() {
                return this.ListeElements.length;
            }
            vider() {
                this.ListeElements = [];
                return this;
            }
            addElement(AElement, I) {
                if (I === null || I === undefined) {
                    this.ListeElements.push(AElement);
                } else {
                    this.ListeElements[I] = AElement;
                }
                return this;
            }
            insererElement(AElement, I) {
                MethodesTableau_1.MethodesTableau.insererElement(AElement, this.ListeElements, I);
                return this;
            }
            getNbrElementsExistes(aGenre) {
                let N = 0;
                this.ListeElements.forEach( (aElement) => {
                    if (aElement.existe() && (aGenre === null || aGenre === undefined || aElement.getGenre() === aGenre)) {
                        N++;
                    }
                }
                );
                return N;
            }
            getTabListeElements() {
                return this.ListeElements;
            }
            parcourir(aFunction, aThis) {
                if (!aFunction || !MethodesObjet_1.MethodesObjet.isFunction(aFunction)) {
                    return this;
                }
                this.ListeElements.every( (aElement, aIndex) => {
                    return aFunction.call(aThis, aElement, aIndex, this) !== false;
                }
                );
                return this;
            }
            getTableau(aFunction) {
                const T = [];
                if (!aFunction || !MethodesObjet_1.MethodesObjet.isFunction(aFunction)) {
                    return T;
                }
                this.ListeElements.forEach( (aElement, aIndex) => {
                    T.push(aFunction(aElement, aIndex));
                }
                );
                return T;
            }
            removeFilter(aFilter) {
                if (aFilter && MethodesObjet_1.MethodesObjet.isFunction(aFilter)) {
                    const lTab = [];
                    this.ListeElements.forEach( (aElement, aIndex) => {
                        if (aFilter(aElement, aIndex) !== true) {
                            lTab.push(aElement);
                        }
                    }
                    );
                    this.ListeElements = lTab;
                }
                return this;
            }
            getTableauLibelles(aGenre, aTrier, aAvecExiste) {
                const T = [];
                if (aTrier) {
                    this.trier();
                }
                for (let I = 0; I < this.ListeElements.length; I++) {
                    if ((aGenre === null || aGenre === undefined) || (MethodesObjet_1.MethodesObjet.isNumeric(aGenre) && aGenre === this.getGenre(I)) || (Array.isArray(aGenre) && aGenre.includes(this.getGenre(I)))) {
                        if (!aAvecExiste || this.existe(I)) {
                            T.push(this.getLibelle(I) || '');
                        }
                    }
                }
                return T;
            }
            getTableauNumeros(aAvecExiste) {
                const T = [];
                for (let I = 0; I < this.ListeElements.length; I++) {
                    if (!aAvecExiste || this.existe(I)) {
                        T.push(this.getNumero(I));
                    }
                }
                return T;
            }
            getTableauGenres() {
                const T = [];
                for (let I = 0; I < this.ListeElements.length; I++) {
                    T.push(this.getGenre(I));
                }
                return T;
            }
            getCle() {
                return this.getTableauNumeros().sort().join('_');
            }
            getListeElements(aFiltre) {
                const lListe = new ObjetListeElements();
                for (let I = 0; I < this.ListeElements.length; I++) {
                    if (!aFiltre || aFiltre(this.ListeElements[I], I)) {
                        lListe.addElement(this.ListeElements[I]);
                    }
                }
                return lListe;
            }
            getElementParFiltre(aFiltre) {
                return this.get(this.getIndiceElementParFiltre(aFiltre));
            }
            getIndiceElementParFiltre(aFiltre) {
                let lResult = -1;
                for (let I = 0; I < this.ListeElements.length && lResult < 0; I++) {
                    if (!aFiltre || aFiltre(this.ListeElements[I])) {
                        lResult = I;
                    }
                }
                return lResult;
            }
            getElementParNumero(ANumero) {
                for (let I = 0, lNb = this.count(); I < lNb; I++) {
                    if (this.existe(I) && (this.getNumero(I) === ANumero)) {
                        return this.get(I);
                    }
                }
            }
            getListeElementsParNumero(aNumero) {
                const lListe = new ObjetListeElements();
                this.parcourir( (aElement) => {
                    if (aElement && aElement.existe() && (aElement.getNumero() === aNumero)) {
                        lListe.addElement(aElement);
                    }
                }
                );
                return lListe;
            }
            getElementParGenre(aGenre) {
                for (let I = 0, lNb = this.count(); I < lNb; I++) {
                    if (this.existe(I) && (this.getGenre(I) === aGenre)) {
                        return this.get(I);
                    }
                }
            }
            getNumero(I) {
                var _a;
                return (_a = this.ListeElements[I]) === null || _a === void 0 ? void 0 : _a.Numero;
            }
            getGenre(I) {
                var _a;
                return (_a = this.ListeElements[I]) === null || _a === void 0 ? void 0 : _a.Genre;
            }
            getLibelle(I) {
                var _a;
                return (_a = this.ListeElements[I]) === null || _a === void 0 ? void 0 : _a.Libelle;
            }
            getActif(I) {
                var _a;
                return (_a = this.ListeElements[I]) === null || _a === void 0 ? void 0 : _a.Actif;
            }
            getPosition(I) {
                var _a;
                return (_a = this.ListeElements[I]) === null || _a === void 0 ? void 0 : _a.Position;
            }
            existeNumero(I) {
                const N = this.getNumero(I);
                return !!(N && (N !== '0'));
            }
            existe(I) {
                var _a;
                return (_a = this.ListeElements[I]) === null || _a === void 0 ? void 0 : _a.existe();
            }
            pourValidation(I) {
                var _a;
                return (_a = this.ListeElements[I]) === null || _a === void 0 ? void 0 : _a.pourValidation();
            }
            setLibelle(I, ALibelle) {
                this.ListeElements[I].Libelle = ALibelle;
            }
            trierPourValidation() {
                ObjetTri_1.ObjetTri.trierTableau(this.ListeElements, [ObjetTri_1.ObjetTri.init('Etat')]);
            }
            existeElementPourValidation() {
                for (let I = 0, lNb = this.count(); I < lNb; I++) {
                    if (this.pourValidation(I)) {
                        return true;
                    }
                }
                return false;
            }
            setTri(aTableauTris) {
                this._tris = aTableauTris;
                return this;
            }
            getTri() {
                return this._tris;
            }
            trier(aGenreTri) {
                if (this.ListeElements) {
                    const lGenreTri = aGenreTri === Enumere_TriElement_1.EGenreTriElement.Decroissant ? aGenreTri : Enumere_TriElement_1.EGenreTriElement.Croissant;
                    if (!this._tris) {
                        this.setTri([ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')]);
                    }
                    const lTris = this._tris !== null ? [].concat(this._tris) : [];
                    lTris.unshift(ObjetTri_1.ObjetTri.init( (aElement) => {
                        return (aElement.Visible === false) || (aElement.getEtat() === Enumere_Etat_1.EGenreEtat.Suppression);
                    }
                    , lGenreTri));
                    ObjetTri_1.ObjetTri.trierTableau(this.ListeElements, lTris);
                    if (lGenreTri === Enumere_TriElement_1.EGenreTriElement.Decroissant) {
                        this.ListeElements.reverse();
                    }
                }
                return this;
            }
            getIndiceParNumeroEtGenre(ANumero, AGenre, aAvecExiste) {
                if (this.ListeElements && (((ANumero !== null && ANumero !== undefined)) || ((AGenre !== null && AGenre !== undefined)))) {
                    const N = this.count();
                    for (let I = 0; I < N; I++) {
                        const lElement = this.ListeElements[I];
                        if (lElement && lElement.egalParNumeroEtGenre(ANumero, AGenre, aAvecExiste)) {
                            return I;
                        }
                    }
                }
            }
            getIndiceExisteParNumeroEtGenre(ANumero, AGenre) {
                if (this.ListeElements && (((ANumero !== null && ANumero !== undefined)) || ((AGenre !== null && AGenre !== undefined)))) {
                    const N = this.count();
                    let J = -1;
                    for (let I = 0; I < N; I++) {
                        if (this.existe(I)) {
                            J++;
                            if (((ANumero === null || ANumero === undefined) || (this.getNumero(I) === ANumero)) && ((AGenre === null || AGenre === undefined) || (this.getGenre(I) === AGenre))) {
                                return J;
                            }
                        }
                    }
                }
            }
            getElementParNumeroEtGenre(ANumero, AGenre, aAvecExiste) {
                const lIndice = this.getIndiceParNumeroEtGenre(ANumero, AGenre, aAvecExiste);
                if (lIndice !== undefined) {
                    return this.get(lIndice);
                }
            }
            getIndiceParElement(aElement, aAvecExiste) {
                return aElement ? this.getIndiceParNumeroEtGenre(aElement.getNumero(), aElement.getGenre(), aAvecExiste) : null;
            }
            getIndiceExisteParElement(aElement) {
                return this.getIndiceExisteParNumeroEtGenre(aElement.getNumero(), aElement.getGenre());
            }
            getElementParElement(aElement, aAvecExiste) {
                const lIndice = this.getIndiceParElement(aElement, aAvecExiste);
                if (lIndice !== undefined && lIndice !== null) {
                    return this.get(lIndice);
                }
            }
            getIndiceParLibelle(ALibelle) {
                if (this.ListeElements) {
                    const N = this.count();
                    for (let I = 0; I < N; I++) {
                        if (this.getLibelle(I) === ALibelle) {
                            return I;
                        }
                    }
                }
            }
            getIndiceParParsingLibelle(aLibelle) {
                if (!this.ListeElements) {
                    return -1;
                }
                if (!aLibelle || aLibelle.length === 0 || !MethodesObjet_1.MethodesObjet.isString(aLibelle)) {
                    return 0;
                }
                const N = this.count();
                let lIndice = 0;
                for (let I = 0; I < N; I++) {
                    const lLibelle = this.getLibelle(I);
                    if (ComparateurChaines_1.ComparateurChaines.compare(lLibelle, aLibelle) < 0) {
                        lIndice++;
                    } else {
                        break;
                    }
                }
                return lIndice >= N ? lIndice - 1 : lIndice;
            }
            getElementParLibelle(ALibelle) {
                const lIndice = this.getIndiceParLibelle(ALibelle);
                if (lIndice !== undefined) {
                    return this.get(lIndice);
                }
                return undefined;
            }
            getPremierElement() {
                let lResult;
                for (let i = 0, lNb = this.count(); i < lNb && !lResult; i++) {
                    if (this.existe(i)) {
                        lResult = this.get(i);
                    }
                }
                return lResult;
            }
            getDernierElement() {
                return this.get(this.count() - 1);
            }
            listeIdentiqueParElementsOrdonnes(aListeElements) {
                if (!aListeElements || !aListeElements.count) {
                    return false;
                }
                if (this === aListeElements) {
                    return true;
                }
                if (this.count() !== aListeElements.count()) {
                    return false;
                }
                let lResult = true;
                this.parcourir( (aElement, aIndice) => {
                    const lElement = aListeElements.get(aIndice);
                    if ((lElement && aElement && lElement.egalParNumeroEtGenre(aElement.getNumero(), aElement.getGenre()))) {
                        return;
                    }
                    lResult = false;
                    return false;
                }
                );
                return lResult;
            }
            setSerialisateurJSON(aSerialisateur) {
                if (!this.serialisateurJSON) {
                    this.serialisateurJSON = {
                        ignorerEtatsElements: false,
                        methodeSerialisation: undefined,
                        nePasTrierPourValidation: false,
                        avecLibelle: true
                    };
                }
                Object.assign(this.serialisateurJSON, aSerialisateur);
                return this;
            }
            toJSON() {
                let I, lNb, lAvecSerialisation = !!(this.serialisateurJSON && this.serialisateurJSON.methodeSerialisation), lResult = [], lListe = new ObjetListeElements();
                lListe.add(this);
                if (!this.serialisateurJSON || !this.serialisateurJSON.nePasTrierPourValidation) {
                    lListe.trierPourValidation();
                }
                for (I = 0,
                lNb = lListe.count(); I < lNb; I++) {
                    const lElement = lListe.get(I);
                    if (lElement) {
                        let lExisteElement = (this.serialisateurJSON && this.serialisateurJSON.ignorerEtatsElements) || lElement.pourValidation();
                        let lJSONElement = null;
                        if (lExisteElement || lAvecSerialisation) {
                            lJSONElement = lElement.toJSON();
                            if (this.serialisateurJSON && !this.serialisateurJSON.avecLibelle) {
                                delete lJSONElement[ObjetElement_1.ObjetElement.const_JSON.libelle.JSON];
                            }
                            if (lAvecSerialisation && this.serialisateurJSON && typeof this.serialisateurJSON.methodeSerialisation === 'function') {
                                const lGarderElement = this.serialisateurJSON.methodeSerialisation(lElement, lJSONElement, I);
                                lExisteElement = lGarderElement === null || lGarderElement === undefined ? lExisteElement : lGarderElement;
                            }
                        }
                        if (lExisteElement && lJSONElement) {
                            lResult.push(lJSONElement);
                        }
                    }
                }
                return lResult;
            }
            fromJSON(aJSON, aMethodeDeserialisation, aTrier) {
                if (!aJSON || !MethodesObjet_1.MethodesObjet.isArray(aJSON)) {
                    return this;
                }
                for (let i = 0, lNb = aJSON.length; i < lNb; i++) {
                    const lElement = new ObjetElement_1.ObjetElement().fromJSON(aJSON[i]);
                    if (!aMethodeDeserialisation || (aMethodeDeserialisation(aJSON[i], lElement, i) !== false)) {
                        this.addElement(lElement);
                    }
                }
                if (aTrier) {
                    this.trier();
                }
                return this;
            }
            [Symbol.iterator]() {
                let lIndex = 0;
                return {
                    next: () => {
                        lIndex += 1;
                        const lDone = lIndex > this.ListeElements.length;
                        return {
                            done: lDone,
                            value: lDone ? undefined : this.ListeElements[lIndex - 1]
                        };
                    }
                };
            }
        }
        exports.ObjetListeElements = ObjetListeElements;
    },
    fn: 'objetlisteelements.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeHttpVariable = void 0;
        var TypeHttpVariable;
        (function(TypeHttpVariable) {
            TypeHttpVariable[TypeHttpVariable["TypeHttpCategorie"] = 0] = "TypeHttpCategorie";
            TypeHttpVariable[TypeHttpVariable["TypeHttpCardinal"] = 1] = "TypeHttpCardinal";
            TypeHttpVariable[TypeHttpVariable["TypeHttpBoolean"] = 2] = "TypeHttpBoolean";
            TypeHttpVariable[TypeHttpVariable["TypeHttpString"] = 3] = "TypeHttpString";
            TypeHttpVariable[TypeHttpVariable["TypeHttpColor"] = 4] = "TypeHttpColor";
            TypeHttpVariable[TypeHttpVariable["TypeHttpAlignment_Inutilise"] = 5] = "TypeHttpAlignment_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpFontStyles_Inutilise"] = 6] = "TypeHttpFontStyles_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpDateTime"] = 7] = "TypeHttpDateTime";
            TypeHttpVariable[TypeHttpVariable["TypeHttpDomaine"] = 8] = "TypeHttpDomaine";
            TypeHttpVariable[TypeHttpVariable["TypeHttpTraduction"] = 9] = "TypeHttpTraduction";
            TypeHttpVariable[TypeHttpVariable["TypeHttpNote"] = 10] = "TypeHttpNote";
            TypeHttpVariable[TypeHttpVariable["TypeHttpEnsembleCardinal"] = 11] = "TypeHttpEnsembleCardinal";
            TypeHttpVariable[TypeHttpVariable["_TypeHttpLongNote_Inutilise"] = 12] = "_TypeHttpLongNote_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpDouble"] = 13] = "TypeHttpDouble";
            TypeHttpVariable[TypeHttpVariable["TypeHttpArrondi"] = 14] = "TypeHttpArrondi";
            TypeHttpVariable[TypeHttpVariable["TypeHttpEnsemble"] = 15] = "TypeHttpEnsemble";
            TypeHttpVariable[TypeHttpVariable["TypeHttpIP"] = 16] = "TypeHttpIP";
            TypeHttpVariable[TypeHttpVariable["TypeHttpUrl"] = 17] = "TypeHttpUrl";
            TypeHttpVariable[TypeHttpVariable["TypeHttpSetOf_MrFiche"] = 18] = "TypeHttpSetOf_MrFiche";
            TypeHttpVariable[TypeHttpVariable["_TypeHttpDoubleNote_Inutilise"] = 19] = "_TypeHttpDoubleNote_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpInteger"] = 20] = "TypeHttpInteger";
            TypeHttpVariable[TypeHttpVariable["TypeHttpHtml"] = 21] = "TypeHttpHtml";
            TypeHttpVariable[TypeHttpVariable["_TypeHttpJSON_Inutilise"] = 22] = "_TypeHttpJSON_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpChaineBrute"] = 23] = "TypeHttpChaineBrute";
            TypeHttpVariable[TypeHttpVariable["TypeHttpElement"] = 24] = "TypeHttpElement";
            TypeHttpVariable[TypeHttpVariable["TypeHttpFichierBase64"] = 25] = "TypeHttpFichierBase64";
            TypeHttpVariable[TypeHttpVariable["TypeHttpEnsembleNombre"] = 26] = "TypeHttpEnsembleNombre";
            TypeHttpVariable[TypeHttpVariable["TypeHttpHtmlSafe"] = 27] = "TypeHttpHtmlSafe";
        }
        )(TypeHttpVariable || (exports.TypeHttpVariable = TypeHttpVariable = {}));
    },
    fn: 'typehttpvariable.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeDomaine = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const ObjetElement_1 = require("ObjetElement");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const ObjetListeElements_1 = require("ObjetListeElements");
        var ValeurSemaine;
        (function(ValeurSemaine) {
            ValeurSemaine["plein"] = "1";
            ValeurSemaine["vide"] = "0";
        }
        )(ValeurSemaine || (ValeurSemaine = {}));
        class TypeDomaine {
            constructor(AValeurParDefaut, ANombreValeurs) {
                this.nombreValeurs = ANombreValeurs ? ANombreValeurs : TypeDomaine.C_MaxDomaineCycle;
                AValeurParDefaut = (AValeurParDefaut === null) || AValeurParDefaut === undefined || (AValeurParDefaut === '') ? '[]' : AValeurParDefaut;
                this.Domaine = this._getDomaine(AValeurParDefaut, this.nombreValeurs);
                this.cache = {};
            }
            strToDomaine(aChaine, aNombreValeurs) {
                if (!((aChaine.charAt(0) === '[') && (aChaine.charAt(aChaine.length - 1) === ']'))) {
                    const lTab = aChaine.split('');
                    if (aNombreValeurs !== null && aNombreValeurs >= 0) {
                        lTab.length = aNombreValeurs;
                    }
                    return lTab.map( (aVal) => aVal === ValeurSemaine.plein ? ValeurSemaine.plein : ValeurSemaine.vide);
                }
                aChaine = aChaine.substring(1, aChaine.length - 1);
                const R = new Array(aNombreValeurs !== TypeDomaine.CTailleOuverte ? aNombreValeurs : 0);
                const T1 = aChaine.split(',');
                for (let I = 0; I < T1.length; I++) {
                    const T2 = T1[I].split('..');
                    const V1 = parseInt(T2[0]);
                    const V2 = T2.length === 1 ? V1 : parseInt(T2[1]);
                    for (let J = V1; J <= V2; J++) {
                        R[J - 1] = ValeurSemaine.plein;
                    }
                }
                if (this.nombreValeurs !== TypeDomaine.CTailleOuverte) {
                    this.nombreValeurs = R.length;
                }
                return R;
            }
            toString() {
                let S = ''
                  , N = 0;
                for (let I = 0; I <= this.Domaine.length; I++) {
                    if (this.Domaine[I] === ValeurSemaine.plein) {
                        N++;
                    } else if (N > 0) {
                        if (S.length) {
                            S += ',';
                        }
                        if (N > 1) {
                            S += (I + 1 - N) + '..';
                        }
                        S += (I);
                        N = 0;
                    }
                }
                return '[' + S + ']';
            }
            vider() {
                this.cache = {};
                this.setValeur(false, 1, this.getTaille());
                return this;
            }
            estVide() {
                return this.getNbrValeurs(true) === 0;
            }
            setValeur(AValeur, ADeb, AFin) {
                if ((ADeb > this.getTaille()) && (this.nombreValeurs !== TypeDomaine.CTailleOuverte)) {
                    return;
                }
                this.cache = {};
                if (this.nombreValeurs !== TypeDomaine.CTailleOuverte) {
                    ADeb = Math.borner(ADeb, 1, this.getTaille());
                    AFin = Math.borner(AFin === null || AFin === undefined ? ADeb : AFin, 1, this.getTaille());
                } else {
                    ADeb = Math.max(ADeb, 1);
                    AFin = AFin === null || AFin === undefined ? ADeb : Math.max(ADeb, AFin);
                }
                for (let I = ADeb - 1; I < AFin; I++) {
                    this.Domaine[I] = AValeur ? ValeurSemaine.plein : ValeurSemaine.vide;
                }
                return this;
            }
            getValeur(APos) {
                return this.Domaine[APos - 1] === ValeurSemaine.plein;
            }
            getPremierePosition(aValeur) {
                for (let I = 0; I < this.Domaine.length; I++) {
                    const lValeur = this.Domaine[I] === null || this.Domaine[I] === undefined ? ValeurSemaine.vide : this.Domaine[I];
                    if (lValeur === (aValeur === false ? ValeurSemaine.vide : ValeurSemaine.plein)) {
                        return I + 1;
                    }
                }
                return -1;
            }
            enListeDomainesContinues() {
                const lResult = new ObjetListeElements_1.ObjetListeElements();
                let lValeurPrecedente;
                let lPeriode = new ObjetElement_1.ObjetElement('');
                for (let I = 0; I < this.Domaine.length; I++) {
                    const lValeur = this.Domaine[I] === null || this.Domaine[I] === undefined ? ValeurSemaine.vide : this.Domaine[I];
                    if (lValeur === (ValeurSemaine.plein)) {
                        if (lPeriode.debut === undefined) {
                            lPeriode.debut = I + 1;
                        }
                        if (lValeurPrecedente === ValeurSemaine.plein || lPeriode.fin === undefined) {
                            lPeriode.fin = I + 1;
                        }
                    } else {
                        if (lPeriode.debut !== undefined) {
                            lResult.addElement(lPeriode);
                        }
                        lPeriode = new ObjetElement_1.ObjetElement('');
                    }
                    lValeurPrecedente = lValeur;
                }
                if (lPeriode.debut !== undefined) {
                    lResult.addElement(lPeriode);
                }
                return lResult;
            }
            getDernierePosition(aValeur) {
                for (let I = this.Domaine.length - 1; I >= 0; I--) {
                    const lValeur = this.Domaine[I] === null || this.Domaine[I] === undefined ? ValeurSemaine.vide : this.Domaine[I];
                    if (lValeur === (aValeur === false ? ValeurSemaine.vide : ValeurSemaine.plein)) {
                        return I + 1;
                    }
                }
                return -1;
            }
            getNbrValeurs(AValeur) {
                let N = 0;
                const LValeur = AValeur || (AValeur === null) || AValeur === undefined ? ValeurSemaine.plein : ValeurSemaine.vide;
                if (this.cache['GetNbrValeurs_' + LValeur] !== undefined) {
                    return this.cache['GetNbrValeurs_' + LValeur];
                }
                for (let I = 0; I < this.Domaine.length; I++) {
                    if (this.Domaine[I] === LValeur) {
                        N++;
                    }
                }
                this.cache['GetNbrValeurs_' + LValeur] = N;
                return N;
            }
            estUnNombre() {
                return this.getNbrValeurs(true) <= 1;
            }
            getNombre() {
                return this.getNbrValeurs(true) === 1 ? this.getPremierePosition(true) : 0;
            }
            getTaille() {
                return this.Domaine.length;
            }
            getIntersection(aDomaine) {
                if (!aDomaine) {
                    return MethodesObjet_1.MethodesObjet.dupliquer(this);
                }
                const lTaille = Math.min(this.getTaille(), aDomaine.getTaille());
                const lIntersect = new TypeDomaine(null,lTaille);
                for (let I = 1; I <= lTaille; I++) {
                    if (this.getValeur(I) && aDomaine.getValeur(I)) {
                        lIntersect.setValeur(true, I);
                    }
                }
                return lIntersect;
            }
            getInversion() {
                const lTaille = this.getTaille();
                const lInversion = new TypeDomaine(null,lTaille);
                for (let I = 1; I <= lTaille; I++) {
                    lInversion.setValeur(!this.getValeur(I), I);
                }
                return lInversion;
            }
            getDomaineSoustraction(aDomaineASoustraire) {
                const lDomaine = MethodesObjet_1.MethodesObjet.dupliquer(this);
                if (!aDomaineASoustraire || !aDomaineASoustraire.getTaille || !aDomaineASoustraire.getValeur) {
                    return lDomaine;
                }
                for (let I = 1, lTaille = aDomaineASoustraire.getTaille(); I <= lTaille; I++) {
                    if (aDomaineASoustraire.getValeur(I)) {
                        lDomaine.setValeur(false, I);
                    }
                }
                return lDomaine;
            }
            getDomaineUnion(aDomaineAAjouter) {
                const lDomaine = MethodesObjet_1.MethodesObjet.dupliquer(this);
                if (!aDomaineAAjouter) {
                    return lDomaine;
                }
                for (let I = 1, lTaille = aDomaineAAjouter.getTaille(); I <= lTaille; I++) {
                    if (aDomaineAAjouter.getValeur(I)) {
                        lDomaine.setValeur(true, I);
                    }
                }
                return lDomaine;
            }
            egal(aDomaine) {
                if (!aDomaine || !aDomaine.getTaille || !aDomaine.getValeur) {
                    return false;
                }
                for (let I = 1, lTaille = this.getTaille(); I <= lTaille; I++) {
                    if (this.getValeur(I) !== aDomaine.getValeur(I)) {
                        return false;
                    }
                }
                return true;
            }
            getSemaines() {
                if (this.cache['getSemaines'] !== undefined) {
                    return this.cache['getSemaines'];
                }
                const lTaille = this.getTaille();
                const lSemaines = [];
                for (let I = 1; I <= lTaille; I++) {
                    if (this.getValeur(I)) {
                        lSemaines.push(I);
                    }
                }
                this.cache['getSemaines'] = lSemaines;
                return lSemaines;
            }
            dupliquer() {
                const lDomaine = new TypeDomaine(null,this.nombreValeurs);
                lDomaine.Domaine = [].concat(this.Domaine);
                return lDomaine;
            }
            toJSON() {
                const lJSON = {};
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpDomaine;
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = this.toString();
                return lJSON;
            }
            _getDomaine(AValeurParDefaut, ANombreValeurs) {
                const lType = typeof AValeurParDefaut;
                let D;
                if ((lType !== 'object') && (lType !== 'string')) {
                    D = new Array(1 + (ANombreValeurs === null || ANombreValeurs === undefined ? TypeDomaine.C_MaxDomaineCycle : ANombreValeurs)).join((lType === 'boolean') && AValeurParDefaut ? ValeurSemaine.plein : ValeurSemaine.vide).split('');
                }
                switch (lType) {
                case 'number':
                    D[AValeurParDefaut - 1] = ValeurSemaine.plein;
                    return D;
                case 'string':
                    return this.strToDomaine(AValeurParDefaut, ANombreValeurs);
                case 'boolean':
                    return D;
                default:
                    return D;
                }
            }
        }
        exports.TypeDomaine = TypeDomaine;
        TypeDomaine.CTailleOuverte = -1;
        TypeDomaine.C_MaxDomaineCycle = 62;
    },
    fn: 'typedomaine.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreAnnotation = void 0;
        var EGenreAnnotation;
        (function(EGenreAnnotation) {
            EGenreAnnotation[EGenreAnnotation["erreur"] = -1] = "erreur";
            EGenreAnnotation[EGenreAnnotation["note"] = 0] = "note";
            EGenreAnnotation[EGenreAnnotation["absent"] = 1] = "absent";
            EGenreAnnotation[EGenreAnnotation["dispense"] = 2] = "dispense";
            EGenreAnnotation[EGenreAnnotation["nonNote"] = 3] = "nonNote";
            EGenreAnnotation[EGenreAnnotation["inapte"] = 4] = "inapte";
            EGenreAnnotation[EGenreAnnotation["nonRendu"] = 5] = "nonRendu";
            EGenreAnnotation[EGenreAnnotation["absentZero"] = 6] = "absentZero";
            EGenreAnnotation[EGenreAnnotation["nonRenduZero"] = 7] = "nonRenduZero";
            EGenreAnnotation[EGenreAnnotation["felicitations"] = 8] = "felicitations";
        }
        )(EGenreAnnotation || (exports.EGenreAnnotation = EGenreAnnotation = {}));
    },
    fn: 'enumere_annotation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ToucheClavierUtil = exports.ToucheClavier = exports.ToucheClavierKey = void 0;
        var ToucheClavierKey;
        (function(ToucheClavierKey) {
            ToucheClavierKey["Backspace"] = "Backspace";
            ToucheClavierKey["Tab"] = "Tab";
            ToucheClavierKey["Clear"] = "Clear";
            ToucheClavierKey["Enter"] = "Enter";
            ToucheClavierKey["Shift"] = "Shift";
            ToucheClavierKey["Control"] = "Control";
            ToucheClavierKey["Alt"] = "Alt";
            ToucheClavierKey["Pause"] = "Pause";
            ToucheClavierKey["CapsLock"] = "CapsLock";
            ToucheClavierKey["Escape"] = "Escape";
            ToucheClavierKey["Space"] = " ";
            ToucheClavierKey["PageUp"] = "PageUp";
            ToucheClavierKey["PageDown"] = "PageDown";
            ToucheClavierKey["End"] = "End";
            ToucheClavierKey["Home"] = "Home";
            ToucheClavierKey["ArrowLeft"] = "ArrowLeft";
            ToucheClavierKey["ArrowUp"] = "ArrowUp";
            ToucheClavierKey["ArrowRight"] = "ArrowRight";
            ToucheClavierKey["ArrowDown"] = "ArrowDown";
            ToucheClavierKey["Insert"] = "Insert";
            ToucheClavierKey["Delete"] = "Delete";
            ToucheClavierKey["F1"] = "F1";
            ToucheClavierKey["F2"] = "F2";
            ToucheClavierKey["F3"] = "F3";
            ToucheClavierKey["F4"] = "F4";
            ToucheClavierKey["F5"] = "F5";
            ToucheClavierKey["F6"] = "F6";
            ToucheClavierKey["F7"] = "F7";
            ToucheClavierKey["F8"] = "F8";
            ToucheClavierKey["F9"] = "F9";
            ToucheClavierKey["F10"] = "F10";
            ToucheClavierKey["F11"] = "F11";
            ToucheClavierKey["F12"] = "F12";
            ToucheClavierKey["NumLock"] = "NumLock";
            ToucheClavierKey["ScrollLock"] = "ScrollLock";
            ToucheClavierKey["Meta"] = "Meta";
        }
        )(ToucheClavierKey || (exports.ToucheClavierKey = ToucheClavierKey = {}));
        var ToucheClavier;
        (function(ToucheClavier) {
            ToucheClavier[ToucheClavier["Backspace"] = 8] = "Backspace";
            ToucheClavier[ToucheClavier["Tab"] = 9] = "Tab";
            ToucheClavier[ToucheClavier["RetourChariot"] = 13] = "RetourChariot";
            ToucheClavier[ToucheClavier["Espace"] = 32] = "Espace";
            ToucheClavier[ToucheClavier["Shift"] = 16] = "Shift";
            ToucheClavier[ToucheClavier["Ctrl"] = 17] = "Ctrl";
            ToucheClavier[ToucheClavier["Alt"] = 18] = "Alt";
            ToucheClavier[ToucheClavier["Windows"] = 91] = "Windows";
            ToucheClavier[ToucheClavier["ContextMenu"] = 93] = "ContextMenu";
            ToucheClavier[ToucheClavier["Echap"] = 27] = "Echap";
            ToucheClavier[ToucheClavier["FlecheGauche"] = 37] = "FlecheGauche";
            ToucheClavier[ToucheClavier["FlecheDroite"] = 39] = "FlecheDroite";
            ToucheClavier[ToucheClavier["FlecheHaut"] = 38] = "FlecheHaut";
            ToucheClavier[ToucheClavier["FlecheBas"] = 40] = "FlecheBas";
            ToucheClavier[ToucheClavier["Inserer"] = 45] = "Inserer";
            ToucheClavier[ToucheClavier["Supprimer"] = 46] = "Supprimer";
            ToucheClavier[ToucheClavier["Debut"] = 36] = "Debut";
            ToucheClavier[ToucheClavier["Fin"] = 35] = "Fin";
            ToucheClavier[ToucheClavier["PageHaut"] = 33] = "PageHaut";
            ToucheClavier[ToucheClavier["PageBas"] = 34] = "PageBas";
            ToucheClavier[ToucheClavier["_0"] = 48] = "_0";
            ToucheClavier[ToucheClavier["_1"] = 49] = "_1";
            ToucheClavier[ToucheClavier["_2"] = 50] = "_2";
            ToucheClavier[ToucheClavier["_3"] = 51] = "_3";
            ToucheClavier[ToucheClavier["_4"] = 52] = "_4";
            ToucheClavier[ToucheClavier["_5"] = 53] = "_5";
            ToucheClavier[ToucheClavier["_6"] = 54] = "_6";
            ToucheClavier[ToucheClavier["_7"] = 55] = "_7";
            ToucheClavier[ToucheClavier["_8"] = 56] = "_8";
            ToucheClavier[ToucheClavier["_9"] = 57] = "_9";
            ToucheClavier[ToucheClavier["A"] = 65] = "A";
            ToucheClavier[ToucheClavier["B"] = 66] = "B";
            ToucheClavier[ToucheClavier["C"] = 67] = "C";
            ToucheClavier[ToucheClavier["D"] = 68] = "D";
            ToucheClavier[ToucheClavier["E"] = 69] = "E";
            ToucheClavier[ToucheClavier["F"] = 70] = "F";
            ToucheClavier[ToucheClavier["G"] = 71] = "G";
            ToucheClavier[ToucheClavier["H"] = 72] = "H";
            ToucheClavier[ToucheClavier["I"] = 73] = "I";
            ToucheClavier[ToucheClavier["J"] = 74] = "J";
            ToucheClavier[ToucheClavier["K"] = 75] = "K";
            ToucheClavier[ToucheClavier["L"] = 76] = "L";
            ToucheClavier[ToucheClavier["M"] = 77] = "M";
            ToucheClavier[ToucheClavier["N"] = 78] = "N";
            ToucheClavier[ToucheClavier["O"] = 79] = "O";
            ToucheClavier[ToucheClavier["P"] = 80] = "P";
            ToucheClavier[ToucheClavier["Q"] = 81] = "Q";
            ToucheClavier[ToucheClavier["R"] = 82] = "R";
            ToucheClavier[ToucheClavier["S"] = 83] = "S";
            ToucheClavier[ToucheClavier["T"] = 84] = "T";
            ToucheClavier[ToucheClavier["U"] = 85] = "U";
            ToucheClavier[ToucheClavier["V"] = 86] = "V";
            ToucheClavier[ToucheClavier["W"] = 87] = "W";
            ToucheClavier[ToucheClavier["X"] = 88] = "X";
            ToucheClavier[ToucheClavier["Y"] = 89] = "Y";
            ToucheClavier[ToucheClavier["Z"] = 90] = "Z";
            ToucheClavier[ToucheClavier["AccoladeDroite"] = 222] = "AccoladeDroite";
            ToucheClavier[ToucheClavier["AccoladeGauche"] = 220] = "AccoladeGauche";
            ToucheClavier[ToucheClavier["Dollar"] = 223] = "Dollar";
            ToucheClavier[ToucheClavier["CrochetGauche"] = 186] = "CrochetGauche";
            ToucheClavier[ToucheClavier["CrochetDroite"] = 192] = "CrochetDroite";
            ToucheClavier[ToucheClavier["Circonflexe"] = 221] = "Circonflexe";
            ToucheClavier[ToucheClavier["PointInterrogation"] = 219] = "PointInterrogation";
            ToucheClavier[ToucheClavier["VerrMaj"] = 20] = "VerrMaj";
            ToucheClavier[ToucheClavier["VerrNum"] = 144] = "VerrNum";
            ToucheClavier[ToucheClavier["F1"] = 115] = "F1";
            ToucheClavier[ToucheClavier["F3"] = 114] = "F3";
            ToucheClavier[ToucheClavier["F2"] = 113] = "F2";
            ToucheClavier[ToucheClavier["F5"] = 116] = "F5";
            ToucheClavier[ToucheClavier["F6"] = 117] = "F6";
            ToucheClavier[ToucheClavier["F7"] = 118] = "F7";
            ToucheClavier[ToucheClavier["F8"] = 119] = "F8";
            ToucheClavier[ToucheClavier["F9"] = 120] = "F9";
            ToucheClavier[ToucheClavier["F10"] = 121] = "F10";
            ToucheClavier[ToucheClavier["F11"] = 122] = "F11";
            ToucheClavier[ToucheClavier["F12"] = 123] = "F12";
            ToucheClavier[ToucheClavier["ArretDefilement"] = 145] = "ArretDefilement";
            ToucheClavier[ToucheClavier["Pause"] = 19] = "Pause";
            ToucheClavier[ToucheClavier["Inferieur"] = 226] = "Inferieur";
            ToucheClavier[ToucheClavier["Virgule"] = 188] = "Virgule";
            ToucheClavier[ToucheClavier["Tiret"] = 189] = "Tiret";
            ToucheClavier[ToucheClavier["Point"] = 190] = "Point";
            ToucheClavier[ToucheClavier["Section"] = 191] = "Section";
            ToucheClavier[ToucheClavier["NumpadPlus"] = 107] = "NumpadPlus";
            ToucheClavier[ToucheClavier["NumpadMoins"] = 109] = "NumpadMoins";
            ToucheClavier[ToucheClavier["NumpadSlash"] = 111] = "NumpadSlash";
            ToucheClavier[ToucheClavier["NumpadStar"] = 106] = "NumpadStar";
            ToucheClavier[ToucheClavier["Numpad_0"] = 96] = "Numpad_0";
            ToucheClavier[ToucheClavier["Numpad_1"] = 97] = "Numpad_1";
            ToucheClavier[ToucheClavier["Numpad_2"] = 98] = "Numpad_2";
            ToucheClavier[ToucheClavier["Numpad_3"] = 99] = "Numpad_3";
            ToucheClavier[ToucheClavier["Numpad_4"] = 100] = "Numpad_4";
            ToucheClavier[ToucheClavier["Numpad_5"] = 101] = "Numpad_5";
            ToucheClavier[ToucheClavier["Numpad_6"] = 102] = "Numpad_6";
            ToucheClavier[ToucheClavier["Numpad_7"] = 103] = "Numpad_7";
            ToucheClavier[ToucheClavier["Numpad_8"] = 104] = "Numpad_8";
            ToucheClavier[ToucheClavier["Numpad_9"] = 105] = "Numpad_9";
            ToucheClavier[ToucheClavier["NumpadPoint"] = 110] = "NumpadPoint";
        }
        )(ToucheClavier || (exports.ToucheClavier = ToucheClavier = {}));
        exports.ToucheClavierUtil = {
            estCaractere(aChar, aRegExp) {
                return (aChar === '') || new RegExp('[' + aRegExp + ']').test(aChar);
            },
            estEventRetourChariot(aEventJQuery) {
                return !!aEventJQuery && aEventJQuery.which === ToucheClavier.RetourChariot && !aEventJQuery.shiftKey && !aEventJQuery.altKey && !aEventJQuery.ctrlKey;
            },
            estEventEspace(aEventJQuery) {
                return !!aEventJQuery && aEventJQuery.which === ToucheClavier.Espace && !aEventJQuery.shiftKey;
            },
            estEventSelection(aEventJQuery) {
                return (exports.ToucheClavierUtil.estEventRetourChariot(aEventJQuery) || exports.ToucheClavierUtil.estEventEspace(aEventJQuery));
            },
            estEventEdition(aEventJQuery) {
                return !!aEventJQuery && aEventJQuery.which === ToucheClavier.RetourChariot && aEventJQuery.shiftKey && !aEventJQuery.altKey && !aEventJQuery.ctrlKey;
            },
            estEventSupprimer(aEventJQuery) {
                return aEventJQuery && ((aEventJQuery.which === ToucheClavier.Supprimer && !aEventJQuery.shiftKey && !aEventJQuery.altKey && !aEventJQuery.ctrlKey) || (aEventJQuery.which === ToucheClavier.Backspace && aEventJQuery.metaKey));
            },
            estEventCaractereAlphaNumerique(aEventJQuery) {
                return !!aEventJQuery && !aEventJQuery.altKey && !aEventJQuery.ctrlKey && (new RegExp('[0-9.a-z.A-Z]').test(String.fromCharCode(aEventJQuery.which)));
            },
            estToucheFleche(aTouche) {
                return aTouche === ToucheClavier.FlecheBas || aTouche === ToucheClavier.FlecheHaut || aTouche === ToucheClavier.FlecheGauche || aTouche === ToucheClavier.FlecheDroite;
            },
            ToucheRetourNavigation: ToucheClavier.Echap
        };
    },
    fn: 'toucheclavier.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("purify.min.js");
        require("purify.js");
    },
    fn: 'declarationdompurify.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreDocumentJoint = void 0;
        var EGenreDocumentJoint;
        (function(EGenreDocumentJoint) {
            EGenreDocumentJoint[EGenreDocumentJoint["Url"] = 0] = "Url";
            EGenreDocumentJoint[EGenreDocumentJoint["Fichier"] = 1] = "Fichier";
            EGenreDocumentJoint[EGenreDocumentJoint["Cloud"] = 2] = "Cloud";
            EGenreDocumentJoint[EGenreDocumentJoint["LienKiosque"] = 3] = "LienKiosque";
            EGenreDocumentJoint[EGenreDocumentJoint["LienVisio"] = 4] = "LienVisio";
        }
        )(EGenreDocumentJoint || (exports.EGenreDocumentJoint = EGenreDocumentJoint = {}));
    },
    fn: 'enumere_documentjoint.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EFormatDocJointUtil = exports.EFormatDocJoint = void 0;
        var EFormatDocJoint;
        (function(EFormatDocJoint) {
            EFormatDocJoint[EFormatDocJoint["Inconnu"] = 0] = "Inconnu";
            EFormatDocJoint[EFormatDocJoint["Texte"] = 1] = "Texte";
            EFormatDocJoint[EFormatDocJoint["Pdf"] = 2] = "Pdf";
            EFormatDocJoint[EFormatDocJoint["Excel"] = 3] = "Excel";
            EFormatDocJoint[EFormatDocJoint["Archive"] = 4] = "Archive";
            EFormatDocJoint[EFormatDocJoint["Image"] = 5] = "Image";
            EFormatDocJoint[EFormatDocJoint["Son"] = 6] = "Son";
            EFormatDocJoint[EFormatDocJoint["Video"] = 7] = "Video";
            EFormatDocJoint[EFormatDocJoint["Diapo"] = 8] = "Diapo";
            EFormatDocJoint[EFormatDocJoint["Geogebra"] = 9] = "Geogebra";
        }
        )(EFormatDocJoint || (exports.EFormatDocJoint = EFormatDocJoint = {}));
        const EFormatDocJointUtil = {
            getClassImgDeGenre(aGenre) {
                switch (aGenre) {
                case EFormatDocJoint.Texte:
                    return 'Image_FormatTexte';
                case EFormatDocJoint.Pdf:
                    return 'Image_FormatPDF';
                case EFormatDocJoint.Excel:
                    return 'Image_FormatExcel';
                case EFormatDocJoint.Archive:
                    return 'Image_FormatArch';
                case EFormatDocJoint.Image:
                    return 'Image_FormatImg';
                case EFormatDocJoint.Son:
                    return 'Image_FormatSon';
                case EFormatDocJoint.Video:
                    return 'Image_FormatVideo';
                case EFormatDocJoint.Diapo:
                    return 'Image_FormatPPT';
                case EFormatDocJoint.Geogebra:
                    return 'Image_FormatGGB';
                }
                return 'Image_FormatInconnu';
            },
            getGenreDExtension(aExtension) {
                switch (aExtension) {
                case 'doc':
                case 'docx':
                case 'txt':
                    return EFormatDocJoint.Texte;
                case 'pdf':
                    return EFormatDocJoint.Pdf;
                case 'gzip':
                case 'zip':
                case 'rar':
                    return EFormatDocJoint.Archive;
                case 'xls':
                case 'xlsx':
                    return EFormatDocJoint.Excel;
                case 'png':
                case 'mng':
                case 'tiff':
                case 'jpeg':
                case 'gif':
                case 'jpg':
                case 'webp':
                case 'bmp':
                    return EFormatDocJoint.Image;
                case 'mp3':
                case 'ogg':
                case 'wav':
                    return EFormatDocJoint.Son;
                case 'mp4':
                case 'mpeg':
                case 'avi':
                    return EFormatDocJoint.Video;
                case 'ppt':
                case 'pptx':
                    return EFormatDocJoint.Diapo;
                case 'ggb':
                    return EFormatDocJoint.Geogebra;
                }
                return EFormatDocJoint.Inconnu;
            },
            getClassIconDeGenre(aGenre) {
                switch (aGenre) {
                case EFormatDocJoint.Texte:
                    return 'icon_fichier_word';
                case EFormatDocJoint.Pdf:
                    return 'icon_uniF1C1';
                case EFormatDocJoint.Excel:
                    return 'icon_fichier_excel';
                case EFormatDocJoint.Archive:
                    return 'icon_fichier_zip';
                case EFormatDocJoint.Image:
                    return 'icon_fichier_image';
                case EFormatDocJoint.Son:
                    return 'icon_fichier_audio';
                case EFormatDocJoint.Video:
                    return 'icon_fichier_video';
                case EFormatDocJoint.Diapo:
                    return 'icon_fichier_powerpoint';
                case EFormatDocJoint.Geogebra:
                    return 'icon_file_text_alt';
                default:
                    return 'icon_file_alt';
                }
            },
            getGenreDeFichier(aExtension) {
                if (aExtension !== '') {
                    return EFormatDocJointUtil.getGenreDExtension(aExtension.toLowerCase());
                }
                return EFormatDocJoint.Inconnu;
            }
        };
        exports.EFormatDocJointUtil = EFormatDocJointUtil;
    },
    fn: 'enumere_formatdocjoint.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireCss = UtilitaireCss;
        const MethodesObjet_1 = require("MethodesObjet");
        function UtilitaireCss() {}
        let uCacheReglesCss = null;
        let uCacheCss = null;
        const uTailleMaxCacheCss = 50;
        function _trouverSelecteur(aSelecteursTexte, aNomRegleCss) {
            if (aSelecteursTexte && aSelecteursTexte.join) {
                for (let i = 0; i < aSelecteursTexte.length; i++) {
                    if (aSelecteursTexte[i] === aNomRegleCss) {
                        return true;
                    }
                }
            }
            return false;
        }
        function _remplirCacheReglesCss() {
            let lStyleSheet, lRules, lRegles, lRegle, lSelecteurTexte;
            uCacheReglesCss = [];
            for (let I = document.styleSheets.length - 1; I >= 0; I--) {
                lStyleSheet = document.styleSheets[I];
                if (lStyleSheet && lStyleSheet.href) {
                    try {
                        lRules = lStyleSheet.cssRules || lStyleSheet.rules;
                    } catch (e) {
                        lRules = null;
                        IE.log.addLog('lecture cssRules : exception=> ' + e);
                    }
                    if (lRules) {
                        lRegles = [];
                        uCacheReglesCss.push(lRegles);
                        for (let J = 0; J < lRules.length; J++) {
                            try {
                                lSelecteurTexte = lRules[J].selectorText;
                            } catch (e) {
                                IE.log.addLog(e);
                            }
                            lRegle = {
                                selecteurs: [],
                                regle: lRules[J]
                            };
                            if (lSelecteurTexte && lSelecteurTexte.split) {
                                const lTabSelector = lSelecteurTexte.split(',');
                                if (lTabSelector) {
                                    for (let i = 0; i < lTabSelector.length; i++) {
                                        lRegle.selecteurs.push(lTabSelector[i] && lTabSelector[i].trim && (lTabSelector[i].trim().toLowerCase().replace(/'/g, '"')));
                                    }
                                }
                            }
                            lRegles.push(lRegle);
                        }
                    }
                }
            }
        }
        function _chercherReglesCss(aNomRegleCss) {
            if (!aNomRegleCss || !MethodesObjet_1.MethodesObjet.isString(aNomRegleCss)) {
                return null;
            }
            aNomRegleCss = aNomRegleCss.toLowerCase();
            if (!uCacheReglesCss) {
                _remplirCacheReglesCss();
            }
            if (uCacheCss && uCacheCss[aNomRegleCss]) {
                return uCacheCss[aNomRegleCss];
            }
            const lRegles = [];
            try {
                aNomRegleCss = aNomRegleCss.trim().toLowerCase().replace(/'/g, '"');
                for (let I = uCacheReglesCss.length - 1; I >= 0; I--) {
                    const lRules = uCacheReglesCss[I];
                    if (lRules) {
                        for (let J = lRules.length - 1; J >= 0; J--) {
                            const lRegle = lRules[J];
                            if (lRegle) {
                                if (_trouverSelecteur(lRegle.selecteurs, aNomRegleCss)) {
                                    lRegles.push(lRegle.regle);
                                }
                            }
                        }
                    }
                }
                if (lRegles.length > 0) {
                    if (!uCacheCss) {
                        uCacheCss = [];
                    }
                    if (uCacheCss.length >= uTailleMaxCacheCss) {
                        for (let lProp in uCacheCss) {
                            delete uCacheCss[lProp];
                            break;
                        }
                    }
                    uCacheCss[aNomRegleCss] = lRegles;
                    return lRegles;
                } else {
                    return null;
                }
            } catch (e) {
                IE.log.addLog('lecture cssRules : exception=> ' + e);
            }
        }
        function _convertirProprieteCSS(aProprieteCSS) {
            const lTab = aProprieteCSS.split('-');
            for (let i = 1; i < lTab.length; i++) {
                lTab[i] = lTab[i].ucfirst();
            }
            return lTab.join('');
        }
        function _modifierProprieteCSS(aRule, aProprieteCSS, aValeur) {
            try {
                if (aRule && aRule.style) {
                    if (aRule.style.setProperty) {
                        aRule.style.setProperty(aProprieteCSS, aValeur, null);
                    } else {
                        aProprieteCSS = _convertirProprieteCSS(aProprieteCSS);
                        if (!MethodesObjet_1.MethodesObjet.isUndefined(aRule.style[aProprieteCSS])) {
                            aRule.style[aProprieteCSS] = aValeur;
                        }
                    }
                }
            } catch (e) {
                return false;
            }
            return true;
        }
        function _getRegleQuiDefinitProprieteCSS(aTabRegles, aProprieteCSS) {
            if (!aTabRegles) {
                return null;
            }
            let lAttribut;
            for (let i = 0; i < aTabRegles.length; i++) {
                const lRegle = aTabRegles[i];
                if (lRegle && lRegle.style) {
                    aProprieteCSS = _convertirProprieteCSS(aProprieteCSS);
                    lAttribut = lRegle.style[aProprieteCSS];
                    if (((lAttribut !== null && lAttribut !== undefined)) && (lAttribut !== '')) {
                        return lRegle;
                    }
                }
            }
            return null;
        }
        UtilitaireCss.modifierRegleCss = function(aNomRegleCss, aProprieteCSS, aValeur) {
            const lRegles = _chercherReglesCss(aNomRegleCss);
            if (!lRegles) {
                return false;
            }
            let lRegleAModifier = _getRegleQuiDefinitProprieteCSS(lRegles, aProprieteCSS);
            if (lRegleAModifier === null || lRegleAModifier === undefined) {
                lRegleAModifier = lRegles[0];
            }
            return _modifierProprieteCSS(lRegleAModifier, aProprieteCSS, aValeur);
        }
        ;
        UtilitaireCss.chercherAttributReglesCss = function(aNomRegleCss, aAttribut) {
            const lRegles = _chercherReglesCss(aNomRegleCss);
            if (!lRegles) {
                return '';
            }
            let lAttribut;
            for (let i = 0; i < lRegles.length; i++) {
                if (lRegles[i] && lRegles[i].style) {
                    lAttribut = lRegles[i].style[aAttribut];
                    if (((lAttribut !== null && lAttribut !== undefined)) && (lAttribut !== '')) {
                        return lRegles[i].style[aAttribut];
                    }
                }
            }
            return '';
        }
        ;
        UtilitaireCss.extraireUrlReglesCss = function(aNomRegleCss) {
            const lUrl = UtilitaireCss.chercherAttributReglesCss(aNomRegleCss, 'backgroundImage');
            if (!lUrl || (lUrl.length === 0)) {
                return '';
            }
            const lTabSplitDoubleQuote = lUrl.split('"');
            let lTab = lTabSplitDoubleQuote[1];
            if (!lTab) {
                const lTabSplitSimpleQuote = lUrl.split('\'');
                lTab = lTabSplitSimpleQuote[1];
            }
            if (!lTab) {
                const lTabSplitOuvParenthese = lUrl.split('(');
                lTab = lTabSplitOuvParenthese[1];
                if (!lTab) {
                    return '';
                }
                const lTabSplitFermParenthese = lTab.split(')');
                lTab = lTabSplitFermParenthese[0];
            }
            if (!lTab) {
                return '';
            }
            const lTabSplitSlash = lTab.split('/');
            const lTab2 = [];
            for (let j = 0; j < lTabSplitSlash.length; j++) {
                if (lTabSplitSlash[j] !== '..') {
                    lTab2.push(lTabSplitSlash[j]);
                }
            }
            return lTab2.join('/');
        }
        ;
    },
    fn: 'utilitairecss.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.JSXDictionaryCallbacks = exports.fragment = exports.c_attributsAAfficherMemeSiLaValeurEstVide = void 0;
        exports.str = str;
        exports.toArg = toArg;
        exports.jsxFuncAttr = jsxFuncAttr;
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const capitalACharCode = 'A'.charCodeAt(0);
        const capitalZCharCode = 'Z'.charCodeAt(0);
        const isUpper = (input, index) => {
            const charCode = input.charCodeAt(index);
            return capitalACharCode <= charCode && capitalZCharCode >= charCode;
        }
        ;
        const toKebabCase = (camelCased) => {
            let kebabCased = '';
            for (let i = 0; i < camelCased.length; i++) {
                const prevUpperCased = i > 0 ? isUpper(camelCased, i - 1) : true;
                const currentUpperCased = isUpper(camelCased, i);
                const nextUpperCased = i < camelCased.length - 1 ? isUpper(camelCased, i + 1) : true;
                if (!prevUpperCased && currentUpperCased || currentUpperCased && !nextUpperCased) {
                    kebabCased += '-';
                    kebabCased += camelCased[i].toLowerCase();
                } else {
                    kebabCased += camelCased[i];
                }
            }
            return kebabCased;
        }
        ;
        const attributeToString = (aAttributes) => (name) => {
            let lValue = aAttributes[name];
            const lTypeOfValue = typeof lValue;
            if (lValue === false || lValue === null || lTypeOfValue === 'undefined') {
                return '';
            }
            const formattedName = name.toLowerCase();
            if (lValue === true) {
                return formattedName;
            }
            const makeAttribute = (value) => `${formattedName}="${value}"`;
            let lIsString = lTypeOfValue === 'string';
            let lIsNumber = false;
            let lIsArray = false;
            let lIsObject = false;
            let lIsDate = false;
            let lIsFunc = false;
            if (!lIsString) {
                lIsNumber = MethodesObjet_1.MethodesObjet.isNumber(lValue);
                if (!lIsNumber) {
                    lIsArray = Array.isArray(lValue);
                    if (!lIsArray) {
                        lIsDate = MethodesObjet_1.MethodesObjet.isDate(lValue);
                        if (!lIsDate) {
                            lIsFunc = MethodesObjet_1.MethodesObjet.isFunction(lValue);
                            if (!lIsFunc) {
                                lIsObject = MethodesObjet_1.MethodesObjet.isObject(lValue);
                                if (lIsObject && formattedName === 'ie-eventmap') {
                                    const lMapping = lValue;
                                    lValue = () => lMapping;
                                    lIsFunc = true;
                                    lIsObject = false;
                                }
                            }
                        }
                    }
                }
            }
            if (lValue && lIsFunc) {
                const lGUID = JSXDictionaryCallbacks.add(name, lValue);
                return makeAttribute(lGUID);
            }
            if (lIsDate) {
                return makeAttribute(lValue.toISOString());
            }
            if (formattedName === 'class' && lIsArray) {
                const lTab = [];
                lValue.forEach( (aVal) => {
                    const lVal = aVal && aVal.trim ? aVal.trim() : '';
                    if (lVal) {
                        lTab.push(lVal);
                    }
                }
                );
                lValue = lTab.join(' ');
            } else if (formattedName === 'style' && lValue && lIsObject && !Array.isArray(lValue) && lIsObject && !lIsDate) {
                const lArr = [];
                const lPropsStyle = Object.keys(lValue);
                lPropsStyle.map( (aKey) => {
                    let lValueStyle = lValue[aKey];
                    const lKeyStyle = toKebabCase(aKey);
                    if (MethodesObjet_1.MethodesObjet.isNumber(lValueStyle)) {
                        const lEstDiffDeZero = lValueStyle !== 0;
                        lValueStyle = lValueStyle.toString();
                        if (!(lKeyStyle in listePropsCssSansAjoutUnite) && lEstDiffDeZero && lKeyStyle.indexOf('--') !== 0) {
                            lValueStyle += 'px';
                        }
                    }
                    if (lValueStyle && lKeyStyle && MethodesObjet_1.MethodesObjet.isString(lKeyStyle) && MethodesObjet_1.MethodesObjet.isString(lValueStyle)) {
                        lArr.push(`${lKeyStyle}:${lValueStyle};`);
                    }
                }
                );
                if (lArr.length === 0) {
                    return '';
                }
                lValue = lArr.join('');
            }
            let lStr = lValue + '';
            if (lStr === c_strObjectToString) {
                return '';
            }
            ;if (lStr === '' && !exports.c_attributsAAfficherMemeSiLaValeurEstVide.includes(formattedName)) {
                return '';
            }
            if (formattedName === 'title') {
                lStr = lStr.toTitle();
            } else {
                lStr = lStr.toAttrValue();
            }
            return makeAttribute(lStr);
        }
        ;
        const attributesToString = (aAttributes) => {
            if (aAttributes) {
                const lVal = Object.keys(aAttributes).filter(attribute => attribute !== 'children').map(attributeToString(aAttributes)).filter(attribute => attribute.length).join(' ');
                return lVal ? ' ' + lVal : '';
            } else {
                return '';
            }
        }
        ;
        const c_strObjectToString = '[object Object]';
        exports.c_attributsAAfficherMemeSiLaValeurEstVide = ['alt', 'title', 'placeholder', 'aria-label', 'aria-description'];
        const contentsToString = (contents) => {
            if (contents) {
                return contents.map(aElements => {
                    if (MethodesObjet_1.MethodesObjet.isString(aElements) || MethodesObjet_1.MethodesObjet.isNumber(aElements)) {
                        return aElements;
                    }
                    if (MethodesObjet_1.MethodesObjet.isFunction(aElements)) {
                        const lTab = [];
                        const lResultBrut = aElements(lTab);
                        let lResult;
                        if (lTab.length > 0) {
                            lResult = lTab.join('');
                        } else {
                            lResult = lResultBrut || '';
                        }
                        return contentsToString([lResult]);
                    }
                    if (Array.isArray(aElements)) {
                        return contentsToString(aElements);
                    }
                    if (aElements && aElements.toString && !MethodesObjet_1.MethodesObjet.isBoolean(aElements) && !MethodesObjet_1.MethodesObjet.isDate(aElements)) {
                        const lStr = aElements.toString();
                        if (lStr === c_strObjectToString) {
                            return '';
                        }
                        return lStr;
                    }
                    return '';
                }
                ).join('');
            } else {
                return '';
            }
        }
        ;
        const isVoidElement = (tagName) => {
            return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr', 'source'].indexOf(tagName) > -1;
        }
        ;
        function str(name, attributes={}, ...contents) {
            const children = attributes && attributes.children || contents;
            if (typeof name === 'function') {
                return name(children ? Object.assign({
                    children
                }, attributes) : attributes, contents);
            } else {
                const tagName = name.toLowerCase();
                if (isVoidElement(tagName) && !contents.length) {
                    return `<${tagName}${attributesToString(attributes)}>`;
                } else {
                    return `<${tagName}${attributesToString(attributes)}>${contentsToString(contents)}</${tagName}>`;
                }
            }
        }
        const fragment = (attributes, contents) => contentsToString(contents);
        exports.fragment = fragment;
        function toArg(aArgs) {
            let lArray;
            if (Array.isArray(aArgs)) {
                lArray = aArgs;
            } else {
                lArray = [aArgs];
            }
            const lTab = [];
            lArray.forEach( (aArg) => {
                if (aArg === null || typeof aArg === 'undefined') {
                    lTab.push(aArg + '');
                } else if (typeof aArg === 'string' || MethodesObjet_1.MethodesObjet.isDate(aArg)) {
                    lTab.push(`'${aArg}'`);
                } else if (typeof aArg === 'object' || typeof aArg === 'function') {
                    lTab.push(null + '');
                } else {
                    lTab.push(aArg.toString());
                }
            }
            );
            return lTab.join(',').toAttrValue();
        }
        function jsxFuncAttr(aNomFonction, aArgs) {
            if (!aNomFonction || !aNomFonction.replace) {
                return '';
            }
            let lResult = aNomFonction;
            if (arguments.length > 1) {
                lResult += `(${toArg(aArgs)})`;
            }
            return lResult;
        }
        const listePropsCssSansAjoutUnite = {
            'animation-iteration-count': true,
            'aspect-ratio': true,
            'border-image': true,
            'border-image-outset': true,
            'border-image-slice': true,
            'border-image-width': true,
            'box-flex': true,
            'box-flex-group': true,
            'box-ordinal-group': true,
            'column-count': true,
            'columns': true,
            'flex': true,
            'flex-grow': true,
            'flex-positive': true,
            'flex-shrink': true,
            'flex-negative': true,
            'flex-order': true,
            'grid-area': true,
            'grid-row': true,
            'grid-row-end': true,
            'grid-row-span': true,
            'grid-row-start': true,
            'grid-column': true,
            'grid-column-end': true,
            'grid-column-span': true,
            'grid-column-start': true,
            'font-weight': true,
            'line-clamp': true,
            'line-height': true,
            'opacity': true,
            'order': true,
            'orphans': true,
            'tab-size': true,
            'widows': true,
            'z-index': true,
            'zoom': true,
            'fill-opacity': true,
            'flood-opacity': true,
            'stop-opacity': true,
            'stroke-dasharray': true,
            'stroke-dashoffset': true,
            'stroke-miterlimit': true,
            'stroke-opacity': true,
            'stroke-width': true,
            'font-size-adjust': true,
            'initial-letter': true,
            'math-depth': true,
            'shape-image-threshold': true,
            'base-palette': true
        };
        class JSXDictionaryCallbacks {
            static add(aAttr, aFunc) {
                const lGUID = `_$_${this.GUID.get()}_$_`;
                let lName = '';
                if (!this.attrsAllowed.has(aAttr)) {
                    return '';
                }
                this.recGUID.set(lGUID, {
                    func: aFunc,
                    attr: aAttr,
                    name: lName
                });
                return lGUID;
            }
            static delete(aGUID, aAttr) {
                const lObj = this.recGUID.get(aGUID);
                if (!lObj) {
                    return false;
                }
                ;this.recGUID.delete(aGUID);
                return true;
            }
            static getAndDelete(aGUID, aAttr) {
                if (!aGUID) {
                    return null;
                }
                let lObj = this.recGUID.get(aGUID);
                if (lObj) {
                    this.delete(aGUID, aAttr);
                    if (lObj.attr !== aAttr) {
                        return null;
                    }
                    return lObj;
                }
                return null;
            }
            static clear(aMapGUIDAIgnorer, aAvecAssert) {
                let lResult = true;
                if (aMapGUIDAIgnorer && aMapGUIDAIgnorer.size > 0) {
                    const lKeys = this.recGUID.keys();
                    for (const lKey of lKeys) {
                        if (!aMapGUIDAIgnorer.has(lKey)) {
                            this.recGUID.delete(lKey);
                            lResult = false;
                        }
                    }
                } else {
                    if (this.recGUID.size > 0) {
                        lResult = false;
                    }
                    this.recGUID.clear();
                }
                if (aAvecAssert && !lResult) {}
                if (this.recGUID.size === 0) {
                    this.GUID = new GUID_1.GenerateurGUID();
                }
                return lResult;
            }
            static getGUIDs() {
                if (this.recGUID.size === 0) {
                    return null;
                }
                const lMap = new Map();
                for (const lKey of this.recGUID.keys()) {
                    lMap.set(lKey, true);
                }
                return lMap;
            }
            static addAttrAllowed(aAttr) {
                this.attrsAllowed.set(aAttr, true);
            }
            static getStrCompare(aHtml) {
                if (aHtml && aHtml.replace) {
                    return aHtml.replace(/(="_\$_g\d+(x\d+)?_\$_")/g, '="guid_compare"');
                }
                return aHtml;
            }
            static valueIsGUID(aValue) {
                if (aValue && aValue.replace) {
                    return !!aValue.match(/_\$_g\d+(x\d+)?_\$_/g);
                }
                return false;
            }
        }
        exports.JSXDictionaryCallbacks = JSXDictionaryCallbacks;
        JSXDictionaryCallbacks.GUID = new GUID_1.GenerateurGUID();
        JSXDictionaryCallbacks.recGUID = new Map();
        JSXDictionaryCallbacks.attrsAllowed = new Map();
        Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.nettoyerJSX, () => {
            JSXDictionaryCallbacks.clear(null, true);
        }
        );
        IE.jsx = {
            str,
            fragment: exports.fragment
        };
    },
    fn: 'jsx.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.tag = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const jsx = require("jsx");
        let u_collection = {
            br: {
                autoFermante: true
            },
            input: {
                autoFermante: true
            },
            img: {
                autoFermante: true
            }
        };
        const tag = function(aBalise, ...aParams) {
            let lNomBalise = aBalise;
            if (!lNomBalise || !lNomBalise.trim) {
                return '';
            }
            lNomBalise = lNomBalise.trim();
            if (!lNomBalise) {
                return '';
            }
            const T = ['<', lNomBalise];
            const lArgs = aParams;
            const lAttrs = lArgs[0];
            let lInner = '';
            if (lAttrs && MethodesObjet_1.MethodesObjet.isObject(lAttrs)) {
                T.push(_attrsToString(lAttrs));
                lArgs.shift();
            }
            if (lArgs.length > 0) {
                lArgs.forEach( (aVal) => {
                    let lInnerArg = aVal;
                    if (lInnerArg && MethodesObjet_1.MethodesObjet.isFunction(lInnerArg)) {
                        const lTabInner = [];
                        lInnerArg = lInnerArg(lTabInner);
                        if (lTabInner.length > 0) {
                            lInnerArg = lTabInner.join('');
                        }
                    }
                    if (lInnerArg === 0) {
                        lInnerArg = lInnerArg + '';
                    }
                    if (lInnerArg) {
                        lInner += lInnerArg;
                    }
                }
                );
            }
            if (!lInner && u_collection[lNomBalise] && u_collection[lNomBalise].autoFermante) {
                T.push('>');
            } else {
                T.push('>');
                if (lInner) {
                    T.push(lInner);
                }
                T.push('</', lNomBalise, '>');
            }
            return T.join('');
        };
        exports.tag = tag;
        function _attrsToString(aAttrs) {
            if (aAttrs && MethodesObjet_1.MethodesObjet.isString(aAttrs)) {
                return aAttrs;
            }
            if (aAttrs && MethodesObjet_1.MethodesObjet.isObject(aAttrs)) {
                const T = [];
                Object.keys(aAttrs).forEach( (aKey) => {
                    let lVal = aAttrs[aKey];
                    if (lVal && Array.isArray(lVal)) {
                        if (aKey === 'class') {
                            const lTab = [];
                            lVal.forEach( (aVal) => {
                                const lVal = aVal && aVal.trim ? aVal.trim() : '';
                                if (lVal) {
                                    lTab.push(lVal);
                                }
                            }
                            );
                            lVal = lTab.join(' ');
                        } else if (aKey === 'style') {
                            const lTab = [];
                            lVal.forEach( (aVal) => {
                                let lVal = aVal && aVal.trim ? aVal.trim() : '';
                                if (lVal && lVal.length > 0) {
                                    if (lVal[lVal.length - 1] !== ';') {
                                        lVal += ';';
                                    }
                                    lTab.push(lVal);
                                }
                            }
                            );
                            lVal = lTab.join(' ');
                        } else {
                            lVal = lVal.join(' ');
                        }
                    }
                    if (lVal && lVal.trim && lVal.trim() === '') {
                        return;
                    }
                    ;if (lVal === 0 || lVal > 0 || lVal === true || (lVal && lVal.trim)) {
                        T.push(tag.composeAttr(aKey, lVal === true ? '' : lVal).trimEnd());
                    }
                }
                );
                return T.join('');
            }
            return '';
        }
        tag.toArg = jsx.toArg;
        tag.funcAttr = jsx.jsxFuncAttr;
        tag.composeAttr = function(aAttribut, aValue, aArgs) {
            if (!aAttribut || !aAttribut.trim) {
                return '';
            }
            ;let lAttribut = aAttribut.trim();
            if (!lAttribut) {
                return '';
            }
            lAttribut = ' ' + lAttribut;
            let lValue = aValue === 0 ? aValue + '' : aValue;
            if (!lValue || lValue === true) {
                return lAttribut + ' ';
            }
            if (MethodesObjet_1.MethodesObjet.isString(lValue) && lValue.replace) {
                if (aAttribut === 'title') {
                    lValue = lValue.toTitle();
                } else {
                    lValue = lValue.toAttrValue();
                }
            } else {
                if (!MethodesObjet_1.MethodesObjet.isNumber(lValue)) {
                    return lAttribut + ' ';
                }
                lValue = lValue + '';
            }
            const lArgs = [];
            if (arguments.length > 2) {
                lArgs.push(aArgs);
            }
            return lAttribut + '="' + tag.funcAttr(lValue, ...lArgs) + '" ';
        }
        ;
        tag.styleToStr = function(aRule, aValue) {
            if (!aRule || !aRule.trim) {
                return '';
            }
            if (!aValue && aValue !== 0) {
                return '';
            }
            return aRule + ':' + aValue + (typeof aValue === 'string' && aValue.length > 0 && aValue[aValue.length - 1] === ';' ? '' : ';');
        }
        ;
    },
    fn: 'tag.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TUtilitaireEmail = void 0;
        const cRregExEmail = '^([^\\s@\\.]+\\.)*[^\\s@\\.]+@([^\\s@\\.]+\\.)+[^\\s@\\.]+$';
        const TUtilitaireEmail = {
            estValide(aEmail) {
                return RegExp(cRregExEmail, 'i').test(aEmail.trim());
            }
        };
        exports.TUtilitaireEmail = TUtilitaireEmail;
    },
    fn: 'utilitaireemail.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GTraductions = exports.TraductionsModule = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        require("Divers");
        const DeclarationTraductions = require("traductions");
        const AccessApp_1 = require("AccessApp");
        class ObjetTraduction {
            getValeur(aNom, aTableauRemplacements) {
                return this._getValeur(aNom, aTableauRemplacements);
            }
            getTabValeurs(aNom) {
                const lVal = this._getValeur(aNom);
                if (Array.isArray(lVal)) {
                    return lVal;
                }
                ;return lVal;
            }
            getTitreMFiche(aIdRessource) {
                const lChaine = this.getValeur(aIdRessource);
                if (lChaine !== '' && typeof lChaine === 'string') {
                    const lJson = JSON.parse(lChaine);
                    if (lJson && lJson.titre) {
                        return lJson.titre;
                    } else {}
                } else {}
            }
            _getValeur(aNom, aTableauRemplacements) {
                let lValeur = MethodesObjet_1.MethodesObjet.get(this, aNom);
                if (!lValeur && !MethodesObjet_1.MethodesObjet.isString(lValeur)) {
                    return lValeur || '';
                }
                if (aTableauRemplacements) {
                    if (typeof lValeur === 'string') {
                        lValeur = lValeur.format(aTableauRemplacements);
                    } else {}
                }
                return lValeur;
            }
            add(aNom, aValeur, aAccepteTableau) {
                try {
                    let lNomDernierNoeud = aNom;
                    if (typeof aValeur === 'function') {
                        aValeur.call(this, aNom);
                        return;
                    }
                    let lObjet = this;
                    if (aNom.indexOf('.') > 0) {
                        const T = aNom.split('.');
                        for (let J = 0; J < T.length - 1; J++) {
                            const lProp = aNom.split('.')[J];
                            if (!lObjet[lProp]) {
                                lObjet[lProp] = new ObjetTraduction();
                            }
                            lObjet = lObjet[lProp];
                        }
                        if (T.length > 0) {
                            lNomDernierNoeud = aNom.split('.')[T.length - 1];
                        }
                    }
                    if (MethodesObjet_1.MethodesObjet.isString(lObjet)) {
                        return;
                    }
                    if (lObjet[lNomDernierNoeud] || lObjet[lNomDernierNoeud] === '') {
                        if (MethodesObjet_1.MethodesObjet.isString(lObjet[lNomDernierNoeud])) {
                            lObjet[lNomDernierNoeud] = [lObjet[lNomDernierNoeud]];
                        }
                        lObjet[lNomDernierNoeud].push(aValeur || '');
                    } else {
                        lObjet[lNomDernierNoeud] = aValeur || '';
                    }
                } catch (e) {}
            }
            getModule(aNomModule) {
                const lObj = this[`$${aNomModule}`];
                return lObj;
            }
            _passerEnCleDeTraductionsDEBUG(aChaine) {}
        }
        class TraductionsModule {
            static getModule(aNomModule, aModele) {
                const lObj = Traductions[`$${aNomModule}`];
                if (!lObj) {
                    return aModele;
                }
                TraductionsModule.populate(lObj, aModele, aNomModule);
                return lObj;
            }
            static format(aTrad, aFormat) {
                var _a;
                return ((_a = aTrad === null || aTrad === void 0 ? void 0 : aTrad.format) === null || _a === void 0 ? void 0 : _a.call(aTrad, aFormat)) || '';
            }
            static populate(aTradDict, aModel, aNomModule) {
                for (const lKey of Object.keys(aModel)) {
                    const lValModel = aModel[lKey];
                    if (typeof lValModel === 'string') {
                        if (typeof aTradDict[lKey] !== 'string') {
                            aTradDict[lKey] = '';
                        }
                    } else if (typeof lValModel === 'number') {
                        if (typeof aTradDict[lKey] !== 'number') {
                            aTradDict[lKey] = '';
                        }
                    } else if (lValModel && Array.isArray(lValModel)) {
                        if (!aTradDict[lKey]) {
                            aTradDict[lKey] = lValModel;
                        }
                    } else if (lValModel && typeof lValModel === 'object') {
                        if (!aTradDict[lKey]) {
                            aTradDict[lKey] = {};
                        }
                        TraductionsModule.populate(aTradDict[lKey], lValModel, aNomModule);
                    } else {}
                }
            }
        }
        exports.TraductionsModule = TraductionsModule;
        const Traductions = new ObjetTraduction();
        if (DeclarationTraductions && DeclarationTraductions.trad) {
            const lFunc = function(aNom, aValeur, aAccepteTableau) {
                Traductions.add(aNom, aValeur, aAccepteTableau);
            };
            DeclarationTraductions.trad(lFunc);
        }
        exports.GTraductions = Traductions;
    },
    fn: 'objettraduction.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GChaine = exports.ObjetChaine = void 0;
        require("DeclarationDOMPurify");
        require("Divers");
        const GUID_1 = require("GUID");
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const Enumere_DocumentJoint_1 = require("Enumere_DocumentJoint");
        const ObjetElement_1 = require("ObjetElement");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetSupport_1 = require("ObjetSupport");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const Enumere_FormatDocJoint_1 = require("Enumere_FormatDocJoint");
        const UtilitaireCss_1 = require("UtilitaireCss");
        const ComparateurChaines_1 = require("ComparateurChaines");
        const tag_1 = require("tag");
        const UtilitaireEmail_1 = require("UtilitaireEmail");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const AccessApp_1 = require("AccessApp");
        let GChaine;
        var TypeFormatSIRET;
        (function(TypeFormatSIRET) {
            TypeFormatSIRET[TypeFormatSIRET["FR"] = 0] = "FR";
            TypeFormatSIRET[TypeFormatSIRET["IT"] = 1] = "IT";
        }
        )(TypeFormatSIRET || (TypeFormatSIRET = {}));
        class ObjetChaine {
            constructor() {
                this.maskTelephone = '99 99 99 99 99 99';
                this._hauteurPolice = [];
                this.regexURL = /(https?:\/\/|www\.)[^ \r\n,]+/gi;
                this.__cacheCanvas = null;
                this.LongueurCaracteres = new Array(30);
                for (let I = 0; I < 30; I++) {
                    this.LongueurCaracteres[I] = new Array(2);
                    for (let J = 0; J < 2; J++) {
                        this.LongueurCaracteres[I][J] = [];
                    }
                }
            }
            enleverChemin(aFichier) {
                let N = aFichier.lastIndexOf('/');
                if (N === -1) {
                    N = aFichier.lastIndexOf('\\');
                }
                return aFichier.substring(N + 1, aFichier.length);
            }
            avecEspaceSiVide(AChaine) {
                return AChaine && (AChaine.length > 0) ? AChaine : '&nbsp;';
            }
            toAttrValue(aChaine) {
                return aChaine && aChaine.toAttrValue ? aChaine.toAttrValue() : '';
            }
            toTitle(aChaine) {
                return aChaine && aChaine.toTitle ? aChaine.toTitle() : '';
            }
            strToDate(ADate) {
                const lTabDate = ADate.split(' ');
                const LJour = lTabDate[0].split('/');
                const LHeure = lTabDate[1] ? lTabDate[1].split(':') : ['0', '0', '0'];
                return new Date(parseInt(LJour[2]),parseInt(LJour[1]) - 1,parseInt(LJour[0]),parseInt(LHeure[0]),parseInt(LHeure[1]),parseInt(LHeure[2]));
            }
            strToInteger(aInteger) {
                return parseInt(aInteger, 10);
            }
            strToDouble(aDouble) {
                return parseFloat(aDouble.replace(',', '.'));
            }
            strToCardinal(ACardinal) {
                return parseInt(ACardinal, 10);
            }
            strToBoolean(ABoolean) {
                return (ABoolean === '1') || (ABoolean.toUpperCase() === 'TRUE') || (ABoolean.toUpperCase() === 'VRAI');
            }
            strToIp(aIP) {
                const T = aIP.split('.');
                if (T.length !== 4) {
                    return '';
                }
                let lIp = 0;
                let lValeur;
                for (let I = 0; I < 4; I++) {
                    lValeur = parseInt(T[I], 10);
                    if ((lValeur < 0) || (lValeur > 255)) {
                        return 0;
                    }
                    lIp = 256 * lIp + lValeur;
                }
                return lIp;
            }
            dateToStr(ADate) {
                return _dateToStr(ADate);
            }
            domaineToStr(aDomaine) {
                return aDomaine ? aDomaine.toString() : '';
            }
            doubleToStr(aDouble) {
                return ('' + aDouble).replace('.', ',');
            }
            chaineToStr(AChaine) {
                return !AChaine ? '' : AChaine;
            }
            cardinalToStr(ACardinal) {
                return '' + ACardinal;
            }
            ipToStr(aIp) {
                aIp = parseInt(aIp, 10);
                if (isNaN(aIp)) {
                    return '';
                }
                const T = [];
                for (let I = 4; I > 0; I--) {
                    T[I - 1] = (aIp % 256);
                    if (T[I - 1] < 0) {
                        T[I - 1] += 256;
                    }
                    aIp = Math.floor(aIp / 256);
                }
                return T.join('.');
            }
            estAdresseIPV4Valide(aStrAdresseIPV4) {
                let lEstValide = false;
                if (!!aStrAdresseIPV4) {
                    const lStrAdresseIP = aStrAdresseIPV4.trim();
                    const lStrNombres = lStrAdresseIP.split('.');
                    if (lStrNombres.length === 4) {
                        lEstValide = true;
                        for (const lStrNombre of lStrNombres) {
                            const lNb = parseInt(lStrNombre);
                            if (lNb < 0 || lNb >= 256) {
                                lEstValide = false;
                                break;
                            }
                        }
                    }
                }
                return lEstValide;
            }
            estAdresseIPV4Avant(aStr1AdresseIPV4, aStr2AdresseIPV4) {
                if (this.estAdresseIPV4Valide(aStr1AdresseIPV4) && this.estAdresseIPV4Valide(aStr2AdresseIPV4) && aStr1AdresseIPV4 !== aStr2AdresseIPV4) {
                    const lValeursAdresse1 = aStr1AdresseIPV4.split('.');
                    const lValeursAdresse2 = aStr2AdresseIPV4.split('.');
                    let lResult = null;
                    for (let i = 0; i < lValeursAdresse1.length; i++) {
                        const lValeur1 = parseInt(lValeursAdresse1[i]);
                        const lValeur2 = parseInt(lValeursAdresse2[i]);
                        if (lValeur1 < lValeur2) {
                            lResult = true;
                            break;
                        } else if (lValeur2 < lValeur1) {
                            lResult = false;
                            break;
                        }
                    }
                    return lResult;
                }
                return null;
            }
            format(aChaine, aTabElements) {
                if (!aChaine || !aChaine.format) {
                    return aChaine;
                }
                return aChaine.format(aTabElements);
            }
            tailleOctetsToStr(aTailleEnOctets) {
                if (aTailleEnOctets < 0 || !MethodesObjet_1.MethodesObjet.isNumber(aTailleEnOctets)) {
                    return `0 ${ObjetTraduction_1.GTraductions.getValeur('unite.Ko')}`;
                }
                const lUnit = 1024;
                let lFixed = 0;
                let lVal = aTailleEnOctets;
                let lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.O');
                if (lVal === 0) {
                    lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Ko');
                } else if (lVal > lUnit) {
                    lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Ko');
                    lVal = lVal / lUnit;
                    lFixed = 1;
                    if (lVal > lUnit) {
                        lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Mo');
                        lVal = lVal / lUnit;
                        lFixed = 2;
                        if (lVal > lUnit) {
                            lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Go');
                            lVal = lVal / lUnit;
                        }
                    }
                }
                return `${this.doubleToStr(lVal.toFixed(lFixed))} ${lUnite}`;
            }
            insecable(AChaine) {
                try {
                    return AChaine ? AChaine.replace(/ /g, '&nbsp;').replace(/-/g, '&#x2011;') : '';
                } catch (e) {
                    return '';
                }
            }
            formatTelephone(aChaine, aOptions) {
                if (!aChaine || !aChaine.trim) {
                    return '';
                }
                const lOptions = Object.assign({
                    mask: '',
                    avecTailleMask: true
                }, aOptions);
                let lMask = lOptions.mask || this.maskTelephone;
                const lChaine = aChaine.trim().replace(/([^0-9\s])/g, '');
                lMask = this._reverseString(lMask.replace(/([^9\s])/g, ''));
                const lLengthCharMask = lMask.replace(/([^9])/g, '').length;
                const lNumeroSansEspace = lChaine.replace(/([^0-9])/g, '');
                const lEcart = Math.max(0, lNumeroSansEspace.length - lLengthCharMask);
                let lPartieDroite = lNumeroSansEspace.slice(lEcart, lNumeroSansEspace.length);
                let lPartieGaucheIntacte = '';
                let lPartieGauche;
                let lResult;
                lPartieDroite = this._reverseString(lPartieDroite);
                let lIndice = -1;
                lResult = lMask.replace(/9/g, () => {
                    lIndice += 1;
                    return lPartieDroite[lIndice] || '';
                }
                );
                if (!lOptions.avecTailleMask) {
                    lPartieGauche = lNumeroSansEspace.slice(0, lEcart);
                    lIndice = 0;
                    for (let i = 0; i < lChaine.length; i++) {
                        if (lChaine.charAt(i) === ' ') {
                            lPartieGaucheIntacte += ' ';
                        } else {
                            lPartieGaucheIntacte += lPartieGauche.charAt(lIndice);
                            lIndice += 1;
                            if (lIndice >= lPartieGauche.length) {
                                break;
                            }
                        }
                    }
                }
                return (lPartieGaucheIntacte + this._reverseString(lResult)).trim();
            }
            formatTelephoneAvecIndicatif(aIndicatif, aNumeroTel) {
                const lIndicatif = (aIndicatif ? '+' + aIndicatif : '');
                if (!!aIndicatif && aNumeroTel.length === 10 && aNumeroTel.startsWith('0')) {
                    aNumeroTel = aNumeroTel.slice(1);
                }
                return lIndicatif + aNumeroTel;
            }
            getStrTelephoneAvecEspaces(aNumTel) {
                if (!aNumTel || !aNumTel.length) {
                    return '';
                }
                let lResult = '';
                let lCompteur = 0;
                for (let i = aNumTel.length - 1; i >= 0; i--) {
                    if ((lCompteur % 2) === 0) {
                        lResult = ' ' + lResult;
                    }
                    lResult = aNumTel.charAt(i) + lResult;
                    lCompteur++;
                }
                return lResult.trim();
            }
            _getConteneurCalculChaine() {
                const ldLongueurChaineEnPixel = 'LongueurChaineEnPixel';
                let E = document.getElementById(ldLongueurChaineEnPixel);
                if (!E) {
                    let lConteneur = document.body;
                    if ((0,
                    AccessApp_1.getApp)()) {
                        lConteneur = document.getElementById((0,
                        AccessApp_1.getApp)().getIdConteneur()) || document.body;
                    }
                    lConteneur.insertAdjacentHTML('beforeend', '<div id="' + ldLongueurChaineEnPixel + '" class="Texte10 hide" style="position:absolute; top:-50px; white-space:pre;"></div>');
                    E = document.getElementById(ldLongueurChaineEnPixel);
                }
                if (E) {
                    return E;
                }
                ;return null;
            }
            getLongueurChaineDansDiv(AChaine, ATaille, AGras, aNonToTexte) {
                if (!AChaine) {
                    return 0;
                }
                if (!ATaille) {
                    ATaille = 10;
                }
                if (!this.__cacheCanvas) {
                    this.__cacheCanvas = ObjetSupport_1.Support.supportCanvasText && UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss ? {
                        canvas: document.createElement('canvas'),
                        fontFamily: global.getComputedStyle(document.body).getPropertyValue('font-family'),
                        fontSize: {}
                    } : {};
                    this.__cacheCanvas.actif = !!this.__cacheCanvas.canvas && !!this.__cacheCanvas.fontFamily;
                    if (!this.__cacheCanvas.actif) {
                        this.__cacheCanvas.canvas = null;
                    }
                }
                if (this.__cacheCanvas.actif) {
                    const lContext = this.__cacheCanvas.canvas.getContext('2d');
                    if (!this.__cacheCanvas.fontSize[ATaille]) {
                        if (ATaille && typeof ATaille === 'string' && ATaille.endsWith('rem')) {
                            this.__cacheCanvas.fontSize[ATaille] = this.cacheCanvasConvertREMToPx(ATaille);
                        } else if (ATaille && typeof ATaille === 'string' && ATaille.endsWith('px')) {
                            this.__cacheCanvas.fontSize[ATaille] = ATaille;
                        } else {
                            let lVal = UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss('.Texte' + ATaille, 'fontSize');
                            if (!lVal) {
                                lVal = Math.round(ATaille * 1.1) + 'px';
                            } else if (lVal.endsWith && lVal.endsWith('rem')) {
                                lVal = this.cacheCanvasConvertREMToPx(lVal);
                            }
                            this.__cacheCanvas.fontSize[ATaille] = lVal;
                        }
                    }
                    let lFontWeight = '';
                    if (AGras === true) {
                        lFontWeight = 'bold';
                    } else if (AGras) {
                        if (typeof AGras === 'number') {
                            lFontWeight = AGras + '';
                        } else {
                            lFontWeight = AGras;
                        }
                    }
                    lContext.font = (lFontWeight ? lFontWeight + ' ' : '') + this.__cacheCanvas.fontSize[ATaille] + ' ' + this.__cacheCanvas.fontFamily;
                    const lMetrics = lContext.measureText(AChaine);
                    return lMetrics.width;
                }
                const E = this._getConteneurCalculChaine();
                if (!E) {
                    return 0;
                }
                E.className = 'hide Texte' + ATaille + (AGras ? ' Gras' : '');
                let lChaine = aNonToTexte === true ? AChaine : this.ajouterEntites(AChaine);
                lChaine = lChaine && lChaine.replace ? lChaine.replace(/ /g, '&nbsp;') : lChaine;
                E.innerHTML = lChaine;
                const lLongueur = E.clientWidth;
                E.innerHTML = '';
                return lLongueur;
            }
            getLongueurChaine(AChaine, ATaille, AGras, ALongueur, aChaineEnTexte) {
                if (!AChaine) {
                    return '';
                }
                const lChaine = this.enleverEntites(AChaine);
                let LLongueur = 0;
                let I;
                const N = lChaine.length;
                if (lChaine.length > 0) {
                    LLongueur = this.getLongueurChaineDansDiv(lChaine, ATaille, AGras);
                }
                if (ALongueur === null || ALongueur === undefined) {
                    return LLongueur;
                }
                if (ALongueur > 0 && LLongueur >= ALongueur) {
                    LLongueur = 0;
                    const G = AGras ? 1 : 0;
                    for (I = 0; (I < N) && ((ALongueur === null || ALongueur === undefined) || (LLongueur < ALongueur)); I++) {
                        let C = lChaine.charCodeAt(I);
                        let L = this.LongueurCaracteres[ATaille][G][C];
                        if (!L) {
                            L = this.LongueurCaracteres[ATaille][G][C] = this.getLongueurChaineDansDiv(lChaine.charAt(I), ATaille, AGras);
                        }
                        LLongueur += L === 0 ? 10 : L;
                    }
                }
                if (LLongueur >= ALongueur) {
                    let lChaineTronque = lChaine.substring(0, I);
                    if (lChaineTronque && lChaine !== lChaineTronque && LLongueur > 0) {
                        LLongueur = this.getLongueurChaineDansDiv(lChaineTronque, ATaille, AGras);
                    }
                    if (LLongueur === 0) {
                        return aChaineEnTexte ? '' : '<div style="font-size:1px">&nbsp;</div>';
                    }
                    if (LLongueur >= ALongueur) {
                        lChaineTronque = lChaine.substring(0, I - 1);
                        while (I > 2) {
                            if (this.getLongueurChaineDansDiv(lChaineTronque, ATaille, AGras) < ALongueur) {
                                break;
                            }
                            I--;
                            lChaineTronque = lChaine.substring(0, I - 1);
                        }
                    }
                    return this.ajouterEntites(lChaineTronque);
                }
                return AChaine;
            }
            estChaineTropLongue(AChaine, ATaille, AGras, ALongueur) {
                const lResult = this.getChaine(AChaine, ATaille, AGras, ALongueur);
                if (typeof lResult === 'string') {
                    return lResult.length !== AChaine.length;
                }
                return false;
            }
            getChaine(AChaine, ATaille, AGras, ALongueur, aChaineEnTexte) {
                return this.getLongueurChaine(AChaine, ATaille, AGras, ALongueur, aChaineEnTexte);
            }
            getHauteurPolice(ATaille) {
                let lHauteur = this._hauteurPolice[ATaille];
                if (!lHauteur) {
                    const E = this._getConteneurCalculChaine();
                    if (!E) {
                        return 0;
                    }
                    E.className = 'hide Texte' + ATaille;
                    E.innerHTML = 'X';
                    lHauteur = this._hauteurPolice[ATaille] = E.offsetHeight;
                }
                return lHauteur;
            }
            encoderComposantUrl(S, aAvecDecode=false) {
                if (!MethodesObjet_1.MethodesObjet.isString(S)) {
                    return '';
                }
                try {
                    const lStr = aAvecDecode ? decodeURI(S) : S;
                    return encodeURIComponent(lStr.replace(ObjetChaine.regexCarControl, ''));
                } catch (e) {
                    return '';
                }
            }
            encoderUrl(S) {
                if (!MethodesObjet_1.MethodesObjet.isString(S)) {
                    return '';
                }
                try {
                    return encodeURI(decodeURI(S).replace(ObjetChaine.regexCarControl, ''));
                } catch (e) {
                    return '';
                }
            }
            replaceRCToHTML(AChaine, aChaineRemplacement) {
                return AChaine ? AChaine.replaceRCToHTML(aChaineRemplacement) : '';
            }
            supprimerRC(aString) {
                return aString.replace(/\r\n/g, '');
            }
            fromHTML(AChaine) {
                return AChaine ? AChaine.replace(/<br( \/)?>/gi, '\n') : '';
            }
            nodeToTextAvecRC(aNode) {
                return aNode ? (aNode.innerText || '') : '';
            }
            ajouterEntites(aChaine, aSansQuote) {
                if (aChaine && aChaine.ajouterEntites) {
                    return aChaine.ajouterEntites(aSansQuote);
                }
                return aChaine;
            }
            enleverEntites(aChaine) {
                if (aChaine && aChaine.enleverEntites) {
                    return aChaine.enleverEntites();
                }
                return aChaine;
            }
            nettoyerCommentaire(aChaine) {
                return aChaine && aChaine.replace ? aChaine.replace(/(<!--)(.+)(-->)/g, '') : aChaine;
            }
            verifierURLHttp(aUrl) {
                return aUrl ? (aUrl.toLowerCase().indexOf('http://') === 0) || (aUrl.toLowerCase().indexOf('https://') === 0) ? aUrl : 'http://' + aUrl : aUrl;
            }
            ajouterLiensURL(aTexte) {
                if (!aTexte) {
                    aTexte = '';
                }
                const urlRegex = this.regexURL;
                return aTexte.replace(urlRegex, (url) => {
                    return '<a href="' + this.verifierURLHttp(url) + '" target="_blank">' + url + '</a>';
                }
                );
            }
            contientAuMoinsUneURL(aTexte) {
                if (!aTexte) {
                    aTexte = '';
                }
                const lTexteAvecLiensURL = this.ajouterLiensURL(aTexte);
                return (aTexte !== lTexteAvecLiensURL);
            }
            creerUrlBruteLienExterne(aDocumentJoint, aParam) {
                var _a, _b;
                const lApp = (0,
                AccessApp_1.getApp)();
                if (!('getCommunication'in lApp)) {
                    return;
                }
                if (!aDocumentJoint) {
                    return '';
                }
                if (aDocumentJoint.getEtat() === Enumere_Etat_1.EGenreEtat.Creation || !aDocumentJoint.existeNumero()) {
                    return '';
                }
                if (!aParam) {
                    aParam = {};
                }
                let lUrl = '';
                let lGenreDocumentJoint = aParam.genreDocumentJoint;
                if (!MethodesObjet_1.MethodesObjet.isNumber(lGenreDocumentJoint)) {
                    lGenreDocumentJoint = aDocumentJoint.getGenre();
                }
                let lLibelleLienExterne = (_b = (_a = aParam.libelle) === null || _a === void 0 ? void 0 : _a.enleverEntites) === null || _b === void 0 ? void 0 : _b.call(_a);
                if (!lLibelleLienExterne) {
                    lLibelleLienExterne = aDocumentJoint.getLibelle().enleverEntites();
                }
                if (lGenreDocumentJoint === Enumere_DocumentJoint_1.EGenreDocumentJoint.Url) {
                    lLibelleLienExterne = 'link';
                }
                const lInfoFichier = new ObjetElement_1.ObjetElement('',aDocumentJoint.getNumero(),aParam.genreRessource);
                if (!!aParam.infoSupp) {
                    Object.assign(lInfoFichier, aParam.infoSupp);
                }
                if (aParam.miniature !== null && aParam.miniature !== undefined) {
                    Object.assign(lInfoFichier, {
                        miniature: aParam.miniature
                    });
                }
                lUrl = lApp.getCommunication().composeUrlFichierExterne(this.encoderComposantUrl(lLibelleLienExterne, true), lInfoFichier);
                if (aParam.forcerURLComplete) {
                    lUrl = this.getURLComplete(lUrl);
                }
                return lUrl;
            }
            getURLComplete(aUrl, aAvecEncodage=false) {
                if (aAvecEncodage) {
                    aUrl = this.encoderUrl(aUrl);
                }
                const lBalise = document.createElement('a');
                lBalise.href = aUrl;
                return lBalise.href;
            }
            composerUrlLienExterne(aParam) {
                const lParam = {
                    documentJoint: undefined,
                    genreDocumentJoint: undefined,
                    genreRessource: undefined,
                    infoSupp: undefined,
                    libelle: '',
                    libelleEcran: undefined,
                    ariaLabel: '',
                    ariaLabelledby: '',
                    avecAriaLabelledby: false,
                    title: '',
                    iconeOverride: '',
                    afficherIconeDocument: true,
                    avecLien: true,
                    maxWidth: 0,
                    ieModelChips: null,
                    ieChipsMinimal: false,
                    argsIEModel: null,
                    class: '',
                    forcerURLComplete: undefined
                };
                Object.assign(lParam, aParam);
                if (!MethodesObjet_1.MethodesObjet.isNumber(lParam.genreDocumentJoint)) {
                    lParam.genreDocumentJoint = lParam.documentJoint ? lParam.documentJoint.getGenre() : Enumere_DocumentJoint_1.EGenreDocumentJoint.Fichier;
                }
                if (lParam.documentJoint && (lParam.documentJoint.getEtat() === Enumere_Etat_1.EGenreEtat.Creation || !lParam.documentJoint.existeNumero())) {
                    lParam.avecLien = false;
                }
                if (lParam.genreDocumentJoint === Enumere_DocumentJoint_1.EGenreDocumentJoint.Url && !lParam.libelleEcran && !lParam.libelle) {
                    if (lParam.documentJoint.getLibelle()) {
                        lParam.libelleEcran = lParam.documentJoint.getLibelle();
                    } else {
                        lParam.libelleEcran = lParam.documentJoint.url;
                        lParam.avecAriaLabelledby = true;
                    }
                    lParam.libelle = 'link';
                }
                if (lParam.genreDocumentJoint === Enumere_DocumentJoint_1.EGenreDocumentJoint.LienVisio && !lParam.libelleEcran && !lParam.libelle) {
                    lParam.libelleEcran = !!lParam.documentJoint.libelleLien ? lParam.documentJoint.libelleLien : undefined;
                    lParam.libelle = lParam.documentJoint.url;
                }
                let lUrl = '';
                if (lParam.avecLien) {
                    lUrl = this.creerUrlBruteLienExterne(lParam.documentJoint, {
                        genreRessource: lParam.genreRessource,
                        genreDocumentJoint: lParam.genreDocumentJoint,
                        forcerURLComplete: lParam.forcerURLComplete,
                        libelle: lParam.libelle,
                        infoSupp: lParam.infoSupp
                    });
                }
                const lInfosLiens = {
                    tag: 'ie-chips',
                    ieModel: '',
                    title: lParam.title || false,
                    libelle: lParam.libelleEcran !== undefined && lParam.libelleEcran !== null ? lParam.libelleEcran : lParam.libelle ? lParam.libelle : lParam.documentJoint ? lParam.documentJoint.getLibelle() : '',
                    href: lUrl,
                    classes: [],
                    ariaLabel: lParam.ariaLabel ? ' ' + tag_1.tag.composeAttr('aria-label', lParam.ariaLabel) : '',
                    ariaLabelledby: lParam.avecAriaLabelledby && lParam.ariaLabelledby ? ' ' + tag_1.tag.composeAttr('aria-labelledby', lParam.ariaLabelledby) : ''
                };
                if (!!lParam.class) {
                    lInfosLiens.classes.push(lParam.class);
                }
                if (!!lParam.ieModelChips) {
                    lInfosLiens.ieModel = ' ' + tag_1.tag.composeAttr('ie-model', lParam.ieModelChips, lParam.argsIEModel);
                }
                let lIconeLien = '';
                if (!!lParam.afficherIconeDocument) {
                    if (lParam.iconeOverride) {
                        lIconeLien = lParam.iconeOverride;
                    } else {
                        lIconeLien = this._getClasseIconeDocumentJoint(lParam.documentJoint);
                    }
                }
                if (!!lIconeLien) {
                    lInfosLiens.classes.push('iconic');
                    lInfosLiens.classes.push(lIconeLien);
                }
                if (!!lParam.ieChipsMinimal) {
                    lInfosLiens.classes.push('chips-minimal');
                }
                const lGenreFichier = Enumere_FormatDocJoint_1.EFormatDocJointUtil.getGenreDeFichier(this.extraireExtensionFichier(lParam.libelle ? lParam.libelle : lParam.documentJoint ? lParam.documentJoint.getLibelle() : ''));
                if (lGenreFichier === Enumere_FormatDocJoint_1.EFormatDocJoint.Geogebra) {
                    lInfosLiens.href = 'geogebra.html?view=' + encodeURIComponent(lInfosLiens.href) + '';
                }
                return '<' + lInfosLiens.tag + ' id="' + GUID_1.GUID.getId() + '"' + (lParam.maxWidth > 0 ? ' style="max-width:' + lParam.maxWidth + 'px;"' : '') + (lInfosLiens.title && typeof lInfosLiens.title === 'string' ? ' title="' + GChaine.toTitle(lInfosLiens.title) + '"' : '') + (!!lInfosLiens.href ? ' href="' + lInfosLiens.href + '"' : '') + (!!lInfosLiens.ieModel ? lInfosLiens.ieModel : '') + (lInfosLiens.classes.length > 0 ? ' class="' + lInfosLiens.classes.join(' ') + '"' : '') + (lInfosLiens.ariaLabel ? lInfosLiens.ariaLabel : '') + (lInfosLiens.ariaLabelledby ? lInfosLiens.ariaLabelledby : '') + '>' + lInfosLiens.libelle + '</' + lInfosLiens.tag + '>';
            }
            estFichierImageAvecMiniaturePossible(aNomFichier) {
                if (aNomFichier) {
                    const lExt = this.extraireExtensionFichier(aNomFichier);
                    return !!lExt && !['webp'].includes(lExt) && Enumere_FormatDocJoint_1.EFormatDocJointUtil.getGenreDeFichier(lExt) === Enumere_FormatDocJoint_1.EFormatDocJoint.Image;
                }
                return false;
            }
            composeUrlRequete(aParam) {
                let lResult = '';
                if (aParam.url) {
                    lResult = aParam.url;
                    if (lResult.charAt(lResult.length - 1) !== '/') {
                        lResult += '/';
                    }
                }
                if (aParam.nomRequete) {
                    if (aParam.nomRequete.charAt(0) !== '/') {
                        lResult += aParam.nomRequete;
                    } else {
                        lResult += aParam.nomRequete.substring(1, aParam.nomRequete.length - 1);
                    }
                }
                return lResult;
            }
            composeUrlImgPhotoIndividu(aIndividu) {
                if (!aIndividu || !aIndividu.getNumero) {
                    return '';
                }
                const lApp = (0,
                AccessApp_1.getApp)();
                if (!('getCommunication'in lApp)) {
                    return;
                }
                return lApp.getCommunication().composeUrlFichierExterne(aIndividu.getLibelle().replace(/[\s]/gi, '_') + '.jpg', new ObjetElement_1.ObjetElement('',aIndividu.getNumero()));
            }
            supprimerEspaces(aChaine) {
                return aChaine && aChaine.replace ? aChaine.replace(/ /g, '') : aChaine;
            }
            latinize(aChaine) {
                return ComparateurChaines_1.ComparateurChaines.latinize(aChaine);
            }
            normalize(aChaine) {
                return ComparateurChaines_1.ComparateurChaines.normalize(aChaine);
            }
            miseEnFormeEmail(aEmail) {
                return aEmail ? aEmail.replace(/;/g, '<br/>') : '';
            }
            composerEmail(aEmail, aNotMailTo, aSansTabulation) {
                return !aNotMailTo ? '<a href="mailto:' + aEmail + '"' + (aSansTabulation ? ' tabindex="-1"' : '') + ' target="_blank">' + GChaine.miseEnFormeEmail(aEmail) + '</a>' : '<span class="LienAccueil AvecMain">' + GChaine.miseEnFormeEmail(aEmail) + '</span>';
            }
            estEmailValide(aEmail) {
                if (!aEmail || !MethodesObjet_1.MethodesObjet.isString(aEmail)) {
                    return false;
                }
                return UtilitaireEmail_1.TUtilitaireEmail.estValide(aEmail);
            }
            getLongueurMaximaleSIRET(aTypeFormatSIRET=TypeFormatSIRET.FR) {
                if (aTypeFormatSIRET === TypeFormatSIRET.IT) {
                    return 11;
                }
                return 17;
            }
            formaterChaineEnSIRET(aChaine, aTypeFormatSIRET=TypeFormatSIRET.FR) {
                const lChaineFormatee = [];
                if (aTypeFormatSIRET === TypeFormatSIRET.IT) {
                    lChaineFormatee.push(aChaine);
                } else {
                    if (aChaine.length <= 3) {
                        lChaineFormatee.push(aChaine);
                    } else {
                        lChaineFormatee.push(aChaine.substring(0, 3), ' ');
                        if (aChaine.length <= 6) {
                            lChaineFormatee.push(aChaine.substring(3));
                        } else {
                            lChaineFormatee.push(aChaine.substring(3, 6), ' ');
                            if (aChaine.length <= 9) {
                                lChaineFormatee.push(aChaine.substring(6));
                            } else {
                                lChaineFormatee.push(aChaine.substring(6, 9), ' ', aChaine.substring(9));
                            }
                        }
                    }
                }
                return lChaineFormatee.join('');
            }
            controleTailleTexte(aParam) {
                let lResult = {
                    controleOK: true,
                    chaine: aParam.chaine
                };
                let lValeurSansEntites = this.enleverEntites(aParam.chaine);
                if ((aParam.tailleTexteMax > 0) && (lValeurSansEntites.length > aParam.tailleTexteMax)) {
                    lValeurSansEntites = lValeurSansEntites.slice(0, aParam.tailleTexteMax);
                    lResult = {
                        controleOK: false,
                        chaine: this.ajouterEntites(lValeurSansEntites)
                    };
                }
                return lResult;
            }
            extraireNomFichier(aNomFichier) {
                if (!aNomFichier || !aNomFichier.split) {
                    return aNomFichier;
                }
                const lTab = aNomFichier.split('.');
                if (lTab.length > 1) {
                    lTab.pop();
                }
                return lTab.join('.');
            }
            extraireExtensionFichier(aNomFichier) {
                if (!aNomFichier || !aNomFichier.split) {
                    return '';
                }
                const lTab = aNomFichier.split('.');
                return lTab.length > 1 ? lTab[lTab.length - 1] : '';
            }
            getLibelleSurligne(aLibelle, aRecherches, aOptions) {
                if (!aLibelle) {
                    return aLibelle;
                }
                let lRecherche, lIndex;
                const lArray = [];
                const lLibelle = GChaine.enleverEntites(aLibelle || '').replace(/&nbsp;/g, ' ');
                let lResult;
                const lOptions = Object.assign({
                    couleur: (0,
                    AccessApp_1.getApp)().getCouleur().surlignageTexte
                }, aOptions);
                if (Array.isArray(aRecherches)) {
                    for (let i = 0; i < aRecherches.length; i++) {
                        lRecherche = aRecherches[i].trim();
                        if (lRecherche.length > 0) {
                            for (lIndex = 0; lIndex < lLibelle.length; lIndex++) {
                                if (lIndex + lRecherche.length <= lLibelle.length && ComparateurChaines_1.ComparateurChaines.egal(lRecherche, lLibelle.slice(lIndex, lIndex + lRecherche.length))) {
                                    for (let j = 0; j < lRecherche.length; j++) {
                                        lArray[lIndex + j] = true;
                                    }
                                }
                            }
                        }
                    }
                }
                lResult = '';
                for (let i = 0; i < lLibelle.length; i++) {
                    if (lArray[i]) {
                        if (!lArray[i - 1]) {
                            lResult += '<span style="background-color:' + lOptions.couleur + '">';
                        }
                        lResult += GChaine.ajouterEntites(lLibelle[i]);
                        if (!lArray[i + 1]) {
                            lResult += '</span>';
                        }
                    } else {
                        lResult += GChaine.insecable(GChaine.ajouterEntites(lLibelle[i]));
                    }
                }
                return lResult;
            }
            supprimerBalisesHtml(aContenu) {
                if (!aContenu || !MethodesObjet_1.MethodesObjet.isString(aContenu)) {
                    return '';
                }
                let lContenu = aContenu.replace(/\n/g, '').replace(/(<\/div>|<\/ol>|<\/ul>|<\/li>|<\/p>)(?!(<br>|<br\/>|<\/div>|<\/ol>|<\/ul>|<\/li>|<\/p>))/g, '$1\n').replace(/(<br>|<br\/>)/g, '$1\n').replace(/<[^>]*?>/gi, '');
                if (lContenu.endsWith('\n')) {
                    lContenu = lContenu.slice(0, lContenu.length - 1);
                }
                return lContenu;
            }
            simpleHtmlToSafeHtml(aHtml) {
                try {
                    const lDoc = new DOMParser().parseFromString(aHtml, 'text/html');
                    if (lDoc && lDoc.body) {
                        return lDoc.body.innerHTML || '';
                    }
                } catch (e) {}
                return aHtml;
            }
            htmlToSafeHtml(aHtml) {
                if (!IE.DOMPurifyDisabled) {
                    return this.htmlDOMPurify(aHtml);
                }
                return this.simpleHtmlToSafeHtml(aHtml);
            }
            htmlDOMPurify(aHtml, aOptionsDOMPurify) {
                if (aHtml && MethodesObjet_1.MethodesObjet.isString(aHtml) && global.DOMPurify && !IE.DOMPurifyDisabled) {
                    try {
                        const lOptions = Object.assign({
                            FORBID_TAGS: ['form', 'input', 'textarea', 'select', 'option', 'optgroup', 'style', 'template', 'head', 'html', 'body', 'header', 'footer', 'nav']
                        }, aOptionsDOMPurify);
                        return global.DOMPurify.sanitize(aHtml, lOptions);
                    } catch (e) {}
                }
                return aHtml;
            }
            estChaineHTMLEgal(aChaine1, aChaine2) {
                if (aChaine1 === aChaine2) {
                    return true;
                }
                return (this.htmlToSafeHtml(aChaine1) === this.htmlToSafeHtml(aChaine2));
            }
            _reverseString(a) {
                return a.split('').reverse().join('');
            }
            cacheCanvasConvertREMToPx(aTailleREM) {
                if (!this.__cacheCanvas.fontSizeRoot) {
                    let lSize = 0;
                    try {
                        lSize = parseFloat(global.getComputedStyle(document.documentElement).getPropertyValue('font-size'));
                    } catch (e) {
                        lSize = 10;
                    }
                    this.__cacheCanvas.fontSizeRoot = lSize;
                }
                return (parseFloat(aTailleREM) * this.__cacheCanvas.fontSizeRoot) + 'px';
            }
            _getClasseIconeDocumentJoint(aDocJoint) {
                let lClasseIcone = '';
                const lGenreFichier = Enumere_FormatDocJoint_1.EFormatDocJointUtil.getGenreDeFichier(GChaine.extraireExtensionFichier(aDocJoint.getLibelle()));
                if (lGenreFichier !== Enumere_FormatDocJoint_1.EFormatDocJoint.Inconnu) {
                    lClasseIcone = Enumere_FormatDocJoint_1.EFormatDocJointUtil.getClassIconDeGenre(lGenreFichier);
                } else {
                    if (aDocJoint.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.Cloud) {
                        lClasseIcone = 'icon_cloud';
                    } else if (aDocJoint.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.Url) {
                        lClasseIcone = 'icon_link';
                    } else if (aDocJoint.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.LienKiosque) {
                        lClasseIcone = 'icon_external_link';
                    } else if (aDocJoint.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.LienVisio) {
                        lClasseIcone = 'icon_cours_virtuel';
                    }
                }
                return lClasseIcone;
            }
        }
        exports.ObjetChaine = ObjetChaine;
        ObjetChaine.regexCarControl = /[\x00-\x1F\x7F-\x9f]/gi;
        function _dateToStr(ADate) {
            return ADate ? ADate.getDate() + '/' + (ADate.getMonth() + 1) + '/' + ADate.getFullYear() + ' ' + ADate.getHours() + ':' + ADate.getMinutes() + ':' + ADate.getSeconds() : '';
        }
        exports.GChaine = GChaine = new ObjetChaine();
        Date.prototype.toJSON = function() {
            const lJSON = {};
            lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpDateTime;
            lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = _dateToStr(this);
            return lJSON;
        }
        ;
    },
    fn: 'objetchaine.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeNote = exports.TradTypeNote = void 0;
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const Enumere_Annotation_1 = require("Enumere_Annotation");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetChaine_1 = require("ObjetChaine");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TradTypeNote = ObjetTraduction_1.TraductionsModule.getModule('TypeNote', {
            Annotation: {
                Absent: '',
                Dispense: '',
                NonNote: '',
                Inapte: '',
                NonRendu: '',
                Felicitations: ''
            },
            CaractereAnnotation: {
                Absent: '',
                Dispense: '',
                NonNote: '',
                Inapte: '',
                NonRendu: '',
                AbsentZero: '',
                NonRenduZero: '',
                Felicitations: ''
            },
            InputNote: {
                LabelChamps: '',
                MinMax: ''
            }
        });
        exports.TradTypeNote = TradTypeNote;
        class TypeNote {
            constructor(aParametre, N) {
                this.note = '0.00';
                this.valeur = 0.00;
                this.genre = Enumere_Annotation_1.EGenreAnnotation.note;
                this.bareme = 0.00;
                if (typeof aParametre === 'string') {
                    this.genre = this.getGenreNote(aParametre);
                    this.valeur = this.noteToValeur(aParametre);
                    this.note = this.estUneAnnotation() ? this.getChaineAnnotationDeGenre(this.genre) : this.valeurToNote(this.valeur, N);
                    if (this.genre === Enumere_Annotation_1.EGenreAnnotation.absentZero || this.genre === Enumere_Annotation_1.EGenreAnnotation.nonRenduZero) {
                        this.valeur = 0.00;
                    } else if (this.genre === Enumere_Annotation_1.EGenreAnnotation.felicitations) {
                        const lAvecFelicitationAutorisee = TypeNote.estAnnotationPermise(Enumere_Annotation_1.EGenreAnnotation.felicitations);
                        if (lAvecFelicitationAutorisee) {
                            this.bareme = this.getBaremeNote(aParametre);
                            this.note = this.valeurToNote(this.bareme, N) + this.note;
                            try {
                                const lSurplusBareme = TypeNote.getValeurSurplusBaremeAAppliquer(this.bareme);
                                this.valeur = this.bareme + lSurplusBareme;
                            } catch (error) {}
                        } else {
                            this.genre = Enumere_Annotation_1.EGenreAnnotation.note;
                            this.bareme = this.getBaremeNote(aParametre);
                            this.note = this.valeurToNote(this.bareme, N);
                            this.valeur = this.bareme;
                        }
                    }
                    this.chaine = aParametre;
                } else if (typeof aParametre === 'number') {
                    this.note = this.valeurToNote(aParametre, N);
                    this.valeur = aParametre;
                    this.genre = Enumere_Annotation_1.EGenreAnnotation.note;
                }
            }
            getCaractereAnnotation(aArrayGenresNote) {
                const lCaractereAnnotation = {};
                for (const x in aArrayGenresNote) {
                    switch (aArrayGenresNote[x]) {
                    case (Enumere_Annotation_1.EGenreAnnotation.absent):
                        lCaractereAnnotation.Absent = TradTypeNote.CaractereAnnotation.Absent;
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.dispense):
                        lCaractereAnnotation.Dispense = TradTypeNote.CaractereAnnotation.Dispense;
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.nonNote):
                        lCaractereAnnotation.NonNote = TradTypeNote.CaractereAnnotation.NonNote;
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.inapte):
                        lCaractereAnnotation.Inapte = TradTypeNote.CaractereAnnotation.Inapte;
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.nonRendu):
                        lCaractereAnnotation.NonRendu = TradTypeNote.CaractereAnnotation.NonRendu;
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.absentZero):
                        lCaractereAnnotation.AbsentZero = TradTypeNote.CaractereAnnotation.AbsentZero;
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.nonRenduZero):
                        lCaractereAnnotation.NonRenduZero = TradTypeNote.CaractereAnnotation.NonRenduZero;
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.felicitations):
                        lCaractereAnnotation.Felicitations = TradTypeNote.CaractereAnnotation.Felicitations;
                        break;
                    }
                }
                return lCaractereAnnotation;
            }
            getGenreNote(aChaine) {
                if (aChaine.split('|').length >= 2) {
                    return parseInt(aChaine.split('|')[1]);
                }
                const lTabNotations = _getTableauNotations();
                for (const I in lTabNotations) {
                    if (lTabNotations[I].toLowerCase() === aChaine.toLowerCase()) {
                        return parseInt(I);
                    } else if (parseInt(I) === Enumere_Annotation_1.EGenreAnnotation.felicitations) {
                        const lObjCaracteresAnnotation = this.getCaractereAnnotation([Enumere_Annotation_1.EGenreAnnotation.felicitations]);
                        if (aChaine.indexOf(lObjCaracteresAnnotation.Felicitations) > 0) {
                            return Enumere_Annotation_1.EGenreAnnotation.felicitations;
                        }
                    }
                }
                return Enumere_Annotation_1.EGenreAnnotation.note;
            }
            getBaremeNote(aChaine) {
                let lStrBareme = aChaine.split('|')[2];
                if (!!lStrBareme) {
                    lStrBareme = lStrBareme.replace(',', '.');
                }
                return parseFloat(lStrBareme);
            }
            getNote() {
                return this.note;
            }
            getValeur() {
                return this.valeur;
            }
            getGenre() {
                return this.genre;
            }
            estUneValeur() {
                return !isNaN(this.valeur);
            }
            setBareme(aBareme) {
                this.bareme = aBareme;
            }
            getChaine() {
                return this.chaine;
            }
            toString() {
                return this.note;
            }
            getNoteSansDecimaleForcee() {
                if (this.genre === Enumere_Annotation_1.EGenreAnnotation.note && !isNaN(this.valeur)) {
                    return this.valeur.toString().replace('.', ',');
                }
                return this.getNote();
            }
            toStr() {
                let str;
                if (this.genre === Enumere_Annotation_1.EGenreAnnotation.note) {
                    str = this.note;
                } else {
                    str = '|' + this.genre;
                    if (this.genre === Enumere_Annotation_1.EGenreAnnotation.felicitations && (this.bareme !== null && this.bareme !== undefined)) {
                        str += '|' + this.bareme;
                    }
                }
                return str;
            }
            toJSON() {
                const lJSON = {};
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpNote;
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = this.toStr();
                return lJSON;
            }
            noteToValeur(aStrNote) {
                return parseFloat(aStrNote.replace(',', '.'));
            }
            valeurToNote(aValeur, N) {
                let lValeurNb;
                if (typeof aValeur === 'number') {
                    if (isNaN(aValeur)) {
                        return '';
                    }
                    lValeurNb = aValeur;
                } else {
                    lValeurNb = parseFloat(aValeur);
                }
                N = N === null || N === undefined ? TypeNote.decimalNotation : N;
                return ('' + (lValeurNb.toFixed(N))).replace('.', ',');
            }
            estUneNoteVide() {
                return (this.note === '');
            }
            estUneAnnotation() {
                return (this.genre !== Enumere_Annotation_1.EGenreAnnotation.note);
            }
            estVide() {
                return (this.note === '') && !this.estUneValeur();
            }
            estUneNoteValide(aNoteMin, aNoteMax, aAvecNotationSpecifique, aAvecVide) {
                if (this.estUneNoteVide()) {
                    return aAvecVide === true;
                }
                if (aAvecNotationSpecifique) {
                    if (this.genre !== Enumere_Annotation_1.EGenreAnnotation.note) {
                        return true;
                    }
                }
                let lChaine = this.note.replace(/\./g, ',');
                if (lChaine.indexOf(',') === -1) {
                    lChaine += ',';
                }
                const lPosVirgule = lChaine.indexOf(',');
                const lNbrVirgule = lChaine.split(',').length - 1;
                const lPosMoins = lChaine.indexOf('-');
                const lPosVirguleMax = Math.max(('' + (parseInt(aNoteMin.toString()))).length, ('' + (parseInt(aNoteMax.toString()))).length);
                return (lPosMoins <= 0) && (lPosVirgule <= lPosVirguleMax) && (lChaine.length - (lPosVirgule + 1) <= TypeNote.decimalNotation) && (lNbrVirgule <= 1) && (this.valeur >= aNoteMin.getValeur()) && (this.valeur <= aNoteMax.getValeur());
            }
            getNoteEntier() {
                return this.estUneValeur() ? this.getNote().enleverZero() : this.getNote();
            }
            getBaremeEntier() {
                return '/' + this.getNote().enleverZero();
            }
            getBaremeEntierSansSlash() {
                return this.getNote().enleverZero();
            }
            getCoefficientEntier() {
                return this.getNote().enleverZero();
            }
            estBaremeParDefaut() {
                return TypeNote.baremeNotation ? this.getValeur() === TypeNote.baremeNotation.getValeur() : false;
            }
            estCoefficientParDefaut() {
                return this.valeur === 1;
            }
            getCoefficient() {
                if (this.estUneValeur()) {
                    return this.getNote();
                } else {
                    return 'xx.xx';
                }
            }
            getChaineAnnotationDeCaractere(aCaractere) {
                const lAnnotation = TypeNote.getGenreAnnotationDeRaccourci(aCaractere);
                if (!!lAnnotation) {
                    return _getTableauNotations()[lAnnotation];
                }
            }
            getChaineAnnotationDeGenre(aGenre) {
                return _getTableauNotations()[aGenre];
            }
            egal(aNote) {
                return !!aNote && this.toStr() === aNote.toStr();
            }
            dupliquer() {
                const lNote = new TypeNote();
                lNote.note = this.note;
                lNote.valeur = this.valeur;
                lNote.genre = this.genre;
                return lNote;
            }
            static getValeurSurplusBaremeAAppliquer(aValeurBareme) {
                let lSurplusBaremeCalcule = 0;
                if (!!aValeurBareme && !!TypeNote.surplusBareme && TypeNote.surplusBareme.getValeur()) {
                    const lBaremeParDefaut = TypeNote.baremeNotation;
                    if (!!lBaremeParDefaut && aValeurBareme !== lBaremeParDefaut.getValeur()) {
                        lSurplusBaremeCalcule = (TypeNote.surplusBareme.getValeur() * aValeurBareme) / lBaremeParDefaut.getValeur();
                    } else {
                        lSurplusBaremeCalcule = TypeNote.surplusBareme.getValeur();
                    }
                }
                return lSurplusBaremeCalcule;
            }
            static estAnnotationPermise(aGenreAnnotation) {
                const lListeAutorisee = TypeNote.listeAnnotationsAutorisees;
                return !!aGenreAnnotation && (!lListeAutorisee || lListeAutorisee.indexOf(aGenreAnnotation) !== -1);
            }
            static avecVirgule() {
                return TypeNote.decimalNotation > 0;
            }
            static getGenreAnnotationDeRaccourci(aCaractere) {
                let lGenreAnnotation = null;
                if (!!aCaractere && aCaractere.toLowerCase) {
                    switch (aCaractere.toLowerCase()) {
                    case TradTypeNote.CaractereAnnotation.Absent:
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.absent;
                        break;
                    case TradTypeNote.CaractereAnnotation.Dispense:
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.dispense;
                        break;
                    case TradTypeNote.CaractereAnnotation.NonNote:
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.nonNote;
                        break;
                    case TradTypeNote.CaractereAnnotation.Inapte:
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.inapte;
                        break;
                    case TradTypeNote.CaractereAnnotation.NonRendu:
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.nonRendu;
                        break;
                    case TradTypeNote.CaractereAnnotation.AbsentZero:
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.absentZero;
                        break;
                    case TradTypeNote.CaractereAnnotation.NonRenduZero:
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.nonRenduZero;
                        break;
                    case TradTypeNote.CaractereAnnotation.Felicitations:
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.felicitations;
                        break;
                    }
                }
                return lGenreAnnotation;
            }
            static estCaractereNote(aChar, aAvecLettre, aAvecVirgule, aAvecMoins, aCaractereAnnotation) {
                aAvecLettre = aAvecLettre === null || aAvecLettre === undefined ? true : aAvecLettre;
                aAvecVirgule = aAvecVirgule === null || aAvecVirgule === undefined ? true : aAvecVirgule;
                aAvecMoins = aAvecMoins === null || aAvecMoins === undefined ? true : aAvecMoins;
                aCaractereAnnotation = aCaractereAnnotation === null || aCaractereAnnotation === undefined ? TradTypeNote.CaractereAnnotation : aCaractereAnnotation;
                let lRegExp = '0-9';
                if (aAvecLettre) {
                    let lCarAnnot = '';
                    for (const x in aCaractereAnnotation) {
                        if (aCaractereAnnotation[x].toLowerCase && aCaractereAnnotation[x] !== ' ') {
                            lCarAnnot += aCaractereAnnotation[x].toLowerCase();
                        }
                    }
                    lRegExp += lCarAnnot + lCarAnnot.toUpperCase();
                }
                if (aAvecVirgule) {
                    lRegExp += '.,';
                }
                if (aAvecMoins) {
                    lRegExp += '-';
                }
                return ToucheClavier_1.ToucheClavierUtil.estCaractere(aChar, lRegExp);
            }
            static formatStrToNote(aChaine, aOptions={}) {
                const lNote = new TypeNote(aChaine);
                let lValeurMin = 0;
                if (typeof aOptions.min === 'function') {
                    lValeurMin = aOptions.min();
                } else if (!!aOptions.min) {
                    lValeurMin = aOptions.min;
                }
                if (lNote.getGenre() > 0) {
                    return aOptions.avecAnnotation ? lNote : null;
                }
                if (aChaine === '') {
                    return aOptions.sansNotePossible ? lNote : null;
                }
                if (aChaine === ',' || aChaine === '.') {
                    return aOptions && aOptions.avecVirgule && aOptions.sansNotePossible ? lNote : null;
                }
                if (aChaine === '-') {
                    return lValeurMin < 0 ? lNote : null;
                }
                if (lNote.estUneValeur()) {
                    const lTest = '0-9' + (aOptions.avecVirgule ? ',.' : '') + (lValeurMin < 0 ? '-' : '');
                    if (new RegExp('^[' + lTest + ']+$').test(aChaine)) {
                        return lNote;
                    }
                }
                return null;
            }
            static validerNote(aValeur, aOptions={}) {
                const lDefaultOptions = {
                    avecVirgule: true,
                    afficherAvecVirgule: true,
                    avecAnnotation: true,
                    sansNotePossible: true,
                    min: 0,
                    max: 100,
                    titreMessageMinMax: '',
                    messageMinMax: TradTypeNote.InputNote.MinMax
                };
                const lOptions = $.extend(lDefaultOptions, aOptions);
                if (typeof (aValeur) !== 'string') {
                    aValeur = String(aValeur);
                }
                if (!lOptions.avecVirgule) {
                    lOptions.afficherAvecVirgule = false;
                }
                let lResult;
                let lValueTemp = aValeur;
                if (lValueTemp.search(/^[0-9]*(,|\.)[0-9]+/) === 0) {
                    const lRegExp = new RegExp('^([0-9]*(,|\\.)[0-9]{' + TypeNote.decimalNotation + '}).*$');
                    lValueTemp = lValueTemp.replace(lRegExp, '$1');
                }
                const lNote = TypeNote.formatStrToNote(lValueTemp, lOptions);
                let lValeurMin;
                if (typeof lOptions.min === 'function') {
                    lValeurMin = lOptions.min();
                } else {
                    lValeurMin = lOptions.min;
                }
                let lValeurMax;
                if (typeof lOptions.max === 'function') {
                    lValeurMax = lOptions.max();
                } else {
                    lValeurMax = lOptions.max;
                }
                const lNoteMin = new TypeNote(lValeurMin)
                  , lNoteMax = new TypeNote(lValeurMax);
                if (!lNote || !lNote.estUneNoteValide(lNoteMin, lNoteMax, lOptions.avecAnnotation, lOptions.sansNotePossible) || lValueTemp === '-') {
                    const lMessage = ObjetChaine_1.GChaine.format(lOptions.messageMinMax, [lOptions.afficherAvecVirgule ? lNoteMin.getNote() : lNoteMin.getNoteSansDecimaleForcee(), lOptions.afficherAvecVirgule ? lNoteMax.getNote() : lNoteMax.getNoteSansDecimaleForcee()]);
                    lResult = {
                        estValide: false,
                        titre: lOptions.titreMessageMinMax,
                        message: lMessage
                    };
                } else {
                    lResult = {
                        estValide: true,
                        note: lNote
                    };
                }
                return lResult;
            }
            static getTrisDefaut(aGetNote, aGenreTri) {
                if (!MethodesObjet_1.MethodesObjet.isFunction(aGetNote)) {
                    return [];
                }
                return [ObjetTri_1.ObjetTri.init( (D) => {
                    const lNote = aGetNote(D);
                    if (lNote && (lNote.genre === Enumere_Annotation_1.EGenreAnnotation.note || lNote.genre === Enumere_Annotation_1.EGenreAnnotation.felicitations) && lNote.estUneValeur()) {
                        return lNote.valeur;
                    }
                    return -1000;
                }
                , aGenreTri), ObjetTri_1.ObjetTri.init( (D) => {
                    const lNote = aGetNote(D);
                    if (lNote) {
                        return lNote.genre === Enumere_Annotation_1.EGenreAnnotation.note ? -100 : lNote.genre;
                    }
                    return -1000;
                }
                , aGenreTri)];
            }
        }
        exports.TypeNote = TypeNote;
        TypeNote.decimalNotation = 2;
        TypeNote.baremeNotation = null;
        TypeNote.surplusBareme = null;
        TypeNote.listeAnnotationsAutorisees = null;
        let lTableauNotations = null;
        function _getTableauNotations() {
            if (!lTableauNotations) {
                lTableauNotations = ['', TradTypeNote.Annotation.Absent, TradTypeNote.Annotation.Dispense, TradTypeNote.Annotation.NonNote, TradTypeNote.Annotation.Inapte, TradTypeNote.Annotation.NonRendu, TradTypeNote.Annotation.Absent + '*', TradTypeNote.Annotation.NonRendu + '*', TradTypeNote.Annotation.Felicitations];
            }
            return lTableauNotations;
        }
    },
    fn: 'typenote.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreArrondi = void 0;
        var EGenreArrondi;
        (function(EGenreArrondi) {
            EGenreArrondi[EGenreArrondi["sans"] = 0] = "sans";
            EGenreArrondi[EGenreArrondi["superieur"] = 1] = "superieur";
            EGenreArrondi[EGenreArrondi["inferieur"] = 2] = "inferieur";
            EGenreArrondi[EGenreArrondi["plusProche"] = 3] = "plusProche";
        }
        )(EGenreArrondi || (exports.EGenreArrondi = EGenreArrondi = {}));
    },
    fn: 'enumere_arrondi.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeArrondi = void 0;
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const TypeNote_1 = require("TypeNote");
        const Enumere_Arrondi_1 = require("Enumere_Arrondi");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TradTypeArrondi = ObjetTraduction_1.TraductionsModule.getModule('TypeArrondi', {
            Sans: '',
            Dixieme: '',
            Quart: '',
            Demi: '',
            Point: ''
        });
        class TypeArrondi {
            constructor(aGenrePronote) {
                this.precision = 0;
                this.genre = Enumere_Arrondi_1.EGenreArrondi.sans;
                this.precisionMini = 1 / Math.pow(10, TypeNote_1.TypeNote.decimalNotation);
                this.toType(aGenrePronote);
            }
            static getLibelleSelonPrecision(aPrecision) {
                switch (aPrecision) {
                case 0.10:
                    return TradTypeArrondi.Dixieme;
                case 0.25:
                    return TradTypeArrondi.Quart;
                case 0.50:
                    return TradTypeArrondi.Demi;
                case 1.00:
                    return TradTypeArrondi.Point;
                }
                return TradTypeArrondi.Sans;
            }
            getPrecision() {
                return this.precision;
            }
            getGenre() {
                return this.genre;
            }
            setPrecision(aPrecision) {
                this.precision = aPrecision;
            }
            setGenre(aGenre) {
                this.genre = aGenre;
            }
            arrondir(aValeur) {
                aValeur = Math.round(parseFloat(Number(aValeur / this.precisionMini).toFixed(TypeNote_1.TypeNote.decimalNotation))) * this.precisionMini;
                switch (this.genre) {
                case Enumere_Arrondi_1.EGenreArrondi.superieur:
                    return Math.ceil(parseFloat(Number(aValeur / this.precision).toFixed(TypeNote_1.TypeNote.decimalNotation))) * this.precision;
                case Enumere_Arrondi_1.EGenreArrondi.inferieur:
                    return Math.floor(parseFloat(Number(aValeur / this.precision).toFixed(TypeNote_1.TypeNote.decimalNotation))) * this.precision;
                case Enumere_Arrondi_1.EGenreArrondi.plusProche:
                    return Math.round(parseFloat(Number(aValeur / this.precision).toFixed(TypeNote_1.TypeNote.decimalNotation))) * this.precision;
                default:
                    return aValeur;
                }
            }
            toType(aGenrePronote) {
                this.precision = [this.precisionMini, 0.10, 0.25, 0.50, 1, 0.10, 0.25, 0.50, 1][aGenrePronote];
                this.genre = parseInt(aGenrePronote) !== 0 ? parseInt(aGenrePronote) <= 4 ? Enumere_Arrondi_1.EGenreArrondi.superieur : Enumere_Arrondi_1.EGenreArrondi.plusProche : Enumere_Arrondi_1.EGenreArrondi.sans;
            }
            toString() {
                switch (this.genre) {
                case Enumere_Arrondi_1.EGenreArrondi.sans:
                    return 0;
                case Enumere_Arrondi_1.EGenreArrondi.superieur:
                    switch (this.precision) {
                    case 0.10:
                        return 1;
                    case 0.25:
                        return 2;
                    case 0.50:
                        return 3;
                    case 1:
                        return 4;
                    default:
                        ;return 0;
                    }
                case Enumere_Arrondi_1.EGenreArrondi.plusProche:
                    switch (this.precision) {
                    case 0.10:
                        return 5;
                    case 0.25:
                        return 6;
                    case 0.50:
                        return 7;
                    case 1:
                        return 8;
                    default:
                        ;return 0;
                    }
                default:
                    return 0;
                }
            }
            strPrecision() {
                return TypeArrondi.getLibelleSelonPrecision(this.precision);
            }
            dupliquer() {
                const lArrondi = new TypeArrondi(0);
                lArrondi.precision = this.precision;
                lArrondi.genre = this.genre;
                return lArrondi;
            }
            toJSON() {
                const lJSON = {};
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpArrondi;
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = this.toString();
                return lJSON;
            }
        }
        exports.TypeArrondi = TypeArrondi;
    },
    fn: 'typearrondi.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeEnsembleNombre = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const MethodesTableau_1 = require("MethodesTableau");
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        class TypeEnsembleNombre {
            constructor(aValeur) {
                this._set = new Set();
                this._cacheItems = null;
                this.clear();
                if (aValeur !== undefined) {
                    this.add(aValeur);
                }
            }
            clear() {
                this._set = new Set();
                this._cacheItems = null;
                return this;
            }
            add(aValeur) {
                this._cacheItems = null;
                if (typeof aValeur === 'number') {
                    this._set.add(aValeur);
                } else if (aValeur instanceof TypeEnsembleNombre) {
                    aValeur.items().forEach( (aVal) => {
                        this._set.add(aVal);
                    }
                    );
                } else if (MethodesObjet_1.MethodesObjet.isArray(aValeur)) {
                    aValeur.forEach( (aVal) => {
                        if (typeof aVal === 'number') {
                            this._set.add(aVal);
                        }
                    }
                    );
                }
                return this;
            }
            remove(aValeur) {
                this._cacheItems = null;
                if (typeof aValeur === 'number') {
                    this._set.delete(aValeur);
                } else if (aValeur instanceof TypeEnsembleNombre) {
                    aValeur.items().forEach( (aVal) => {
                        this._set.delete(aVal);
                    }
                    );
                } else if (MethodesObjet_1.MethodesObjet.isArray(aValeur)) {
                    aValeur.forEach( (aVal) => {
                        this._set.delete(aVal);
                    }
                    );
                }
                return this;
            }
            contains(aValeur) {
                if (typeof aValeur === 'number') {
                    return this._set.has(aValeur);
                }
                let lItems = null;
                if (aValeur instanceof TypeEnsembleNombre) {
                    lItems = aValeur.items();
                } else if (MethodesObjet_1.MethodesObjet.isArray(aValeur)) {
                    lItems = aValeur;
                }
                if (lItems) {
                    if (lItems.length === 0) {
                        return false;
                    }
                    return lItems.every( (aVal) => {
                        return this._set.has(aVal);
                    }
                    );
                }
                return false;
            }
            intersect(aValeur) {
                const lSet = new Set();
                this._cacheItems = null;
                let lItems = null;
                if (aValeur instanceof TypeEnsembleNombre) {
                    lItems = aValeur.items();
                } else if (MethodesObjet_1.MethodesObjet.isArray(aValeur)) {
                    lItems = aValeur;
                } else {}
                if (lItems) {
                    lItems.forEach( (aVal) => {
                        if (this._set.has(aVal)) {
                            lSet.add(aVal);
                        }
                    }
                    );
                    this._set = lSet;
                }
                return this;
            }
            get(aIndex) {
                const lItems = this.items();
                if (aIndex < 0 || aIndex > lItems.length || !MethodesObjet_1.MethodesObjet.isNumber(aIndex)) {
                    return null;
                }
                return lItems[aIndex];
            }
            indexOf(aValeur) {
                if (!this._set.has(aValeur)) {
                    return -1;
                }
                return MethodesTableau_1.MethodesTableau.binaryIndexOf(this.items(), aValeur);
            }
            items() {
                if (!this._cacheItems) {
                    this._cacheItems = [];
                    for (const lVal of this._set.values()) {
                        this._cacheItems.push(lVal);
                    }
                    this._cacheItems.sort(_sort);
                }
                return this._cacheItems;
            }
            count() {
                return this._set.size;
            }
            each(aMethode, thisArg) {
                this.items().forEach( (aItem, aIndex) => {
                    aMethode.call(thisArg, aItem, aIndex);
                }
                );
                return this;
            }
            dupliquer() {
                return new TypeEnsembleNombre(this);
            }
            toString() {
                let lResult = '', lNbDeSuite = 0, lValeur, lItems = this.items();
                for (let lIx = 1; lIx <= lItems.length; lIx++) {
                    lValeur = lItems[lIx];
                    if ((lItems.length > lIx) && (lValeur === lItems[lIx - 1] + 1)) {
                        lNbDeSuite++;
                    } else {
                        if (lResult.length > 0) {
                            lResult += ',';
                        }
                        if (lNbDeSuite > 0) {
                            lResult += lItems[lIx - 1 - lNbDeSuite] + '..';
                        }
                        lResult += lItems[lIx - 1];
                        lNbDeSuite = 0;
                    }
                }
                return '[' + lResult + ']';
            }
            fromString(aChaine) {
                if (!aChaine || !aChaine.length || aChaine.length < 2) {
                    return this;
                }
                aChaine = aChaine.substring(1, aChaine.length - 1);
                const T1 = aChaine.split(',');
                let T2, V1, V2;
                for (let I = 0; I < T1.length; I++) {
                    T2 = T1[I].split('..');
                    V1 = parseInt(T2[0], 10);
                    V2 = parseInt(T2.length === 1 ? T2[0] : T2[1], 10);
                    for (let J = V1; J <= V2; J++) {
                        this._set.add(J);
                    }
                }
                return this;
            }
            toJSON() {
                const lJSON = {};
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpEnsembleNombre;
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = this.toString();
                return lJSON;
            }
        }
        exports.TypeEnsembleNombre = TypeEnsembleNombre;
        function _sort(a, b) {
            return a < b ? -1 : a > b ? 1 : 0;
        }
    },
    fn: 'typeensemblenombre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetJSON = void 0;
        require("DeclarationJQuery");
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const TypeDomaine_1 = require("TypeDomaine");
        const TypeArrondi_1 = require("TypeArrondi");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const ObjetChaine_1 = require("ObjetChaine");
        const TypeNote_1 = require("TypeNote");
        const ObjetJSON = {
            parse(data, aParametres) {
                if (!data || typeof data !== 'string') {
                    return null;
                }
                const lParametres = Object.assign({
                    ignorerEntites: false,
                    JSONCollection: null
                }, aParametres);
                const lJSON = ObjetJSON.parseJSON(data);
                return ObjetJSON.parseVariables(lJSON, lParametres);
            },
            parseJSON(data) {
                let lJSON;
                try {
                    lJSON = JSON.parse(data);
                } catch (e) {
                    lJSON = null;
                }
                return lJSON;
            },
            parseVariables(aJSON, aParametres) {
                let lJSON;
                const lParametres = Object.assign({
                    ignorerEntites: false,
                    JSONCollection: null
                }, aParametres);
                try {
                    lJSON = _parseVariables(aJSON, lParametres);
                } catch (e) {
                    lJSON = {};
                }
                return lJSON;
            },
            toJSON(aObjet, aParametres) {
                let lJSON;
                try {
                    if (aParametres && aParametres.ignorerEntites && !aParametres.JSONCollection) {
                        lJSON = aObjet;
                    } else {
                        lJSON = ObjetJSON.preparerJSON(aObjet, aParametres);
                    }
                    return JSON.stringify(lJSON);
                } catch (e) {}
                return '';
            },
            preparerJSON(aObjet, aParametres) {
                const lChaine = JSON.stringify(aObjet);
                let lJSON = JSON.parse(lChaine);
                if (aParametres && aParametres.ignorerEntites && !aParametres.JSONCollection) {
                    return lJSON;
                }
                lJSON = _toJSON(lJSON, {
                    ignorerEntites: !!(aParametres && aParametres.ignorerEntites),
                    JSONCollection: aParametres && aParametres.JSONCollection ? aParametres.JSONCollection : null
                });
                return lJSON;
            }
        };
        exports.ObjetJSON = ObjetJSON;
        function _parseElement(aJSON, aParametres) {
            const lElement = new ObjetElement_1.ObjetElement().fromJSON(aJSON);
            let lValeur;
            let lProp;
            if (aJSON) {
                if (lElement.Libelle) {
                    lElement.Libelle = aParametres.ignorerEntites ? lElement.Libelle : ObjetChaine_1.GChaine.ajouterEntites(lElement.Libelle);
                }
                for (lProp in aJSON) {
                    if (lProp !== ObjetElement_1.ObjetElement.const_JSON.libelle.JSON && lProp !== ObjetElement_1.ObjetElement.const_JSON.numero.JSON && lProp !== ObjetElement_1.ObjetElement.const_JSON.genre.JSON && lProp !== ObjetElement_1.ObjetElement.const_JSON.position.JSON && lProp !== ObjetElement_1.ObjetElement.const_JSON.actif.JSON) {
                        lValeur = aJSON[lProp];
                        if (!_parseVariablesDeSource(lElement, lProp, lValeur, aParametres)) {
                            lElement[lProp] = lValeur;
                        }
                    }
                }
            }
            return lElement;
        }
        function _strToNote(aNote) {
            if (!TypeNote_1.TypeNote) {
                return null;
            }
            if (MethodesObjet_1.MethodesObjet.isArray(aNote)) {
                const T = [];
                for (const i in aNote) {
                    T[i] = new TypeNote_1.TypeNote(aNote[i]);
                }
                return T;
            }
            return new TypeNote_1.TypeNote(aNote);
        }
        function _parseVariable(aJSON, aParametres) {
            if (!aJSON) {
                return null;
            }
            const lType = aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type];
            const lValeur = aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur];
            switch (lType) {
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpElement:
                if (MethodesObjet_1.MethodesObjet.isArray(lValeur)) {
                    const lListeElements = new ObjetListeElements_1.ObjetListeElements();
                    if (lValeur && lValeur.length) {
                        for (let i = 0, lNb = lValeur.length; i < lNb; i++) {
                            const lElement = _parseElement(lValeur[i], aParametres);
                            lListeElements.addElement(lElement);
                        }
                    }
                    return lListeElements;
                }
                return _parseElement(lValeur, aParametres);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpFichierBase64:
                if (aParametres && aParametres.JSONCollection && aParametres.JSONCollection.fichiers) {
                    const lFichierBase64 = aParametres.JSONCollection.fichiers[lValeur];
                    aParametres.JSONCollection.fichiers[lValeur] = null;
                    return lFichierBase64;
                }
                ;return '';
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpCardinal:
                return ObjetChaine_1.GChaine.strToCardinal(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpBoolean:
                return ObjetChaine_1.GChaine.strToBoolean(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpString:
                return ObjetChaine_1.GChaine.ajouterEntites(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpColor:
                return lValeur;
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpDateTime:
                return ObjetChaine_1.GChaine.strToDate(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpNote:
                return _strToNote(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpTraduction:
                return lValeur;
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpIP:
                return ObjetChaine_1.GChaine.strToIp(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpInteger:
                return ObjetChaine_1.GChaine.strToInteger(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpDouble:
                return ObjetChaine_1.GChaine.strToDouble(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpDomaine:
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpEnsemble:
                return new TypeDomaine_1.TypeDomaine(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpEnsembleCardinal:
                return new TypeDomaine_1.TypeDomaine(lValeur,TypeDomaine_1.TypeDomaine.CTailleOuverte);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpArrondi:
                return new TypeArrondi_1.TypeArrondi(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpHtml:
                return ObjetChaine_1.GChaine.htmlToSafeHtml(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpHtmlSafe:
                return lValeur;
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpEnsembleNombre:
                return new TypeEnsembleNombre_1.TypeEnsembleNombre().fromString(lValeur);
            default:
                return lValeur;
            }
        }
        function _estVariable(aJSON) {
            if (aJSON && aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] && aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] !== undefined && aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] >= 0) {
                const lKeys = Object.keys(aJSON);
                if (lKeys.length === 2 && ((lKeys[0] === Enumere_ChampsJSON_1.TypeChampsJSON.type && lKeys[1] === Enumere_ChampsJSON_1.TypeChampsJSON.valeur) || (lKeys[1] === Enumere_ChampsJSON_1.TypeChampsJSON.type && lKeys[0] === Enumere_ChampsJSON_1.TypeChampsJSON.valeur))) {
                    return true;
                }
                return false;
            }
            return false;
        }
        function _estObjet(aValeur) {
            return aValeur && !aValeur.trim && typeof aValeur === 'object';
        }
        function _parseVariablesDeSource(aObjetResultat, aNomProprieteSource, aValeurSource, aParametres) {
            let lEstVariable;
            let lResult = true;
            if (MethodesObjet_1.MethodesObjet.isString(aValeurSource)) {
                aObjetResultat[aNomProprieteSource] = aParametres.ignorerEntites ? aValeurSource : ObjetChaine_1.GChaine.ajouterEntites(aValeurSource);
            } else if (_estObjet(aValeurSource)) {
                lEstVariable = false;
                if (!Array.isArray(aValeurSource)) {
                    lEstVariable = _estVariable(aValeurSource);
                }
                aObjetResultat[aNomProprieteSource] = lEstVariable ? _parseVariable(aValeurSource, aParametres) : _parseVariables(aValeurSource, aParametres);
            } else {
                lResult = false;
            }
            return lResult;
        }
        function _parseVariables(aJSON, aParametres) {
            if (!aJSON) {
                return aJSON;
            }
            for (const i in aJSON) {
                _parseVariablesDeSource(aJSON, i, aJSON[i], aParametres);
            }
            return aJSON;
        }
        function _preparerVariableToJSON(aJSON, aParametres) {
            if (!aJSON) {
                return aJSON;
            }
            const lType = aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type];
            switch (lType) {
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpFichierBase64:
                if (aParametres && aParametres.JSONCollection) {
                    if (!aParametres.JSONCollection.fichiers) {
                        aParametres.JSONCollection.fichiers = [];
                    }
                    aParametres.JSONCollection.fichiers.push(aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur]);
                    aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = aParametres.JSONCollection.fichiers.length - 1;
                    return aJSON;
                }
                ;return aJSON;
            default:
                return aJSON;
            }
        }
        function _toJSON(aJSON, aParametres) {
            if (!aJSON) {
                return aJSON;
            }
            let lValeur;
            for (const i in aJSON) {
                lValeur = aJSON[i];
                if (lValeur) {
                    if (typeof lValeur === 'string') {
                        if (!aParametres.ignorerEntites) {
                            aJSON[i] = ObjetChaine_1.GChaine.enleverEntites(lValeur);
                        }
                    } else if (_estVariable(lValeur)) {
                        aJSON[i] = _preparerVariableToJSON(lValeur, aParametres);
                    } else if (lValeur !== true && !lValeur.MAX_VALUE && !lValeur.getDate && typeof lValeur === 'object') {
                        aJSON[i] = _toJSON(lValeur, aParametres);
                    }
                }
            }
            return aJSON;
        }
    },
    fn: 'objetjson.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        var _a;
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.setObjetDate = exports.Styles = exports.REGEXP_TELEPHONE = exports.TAILLEMAX_INDICATIF_TELEPHONE = exports.REGEXP_INDICATIF_TELEPHONE = exports.MAX_LENGTH_Default = exports.C_eventsModifyInput = exports.C_eventsModifyCheckbox = exports.collectionIdentite = exports.outils = exports.empty = exports.injectHTMLParams = exports.injectHTML = exports.refresh = exports.ieData = exports.addClass = exports.addAttribut = exports.addBalise = exports.initControleur = void 0;
        require("DeclarationJQuery.js");
        require("jInputDisabled.js");
        require("jInputChecked.js");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const ObjetJSON_1 = require("ObjetJSON");
        const ObjetChaine_1 = require("ObjetChaine");
        const ToucheClavier_1 = require("ToucheClavier");
        const jsx_1 = require("jsx");
        const Divers_css_1 = require("Divers.css");
        const uBalises = {};
        const uAttributs = {};
        const uClassesCss = {};
        const uNodeNames = [];
        let lGUIDControleur1 = 1;
        let lGUIDControleur2 = 1;
        const C_id_event_iemodel = 'ie-model_verification';
        const C_RegExp_Match = /^\/(.*)\/([gim]*)$/;
        const uInvocateur = new Invocateur_1.ObjetInvocateur();
        let uTailleMaxTelephone = null;
        const lMapOutils = new Map();
        let uPromiseRefresh = null;
        jsx_1.JSXDictionaryCallbacks.addAttrAllowed('ie-model');
        jsx_1.JSXDictionaryCallbacks.addAttrAllowed('ie-if');
        var TypeAccesParametres;
        (function(TypeAccesParametres) {
            TypeAccesParametres[TypeAccesParametres["default"] = 0] = "default";
            TypeAccesParametres[TypeAccesParametres["jsxStrict"] = 1] = "jsxStrict";
        }
        )(TypeAccesParametres || (TypeAccesParametres = {}));
        const lOutils = {
            nomInvocRefresh: '__refresh_node__',
            parseValueEvent: _parseValueEvent,
            getModel: _getModel,
            abonnerRefresh: _abonnerRefresh,
            getAccesParametres: _getAccesParametres,
            getAccesParametresModel: _getAccesParametresModel,
            injectHTML: _injectHTML,
            getContexteCourant: _getContexteCourant,
            getControleSaisieEvent: _getControleSaisieEvent,
            getAttributesDeNode: _getAttributesDeNode,
            getMapDeNode: _getMapDeNode,
            copyAttributs: _copyAttributs,
            gererInputCB: _gererInputCB,
            gererInputText: _gererInputText,
            addCommentaireDebug: _addCommentaireDebug,
            composantsAttributs: uAttributs,
            createSafeFragment: _createSafeFragment,
            caret: _caret,
            compile: _compile,
            addGetterHtml: _addGetterHtml,
            surInjectionHtml: _surInjectionHtml,
            surInjectionHtmlPromise: async function(aContexteCourant, aAfter) {
                return new Promise( (aResolve, aReject) => {
                    const lResult = lOutils.surInjectionHtml(aContexteCourant, () => {
                        aResolve();
                    }
                    , aAfter);
                    if (lResult !== true) {
                        aReject();
                    }
                }
                );
            },
            abonneNodeEtNodeAfter(aAccesNode, aAccesNodeAfter, aContexteCourant) {
                if (aAccesNode && aAccesNode.estFonction) {
                    this.surInjectionHtml(aContexteCourant, (aMeasure) => {
                        if (aAccesNode.estFuncJSX) {
                            aAccesNode.callback([aContexteCourant.node, aMeasure, aContexteCourant]);
                        } else {
                            aAccesNode.callback([aMeasure, aContexteCourant.data]);
                        }
                    }
                    );
                }
                if (aAccesNodeAfter && aAccesNodeAfter.estFonction) {
                    this.surInjectionHtml(aContexteCourant, (aMeasure) => {
                        if (aAccesNodeAfter.estFuncJSX) {
                            aAccesNodeAfter.callback([aContexteCourant.node, aMeasure, aContexteCourant]);
                        } else {
                            aAccesNodeAfter.callback([aMeasure, aContexteCourant.data]);
                        }
                    }
                    , true);
                }
            },
            surNodeEtNodeAfter(aContexteCourant) {
                const lInfosGetNode = this.getAccesParametres('node', 'ie-model', aContexteCourant);
                const lInfosGetNodeAfter = this.getAccesParametres('nodeAfter', 'ie-model', aContexteCourant);
                lOutils.abonneNodeEtNodeAfter(lInfosGetNode, lInfosGetNodeAfter, aContexteCourant);
            },
            replaceNode(aNodeAncien, aNodeNouveau) {
                if (aNodeAncien && aNodeNouveau && aNodeAncien.parentNode && aNodeAncien.parentNode.replaceChild) {
                    aNodeAncien.parentNode.replaceChild(aNodeNouveau, aNodeAncien);
                    $(aNodeAncien).remove();
                }
            },
            addObject(aId, aObject) {
                if (!aId || !aObject) {
                    return false;
                }
                if (lMapOutils.has(aId)) {
                    return false;
                }
                lMapOutils.set(aId, aObject);
                return true;
            },
            getObject(aId) {
                if (lMapOutils.has(aId)) {
                    return lMapOutils.get(aId);
                }
                return null;
            },
            TypeAccesParametres: TypeAccesParametres
        };
        function _surInjectionHtml(aContexteCourant, aMethode, aAfter) {
            if (!aContexteCourant || !aContexteCourant.contexte) {
                return;
            }
            if (!aContexteCourant.contexte.eventsInjectionHtml) {
                aContexteCourant.contexte.eventsInjectionHtml = [];
            }
            if (MethodesObjet_1.MethodesObjet.isFunction(aMethode)) {
                if (aAfter) {
                    aContexteCourant.contexte.eventsInjectionHtml.unshift({
                        methode: aMethode,
                        after: true
                    });
                } else {
                    aContexteCourant.contexte.eventsInjectionHtml.push({
                        methode: aMethode,
                        after: false
                    });
                }
                return true;
            } else {}
        }
        async function _$refresh_controleur(aForcerSynchrone) {
            if (this.$asyncPromise !== false && !aForcerSynchrone) {
                if (this.$promRefresh && !this.$promRefresh._isFullfilled) {
                    return this.$promRefresh;
                }
                this.$promRefresh = new Promise( (aResolve) => {
                    setTimeout( () => {
                        this.$promRefresh._isFullfilled = true;
                        this.$promRefresh = null;
                        aResolve(uInvocateur.evenement(C_id_event_iemodel));
                    }
                    , 0);
                }
                );
                return this.$promRefresh;
            }
            uInvocateur.evenement(C_id_event_iemodel);
            return Promise.resolve();
        }
        function _initControleur(aControleur) {
            if (!aControleur.$GUID) {
                aControleur.$GUID = lGUIDControleur1 + '_' + lGUIDControleur2;
                if (lGUIDControleur1 === Number.MAX_VALUE) {
                    lGUIDControleur1 = 1;
                    lGUIDControleur2 += 1;
                } else {
                    lGUIDControleur1 += 1;
                }
            }
            if (!aControleur.$refresh) {
                aControleur.$refresh = _$refresh_controleur;
            }
            return aControleur;
        }
        function _transfererFragmentDansHTML(aNodesFragment, aParent, aInsererAvantLeNode) {
            const lTab = _sliceNodes(aNodesFragment);
            while (aNodesFragment && aNodesFragment.firstChild) {
                aNodesFragment.removeChild(aNodesFragment.firstChild);
            }
            if (lTab.length === 0) {
                return;
            }
            let lSafeFragment = lTab.length > 1 ? _createSafeFragment(document) : null;
            lTab.forEach( (aNode) => {
                if (lSafeFragment) {
                    lSafeFragment.appendChild(aNode);
                } else {
                    if (aInsererAvantLeNode) {
                        aParent.insertBefore(aNode, aInsererAvantLeNode);
                    } else {
                        aParent.appendChild(aNode);
                    }
                }
            }
            );
            if (lSafeFragment) {
                if (aInsererAvantLeNode) {
                    aParent.insertBefore(lSafeFragment, aInsererAvantLeNode);
                } else {
                    aParent.appendChild(lSafeFragment);
                }
                lSafeFragment = null;
            }
            let lNode = lTab[0];
            if (lTab[1] && _estNoeudCommentaire(lNode)) {
                lNode = lTab[1];
            }
            return lNode;
        }
        function _sliceNodes(aNodes) {
            return aNodes && aNodes.length ? Array.from(aNodes) : [];
        }
        function _preInjectionHTML(aElementParent, aIgnorerScroll) {
            const lResult = {
                elementParent: aElementParent,
                parentDocument: false,
                initOverflowParent: false
            };
            let lElement = aElementParent;
            let lParent;
            while (!lResult.parentDocument && lElement) {
                lParent = null;
                if (lElement.nodeType === 1) {
                    if (lElement.parentElement) {
                        lParent = lElement.parentElement;
                    } else if (lElement.parentNode) {
                        lParent = lElement.parentNode;
                    }
                }
                lElement = lParent;
                lResult.parentDocument = lElement === document;
            }
            if (lResult.parentDocument && aIgnorerScroll !== true) {
                let lOverflow = $(aElementParent).css('overflow');
                lResult.initOverflowParent = lOverflow === 'auto' || lOverflow === 'scroll';
                lOverflow = null;
            }
            return lResult;
        }
        function _finaliserInjectionHTML(aPreInjectionHtml, aContexte) {
            if (aPreInjectionHtml.parentDocument) {
                if (aPreInjectionHtml.initOverflowParent && aPreInjectionHtml.elementParent) {
                    aPreInjectionHtml.elementParent.scrollLeft = 0;
                    aPreInjectionHtml.elementParent.scrollTop = 0;
                }
                try {
                    if (aContexte && aContexte.eventsInjectionHtml && aContexte.eventsInjectionHtml.length > 0) {
                        let lMeasures = [];
                        let lMutates = [];
                        const lEventsInjectionHtml = aContexte.eventsInjectionHtml;
                        delete aContexte.eventsInjectionHtml;
                        const lMeasureMutate = {
                            addMeasure: function(aMethode) {
                                lMeasures.push(aMethode);
                            },
                            addMutate: function(aMethode) {
                                lMutates.push(aMethode);
                            }
                        };
                        const lExec = function() {
                            lMeasures.forEach( (aMethode) => {
                                if (aMethode) {
                                    aMethode();
                                }
                            }
                            );
                            lMutates.forEach( (aMethode) => {
                                if (aMethode) {
                                    aMethode();
                                }
                            }
                            );
                        };
                        lEventsInjectionHtml.forEach( (aElement) => {
                            if (aElement && !aElement.after && aElement.methode) {
                                aElement.methode(lMeasureMutate);
                            }
                        }
                        );
                        lExec();
                        lMeasures = [];
                        lMutates = [];
                        lEventsInjectionHtml.forEach( (aElement) => {
                            if (aElement && aElement.after && aElement.methode) {
                                aElement.methode(lMeasureMutate);
                            }
                        }
                        );
                        lExec();
                    }
                } catch (e) {}
            }
        }
        function _findFirstChild(aNode, aNiveau) {
            let lNode = aNode;
            let lNiveau = aNiveau;
            while (lNode && lNiveau > 0) {
                lNode = lNode.firstChild;
                lNiveau -= 1;
            }
            return lNode;
        }
        function _getPremiereBalise(aChaine) {
            if (!aChaine || !aChaine.search) {
                return '';
            }
            let lPosDebut = aChaine.search('<');
            if (lPosDebut < 0) {
                return '';
            }
            lPosDebut += 1;
            const lChaine = aChaine.slice(lPosDebut);
            let lPosFinSup = lChaine.search('>');
            let lPosFinEsp = lChaine.search(' ');
            if (lPosFinSup < 0 && lPosFinEsp < 0) {
                return '';
            }
            if (lPosFinSup < 0) {
                lPosFinSup = lChaine.length;
            }
            if (lPosFinEsp < 0) {
                lPosFinEsp = lChaine.length;
            }
            return aChaine.slice(lPosDebut, lPosDebut + Math.min(lPosFinSup, lPosFinEsp)).toLowerCase();
        }
        function _createSafeFragment(aDocument) {
            const list = [].concat(uNodeNames)
              , safeFrag = (aDocument || document).createDocumentFragment();
            if (safeFrag.createElement) {
                while (list.length) {
                    safeFrag.createElement(list.pop());
                }
            }
            return safeFrag;
        }
        function _injectEtCompilNode(aParametres) {
            let lSafe = _createSafeFragment(document);
            let lNodeParent;
            let lNiveauFirstChild;
            lNodeParent = lSafe.appendChild(document.createElement('div'));
            if (aParametres.html && aParametres.html.nodeType > 0) {
                switch (aParametres.html.nodeName.toLowerCase()) {
                case 'td':
                    lNodeParent.appendChild(document.createElement('table'));
                    lNodeParent.firstChild.appendChild(document.createElement('tbody'));
                    lNodeParent.firstChild.firstChild.appendChild(document.createElement('tr'));
                    lNodeParent = lNodeParent.firstChild.firstChild.firstChild;
                    break;
                case 'tr':
                    lNodeParent.appendChild(document.createElement('table'));
                    lNodeParent = lNodeParent.firstChild;
                    lNodeParent.appendChild(document.createElement('tbody'));
                    lNodeParent = lNodeParent.firstChild;
                    break;
                case 'ul':
                    lNodeParent.appendChild(document.createElement('ul'));
                    lNodeParent = lNodeParent.firstChild;
                    break;
                default:
                    lNodeParent.appendChild(document.createElement('div'));
                    lNodeParent = lNodeParent.firstChild;
                }
                lNodeParent.appendChild(aParametres.html);
            } else {
                lNiveauFirstChild = 1;
                switch (_getPremiereBalise(aParametres.html)) {
                case 'td':
                    lNodeParent.insertAdjacentHTML('beforeend', '<table><tbody><tr>' + aParametres.html + '</tr></tbody></table>');
                    lNiveauFirstChild = 3;
                    break;
                case 'tr':
                    lNodeParent.insertAdjacentHTML('beforeend', '<table><tbody>' + aParametres.html + '</tbody></table>');
                    lNiveauFirstChild = 2;
                    break;
                case 'li':
                    lNodeParent.insertAdjacentHTML('beforeend', '<ul>' + aParametres.html + '</ul>');
                    break;
                default:
                    lNodeParent.insertAdjacentHTML('beforeend', '<div>' + aParametres.html + '</div>');
                }
                lNodeParent = _findFirstChild(lNodeParent, lNiveauFirstChild);
            }
            if (!aParametres.contexte) {
                aParametres.contexte = {};
            }
            aParametres.childNodes = lNodeParent.childNodes;
            _compile(aParametres.childNodes, aParametres.element, aParametres.controleur, aParametres.contexte, aParametres.invocateur, 0);
            lNodeParent = null;
            lSafe = null;
        }
        function _injectHTML(aParametres) {
            let lNode = null;
            if (aParametres.controleur) {
                if (aParametres.instance && !aParametres.controleur.instance) {
                    aParametres.controleur.instance = aParametres.instance;
                }
                _initControleur(aParametres.controleur);
            }
            if (!aParametres.element || aParametres.element.nodeType === undefined) {
                return null;
            }
            const lPreInjectionHtml = _preInjectionHTML(aParametres.element, aParametres.ignorerScroll);
            _injectEtCompilNode(aParametres);
            lNode = _transfererFragmentDansHTML(aParametres.childNodes, aParametres.element, aParametres.insererAvantLeNode);
            aParametres.childNodes = null;
            _finaliserInjectionHTML(lPreInjectionHtml, aParametres.contexte);
            if (aParametres.clearJSX) {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.nettoyerJSX);
            }
            return lNode;
        }
        function _remplirDataModel(aContexteCourant) {
            const lModele = aContexteCourant.node.getAttribute('ie-model');
            if (!lModele) {
                return null;
            }
            if (aContexteCourant.data.$modelObjectJSX && aContexteCourant.data.$modelObjectJSX.valueGUID === lModele) {
                return true;
            }
            const lMapJSX = jsx_1.JSXDictionaryCallbacks.getAndDelete(lModele, 'ie-model');
            if (lMapJSX && MethodesObjet_1.MethodesObjet.isObject(lMapJSX) && MethodesObjet_1.MethodesObjet.isFunction(lMapJSX.func)) {
                let lModelJSX;
                try {
                    lModelJSX = lMapJSX.func();
                } catch (e) {
                    lModelJSX = null;
                }
                if (lModelJSX && MethodesObjet_1.MethodesObjet.isObject(lModelJSX)) {
                    aContexteCourant.data.$modelObjectJSX = {
                        model: lModelJSX,
                        attr: lMapJSX.attr,
                        name: lMapJSX.name,
                        valueGUID: lModele
                    };
                    return true;
                }
                return false;
            }
            ;const lModeleArg = _parseValueEvent(lModele, aContexteCourant.contexte);
            if (lModeleArg && lModeleArg.nom) {
                aContexteCourant.data.$modeleParsed = lModeleArg;
                aContexteCourant.data.$modeleValue = lModele;
            }
            return true;
        }
        function _getModel(aContexteCourant) {
            const lAvecModele = _remplirDataModel(aContexteCourant);
            let lModele;
            let lStrModel = '';
            if (aContexteCourant.data.$modelObjectJSX) {
                lModele = aContexteCourant.data.$modelObjectJSX;
                lStrModel = lModele.name || 'modle JSX anonyme';
            } else {
                lModele = aContexteCourant.data.$modeleValue;
                lStrModel = lModele;
            }
            if (!lModele) {
                return null;
            }
            if (lAvecModele) {
                aContexteCourant.node.removeAttribute('ie-model');
                if (!aContexteCourant.ignorerCommentaires) {
                    lOutils.addCommentaireDebug(aContexteCourant.node, `ie-model="${lStrModel}"`);
                }
            }
            return lModele;
        }
        function _getControleSaisieEvent(aNode) {
            if (!aNode || !aNode.hasAttribute('ie-controlesaisie')) {
                return false;
            }
            ;aNode.removeAttribute('ie-controlesaisie');
            lOutils.addCommentaireDebug(aNode, 'ie-controleSaisie');
            return true;
        }
        function _callbackRefresh(aControleur, aData, aCallback) {
            if (aControleur && aControleur.$off && aControleur.$off()) {
                return;
            }
            try {
                aCallback();
            } catch (e) {}
        }
        function _abonnerRefresh(aCallback, aElementPourDestruction, aContexteCourant, aCallbackDestroy, aMutationObserverNoeudDetruit) {
            let lCallbacks = [];
            let lAjouterAbonnement = true;
            let lId;
            if (!aElementPourDestruction) {
                return;
            }
            if (aContexteCourant.data) {
                if (!aContexteCourant.data.$callbacksRefresh) {
                    aContexteCourant.data.$callbacksRefresh = [];
                } else {
                    lAjouterAbonnement = false;
                }
                lCallbacks = aContexteCourant.data.$callbacksRefresh;
            }
            lCallbacks.push(_callbackRefresh.bind(null, aContexteCourant.controleur, aContexteCourant.data, aCallback));
            if (lAjouterAbonnement) {
                const lInvocateur = aContexteCourant.invocateur ? aContexteCourant.invocateur : uInvocateur;
                lId = lInvocateur.abonner(C_id_event_iemodel, () => {
                    if (aContexteCourant.controleur && aContexteCourant.controleur.instance && _estInstanceIdentite(aContexteCourant.controleur.instance) && aContexteCourant.controleur.instance.isDestroyed()) {
                        return;
                    }
                    const lNb = lCallbacks.length;
                    for (let i = 0; i < lNb; i++) {
                        lCallbacks[i]();
                    }
                }
                , null, false);
                let lDejaDetruit = false;
                let lObserver = null;
                const lDestroy = function() {
                    if (lDejaDetruit) {
                        return;
                    }
                    lInvocateur.desabonner([lId]);
                    if (aContexteCourant.data) {
                        aContexteCourant.data.$destroy = true;
                    }
                    if (lObserver && lObserver.disconnect) {
                        lObserver.disconnect();
                        lObserver = null;
                    }
                    if (aCallbackDestroy) {
                        aCallbackDestroy();
                    }
                    lDejaDetruit = true;
                };
                $(aElementPourDestruction).on('destroyed', lDestroy);
                if (aMutationObserverNoeudDetruit) {
                    const lMutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
                    if (lMutationObserver) {
                        lObserver = new lMutationObserver( (mutations) => {
                            mutations.every( (mutation) => {
                                if (!lDejaDetruit && mutation.type === 'childList') {
                                    try {
                                        if (aMutationObserverNoeudDetruit()) {
                                            lDestroy();
                                            return false;
                                        }
                                    } catch (e) {}
                                }
                                return true;
                            }
                            );
                        }
                        );
                    }
                    if (lObserver) {
                        lObserver.observe(aElementPourDestruction, {
                            childList: true
                        });
                    }
                }
            }
        }
        function _estInstanceIdentite(aInstance) {
            const lInstance = aInstance;
            return lInstance && lInstance.isDestroyed && lInstance.setEtatSaisie && typeof lInstance.isDestroyed === 'function' && typeof lInstance.setEtatSaisie === 'function';
        }
        function _getAccesParametres(aNomEnChaine, aAttrName, aContexteCourant, aTypeAccesParametres=TypeAccesParametres.default, aAccepteErreur, aIgnorerNomOrigine) {
            let lParsed = null;
            const lResult = {
                valide: false,
                estFonction: false,
                value: aAttrName,
                nom: aNomEnChaine,
                nomCommentaire: aNomEnChaine,
                args: [],
                getAncre: () => null
            };
            if (aNomEnChaine) {
                if (aAttrName) {
                    let lFuncJSX = null;
                    if (aAttrName === 'ie-model' && aContexteCourant.data.$modelObjectJSX && aContexteCourant.data.$modelObjectJSX.model) {
                        lResult.estModelJSX = true;
                        lFuncJSX = aContexteCourant.data.$modelObjectJSX.model[aNomEnChaine];
                        if (!lFuncJSX) {
                            return lResult;
                        }
                        if (aContexteCourant.data.$modelObjectJSX.name) {
                            lResult.nomCommentaire = aContexteCourant.data.$modelObjectJSX.name;
                        }
                    }
                    if (!lFuncJSX && aAttrName !== 'ie-model') {
                        const lMapJSX = jsx_1.JSXDictionaryCallbacks.getAndDelete(aNomEnChaine, aAttrName);
                        if (lMapJSX && lMapJSX.func) {
                            lFuncJSX = lMapJSX.func;
                            if (lMapJSX.name) {
                                lResult.nomCommentaire = lMapJSX.name;
                            }
                        } else {}
                    }
                    if (lFuncJSX) {
                        if (MethodesObjet_1.MethodesObjet.isFunction(lFuncJSX)) {
                            Object.assign(lResult, {
                                valide: true,
                                estFonction: true,
                                estFuncJSX: true,
                                callback: (aTabArguments) => {
                                    try {
                                        if (aTabArguments && aTabArguments.length) {
                                            return lFuncJSX(...aTabArguments);
                                        }
                                        return lFuncJSX();
                                    } catch (e) {}
                                }
                            });
                            return lResult;
                        }
                        ;return lResult;
                    }
                }
                if (aTypeAccesParametres === TypeAccesParametres.jsxStrict) {
                    return lResult;
                }
                lParsed = _parseValueEvent(aNomEnChaine, aContexteCourant.contexte, aAccepteErreur);
                if (lParsed) {
                    aNomEnChaine = lParsed.nom;
                }
            }
            if (!aNomEnChaine && aAttrName === 'ie-model' && aContexteCourant.data.$modelObjectJSX) {
                return lResult;
            }
            if (!aContexteCourant.controleur) {
                return lResult;
            }
            const lNomEnChaineOrigine = aNomEnChaine;
            if (aNomEnChaine && (!aContexteCourant.data || !aContexteCourant.data.$modeleParsed)) {
                if (!lParsed) {
                    return lResult;
                }
            }
            let lAncreControleur = aContexteCourant.controleur;
            let lNom;
            if (aContexteCourant.data && aContexteCourant.data.$modeleParsed) {
                if (!lParsed || !lParsed.args || lParsed.args.length === 0) {
                    lParsed = aContexteCourant.data.$modeleParsed;
                } else {
                    lParsed.nom = aContexteCourant.data.$modeleParsed.nom;
                }
                if (aContexteCourant.data.$modeleParsed.nom) {
                    aNomEnChaine = lParsed.nom + (aNomEnChaine ? '.' + aNomEnChaine : '');
                }
            }
            const lArgs = lResult.args = lParsed ? lParsed.args : [];
            if (!aContexteCourant.controleur || !aNomEnChaine) {
                return lResult;
            }
            let lTab = aNomEnChaine.split('.');
            lNom = lTab.pop();
            lAncreControleur = MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTab);
            let lEstFonction = lAncreControleur && lAncreControleur[lNom] !== undefined && MethodesObjet_1.MethodesObjet.isFunction(lAncreControleur[lNom]);
            if (!lEstFonction && aContexteCourant.data && aContexteCourant.data.$modeleParsed && !aIgnorerNomOrigine) {
                const lTabHorsModele = lNomEnChaineOrigine.split('.');
                const lNomHorsModel = lTabHorsModele.pop();
                const lAncreControleurHorsModele = MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTabHorsModele);
                if (lAncreControleurHorsModele && lAncreControleurHorsModele[lNom] !== undefined && MethodesObjet_1.MethodesObjet.isFunction(lAncreControleurHorsModele[lNomHorsModel])) {
                    lEstFonction = true;
                    lAncreControleur = lAncreControleurHorsModele;
                    lTab = lTabHorsModele;
                    lNom = lNomHorsModel;
                }
            }
            const lTabRempli = lTab.length > 0;
            if (lEstFonction) {
                const lArgsCallback = lArgs || [];
                let lAvecArgsBoucleREPEAT = false;
                let lArray;
                for (let lIx = 0; lIx < lArgsCallback.length; lIx++) {
                    if (lArgsCallback[lIx] && lArgsCallback[lIx].getterArray) {
                        lAvecArgsBoucleREPEAT = true;
                        break;
                    }
                }
                lResult.valide = true;
                lResult.controleur = aContexteCourant.controleur;
                lResult.getAncre = function() {
                    return lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTab) : aContexteCourant.controleur;
                }
                ;
                lResult.callback = function(aTabArguments) {
                    const lAncre = lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTab) : aContexteCourant.controleur;
                    if (!lAncre || !lAncre[lNom] || !lAncre[lNom].apply) {
                        return '';
                    }
                    let lArgs = lArgsCallback;
                    let lArgCallback;
                    if (lAvecArgsBoucleREPEAT) {
                        lArgs = new Array(lArgsCallback.length);
                        for (let lIx = 0, lLength = lArgsCallback.length; lIx < lLength; lIx++) {
                            lArgCallback = lArgsCallback[lIx];
                            if (lArgCallback && lArgCallback.getterArray) {
                                const lArgCallbackRepeat = lArgCallback;
                                lArray = lArgCallbackRepeat.getterArray();
                                lArgs[lIx] = {
                                    indice: lArgCallbackRepeat.indice,
                                    element: lArray[lArgCallbackRepeat.indice],
                                    tableau: lArray,
                                    arguments: lArgCallbackRepeat.arguments
                                };
                            } else {
                                lArgs[lIx] = lArgsCallback[lIx];
                            }
                        }
                    }
                    try {
                        return lAncre[lNom].apply(aContexteCourant, aTabArguments && aTabArguments.length > 0 ? lArgs.concat(aTabArguments) : lArgs);
                    } catch (e) {}
                }
                ;
                lResult.estFonction = true;
                lResult.nom = lNom;
                return lResult;
            }
            lResult.valide = !!MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur.instance, lTab);
            lResult.getAncre = function() {
                return lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur.instance, lTab) : aContexteCourant.controleur.instance;
            }
            ;
            lResult.getAncreControleur = lAncreControleur && lAncreControleur[lNom] !== undefined ? function() {
                return lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTab) : aContexteCourant.controleur;
            }
            : null;
            lResult.callback = function() {
                const lAncre = lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur.instance, lTab) : aContexteCourant.controleur.instance;
                if (!lAncre) {
                    return '';
                }
                return lAncre[lNom];
            }
            ;
            lResult.estFonction = false;
            lResult.nom = lNom;
            return lResult;
        }
        function _getAccesParametresModel(aNomEnChaine, aContexteCourant, aAccepteErreur) {
            return _getAccesParametres(aNomEnChaine, 'ie-model', aContexteCourant, TypeAccesParametres.default, aAccepteErreur, true);
        }
        function _addCommentaireDebug(aNode, aCommentaire) {}
        function _estNoeudCommentaire(aNode) {
            return !!aNode && aNode.nodeType === 8;
        }
        function _getContexteCourant(aControleur, aContexte, aNode, aData, aInvocateur) {
            return {
                controleur: aControleur,
                instance: aControleur ? aControleur.instance : null,
                contexte: aContexte,
                data: aData,
                node: aNode,
                invocateur: aInvocateur,
                invocateurNode: new Invocateur_1.ObjetInvocateur(true)
            };
        }
        function _getAttributesDeNode(aNode) {
            return _sliceNodes(aNode.attributes);
        }
        function _getMapDeNode(aNode) {
            const lMap = {};
            for (let attr, nAttrs = _getAttributesDeNode(aNode), j = 0, jj = nAttrs && nAttrs.length; j < jj; j++) {
                attr = nAttrs[j];
                if (attr.name) {
                    const lName = attr.name.toLowerCase();
                    lMap[lName] = attr.value;
                }
            }
            return lMap;
        }
        function _copyAttributs(aNodeSource, aNodeCible, aCallback) {
            const lMap = _getMapDeNode(aNodeSource);
            const lJCible = $(aNodeCible);
            for (const llName in lMap) {
                try {
                    if (!aCallback || aCallback(llName, lMap[llName], lMap) !== false) {
                        lJCible.attr(llName, lMap[llName]);
                    }
                } catch (e) {}
            }
            return lMap;
        }
        function _addGetterHtml(aContexteCourant, aInfosParametres, aWrapperHtml) {
            const lNodeDestination = aContexteCourant.nodeTransfertContenuDynamique || aContexteCourant.node;
            const lGetter = function() {
                const lResult = MethodesObjet_1.MethodesObjet.isFunction(aInfosParametres) ? aInfosParametres(aContexteCourant.node, lNodeDestination) : aInfosParametres.estFuncJSX ? aInfosParametres.callback([aContexteCourant.node, lNodeDestination, aContexteCourant]) : aInfosParametres.callback([lNodeDestination, aContexteCourant.data]);
                if (MethodesObjet_1.MethodesObjet.isNumber(lResult)) {
                    return lResult + '';
                }
                return (lResult || '') + '';
            };
            const lWrapperHtml = aWrapperHtml || function(aHtml) {
                return aHtml;
            }
            ;
            const lHtml = lGetter();
            if (!MethodesObjet_1.MethodesObjet.isFunction(aInfosParametres) && !aInfosParametres.estFonction && !MethodesObjet_1.MethodesObjet.isString(lHtml)) {
                return;
            }
            const lInvocateur = new Invocateur_1.ObjetInvocateur();
            $(lNodeDestination).empty();
            try {
                lNodeDestination.innerHTML = lWrapperHtml(lHtml);
            } catch (e) {
                $(lNodeDestination).html(lWrapperHtml(lHtml));
            }
            aContexteCourant.invocateurNode.evenement(lOutils.nomInvocRefresh, {
                refreshHtml: true,
                html: lHtml
            });
            _compile(lNodeDestination.childNodes, lNodeDestination, aContexteCourant.controleur, aContexteCourant.contexte, lInvocateur);
            let lOldHtmlCompare = jsx_1.JSXDictionaryCallbacks.getStrCompare(lHtml);
            _abonnerRefresh( () => {
                const lGUIDs = jsx_1.JSXDictionaryCallbacks.getGUIDs();
                const lHtml = lGetter();
                const lHtmlCompare = jsx_1.JSXDictionaryCallbacks.getStrCompare(lHtml);
                if (lHtmlCompare !== lOldHtmlCompare) {
                    lOldHtmlCompare = lHtmlCompare;
                    IEHtml.empty(lNodeDestination);
                    const lContexte = Object.assign({}, aContexteCourant.contexte);
                    lContexte.eventsInjectionHtml = [];
                    _injectHTML({
                        element: lNodeDestination,
                        html: lWrapperHtml(lHtml),
                        controleur: aContexteCourant.controleur,
                        contexte: lContexte,
                        invocateur: lInvocateur
                    });
                    jsx_1.JSXDictionaryCallbacks.clear(lGUIDs);
                    aContexteCourant.invocateurNode.evenement(lOutils.nomInvocRefresh, {
                        refreshHtml: true,
                        html: lHtml
                    });
                } else {
                    jsx_1.JSXDictionaryCallbacks.clear(lGUIDs);
                    lInvocateur.evenement(C_id_event_iemodel);
                }
            }
            , lNodeDestination, aContexteCourant);
            return lNodeDestination;
        }
        function _parseArg(aArg, aEstChaine, aContexte) {
            if (aEstChaine) {
                return aArg;
            }
            if (aContexte && aContexte.repeat && aContexte.repeat[aArg]) {
                return aContexte.repeat[aArg];
            }
            if (aArg === 'null') {
                return null;
            }
            if (aArg === 'undefined') {
                return undefined;
            }
            if (aArg === 'true') {
                return true;
            }
            if (aArg === 'false') {
                return false;
            }
            let lNumber = parseInt(aArg, 10);
            if (isNaN(lNumber)) {
                lNumber = null;
                throw 'erreur _parseArg';
            }
            return lNumber;
        }
        function _parseValueEvent(aValue, aContexte, aSortieEnErreur) {
            if (!aValue) {
                return null;
            }
            const lResult = {
                nom: '',
                args: []
            };
            let lEtat = 'rech_fonction';
            let lChar;
            let lNomFonction = '';
            let lArg = '';
            let LArgEstChaine = false;
            const lLength = aValue.length;
            const lSepDebut = '(';
            const lSepFin = ')';
            try {
                for (let lIPars = 0; lIPars < lLength; lIPars++) {
                    lChar = aValue.charAt(lIPars);
                    switch (lEtat) {
                    case 'rech_fonction':
                        if (lChar === lSepDebut || lIPars === lLength - 1) {
                            lEtat = 'rech_param';
                            if (lIPars === aValue.length - 1) {
                                lNomFonction += lChar;
                            }
                            lResult.nom = lNomFonction.trim();
                            if (lResult.nom.length === 0) {
                                return null;
                            }
                            lArg = '';
                        } else {
                            lNomFonction += lChar;
                        }
                        break;
                    case 'rech_param':
                        if (lChar === lSepFin) {
                            if (lIPars < lLength - 1) {
                                if (aValue.charAt(lIPars + 1) !== ';') {
                                    throw 'erreur fermeture fonction';
                                }
                            }
                            lArg = lArg.trim();
                            if (LArgEstChaine || lArg.length > 0 || lResult.args.length > 0) {
                                lResult.args.push(_parseArg(lArg, LArgEstChaine, aContexte));
                            }
                            lEtat = 'fin';
                            break;
                        }
                        if (lChar === ',') {
                            lResult.args.push(_parseArg(lArg.trim(), LArgEstChaine, aContexte));
                            lArg = '';
                            LArgEstChaine = false;
                        } else if (lChar === '\'') {
                            if (lArg.trim().length > 0) {}
                            lArg = '';
                            lEtat = 'rech_chaine';
                        } else {
                            lArg += lChar;
                        }
                        break;
                    case 'rech_chaine':
                        if (lChar === '\'' && (aValue.charAt(lIPars + 1) === ')' || aValue.charAt(lIPars + 1) === ',')) {
                            lEtat = 'rech_param';
                            LArgEstChaine = true;
                            break;
                        }
                        lArg += lChar;
                        break;
                    case 'fin':
                        if (lChar !== ';') {
                            throw 'erreur fin fonction';
                        }
                        break;
                    default:
                        throw 'cas non gr';
                    }
                }
            } catch (e) {
                if (aSortieEnErreur) {
                    return null;
                }
            }
            return lResult;
        }
        function _positionnerObjetSelonAccesseur(aChaineAccesseur, aObjet) {
            if (!aObjet) {
                return null;
            }
            const lTab = aChaineAccesseur.split('.');
            let lResult = aObjet;
            for (let i = 0; i < lTab.length; i++) {
                lResult = lResult[lTab[i]];
                if (!lResult) {
                    return null;
                }
            }
            return lResult;
        }
        function _caret(aElement, begin, end) {
            let range;
            if (!aElement) {
                return;
            }
            if (typeof begin === 'number') {
                end = (typeof end === 'number') ? end : begin;
                const lValue = aElement.value;
                begin = Math.min(begin, lValue.length);
                end = Math.min(end, lValue.length);
                if (aElement.setSelectionRange) {
                    aElement.setSelectionRange(begin, end);
                } else if (aElement.createTextRange) {
                    range = aElement.createTextRange();
                    range.collapse(true);
                    range.moveEnd('character', end);
                    range.moveStart('character', begin);
                    range.select();
                }
            } else {
                if (aElement.setSelectionRange) {
                    begin = aElement.selectionStart;
                    end = aElement.selectionEnd;
                } else if (document.selection && document.selection.createRange) {
                    range = document.selection.createRange();
                    begin = 0 - range.duplicate().moveStart('character', -100000);
                    end = begin + range.text.length;
                }
                return {
                    begin: begin,
                    end: end
                };
            }
        }
        function _verificationInputModel(aContexteCourant, aParametres, aPatternValidateRegex) {
            if (aParametres.data.$ignoreRefresh) {
                return;
            }
            let lValue;
            if (aParametres.getterValueInit) {
                if (aParametres.declencherExitChange) {
                    if (aParametres.getterValue) {
                        lValue = aParametres.getterValue();
                    } else {
                        return;
                    }
                } else {
                    lValue = aParametres.getterValueInit();
                }
            } else {
                if (!aParametres.getterValue) {
                    return;
                }
                lValue = aParametres.getterValue();
            }
            let lValueInput;
            if (aParametres.saveValues.value !== lValue) {
                if (aParametres.estCB) {
                    aParametres.eventActif = false;
                    $(aParametres.node).inputChecked(lValue);
                    aParametres.eventActif = true;
                    aParametres.saveValues.value = aParametres.saveValues.inputValue = lValue;
                } else {
                    aParametres.eventActif = false;
                    lValueInput = lValue;
                    if (aParametres.toDisplay) {
                        lValueInput = aParametres.toDisplay(lValueInput);
                    }
                    if (aParametres.contentEditable) {
                        aParametres.node.innerHTML = lValueInput;
                    } else {
                        aParametres.node.value = lValueInput;
                    }
                    aParametres.eventActif = true;
                    if (aPatternValidateRegex) {
                        const lAncreControleur = aParametres.data.$modeleParsed ? _positionnerObjetSelonAccesseur(aParametres.data.$modeleParsed.nom, aParametres.controleur) : null;
                        if (lAncreControleur) {
                            aContexteCourant.$patternOK = aPatternValidateRegex(lValue);
                        }
                    }
                    aParametres.saveValues.value = lValue;
                    aParametres.saveValues.inputValue = lValueInput;
                }
            } else {
                if (aParametres.estCB && aContexteCourant.data && aContexteCourant.data.estRadioBouton && lValue !== $(aContexteCourant.node).is(':checked')) {
                    $(aParametres.node).inputChecked(lValue);
                }
                if (aParametres.toDisplay) {
                    lValueInput = aParametres.toDisplay(lValue);
                    if (aParametres.saveValues.inputValue !== lValueInput) {
                        aParametres.eventActif = false;
                        if (aParametres.contentEditable) {
                            aParametres.node.innerHTML = lValueInput;
                        } else {
                            aParametres.node.value = lValueInput;
                        }
                        aParametres.eventActif = true;
                    }
                }
            }
            if (aParametres.getterDisabled) {
                lValue = !!aParametres.getterDisabled();
                if (lValue !== aParametres.saveDisabled) {
                    $(aParametres.node).inputDisabled(lValue);
                    aParametres.saveDisabled = lValue;
                }
            }
            if (aParametres.getterReadOnly) {
                lValue = !!aParametres.getterReadOnly();
                if (lValue !== aParametres.saveReadOnly) {
                    $(aParametres.node).prop('readonly', lValue);
                    aParametres.saveReadOnly = lValue;
                }
            }
        }
        function _affecterGetterSetterInputModel(aParametres, aContexteCourant, aEstCB) {
            let lValue, lAncre;
            const lInfosGetValueInit = _getAccesParametresModel('getValueInit', aContexteCourant);
            if (lInfosGetValueInit.estFonction) {
                aParametres.getterValueInit = function() {
                    const lValue = lInfosGetValueInit.callback([aParametres.node]);
                    if (aEstCB) {
                        return !!lValue;
                    }
                    return (lValue !== null && lValue !== void 0 ? lValue : '') + '';
                }
                ;
            }
            const lInfosGetValue = _getAccesParametresModel('getValue', aContexteCourant);
            const lInfosGetSetModele = _getAccesParametres('', 'ie-model', aContexteCourant);
            if (lInfosGetValue.estFonction) {
                aParametres.getterValue = function() {
                    const lValue = lInfosGetValue.callback([aParametres.node]);
                    if (aEstCB) {
                        return !!lValue;
                    }
                    return (lValue !== null && lValue !== void 0 ? lValue : '') + '';
                }
                ;
            } else if (!aParametres.getterValueInit) {
                if (lInfosGetValue.estModelJSX) {
                    aParametres.getterValue = function() {
                        return '';
                    }
                    ;
                } else {
                    lAncre = lInfosGetSetModele.getAncre();
                    if (!lInfosGetSetModele.valide || !lAncre) {
                        return false;
                    }
                    lValue = lAncre[lInfosGetSetModele.nom];
                    if (lValue) {
                        if (aEstCB && lValue !== true) {
                            return false;
                        }
                        if (!aEstCB && !MethodesObjet_1.MethodesObjet.isString(lAncre[lInfosGetSetModele.nom])) {
                            return false;
                        }
                    }
                    aParametres.getterValue = function() {
                        const lValue = lInfosGetSetModele.callback([]);
                        if (aEstCB) {
                            return !!lValue;
                        }
                        return (lValue !== null && lValue !== void 0 ? lValue : '') + '';
                    }
                    ;
                }
            }
            let lForcerDisabled = false;
            const lInfosSetValue = _getAccesParametresModel('setValue', aContexteCourant);
            if (lInfosSetValue.estFonction) {
                aParametres.setterValue = function(aValue, aParametresSetter) {
                    return lInfosSetValue.callback([aValue, aParametresSetter]);
                }
                ;
            } else if (!aParametres.getterValueInit) {
                if (lInfosSetValue.estModelJSX) {
                    lForcerDisabled = true;
                    aParametres.setterValue = function() {}
                    ;
                } else {
                    lAncre = lInfosGetSetModele.getAncre();
                    if (!lInfosGetSetModele.valide || !lAncre) {
                        return false;
                    }
                    aParametres.setterValue = function(aValue) {
                        const lAncre = lInfosGetSetModele.getAncre();
                        if (!lAncre) {
                            return;
                        }
                        lAncre[lInfosGetSetModele.nom] = aValue;
                    }
                    ;
                }
            }
            const lInfosGetDisabled = _getAccesParametresModel('getDisabled', aContexteCourant);
            if (lForcerDisabled) {
                aParametres.getterDisabled = () => {
                    return true;
                }
                ;
            } else if (lInfosGetDisabled.estFonction) {
                aParametres.getterDisabled = lInfosGetDisabled.callback.bind(null, [aParametres.node, aContexteCourant.data]);
            }
            const lInfosGetReadOnly = _getAccesParametresModel('getReadOnly', aContexteCourant);
            if (lInfosGetReadOnly.estFonction) {
                aParametres.getterReadOnly = lInfosGetReadOnly.callback.bind(null, [aParametres.node, aContexteCourant.data]);
            }
            const lInfosExitChange = _getAccesParametresModel('exitChange', aContexteCourant);
            if (lInfosExitChange.estFonction) {
                aParametres.infosExitChange = lInfosExitChange;
            }
            if (aParametres.getterValueInit && !aParametres.infosExitChange) {
                aParametres.getterValueInit = null;
            }
            const lInfosInterrompreEvent = _getAccesParametresModel('interrompreEvent', aContexteCourant);
            if (lInfosInterrompreEvent.estFonction) {
                aParametres.interrompreEvent = lInfosInterrompreEvent;
            }
            const lInfosNode = _getAccesParametresModel('node', aContexteCourant);
            if (lInfosNode.estFonction) {
                aParametres.infosNode = lInfosNode;
            }
            const lInfosNodeAfter = _getAccesParametresModel('nodeAfter', aContexteCourant);
            if (lInfosNodeAfter.estFonction) {
                aParametres.infosNodeAfter = lInfosNodeAfter;
            }
            const lInfoskeyupEnter = _getAccesParametresModel('keyupEnter', aContexteCourant);
            if (lInfoskeyupEnter.estFonction) {
                aParametres.infoskeyupEnter = lInfoskeyupEnter;
            }
            return true;
        }
        function _estNodeContentEditable(aNode) {
            if (aNode && (aNode.isContentEditable || aNode.contentEditable === 'true')) {
                const lNodeName = aNode.nodeName ? aNode.nodeName.toLowerCase() : '';
                return lNodeName !== 'input' && lNodeName !== 'textarea';
            }
            return false;
        }
        function _gererInputModele(aContexteCourant, aJNode, aEstCB, aAttributType, aMaxLength) {
            let lModele = null, lMask, lMatchMask, lPattern, lMatchPattern, lPatternValidateRegex, lTrim = false, lAvecAttrTrim = false, lValue = aEstCB ? false : '', lDisabled = false, lReadOnly = false, lInfosToDisplay = null, lInfosFromDisplay = null, lFuncExitChange = null, lEstTexteBrut = false;
            const lEstInputTime = aAttributType === 'time';
            const lSaveValues = {}
              , lRefresh = aContexteCourant.contexte.refresh
              , lParametres = {
                node: aContexteCourant.node,
                controleur: aContexteCourant.controleur,
                data: aContexteCourant.data,
                estCB: aEstCB,
                saveValues: lSaveValues,
                eventActif: true,
                saveDisabled: false,
                getterValue: null,
                getterValueInit: null,
                setterValue: null,
                getterDisabled: null,
                getterReadOnly: null,
                toDisplay: null,
                fromDisplay: null,
                declencherExitChange: false,
                contentEditable: _estNodeContentEditable(aContexteCourant.node)
            };
            if (lParametres.contentEditable && aMaxLength > 0) {
                aMaxLength = 0;
            }
            if (aContexteCourant.node.hasAttribute('ie-etatsaisie')) {
                aContexteCourant.etatSaisie = true;
                aContexteCourant.node.removeAttribute('ie-etatsaisie');
                lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-etatsaisie');
            }
            lModele = _getModel(aContexteCourant);
            if (lModele) {
                if (lModele) {
                    Object.assign(lParametres, {
                        modele: lModele,
                        modeleArg: aContexteCourant.data.$modeleParsed
                    });
                    if (!_affecterGetterSetterInputModel(lParametres, aContexteCourant, aEstCB)) {
                        return;
                    }
                    if (lParametres.infosExitChange) {
                        aContexteCourant.data.forceExitChange = function(aParametresExit) {
                            if (lFuncExitChange) {
                                lFuncExitChange(aParametresExit);
                            }
                        }
                        ;
                    }
                    lValue = lParametres.getterValueInit ? lParametres.getterValueInit() : lParametres.getterValue();
                    if (lParametres.getterDisabled) {
                        lDisabled = lParametres.saveDisabled = !!lParametres.getterDisabled();
                        aJNode.inputDisabled(lDisabled);
                    }
                    if (lParametres.getterReadOnly) {
                        lReadOnly = lParametres.saveReadOnly = !!lParametres.getterReadOnly();
                        aJNode.prop('readonly', lReadOnly);
                    }
                    if (aEstCB) {
                        lValue = !!lValue;
                        lSaveValues.value = lSaveValues.inputValue = lValue;
                        aJNode.inputChecked(lValue);
                    } else {
                        lValue = lValue || '';
                        lSaveValues.value = lSaveValues.inputValue = lValue;
                        lAvecAttrTrim = aContexteCourant.node.hasAttribute('ie-trim');
                        if (lAvecAttrTrim) {
                            lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-trim');
                            aContexteCourant.node.removeAttribute('ie-trim');
                        }
                        lTrim = (aAttributType !== 'password' && lAvecAttrTrim) || aContexteCourant.estIndicatifTelephone;
                        if (lParametres.contentEditable) {
                            lEstTexteBrut = true;
                        } else if (aContexteCourant.estTelephone || aContexteCourant.estIndicatifTelephone || aAttributType === 'password' || aAttributType === 'email') {
                            lEstTexteBrut = true;
                        } else if (aContexteCourant.node.hasAttribute('ie-textbrut')) {
                            lEstTexteBrut = true;
                            aContexteCourant.node.removeAttribute('ie-textbrut');
                            lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-textbrut');
                        }
                        if (!uTailleMaxTelephone) {
                            uTailleMaxTelephone = ObjetChaine_1.GChaine.maskTelephone.replace(/ /g, '').length;
                        }
                        lInfosToDisplay = _getAccesParametresModel('toDisplay', aContexteCourant);
                        lInfosFromDisplay = _getAccesParametresModel('fromDisplay', aContexteCourant);
                        lParametres.toDisplay = function(aChaine) {
                            if (!lEstTexteBrut) {
                                aChaine = ObjetChaine_1.GChaine.enleverEntites(aChaine);
                            }
                            if (aContexteCourant.estIndicatifTelephone) {
                                aChaine = '+ ' + aChaine.replace(IEHtml.REGEXP_INDICATIF_TELEPHONE, '').slice(0, IEHtml.TAILLEMAX_INDICATIF_TELEPHONE);
                            }
                            if (aContexteCourant.estTelephone && ObjetChaine_1.GChaine && ObjetChaine_1.GChaine.formatTelephone) {
                                aChaine = ObjetChaine_1.GChaine.formatTelephone(aChaine.replace(IEHtml.REGEXP_TELEPHONE, '').slice(0, uTailleMaxTelephone));
                            }
                            if (lInfosToDisplay && lInfosToDisplay.estFonction) {
                                aChaine = lInfosToDisplay.callback([aChaine, aContexteCourant.node, aContexteCourant.data]);
                            }
                            return aChaine;
                        }
                        ;
                        lParametres.fromDisplay = function(aChaine) {
                            if (lInfosFromDisplay && lInfosFromDisplay.estFonction) {
                                aChaine = lInfosFromDisplay.callback([aChaine, aContexteCourant.node, aContexteCourant.data]);
                            }
                            if (!lEstTexteBrut) {
                                aChaine = ObjetChaine_1.GChaine.ajouterEntites(aChaine);
                            }
                            if (lTrim && aChaine.trim) {
                                aChaine = aChaine.trim();
                            }
                            if (aContexteCourant.estIndicatifTelephone) {
                                aChaine = aChaine.replace(/\+| /g, '').replace(IEHtml.REGEXP_INDICATIF_TELEPHONE, '').slice(0, IEHtml.TAILLEMAX_INDICATIF_TELEPHONE);
                            }
                            if (aContexteCourant.estTelephone) {
                                aChaine = aChaine.replace(/ /g, '').replace(IEHtml.REGEXP_TELEPHONE, '').slice(0, uTailleMaxTelephone);
                            }
                            return aChaine;
                        }
                        ;
                        lValue = lSaveValues.inputValue = lParametres.toDisplay(lValue);
                        if (lParametres.contentEditable) {
                            aContexteCourant.node.innerHTML = lValue;
                        } else {
                            aContexteCourant.node.value = lValue;
                        }
                        lPattern = aContexteCourant.node.getAttribute('ie-pattern');
                        lMatchPattern = lPattern && lPattern.match ? lPattern.match(C_RegExp_Match) : null;
                        if (lMatchPattern) {
                            const lRegExp = new RegExp(lMatchPattern[1],lMatchPattern[2]);
                            lPatternValidateRegex = function(value) {
                                return !value || lRegExp.test(value);
                            }
                            ;
                            aContexteCourant.$patternOK = lPatternValidateRegex(lSaveValues.inputValue);
                        }
                        if (lPattern) {
                            lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-pattern="' + lPattern + '"');
                            aContexteCourant.node.removeAttribute('ie-pattern');
                        }
                    }
                }
            }
            if (!aEstCB) {
                lMask = aContexteCourant.node.getAttribute('ie-mask');
                if (lMask) {
                    lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-mask="' + lMask + '"');
                    aContexteCourant.node.removeAttribute('ie-mask');
                    if (lParametres.contentEditable) {
                        lMask = '';
                    }
                }
                if (lMask && !lModele) {
                    lSaveValues.value = aContexteCourant.node.value;
                }
                lMatchMask = lMask && lMask.match ? lMask.match(C_RegExp_Match) : null;
            }
            if (lModele) {
                _abonnerRefresh( () => {
                    _verificationInputModel(aContexteCourant, lParametres, lPatternValidateRegex);
                }
                , aContexteCourant.node, aContexteCourant);
            }
            if (lModele || (!aEstCB && (lMatchMask || aMaxLength))) {
                aJNode.on(aEstCB ? IEHtml.C_eventsModifyCheckbox : IEHtml.C_eventsModifyInput, function(aEvent) {
                    if (!lParametres.eventActif) {
                        return;
                    }
                    let lNewValue = null, lNewInputValue = null, lValueInput, lCaret = null;
                    if (aEstCB) {
                        lNewValue = $(this).is(':checked');
                    } else {
                        lValueInput = lParametres.contentEditable ? this.innerHTML : this.value;
                        lNewValue = lValueInput;
                        lNewInputValue = lNewValue;
                        if (lParametres.interrompreEvent && lParametres.interrompreEvent.callback([aEvent, aContexteCourant.node])) {
                            return false;
                        }
                        if (aMaxLength > 0 && lNewValue.length > aMaxLength && !lParametres.contentEditable) {
                            const lTop = $(this).scrollTop();
                            this.value = lNewValue = lNewValue.slice(0, aMaxLength);
                            $(this).scrollTop(lTop);
                        }
                        if (lMatchMask && lNewValue.length > 0) {
                            let lSanitize = '';
                            let lCharMask = '';
                            const lRegExpMask = new RegExp(lMatchMask[1],lMatchMask[2]);
                            for (let lIx = 0; lIx < lNewValue.length; lIx++) {
                                lCharMask = lNewValue.charAt(lIx);
                                if (!lRegExpMask.test(lCharMask)) {
                                    lSanitize += lCharMask;
                                }
                            }
                            if (lParametres.fromDisplay) {
                                lNewValue = lParametres.fromDisplay(lNewValue);
                            }
                            if (lSanitize !== lNewValue) {
                                const lNomProp = (lParametres.contentEditable ? 'innerHTML' : 'value');
                                if (lSanitize === lSaveValues.value) {
                                    if (lParametres.toDisplay) {
                                        this[lNomProp] = lParametres.toDisplay(lSaveValues.value);
                                    } else {
                                        this[lNomProp] = lSaveValues.value;
                                    }
                                    return false;
                                }
                                lNewValue = lSanitize;
                                lNewInputValue = lSanitize;
                                if (lParametres.toDisplay) {
                                    this[lNomProp] = lNewInputValue = lParametres.toDisplay(lNewValue);
                                } else {
                                    this[lNomProp] = lNewValue;
                                }
                            }
                        } else if (lParametres.fromDisplay) {
                            lNewValue = lParametres.fromDisplay(lNewValue);
                        }
                        if (lParametres.toDisplay) {
                            lNewInputValue = lParametres.toDisplay(lNewValue);
                            if ((lTrim && lNewInputValue.trim() !== lValueInput.trim()) || (!lTrim && lNewInputValue !== lValueInput)) {
                                lCaret = null;
                                if (aContexteCourant.estTelephone) {
                                    lCaret = _caret(this);
                                    if (lValueInput.length < lSaveValues.inputValue.length) {
                                        lCaret.begin = Math.max(0, lCaret.begin - (lSaveValues.inputValue.length - lNewInputValue.length) + 1);
                                        if (lNewInputValue.charAt(lCaret.begin - 1) === ' ') {
                                            lCaret.begin -= 1;
                                        }
                                        lCaret.change = true;
                                    } else {
                                        if (lNewInputValue.length < lSaveValues.inputValue.length) {
                                            lCaret.begin -= lValueInput.length - lNewInputValue.length + 1;
                                        }
                                        if (lNewInputValue === lSaveValues.inputValue) {
                                            lCaret.begin -= lValueInput.length - lNewInputValue.length;
                                        } else if (lNewInputValue.charAt(lCaret.begin - 1) === ' ') {
                                            lCaret.begin += 1;
                                        } else if (lNewInputValue.length > lSaveValues.inputValue.length && lCaret.begin > lSaveValues.inputValue.length) {
                                            lCaret.begin = lNewInputValue.length;
                                        }
                                        lCaret.change = true;
                                    }
                                }
                                if (lParametres.contentEditable) {
                                    this.innerHTML = lNewInputValue;
                                } else {
                                    this.value = lNewInputValue;
                                }
                                if (lCaret && lCaret.change) {
                                    _caret(this, lCaret.begin);
                                }
                            }
                        }
                    }
                    if (lSaveValues.value !== lNewValue) {
                        let lPatternOK, lCloneSave;
                        if (lModele) {
                            lPatternOK = true;
                            if (lPatternValidateRegex) {
                                lPatternOK = lPatternValidateRegex(lNewValue);
                                aContexteCourant.$patternOK = lPatternOK;
                            }
                            lCloneSave = MethodesObjet_1.MethodesObjet.dupliquer(lSaveValues);
                        }
                        lParametres.declencherExitChange = true;
                        lSaveValues.value = lNewValue;
                        lSaveValues.inputValue = lNewInputValue;
                        if (aContexteCourant.etatSaisie) {
                            if (aContexteCourant.controleur && aContexteCourant.controleur.instance && _estInstanceIdentite(aContexteCourant.controleur.instance)) {
                                aContexteCourant.controleur.instance.setEtatSaisie(true);
                            } else {
                                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.etatSaisie, true);
                            }
                        }
                        if (lModele) {
                            const lParametresSetValue = {
                                node: this,
                                event: aEvent,
                                value: lNewValue,
                                inputValue: lNewInputValue,
                                textBrut: lEstTexteBrut,
                                oldValues: lCloneSave,
                                patternOK: lPatternOK,
                                selectionTexte: false
                            };
                            if (lEstInputTime && uFuncDate.parseHeureMinute) {
                                lParametresSetValue.time = uFuncDate.parseHeureMinute(lNewValue);
                            }
                            if (lParametres.setterValue) {
                                lParametres.setterValue(lNewValue, lParametresSetValue);
                            }
                            aContexteCourant.data.$ignoreRefresh = true;
                            try {
                                lRefresh();
                            } finally {
                                delete aContexteCourant.data.$ignoreRefresh;
                            }
                            if (aContexteCourant.data.$destroy === true) {
                                return;
                            }
                            _verificationInputModel(aContexteCourant, lParametres);
                            if (lParametresSetValue.selectionTexte && !aEstCB) {
                                aContexteCourant.node.select();
                            }
                        }
                    }
                });
            }
            if (lTrim) {
                aJNode.on('change blur', function() {
                    const lValue = lParametres.contentEditable ? this.innerHTML : this.value;
                    const lValueTrim = lValue.trim();
                    if (lValueTrim !== lValue) {
                        lSaveValues.value = lValueTrim;
                        lSaveValues.inputValue = lValueTrim;
                        if (lParametres.contentEditable) {
                            this.innerHTML = lValueTrim;
                        } else {
                            this.value = lValueTrim;
                        }
                    }
                });
            }
            if (lParametres.infosExitChange) {
                lFuncExitChange = function(aParamsExit) {
                    const lParametresExitChange = Object.assign(aParamsExit || {}, {
                        node: aContexteCourant.node,
                        data: aContexteCourant.data,
                        event: null
                    });
                    let lValue = lSaveValues.value;
                    if (lEstInputTime && uFuncDate.parseHeureMinute) {
                        const lTime = uFuncDate.parseHeureMinute(lSaveValues.value);
                        lParametresExitChange.time = lTime;
                        const lStepStr = aContexteCourant.node.getAttribute('step');
                        if (lStepStr) {
                            const lStepInputTime_enM = Math.floor(parseInt(lStepStr, 10) / 60);
                            if (lStepInputTime_enM > 0) {
                                const lReste = (lTime.minute % lStepInputTime_enM);
                                if (lReste <= (lStepInputTime_enM / 2)) {
                                    lTime.minute = (lTime.minute - lReste);
                                } else {
                                    lTime.minute = (lTime.minute + (lStepInputTime_enM - lReste));
                                }
                            }
                        }
                        const lMinInputTimeStr = aContexteCourant.node.getAttribute('min');
                        if (lMinInputTimeStr) {
                            const lTimeMin = uFuncDate.parseHeureMinute(lMinInputTimeStr);
                            if (lTimeMin.ok) {
                                if (lTimeMin.heure > lTime.heure) {
                                    lTime.heure = lTimeMin.heure;
                                    lTime.minute = lTimeMin.minute;
                                } else if (lTimeMin.heure === lTime.heure && lTimeMin.minute > lTime.minute) {
                                    lTime.minute = lTimeMin.minute;
                                }
                            }
                        }
                        const lMaxInputTimeStr = aContexteCourant.node.getAttribute('max');
                        if (lMaxInputTimeStr) {
                            const lTimeMax = uFuncDate.parseHeureMinute(lMaxInputTimeStr);
                            if (lTimeMax.ok) {
                                if (lTime.heure > lTimeMax.heure) {
                                    lTime.heure = lTimeMax.heure;
                                    lTime.minute = lTimeMax.minute;
                                } else if (lTime.heure === lTimeMax.heure && lTime.minute > lTimeMax.minute) {
                                    lTime.minute = lTimeMax.minute;
                                }
                            }
                        }
                        const lDateModif = new Date();
                        lDateModif.setHours(lTime.heure);
                        lDateModif.setMinutes(lTime.minute);
                        lValue = uFuncDate.formatDate(lDateModif, '%hh:%mm');
                    }
                    lParametres.infosExitChange.callback([lValue, lParametresExitChange]);
                    _verificationInputModel(aContexteCourant, lParametres, lPatternValidateRegex);
                    lRefresh();
                    if (lParametresExitChange.selectionTexte && !aEstCB) {
                        aContexteCourant.node.select();
                    }
                }
                ;
                let lEventsExitChange = 'blur focusout';
                if (!lEstInputTime) {
                    lEventsExitChange += ' change';
                }
                aJNode.on(lEventsExitChange, (aEvent) => {
                    if (!lParametres.declencherExitChange) {
                        return;
                    }
                    lParametres.declencherExitChange = false;
                    lFuncExitChange({
                        node: aJNode.get(0),
                        event: aEvent
                    });
                }
                );
            }
            lOutils.abonneNodeEtNodeAfter(lParametres.infosNode, lParametres.infosNodeAfter, aContexteCourant);
            if (lParametres.infoskeyupEnter) {
                aJNode.on('keyup', (aEvent) => {
                    if (aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                        lParametres.infoskeyupEnter.callback([aEvent, aContexteCourant.node]);
                        lRefresh();
                    }
                }
                );
            }
            if (!aEstCB && IE.estMobile && aJNode.is('input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea')) {
                aJNode.on({
                    'focus'() {
                        _findElementPourGererActive_mobile(this).addClass('active');
                    },
                    'blur'() {
                        if (this.value.length === 0 && !aContexteCourant.node.getAttribute('placeholder')) {
                            _findElementPourGererActive_mobile(this).removeClass('active');
                        }
                    },
                    'change input'() {
                        if (this.value.length !== 0 || aContexteCourant.node.getAttribute('placeholder')) {
                            _findElementPourGererActive_mobile(this).addClass('active');
                        }
                    }
                });
            }
        }
        function _findElementPourGererActive_mobile(aNode) {
            return $(aNode).closest('.input-field').find('>label, >.prefix');
        }
        function _gererInputCB(aContexteCourant, aAttributType) {
            _gererInputModele(aContexteCourant, $(aContexteCourant.node), true, aAttributType);
        }
        function _gererMaxLengthInputText(aContexteCourant, aNode, aJNode, aEstInput, aAttributType) {
            const lAttrMaxLength = aNode.getAttribute('maxlength');
            let lMaxLength = 0;
            if (aEstInput) {
                if (aContexteCourant.estIndicatifTelephone || aContexteCourant.estTelephone) {
                    return;
                }
                if (IEHtml.MAX_LENGTH_Default === 0) {
                    return;
                }
                if (!lAttrMaxLength && (aAttributType === 'text' || aAttributType === '' || aAttributType === 'number' || aAttributType === 'email' || aAttributType === 'url')) {
                    aJNode.attr('maxlength', IEHtml.MAX_LENGTH_Default);
                } else if (parseInt(lAttrMaxLength, 10) === 0) {
                    aNode.removeAttribute('maxlength');
                }
            } else {
                lMaxLength = lAttrMaxLength ? parseInt(lAttrMaxLength, 10) : IEHtml.MAX_LENGTH_Default;
                if (isNaN(lMaxLength)) {
                    lMaxLength = IEHtml.MAX_LENGTH_Default;
                }
            }
            return lMaxLength;
        }
        function _actualiserClassScrollTextArea(aNode) {
            if (aNode.scrollHeight > aNode.offsetHeight) {
                $(aNode).addClass('has-scroll');
            } else {
                $(aNode).removeClass('has-scroll');
            }
        }
        function _gererInputText(aContexteCourant, aAttributType) {
            let lJNode = $(aContexteCourant.node);
            const lEstInput = aContexteCourant.nodeName === 'input';
            const lEstTextArea = aContexteCourant.nodeName === 'textarea';
            if (lEstInput && aContexteCourant.node.hasAttribute('ie-indicatiftel')) {
                aContexteCourant.estIndicatifTelephone = true;
                lJNode.addClass('ie-indicatiftel');
                lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-indicatiftel');
                aContexteCourant.node.removeAttribute('ie-indicatiftel');
            } else if (lEstInput && aContexteCourant.node.hasAttribute('ie-telephone')) {
                aContexteCourant.estTelephone = true;
                lJNode.addClass('ie-telephone');
                lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-telephone');
                aContexteCourant.node.removeAttribute('ie-telephone');
            }
            const lMaxLength = lEstInput || lEstTextArea ? _gererMaxLengthInputText(aContexteCourant, aContexteCourant.node, lJNode, lEstInput, aAttributType) : 0;
            if (lEstInput && aAttributType === 'time') {
                aContexteCourant.node.setAttribute('ie-mask', '/[^0-9:]/i');
                if (IE.estMobile) {
                    aContexteCourant.node.setAttribute('pattern', '[0-9]{2}:[0-9]{2}');
                }
                aContexteCourant.node.setAttribute('size', '3');
            }
            if (lEstInput || lEstTextArea || aContexteCourant.data.$modeleValue || aContexteCourant.data.$modelObjectJSX) {
                _gererInputModele(aContexteCourant, lJNode, false, aAttributType, lMaxLength);
            }
            if (lEstTextArea) {
                lOutils.surInjectionHtml(aContexteCourant, () => {
                    _actualiserClassScrollTextArea(aContexteCourant.node);
                }
                , true);
                _abonnerRefresh( () => {
                    _actualiserClassScrollTextArea(aContexteCourant.node);
                }
                , aContexteCourant.node, aContexteCourant);
                $(aContexteCourant.node).on(IEHtml.C_eventsModifyInput, function() {
                    _actualiserClassScrollTextArea(this);
                });
            }
            lJNode = null;
        }
        function _getDataDeNode(aNode) {
            const lNodeValue = aNode.getAttribute('ie-data');
            let lData = null;
            if (lNodeValue && lNodeValue.length > 2 && lNodeValue.charAt(0) === '{' && lNodeValue.charAt(lNodeValue.length - 1) === '}') {
                try {
                    lData = ObjetJSON_1.ObjetJSON.parse(lNodeValue, {
                        ignorerEntites: true
                    });
                } catch (e) {
                    lData = null;
                }
            }
            return lData;
        }
        function _traiterIF(aNode, aNodeParent, aControleur, aContexte, aContexteCourant) {
            const lValueAttr = aNode.getAttribute('ie-if');
            aNode.removeAttribute('ie-if');
            aContexteCourant.node = aNode;
            if (!lValueAttr) {
                return true;
            }
            _remplirDataModel(aContexteCourant);
            const lInfos = _getAccesParametres(lValueAttr, 'ie-if', aContexteCourant);
            let lValue = !!lInfos.callback([aContexteCourant.node]);
            let lOldValue = lValue;
            const lChaineData = 'ie-if';
            const lNodeComm = document.createComment(lChaineData);
            let lEstInit = false;
            let lEstDestroyed = false;
            aNode.parentNode.insertBefore(lNodeComm, aNode);
            const lRefreshNode = () => {
                if (!lEstInit) {
                    return;
                }
                if (lEstDestroyed) {
                    return;
                }
                try {
                    if (lValue) {
                        if (!aNodeParent || !aNodeParent.contains || aNodeParent.contains(aContexteCourant.node) || !aNodeParent.contains(lNodeComm)) {
                            return;
                        }
                        if (lNodeComm.nextSibling) {
                            aNodeParent.insertBefore(aContexteCourant.node, lNodeComm.nextSibling);
                        } else {
                            aNodeParent.appendChild(aContexteCourant.node);
                        }
                    } else {
                        aNodeParent.removeChild(aContexteCourant.node);
                    }
                } catch (e) {}
            }
            ;
            _abonnerRefresh( () => {
                lValue = !!lInfos.callback([aContexteCourant.node]);
                if (lOldValue !== lValue) {
                    lOldValue = lValue;
                    lRefreshNode();
                }
            }
            , aNodeParent, aContexteCourant, () => {
                if (lEstDestroyed) {
                    return;
                }
                lEstDestroyed = true;
                if (!lValue) {
                    $(aContexteCourant.node).remove();
                }
            }
            , () => {
                if (!lEstDestroyed && aNodeParent && aNodeParent.contains && !aNodeParent.contains(lNodeComm)) {
                    return true;
                }
                return false;
            }
            );
            lOutils.surInjectionHtml(aContexteCourant, (aMeasure) => {
                lEstInit = true;
                if (!lValue) {
                    lRefreshNode();
                }
            }
            , true);
            return true;
        }
        function _addNodeDeREPEAT(aNodeParent, aControleur, aCloneModele, aNomVariableBoucle, aIndice, aInfosAcces, aNodeComm, aContexte, aArrayNodes, aInvocateur, aInitialisationRepeat) {
            let lNodeAvant;
            lNodeAvant = aNodeComm;
            if (aIndice > 0) {
                lNodeAvant = aArrayNodes[aIndice - 1];
            }
            if (!aContexte.repeat) {
                aContexte.repeat = {};
            }
            const lContexte = Object.assign({}, aContexte)
              , lContexteBoucles = {};
            if (!lContexte.eventsInjectionHtml) {
                lContexte.eventsInjectionHtml = aContexte.eventsInjectionHtml = [];
            }
            lContexteBoucles[aNomVariableBoucle] = {
                indice: aIndice,
                arguments: aInfosAcces.args,
                getterArray: function() {
                    return aInfosAcces.callback([]) || [];
                }
            };
            lContexte.repeat = Object.assign(lContexteBoucles, aContexte.repeat);
            if (aInitialisationRepeat) {
                const lNodeClone = aCloneModele.cloneNode(true);
                aNodeParent.insertBefore(lNodeClone, lNodeAvant.nextSibling);
                aArrayNodes[aIndice] = _compileNode(lNodeClone, aNodeParent, aControleur, lContexte, aInvocateur);
            } else {
                const lParams = {
                    element: aNodeParent,
                    html: aCloneModele.cloneNode(true),
                    controleur: aControleur,
                    contexte: lContexte,
                    invocateur: aInvocateur,
                    childNodes: null
                };
                _injectEtCompilNode(lParams);
                aArrayNodes[aIndice] = _transfererFragmentDansHTML(lParams.childNodes, aNodeParent, lNodeAvant.nextSibling);
                lParams.childNodes = null;
            }
        }
        function _getDiffTab(aTabOld, aTabNew) {
            const lLength = Math.max(aTabOld.length, aTabNew.length)
              , lResult = [];
            for (let i = 0; i < lLength; i++) {
                if (aTabOld[i] !== aTabNew[i]) {
                    lResult[i] = {
                        supprimer: true,
                        ajouter: aTabNew[i] !== null && aTabNew[i] !== undefined
                    };
                }
            }
            return lResult;
        }
        function _traiterREPEAT(aNode, aNodeParent, aControleur, aContexte, aData) {
            let lValueAttr = aNode.getAttribute('ie-repeat');
            aNode.removeAttribute('ie-repeat');
            if (!lValueAttr) {
                return true;
            }
            if (!aControleur) {
                return true;
            }
            const lTab = lValueAttr.split('in');
            if (lTab.length !== 2) {
                return true;
            }
            lValueAttr = lTab[1].trim();
            const lNomVariableBoucle = lTab[0].trim();
            if (!aContexte.repeat) {
                aContexte.repeat = {};
            }
            if (aContexte.repeat[lNomVariableBoucle]) {
                return true;
            }
            const lContexteCourant = _getContexteCourant(aControleur, aContexte, aNode, aData);
            const lInfos = _getAccesParametres(lValueAttr, 'ie-repeat', lContexteCourant);
            let lArrayValue = [].concat(lInfos.callback([]) || []);
            const lChaineData = 'ie-repeat';
            const lNodeComm = document.createComment(lChaineData);
            const lArrayNodes = [];
            const lArrayComms = [];
            const lCloneModele = aNode.cloneNode(true);
            aNode.parentNode.insertBefore(lNodeComm, aNode);
            const lInvocateur = new Invocateur_1.ObjetInvocateur();
            _abonnerRefresh( () => {
                const lNewArrayValue = lInfos.callback([]) || [];
                const lDiff = _getDiffTab(lArrayValue, lNewArrayValue);
                let lArrayRemove;
                let lAvecModif = false;
                let lPreInjectionHtml;
                if (lDiff.length > 0) {
                    lArrayRemove = [];
                    for (let i = 0; i < lDiff.length; i++) {
                        if (lDiff[i] && lDiff[i].supprimer) {
                            lAvecModif = true;
                            if (!lPreInjectionHtml) {
                                lPreInjectionHtml = _preInjectionHTML(aNodeParent, null);
                            }
                            lArrayRemove.push(lArrayNodes[i]);
                            lArrayNodes[i] = null;
                            if (i > 0 && lArrayComms[i]) {
                                lArrayRemove.push(lArrayComms[i]);
                                lArrayComms[i] = null;
                            }
                        }
                    }
                    if (lArrayRemove.length > 0) {
                        $(lArrayRemove).remove();
                    }
                    for (let i = 0; i < lDiff.length; i++) {
                        if (lDiff[i] && lDiff[i].ajouter) {
                            lAvecModif = true;
                            if (!lPreInjectionHtml) {
                                lPreInjectionHtml = _preInjectionHTML(aNodeParent, null);
                            }
                            _addNodeDeREPEAT(aNodeParent, aControleur, lCloneModele, lNomVariableBoucle, i, lInfos, lNodeComm, aContexte, lArrayNodes, lInvocateur);
                        }
                    }
                    lArrayValue = [].concat(lNewArrayValue);
                    if (lAvecModif && lPreInjectionHtml) {
                        _finaliserInjectionHTML(lPreInjectionHtml, aContexte);
                    }
                }
                lInvocateur.evenement(C_id_event_iemodel);
            }
            , aNodeParent, lContexteCourant, null, () => {
                if (aNodeParent && aNodeParent.contains && !aNodeParent.contains(lNodeComm)) {
                    return true;
                }
                return false;
            }
            );
            $(aNode).remove();
            for (let i = 0; i < lArrayValue.length; i++) {
                _addNodeDeREPEAT(aNodeParent, aControleur, lCloneModele, lNomVariableBoucle, i, lInfos, lNodeComm, aContexte, lArrayNodes, lInvocateur, true);
            }
            return false;
        }
        function _compileNode(aNode, aNodeParent, aControleur, aContexte, aInvocateur, aProfondeur) {
            let lResultBalise, lNodeName, lNode = aNode, lData = null, lAvecAttributData = false, lJSONDebugData, lNameAttribut, lAvecCompilFils = true;
            const lProfondeur = aProfondeur || 0;
            const lContexteCourant = _getContexteCourant(aControleur, aContexte, aNode, null, aInvocateur);
            if (lProfondeur > 1000) {
                return;
            }
            const lNodeType = lNode.nodeType;
            lNodeName = lNode.nodeName;
            if (lNodeType === 1 && !!lNodeName) {
                lNodeName = lNodeName ? lNodeName.toLowerCase() : '';
                if (!aContexte.refresh) {
                    aContexte.refresh = function() {
                        if (aControleur && aControleur.$refresh) {
                            return aControleur.$refresh(true);
                        }
                        return IEHtml.refresh(true);
                    }
                    ;
                }
                lJSONDebugData = null;
                lData = _getDataDeNode(lNode);
                lAvecAttributData = !!lData;
                if (!lData) {
                    lData = {};
                } else {}
                let lAvecIeRepeat = false;
                if (aNode.hasAttribute('ie-repeat')) {
                    lAvecIeRepeat = true;
                    if (!_traiterREPEAT(aNode, aNodeParent, aControleur, aContexte, lData)) {
                        return;
                    }
                }
                lContexteCourant.data = lData;
                lContexteCourant.nodeName = lNodeName;
                if (aNode.hasAttribute('ie-if')) {
                    if (!lAvecIeRepeat && !_traiterIF(aNode, aNodeParent, aControleur, aContexte, lContexteCourant)) {
                        return;
                    }
                }
                _getModel(lContexteCourant);
                let lAvecTransformationNoeud = !!uBalises[lNodeName];
                let lNomBaliseTransform = lNodeName;
                if (!lAvecTransformationNoeud) {
                    for (lNameAttribut in uBalises) {
                        if (lNode.hasAttribute(lNameAttribut)) {
                            lAvecTransformationNoeud = true;
                            lNomBaliseTransform = lNameAttribut;
                            lNode.removeAttribute(lNameAttribut);
                            break;
                        }
                    }
                }
                if (lAvecTransformationNoeud) {
                    lResultBalise = uBalises[lNomBaliseTransform](lContexteCourant, lOutils);
                    lAvecCompilFils = !lResultBalise || lResultBalise.avecCompileFils !== false;
                    if (lResultBalise && lResultBalise.node) {
                        lNode = lResultBalise.node;
                        lContexteCourant.node = lNode;
                        lNodeName = lNode.nodeName ? lNode.nodeName.toLowerCase() : '';
                        lContexteCourant.nodeNameBefore = lContexteCourant.nodeName;
                        lContexteCourant.nodeName = lNodeName;
                    }
                }
                const lEstNodeInput = lNodeName === 'input';
                let lAttributType = '';
                if (lEstNodeInput) {
                    lAttributType = (lNode.getAttribute('type') || '').toLowerCase();
                }
                if (lEstNodeInput && (lAttributType === 'radio' || lAttributType === 'checkbox')) {
                    if (!lResultBalise || !lResultBalise.ignorerGererInputCB) {
                        _gererInputCB(lContexteCourant, lAttributType);
                    }
                } else if (lEstNodeInput || lNodeName === 'textarea' || _estNodeContentEditable(lNode)) {
                    if (!lResultBalise || !lResultBalise.ignorerInputText) {
                        _gererInputText(lContexteCourant, lAttributType);
                    }
                }
                if (lData && !$.isEmptyObject(lData)) {
                    $(lNode).ieData(lData);
                    if (lAvecAttributData) {
                        if (lJSONDebugData) {
                            lOutils.addCommentaireDebug(lNode, 'ie-data="' + lJSONDebugData + '"');
                        }
                        lNode.removeAttribute('ie-data');
                    }
                }
                for (lNameAttribut in uAttributs) {
                    if (lNode.hasAttribute(lNameAttribut)) {
                        const lAttrValue = lNode.getAttribute(lNameAttribut);
                        try {
                            const lParametresCompile = {};
                            lNode.removeAttribute(lNameAttribut);
                            uAttributs[lNameAttribut](lContexteCourant, lNodeName, lAttrValue, lOutils, lParametresCompile, lNameAttribut);
                            if (lAvecCompilFils) {
                                lAvecCompilFils = lParametresCompile.avecCompileFils !== false;
                            }
                        } catch (e) {}
                    }
                }
                for (const lClass of Array.from(lNode.classList)) {
                    if (uClassesCss[lClass]) {
                        try {
                            const lParametresCompile = {};
                            uClassesCss[lClass](lContexteCourant, lNodeName, lOutils, lParametresCompile);
                            if (lAvecCompilFils) {
                                lAvecCompilFils = lParametresCompile.avecCompileFils !== false;
                            }
                        } catch (e) {}
                    }
                }
                _controleAccessibilite(lNode, lNodeName, lContexteCourant);
                if (lAvecCompilFils && lNode.childNodes && lNode.childNodes.length > 0) {
                    _compile(lNode.childNodes, lNode, aControleur, aContexte, aInvocateur, lProfondeur + 1);
                }
                return lContexteCourant.node;
            }
        }
        function _controleAccessibilite(aNode, aNodeName, aContexteCourant) {
            var _a, _b;
            const lGetEstDansTiny = () => !!aNode.closest(`.${Divers_css_1.StylesDivers.tinyView}`);
            if (aNodeName === 'i' && !aNode.hasAttribute('role') && (aNode.hasAttribute('aria-label') || aNode.hasAttribute('aria-labelledby'))) {
                aNode.setAttribute('role', 'img');
                if (!lGetEstDansTiny()) {
                    IE.log.addLog(`Balise i avec aria-label/labelledby a role img manquant - ajout automatiquement (a corriger) : ${aNode.outerHTML}`, null, IE.log.genre.Avertissement);
                }
            }
            if (aNodeName === 'ul' && !aNode.hasAttribute('role') && !aNode.hasAttribute('tabindex') && !aNode.hasAttribute('aria-label') && !aNode.hasAttribute('aria-labelledby') && !aNode.classList.contains(Divers_css_1.StylesDivers.browserDefault)) {
                _addCommentaireDebug(aNode, `(WAI) Controle si ul avec 1 fils li ou vide => role="presentation" sur ul et li`);
                let lUlAvecRolePresentation = false;
                const lRefreshUL = () => {
                    var _a;
                    let lLiAvecTabInedx = false;
                    const lTabLi = [];
                    for (const lNode of _sliceNodes(aNode.childNodes)) {
                        if (lNode.nodeType === 1 && ((_a = lNode.nodeName) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === 'li') {
                            lTabLi.push(lNode);
                            if (!lLiAvecTabInedx && lNode.hasAttribute('tabindex')) {
                                lLiAvecTabInedx = true;
                            }
                        }
                    }
                    const lRolePresentationNew = !(lTabLi.length > 1) && !lLiAvecTabInedx;
                    if (lUlAvecRolePresentation !== lRolePresentationNew) {
                        lUlAvecRolePresentation = lRolePresentationNew;
                        if (lRolePresentationNew) {
                            aNode.setAttribute('role', 'presentation');
                        } else {
                            aNode.removeAttribute('role');
                        }
                        lTabLi.forEach( (aNodeLI) => {
                            if (lRolePresentationNew) {
                                aNodeLI.setAttribute('role', 'presentation');
                            } else {
                                aNodeLI.removeAttribute('role');
                            }
                        }
                        );
                    }
                }
                ;
                lRefreshUL();
                _abonnerRefresh( () => lRefreshUL(), aNode, aContexteCourant);
            }
        }
        function _compile(aNodeList, aNodeParent, aControleur, aContexte, aInvocateur, aProfondeur) {
            const lProfondeur = aProfondeur || 0;
            if (lProfondeur > 1000) {
                return;
            }
            const lChildNodes = _sliceNodes(aNodeList);
            let lNode;
            for (let i = 0; i < lChildNodes.length; i++) {
                lNode = lChildNodes[i];
                _compileNode(lNode, aNodeParent, aControleur, aContexte, aInvocateur, lProfondeur);
            }
        }
        const IEHtml = {
            initControleur: _initControleur,
            addBalise(aBalise, aFonction) {
                aBalise = aBalise.toLowerCase();
                uBalises[aBalise] = aFonction;
                uNodeNames.push(aBalise);
            },
            addAttribut(aAttribut, aFonction) {
                aAttribut = aAttribut.toLowerCase();
                uAttributs[aAttribut] = aFonction;
                jsx_1.JSXDictionaryCallbacks.addAttrAllowed(aAttribut);
            },
            addClass(aClass, aFonction) {
                uClassesCss[aClass] = aFonction;
            },
            ieData(aObjet) {
                if (!aObjet) {
                    return '';
                }
                const lChaine = ObjetJSON_1.ObjetJSON.toJSON(aObjet, {
                    ignorerEntites: true
                });
                if (!lChaine) {
                    return '';
                }
                return ' ie-data="' + lChaine.replace(/"/g, '&quot;') + '" ';
            },
            async refresh(aForcerSynchrone) {
                if (aForcerSynchrone) {
                    uInvocateur.evenement(C_id_event_iemodel);
                    return;
                }
                if (uPromiseRefresh && !uPromiseRefresh._isFullfilled) {
                    return uPromiseRefresh;
                }
                uPromiseRefresh = new Promise( (aResolve) => {
                    setTimeout( () => {
                        uPromiseRefresh = null;
                        uInvocateur.evenement(C_id_event_iemodel);
                        aResolve();
                    }
                    , 0);
                }
                );
                return uPromiseRefresh;
            },
            injectHTML(aElement, aHtml, aControleur, aIgnorerScroll, aInsererAvantNode, aAvecCommentaireConstructeur, aCommentaireHtmlDebug) {
                return _injectHTML({
                    element: aElement,
                    insererAvantLeNode: aInsererAvantNode,
                    html: aHtml,
                    controleur: aControleur,
                    ignorerScroll: aIgnorerScroll,
                    avecCommentaireConstructeur: aAvecCommentaireConstructeur !== false,
                    commentaireHtmlDebug: aCommentaireHtmlDebug
                });
            },
            injectHTMLParams: _injectHTML,
            empty(aNode) {
                if (aNode && aNode.getElementsByTagName) {
                    $.cleanData(aNode.getElementsByTagName('*'));
                }
                while (aNode && aNode.firstChild) {
                    aNode.removeChild(aNode.firstChild);
                }
            },
            outils: lOutils,
            collectionIdentite: {},
            C_eventsModifyCheckbox: 'IEChecked change input',
            C_eventsModifyInput: 'input change paste cut keydown keypress keyup',
            MAX_LENGTH_Default: 0,
            REGEXP_INDICATIF_TELEPHONE: /[^0-9]/ig,
            TAILLEMAX_INDICATIF_TELEPHONE: 3,
            REGEXP_TELEPHONE: /[^0-9]/ig,
            Styles: {
                debugWAIInputIgnoreAssert: 'd-wai-i'
            }
        };
        _a = Object.assign({}, IEHtml),
        exports.initControleur = _a.initControleur,
        exports.addBalise = _a.addBalise,
        exports.addAttribut = _a.addAttribut,
        exports.addClass = _a.addClass,
        exports.ieData = _a.ieData,
        exports.refresh = _a.refresh,
        exports.injectHTML = _a.injectHTML,
        exports.injectHTMLParams = _a.injectHTMLParams,
        exports.empty = _a.empty,
        exports.outils = _a.outils,
        exports.collectionIdentite = _a.collectionIdentite,
        exports.C_eventsModifyCheckbox = _a.C_eventsModifyCheckbox,
        exports.C_eventsModifyInput = _a.C_eventsModifyInput,
        exports.MAX_LENGTH_Default = _a.MAX_LENGTH_Default,
        exports.REGEXP_INDICATIF_TELEPHONE = _a.REGEXP_INDICATIF_TELEPHONE,
        exports.TAILLEMAX_INDICATIF_TELEPHONE = _a.TAILLEMAX_INDICATIF_TELEPHONE,
        exports.REGEXP_TELEPHONE = _a.REGEXP_TELEPHONE,
        exports.Styles = _a.Styles;
        exports.default = IEHtml;
        const uFuncDate = {
            formatDate: null,
            parseHeureMinute: null
        };
        const setObjetDate = function(aFormatDate, aParseHeureMinute) {
            uFuncDate.formatDate = aFormatDate;
            uFuncDate.parseHeureMinute = aParseHeureMinute;
        };
        exports.setObjetDate = setObjetDate;
        $.fn.extend({
            ieHtml(aHtml, aParametres) {
                const lParametres = {
                    html: aHtml,
                    ignorerScroll: false,
                    controleur: null,
                    instance: null,
                    sansCompile: false,
                    avecCommentaireConstructeur: true,
                    commentaireHtmlDebug: ''
                };
                Object.assign(lParametres, aParametres);
                return this.empty().each(function() {
                    if (lParametres.sansCompile) {
                        this.innerHTML = aHtml;
                    } else {
                        while (this && this.firstChild) {
                            this.removeChild(this.firstChild);
                        }
                        IEHtml.injectHTMLParams(Object.assign({
                            element: this
                        }, lParametres));
                    }
                });
            }
        });
        $.fn.extend({
            ieHtmlAppend(aHtml, aParametres) {
                const lParametres = {
                    ignorerScroll: false,
                    controleur: null,
                    sansCompile: false
                };
                Object.assign(lParametres, aParametres);
                return this.each(function() {
                    if (lParametres.sansCompile) {
                        this.innerHTML += aHtml;
                    } else {
                        IEHtml.injectHTMLParams(Object.assign({
                            element: this,
                            html: aHtml
                        }, lParametres));
                    }
                });
            }
        });
        $.fn.extend({
            ieData(aData) {
                if (arguments.length > 0) {
                    return this.each(function() {
                        $(this).data('ieData', aData);
                    });
                }
                return $(this).data('ieData');
            }
        });
        (function($) {
            let u_SurEventMouse_0x0 = false;
            let u_timer_SurEventMouse_0x0;
            const u_estEventEn0x0 = function(aEvent) {
                return (aEvent.pageX === 0 && aEvent.pageY === 0) || (aEvent.clientX === 0 && aEvent.clientY === 0);
            };
            const lUpdateMouseUp = function(aEvent) {
                u_SurEventMouse_0x0 = false;
                if (u_timer_SurEventMouse_0x0) {
                    clearTimeout(u_timer_SurEventMouse_0x0);
                    u_timer_SurEventMouse_0x0 = null;
                }
                if (u_estEventEn0x0(aEvent)) {
                    u_SurEventMouse_0x0 = true;
                    u_timer_SurEventMouse_0x0 = setTimeout( () => {
                        u_SurEventMouse_0x0 = false;
                        u_timer_SurEventMouse_0x0 = null;
                    }
                    , 100);
                }
            };
            $.fn.extend({
                eventValidation(aCallback, aKeepExistingEvent) {
                    return this.each(function() {
                        if (!aKeepExistingEvent) {
                            $(this).off('.eventValidation');
                        }
                        $(this).on({
                            'mouseup.eventValidation': function(aEvent) {
                                lUpdateMouseUp(aEvent);
                            },
                            'click.eventValidation': function(aEvent) {
                                if (!u_SurEventMouse_0x0 && u_estEventEn0x0(aEvent)) {
                                    return;
                                }
                                u_SurEventMouse_0x0 = false;
                                return aCallback.call(this, aEvent);
                            },
                            'keyup.eventValidation': function(aEvent) {
                                if (aEvent.which === ToucheClavier_1.ToucheClavier.Espace || aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                    return aCallback.call(this, aEvent);
                                }
                            }
                        });
                    });
                }
            });
            $.event.special.validation = {
                setup() {
                    const lJNode = $(this);
                    lJNode.on({
                        'mouseup.validation': function(aEvent) {
                            lUpdateMouseUp(aEvent);
                        },
                        'click.validation': function(aEvent) {
                            if (!u_SurEventMouse_0x0 && u_estEventEn0x0(aEvent)) {
                                return;
                            }
                            u_SurEventMouse_0x0 = false;
                            const lEventSimule = $.Event('validation', Object.assign(aEvent, {
                                type: 'validation',
                                typeOrigine: aEvent.type,
                                originalEvent: aEvent.originalEvent
                            }));
                            return lJNode.trigger(lEventSimule);
                        },
                        'keyup.validation': function(aEvent) {
                            if (aEvent.which === ToucheClavier_1.ToucheClavier.Espace || aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                const lEventSimule = $.Event('validation', Object.assign(aEvent, {
                                    type: 'validation',
                                    typeOrigine: aEvent.type,
                                    originalEvent: aEvent.originalEvent
                                }));
                                return lJNode.trigger(lEventSimule);
                            }
                        }
                    });
                },
                teardown() {
                    $(this).off('mouseup.validation click.validation keyup.validation');
                }
            };
        }
        )(jQuery);
        Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.refreshIEHtml, (aForcerSynchrone=true) => {
            IEHtml.refresh(aForcerSynchrone);
        }
        );
    },
    fn: 'iehtml.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GHtml = exports.ObjetHtml = void 0;
        require("Divers");
        const MethodesObjet_1 = require("MethodesObjet");
        const IEHtml = require("IEHtml");
        const tag_1 = require("tag");
        const ObjetChaine_1 = require("ObjetChaine");
        const cTagsFocusables = ['audio', 'button:not(:disabled)', 'canvas:not(:disabled)', 'details', 'iframe', 'input:not(:disabled)', 'select:not(:disabled)', 'summary', 'textarea:not(:disabled)', 'video'];
        const cAttributsFocusables = ['accesskey', 'contenteditable', 'href', 'tabindex'];
        const cSelectorFocusables = `${cTagsFocusables.join(', ')}, ${cAttributsFocusables.map(a => `[${a}]`).join(', ')}`;
        class ObjetHtml {
            elementExiste(aElement) {
                return !!this.getElement(aElement);
            }
            estElement(aElement) {
                return !!aElement && (aElement.nodeType === 1);
            }
            estDocument(aElement) {
                return !!aElement && (aElement.nodeType === 9);
            }
            estNoeudDeType(aElement, aTypeParent) {
                const lElement = this.getElement(aElement);
                return this.estElement(lElement) && (lElement.nodeName.toUpperCase() === aTypeParent.toUpperCase());
            }
            viderNode(aNode) {
                return IEHtml.empty(aNode);
            }
            getParent(aElement) {
                const lElement = this.getElement(aElement);
                if (this.estElement(lElement)) {
                    if (lElement.parentElement) {
                        return lElement.parentElement;
                    }
                    if (lElement.parentNode) {
                        return lElement.parentNode;
                    }
                }
                return null;
            }
            getParentOverflowNonVisible(aId) {
                const lParent = this.getParent(aId);
                if (lParent && lParent !== document.body) {
                    try {
                        if (global.getComputedStyle(lParent).getPropertyValue('overflow-y') !== 'visible') {
                            return lParent;
                        }
                    } catch (e) {
                        return document.body;
                    }
                    return this.getParentOverflowNonVisible(lParent);
                }
                return document.body;
            }
            getParentScrollable(aId) {
                let lElement = this.getElement(aId);
                try {
                    while (lElement) {
                        if (lElement === document.documentElement) {
                            return lElement;
                        }
                        let lAvecScroll = lElement.scrollTop > 0;
                        if (!lAvecScroll) {
                            const lOverflow = global.getComputedStyle(lElement).getPropertyValue('overflow');
                            lAvecScroll = lOverflow === 'auto' || lOverflow === 'scroll';
                        }
                        if (lAvecScroll) {
                            return lElement;
                        }
                        lElement = this.getParent(lElement);
                    }
                } catch (e) {}
                return null;
            }
            htmlToDOM(aHtml) {
                let lFrag = document.createDocumentFragment();
                let lDiv = document.createElement('div');
                let lNoeudDOM;
                lFrag.appendChild(lDiv);
                lDiv.insertAdjacentHTML('afterbegin', aHtml);
                if (lDiv.childNodes.length > 1) {
                    lNoeudDOM = Array.from(lDiv.childNodes);
                } else {
                    lNoeudDOM = lDiv.firstChild;
                }
                this.viderNode(lDiv);
                lDiv = null;
                lFrag = null;
                return lNoeudDOM;
            }
            insererElementDOM(aElementPere, aElement, aInsererEnPremier) {
                if (this.estElement(aElement) && this.estElement(aElementPere)) {
                    if (aInsererEnPremier && aElementPere.firstChild) {
                        aElementPere.insertBefore(aElement, aElementPere.firstChild);
                    } else {
                        aElementPere.appendChild(aElement);
                    }
                }
            }
            addHtml(aId, aHtml, aParametres) {
                const lElement = this.getElement(aId);
                if (this.elementExiste(lElement) && lElement.appendChild) {
                    const lParametres = Object.assign({}, aParametres);
                    if (lParametres.instance && lParametres.instance.controleur) {
                        lParametres.controleur = lParametres.instance.controleur;
                    }
                    if (lParametres.sansCompile) {
                        lElement.insertAdjacentHTML('beforeend', aHtml);
                    } else {
                        IEHtml.injectHTML(lElement, aHtml, lParametres.controleur, lParametres.ignorerScroll, null, false);
                    }
                }
            }
            supprimerElementDOM(aId) {
                const lElement = this.getElement(aId);
                if (lElement) {
                    $(lElement).remove();
                }
            }
            getElement(aId) {
                if (!aId) {
                    return null;
                }
                if (typeof aId === 'string') {
                    return document.getElementById(aId);
                }
                if (this.estElement(aId) || this.estDocument(aId)) {
                    return aId;
                }
                return null;
            }
            getHtml(aId) {
                const E = this.getElement(aId);
                if (E) {
                    return E.innerHTML;
                }
                return '';
            }
            getValue(aId) {
                const E = this.getElement(aId);
                if (E) {
                    return ObjetChaine_1.GChaine.ajouterEntites(E.value);
                }
                return '';
            }
            estTextNode(aElement) {
                return aElement && (aElement.nodeType === 3);
            }
            getTextesDeNode(aId) {
                let lResult = [];
                try {
                    if (aId instanceof Node && this.estTextNode(aId)) {
                        lResult.push((aId).nodeValue);
                    } else if (aId instanceof Node || MethodesObjet_1.MethodesObjet.isString(aId)) {
                        const lElement = this.getElement(aId);
                        if (this.estTextNode(lElement)) {
                            lResult.push(lElement.nodeValue);
                        } else if (this.estElement(lElement) && lElement.childNodes) {
                            for (let i = 0; i < lElement.childNodes.length; i++) {
                                lResult = lResult.concat(this.getTextesDeNode(lElement.childNodes[i]));
                            }
                        }
                    }
                } catch (e) {
                    IE.log.addLog('erreur getTextesDeNode : ' + e, null, IE.log.genre.Erreur);
                }
                return lResult;
            }
            getClass(aId) {
                const E = this.getElement(aId);
                return E && E.className ? E.className : '';
            }
            addClass(aId, aClass) {
                this.modifierClass(aId, null, aClass);
            }
            delClass(aId, aClass) {
                this.modifierClass(aId, aClass, null);
            }
            modifierClass(aId, aClassSuppression, aClasseAjout) {
                if ((!aClassSuppression && !aClasseAjout) || !this.elementExiste(aId)) {
                    return;
                }
                const lJElement = typeof aId === 'string' ? $('#' + aId.escapeJQ()) : $(aId);
                if (aClassSuppression) {
                    lJElement.removeClass(aClassSuppression);
                }
                if (aClasseAjout) {
                    lJElement.addClass(aClasseAjout);
                }
            }
            getClosestFocusable(aId) {
                const lNode = this.getElement(aId);
                if (lNode && lNode.closest) {
                    let lNodeCB = lNode.closest('.iecb');
                    if (lNodeCB) {
                        return lNodeCB.querySelector('input');
                    }
                    return lNode.closest(cSelectorFocusables);
                }
                return null;
            }
            getClosestInteractive(aId) {
                const lNode = this.getElement(aId);
                if (lNode && lNode.closest) {
                    let lNodeCB = lNode.closest('.iecb');
                    if (lNodeCB) {
                        return lNodeCB.querySelector('input');
                    }
                    return lNode.closest(cTagsFocusables.concat('a[href]').join(', '));
                }
                return null;
            }
            getElementsFocusablesDElement(aNode, aOptions) {
                const lNode = this.getElement(aNode);
                const lTab = [];
                if (lNode && lNode.querySelectorAll) {
                    const lOptions = Object.assign({
                        ignoreAriaHidden: true,
                        ignoreRolePresentation: true,
                        avecTabindexNegatif: true
                    }, aOptions);
                    const lNodes = lNode.querySelectorAll(cSelectorFocusables);
                    if (lNodes) {
                        Array.from(lNodes).forEach( (lNode) => {
                            if (lOptions.ignoreAriaHidden && lNode.closest('[aria-hidden]')) {
                                return;
                            }
                            if (lOptions.ignoreRolePresentation && ['presentation', 'none'].includes(lNode.role)) {
                                return;
                            }
                            if (!lOptions.avecTabindexNegatif && lNode.getAttribute('tabindex') === '-1') {
                                return;
                            }
                            lTab.push(lNode);
                        }
                        );
                    }
                }
                return lTab;
            }
            getDisplay(aId) {
                const E = this.getElement(aId);
                if (E) {
                    if (E.style && E.style.display === 'none') {
                        return false;
                    } else if (!E.parentNode) {
                        return true;
                    } else {
                        return this.getDisplay(E.parentNode);
                    }
                }
                return false;
            }
            extraireNombreDId(aId, aIndiceAvant, aSeparateur) {
                let lOptions, T, lResult, lId = aId;
                if (!MethodesObjet_1.MethodesObjet.isString(lId)) {
                    if (this.estElement(lId) && lId.id) {
                        lId = lId.id;
                    } else {
                        return null;
                    }
                }
                lOptions = {
                    separateur: aSeparateur || '_',
                    indiceAvant: aIndiceAvant || 0
                };
                T = lId.split(lOptions.separateur);
                lResult = parseInt(T[Math.max(0, T.length - 1 - lOptions.indiceAvant)], 10);
                return MethodesObjet_1.MethodesObjet.isNumber(lResult) ? lResult : null;
            }
            getCheckBox(aId) {
                const E = this.getElement(aId);
                if (E) {
                    return !!E.checked;
                }
                return false;
            }
            getElementEnFocus() {
                try {
                    return document.activeElement;
                } catch (e) {
                    return null;
                }
            }
            focusEstDansElement(aId) {
                const lElement = this.getElement(aId);
                if (this.estElement(lElement)) {
                    const lElementFocus = this.getElementEnFocus();
                    if (lElementFocus) {
                        return lElement === lElementFocus || $.contains(lElement, lElementFocus);
                    }
                }
                return false;
            }
            setClass(aId, aClass) {
                const E = this.getElement(aId);
                if (E) {
                    E.className = aClass;
                }
            }
            setHtml(aId, aHtml, aIgnorerScroll) {
                const E = this.getElement(aId);
                if (E) {
                    const lParametres = Object.assign({}, aIgnorerScroll);
                    if (aIgnorerScroll === true) {
                        lParametres.ignorerScroll = true;
                    }
                    if (lParametres.instance && lParametres.instance.controleur) {
                        lParametres.controleur = lParametres.instance.controleur;
                    }
                    if ($.fn.ieHtml && (!lParametres.instance || !lParametres.instance.IGNORER_IEHTML)) {
                        $(E).ieHtml(aHtml, lParametres);
                    } else {
                        if (E.getElementsByTagName) {
                            $.cleanData(E.getElementsByTagName('*'));
                        }
                        E.innerHTML = aHtml;
                        if (aIgnorerScroll !== true) {
                            const lOverflow = $(E).css('overflow');
                            if (lOverflow === 'auto' || lOverflow === 'scroll') {
                                E.scrollLeft = 0;
                                E.scrollTop = 0;
                            }
                        }
                    }
                }
            }
            setTitle(aId, aTitle) {
                const E = this.getElement(aId);
                if (E) {
                    E.title = _valeurToProp(aTitle);
                }
            }
            setValue(aId, aValue) {
                const E = this.getElement(aId);
                if (E) {
                    E.value = _valeurToProp(aValue);
                }
            }
            setDisabled(aId, aDisabled) {
                const E = this.getElement(aId);
                if (E) {
                    $(E).inputDisabled(aDisabled);
                }
            }
            setAvecMain(aId, aDisabled) {
                const E = this.getElement(aId);
                if (E) {
                    $(E).toggleClass('AvecMain', !aDisabled);
                }
            }
            setDisplay(aId, aVisible, aSpeed) {
                const E = this.getElement(aId);
                if (E) {
                    if (aVisible) {
                        $(E).show(aSpeed);
                    } else {
                        $(E).hide(aSpeed);
                    }
                }
            }
            setFocus(aId, aFocus, aAvecDecalage) {
                function _focus(aHtml, aElement) {
                    if (!aHtml.elementExiste(aElement)) {
                        return;
                    }
                    try {
                        if (aFocus || aFocus === null || aFocus === undefined) {
                            aElement.focus();
                        } else {
                            aElement.blur();
                        }
                    } catch (e) {
                        IE.log.addLog('Erreur ObjetHtml.setFocus : ' + e.toString() + ' ((fv) remarqu uniquement sur IE avec un delai)');
                    }
                }
                if (this.elementExiste(aId)) {
                    try {
                        if (this.getDisplay(aId)) {
                            const lElement = this.getElement(aId);
                            if (lElement) {
                                let lAvecDecalage = aAvecDecalage
                                  , lDecalage = 200;
                                if (MethodesObjet_1.MethodesObjet.isNumber(aAvecDecalage) && aAvecDecalage >= 0) {
                                    lAvecDecalage = true;
                                    lDecalage = aAvecDecalage;
                                }
                                if (lAvecDecalage) {
                                    setTimeout(_focus.bind(null, this, lElement), lDecalage);
                                } else {
                                    _focus(this, lElement);
                                }
                            }
                        }
                    } catch (e) {}
                }
            }
            setFocusEdit(aId) {
                if (this.elementExiste(aId)) {
                    try {
                        if (this.getDisplay(aId)) {
                            const E = this.getElement(aId);
                            if (E) {
                                E.focus();
                                E.value = E.value;
                            }
                        }
                    } catch (e) {}
                }
            }
            setCursorAtEnd(aId) {
                try {
                    const E = this.getElement(aId);
                    if (E && E.value !== undefined) {
                        const end = E.value.length;
                        this.setSelectionEdit(E, end, end);
                    }
                } catch (e) {}
            }
            setSelection(aId, aSelection) {
                const E = this.getElement(aId);
                if (E) {
                    E.selectedIndex = aSelection;
                }
            }
            setSelectionEdit(aId, aBegin, aEnd) {
                if (this.elementExiste(aId)) {
                    try {
                        if (this.getDisplay(aId)) {
                            const E = this.getElement(aId);
                            if (E) {
                                const begin = MethodesObjet_1.MethodesObjet.isNumber(aBegin) ? aBegin : 0;
                                const end = MethodesObjet_1.MethodesObjet.isNumber(aEnd) ? aEnd : E.value.length;
                                if (E.setSelectionRange) {
                                    E.setSelectionRange(begin, end);
                                } else if (E.createTextRange) {
                                    const range = E.createTextRange();
                                    range.collapse(true);
                                    range.moveEnd('character', end);
                                    range.moveStart('character', begin);
                                    range.select();
                                }
                            }
                        }
                    } catch (e) {}
                }
            }
            setImage(aId, aSrc) {
                const E = this.getElement(aId);
                if (E) {
                    E.src = aSrc;
                }
            }
            setAlt(aId, aValue) {
                const E = this.getElement(aId);
                if (E) {
                    E.alt = aValue;
                }
            }
            setTexte(aId, aTexte) {
                const E = this.getElement(aId);
                if (E) {
                    this.viderNode(E);
                    E.appendChild(document.createTextNode(aTexte));
                }
            }
            composeBlanc() {
                return '<span style="font-size : 1px">&nbsp;</span>';
            }
            setCheckBox(aId, aValue) {
                if (aValue === undefined) {
                    aValue = false;
                }
                const E = this.getElement(aId);
                if (E) {
                    $(E).inputChecked(aValue);
                }
            }
            setLien(aId, aValue) {
                const E = this.getElement(aId);
                if (E && (E.tagName.toUpperCase() === 'A')) {
                    E.href = aValue;
                }
            }
            setTabIndex(aId, aTabIndex) {
                const E = this.getElement(aId);
                if (E) {
                    E.tabIndex = aTabIndex;
                }
            }
            toArg(aArgs) {
                return tag_1.tag.toArg(aArgs);
            }
            composeAttr(aAttribut, aValue, ...aArgs) {
                return tag_1.tag.composeAttr(aAttribut, aValue, ...aArgs);
            }
            deselectionTexte() {
                try {
                    if (window.getSelection && window.getSelection() && window.getSelection().removeAllRanges) {
                        window.getSelection().removeAllRanges();
                    }
                } catch (e) {}
            }
            nettoyerEditeurRiche(aJNode, aEditeurEquationMaxFileSize) {
                let lResult = false;
                if (aJNode && aJNode.find && aJNode.length > 0) {
                    aJNode.find('img').each( (index, ele) => {
                        const lSrc = $(ele).attr('src');
                        if ($(ele).attr('data-latex')) {
                            if (lSrc && lSrc.length > (aEditeurEquationMaxFileSize || 4096)) {
                                $(ele).remove();
                                lResult = true;
                            }
                        } else if (lSrc && (lSrc.search('data') > -1 || lSrc.startsWith('blob'))) {
                            $(ele).remove();
                            lResult = true;
                        }
                    }
                    );
                }
                return lResult;
            }
            composeFondAucuneDonnee(aHtml) {
                return '<div style="width:1px;height:1px;"></div><div class="message-vide card card-nodata"><div class="card-content">' + aHtml + '</div><div class="Image_No_Data" aria-hidden="true"></div></div>';
            }
        }
        exports.ObjetHtml = ObjetHtml;
        function _valeurToProp(aValeur) {
            if (aValeur === null || aValeur === undefined) {
                return '';
            }
            if (MethodesObjet_1.MethodesObjet.isString(aValeur)) {
                return ObjetChaine_1.GChaine.enleverEntites(aValeur);
            }
            if (MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                return aValeur + '';
            }
            return aValeur;
        }
        const GHtml = new ObjetHtml();
        exports.GHtml = GHtml;
    },
    fn: 'objethtml.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GStyle = exports.ObjetStyle = exports.EGenreBordure = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetSupport_1 = require("ObjetSupport");
        const EGenreBordure = {
            gauche: 1,
            haut: 2,
            droite: 4,
            bas: 8,
            avecBordure(aBordures, aGenreBordure) {
                return aGenreBordure > 0 && aBordures > 0 ? !!(aBordures & aGenreBordure) : false;
            }
        };
        exports.EGenreBordure = EGenreBordure;
        class ObjetStyle {
            composeCouleur(aCouleurFond, aCouleurTexte, aCouleurBordure, aLargeurBordure, aListeBordures) {
                return this.composeCouleurFond(aCouleurFond) + this.composeCouleurTexte(aCouleurTexte) + this.composeCouleurBordure(aCouleurBordure, aLargeurBordure, aListeBordures);
            }
            composeCouleurBordure(aCouleurBordure, aLargeurBordure=1, aListeBordures=0, aStyle='solid') {
                if (aCouleurBordure && MethodesObjet_1.MethodesObjet.isString(aCouleurBordure)) {
                    const lStyle = aStyle || 'solid';
                    if (!MethodesObjet_1.MethodesObjet.isNumeric(aLargeurBordure)) {
                        aLargeurBordure = 1;
                    }
                    if (!aListeBordures) {
                        return ' border: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';';
                    }
                    const H = [];
                    H.push(aListeBordures & EGenreBordure.gauche ? ' border-left: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';' : '');
                    H.push(aListeBordures & EGenreBordure.haut ? ' border-top: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';' : '');
                    H.push(aListeBordures & EGenreBordure.droite ? ' border-right: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';' : '');
                    H.push(aListeBordures & EGenreBordure.bas ? ' border-bottom: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';' : '');
                    return H.join('');
                }
                return '';
            }
            composeCouleurFond(aCouleurFond) {
                if (!aCouleurFond) {
                    return '';
                }
                if (MethodesObjet_1.MethodesObjet.isString(aCouleurFond)) {
                    return ' background-color:' + aCouleurFond + ';';
                }
                ;return '';
            }
            composeCouleurTexte(aCouleurTexte) {
                if (!aCouleurTexte) {
                    return '';
                }
                if (MethodesObjet_1.MethodesObjet.isString(aCouleurTexte)) {
                    return ' color:' + aCouleurTexte + ';';
                }
                ;return '';
            }
            composeHeight(aValeur, aFormat) {
                if (aValeur && MethodesObjet_1.MethodesObjet.isString(aValeur) && aValeur.indexOf && aValeur.indexOf('%') > 0) {
                    aValeur = parseFloat(aValeur);
                    aFormat = '%';
                }
                if (!MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                    return '';
                }
                if (!aFormat) {
                    aFormat = 'px';
                }
                return 'height:' + aValeur + aFormat + ';';
            }
            composeWidth(aValeur, aFormat) {
                if (aValeur && MethodesObjet_1.MethodesObjet.isString(aValeur) && aValeur.indexOf && aValeur.indexOf('%') > 0) {
                    aValeur = parseFloat(aValeur);
                    aFormat = '%';
                }
                if (!MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                    return '';
                }
                if (!aFormat) {
                    aFormat = 'px';
                }
                return 'width:' + aValeur + aFormat + ';';
            }
            composeHeightCalc(aValeur) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                    return '';
                }
                return 'height: calc(100% - ' + aValeur + 'px);';
            }
            composeWidthCalc(aValeur) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                    return '';
                }
                return 'width: calc(100% - ' + aValeur + 'px);';
            }
            composeMarge(aHaut, aBas, aGauche, aDroit) {
                let lResult = '';
                if (MethodesObjet_1.MethodesObjet.isNumeric(aHaut)) {
                    lResult += 'margin-top: ' + aHaut + 'px; ';
                }
                if (MethodesObjet_1.MethodesObjet.isNumeric(aBas)) {
                    lResult += 'margin-bottom: ' + aBas + 'px; ';
                }
                if (MethodesObjet_1.MethodesObjet.isNumeric(aGauche)) {
                    lResult += 'margin-left: ' + aGauche + 'px; ';
                }
                if (MethodesObjet_1.MethodesObjet.isNumeric(aDroit)) {
                    lResult += 'margin-right: ' + aDroit + 'px; ';
                }
                return lResult;
            }
            composeOpacite(aOpacite) {
                if (!MethodesObjet_1.MethodesObjet.isNumeric(aOpacite) || aOpacite < 0 || aOpacite > 1) {
                    return '';
                }
                aOpacite = Math.borner(aOpacite, 0, 1);
                if (ObjetSupport_1.Support.supportOpacity[ObjetSupport_1.Support.GenreNavigateur.Standard]) {
                    return 'opacity: ' + aOpacite + ';';
                } else if (ObjetSupport_1.Support.supportOpacity[ObjetSupport_1.Support.GenreNavigateur.Webkit]) {
                    return '-webkit-opacity: ' + aOpacite + ';';
                } else if (ObjetSupport_1.Support.supportOpacity[ObjetSupport_1.Support.GenreNavigateur.Moz]) {
                    return '-moz-opacity: ' + aOpacite + ';';
                } else if (ObjetSupport_1.Support.supportFilterIE) {
                    return 'FILTER: progid:DXImageTransform.Microsoft.Alpha(opacity=' + aOpacite * 100 + ')' + ';';
                } else {
                    return '';
                }
            }
            getStyle(aId) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    return E.style;
                }
            }
            setStyle(aId, aStyle) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    if (E.setAttribute) {
                        E.setAttribute('style', aStyle);
                    }
                }
            }
            setCouleurBordure(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    E.style.borderColor = aCouleur;
                }
            }
            setCouleurBordureHaut(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    E.style.borderTopColor = aCouleur;
                }
            }
            setCouleurBordureBas(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E && E.style) {
                    E.style.borderBottomColor = aCouleur;
                }
            }
            setCouleurBordureGauche(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    E.style.borderLeftColor = aCouleur;
                }
            }
            setCouleurBordureDroit(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    E.style.borderRightColor = aCouleur;
                }
            }
            setCouleur(aId, aCouleurFond, aCouleurTexte, aCouleurBordure) {
                if (aCouleurFond || aCouleurFond === '') {
                    this.setCouleurFond(aId, aCouleurFond);
                }
                if (aCouleurTexte || aCouleurTexte === '') {
                    this.setCouleurTexte(aId, aCouleurTexte);
                }
                if (aCouleurBordure || aCouleurBordure === '') {
                    this.setCouleurBordure(aId, aCouleurBordure);
                }
            }
            setCouleurFond(aId, aCouleurFond) {
                const S = this.getStyle(aId);
                if (S) {
                    S.backgroundColor = aCouleurFond;
                }
            }
            setCouleurTexte(aId, aCouleurTexte) {
                const S = this.getStyle(aId);
                if (S) {
                    S.color = aCouleurTexte;
                }
            }
            setVisible(aId, aVisible) {
                const S = this.getStyle(aId);
                if (S) {
                    S.visibility = aVisible ? 'visible' : 'hidden';
                }
            }
            setGras(aId, aGras) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E && ObjetHtml_1.GHtml.estElement(E)) {
                    E.style.fontWeight = (aGras ? 'bold' : 'normal');
                }
            }
            getZindex(aId) {
                const S = this.getStyle(aId);
                if (S && S.zIndex) {
                    return parseInt(S.zIndex);
                }
            }
            setZindex(aId, aZindex) {
                const S = this.getStyle(aId);
                if (S) {
                    S.zIndex = aZindex;
                }
            }
            getDisplay(aId) {
                const S = this.getStyle(aId);
                return S.display === '';
            }
            setDisplay(aId, aDisplay, aSpeed) {
                ObjetHtml_1.GHtml.setDisplay(aId, aDisplay, aSpeed);
            }
            getVisible(aId) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                return E.style ? E.style.visibility === 'visible' : false;
            }
            composeDegradeVertical(aCouleurDebut, aCouleurFin) {
                let lResult = this.composeCouleurFond(aCouleurDebut);
                if (ObjetSupport_1.Support.supportFilterIE) {
                    lResult += ' FILTER: progid:DXImageTransform.Microsoft.Gradient(gradientType=0,startColorStr=' + aCouleurDebut + ',endColorStr=' + aCouleurFin + ');';
                } else if (ObjetSupport_1.Support.supportGradient[ObjetSupport_1.Support.GenreNavigateur.Standard]) {
                    lResult += ' background: linear-gradient(to bottom, ' + aCouleurDebut + ', ' + aCouleurFin + ');';
                } else if (ObjetSupport_1.Support.supportGradient[ObjetSupport_1.Support.GenreNavigateur.IE]) {
                    lResult += ' background: -ms-linear-gradient(top, ' + aCouleurDebut + ', ' + aCouleurFin + ');';
                } else if (ObjetSupport_1.Support.supportGradient[ObjetSupport_1.Support.GenreNavigateur.Moz]) {
                    lResult += ' background: -moz-linear-gradient(top, ' + aCouleurDebut + ', ' + aCouleurFin + ');';
                } else if (ObjetSupport_1.Support.supportGradient[ObjetSupport_1.Support.GenreNavigateur.Webkit]) {
                    lResult += ' background: -webkit-gradient(linear, left top, left bottom, from(' + aCouleurDebut + '), to(' + aCouleurFin + '));';
                }
                return lResult;
            }
            setImageFond(aId, aImage) {
                const S = this.getStyle(aId);
                if (S) {
                    S.backgroundImage = 'url(' + aImage + ')';
                    S.backgroundAttachment = 'fixed';
                }
            }
            getComputedValue(aNode, aPropertyName) {
                const lNode = ObjetHtml_1.GHtml.getElement(aNode);
                if (lNode && global.getComputedStyle && aPropertyName) {
                    try {
                        return global.getComputedStyle(lNode).getPropertyValue(aPropertyName);
                    } catch (e) {}
                }
                return '';
            }
            getFloatComputedValue(aNode, aPropertyName) {
                const lNumber = parseFloat(this.getComputedValue(aNode, aPropertyName));
                return isNaN(lNumber) ? 0 : lNumber;
            }
            styleSheetDisabled() {
                let lResult = false;
                try {
                    const lBody = document.getElementsByTagName('BODY')[0];
                    const lElement = document.createElement('div');
                    lBody.appendChild(lElement);
                    lElement.classList.add('support-css-test');
                    lResult = this.getFloatComputedValue(lElement, 'height') === 0;
                    lBody.removeChild(lElement);
                } catch (e) {}
                return lResult;
            }
        }
        exports.ObjetStyle = ObjetStyle;
        const GStyle = new ObjetStyle();
        exports.GStyle = GStyle;
    },
    fn: 'objetstyle.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GPosition = exports.ObjetPosition = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        class ObjetPosition {
            constructor() {
                this._cacheFontSize = null;
                $(window).one('load', () => {
                    this._cacheFontSize = null;
                }
                );
            }
            setNavigateur(aNavigateur) {
                this.navigateur = aNavigateur;
            }
            getWidth(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                return ObjetHtml_1.GHtml.estElement(lElement) ? lElement.offsetWidth : 0;
            }
            getHeight(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                return ObjetHtml_1.GHtml.estElement(lElement) ? lElement.offsetHeight : 0;
            }
            getLeft(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                return ObjetHtml_1.GHtml.estElement(lElement) ? this.getClientRect(lElement).left : 0;
            }
            getTop(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                return ObjetHtml_1.GHtml.estElement(lElement) ? this.getClientRect(aId).top : 0;
            }
            setWidth(aId, aWidth, aAjuster, aFormat) {
                try {
                    if (aWidth === undefined || aWidth === null || isNaN(aWidth)) {
                        IE.log.addLog('setWidth invalide : ' + aWidth);
                        return;
                    }
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    if (!lElement || !lElement.style) {
                        return;
                    }
                    const lWidthEnString = MethodesObjet_1.MethodesObjet.isString(aWidth);
                    aFormat = !aFormat && !lWidthEnString ? 'px' : aFormat;
                    if (lWidthEnString && aWidth === 'auto') {
                        lElement.style.width = aWidth;
                    } else {
                        aWidth = Math.max(0, aWidth);
                        lElement.style.width = aWidth + aFormat;
                    }
                    if (aAjuster && (aFormat === 'px') && ObjetHtml_1.GHtml.getDisplay(lElement)) {
                        const lWidth = this.getWidth(lElement);
                        if (aWidth !== lWidth) {
                            lElement.style.width = Math.max(0, aWidth - (lWidth - aWidth)) + aFormat;
                        }
                    }
                } catch (e) {}
            }
            setHeight(aId, aHeight, aAjuster, aFormat) {
                try {
                    if (aHeight === undefined || aHeight === null || isNaN(aHeight)) {
                        IE.log.addLog('setHeight invalide : ' + aHeight);
                        return;
                    }
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    if (!lElement || !lElement.style) {
                        return;
                    }
                    const lHeightEnString = MethodesObjet_1.MethodesObjet.isString(aHeight);
                    aFormat = !aFormat && !lHeightEnString ? 'px' : aFormat;
                    if (lHeightEnString && aHeight === 'auto') {
                        lElement.style.height = aHeight;
                    } else {
                        aHeight = Math.max(0, aHeight);
                        lElement.style.height = aHeight + aFormat;
                    }
                    if (aAjuster && (aFormat === 'px') && ObjetHtml_1.GHtml.getDisplay(lElement)) {
                        const lHeight = this.getHeight(lElement);
                        if (aHeight !== lHeight) {
                            lElement.style.height = Math.max(0, aHeight - (lHeight - aHeight)) + aFormat;
                        }
                    }
                } catch (e) {}
            }
            setLeft(aId, aLeft, aAjuster, aFormat) {
                aFormat = !aFormat ? 'px' : aFormat;
                try {
                    if (aLeft === undefined || aLeft === null || isNaN(aLeft)) {
                        IE.log.addLog('setLeft invalide : ' + aLeft);
                        return;
                    }
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    if (!lElement || !lElement.style) {
                        return;
                    }
                    aLeft = isNaN(aLeft) ? 0 : aLeft;
                    lElement.style.left = aLeft + aFormat;
                    if (aAjuster && (aFormat === 'px') && ObjetHtml_1.GHtml.getDisplay(lElement)) {
                        const lLeft = this.getLeft(lElement);
                        if (aLeft !== lLeft) {
                            lElement.style.left = aLeft - (lLeft - aLeft) + aFormat;
                        }
                    }
                } catch (e) {}
            }
            setTop(aId, aTop, aAjuster, aFormat) {
                aFormat = !aFormat ? 'px' : aFormat;
                try {
                    if (aTop === undefined || aTop === null || isNaN(aTop)) {
                        IE.log.addLog('setTop invalide : ' + aTop);
                        return;
                    }
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    if (!lElement || !lElement.style) {
                        return;
                    }
                    aTop = isNaN(aTop) ? 0 : aTop;
                    lElement.style.top = aTop + aFormat;
                    if (aAjuster && (aFormat === 'px') && ObjetHtml_1.GHtml.getDisplay(lElement)) {
                        const lTop = this.getTop(lElement);
                        if (aTop !== lTop) {
                            lElement.style.top = aTop - (lTop - aTop) + aFormat;
                        }
                    }
                } catch (e) {}
            }
            getRect(aId, aPositionAbsolue) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                if (lElement && lElement.getBoundingClientRect) {
                    const lBoundingRect = lElement.getBoundingClientRect();
                    if (lBoundingRect) {
                        const lOffsetX = window.pageXOffset || 0;
                        const lOffsetY = window.pageYOffset || 0;
                        const lRect = {
                            left: lBoundingRect.left + lOffsetX,
                            right: lBoundingRect.right + lOffsetX,
                            top: lBoundingRect.top + lOffsetY,
                            bottom: lBoundingRect.bottom + lOffsetY,
                            x: lBoundingRect.left + lOffsetX,
                            y: lBoundingRect.top + lOffsetY,
                            width: lBoundingRect.right - lBoundingRect.left,
                            height: lBoundingRect.bottom - lBoundingRect.top,
                            leftScroll: aPositionAbsolue ? lBoundingRect.left : 0,
                            topScroll: aPositionAbsolue ? lBoundingRect.top : 0
                        };
                        if (!aPositionAbsolue) {
                            const lOffsetParent = $(lElement).offsetParent().get(0);
                            if (lOffsetParent && lOffsetParent !== document.documentElement) {
                                const lRectOffset = this.getRect(lOffsetParent, true);
                                Object.assign(lRect, {
                                    x: lRect.x - lRectOffset.x,
                                    y: lRect.y - lRectOffset.y,
                                    left: lRect.left - lRectOffset.left,
                                    right: lRect.left - lRectOffset.left + lRect.width,
                                    top: lRect.top - lRectOffset.top,
                                    bottom: lRect.top - lRectOffset.top + lRect.height
                                });
                            }
                        }
                        try {
                            Object.assign(lRect, this.getComputedBoxRect(lElement));
                            Object.assign(lRect, {
                                contentLeft: lRect.left + lRect.paddingLeft + lRect.borderLeft,
                                contentRight: lRect.right - lRect.paddingRight - lRect.borderRight,
                                contentTop: lRect.top + lRect.paddingTop + lRect.borderTop,
                                contentBottom: lRect.bottom - lRect.paddingBottom - lRect.borderBottom
                            });
                            lRect.contentWidth = lRect.contentRight - lRect.contentLeft;
                            lRect.contentHeight = lRect.contentBottom - lRect.contentTop;
                            Object.assign(lRect, {
                                innerLeft: lRect.contentLeft - lRect.paddingLeft,
                                innerRight: lRect.contentRight + lRect.paddingRight,
                                innerTop: lRect.contentTop - lRect.paddingTop,
                                innerBottom: lRect.contentBottom + lRect.paddingBottom
                            });
                            lRect.innerWidth = lRect.innerRight - lRect.innerLeft;
                            lRect.innerHeight = lRect.innerBottom - lRect.innerTop;
                            Object.assign(lRect, {
                                outerLeft: lRect.left - lRect.marginLeft,
                                outerRight: lRect.right + lRect.marginRight,
                                outerTop: lRect.top - lRect.marginTop,
                                outerBottom: lRect.bottom + lRect.marginBottom
                            });
                            lRect.outerWidth = lRect.outerRight - lRect.outerLeft;
                            lRect.outerHeight = lRect.outerBottom - lRect.outerTop;
                        } catch (e) {}
                        return lRect;
                    }
                }
                ;return {
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0,
                    width: 0,
                    height: 0,
                    x: 0,
                    y: 0,
                    leftScroll: 0,
                    topScroll: 0,
                    erreur: true
                };
            }
            getClientRect(aId) {
                return this.getRect(aId, true);
            }
            getComputedBoxRect(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                let lComputedStyle = null;
                if (lElement) {
                    lComputedStyle = global.getComputedStyle(lElement);
                }
                ;const lBox = {};
                ['left', 'right', 'top', 'bottom'].forEach( (aVal) => {
                    const lValMaj = aVal.ucfirst();
                    lBox[`padding${lValMaj}`] = lComputedStyle ? parseFloat(lComputedStyle.getPropertyValue(`padding-${aVal}`)) : 0;
                    lBox[`margin${lValMaj}`] = lComputedStyle ? parseFloat(lComputedStyle.getPropertyValue(`margin-${aVal}`)) : 0;
                    lBox[`border${lValMaj}`] = lComputedStyle ? parseFloat(lComputedStyle.getPropertyValue(`border-${aVal}-width`)) : 0;
                }
                );
                return lBox;
            }
            setPosition(aId, aLeft, aTop, aAjuster, aFormat) {
                this.setLeft(aId, aLeft, aAjuster, aFormat);
                this.setTop(aId, aTop, aAjuster, aFormat);
            }
            centrer(aId) {
                let lLeft, lTop, lWidth, lHeight;
                lLeft = window.pageXOffset || 0;
                lTop = window.pageYOffset || 0;
                if (document.documentElement) {
                    lLeft = lLeft || document.documentElement.scrollLeft;
                    lTop = lTop || document.documentElement.scrollTop;
                }
                if (window.visualViewport) {
                    lLeft = lLeft || window.visualViewport.offsetLeft;
                    lTop = lTop || window.visualViewport.offsetTop;
                }
                if (this.navigateur.isTactile && window.visualViewport) {
                    lWidth = window.visualViewport.width;
                    lHeight = window.visualViewport.height;
                } else if (this.navigateur.isTactile && window.innerHeight) {
                    lWidth = window.innerWidth;
                    lHeight = window.innerHeight;
                } else {
                    lWidth = this.navigateur.clientL;
                    lHeight = this.navigateur.clientH;
                }
                const lWidthId = this.getWidth(aId)
                  , lHeightId = this.getHeight(aId);
                if (lWidthId * lHeightId) {
                    const lPosition = {
                        x: Math.max(0, lLeft + (lWidth - lWidthId) / 2),
                        y: Math.max(0, lTop + (lHeight - lHeightId) / 2),
                        width: lWidthId,
                        height: lHeightId
                    };
                    this._ramenerPositionDansLAffichage(lPosition);
                    this.setPosition(aId, Math.max(0, lPosition.x), Math.max(0, lPosition.y), true);
                }
            }
            placer(aId, aLeft, aTop, aEcartBordEcran) {
                let lX1 = MethodesObjet_1.MethodesObjet.isNumber(aLeft) ? aLeft : (this.navigateur.pointerX || 0);
                const lX2 = lX1 + this.getWidth(aId);
                let lY1 = MethodesObjet_1.MethodesObjet.isNumber(aTop) ? aTop : (this.navigateur.pointerY || 0);
                const lY2 = lY1 + this.getHeight(aId);
                const lEcartBordEcran = $.extend({
                    x: 2,
                    y: 2
                }, aEcartBordEcran);
                if (lX2 + lEcartBordEcran.x > this.navigateur.ecranL) {
                    lX1 = this.navigateur.ecranL - this.getWidth(aId) - lEcartBordEcran.x;
                }
                if (lY2 + lEcartBordEcran.y > this.navigateur.ecranH) {
                    lY1 = this.navigateur.ecranH - this.getHeight(aId) - lEcartBordEcran.y;
                }
                this.setPosition(aId, Math.max(lEcartBordEcran.x, lX1), Math.max(lEcartBordEcran.y, lY1), true);
            }
            placerFiche(aId, aIdSource, aVisible, aDecalage) {
                const lPositionSource = this._getPositionElement(aIdSource);
                this.placerFicheSource(aId, lPositionSource.x, lPositionSource.x + lPositionSource.width, lPositionSource.y, lPositionSource.y + lPositionSource.height, aVisible, aDecalage);
            }
            placerFicheSource(aId, aX1Source, aX2Source, aY1Source, aY2Source, aVisible, aDecalage) {
                const lVisible = aVisible === null || aVisible === undefined ? ObjetHtml_1.GHtml.getElement(aId).style.visibility === 'visible' : aVisible
                  , lDecalage = $.extend({
                    x: 6,
                    y: 0
                }, aDecalage);
                const lPosition = this._getPositionElement(aId)
                  , lPositionSource = {
                    x: aX1Source,
                    y: aY1Source,
                    width: aX2Source - aX1Source,
                    height: aY2Source - aY1Source
                };
                this._ramenerPositionDansLAffichage(lPosition);
                if (!lVisible || this._avecChevauchement(lPosition, lPositionSource)) {
                    lPosition.x = lPositionSource.x + lPositionSource.width;
                    if (lPosition.x + lPosition.width + lDecalage.x > this.navigateur.ecranL) {
                        lPosition.x = Math.max(aX1Source - lPosition.width - lDecalage.x, 1);
                    } else {
                        lPosition.x += lDecalage.x;
                    }
                    if (!lVisible) {
                        lPosition.y = lPositionSource.y;
                        if (lPosition.y + lPosition.height + lDecalage.y > this.navigateur.ecranH) {
                            lPosition.y = Math.max(lPositionSource.y + lPositionSource.height - lPosition.height - lDecalage.y, 1);
                        } else {
                            lPosition.y += lDecalage.y;
                        }
                    }
                }
                this._modifierPositionSiChevauchement(lPosition, lPositionSource);
                this._ramenerPositionDansLAffichage(lPosition);
                if (lPosition.x < 10) {
                    lPosition.x = 10;
                }
                if (lPosition.y < 10) {
                    lPosition.y = 10;
                }
                this.setPosition(aId, Math.max(0, lPosition.x), Math.max(0, lPosition.y), true);
            }
            deplacerSiChevauchement(aIdMobile, aIdReference) {
                const lPosition = this._getPositionElement(aIdMobile)
                  , lPositionSource = this._getPositionElement(aIdReference);
                this._modifierPositionSiChevauchement(lPosition, lPositionSource);
                this.setPosition(aIdMobile, Math.max(0, lPosition.x), Math.max(0, lPosition.y), true);
            }
            getScrollTop(aId) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                return E ? E.scrollTop : 0;
            }
            setScrollTop(aId, aScrollTop) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E && ObjetHtml_1.GHtml.estElement(E)) {
                    E.scrollTop = aScrollTop;
                }
            }
            setTaille(aId, aWidth, aHeight, aFormat) {
                this.setWidth(aId, aWidth, !!aFormat, aFormat);
                this.setHeight(aId, aHeight, !!aFormat, aFormat);
            }
            positionDansZone(aPosition, aId) {
                const lRect = this.getClientRect(aId);
                return !!aPosition && (aPosition.x > lRect.left) && (aPosition.x < lRect.right) && (aPosition.y > lRect.top) && (aPosition.y < lRect.bottom);
            }
            estEnCollision(aId1, aId2) {
                const E1 = ObjetHtml_1.GHtml.getElement(aId1);
                const E2 = ObjetHtml_1.GHtml.getElement(aId2);
                if (!!E1 && !!E2) {
                    const x1 = this.getLeft(aId1);
                    const y1 = this.getTop(aId1);
                    const h1 = this.getHeight(aId1);
                    const w1 = this.getWidth(aId1);
                    const b1 = y1 + h1;
                    const r1 = x1 + w1;
                    const x2 = this.getLeft(aId2);
                    const y2 = this.getTop(aId2);
                    const h2 = this.getHeight(aId2);
                    const w2 = this.getWidth(aId2);
                    const b2 = y2 + h2;
                    const r2 = x2 + w2;
                    return !(b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2);
                }
                return false;
            }
            getPositionEventJQuery(aEvent) {
                if (!aEvent) {
                    return {
                        x: 0,
                        y: 0
                    };
                }
                if (aEvent.pageX !== undefined) {
                    return {
                        x: Math.round(aEvent.pageX),
                        y: Math.round(aEvent.pageY)
                    };
                }
                const lEventTouch = aEvent;
                if (lEventTouch.originalEvent && lEventTouch.originalEvent.changedTouches && lEventTouch.originalEvent.changedTouches[0]) {
                    return {
                        x: lEventTouch.originalEvent.changedTouches[0].pageX || 0,
                        y: lEventTouch.originalEvent.changedTouches[0].pageY || 0
                    };
                }
                ;return {
                    x: 0,
                    y: 0
                };
            }
            remToPixels(aRem) {
                if (!this._cacheFontSize) {
                    this._cacheFontSize = ObjetStyle_1.GStyle.getFloatComputedValue(document.documentElement, 'font-size');
                }
                return aRem * this._cacheFontSize;
            }
            scrollToElement(aElement, aElementScrollParent) {
                const lElement = ObjetHtml_1.GHtml.getElement(aElement);
                const lElementScroll = ObjetHtml_1.GHtml.getElement(aElementScrollParent);
                if (!lElement || !lElementScroll) {
                    return;
                }
                const lRect = this.getRect(lElement, true);
                const lRectScroll = this.getRect(lElementScroll, true);
                let lTop = 0;
                let lLeft = 0;
                let lJElement = $(lElement);
                while (lJElement.get(0) !== lElementScroll && $.contains(lElementScroll, lJElement.get(0))) {
                    const lPosElement = lJElement.position();
                    lTop += lPosElement.top;
                    lLeft += lPosElement.left;
                    lJElement = lJElement.offsetParent();
                    if (/^body|html$/i.test(lJElement[0].nodeName)) {
                        break;
                    }
                }
                const lPosition = {
                    top: lTop,
                    left: lLeft,
                    heightVisible: Math.min(lRect.height, lRectScroll.height),
                    widthVisible: Math.min(lRect.width, lRectScroll.width)
                };
                if (lPosition.top < 0) {
                    lElementScroll.scrollTop = -lPosition.top;
                } else if (lPosition.top + lPosition.heightVisible - lElementScroll.scrollTop > lRectScroll.height) {
                    lElementScroll.scrollTop = lPosition.top + lPosition.heightVisible - lElementScroll.scrollTop - lRectScroll.height;
                }
                if (lPosition.left < 0) {
                    lElementScroll.scrollLeft = -lPosition.left;
                } else if (lPosition.left + lPosition.widthVisible - lElementScroll.scrollLeft > lRectScroll.width) {
                    lElementScroll.scrollLeft = lPosition.left + lPosition.widthVisible - lElementScroll.scrollLeft - lRectScroll.width;
                }
            }
            _ramenerPositionDansLAffichage(aPosition) {
                if (aPosition.x + aPosition.width > this.navigateur.ecranL) {
                    aPosition.x = Math.max(0, this.navigateur.ecranL - aPosition.width);
                }
                if (aPosition.y + aPosition.height > this.navigateur.ecranH) {
                    aPosition.y = Math.max(0, this.navigateur.ecranH - aPosition.height);
                }
            }
            _avecChevauchement(aPosition, aPositionSource) {
                return (aPosition.x < (aPositionSource.x + aPositionSource.width)) && ((aPosition.x + aPosition.width) > aPositionSource.x) && (aPosition.y < (aPositionSource.y + aPositionSource.height)) && ((aPosition.y + aPosition.height) > aPositionSource.y);
            }
            _getPositionElement(aElement) {
                const lX = GPosition.getLeft(aElement)
                  , lY = GPosition.getTop(aElement)
                  , lWidth = GPosition.getWidth(aElement)
                  , lHeight = GPosition.getHeight(aElement);
                return {
                    x: lX,
                    y: lY,
                    width: lWidth,
                    height: lHeight
                };
            }
            _modifierPositionSiChevauchement(aPositionMobile, aPositionSource) {
                if ((aPositionMobile.x + aPositionMobile.width) > this.navigateur.ecranL) {
                    aPositionMobile.x = this.navigateur.ecranL - aPositionMobile.width;
                }
                if ((aPositionMobile.y + aPositionMobile.height) > this.navigateur.ecranH) {
                    aPositionMobile.y = this.navigateur.ecranH - aPositionMobile.height;
                }
                if (this._avecChevauchement(aPositionMobile, aPositionSource)) {
                    aPositionMobile.x = aPositionSource.x + aPositionSource.width + 6;
                    if (aPositionMobile.x + aPositionMobile.width > this.navigateur.ecranL) {
                        aPositionMobile.x = Math.max(aPositionSource.x - aPositionMobile.width, 1);
                    }
                }
                if (aPositionMobile.x + aPositionMobile.width > this.navigateur.ecranL) {
                    aPositionMobile.x = this.navigateur.ecranL - aPositionMobile.width;
                }
                if (aPositionMobile.x < 6) {
                    aPositionMobile.x = 6;
                }
                if (this._avecChevauchement(aPositionMobile, aPositionSource)) {
                    aPositionMobile.y = aPositionSource.y + aPositionSource.height + 6;
                    if (aPositionMobile.y + aPositionMobile.height > this.navigateur.ecranH) {
                        aPositionMobile.y = Math.max(aPositionSource.y - aPositionMobile.height, 1);
                    }
                }
                if (aPositionMobile.y + aPositionMobile.height > this.navigateur.ecranH) {
                    aPositionMobile.y = this.navigateur.ecranH - aPositionMobile.height;
                }
            }
        }
        exports.ObjetPosition = ObjetPosition;
        const GPosition = new ObjetPosition();
        exports.GPosition = GPosition;
    },
    fn: 'objetposition.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreBoutonSouris = void 0;
        var EGenreBoutonSouris;
        (function(EGenreBoutonSouris) {
            EGenreBoutonSouris[EGenreBoutonSouris["Gauche"] = 0] = "Gauche";
            EGenreBoutonSouris[EGenreBoutonSouris["Droite"] = 1] = "Droite";
        }
        )(EGenreBoutonSouris || (exports.EGenreBoutonSouris = EGenreBoutonSouris = {}));
    },
    fn: 'enumere_boutonsouris.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EEvent = void 0;
        var EEvent;
        (function(EEvent) {
            EEvent[EEvent["SurError"] = 1] = "SurError";
            EEvent[EEvent["SurResize"] = 2] = "SurResize";
            EEvent[EEvent["SurPreResize"] = 3] = "SurPreResize";
            EEvent[EEvent["SurPostResize"] = 4] = "SurPostResize";
            EEvent[EEvent["SurClick"] = 5] = "SurClick";
            EEvent[EEvent["SurScroll"] = 6] = "SurScroll";
            EEvent[EEvent["SurKeyDown"] = 7] = "SurKeyDown";
            EEvent[EEvent["SurKeyUp"] = 8] = "SurKeyUp";
            EEvent[EEvent["SurKeyPress"] = 9] = "SurKeyPress";
            EEvent[EEvent["SurMouseMove"] = 10] = "SurMouseMove";
            EEvent[EEvent["SurMouseDown"] = 11] = "SurMouseDown";
            EEvent[EEvent["SurSelectStart"] = 12] = "SurSelectStart";
            EEvent[EEvent["SurMouseUp"] = 13] = "SurMouseUp";
            EEvent[EEvent["SurFinDeplacement"] = 14] = "SurFinDeplacement";
            EEvent[EEvent["SurBlur"] = 15] = "SurBlur";
            EEvent[EEvent["SurChange"] = 16] = "SurChange";
            EEvent[EEvent["SurDblClick"] = 17] = "SurDblClick";
            EEvent[EEvent["SurFocus"] = 18] = "SurFocus";
            EEvent[EEvent["SurFocusIn"] = 19] = "SurFocusIn";
            EEvent[EEvent["SurFocusOut"] = 20] = "SurFocusOut";
            EEvent[EEvent["SurLoad"] = 21] = "SurLoad";
            EEvent[EEvent["SurUnload"] = 22] = "SurUnload";
            EEvent[EEvent["SurMouseOut"] = 23] = "SurMouseOut";
            EEvent[EEvent["SurMouseOver"] = 24] = "SurMouseOver";
            EEvent[EEvent["SurFinResize"] = 25] = "SurFinResize";
        }
        )(EEvent || (exports.EEvent = EEvent = {}));
    },
    fn: 'enumere_event.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlDraggableDroppable = void 0;
        require("IEHtml.DraggableDroppable.css");
        exports.StylesIEHtmlDraggableDroppable = {
            ieDraggableHandle: 'ie-draggable-handle',
            FantomeDraggable: 'FantomeDraggable',
            draggable: 'draggable',
            draggableLibelle: 'draggable-libelle',
            draggable_details: 'draggable_details',
            draggable_details_Deplacer: 'draggable_details_Deplacer',
            overlay: 'overlay'
        };
    },
    fn: 'iehtml.draggabledroppable.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireMenuContextuelNatif = void 0;
        const AccessApp_1 = require("AccessApp");
        const UtilitaireMenuContextuelNatif = {
            desactiverSurElement(aJElement) {
                if (IE.estMobile || !aJElement || !aJElement.length) {
                    return;
                }
                return aJElement.off('contextmenu.AvecMenuContextuel1 contextmenu.AvecMenuContextuel2').on('contextmenu.AvecMenuContextuel1', UtilitaireMenuContextuelNatif.accepter).on({
                    'contextmenu.AvecMenuContextuel2': function(event) {
                        event.originalEvent.__marqueurAutoriserMenuContextuel = true;
                        return true;
                    }
                }, '.AvecMenuContextuel');
            },
            accepter(aEvent) {
                var _a, _b, _c;
                if (aEvent.type !== 'contextmenu') {
                    return false;
                }
                const lName = aEvent.target && aEvent.target.tagName ? aEvent.target.tagName.toLowerCase() : '';
                let lType = aEvent.target.type || '';
                lType = lType.toLowerCase();
                const lInputConcerne = (lName === 'input' && lType !== 'checkbox' && lType !== 'radio' && lType !== 'button') || (lName === 'textarea');
                return ((_c = (_b = (_a = (0,
                AccessApp_1.getApp)()) === null || _a === void 0 ? void 0 : _a.getOptionsDebug) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c.menuContextuelNatif) || (lInputConcerne && !$(aEvent.target).hasClass('SansMenuContextuel')) || (aEvent.originalEvent && '__marqueurAutoriserMenuContextuel'in aEvent.originalEvent && aEvent.originalEvent.__marqueurAutoriserMenuContextuel === true) || $(aEvent.target).hasClass('AvecMenuContextuel');
            }
        };
        exports.UtilitaireMenuContextuelNatif = UtilitaireMenuContextuelNatif;
    },
    fn: 'utilitairemenucontextuelnatif.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ZoneFenetre = void 0;
        const ObjetHtml_1 = require("ObjetHtml");
        const Invocateur_1 = require("Invocateur");
        const UtilitaireMenuContextuelNatif_1 = require("UtilitaireMenuContextuelNatif");
        const ZoneFenetre = {
            idZoneFenetre: 'zone_fenetre',
            idConteneurApp: '',
            getElementZoneFenetre() {
                const lId = ZoneFenetre.idZoneFenetre;
                let lElement = ObjetHtml_1.GHtml.getElement(lId);
                if (!ObjetHtml_1.GHtml.estElement(lElement)) {
                    lElement = ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("div", {
                        id: lId,
                        class: "NePasImprimer"
                    }));
                    const lDivFrere = ZoneFenetre.idConteneurApp ? ObjetHtml_1.GHtml.getElement(ZoneFenetre.idConteneurApp) : null;
                    if (lDivFrere && lDivFrere.parentNode) {
                        lDivFrere.parentNode.insertBefore(lElement, lDivFrere);
                    } else {
                        document.body.appendChild(lElement);
                    }
                    Invocateur_1.Invocateur.evenement('creationZoneFenetre', lElement);
                    UtilitaireMenuContextuelNatif_1.UtilitaireMenuContextuelNatif.desactiverSurElement($(lElement));
                }
                return lElement;
            },
            ajouterFenetre(aId, aZIndex) {
                if (ObjetHtml_1.GHtml.elementExiste(aId)) {
                    ZoneFenetre.enleverFenetre(aId);
                    IE.log.addLog('ZoneFenetre.ajouterFenetre : la fenetre ' + aId + ' existe dj!');
                }
                const lZIndex = aZIndex === 0 ? 0 : (aZIndex || 1100);
                ObjetHtml_1.GHtml.addHtml(ZoneFenetre.getElementZoneFenetre(), IE.jsx.str("div", {
                    class: "zone-fenetre",
                    id: aId,
                    style: `display:none;${lZIndex ? 'z-index:' + lZIndex : ''}`
                }));
            },
            enleverFenetre(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                if (ObjetHtml_1.GHtml.estElement(lElement) && lElement.parentNode && 'id'in lElement.parentNode && lElement.parentNode.id === ZoneFenetre.idZoneFenetre) {
                    $(lElement).remove();
                } else {
                    IE.log.addLog('erreur enleverFenetre de ' + aId);
                }
            }
        };
        exports.ZoneFenetre = ZoneFenetre;
    },
    fn: 'iezonefenetre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlDraggableDroppableSelecteur = void 0;
        const ObjetPosition_1 = require("ObjetPosition");
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const MethodesObjet_1 = require("MethodesObjet");
        const IEHtml_DraggableDroppable_css_1 = require("IEHtml.DraggableDroppable.css");
        const u_invocateur_dragdrop = new Invocateur_1.ObjetInvocateur();
        exports.StylesIEHtmlDraggableDroppableSelecteur = {
            ieDraggableHandleCancel: 'ie-draggable-handle-cancel'
        };
        IEHtml.addAttribut('ie-draggable', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lInfos = aOutils.getAccesParametres(aAttributValue, aAttrName, aContexteCourant);
            if (!aAttributValue || !lInfos.estFonction) {
                return true;
            }
            const lParams = Object.assign({
                start: null,
                drag: null,
                stop: null,
                distanceStart: 0,
                containment: document.body,
                avecDrop: false
            }, lInfos.callback([aContexteCourant.node]));
            _drag(aContexteCourant, lParams);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-draggable="' + (lInfos.nomCommentaire || aAttributValue) + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-draggable-fantome', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lInfos = aOutils.getAccesParametres(aAttributValue, aAttrName, aContexteCourant);
            if (!aAttributValue || !lInfos.estFonction) {
                return true;
            }
            const lParams = {
                start: null,
                drag: null,
                stop: null,
                containment: document.body,
                getIdZone: null,
                distanceStart: 5,
                avecDrop: true
            };
            const lParamsInfos = lInfos.callback([aContexteCourant.node]);
            Object.assign(lParams, lParamsInfos, {
                start(aParamsDrag) {
                    const lData = {
                        libelle: ''
                    };
                    aParamsDrag.data = lData;
                    let lResult = lParamsInfos.start(aParamsDrag);
                    if (lResult === false) {
                        return lResult;
                    }
                    const lJConteneur = $(IEZoneFenetre_1.ZoneFenetre.getElementZoneFenetre());
                    lJConteneur.find('>.FantomeDraggable').remove();
                    const lGetHtmlFantome = () => {
                        const lHtml = lData.libelle || '';
                        let lSupp = '';
                        if (lData.getHtmlDetailsDraggable) {
                            lSupp = lData.getHtmlDetailsDraggable(lData);
                        } else if (lData.horsZoneSuppression) {
                            lSupp = IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("i", {
                                class: "icon_remove",
                                style: "font-size:15px; color:red;",
                                role: "presentation"
                            }), IE.jsx.str("label", null, ObjetTraduction_1.GTraductions.getValeur('Supprimer')));
                        }
                        return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                            class: "draggable-libelle"
                        }, lHtml), lSupp ? IE.jsx.str("div", {
                            class: "draggable_details"
                        }, lSupp) : '');
                    }
                    ;
                    IEHtml.injectHTMLParams({
                        element: lJConteneur.get(0),
                        html: IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                            class: "FantomeDraggable"
                        }, IE.jsx.str("div", {
                            class: "draggable",
                            "ie-html": lGetHtmlFantome
                        }), IE.jsx.str("div", {
                            class: "overlay"
                        })))
                    });
                    aParamsDrag.data.jDraggable = lJConteneur.find('>.FantomeDraggable>.draggable');
                    return lResult;
                },
                drag: function(aParamsDrag, aEvent) {
                    const lIdZone = lParamsInfos.getIdZone ? lParamsInfos.getIdZone() : null;
                    aParamsDrag.horsZone = lIdZone ? !ObjetPosition_1.GPosition.positionDansZone(aParamsDrag.pos, lIdZone) : false;
                    if (lParamsInfos.drag) {
                        lParamsInfos.drag(aParamsDrag, aEvent);
                        IEHtml.refresh();
                    }
                    let lTop = Math.max(aParamsDrag.rectContrainte.top, aParamsDrag.pos.y - 10);
                    let lLeft = Math.max(aParamsDrag.rectContrainte.left, aParamsDrag.pos.x - 15);
                    let lRectDraggable = null;
                    aParamsDrag.data.jDraggable.find('.draggable-libelle, .draggable_details').each(function() {
                        const lRectChild = ObjetPosition_1.GPosition.getClientRect(this);
                        if (!lRectDraggable) {
                            lRectDraggable = lRectChild;
                        } else {
                            lRectDraggable.left = Math.min(lRectDraggable.left, lRectChild.left);
                            lRectDraggable.top = Math.min(lRectDraggable.top, lRectChild.top);
                            lRectDraggable.right = Math.max(lRectDraggable.right, lRectChild.right);
                            lRectDraggable.bottom = Math.max(lRectDraggable.bottom, lRectChild.bottom);
                        }
                    });
                    lLeft = Math.min(lLeft, aParamsDrag.rectContrainte.left + aParamsDrag.rectContrainte.width - (lRectDraggable.right - lRectDraggable.left));
                    lTop = Math.min(lTop, aParamsDrag.rectContrainte.top + aParamsDrag.rectContrainte.height - (lRectDraggable.bottom - lRectDraggable.top));
                    aParamsDrag.data.jDraggable.css({
                        left: lLeft,
                        top: lTop
                    });
                    const lElement = aParamsDrag.data.jDraggable.get(0);
                    aParamsDrag.scrollIntoViewSurNode(lElement);
                },
                stop: function(aParamsDrag, aEvent) {
                    try {
                        if (lParamsInfos.stop) {
                            const lIdZone = lParamsInfos.getIdZone ? lParamsInfos.getIdZone() : null;
                            aParamsDrag.horsZone = lIdZone ? !ObjetPosition_1.GPosition.positionDansZone(aParamsDrag.pos, lIdZone) : false;
                            lParamsInfos.stop(aParamsDrag, aEvent);
                            IEHtml.refresh();
                        }
                    } finally {
                        $(IEZoneFenetre_1.ZoneFenetre.getElementZoneFenetre()).find(`>.FantomeDraggable`).remove();
                    }
                }
            });
            _drag(aContexteCourant, lParams);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-draggable-fantome="' + (lInfos.nomCommentaire || aAttributValue) + '"');
            return true;
        }
        );
        function _drag(aContexteCourant, aParams) {
            let lDrag = null;
            let lDetach;
            const lOnMove = (aEvent) => {
                const lEventTouch = aEvent;
                if (lDrag && lDrag.touch && lEventTouch && lEventTouch.originalEvent && lEventTouch.originalEvent.changedTouches && lEventTouch.originalEvent.changedTouches.length > 0) {
                    if (lDrag.identifierTouchMove < 0) {
                        lDrag.identifierTouchMove = lEventTouch.originalEvent.changedTouches[0].identifier;
                    } else if (lDrag.identifierTouchMove !== lEventTouch.originalEvent.changedTouches[0].identifier) {
                        return;
                    }
                }
                if (!lDrag || (!aEvent.which && !lDrag.touch)) {
                    lOnStop(aEvent);
                    return;
                }
                let lContainment;
                if (aParams.containment && MethodesObjet_1.MethodesObjet.isFunction(aParams.containment)) {
                    lContainment = aParams.containment(lDrag.node);
                } else {
                    lContainment = aParams.containment;
                }
                lDrag.rectContrainte = lContainment ? ObjetPosition_1.GPosition.getClientRect(lContainment) : null;
                lDrag.pos = ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent);
                if (lDrag.rectContrainte) {
                    lDrag.pos.x = Math.max(lDrag.rectContrainte.left, Math.min(lDrag.rectContrainte.left + lDrag.rectContrainte.width, lDrag.pos.x));
                    lDrag.pos.y = Math.max(lDrag.rectContrainte.top, Math.min(lDrag.rectContrainte.top + lDrag.rectContrainte.height, lDrag.pos.y));
                }
                lDrag.offset.x = lDrag.pos.x - lDrag.posStart.x;
                lDrag.offset.y = lDrag.pos.y - lDrag.posStart.y;
                let lResult = true;
                try {
                    if (!lDrag._started) {
                        if (aParams.distanceStart > 0 && aParams.distanceStart > Math.max(Math.abs(lDrag.offset.x), Math.abs(lDrag.offset.y))) {
                            return;
                        }
                        if (aParams.start) {
                            if (aParams.start(lDrag) === false) {
                                lDetach();
                                lDrag = null;
                                return;
                            }
                        }
                        lDrag._started = true;
                        if (aParams.avecDrop) {
                            u_invocateur_dragdrop.evenement('start-drag', lDrag);
                        }
                    }
                    if (aParams.drag) {
                        aParams.drag(lDrag, aEvent);
                    }
                    if (aParams.avecDrop) {
                        u_invocateur_dragdrop.evenement('move-drag', lDrag);
                    }
                    lResult = false;
                } catch (e) {
                    lDetach();
                    lDrag = null;
                }
                return lDrag && lDrag.touch ? true : lResult;
            }
            ;
            const lOnStop = (aEvent) => {
                if (lDrag && lDrag.touch && aEvent) {
                    const lEvent = aEvent;
                    if (lEvent.originalEvent && lEvent.originalEvent.changedTouches && lEvent.originalEvent.changedTouches.length > 0 && lDrag.identifierTouchMove >= 0 && lDrag.identifierTouchMove !== lEvent.originalEvent.changedTouches[0].identifier) {
                        return;
                    }
                }
                const lDragTemp = lDrag;
                lDrag = null;
                lDetach();
                if (lDragTemp && lDragTemp._started) {
                    if (aParams.avecDrop) {
                        u_invocateur_dragdrop.evenement('stop-drag', lDragTemp);
                    }
                    if (aParams.stop) {
                        try {
                            aParams.stop(lDragTemp, aEvent);
                        } catch (e) {}
                    }
                }
            }
            ;
            lDetach = () => {
                $(document).off('touchmove.iedrag mousemove.iedrag', lOnMove);
                if (lDrag) {
                    $(document).off('touchend.iedrag touchcancel.iedrag mouseup.iedrag', lOnStop);
                }
            }
            ;
            $(aContexteCourant.node).on({
                'pointerdown'(aEvent) {
                    const lEstTouch = aEvent.pointerType === 'touch';
                    if (lDrag) {
                        if (lDrag.pointerId !== aEvent.pointerId) {
                            return;
                        }
                        lOnStop(aEvent);
                    }
                    lDrag = {
                        node: this,
                        pointerId: aEvent.pointerId,
                        identifierTouchMove: -1,
                        rect: ObjetPosition_1.GPosition.getClientRect(this),
                        posStart: ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent),
                        touch: lEstTouch,
                        offset: {
                            x: 0,
                            y: 0
                        },
                        rectContrainte: null,
                        scrollIntoViewSurNode(aNode) {
                            if (aNode && aNode.scrollIntoView) {
                                aNode.scrollIntoView({
                                    block: 'nearest',
                                    inline: 'nearest'
                                });
                            }
                        }
                    };
                    lDetach();
                    $(document).on({
                        [lEstTouch ? 'touchmove.iedrag' : 'mousemove.iedrag']: lOnMove,
                        [lEstTouch ? 'touchend.iedrag touchcancel.iedrag' : 'mouseup.iedrag']: lOnStop
                    });
                },
                dragstart() {
                    return false;
                },
                destroyed() {
                    lOnStop();
                }
            });
            if (!aParams.autoriserEventMove) {
                $(aContexteCourant.node).addClass(IEHtml_DraggableDroppable_css_1.StylesIEHtmlDraggableDroppable.ieDraggableHandle);
            }
        }
        IEHtml.addAttribut('ie-droppable', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lInfos = aOutils.getAccesParametres(aAttributValue, aAttrName, aContexteCourant);
            if (!aAttributValue || !lInfos.estFonction) {
                return true;
            }
            const lParams = Object.assign({
                accept: null,
                activate: null,
                deactivate: null,
                drop: null,
                over: null,
                out: null
            }, lInfos.callback([aContexteCourant.node]));
            let lFuncDetach = null;
            let lObjetDrop = null;
            const lFuncMove = function() {
                if (lObjetDrop && lObjetDrop.drag) {
                    const lEstDansZone = !!ObjetPosition_1.GPosition.positionDansZone(lObjetDrop.drag.pos, aContexteCourant.node);
                    if (lObjetDrop.hoverDrop !== lEstDansZone) {
                        lObjetDrop.hoverDrop = lEstDansZone;
                        if (lObjetDrop.hoverDrop) {
                            $(aContexteCourant.node).addClass('ie-droppable-hover');
                            if (lParams.over) {
                                lParams.over(lObjetDrop);
                            }
                        } else {
                            $(aContexteCourant.node).removeClass('ie-droppable-hover');
                            if (lParams.out) {
                                lParams.out(lObjetDrop);
                            }
                        }
                    }
                }
            };
            const lFuncEnd = () => {
                const lDropTemp = lObjetDrop;
                lObjetDrop = null;
                if (lDropTemp) {
                    lFuncDetach();
                    $(aContexteCourant.node).removeClass('ie-droppable-active ie-droppable-hover');
                    if (lDropTemp.hoverDrop) {
                        lDropTemp.drag.isDropped = true;
                        if (lParams.drop) {
                            lParams.drop(lDropTemp);
                        }
                    }
                    if (lParams.deactivate) {
                        lParams.deactivate(lDropTemp);
                    }
                }
            }
            ;
            lFuncDetach = () => {
                u_invocateur_dragdrop.desabonner(`stop-drag`, lFuncEnd);
                u_invocateur_dragdrop.desabonner(`move-drag`, lFuncMove);
            }
            ;
            const lFuncStart = (aParamsDrag) => {
                lObjetDrop = {
                    drag: aParamsDrag,
                    drop: {
                        node: aContexteCourant.node
                    },
                    hoverDrop: false
                };
                if (lParams.accept && !lParams.accept(lObjetDrop)) {
                    lObjetDrop = null;
                    return;
                }
                lFuncDetach();
                u_invocateur_dragdrop.abonner(`stop-drag`, lFuncEnd);
                u_invocateur_dragdrop.abonner(`move-drag`, lFuncMove);
                $(aContexteCourant.node).addClass('ie-droppable-active');
                if (lParams.activate) {
                    lParams.activate(lObjetDrop);
                }
                lFuncMove();
            }
            ;
            u_invocateur_dragdrop.abonner(`start-drag`, lFuncStart);
            $(aContexteCourant.node).on('destroyed', () => {
                lObjetDrop = null;
                u_invocateur_dragdrop.desabonner(`start-drag`, lFuncStart);
                lFuncDetach();
            }
            ).addClass('ie-droppable');
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-droppable="' + (lInfos.nomCommentaire || aAttributValue) + '"');
            return true;
        }
        );
    },
    fn: 'iehtml.draggabledroppable.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Navigateur = exports.ObjetNavigateur = void 0;
        require("Divers.js");
        require("DeclarationJQuery.js");
        const Invocateur_1 = require("Invocateur");
        const ObjetSupport_1 = require("ObjetSupport");
        const ObjetPosition_1 = require("ObjetPosition");
        const ToucheClavier_1 = require("ToucheClavier");
        const TypeNote_1 = require("TypeNote");
        const Enumere_BoutonSouris_1 = require("Enumere_BoutonSouris");
        const Enumere_Event_1 = require("Enumere_Event");
        const AccessApp_1 = require("AccessApp");
        const IEHtml_DraggableDroppable_css_1 = require("IEHtml.DraggableDroppable.css");
        const IEHtml_DraggableDroppable_1 = require("IEHtml.DraggableDroppable");
        global.GNavigateur = null;
        let uTimerPresenceUtilisateur;
        let uTimerDeclencherVerifierPresenceUtilisateur = null;
        const c_dureeInteractionUtilisateur = 10 * 60 * 1000;
        let u_count_modal_mobile = 0;
        class ObjetNavigateur {
            constructor() {
                this.versionAndroid = [0, 0, 0];
                ObjetPosition_1.GPosition.setNavigateur(this);
                this.Nom = 'GNavigateur';
                this.OnEvent = [];
                this.nbBlocageClavier = 0;
                this.interactionUtilisateur = true;
                this.chargementTermine = false;
                if (document.body) {
                    this.initialiser();
                } else {
                    const lThis = this;
                    $(document).ready( () => {
                        lThis.initialiser();
                    }
                    );
                }
                this.interfaceBloquee = false;
                this.declarationEvenements();
            }
            initialiser() {
                this.UserAgent = navigator.userAgent;
                const LIndex = this.UserAgent.lastIndexOf('MSIE');
                this.isIpad = this.UserAgent.lastIndexOf('iPad') !== -1;
                this.isIphone = this.UserAgent.lastIndexOf('iPhone') !== -1;
                this.isAndroid = this.UserAgent.lastIndexOf('Android') !== -1;
                this.isWinMob = this.UserAgent.toLowerCase().lastIndexOf('windows phone') !== -1 || this.UserAgent.toLowerCase().lastIndexOf('windows mobile') !== -1;
                this.isEdge = this.UserAgent.lastIndexOf('Edge') !== -1;
                this.isMacOs = this.UserAgent.search(/Mac\s?OS/gi) > -1;
                if (this.isAndroid) {
                    try {
                        const lMatchAndroid = (this.UserAgent).match(/android\s([0-9.]*)/i);
                        if (lMatchAndroid && lMatchAndroid[1]) {
                            const lVersionAndroid = lMatchAndroid[1].split('.');
                            [0, 1, 2].forEach( (aVal) => {
                                this.versionAndroid[aVal] = parseInt(lVersionAndroid[aVal] || '0', 10);
                            }
                            );
                        }
                    } catch (e) {}
                }
                if (this.isIpad || this.isIphone) {
                    try {
                        const lMatchIOS = (navigator.appVersion || '').match(/OS (\d+)_(\d+)_?(\d+)?/);
                        if (lMatchIOS) {
                            this.isIOS = true;
                            this.versionIOS = [parseInt(lMatchIOS[1], 10), parseInt(lMatchIOS[2], 10), parseInt(lMatchIOS[3] || '0', 10)];
                        }
                    } catch (e) {}
                }
                if (this.isMacOs) {
                    try {
                        const lMatchMacOS = (navigator.appVersion || '').match(/Mac OS X (\d+)_(\d+)_?(\d+)?/);
                        if (lMatchMacOS) {
                            this.versionMacOS = [parseInt(lMatchMacOS[1], 10), parseInt(lMatchMacOS[2], 10), parseInt(lMatchMacOS[3] || '0', 10)];
                        }
                    } catch (e) {}
                }
                if (document.body.parentNode.parentNode.firstChild.nodeValue === null || document.body.parentNode.parentNode.firstChild.nodeValue === undefined) {
                    this.IsIE9 = parseInt(this.UserAgent.substring(LIndex + 5, LIndex + 6), 10) === 9;
                }
                try {
                    this.IsIE = LIndex !== -1;
                } catch (e) {
                    this.IsIE = LIndex !== -1;
                }
                this.IsIE = (LIndex !== -1) || (this.UserAgent.lastIndexOf('Trident') !== -1);
                if (this.IsIE) {
                    this.IEVersion = this.UserAgent.match(/MSIE (.*?);/) ? parseInt(this.UserAgent.match(/MSIE (.*?);/)[1], 10) : 0;
                    this.IEModeCompatible = this.IEVersion > document.documentMode;
                }
                this.isIETouch = this.IsIE && /Touch/.test(this.UserAgent);
                this.isIE9Mobile = this.IsIE && /Windows Phone OS 7/.test(this.UserAgent);
                this.isTactile = this.isIpad || this.isIphone || this.isAndroid || this.isIETouch;
                this.IsWebKit = this.UserAgent.lastIndexOf('AppleWebKit/') > -1;
                this.IsGecko = !this.IsIE && this.UserAgent.lastIndexOf('Gecko') > -1 && this.UserAgent.lastIndexOf('KHTML') === -1;
                this.IsOpera = Object.prototype.toString.call(window.opera) === '[object Opera]';
                this.isSafari = this.UserAgent.search(/safari/gi) > -1 && this.UserAgent.search(/chrome/gi) === -1;
                if (!this.isTactile && this.isSafari && this.isMacOs && this.UserAgent.lastIndexOf('Macintosh') !== -1 && 'ontouchstart'in window && window.navigator && window.navigator.maxTouchPoints > 1 && !this.isAndroid) {
                    this.isIpad = true;
                    this.isTactile = true;
                }
                this.withContentEditable = this.IsIE || this.IsOpera || this.IsGecko || (this.IsWebKit && !this.isAndroid && !this.isIphone && !this.isIpad) || (this.IsWebKit && parseInt(this.UserAgent.match(/AppleWebKit\/(\d*)/)[1], 10) >= 534);
                ObjetSupport_1.Support.addInit( () => {
                    _uniformisationTouch();
                    if (ObjetSupport_1.Support.supportTouch && (this.isIphone || this.isIpad)) {
                        _emulationContextMenu.call(this);
                    }
                    if (ObjetSupport_1.Support.supportTouch) {
                        document.addEventListener('touchmove', (aEvent) => {
                            if (aEvent.target.closest(`.${IEHtml_DraggableDroppable_css_1.StylesIEHtmlDraggableDroppable.ieDraggableHandle}`) && !aEvent.target.closest(`.${IEHtml_DraggableDroppable_1.StylesIEHtmlDraggableDroppableSelecteur.ieDraggableHandleCancel}`)) {
                                aEvent.preventDefault();
                            }
                        }
                        , {
                            passive: false
                        });
                    }
                }
                );
                const lThis = this;
                document.addEventListener('pointerdown', (aEvent) => {
                    lThis.pointerX = aEvent.pageX;
                    lThis.pointerY = aEvent.pageY;
                }
                , {
                    capture: true
                });
                document.addEventListener('pointermove', (aEvent) => {
                    lThis.pointerX = aEvent.pageX;
                    lThis.pointerY = aEvent.pageY;
                }
                , {
                    capture: true
                });
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.eventIOAjax, this._surEventIOAjax.bind(this));
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.patience, this._surPatience.bind(this));
                this.setIsTactile(this.isTactile);
            }
            get ecranL() {
                return document.body.scrollWidth;
            }
            get ecranH() {
                return document.body.scrollHeight;
            }
            get clientL() {
                return document.body.clientWidth;
            }
            get clientH() {
                return document.body.clientHeight;
            }
            get isLayoutTactile() {
                return false;
            }
            resetCodeTouche() {
                this.CodeTouche = null;
                this.ShiftTouche = null;
                this.AltTouche = null;
                this.CtrlTouche = null;
                this.CmdTouche = null;
            }
            setIsTactile(aVal) {
                this.isTactile = aVal;
                if (aVal) {
                    $(document.body).addClass('isTactile');
                } else {
                    $(document.body).removeClass('isTactile');
                }
            }
            getBloquerClavier() {
                return this.nbBlocageClavier > 0;
            }
            _surBeforeUnload() {
                let lData;
                if (Invocateur_1.Invocateur) {
                    lData = {};
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage, lData);
                    if (lData.message) {
                        return lData.message;
                    }
                }
                if ((0,
                AccessApp_1.getApp)()) {
                    (0,
                    AccessApp_1.getApp)().unloadEnCours = true;
                    setTimeout( () => {
                        if ((0,
                        AccessApp_1.getApp)()) {
                            (0,
                            AccessApp_1.getApp)().unloadEnCours = false;
                        }
                    }
                    , 500);
                }
            }
            viderCache() {
                this.OnEvent = [];
                if (uTimerPresenceUtilisateur) {
                    clearTimeout(uTimerPresenceUtilisateur);
                }
                if (uTimerDeclencherVerifierPresenceUtilisateur) {
                    clearTimeout(uTimerDeclencherVerifierPresenceUtilisateur);
                }
            }
            getEventInvocateur(aGenreEvent) {
                return 'IIE_EventNavigateur_' + aGenreEvent;
            }
            stopperEvenement(AEvenement) {
                AEvenement = _getEvenement(AEvenement);
                if (AEvenement) {
                    AEvenement.cancelBubble = true;
                    if (AEvenement.stopPropagation) {
                        AEvenement.stopPropagation();
                    }
                }
            }
            bloquerValeurEvenement(aEvenement) {
                aEvenement = _getEvenement(aEvenement);
                if (aEvenement) {
                    if (aEvenement.preventDefault) {
                        aEvenement.preventDefault();
                    } else {
                        aEvenement.returnValue = false;
                    }
                }
            }
            declarationEvenements() {
                try {
                    const lThis = this;
                    window.onerror = function(AMessage, AUrl, ALigne) {
                        IE.log.addLog('ObjetNavigateur.surError : ' + AMessage + '; ' + AUrl + '; Ligne : ' + ALigne, 'ERROR', IE.log.genre.Erreur);
                        lThis.declencherEvenements(Enumere_Event_1.EEvent.SurError);
                    }
                    ;
                    document.onclick = () => {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurClick);
                    }
                    ;
                    document.onkeyup = () => {
                        this.altPrecedent = this.AltTouche;
                        this.shiftPrecedent = this.ShiftTouche;
                        this.ShiftTouche = null;
                        this.AltTouche = null;
                        this.CtrlTouche = null;
                        this.CmdTouche = null;
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurKeyUp);
                    }
                    ;
                    document.onkeypress = (e) => {
                        this.setCaractereTouche(e);
                        return this.declencherEvenements(Enumere_Event_1.EEvent.SurKeyPress);
                    }
                    ;
                    document.onmousemove = () => {
                        this.enDeplacement();
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurMouseMove);
                    }
                    ;
                    document.onmouseup = () => {
                        this.SourisBouton = false;
                        this.finDeplacement();
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurMouseUp);
                    }
                    ;
                    document.onmousedown = () => {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurMouseDown);
                    }
                    ;
                    document.onselectstart = () => {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurSelectStart);
                    }
                    ;
                    $(document).on({
                        keydown: (aEvent) => {
                            if (aEvent.ctrlKey && aEvent.keyCode === 188) {
                                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.toucheDEBUG);
                            }
                            return this.declencherEvenements(Enumere_Event_1.EEvent.SurKeyDown);
                        }
                    });
                    $(document).on('click dblclick mousedown mouseup mousemove ' + 'keydown keyup keypress ' + 'touchstart touchend touchcancel touchmove ' + 'pointerdown pointerup pointermove ' + 'contextmenu ' + 'ie-pointerdownlong ' + 'ie-doubletap', function(event) {
                        if ((event.type === 'click' || event.type === 'dblclick') && event.which !== 1) {
                            return;
                        }
                        Invocateur_1.Invocateur.evenement(lThis.getEventInvocateur(event.type), event, this);
                    });
                    document.addEventListener('pointerdown', function(aEvent) {
                        Invocateur_1.Invocateur.evenement(`${lThis.getEventInvocateur(aEvent.type)}.capture`, aEvent, this);
                    }, {
                        capture: true
                    });
                    document.addEventListener('keydown', function(aEvent) {
                        Invocateur_1.Invocateur.evenement(`${lThis.getEventInvocateur(aEvent.type)}.capture`, aEvent, this);
                    }, {
                        capture: true
                    });
                    this._verifierPresenceUtilisateur();
                    $(document).on('visibilitychange', () => {
                        switch (document.hidden) {
                        case true:
                            lThis._utilisateurNonPresent();
                            break;
                        case false:
                            lThis._verifierPresenceUtilisateur();
                            break;
                        }
                    }
                    );
                    const lEventMap = {};
                    lEventMap.resize = (aEvent) => {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.resizeNavigateur, aEvent);
                        this.surResize();
                    }
                    ;
                    lEventMap.scroll = () => {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurScroll);
                    }
                    ;
                    lEventMap.load = () => {
                        this.chargementTermine = true;
                    }
                    ;
                    lEventMap.pagehide = () => {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.surRechargementPage);
                        this.viderCache();
                    }
                    ;
                    lEventMap.beforeunload = this._surBeforeUnload;
                    lEventMap.blur = () => {
                        this.resetCodeTouche();
                    }
                    ;
                    if (!IE.estMobile) {
                        lEventMap.orientationchange = () => {
                            if (lThis.isTactile) {
                                lThis._surResize();
                            }
                        }
                        ;
                    }
                    $(window).on(lEventMap, {
                        instance: this
                    });
                    document.addEventListener('mousedown', (aEvent) => {
                        lThis.SourisBouton = true;
                        lThis.BoutonSouris = lThis.getBoutonSouris(aEvent);
                    }
                    , true);
                    document.addEventListener('keydown', (aEvent) => {
                        if (lThis) {
                            lThis.setCodeTouche(aEvent);
                            lThis.CaractereTouche = '';
                        }
                    }
                    , true);
                    document.addEventListener('keypress', (aEvent) => {
                        if (lThis) {
                            lThis.setCaractereTouche(aEvent);
                        }
                    }
                    , true);
                    document.addEventListener('keyup', (aEvent) => {
                        if (lThis) {
                            lThis.setCodeTouche(aEvent);
                        }
                    }
                    , true);
                } catch (e) {
                    IE.log.addLog(`exception - ${e}`);
                }
            }
            _surEventIOAjax(aParametres) {
                if (aParametres.init || aParametres.actualisation || aParametres.ignorerBlocageClavier) {
                    return;
                }
                this._surPatience(!!aParametres.emission);
            }
            _surPatience(aActiver) {
                this.nbBlocageClavier = this.nbBlocageClavier + (aActiver ? 1 : -1);
                this.nbBlocageClavier = Math.max(0, this.nbBlocageClavier);
            }
            getZIndexModalMobile(aAdd) {
                if (aAdd === true) {
                    u_count_modal_mobile += 1;
                } else if (aAdd === false) {
                    u_count_modal_mobile = Math.max(0, u_count_modal_mobile - 1);
                }
                return 1000 + u_count_modal_mobile * 2;
            }
            addEvent(AGenre, APere, AEvenement) {
                if (!this.chargementTermine) {
                    return;
                }
                if (!AEvenement || !APere) {
                    return;
                }
                if (!this.OnEvent[AGenre]) {
                    this.OnEvent[AGenre] = [];
                }
                this.OnEvent[AGenre].push({
                    evenement: AEvenement,
                    pere: APere
                });
            }
            delEvent(AGenre, APere) {
                const LNom = APere.getNom();
                const LArrayEvent = this.OnEvent[AGenre];
                if (!LArrayEvent) {
                    IE.log.addLog('delEvent sur un element non ajout ! APere = ' + APere.getNom(), null, IE.log.genre.Erreur);
                    return;
                }
                let i = 0;
                while (i < LArrayEvent.length) {
                    if (LArrayEvent[i].pere.getNom() === LNom) {
                        this.OnEvent[AGenre].splice(i, 1);
                    } else {
                        i++;
                    }
                }
            }
            declencherEvenements(AGenre) {
                let LContinuer;
                for (let I = 0; this.OnEvent[AGenre] && (I < this.OnEvent[AGenre].length); I++) {
                    let lEvent = this.OnEvent[AGenre][I];
                    LContinuer = !lEvent.evenement.call(lEvent.pere) && (LContinuer !== false);
                }
                return LContinuer;
            }
            isToucheEspace() {
                return (this.CodeTouche === ToucheClavier_1.ToucheClavier.Espace) && !this.ShiftTouche;
            }
            isToucheRetourChariot() {
                return (this.CodeTouche === ToucheClavier_1.ToucheClavier.RetourChariot) && !this.ShiftTouche && !this.AltTouche && !this.CtrlTouche;
            }
            isToucheSelection() {
                return (this.isToucheRetourChariot() || this.isToucheEspace());
            }
            isToucheMenuContextuel() {
                return (this.CodeTouche === ToucheClavier_1.ToucheClavier.ContextMenu) || ((this.CodeTouche === ToucheClavier_1.ToucheClavier.RetourChariot) && !this.ShiftTouche && (this.AltTouche || this.CtrlTouche));
            }
            isToucheEchap() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.Echap;
            }
            isToucheFlecheHaut() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.FlecheHaut;
            }
            isToucheFlecheBas() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.FlecheBas;
            }
            isToucheFlecheGauche() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.FlecheGauche;
            }
            isToucheFlecheDroite() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.FlecheDroite;
            }
            isToucheFleche() {
                return (this.isToucheFlecheHaut() || this.isToucheFlecheBas() || this.isToucheFlecheGauche() || this.isToucheFlecheDroite());
            }
            isToucheShiftTab() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.Tab && this.ShiftTouche;
            }
            isToucheOnlyTab() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.Tab && !this.ShiftTouche;
            }
            getToucheAltNum(ADeb, AFin) {
                let LCodeTouche;
                if (this.CodeTouche >= ToucheClavier_1.ToucheClavier.Numpad_0) {
                    LCodeTouche = this.CodeTouche - ToucheClavier_1.ToucheClavier.Numpad_0;
                    return this.altPrecedent && !this.shiftPrecedent && (LCodeTouche >= ADeb) && (LCodeTouche <= AFin) ? LCodeTouche : null;
                }
                LCodeTouche = this.CodeTouche - ToucheClavier_1.ToucheClavier._0;
                return this.altPrecedent && this.shiftPrecedent && (LCodeTouche >= ADeb) && (LCodeTouche <= AFin) ? LCodeTouche : null;
            }
            estCaractereDecimal() {
                return this.estCaractere('0-9');
            }
            estCaractereHexa() {
                return this.estCaractere('0-9abcdefABCDEF');
            }
            estCaractereDate() {
                return this.estCaractere('0-9');
            }
            estCaractereNote(aAvecLettre, aAvecVirgule, aAvecMoins, aCaractereAnnotation) {
                return TypeNote_1.TypeNote.estCaractereNote(this.CaractereTouche, aAvecLettre, aAvecVirgule, aAvecMoins, aCaractereAnnotation);
            }
            estCaractereAlphaNumerique() {
                return !this.AltTouche && !this.CtrlTouche && (new RegExp('[0-9.a-z.A-Z]').test(this.CaractereTouche));
            }
            estCaractere(aRegExp) {
                return ToucheClavier_1.ToucheClavierUtil.estCaractere(this.CaractereTouche, aRegExp);
            }
            estSourisBoutonGauche() {
                return (this.BoutonSouris === Enumere_BoutonSouris_1.EGenreBoutonSouris.Gauche);
            }
            estSourisBoutonDroit() {
                return (this.BoutonSouris === Enumere_BoutonSouris_1.EGenreBoutonSouris.Droite);
            }
            setCaractereTouche(e) {
                e = e || window.event;
                this.CaractereTouche = e.charCode === 0 ? '' : String.fromCharCode(e.charCode || e.keyCode);
            }
            setCodeTouche(e) {
                e = e || window.event;
                this.CodeTouche = e.keyCode;
                this.ShiftTouche = e.shiftKey;
                this.AltTouche = e.altKey;
                this.CtrlTouche = e.ctrlKey;
                this.CmdTouche = e.metaKey;
            }
            getBoutonSouris(e) {
                if (e) {
                    switch (e.button) {
                    case 0:
                        return Enumere_BoutonSouris_1.EGenreBoutonSouris.Gauche;
                    case 2:
                        return Enumere_BoutonSouris_1.EGenreBoutonSouris.Droite;
                    }
                } else {
                    switch (window.event.button) {
                    case 1:
                        return Enumere_BoutonSouris_1.EGenreBoutonSouris.Gauche;
                    case 2:
                        return Enumere_BoutonSouris_1.EGenreBoutonSouris.Droite;
                    }
                }
            }
            getLargeurBarreDeScroll() {
                return ObjetSupport_1.Support.tailleScrollBar || 8;
            }
            getHost() {
                return window.location.href.slice(0, window.location.href.lastIndexOf('/') + 1);
            }
            surResize() {
                if (!IE.estMobile && !this.isTactile) {
                    this._surResize();
                }
            }
            _surResize() {
                if (IE.estMobile) {
                    return;
                }
                if (this.EnResize) {
                    window.clearTimeout(this.TimerResize);
                } else {
                    this.EnResize = true;
                    this.declencherEvenements(Enumere_Event_1.EEvent.SurPreResize);
                }
                this.declencherEvenements(Enumere_Event_1.EEvent.SurResize);
                this.TimerResize = setTimeout( () => {
                    try {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurPostResize);
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurFinResize);
                    } finally {
                        this.EnResize = false;
                    }
                }
                , 300);
            }
            positionnerMenuContextuelSurId(aId, aDeltaX, aDeltaY) {
                const lElement = document.getElementById(aId);
                if (lElement) {
                    this.pointerX = aDeltaX ? ObjetPosition_1.GPosition.getLeft(lElement) + aDeltaX : ObjetPosition_1.GPosition.getLeft(lElement);
                    this.pointerY = aDeltaY ? ObjetPosition_1.GPosition.getTop(lElement) + aDeltaY : ObjetPosition_1.GPosition.getTop(lElement);
                }
            }
            debDeplacement(APere, AId) {
                this._idDeplacement = AId;
                this.Deplacement = true;
                this.DecalageX = this.pointerX - ObjetPosition_1.GPosition.getLeft(this._idDeplacement);
                this.DecalageY = this.pointerY - ObjetPosition_1.GPosition.getTop(this._idDeplacement);
            }
            enDeplacement() {
                if (this.Deplacement) {
                    ObjetPosition_1.GPosition.placer(this._idDeplacement, this.pointerX - this.DecalageX, this.pointerY - this.DecalageY);
                }
            }
            finDeplacement() {
                if (this.Deplacement) {
                    this.Deplacement = false;
                    this.declencherEvenements(Enumere_Event_1.EEvent.SurFinDeplacement);
                    delete this._idDeplacement;
                }
            }
            _utilisateurNonPresent() {
                if (uTimerPresenceUtilisateur) {
                    clearTimeout(uTimerPresenceUtilisateur);
                    uTimerPresenceUtilisateur = null;
                }
                if (this.interactionUtilisateur) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modificationPresenceUtilisateur, false);
                    this.interactionUtilisateur = false;
                }
            }
            _verifierPresenceUtilisateur() {
                if (!this.interactionUtilisateur) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modificationPresenceUtilisateur, true);
                }
                this.interactionUtilisateur = true;
                if (uTimerPresenceUtilisateur) {
                    clearTimeout(uTimerPresenceUtilisateur);
                    uTimerPresenceUtilisateur = null;
                }
                uTimerPresenceUtilisateur = setTimeout(this._utilisateurNonPresent.bind(this), c_dureeInteractionUtilisateur);
                $(document).off('mousedown keydown mousemove pointerdown touchstart', this._verifierPresenceUtilisateur.bind(this));
                if (uTimerDeclencherVerifierPresenceUtilisateur) {
                    clearTimeout(uTimerDeclencherVerifierPresenceUtilisateur);
                    uTimerDeclencherVerifierPresenceUtilisateur = null;
                }
                uTimerDeclencherVerifierPresenceUtilisateur = setTimeout( () => {
                    uTimerDeclencherVerifierPresenceUtilisateur = null;
                    $(document).on('mousedown keydown mousemove pointerdown touchstart', this._verifierPresenceUtilisateur.bind(this));
                }
                , 1000 * 10);
            }
        }
        exports.ObjetNavigateur = ObjetNavigateur;
        function _emulationContextMenu() {
            const lDelai = 500;
            let uGestionTouch = null;
            const const_margesDeplacementContextMenu = 100;
            function _touchstart(event) {
                const lPosition = ObjetPosition_1.GPosition.getPositionEventJQuery(event);
                uGestionTouch = {
                    x: lPosition.x,
                    y: lPosition.y,
                    timeStart: Date.now()
                };
            }
            function _toucheend(aEvent) {
                let lGestionTouch = uGestionTouch;
                uGestionTouch = null;
                if (lGestionTouch && (Date.now() - lGestionTouch.timeStart > lDelai)) {
                    const lPosition = ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent);
                    const lAccepterContextMenu = aEvent.target && Math.abs(lPosition.x - lGestionTouch.x) < const_margesDeplacementContextMenu && Math.abs(lPosition.y - lGestionTouch.y) < const_margesDeplacementContextMenu && (!ObjetPosition_1.GPosition || ObjetPosition_1.GPosition.positionDansZone(lPosition, aEvent.target));
                    if (!lAccepterContextMenu) {
                        return;
                    }
                    aEvent.stopImmediatePropagation();
                    aEvent.preventDefault();
                    const lEvent = $.Event('contextmenu', {
                        pointerType: 'touch',
                        originalEvent: aEvent.originalEvent
                    });
                    setTimeout( () => {
                        $(aEvent.target).trigger(lEvent);
                    }
                    , 0);
                }
            }
            $(document).on({
                touchstart: _touchstart,
                touchend: _toucheend,
                touchcancel() {
                    uGestionTouch = {};
                },
                contextmenu() {
                    uGestionTouch = {};
                }
            });
        }
        function _uniformisationTouch() {
            let uLongTouch = null, uLongTouchTimer, uLongTouchTimerFin, const_delaiLongTouch = 500, const_delaiLongTouchFin = 1500, const_margesDeplacementLongTouch = 50, const_delaiDoubleTap = 300, const_margesDeplacementDoubleTap = 50, uLastTap = {
                time: 0,
                target: null,
                x: 0,
                y: 0
            };
            function _stopperLongTouch() {
                clearTimeout(uLongTouchTimer);
                clearTimeout(uLongTouchTimerFin);
                uLongTouch = null;
            }
            function _demarrageLongTouch(aEventOrigine) {
                _stopperLongTouch();
                uLongTouch = {
                    pointerId: aEventOrigine.pointerId,
                    x: aEventOrigine.clientX,
                    y: aEventOrigine.clientY,
                    ok: false
                };
                uLongTouchTimer = setTimeout( () => {
                    if (uLongTouch) {
                        uLongTouch.ok = true;
                    }
                }
                , const_delaiLongTouch);
                uLongTouchTimerFin = setTimeout( () => {
                    if (uLongTouch) {
                        _finaliserLongTouch(aEventOrigine, true);
                    }
                }
                , const_delaiLongTouchFin);
            }
            function _eventDansMargesLongTouch(aEvent) {
                return uLongTouch && Math.abs(aEvent.clientX - uLongTouch.x) < const_margesDeplacementLongTouch && Math.abs(aEvent.clientY - uLongTouch.y) < const_margesDeplacementLongTouch;
            }
            function _finaliserLongTouch(aEventOrigine, aSurTimer) {
                clearTimeout(uLongTouchTimer);
                clearTimeout(uLongTouchTimerFin);
                if (uLongTouch.ok && uLongTouch.pointerId === aEventOrigine.pointerId && _eventDansMargesLongTouch(aEventOrigine)) {
                    const lEventSimule = $.Event('ie-pointerdownlong', Object.assign(aEventOrigine, {
                        type: 'ie-pointerdownlong',
                        surTimer: false
                    }));
                    if (aSurTimer) {
                        lEventSimule.surTimer = true;
                    }
                    $(aEventOrigine.target).trigger(lEventSimule);
                }
                _stopperLongTouch();
            }
            function _detectDoubleTap(aEventOrigine) {
                const lCurrentTime = Date.now();
                const lDelaiTap = lCurrentTime - uLastTap.time;
                if (uLastTap.time > 0 && lDelaiTap < const_delaiDoubleTap && lDelaiTap > 0 && uLastTap.target === aEventOrigine.target && _eventDansMargesDoubleTap(aEventOrigine)) {
                    const lEventSimule = $.Event('ie-doubletap', Object.assign(aEventOrigine, {
                        type: 'ie-doubletap'
                    }));
                    $(aEventOrigine.target).trigger(lEventSimule);
                    uLastTap.time = 0;
                    uLastTap.target = null;
                    uLastTap.x = 0;
                    uLastTap.y = 0;
                } else {
                    uLastTap.time = lCurrentTime;
                    uLastTap.target = aEventOrigine.target;
                    uLastTap.x = aEventOrigine.clientX;
                    uLastTap.y = aEventOrigine.clientY;
                }
            }
            function _eventDansMargesDoubleTap(aEvent) {
                return uLastTap && Math.abs(aEvent.clientX - uLastTap.x) < const_margesDeplacementDoubleTap && Math.abs(aEvent.clientY - uLastTap.y) < const_margesDeplacementDoubleTap;
            }
            $(document).on({
                'pointerdown.pointerdownlong'(aEvent) {
                    if (aEvent.target) {
                        _demarrageLongTouch(aEvent);
                    }
                },
                'pointerup.pointerdownlong'(aEvent) {
                    if (aEvent.target && uLongTouch) {
                        _finaliserLongTouch(aEvent);
                    }
                },
                'pointermove.pointerdownlong'(aEvent) {
                    if (uLongTouch) {
                        if (uLongTouch.pointerId !== aEvent.pointerId || !_eventDansMargesLongTouch(aEvent)) {
                            _stopperLongTouch();
                        }
                    }
                },
                'pointercancel.pointerdownlong'() {
                    if (uLongTouch) {
                        _stopperLongTouch();
                    }
                },
                'scroll.pointerdownlong'() {
                    if (uLongTouch) {
                        _stopperLongTouch();
                    }
                },
                'click.doubleTap'(aEvent) {
                    if (aEvent.target) {
                        _detectDoubleTap(aEvent);
                    }
                }
            });
            _initSwipeEvent();
        }
        function _initSwipeEvent() {
            function triggerCustomEvent(obj, eventType, event, bubble) {
                const originalType = event.type;
                event.type = eventType;
                if (bubble) {
                    $.event.trigger(event, undefined, obj);
                } else {
                    $.event.dispatch.call(obj, event);
                }
                event.type = originalType;
            }
            const lJDocument = $(document);
            const lSwipe = {
                scrollSupressionThreshold: 30,
                durationThreshold: 1000,
                horizontalDistanceThreshold: exports.Navigateur.isIOS ? 60 : 30,
                verticalDistanceThreshold: exports.Navigateur.isIOS ? 60 : 30,
                getLocation: function(event) {
                    const winPageX = window.pageXOffset;
                    const winPageY = window.pageYOffset;
                    let x = event.clientX;
                    let y = event.clientY;
                    if (event.pageY === 0 && Math.floor(y) > Math.floor(event.pageY) || event.pageX === 0 && Math.floor(x) > Math.floor(event.pageX)) {
                        x = x - winPageX;
                        y = y - winPageY;
                    } else if (y < (event.pageY - winPageY) || x < (event.pageX - winPageX)) {
                        x = event.pageX - winPageX;
                        y = event.pageY - winPageY;
                    }
                    return {
                        x: x,
                        y: y
                    };
                },
                start: function(event) {
                    const data = event.originalEvent.touches ? event.originalEvent.touches[0] : event
                      , location = $.event.special.swipe.getLocation(data);
                    return {
                        time: (new Date()).getTime(),
                        coords: [location.x, location.y],
                        origin: $(event.target)
                    };
                },
                stop: function(event) {
                    const data = event.originalEvent.touches ? event.originalEvent.touches[0] : event
                      , location = $.event.special.swipe.getLocation(data);
                    return {
                        time: (new Date()).getTime(),
                        coords: [location.x, location.y]
                    };
                },
                handleSwipe: function(start, stop, thisObject, origTarget) {
                    if (stop.time - start.time < $.event.special.swipe.durationThreshold) {
                        let direction = null;
                        if (Math.abs(start.coords[0] - stop.coords[0]) > $.event.special.swipe.horizontalDistanceThreshold && Math.abs(start.coords[1] - stop.coords[1]) < $.event.special.swipe.verticalDistanceThreshold) {
                            direction = start.coords[0] > stop.coords[0] ? 'swipeleft' : 'swiperight';
                        } else if (Math.abs(start.coords[0] - stop.coords[0]) < $.event.special.swipe.horizontalDistanceThreshold && Math.abs(start.coords[1] - stop.coords[1]) > $.event.special.swipe.verticalDistanceThreshold) {
                            direction = start.coords[1] > stop.coords[1] ? 'swipeup' : 'swipedown';
                        }
                        if (direction) {
                            triggerCustomEvent(thisObject, 'swipe', $.Event('swipe', {
                                target: origTarget,
                                swipestart: start,
                                swipestop: stop
                            }), true);
                            triggerCustomEvent(thisObject, direction, $.Event(direction, {
                                target: origTarget,
                                swipestart: start,
                                swipestop: stop
                            }), true);
                            return true;
                        }
                    }
                    return false;
                },
                eventInProgress: false,
                setup: function() {
                    let events;
                    const thisObject = this;
                    const $this = $(thisObject);
                    const context = {};
                    events = $.data(this, 'mobile-events');
                    if (!events) {
                        events = {
                            length: 0
                        };
                        $.data(this, 'mobile-events', events);
                    }
                    events.length++;
                    events.swipe = context;
                    context.start = function(event) {
                        $.event.special.swipe.eventInProgress = true;
                        let stop;
                        const start = $.event.special.swipe.start(event);
                        const origTarget = event.target;
                        let emitted = false;
                        context.move = function(event) {
                            if (!start || event.isDefaultPrevented() || event.originalEvent.changedTouches.length > 1) {
                                return;
                            }
                            stop = $.event.special.swipe.stop(event);
                            if (!emitted) {
                                emitted = $.event.special.swipe.handleSwipe(start, stop, thisObject, origTarget);
                                if (emitted) {
                                    $.event.special.swipe.eventInProgress = false;
                                }
                            }
                        }
                        ;
                        context.stop = function() {
                            emitted = true;
                            $.event.special.swipe.eventInProgress = false;
                            lJDocument.off('touchmove', context.move);
                            context.move = null;
                        }
                        ;
                        lJDocument.on('touchmove', context.move).one('touchend', context.stop);
                    }
                    ;
                    $this.on('touchstart', context.start);
                },
                teardown: function() {
                    let events, context;
                    events = $.data(this, 'mobile-events');
                    if (events) {
                        context = events.swipe;
                        delete events.swipe;
                        events.length--;
                        if (events.length === 0) {
                            $.removeData(this, 'mobile-events');
                        }
                    }
                    if (context) {
                        if (context.start) {
                            $(this).off('touchstart', context.start);
                        }
                        if (context.move) {
                            lJDocument.off('touchmove', context.move);
                        }
                        if (context.stop) {
                            lJDocument.off('touchend', context.stop);
                        }
                    }
                }
            };
            $.event.special.swipe = lSwipe;
            $.each({
                swipeleft: 'swipe.left',
                swiperight: 'swipe.right',
                swipeup: 'swipe.up',
                swipedown: 'swipe.down'
            }, (event, sourceEvent) => {
                $.event.special[event] = {
                    setup: function() {
                        $(this).bind(sourceEvent, $.noop);
                    },
                    teardown: function() {
                        $(this).unbind(sourceEvent);
                    }
                };
            }
            );
        }
        function _getEvenement(aEvenement) {
            return aEvenement || window.event;
        }
        exports.Navigateur = new ObjetNavigateur();
        global.GNavigateur = exports.Navigateur;
    },
    fn: 'objetnavigateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeFormatDureeEnChaine = void 0;
        var TypeFormatDureeEnChaine;
        (function(TypeFormatDureeEnChaine) {
            TypeFormatDureeEnChaine[TypeFormatDureeEnChaine["fdcHeuresMinutes"] = 0] = "fdcHeuresMinutes";
            TypeFormatDureeEnChaine[TypeFormatDureeEnChaine["fdcHeuresCentiemes"] = 1] = "fdcHeuresCentiemes";
            TypeFormatDureeEnChaine[TypeFormatDureeEnChaine["fdcSequences"] = 2] = "fdcSequences";
            TypeFormatDureeEnChaine[TypeFormatDureeEnChaine["fdcPersonnalise"] = 3] = "fdcPersonnalise";
        }
        )(TypeFormatDureeEnChaine || (exports.TypeFormatDureeEnChaine = TypeFormatDureeEnChaine = {}));
    },
    fn: 'typeformatdureeenchaine.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TUtilitaireDuree = TUtilitaireDuree;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const C_HeuresParJour = 24
          , C_MinutesParHeure = 60
          , C_SecondesParMinute = 60
          , C_MilliSecondesParSeconde = 1000
          , C_MinutesParJour = C_MinutesParHeure * C_HeuresParJour
          , C_SecondesParJour = C_SecondesParMinute * C_MinutesParJour;
        function TUtilitaireDuree() {}
        TUtilitaireDuree.dureeEnHeures = function(aDuree, aSansArrondi) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                return _get(aDuree * C_HeuresParJour, aSansArrondi);
            }
            return 0;
        }
        ;
        TUtilitaireDuree.dureeEnHeuresMinutes = function(aDuree) {
            const lResult = {
                jours: 0,
                heures: 0,
                minutes: 0,
                toString: function(aFormat) {
                    let lFormat = '%hh:%mm';
                    if (aFormat === true) {
                        lFormat = '%oh%sh%om%sm';
                    } else if (typeof (aFormat) === 'string') {
                        lFormat = aFormat;
                    }
                    lFormat = lFormat.replace('%jj', (this.jours < 10 ? '0' : '') + this.jours);
                    lFormat = lFormat.replace('%xj', this.jours + '');
                    lFormat = lFormat.replace('%oj%sj', this.jours > 0 ? this.jours + ObjetTraduction_1.GTraductions.getValeur('date.separateurJour') : '');
                    lFormat = lFormat.replace('%oj', this.jours > 0 ? this.jours + '' : '');
                    lFormat = lFormat.replace('%sj', ObjetTraduction_1.GTraductions.getValeur('date.separateurJour'));
                    lFormat = lFormat.replace('%hh', (this.heures < 10 ? '0' : '') + this.heures);
                    lFormat = lFormat.replace('%xh', this.heures + '');
                    lFormat = lFormat.replace('%oh%sh', this.heures > 0 ? this.heures + ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure') : '');
                    lFormat = lFormat.replace('%oh', this.heures > 0 ? this.heures + '' : '');
                    lFormat = lFormat.replace('%sh', ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure'));
                    lFormat = lFormat.replace('%mm', (this.minutes < 10 ? '0' : '') + this.minutes);
                    lFormat = lFormat.replace('%xm', this.minutes + '');
                    lFormat = lFormat.replace('%om%sm', this.minutes > 0 ? ((this.heures > 0) && (this.minutes < 10) ? '0' : '') + this.minutes + ObjetTraduction_1.GTraductions.getValeur('date.separateurMin') : '');
                    lFormat = lFormat.replace('%om', this.minutes > 0 ? this.minutes + '' : '');
                    lFormat = lFormat.replace('%sm', ObjetTraduction_1.GTraductions.getValeur('date.separateurMin'));
                    return lFormat;
                }
            };
            if (MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                let lDureeEnMS = _get(aDuree * C_MilliSecondesParSeconde * C_SecondesParJour);
                lResult.heures = Math.floor(lDureeEnMS / (60 * 60 * 1000));
                lDureeEnMS = lDureeEnMS - lResult.heures * (60 * 60 * 1000);
                lResult.minutes = Math.floor(lDureeEnMS / (60 * 1000));
            }
            return lResult;
        }
        ;
        TUtilitaireDuree.dureeEnJoursHeuresMinutes = function(aDuree) {
            let lResult = TUtilitaireDuree.dureeEnHeuresMinutes(aDuree);
            lResult.jours = Math.floor(lResult.heures / C_HeuresParJour);
            lResult.heures = lResult.heures % C_HeuresParJour;
            return lResult;
        }
        ;
        TUtilitaireDuree.heuresEnDuree = function(aVal) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aVal)) {
                return aVal / C_HeuresParJour;
            }
            return 0;
        }
        ;
        TUtilitaireDuree.dureeEnMin = function(aDuree, aSansArrondi) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                return _get(aDuree * C_MinutesParJour, aSansArrondi);
            }
            return 0;
        }
        ;
        TUtilitaireDuree.minEnDuree = function(aVal) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aVal)) {
                return aVal / C_MinutesParJour;
            }
            return 0;
        }
        ;
        TUtilitaireDuree.dureeEnMs = function(aDuree, aSansArrondi) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                return _get(aDuree * C_MilliSecondesParSeconde * C_SecondesParJour, aSansArrondi);
            }
            return 0;
        }
        ;
        TUtilitaireDuree.msEnDuree = function(aVal) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aVal)) {
                return aVal / (C_MilliSecondesParSeconde * C_SecondesParJour);
            }
            return 0;
        }
        ;
        TUtilitaireDuree.minEnMs = function(aVal) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aVal)) {
                return aVal * C_SecondesParMinute * C_MilliSecondesParSeconde;
            }
            return 0;
        }
        ;
        function _get(aVal, aSansArrondi) {
            return aSansArrondi === true ? aVal : Math.round(aVal);
        }
    },
    fn: 'utilitaireduree.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GDate = exports.ObjetDate = exports.TradDate = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetTri_1 = require("ObjetTri");
        const TypeDomaine_1 = require("TypeDomaine");
        const TypeFormatDureeEnChaine_1 = require("TypeFormatDureeEnChaine");
        const UtilitaireDuree_1 = require("UtilitaireDuree");
        const IEHtml = require("IEHtml");
        const ObjetTraduction_2 = require("ObjetTraduction");
        const TradDate = ObjetTraduction_2.TraductionsModule.getModule('Date', {
            Mois: ['', '', '', '', '', '', '', '', '', '', '', ''],
            MoisCourt: ['', '', '', '', '', '', '', '', '', '', '', '']
        });
        exports.TradDate = TradDate;
        class ObjetDate {
            constructor() {
                this.DureeMillisecondes = 1;
                this.DureeSecondes = 1000 * this.DureeMillisecondes;
                this.DureeMinutes = 60 * this.DureeSecondes;
                this.DureeHeures = 60 * this.DureeMinutes;
                this.DureeJours = 24 * this.DureeHeures;
                this.DureeSemaines = 7 * this.DureeJours;
                this.semainesParAn = 52;
                this.aujourdhui = new Date();
                this.demain = new Date();
                this.demain.setDate(this.demain.getDate() + 1);
                this.hier = new Date();
                this.hier.setDate(this.hier.getDate() - 1);
                this.parametres = {
                    numeroPremiereSemaine: null,
                    formatDureeEnChaine: TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcHeuresMinutes
                };
                this._cacheSemainesCalendaires = {};
            }
            setDonnees(APremierLundi, aPremiereDate, aDerniereDate, APlacesParJour, APlacesParHeure, ADureeSequence, APremiereHeure, AListeHeures1, AListeHeures2, aJoursOuvres, aJour) {
                this.PremierLundi = APremierLundi;
                this.premiereDate = aPremiereDate;
                this.derniereDate = aDerniereDate;
                this.PlacesParJour = APlacesParJour;
                this.PlacesParHeure = APlacesParHeure;
                this.DureeSequence = ADureeSequence;
                this.PremiereHeure = APremiereHeure;
                this.ListeHeures = AListeHeures1 || new ObjetListeElements_1.ObjetListeElements();
                this.ListeHeuresFin = AListeHeures2;
                this.joursOuvres = aJoursOuvres || new TypeDomaine_1.TypeDomaine(true,7);
                this.jour = this.getDateDemiJour(aJour || new Date());
            }
            setParametresDate(aParams) {
                Object.assign(this.parametres, aParams);
                return this;
            }
            getDerniereDate() {
                return this.derniereDate;
            }
            estUnJourOuvre(aDate) {
                return this.joursOuvres.getValeur(GDate.getJourDeDate(aDate) + 1);
            }
            estDateEgale(aDate1, aDate2) {
                if (aDate1 && aDate2) {
                    if (!this.estDateValide(aDate1) || !this.estDateValide(aDate2)) {
                        return false;
                    }
                    return (aDate1.getTime() - aDate2.getTime()) === 0;
                } else {
                    return false;
                }
            }
            estJourEgal(aDate1, aDate2) {
                return aDate1 && aDate2 && (aDate1.getDate() === aDate2.getDate()) && (aDate1.getMonth() === aDate2.getMonth()) && (aDate1.getFullYear() === aDate2.getFullYear());
            }
            estJourSemaineEgal(aDate1, aDate2) {
                return aDate1 && aDate2 && (aDate1.getDay() === aDate2.getDay()) && (aDate1.getMonth() === aDate2.getMonth()) && (aDate1.getFullYear() === aDate2.getFullYear());
            }
            estJourCourant(aDate, aBorner) {
                return this.estJourEgal(aDate, this.getDateCourante(aBorner));
            }
            estAvantJourCourant(aDate, aBorner) {
                if (aDate) {
                    if (!this.estDateValide(aDate)) {
                        return false;
                    }
                    return (aDate.getTime() - this.getDateCourante(aBorner).getTime()) < 0;
                } else {
                    return false;
                }
            }
            estAvantJour(aDate1, aDate2) {
                if (aDate1 && aDate2) {
                    if (!this.estDateValide(aDate1) || !this.estDateValide(aDate2)) {
                        return false;
                    }
                    return (aDate1.getTime() - aDate2.getTime()) < 0;
                }
            }
            estDateValide(aDate) {
                return MethodesObjet_1.MethodesObjet.isDate(aDate) && !isNaN(aDate.getTime());
            }
            getDateJour(aDate, aBorner=false) {
                let lDate = aDate;
                if (!this.estDateValide(aDate)) {
                    lDate = new Date();
                }
                if (aBorner) {
                    lDate = this.getDateBornee(lDate);
                }
                return new Date(lDate.getFullYear(),lDate.getMonth(),lDate.getDate());
            }
            getPrecedentJourOuvre(aDate) {
                let lDate = aDate;
                do {
                    lDate = this.getJourSuivant(lDate, -1);
                } while (!this.estUnJourOuvre(lDate) && (lDate > this.premiereDate));
                return lDate;
            }
            getProchainJourOuvre(aDate) {
                let lDate = aDate;
                do {
                    lDate = this.getJourSuivant(lDate);
                } while (!this.estUnJourOuvre(lDate) && (lDate < this.derniereDate));
                return lDate;
            }
            getDateBornee(aDate) {
                if (aDate < this.premiereDate && !this.estJourEgal(aDate, this.premiereDate)) {
                    return new Date(this.premiereDate.getTime());
                }
                if (aDate > this.derniereDate && !this.estJourEgal(aDate, this.derniereDate)) {
                    return new Date(this.derniereDate.getTime());
                }
                return aDate;
            }
            getDateCourante(aBorner=false) {
                let lDate = new Date();
                lDate = new Date(lDate.getFullYear(),lDate.getMonth(),lDate.getDate());
                return aBorner === false ? lDate : this.getDateBornee(lDate);
            }
            getDateHeureCourante() {
                return this.getDateBornee(new Date());
            }
            dateEntreLesDates(aDate, aBorneDateDebut, aBorneDateFin, aComparaisonTime=false) {
                if (!aDate) {
                    return false;
                }
                return (!aBorneDateDebut || aDate >= aBorneDateDebut || (aComparaisonTime !== true && this.estJourEgal(aDate, aBorneDateDebut))) && (!aBorneDateFin || aDate <= aBorneDateFin || (aComparaisonTime !== true && this.estJourEgal(aDate, aBorneDateFin)));
            }
            estDateJourAvant(aDate1, aDate2) {
                if (aDate1 && aDate2) {
                    if (!this.estDateValide(aDate1) || !this.estDateValide(aDate2)) {
                        return false;
                    }
                    return this.estAvantJour(aDate1, aDate2) && !this.estJourEgal(aDate1, aDate2);
                } else {
                    return false;
                }
            }
            estDateDansAnneeScolaire(aDate) {
                return this.dateEntreLesDates(aDate, this.premiereDate, this.derniereDate);
            }
            getDateDemiJour(aDate) {
                return new Date(aDate.getFullYear(),aDate.getMonth(),aDate.getDate(),12);
            }
            premierJourOuvreDeLaSemaine(aNrSemaine) {
                return IE.Cycles.datePremierJourOuvreCycle(aNrSemaine);
            }
            dernierJourOuvreDeLaSemaine(aNrSemaine) {
                return IE.Cycles.dateDernierJourOuvreCycle(aNrSemaine);
            }
            getJour(aDate, N=0) {
                return new Date(aDate.getFullYear(),aDate.getMonth(),aDate.getDate(),N === null || N === undefined ? 0 : 24 * N);
            }
            getJourDeSemaine(ADate, B) {
                return (7 + ADate.getDay() - (B ? this.PremierLundi.getDay() : 1)) % 7;
            }
            getSemaineSuivante(ADate, N=1) {
                return new Date(ADate.getTime() + (N === null || N === undefined ? 1 : N) * this.DureeSemaines);
            }
            getJourSuivant(ADate, N=1) {
                if (!ADate || !ADate.getTime) {
                    return null;
                }
                let lDate = new Date(ADate.getTime());
                const lNombreJours = MethodesObjet_1.MethodesObjet.isNumber(N) ? N : 1;
                lDate.setDate(lDate.getDate() + lNombreJours);
                if (Math.abs(lNombreJours) === 1 && ADate.getDate() === lDate.getDate()) {
                    const lDateCorrigee = new Date(ADate.getTime());
                    lDateCorrigee.setHours(ADate.getHours() + 1);
                    if (lDateCorrigee.getDate() !== ADate.getDate()) {
                        lDateCorrigee.setHours(ADate.getHours() - 1);
                    }
                    lDateCorrigee.setDate(lDateCorrigee.getDate() + lNombreJours);
                    lDate = lDateCorrigee;
                }
                return lDate;
            }
            estAnneeBissextile(aAnnee) {
                return (new Date(aAnnee,1,29).getDate() === 29);
            }
            estUnJourDuWE(AAnnee, AMois, AJour) {
                const D = new Date(AAnnee,AMois,AJour).getDay();
                return (D === 0) || (D === 6);
            }
            getNombreJoursDuMois(AAnnee, AMois) {
                AMois = (AMois + 1) % 12;
                if (AMois === 0) {
                    AAnnee++;
                }
                return new Date(AAnnee,AMois,0).getDate();
            }
            getPremierJourDuMois(AAnnee, AMois) {
                return new Date(AAnnee,AMois,1,12);
            }
            getPremierLundiDuMois(AAnnee, AMois) {
                const LJour = this.getPremierJourDuMois(AAnnee, AMois)
                  , lJourPremierLundi = this.PremierLundi ? GDate.getJourDeSemaine(this.PremierLundi) : 0;
                return this.getJourSuivant(LJour, (lJourPremierLundi - (7 + GDate.getJourDeSemaine(LJour))) % 7);
            }
            getDernierJourDuMois(AAnnee, AMois) {
                return new Date(AAnnee,AMois,this.getNombreJoursDuMois(AAnnee, AMois),12);
            }
            estUnJourDuMois(AAnnee, AMois, AJour) {
                return new Date(AAnnee,AMois,AJour).getMonth() === AMois;
            }
            estHeureIdentique(aDate1, aDate2) {
                return (aDate1.getHours() === aDate2.getHours()) && (aDate1.getMinutes() === aDate2.getMinutes());
            }
            jourEstDansLaPeriode(AAnnee, AMois, AJour, ADateDebut, ADateFin) {
                const LDate = new Date(AAnnee,AMois,AJour);
                return (LDate >= ADateDebut) && (LDate <= ADateFin);
            }
            strMoisCourt(AAnnee, AMois, AAvecAnnee) {
                return TradDate.MoisCourt[AMois] + (AAvecAnnee ? '&nbsp;' + AAnnee : '');
            }
            nombreMoisSurPeriode(ADateDebut, ADateFin) {
                return 12 * (ADateFin.getFullYear() - ADateDebut.getFullYear()) + (ADateFin.getMonth() - ADateDebut.getMonth()) + 1;
            }
            nombresSemainesDansLAnnee(aSemaine) {
                let lDate;
                if (aSemaine > 0) {
                    lDate = IE.Cycles.dateDebutCycle(aSemaine);
                } else {
                    lDate = this.PremierLundi;
                }
                return this.getNombresSemainesPourLAnnee(lDate.getFullYear());
            }
            getNombresSemainesPourLAnnee(aAnnee) {
                const lDate = new Date(aAnnee,0,1);
                const lDay = this.getJourDeDate(lDate);
                return (lDay === 3) || (lDay === 2 && this.estAnneeBissextile(lDate.getFullYear())) ? this.semainesParAn + 1 : this.semainesParAn;
            }
            getJourDeDate(ADate) {
                return (ADate.getDay() + 7 - 1) % 7;
            }
            getFuseau(aDate) {
                return aDate ? aDate.getTimezoneOffset() / 60 : 0;
            }
            getEcartFuseau(aDate1, aDate2) {
                return this.getFuseau(aDate1) - this.getFuseau(aDate2);
            }
            getSemaine(aDate) {
                return IE.Cycles.cycleDeLaDate(aDate || new Date());
            }
            getNbrJoursDepuisPremiereLundi(aDate) {
                return this.getNbrJoursEntreDeuxDates(this.PremierLundi, aDate);
            }
            getNbrJoursEntreDeuxDates(aDateDebut, aDateFin) {
                if (!aDateDebut || !aDateDebut.getFullYear || !aDateFin || !aDateFin.getFullYear) {
                    return 0;
                }
                return Date.UTC(aDateFin.getFullYear(), aDateFin.getMonth(), aDateFin.getDate()) / this.DureeJours - Date.UTC(aDateDebut.getFullYear(), aDateDebut.getMonth(), aDateDebut.getDate()) / this.DureeJours;
            }
            getSemaineCalendaire() {
                return 1 + Math.round((this.PremierLundi.getTime() - new Date(this.PremierLundi.getFullYear(),0,1).getTime()) / this.DureeSemaines);
            }
            semaineToCalendaire(aSemaine, aNumeroPremiereSemaine) {
                let lNumero = aNumeroPremiereSemaine;
                if (!MethodesObjet_1.MethodesObjet.isNumber(lNumero)) {
                    lNumero = this.parametres.numeroPremiereSemaine;
                }
                if (!MethodesObjet_1.MethodesObjet.isNumber(lNumero)) {
                    lNumero = 1;
                }
                if (lNumero < 0) {
                    if (!this._cacheSemainesCalendaires[aSemaine]) {
                        const lNbSemaines = this.nombresSemainesDansLAnnee(aSemaine);
                        if (aSemaine <= 1) {
                            this._cacheSemainesCalendaires[aSemaine] = ((aSemaine - 1) + (this.getSemaineCalendaire() - 1)) % lNbSemaines + 1;
                        } else if (aSemaine > 0) {
                            let lSemaineCalPrec = this._cacheSemainesCalendaires[aSemaine - 1];
                            if (!lSemaineCalPrec) {
                                lSemaineCalPrec = this.semaineToCalendaire(aSemaine - 1, lNumero);
                            }
                            this._cacheSemainesCalendaires[aSemaine] = lSemaineCalPrec + 1 > lNbSemaines ? 1 : lSemaineCalPrec + 1;
                        }
                    }
                    return this._cacheSemainesCalendaires[aSemaine];
                }
                return aSemaine + lNumero - 1;
            }
            strDateCalendaireDeSemaine(aSemaine, avecDuAu) {
                const lNumeroSemaine = this.semaineToCalendaire(aSemaine);
                const H = [];
                H.push(ObjetTraduction_1.GTraductions.getValeur('Semaine') + ' ' + lNumeroSemaine);
                if (avecDuAu === true) {
                    const lDateDeb = this.formatDate(this.premierJourOuvreDeLaSemaine(aSemaine), '%JJ/%MM/%AAAA');
                    const lDateFin = this.formatDate(this.dernierJourOuvreDeLaSemaine(aSemaine), '%JJ/%MM/%AAAA');
                    H.push(', ');
                    H.push(ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + lDateDeb);
                    H.push(' ');
                    H.push(ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + lDateFin);
                }
                return H.join('');
            }
            getDifferenceJours(aDate1, aDate2) {
                const lJour1 = aDate1 ? Math.floor(this.getJour(aDate1).getTime() / this.DureeJours) : 0;
                const lJour2 = aDate2 ? Math.floor(this.getJour(aDate2).getTime() / this.DureeJours) : 0;
                return lJour1 - lJour2;
            }
            getDifferenceJoursPar24h(aDate1, aDate2) {
                const lDureeInMs = (this.estDateValide(aDate1) && this.estDateValide(aDate2)) ? aDate1.getTime() - aDate2.getTime() : 0;
                return Math.floor(lDureeInMs / this.DureeJours);
            }
            getDifferenceTime(aDate1, aDate2) {
                const lDureeInMs = (this.estDateValide(aDate1) && this.estDateValide(aDate2)) ? aDate1.getTime() - aDate2.getTime() : 0;
                const reste_heures = lDureeInMs - (Math.floor(lDureeInMs / this.DureeJours) * this.DureeJours);
                const nb_heures = Math.floor(reste_heures / this.DureeHeures);
                const reste_minutes = lDureeInMs - (Math.floor(lDureeInMs / this.DureeHeures) * this.DureeHeures);
                const nb_minutes = Math.floor(reste_minutes / this.DureeMinutes);
                const reste_secondes = lDureeInMs - (Math.floor(lDureeInMs / this.DureeMinutes) * this.DureeMinutes);
                const nb_secondes = Math.floor(reste_secondes / this.DureeSecondes);
                return (nb_heures < 10 ? '0' : '') + nb_heures + ':' + (nb_minutes < 10 ? '0' : '') + nb_minutes + ':' + (nb_secondes < 10 ? '0' : '') + nb_secondes;
            }
            formatDate(ADate, AFormat) {
                if (!ADate || !MethodesObjet_1.MethodesObjet.isDate(ADate)) {
                    IE.log.addLog('ObjetDate.formatDate, ADate n\'est pas une date : ' + ADate);
                    return '';
                }
                if (!AFormat || !MethodesObjet_1.MethodesObjet.isString(AFormat)) {
                    IE.log.addLog('ObjetDate.formatDate, AFormat n\'est pas format valide : ' + AFormat);
                    return '';
                }
                AFormat = AFormat.replace(/\[(.*?)\]/ig, !this.estJourEgal(ADate, this.aujourdhui) ? !this.estJourEgal(ADate, this.demain) ? !this.estJourEgal(ADate, this.hier) ? '$1' : ObjetTraduction_1.GTraductions.getValeur('Hier') : ObjetTraduction_1.GTraductions.getValeur('Demain') : ObjetTraduction_1.GTraductions.getValeur('Aujourdhui'));
                const LHour = ADate.getHours();
                const LMinute = ADate.getMinutes();
                const LSecond = ADate.getSeconds();
                const LDay = this.getJourDeDate(ADate);
                const LDate = ADate.getDate();
                const LMonth = ADate.getMonth() + 1;
                const LYear = ADate.getFullYear();
                AFormat = AFormat.replace('%hh', (LHour < 10 ? '0' : '') + LHour);
                AFormat = AFormat.replace('%xh', LHour + '');
                AFormat = AFormat.replace('%mm', (LMinute < 10 ? '0' : '') + LMinute);
                AFormat = AFormat.replace('%ss', (LSecond < 10 ? '0' : '') + LSecond);
                AFormat = AFormat.replace('%sh', ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure'));
                AFormat = AFormat.replace('%JJJJ', ObjetTraduction_1.GTraductions.getValeur('Jours')[LDay]);
                AFormat = AFormat.replace('%Jjjj', (ObjetTraduction_1.GTraductions.getValeur('Jours')[LDay]).ucfirst());
                AFormat = AFormat.replace('%JJJ', ObjetTraduction_1.GTraductions.getValeur('JoursCourt')[LDay]);
                AFormat = AFormat.replace('%Jjj', (ObjetTraduction_1.GTraductions.getValeur('JoursCourt')[LDay]).ucfirst());
                AFormat = AFormat.replace('%JJ', (LDate < 10 ? '0' : '') + LDate);
                AFormat = AFormat.replace('%J', LDate + '');
                AFormat = AFormat.replace('%MMMM', TradDate.Mois[LMonth - 1]);
                AFormat = AFormat.replace('%MMM', TradDate.MoisCourt[LMonth - 1]);
                AFormat = AFormat.replace('%Mmm', (TradDate.MoisCourt[LMonth - 1]).ucfirst());
                AFormat = AFormat.replace('%MM', (LMonth < 10 ? '0' : '') + LMonth);
                AFormat = AFormat.replace('%AAAA', LYear + '');
                AFormat = AFormat.replace('%AA', (LYear % 100 < 10 ? '0' : '') + LYear % 100);
                return AFormat;
            }
            estDateParticulier(ADate) {
                return this.estJourEgal(ADate, this.aujourdhui) || this.estJourEgal(ADate, this.demain) || this.estJourEgal(ADate, this.hier);
            }
            formatDureeEnMillisecondes(aDureeEnMillisecondes, aFormat, aForcerFormatDuree) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aDureeEnMillisecondes)) {
                    return '';
                }
                let lFormatDureeEnChaine = this.parametres.formatDureeEnChaine;
                if (MethodesObjet_1.MethodesObjet.isNumber(aForcerFormatDuree)) {
                    lFormatDureeEnChaine = aForcerFormatDuree;
                }
                switch (lFormatDureeEnChaine) {
                case TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcHeuresMinutes:
                case TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcPersonnalise:
                    {
                        let lFormat = aFormat || '%hh%sh%mm';
                        lFormat = lFormat.replace('%sh', ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure'));
                        if ((lFormat.lastIndexOf('%hh') > -1) || (lFormat.lastIndexOf('%xh') > -1)) {
                            const LHour = Math.floor(aDureeEnMillisecondes / this.DureeHeures);
                            lFormat = lFormat.replace('%hh', (LHour < 10 ? '0' : '') + LHour);
                            lFormat = lFormat.replace('%xh', LHour + '');
                            aDureeEnMillisecondes = aDureeEnMillisecondes - LHour * this.DureeHeures;
                        }
                        if (lFormat.lastIndexOf('%mm') > -1 || (lFormat.lastIndexOf('%xm') > -1)) {
                            const LMinute = Math.floor(aDureeEnMillisecondes / this.DureeMinutes);
                            lFormat = lFormat.replace('%mm', (LMinute < 10 ? '0' : '') + LMinute);
                            lFormat = lFormat.replace('%xm', LMinute + '');
                            aDureeEnMillisecondes = aDureeEnMillisecondes - LMinute * this.DureeMinutes;
                        }
                        const LSecond = Math.floor(aDureeEnMillisecondes / this.DureeSecondes);
                        lFormat = lFormat.replace('%ss', (LSecond < 10 ? '0' : '') + LSecond);
                        return lFormat;
                    }
                case TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcHeuresCentiemes:
                    {
                        const lNbHeures = Math.floor(aDureeEnMillisecondes / GDate.DureeHeures);
                        let lMinutesEnCentiemes = Math.floor((aDureeEnMillisecondes / GDate.DureeHeures - lNbHeures) * 100);
                        if (lMinutesEnCentiemes < 10) {
                            lMinutesEnCentiemes = '0' + lMinutesEnCentiemes;
                        }
                        return lNbHeures + ',' + lMinutesEnCentiemes;
                    }
                case TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcSequences:
                    {
                        const lNbSequences = Math.round10(aDureeEnMillisecondes / UtilitaireDuree_1.TUtilitaireDuree.dureeEnMs(this.DureeSequence), -2);
                        const lPartieEntiere = Math.floor(lNbSequences);
                        let lPartieDecimale = Math.floor((lNbSequences - lPartieEntiere) * 100);
                        if (lPartieDecimale < 10) {
                            lPartieDecimale = '0' + lPartieDecimale;
                        }
                        return lPartieEntiere + ',' + lPartieDecimale;
                    }
                default:
                    ;
                }
                return '';
            }
            dureeEnMillisecondesToHMS(aDureeEnMillisecondes) {
                const lResult = {
                    heures: 0,
                    minutes: 0,
                    secondes: 0
                };
                if (!MethodesObjet_1.MethodesObjet.isNumber(aDureeEnMillisecondes)) {
                    return lResult;
                }
                lResult.heures = Math.floor(aDureeEnMillisecondes / this.DureeHeures);
                aDureeEnMillisecondes = aDureeEnMillisecondes - lResult.heures * this.DureeHeures;
                lResult.minutes = Math.floor(aDureeEnMillisecondes / this.DureeMinutes);
                aDureeEnMillisecondes = aDureeEnMillisecondes - lResult.minutes * this.DureeMinutes;
                lResult.secondes = Math.floor(aDureeEnMillisecondes / this.DureeSecondes);
                return lResult;
            }
            hmsToDureeEnMillisecondes(aHMS) {
                const lHMS = {
                    heures: (aHMS && aHMS.heures) ? aHMS.heures : 0,
                    minutes: (aHMS && aHMS.minutes) ? aHMS.minutes : 0,
                    secondes: (aHMS && aHMS.secondes) ? aHMS.secondes : 0
                };
                return lHMS.heures * this.DureeHeures + lHMS.minutes * this.DureeMinutes + lHMS.secondes * this.DureeSecondes;
            }
            formatDureeEnPlaces(aPlaces, aFormat, aForcerFormatDuree) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aPlaces)) {
                    return '';
                }
                return this.formatDureeEnMillisecondes(this.nombrePlacesEnMillisecondes(aPlaces), aFormat, aForcerFormatDuree);
            }
            enCentiemeDHeure(aDureeEnMillisecondes) {
                const lDuree = Math.floor(aDureeEnMillisecondes);
                if (!MethodesObjet_1.MethodesObjet.isNumber(lDuree)) {
                    return '';
                }
                const lNbHeures = Math.floor(lDuree / GDate.DureeHeures);
                let lMinutesEnCentiemes = Math.floor((lDuree / GDate.DureeHeures - lNbHeures) * 100);
                if (lMinutesEnCentiemes < 10) {
                    lMinutesEnCentiemes = '0' + lMinutesEnCentiemes;
                }
                return lNbHeures + ',' + lMinutesEnCentiemes;
            }
            strSemaine(aNumeroSemaine, aFormatDebut, aFormatFin, aSeparateur1, aSeparateur2, aSeparateur3) {
                const lDateDeb = this.formatDate(this.premierJourOuvreDeLaSemaine(aNumeroSemaine), aFormatDebut);
                const lDateFin = this.formatDate(this.dernierJourOuvreDeLaSemaine(aNumeroSemaine), aFormatFin);
                return (aSeparateur1 || '') + lDateDeb + (aSeparateur2 || '') + lDateFin + (aSeparateur3 || '');
            }
            strSemaineSelonCycle(aCycle, aNumeroSemaine, aFormatDebut, aFormatFin, aSeparateur1, aSeparateur2, aSeparateur3) {
                const lDateDeb = this.formatDate(aCycle.datePremierJourOuvreCycle(aNumeroSemaine), aFormatDebut);
                const lDateFin = this.formatDate(aCycle.dateDernierJourOuvreCycle(aNumeroSemaine), aFormatFin);
                return (aSeparateur1 || '') + lDateDeb + (aSeparateur2 || '') + lDateFin + (aSeparateur3 || '');
            }
            strDomaine(aDomaine, aFormatDebut, aFormatFin, aSeparateur1, aSeparateur2, aSeparateur3) {
                const lDateDeb = this.formatDate(IE.Cycles.datePremierJourOuvreCycle(aDomaine.getPremierePosition()), aFormatDebut);
                const lDateFin = this.formatDate(IE.Cycles.dateDernierJourOuvreCycle(aDomaine.getDernierePosition()), aFormatFin);
                return (aSeparateur1 || '') + lDateDeb + (aSeparateur2 || '') + lDateFin + (aSeparateur3 || '');
            }
            strDates(aDateDebut, aDateFin, aParams) {
                const lParams = {
                    sansHoraire: false,
                    sansCrochet: false,
                    formatDate: '%J %MMMM'
                };
                $.extend(lParams, aParams);
                const formatHeure = ' %hh' + ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure') + '%mm';
                const lResult = [];
                if (GDate.getNbrJoursEntreDeuxDates(aDateDebut, aDateFin) >= 1) {
                    if (lParams.sansHoraire) {
                        lResult.push(this.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + lParams.formatDate));
                        lResult.push(' ');
                        lResult.push(this.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + lParams.formatDate));
                    } else {
                        lResult.push(this.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + lParams.formatDate) + ' ' + (estMinuit.call(this, aDateDebut) ? '' : GDate.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('A') + formatHeure)));
                        lResult.push(' ');
                        lResult.push(this.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + lParams.formatDate) + ' ' + (estMinuit.call(this, aDateFin) ? '' : GDate.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('A') + formatHeure)));
                    }
                } else if (GDate.estDateEgale(aDateDebut, aDateFin)) {
                    lResult.push(GDate.formatDate(aDateDebut, (lParams.sansCrochet ? '' : '[') + ObjetTraduction_1.GTraductions.getValeur('Le') + ' ' + lParams.formatDate + (lParams.sansCrochet ? '' : ']')));
                    lResult.push(' ');
                    lResult.push(lParams.sansHoraire ? '' : (estMinuit.call(this, aDateFin) ? '' : GDate.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('A') + formatHeure)));
                } else {
                    lResult.push(GDate.formatDate(aDateDebut, (lParams.sansCrochet ? '' : '[') + ObjetTraduction_1.GTraductions.getValeur('Le') + ' ' + lParams.formatDate + (lParams.sansCrochet ? '' : ']')));
                    lResult.push(' ');
                    lResult.push(lParams.sansHoraire ? '' : this.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('De') + formatHeure) + ' ' + GDate.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('A') + formatHeure));
                }
                return lResult.join('');
            }
            strDatesAvecDemiJournees(aDateDebut, aDateDebutEstMatin, aDateFin, aDateFinEstMatin, aParams) {
                const lParams = {
                    formatDate: '%JJ/%MM'
                };
                $.extend(lParams, aParams);
                const lResult = [];
                if (!aDateFin || GDate.estJourEgal(aDateDebut, aDateFin)) {
                    const lEstJourneeComplete = (!!aDateFin && GDate.estJourEgal(aDateDebut, aDateFin) && aDateDebutEstMatin !== aDateFinEstMatin);
                    lResult.push(GDate.formatDate(aDateDebut, '[' + ObjetTraduction_1.GTraductions.getValeur('Le') + ' ' + lParams.formatDate + ']'));
                    if (!lEstJourneeComplete) {
                        lResult.push(' ', (aDateDebutEstMatin ? ObjetTraduction_1.GTraductions.getValeur('Matin') : ObjetTraduction_1.GTraductions.getValeur('ApresMidi')));
                    }
                } else {
                    lResult.push(this.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + lParams.formatDate));
                    if (!aDateDebutEstMatin) {
                        lResult.push(' ', ObjetTraduction_1.GTraductions.getValeur('ApresMidi'));
                    }
                    lResult.push(' ');
                    lResult.push(this.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + lParams.formatDate));
                    if (!!aDateFinEstMatin) {
                        lResult.push(' ', ObjetTraduction_1.GTraductions.getValeur('Matin'));
                    }
                }
                return lResult.join('');
            }
            placeAnnuelleEnDate(APlace, AEstDateFin) {
                const LJour = this.getJourSuivant(IE.Cycles.dateDebutPremierCycle(), Math.floor(APlace / this.PlacesParJour));
                const lHrMin = this._getHrMinDeListeHeures(APlace % this.PlacesParJour, AEstDateFin);
                return new Date(LJour.getFullYear(),LJour.getMonth(),LJour.getDate(),lHrMin.h,lHrMin.m);
            }
            dateEnPlaceAnnuelle(aDate, aEstDateFin=false) {
                const lPlaceAnnuelleJour = this.getNbrJoursEntreDeuxDates(IE.Cycles.dateDebutPremierCycle(), aDate) * this.PlacesParJour;
                if (lPlaceAnnuelleJour < 0) {
                    return 0;
                }
                return lPlaceAnnuelleJour + this._dateEnPlaceJour(aDate, aEstDateFin);
            }
            placeParJourEnDate(APlace) {
                const LJour = this.getDateCourante();
                const lHrMin = this._getHrMinDeListeHeures(APlace);
                return new Date(LJour.getFullYear(),LJour.getMonth(),LJour.getDate(),lHrMin.h,lHrMin.m);
            }
            dateEnPlaceHebdomadaire(ADate, AEstDateFin=false) {
                let lJour = 0;
                const lResult = IE.Cycles.dateEnCycleEtJourCycle(ADate, null);
                if (lResult.trouve) {
                    lJour = lResult.indice;
                } else {
                    const lResult = IE.Cycles.dateEnCycleEtJourCycle(ADate, IE.Cycles.recherche.autoriserPrecedents);
                    if (lResult.trouve) {
                        return lResult.indice * this.PlacesParJour - 1;
                    }
                }
                return lJour * this.PlacesParJour + this._dateEnPlaceJour(ADate, AEstDateFin);
            }
            placeEnDate(aNumeroCycle, aPlace, aEstPlaceFin=false, aInstanceCycles) {
                const lCycles = aInstanceCycles || IE.Cycles
                  , lNumeroJour = Math.floor(aPlace / this.PlacesParJour)
                  , lNumeroCycle = Math.max(1, aNumeroCycle)
                  , LJour = lCycles.jourCycleEnDate(lNumeroJour, lNumeroCycle);
                let lPlaceJour = aPlace % this.PlacesParJour;
                if (lNumeroJour > lCycles.cache.datesAfficheesParCycle[lNumeroCycle].length) {
                    lPlaceJour = this.PlacesParJour - 1;
                }
                const lHrMin = this._getHrMinDeListeHeures(lPlaceJour, aEstPlaceFin);
                return lHrMin && lHrMin.ok ? new Date(LJour.getFullYear(),LJour.getMonth(),LJour.getDate(),lHrMin.h,lHrMin.m) : new Date(LJour.getFullYear(),LJour.getMonth(),LJour.getDate());
            }
            placeEnDateHeure(aPlace, aEstPlaceFin=false) {
                return this.placeEnDate(1, aPlace, aEstPlaceFin);
            }
            nombrePlacesEnDuree(aPlaces) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aPlaces)) {
                    return 0;
                }
                return aPlaces * this.DureeSequence / this.PlacesParHeure;
            }
            minutesEnNombrePlaces(aDureeEnMinutes) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aDureeEnMinutes)) {
                    return 0;
                }
                const lDuree1PlaceEnMinutes = UtilitaireDuree_1.TUtilitaireDuree.dureeEnMin(this.nombrePlacesEnDuree(1));
                const lResult = aDureeEnMinutes / lDuree1PlaceEnMinutes;
                if (lResult !== Math.floor(lResult)) {}
                return lResult;
            }
            nombrePlacesEnMillisecondes(aPlaces) {
                return UtilitaireDuree_1.TUtilitaireDuree.dureeEnMs(this.nombrePlacesEnDuree(aPlaces));
            }
            getDateDeChaine(aChaine, aDateDebut, aDateFin) {
                aDateDebut = aDateDebut || this.PremierLundi;
                aDateFin = aDateFin || this.derniereDate;
                const T = aChaine.split('/');
                if (T[2] && (T[2].length === 2)) {
                    T[2] = '20' + T[2];
                }
                const lDate = new Date(T[2],T[1] - 1,T[0]);
                const lEstValide = ((lDate.getFullYear() === parseInt(T[2])) || (lDate.getFullYear() === parseInt('20' + T[2], 10))) && (lDate.getMonth() === Number(T[1] - 1)) && (lDate.getDate() === parseInt(T[0])) && (lDate >= aDateDebut) && (lDate <= aDateFin);
                return lEstValide ? lDate : null;
            }
            getListeSemaines(aSemaineDebut, aSemaineFin, aGenreTri) {
                let lLibelle, LDateDeb, LDateFin;
                const lSemaineCourante = IE.Cycles.cycleDeLaDate(new Date());
                const lListeSemaines = new ObjetListeElements_1.ObjetListeElements();
                const lSemaineDeb = Math.max(0, aSemaineDebut);
                const lSemaineFin = Math.min(IE.Cycles.nombreCyclesAnneeScolaire(), aSemaineFin);
                for (let lSemaine = lSemaineDeb; lSemaine <= lSemaineFin; lSemaine++) {
                    if (lSemaine === lSemaineCourante) {
                        lLibelle = ObjetTraduction_1.GTraductions.getValeur('SemaineEnCours');
                    } else if (lSemaine === lSemaineCourante + 1) {
                        lLibelle = ObjetTraduction_1.GTraductions.getValeur('SemaineSuivante');
                    } else if (lSemaine === lSemaineCourante - 1) {
                        lLibelle = ObjetTraduction_1.GTraductions.getValeur('SemainePrecedente');
                    } else {
                        LDateDeb = GDate.formatDate(IE.Cycles.dateDebutCycle(lSemaine), '%JJ/%MM');
                        LDateFin = GDate.formatDate(IE.Cycles.dateDernierJourOuvreCycle(lSemaine), '%JJ/%MM');
                        lLibelle = ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + LDateDeb + ' ' + ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + LDateFin;
                    }
                    lListeSemaines.addElement(new ObjetElement_1.ObjetElement(lLibelle,null,lSemaine));
                }
                lListeSemaines.setTri([ObjetTri_1.ObjetTri.init('Genre')]);
                lListeSemaines.trier(aGenreTri);
                return lListeSemaines;
            }
            getListeMoisAPartirDeDate(aDateDebut, aDateFin, aFormatMois='%MMMM %AAAA') {
                const lListeMois = new ObjetListeElements_1.ObjetListeElements();
                let lElement, lAnnee, lMois, lDate, lVrai = true;
                const lPremiereDate = aDateDebut || this.premiereDate
                  , lDerniereDate = aDateFin || this.derniereDate
                  , lAnneeDebut = lPremiereDate.getFullYear()
                  , lMoisDebut = lPremiereDate.getMonth()
                  , lAnneeFin = lDerniereDate.getFullYear()
                  , lMoisFin = lDerniereDate.getMonth();
                if (this.estAvantJour(lPremiereDate, lDerniereDate) || this.estJourEgal(lPremiereDate, lDerniereDate)) {
                    lMois = lMoisDebut;
                    lAnnee = lAnneeDebut;
                    while (lVrai) {
                        if (lMois >= lMoisFin && lAnnee >= lAnneeFin || lAnnee > lAnneeFin) {
                            lVrai = false;
                        }
                        lDate = new Date(lAnnee,lMois);
                        lElement = new ObjetElement_1.ObjetElement(GDate.formatDate(lDate, aFormatMois).ucfirst());
                        lElement.annee = lAnnee;
                        lElement.mois = lMois;
                        lDate = this.getPremierJourDuMois(lAnnee, lMois);
                        lElement.dateDebut = lDate >= lPremiereDate ? lDate : lPremiereDate;
                        lDate = this.getDernierJourDuMois(lAnnee, lMois);
                        lElement.dateFin = lDate <= lDerniereDate ? lDate : lDerniereDate;
                        lListeMois.addElement(lElement);
                        lMois += 1;
                        if (lMois > 11) {
                            lAnnee += 1;
                            lMois = 0;
                        }
                    }
                }
                return lListeMois;
            }
            parseHeureMinute(aValue, aDureeMinEnMin=0, aDureeMaxEnMin=1440) {
                function _estUnChiffre(aCar) {
                    return /[0-9]/.test(aCar);
                }
                const lResult = {
                    heure: 0,
                    minute: 0,
                    ok: false,
                    erreurMinMax: false
                };
                const lDureeMinEnMin = aDureeMinEnMin || 0
                  , lDureeMaxEnMin = aDureeMaxEnMin || 24 * 60;
                if (!MethodesObjet_1.MethodesObjet.isString(aValue)) {
                    return lResult;
                }
                const lValue = aValue.trim();
                let lHeure, lMinute = 0;
                let lIndice = 0;
                let lZeroDevant = false;
                if (!_estUnChiffre(lValue[lIndice]) && lValue[lIndice] !== '+') {
                    return lResult;
                }
                if (lValue[lIndice] === '+') {
                    lIndice += 1;
                    while (lIndice < lValue.length && lValue[lIndice] === ' ') {
                        lIndice += 1;
                    }
                }
                lZeroDevant = lValue[lIndice] === '0';
                lHeure = 0;
                while (lIndice < lValue.length && _estUnChiffre(lValue[lIndice])) {
                    lHeure = lHeure * 10 + parseInt(lValue[lIndice], 10);
                    lIndice += 1;
                }
                while (lIndice < lValue.length && !_estUnChiffre(lValue[lIndice])) {
                    lIndice += 1;
                }
                if (lIndice >= lValue.length) {
                    if (lZeroDevant || (lHeure >= 100 && lHeure * 60 >= lDureeMaxEnMin)) {
                        lMinute = lHeure % 100;
                        lHeure = Math.floor(lHeure / 100);
                    } else {
                        lMinute = 0;
                    }
                } else {
                    lMinute = 0;
                    while (lIndice < lValue.length && _estUnChiffre(lValue[lIndice])) {
                        lMinute = lMinute * 10 + parseInt(lValue[lIndice], 10);
                        lIndice += 1;
                    }
                    while (lIndice < lValue.length && !_estUnChiffre(lValue[lIndice])) {
                        lIndice += 1;
                    }
                    if (lIndice < lValue.length) {
                        return lResult;
                    }
                }
                if (lMinute >= 60 || lMinute < 0 || lHeure < 0) {
                    return lResult;
                }
                lResult.heure = lHeure;
                lResult.minute = lMinute;
                if ((lHeure * 60 + lMinute) < lDureeMinEnMin || (lHeure * 60 + lMinute) >= lDureeMaxEnMin) {
                    lResult.erreurMinMax = true;
                    return lResult;
                }
                lResult.ok = true;
                return lResult;
            }
            dateEnPlaceJour(aDate, AEstDateFin=false) {
                return this._dateEnPlaceJour(aDate, AEstDateFin);
            }
            _dateEnPlaceJour(ADate, AEstDateFin) {
                let I;
                let lNbMinutesLibelleHeure;
                const lNbMinutesLibelleHeureDebut = this._getNbrMinutesLibelleHeure(0);
                for (I = this.PlacesParJour - 1; I >= 0; I--) {
                    lNbMinutesLibelleHeure = this._getNbrMinutesLibelleHeure(I);
                    if (lNbMinutesLibelleHeure < lNbMinutesLibelleHeureDebut) {
                        lNbMinutesLibelleHeure += 24 * 60;
                    }
                    if (_GetNbrMinutes.call(this, ADate) - (AEstDateFin ? 1 : 0) >= lNbMinutesLibelleHeure) {
                        break;
                    }
                }
                return Math.max(I, 0);
            }
            _getHrMinDeListeHeures(aPlace, aEstPlaceFin) {
                const lResult = {
                    h: 0,
                    m: 0,
                    ok: false
                };
                let lChaine = null;
                let lElement = null;
                if (aEstPlaceFin) {
                    lElement = this.ListeHeuresFin ? this.ListeHeuresFin.get(aPlace) : this.ListeHeures.get(aPlace + 1);
                } else {
                    lElement = this.ListeHeures.get(aPlace);
                }
                if (lElement) {
                    lChaine = lElement.getLibelle();
                }
                if (!lChaine || !lChaine.indexOf || !lChaine.split) {
                    return lResult;
                }
                let lTab = lChaine.split(ObjetDate.separateurHeureDelphi);
                if (lTab.length < 2) {
                    lTab = lChaine.split(':');
                    if (lTab.length < 2) {
                        return lResult;
                    }
                }
                ;lResult.h = parseInt(lTab[0], 0) || 0;
                if (lTab.length > 1) {
                    lResult.m = parseInt(lTab[1], 0) || 0;
                }
                lResult.ok = true;
                return lResult;
            }
            _getNbrMinutesLibelleHeure(I) {
                const lHrMin = this._getHrMinDeListeHeures(I);
                return lHrMin.h * 60 + lHrMin.m;
            }
        }
        exports.ObjetDate = ObjetDate;
        ObjetDate.separateurHeureDelphi = 'h';
        function estMinuit(aDate) {
            const lHeure = aDate.getHours();
            const lMin = aDate.getMinutes();
            return (lHeure === 0 && lMin === 0);
        }
        function _GetNbrMinutes(aDate) {
            return aDate.getHours() * 60 + aDate.getMinutes();
        }
        const GDate = new ObjetDate();
        exports.GDate = GDate;
        IEHtml.setObjetDate(GDate.formatDate.bind(GDate), GDate.parseHeureMinute.bind(GDate));
    },
    fn: 'objetdate.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDroitsPN = exports.TypeDroits = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const TypeDomaine_1 = require("TypeDomaine");
        exports.TypeDroits = {
            estEnConsultation: 1,
            cours: {
                domaineConsultationEDT: 1,
                avecReservationCreneauxLibres: 1,
                modifierElevesDetachesSurCoursDeplaceCreneauLibre: 1,
                modifierMatieres: 1,
                modifierMatieresCoursEPIEtAP: 1,
                modifierClasses: 1,
                modifierProfesseurs: 1,
                modifierSalles: 1,
                modifierMateriels: 1,
                creerCours: 1,
                creerCoursPermanenceFeuilleAppel: 1,
                deplacerCours: 1,
                estSemaineModifiable: 1,
                estGestionnaireSalle: 1,
                estGestionnaireMateriel: 1,
                avecMateriel: 1,
                avecFicheCoursConseil: 1,
                masquerPartiesDeClasse: 1,
                afficherElevesDetachesDansCours: 1
            },
            eleves: {
                voirTousLesEleves: 1,
                consulterIdentiteEleve: 1,
                consulterFichesResponsables: 1,
                consulterPhotosEleves: 1,
                avecSaisieParcoursPedagogique: 1,
                avecAffectationElevesGroupesNonGAEV: 1,
                avecAffectationElevesGroupesGAEV: 1,
                avecSaisieProjetIndividuel: 1,
                avecSaisieAttestations: 1,
                consulterDonneesAdministrativesAutresEleves: 1
            },
            communication: {
                toutesClasses: 1,
                avecDiscussion: 1,
                discussionDesactiveeSelonHoraire: 1,
                messageDiscussionDesactiveeSelonHoraire: 1,
                discussionInterdit: 1,
                avecDiscussionPersonnels: 1,
                avecDiscussionProfesseurs: 1,
                avecDiscussionParents: 1,
                avecDiscussionEleves: 1,
                avecMessageInstantane: 1,
                avecContactVS: 1,
                lancerAlertesPPMS: 1,
                estDestinataireChat: 1,
                avecDiscussionAvancee: 1,
                avecPublicationPageEtablissement: 0
            },
            absences: {
                domaineRecapitulatifAbsences: 1,
                avecSaisieAppelEtVS: 1,
                avecSaisieAppel: 1,
                avecSaisieCours: 1,
                avecSaisieAbsenceOuverte: 1,
                avecSaisieHorsCours: 1,
                avecSaisieSurGrille: 1,
                avecSaisieSurGrilleAppelProf: 1,
                avecSaisieAbsence: 1,
                avecSaisieRetard: 1,
                avecSaisiePassageInfirmerie: 1,
                avecSaisieExclusion: 1,
                avecSaisiePunition: 1,
                avecSaisieObservation: 1,
                avecConsultationDefautCarnet: 1,
                avecSaisieDefautCarnet: 1,
                avecSaisieObservationsParents: 1,
                avecSaisieEncouragements: 1,
                avecAccesAuxEvenementsAutresCours: 1,
                avecSaisieAbsencesToutesPermanences: 1,
                listeDatesSaisieAbsence: 1,
                avecAnciennesFeuilleDAppel: 1,
                avecSaisieAbsencesGrilleAbsencesRepas: 1,
                avecSaisieAbsencesGrilleAbsencesInternat: 1,
                avecSuiviAbsenceRetard: 1,
                avecSaisieMotifRetard: 1,
                avecDeclarerUneAbsence: 1,
                avecDeclarerDispensePonctuelle: 1,
                avecDeclarerDispenseLongue: 1
            },
            competence: {
                avecSaisieEvaluations: 1,
                avecSaisieItems: 1,
                avecValidationCompetences: 1
            },
            agenda: {
                avecSaisieAgenda: 1
            },
            actualite: {
                avecSaisieActualite: 1
            },
            listeDiffusion: {
                avecPublication: 1
            },
            casierNumerique: {
                avecAccesALaListeDesDocumentEleve: 1,
                gererLaCollecteDeDocuments: 1,
                collecterDocsAupresDesEleves: 1,
                collecterDocsAupresDesResponsables: 1,
                avecSaisieDocumentsCasiersIntervenant: 1,
                avecSaisieDocumentsCasiersResponsable: 1,
                accesSignatureNumerique: 1
            },
            dossierVS: {
                creerDossiersVS: 1,
                modifierDossiersVS: 1,
                saisieMotifsDossiersVS: 1,
                publierDossiersVS: 1,
                consulterMemosEleve: 1,
                saisirMemos: 1
            },
            decrochageScolaire: {
                acces: 1,
                suivi: 1
            },
            dispenses: {
                saisie: 1
            },
            incidents: {
                acces: 1,
                uniquementMesIncidentsSignales: 1,
                saisie: 1,
                publier: 1
            },
            punition: {
                avecPublicationPunitions: 1,
                acces: 1,
                saisie: 1,
                avecRecapPunitions: 1,
                avecRecapSanctions: 1
            },
            creerMotifIncidentPunitionSanction: 1,
            stage: {
                autoriserEditionToutesOffresStages: 1
            },
            cahierDeTexte: {
                avecSaisieCahierDeTexte: 1,
                creerCategoriesDeCahierDeTexte: 1,
                avecSaisiePieceJointe: 1,
                tailleMaxPieceJointe: 1
            },
            notation: {
                avecSaisieDevoirs: 1
            },
            compte: {
                avecSaisieIdentifiant: 1,
                avecSaisieMotDePasse: 1,
                avecSaisieMotDePasseEleve: 1,
                avecInformationsPersonnelles: 1,
                avecSaisieInfosPersoCoordonnees: 1,
                avecSaisieInfosPersoAutorisations: 1
            },
            intendance: {
                avecDemandeTravauxIntendance: 1,
                uniquementMesTravauxIntendance: 1,
                avecExecutionTravauxIntendance: 1,
                avecGestionTravauxIntendance: 1,
                avecDemandeTachesSecretariat: 1,
                uniquementMesTachesSecretariat: 1,
                avecExecutionTachesSecretariat: 1,
                avecDemandeTachesInformatique: 1,
                uniquementMesTachesInformatique: 1,
                avecExecutionTachesInformatique: 1,
                avecGestionTachesInformatique: 1,
                avecDemandeCommandes: 1,
                uniquementMesCommandes: 1,
                avecExecutionCommandes: 1,
                avecGestionCommandes: 1
            },
            services: {
                avecCreationSousServices: 1,
                avecModificationCoefGeneral: 1
            },
            trombinoscope: {
                autoriseAConsulterPhotosDeTousLesEleves: 1
            },
            forum: {
                avecCreationSujetForum: 1,
                avecModificationForumAPosteriori: 1
            },
            autoriserImpressionBulletinReleveBrevet: 1,
            fonctionnalites: {
                gestionNotation: 1,
                gestionCompetences: 1,
                gestionBrevet: 1,
                gestionProgrammesBO: 1,
                gestionStages: 1,
                gestionIPR: 1,
                appelSaisirMotifJustifDAbsence: 1,
                gestionTwitter: 1,
                gestionBulletinClasse: 1,
                gestionPunitions: 1,
                gestionInfirmerie: 1,
                gestionPermanence: 1,
                gestionAbsencesDemiPension: 1,
                gestionAbsencesInternat: 1,
                gestionEtendueEleves: 1,
                gestionEleves: 1,
                gestionPersonnels: 1,
                forcerARInfos: 1,
                gestionSondageAnonyme: 1,
                gestionAbsenceDJParUtilisateur: 1,
                attestationEtendue: 1,
                afficherProjetsAccompagnement: 1,
                saisieEtendueAbsenceDepuisAppel: 1,
                importExportEducationNationale: 1,
                avecCommissions: 1,
                gestionCDT: 1,
                gestionPeriodeNotation: 1,
                gestionARBulletins: 1,
                avecTransformationFluxFichier: 1,
                gestionQCM: 1,
                gestionInfosSondage: 1
            },
            avecAccesRemplacementsProfs: 1,
            voirAbsencesEtRemplacementsProfs: 1,
            sePorterVolontaireRemplacement: 1,
            avecSaisieAppreciationsGenerales: 1,
            assistantSaisieAppreciations: 1,
            tailleMaxDocJointEtablissement: 1,
            tailleMaxRenduTafEleve: 1,
            tailleTravailAFaire: 1000,
            tailleCirconstance: 1000,
            tailleCommentaire: 1000,
            avecDroitDeconnexionMessagerie: 1,
            estDirecteur: 1,
            estEnseignant: 1,
            tailleMaxUpload: 1
        };
        MethodesObjet_1.MethodesObjet.indenterEnumere(exports.TypeDroits);
        class ObjetDroitsPN {
            constructor() {
                this.init();
                this.initDroitsSession();
            }
            get(aGenreDroit, aNumeroSemine) {
                const lEstEnConsultation = GApplication.getModeExclusif();
                switch (aGenreDroit) {
                case exports.TypeDroits.estEnConsultation:
                    return lEstEnConsultation;
                case exports.TypeDroits.tailleMaxUpload:
                    return 50 * 1024 * 1024;
                case exports.TypeDroits.cours.domaineConsultationEDT:
                    return this._droits.cours.domaineConsultationEDT;
                case exports.TypeDroits.cours.avecReservationCreneauxLibres:
                    return this._droits.cours.avecReservationCreneauxLibres && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierElevesDetachesSurCoursDeplaceCreneauLibre:
                    return this._droits.cours.modifierElevesDetachesSurCoursDeplaceCreneauLibre && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierMatieres:
                    return this._droits.cours.modifierMatieres && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierMatieresCoursEPIEtAP:
                    return this._droits.cours.modifierMatieresCoursEPIEtAP && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierClasses:
                    return this._droits.cours.modifierClasses && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierProfesseurs:
                    return this._droits.cours.modifierProfesseurs && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierSalles:
                    return this._droits.cours.modifierSalles && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierMateriels:
                    return this._droits.cours.modifierMateriels && !lEstEnConsultation;
                case exports.TypeDroits.cours.deplacerCours:
                    return this._droits.cours.deplacerCours && !lEstEnConsultation;
                case exports.TypeDroits.cours.creerCours:
                    return this._droits.cours.creerCours && !lEstEnConsultation;
                case exports.TypeDroits.cours.creerCoursPermanenceFeuilleAppel:
                    return this._droits.cours.creerCoursPermanenceFeuilleAppel && !lEstEnConsultation;
                case exports.TypeDroits.cours.estSemaineModifiable:
                    if (lEstEnConsultation) {
                        return false;
                    }
                    if (this._droits.cours.modificationNonLimiteAuxSemaine) {
                        return true;
                    }
                    if (!this._droits.cours.domaineModificationCours) {
                        return false;
                    }
                    return this._droits.cours.domaineModificationCours.getValeur(aNumeroSemine);
                case exports.TypeDroits.cours.estGestionnaireSalle:
                    return this._droits.cours.estGestionnaireSalle && !lEstEnConsultation;
                case exports.TypeDroits.cours.estGestionnaireMateriel:
                    return this._droits.cours.estGestionnaireMateriel && !lEstEnConsultation;
                case exports.TypeDroits.cours.avecMateriel:
                    return this._droits.cours.avecMateriel;
                case exports.TypeDroits.cours.avecFicheCoursConseil:
                    return this._droits.cours.avecFicheCoursConseil;
                case exports.TypeDroits.cours.masquerPartiesDeClasse:
                    return this._droits.cours.masquerPartiesDeClasse;
                case exports.TypeDroits.cours.afficherElevesDetachesDansCours:
                    return this._droits.cours.afficherElevesDetachesDansCours;
                case exports.TypeDroits.eleves.voirTousLesEleves:
                    return this._droits.VoirTousLesEleves;
                case exports.TypeDroits.eleves.consulterIdentiteEleve:
                    return this._droits.ConsulterIdentiteEleve;
                case exports.TypeDroits.eleves.consulterFichesResponsables:
                    return this._droits.ConsulterFichesResponsables;
                case exports.TypeDroits.eleves.consulterPhotosEleves:
                    return this._droits.ConsulterPhotosEleves;
                case exports.TypeDroits.eleves.avecSaisieParcoursPedagogique:
                    return this._droits.avecSaisieParcoursPedagogique && !lEstEnConsultation;
                case exports.TypeDroits.eleves.avecAffectationElevesGroupesNonGAEV:
                    return this._droits.AvecAffectationElevesGroupesNonGAEV && !lEstEnConsultation;
                case exports.TypeDroits.eleves.avecAffectationElevesGroupesGAEV:
                    return this._droits.AvecAffectationElevesGroupesGAEV && !lEstEnConsultation;
                case exports.TypeDroits.eleves.avecSaisieProjetIndividuel:
                    return this._droits.AvecSaisieProjetIndividuel && !lEstEnConsultation;
                case exports.TypeDroits.eleves.avecSaisieAttestations:
                    return this._droits.AvecSaisieAttestations && !lEstEnConsultation;
                case exports.TypeDroits.eleves.consulterDonneesAdministrativesAutresEleves:
                    return this._droits.consulterDonneesAdministrativesAutresEleves;
                case exports.TypeDroits.communication.toutesClasses:
                    return this._droits.AutoriserCommunicationsToutesClasses;
                case exports.TypeDroits.communication.avecDiscussion:
                    return this._droits.AvecDiscussion;
                case exports.TypeDroits.communication.discussionDesactiveeSelonHoraire:
                    return this._droits.discussionDesactiveeSelonHoraire;
                case exports.TypeDroits.communication.messageDiscussionDesactiveeSelonHoraire:
                    return this._droits.messageDiscussionDesactiveeSelonHoraire;
                case exports.TypeDroits.communication.discussionInterdit:
                    return this._droits.discussionInterdit;
                case exports.TypeDroits.communication.avecDiscussionPersonnels:
                    return this._droits.AvecDiscussionPersonnels;
                case exports.TypeDroits.communication.avecDiscussionProfesseurs:
                    return this._droits.AvecDiscussionProfesseurs;
                case exports.TypeDroits.communication.avecDiscussionParents:
                    return this._droits.AvecDiscussionParents;
                case exports.TypeDroits.communication.avecDiscussionEleves:
                    return this._droits.AvecDiscussionEleves;
                case exports.TypeDroits.communication.avecMessageInstantane:
                    return this._droits.avecMessageInstantane && !lEstEnConsultation;
                case exports.TypeDroits.communication.avecContactVS:
                    return this._droits.AvecContactVS && !lEstEnConsultation;
                case exports.TypeDroits.communication.lancerAlertesPPMS:
                    return this._droits.lancerAlertesPPMS && !lEstEnConsultation;
                case exports.TypeDroits.communication.estDestinataireChat:
                    return this._droits.estDestinataireChat;
                case exports.TypeDroits.communication.avecDiscussionAvancee:
                    return this._droits.AvecDiscussionAvancee;
                case exports.TypeDroits.absences.domaineRecapitulatifAbsences:
                    return this._droits.DomaineRecapitulatifAbsences;
                case exports.TypeDroits.absences.avecSaisieAppelEtVS:
                    return this._droits.AvecSaisieAppelEtVS;
                case exports.TypeDroits.absences.avecSaisieAppel:
                    return this._droits.AvecSaisieAppel;
                case exports.TypeDroits.absences.avecSaisieCours:
                    return this._droits.AvecSaisieCours;
                case exports.TypeDroits.absences.avecSaisieAbsenceOuverte:
                    return this._droits.AvecSaisieAbsenceOuverte;
                case exports.TypeDroits.absences.avecSaisieHorsCours:
                    return this._droits.AvecSaisieHorsCours;
                case exports.TypeDroits.absences.avecSaisieSurGrille:
                    return this._droits.AvecSaisieSurGrille;
                case exports.TypeDroits.absences.avecSaisieSurGrilleAppelProf:
                    return this._droits.AvecSaisieSurGrilleAppelProf;
                case exports.TypeDroits.absences.avecSaisieAbsence:
                    return this._droits.AvecSaisieAbsence;
                case exports.TypeDroits.absences.avecSaisieRetard:
                    return this._droits.AvecSaisieRetard;
                case exports.TypeDroits.absences.avecSaisiePassageInfirmerie:
                    return this._droits.AvecSaisiePassageInfirmerie;
                case exports.TypeDroits.absences.avecAnciennesFeuilleDAppel:
                    return this._droits.avecAnciennesFeuilleDAppel;
                case exports.TypeDroits.absences.avecSaisieExclusion:
                    return this._droits.AvecSaisieExclusion;
                case exports.TypeDroits.absences.avecSaisiePunition:
                    return this._droits.AvecSaisiePunition;
                case exports.TypeDroits.absences.avecSaisieObservation:
                    return this._droits.AvecSaisieObservation;
                case exports.TypeDroits.absences.avecConsultationDefautCarnet:
                    return this._droits.AvecConsultationDefautCarnet;
                case exports.TypeDroits.absences.avecSaisieDefautCarnet:
                    return this._droits.AvecSaisieDefautCarnet;
                case exports.TypeDroits.absences.avecSaisieObservationsParents:
                    return this._droits.AvecSaisieObservationsParents;
                case exports.TypeDroits.absences.avecSaisieEncouragements:
                    return this._droits.AvecSaisieEncouragements;
                case exports.TypeDroits.absences.avecAccesAuxEvenementsAutresCours:
                    return this._droits.AvecAccesAuxEvenementsAutresCours;
                case exports.TypeDroits.absences.avecSaisieAbsencesToutesPermanences:
                    return this._droits.AvecSaisieAbsencesToutesPermanences;
                case exports.TypeDroits.absences.listeDatesSaisieAbsence:
                    return (MethodesObjet_1.MethodesObjet.dupliquer(this._droits.listeDatesSaisieAbsence) || new ObjetListeElements_1.ObjetListeElements());
                case exports.TypeDroits.absences.avecSaisieAbsencesGrilleAbsencesRepas:
                    return this._droits.AvecSaisieAbsencesGrilleAbsencesRepas;
                case exports.TypeDroits.absences.avecSaisieAbsencesGrilleAbsencesInternat:
                    return this._droits.AvecSaisieAbsencesGrilleAbsencesInternat;
                case exports.TypeDroits.absences.avecSuiviAbsenceRetard:
                    return this._droits.AvecSuiviAbsenceRetard;
                case exports.TypeDroits.absences.avecSaisieMotifRetard:
                    return this._droits.AvecSaisieMotifRetard;
                case exports.TypeDroits.absences.avecDeclarerUneAbsence:
                    return this._droits.AvecDeclarerUneAbsence;
                case exports.TypeDroits.absences.avecDeclarerDispensePonctuelle:
                    return this._droits.AvecDeclarerDispensePonctuelle;
                case exports.TypeDroits.absences.avecDeclarerDispenseLongue:
                    return this._droits.AvecDeclarerDispenseLongue;
                case exports.TypeDroits.competence.avecSaisieEvaluations:
                    return this._droits.AvecSaisieEvaluations && !lEstEnConsultation;
                case exports.TypeDroits.competence.avecSaisieItems:
                    return this._droits.AvecSaisieItems && !lEstEnConsultation;
                case exports.TypeDroits.competence.avecValidationCompetences:
                    return this._droits.AvecValidationCompetences && !lEstEnConsultation;
                case exports.TypeDroits.agenda.avecSaisieAgenda:
                    return this._droits.AvecSaisieAgenda && !lEstEnConsultation;
                case exports.TypeDroits.actualite.avecSaisieActualite:
                    return this._droits.AvecSaisieActualite && !lEstEnConsultation;
                case exports.TypeDroits.communication.avecPublicationPageEtablissement:
                    return this._droits.avecPublicationPageEtablissement && !lEstEnConsultation;
                case exports.TypeDroits.listeDiffusion.avecPublication:
                    return this._droits.avecPublicationListeDiffusion && !lEstEnConsultation;
                case exports.TypeDroits.casierNumerique.avecSaisieDocumentsCasiersIntervenant:
                    return this._droits.avecSaisieDocumentsCasiersIntervenant && !lEstEnConsultation;
                case exports.TypeDroits.casierNumerique.avecSaisieDocumentsCasiersResponsable:
                    return this._droits.avecSaisieDocumentsCasiersResponsable && !lEstEnConsultation;
                case exports.TypeDroits.casierNumerique.avecAccesALaListeDesDocumentEleve:
                    return this._droits.avecAccesALaListeDesDocumentEleve;
                case exports.TypeDroits.casierNumerique.gererLaCollecteDeDocuments:
                    return this._droits.gererLaCollecteDeDocuments;
                case exports.TypeDroits.casierNumerique.collecterDocsAupresDesEleves:
                    return this._droits.collecterDocsAupresDesEleves;
                case exports.TypeDroits.casierNumerique.collecterDocsAupresDesResponsables:
                    return this._droits.collecterDocsAupresDesResponsables;
                case exports.TypeDroits.casierNumerique.accesSignatureNumerique:
                    return this._droits.accesSignatureNumerique;
                case exports.TypeDroits.dossierVS.creerDossiersVS:
                    return this._droits.CreerDossiersVS && !lEstEnConsultation;
                case exports.TypeDroits.dossierVS.modifierDossiersVS:
                    return this._droits.ModifierDossiersVS && !lEstEnConsultation;
                case exports.TypeDroits.dossierVS.saisieMotifsDossiersVS:
                    return this._droits.SaisieMotifsDossiersVS && !lEstEnConsultation;
                case exports.TypeDroits.dossierVS.publierDossiersVS:
                    return this._droits.PublierDossiersVS && !lEstEnConsultation;
                case exports.TypeDroits.dossierVS.consulterMemosEleve:
                    return this._droits.ConsulterMemosEleve;
                case exports.TypeDroits.dossierVS.saisirMemos:
                    return this._droits.SaisirMemos && !lEstEnConsultation;
                case exports.TypeDroits.decrochageScolaire.acces:
                    return this._droits.accesDecrochage;
                case exports.TypeDroits.decrochageScolaire.suivi:
                    return this._droits.suiviDecrochage && !lEstEnConsultation;
                case exports.TypeDroits.dispenses.saisie:
                    return this._droits.avecSaisieDispense && !lEstEnConsultation;
                case exports.TypeDroits.incidents.acces:
                    return this._droits.incidents.acces;
                case exports.TypeDroits.incidents.saisie:
                    return this._droits.incidents.saisie && !lEstEnConsultation;
                case exports.TypeDroits.incidents.uniquementMesIncidentsSignales:
                    return this._droits.incidents.uniquementMesIncidentsSignales;
                case exports.TypeDroits.incidents.publier:
                    return this._droits.incidents.publier && !lEstEnConsultation;
                case exports.TypeDroits.punition.avecPublicationPunitions:
                    return this._droits.AvecPublicationPunitions;
                case exports.TypeDroits.punition.acces:
                    return this._droits.avecAccesPunitions;
                case exports.TypeDroits.punition.saisie:
                    return this._droits.avecSaisiePunitions && !lEstEnConsultation;
                case exports.TypeDroits.creerMotifIncidentPunitionSanction:
                    return this._droits.avecCreerMotifIncidentPunitionSanction && !lEstEnConsultation;
                case exports.TypeDroits.punition.avecRecapPunitions:
                    return this._droits.avecRecapPunitions;
                case exports.TypeDroits.punition.avecRecapSanctions:
                    return this._droits.avecRecapSanctions;
                case exports.TypeDroits.stage.autoriserEditionToutesOffresStages:
                    return this._droits.autoriserEditionToutesOffresStages && !lEstEnConsultation;
                case exports.TypeDroits.cahierDeTexte.avecSaisieCahierDeTexte:
                    return this._droits.avecSaisieCahierDeTexte && !lEstEnConsultation;
                case exports.TypeDroits.cahierDeTexte.creerCategoriesDeCahierDeTexte:
                    return this._droits.creerCategoriesDeCahierDeTexte && !lEstEnConsultation;
                case exports.TypeDroits.cahierDeTexte.avecSaisiePieceJointe:
                    return this._droits.avecSaisiePieceJointeCahierDeTexte && !lEstEnConsultation;
                case exports.TypeDroits.cahierDeTexte.tailleMaxPieceJointe:
                    return Math.min(this._droits.tailleMaxPieceJointeCahierDeTexte, this.get(exports.TypeDroits.tailleMaxUpload));
                case exports.TypeDroits.notation.avecSaisieDevoirs:
                    return this._droits.AvecSaisieDevoirs && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecSaisieIdentifiant:
                    return this._droits.compte.avecSaisieIdentifiant && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecSaisieMotDePasse:
                    return this._droits.compte.avecSaisieMotDePasse && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecSaisieMotDePasseEleve:
                    return this._droits.compte.avecSaisieMotDePasseEleve && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecInformationsPersonnelles:
                    return this._droits.compte.avecInformationsPersonnelles;
                case exports.TypeDroits.compte.avecSaisieInfosPersoCoordonnees:
                    return this._droits.compte.avecSaisieInfosPersoCoordonnees && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecSaisieInfosPersoAutorisations:
                    return this._droits.compte.avecSaisieInfosPersoAutorisations && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecDemandeTravauxIntendance:
                    return this._droits.intendance.avecDemandeTravauxIntendance && !lEstEnConsultation;
                case exports.TypeDroits.intendance.uniquementMesTravauxIntendance:
                    return this._droits.intendance.uniquementMesTravauxIntendance && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecExecutionTravauxIntendance:
                    return this._droits.intendance.avecExecutionTravauxIntendance && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecGestionTravauxIntendance:
                    return this._droits.intendance.avecGestionTravauxIntendance && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecDemandeTachesSecretariat:
                    return this._droits.intendance.avecDemandeTachesSecretariat && !lEstEnConsultation;
                case exports.TypeDroits.intendance.uniquementMesTachesSecretariat:
                    return this._droits.intendance.uniquementMesTachesSecretariat && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecExecutionTachesSecretariat:
                    return this._droits.intendance.avecExecutionTachesSecretariat && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecDemandeTachesInformatique:
                    return this._droits.intendance.avecDemandeTachesInformatique && !lEstEnConsultation;
                case exports.TypeDroits.intendance.uniquementMesTachesInformatique:
                    return this._droits.intendance.uniquementMesTachesInformatique && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecExecutionTachesInformatique:
                    return this._droits.intendance.avecExecutionTachesInformatique && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecGestionTachesInformatique:
                    return this._droits.intendance.avecGestionTachesInformatique && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecDemandeCommandes:
                    return this._droits.intendance.avecDemandeCommandes && !lEstEnConsultation;
                case exports.TypeDroits.intendance.uniquementMesCommandes:
                    return this._droits.intendance.uniquementMesCommandes && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecExecutionCommandes:
                    return this._droits.intendance.avecExecutionCommandes && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecGestionCommandes:
                    return this._droits.intendance.avecGestionCommandes && !lEstEnConsultation;
                case exports.TypeDroits.services.avecCreationSousServices:
                    return this._droits.services.avecCreationSousServices && !lEstEnConsultation;
                case exports.TypeDroits.services.avecModificationCoefGeneral:
                    return this._droits.services.avecModificationCoefGeneral && !lEstEnConsultation;
                case exports.TypeDroits.trombinoscope.autoriseAConsulterPhotosDeTousLesEleves:
                    return this._droits.autoriseAConsulterPhotosDeTousLesEleves;
                case exports.TypeDroits.forum.avecCreationSujetForum:
                    return this._droits.avecCreationSujetForum;
                case exports.TypeDroits.forum.avecModificationForumAPosteriori:
                    return this._droits.avecModificationForumAPosteriori;
                case exports.TypeDroits.avecAccesRemplacementsProfs:
                    return this._droits.avecAccesRemplacementsProfs;
                case exports.TypeDroits.voirAbsencesEtRemplacementsProfs:
                    return this._droits.voirAbsencesEtRemplacementsProfs;
                case exports.TypeDroits.sePorterVolontaireRemplacement:
                    return this._droits.sePorterVolontaireRemplacement;
                case exports.TypeDroits.avecSaisieAppreciationsGenerales:
                    return this._droits.avecSaisieAppreciationsGenerales && !lEstEnConsultation;
                case exports.TypeDroits.assistantSaisieAppreciations:
                    return this._droits.AssistantSaisieAppreciations && !lEstEnConsultation;
                case exports.TypeDroits.tailleMaxDocJointEtablissement:
                    return Math.min(this._droits.tailleMaxDocJointEtablissement, this.get(exports.TypeDroits.tailleMaxUpload));
                case exports.TypeDroits.tailleMaxRenduTafEleve:
                    return Math.min(this._droits.tailleMaxRenduTafEleve, this.get(exports.TypeDroits.tailleMaxUpload));
                case exports.TypeDroits.tailleTravailAFaire:
                    return this._droits.tailleTravailAFaire;
                case exports.TypeDroits.tailleCirconstance:
                    return this._droits.tailleCirconstance;
                case exports.TypeDroits.tailleCommentaire:
                    return this._droits.tailleCommentaire;
                case exports.TypeDroits.autoriserImpressionBulletinReleveBrevet:
                    return this._droits.autoriserImpressionBulletinReleveBrevet;
                case exports.TypeDroits.avecDroitDeconnexionMessagerie:
                    return this._droits.avecDroitDeconnexionMessagerie;
                case exports.TypeDroits.estDirecteur:
                    return this._droits.estDirecteur;
                case exports.TypeDroits.estEnseignant:
                    return this._droits.estEnseignant;
                case exports.TypeDroits.fonctionnalites.gestionNotation:
                    return this._droitsSession.fonctionnalites.gestionNotation;
                case exports.TypeDroits.fonctionnalites.gestionCompetences:
                    return this._droitsSession.fonctionnalites.gestionCompetences;
                case exports.TypeDroits.fonctionnalites.gestionBrevet:
                    return this._droitsSession.fonctionnalites.gestionBrevet;
                case exports.TypeDroits.fonctionnalites.gestionProgrammesBO:
                    return this._droitsSession.fonctionnalites.gestionProgrammesBO;
                case exports.TypeDroits.fonctionnalites.gestionStages:
                    return this._droitsSession.fonctionnalites.gestionStages;
                case exports.TypeDroits.fonctionnalites.gestionIPR:
                    return this._droitsSession.fonctionnalites.gestionIPR;
                case exports.TypeDroits.fonctionnalites.appelSaisirMotifJustifDAbsence:
                    return this._droitsSession.fonctionnalites.appelSaisirMotifJustifDAbsence;
                case exports.TypeDroits.fonctionnalites.saisieEtendueAbsenceDepuisAppel:
                    return this._droitsSession.fonctionnalites.saisieEtendueAbsenceDepuisAppel;
                case exports.TypeDroits.fonctionnalites.gestionTwitter:
                    return this._droitsSession.fonctionnalites.gestionTwitter;
                case exports.TypeDroits.fonctionnalites.gestionBulletinClasse:
                    return this._droitsSession.fonctionnalites.gestionBulletinClasse;
                case exports.TypeDroits.fonctionnalites.gestionPunitions:
                    return this._droitsSession.fonctionnalites.gestionPunitions;
                case exports.TypeDroits.fonctionnalites.gestionCDT:
                    return this._droitsSession.fonctionnalites.gestionCDT;
                case exports.TypeDroits.fonctionnalites.gestionPeriodeNotation:
                    return this._droitsSession.fonctionnalites.gestionPeriodeNotation;
                case exports.TypeDroits.fonctionnalites.gestionInfirmerie:
                    return this._droitsSession.fonctionnalites.gestionInfirmerie;
                case exports.TypeDroits.fonctionnalites.gestionPermanence:
                    return this._droitsSession.fonctionnalites.gestionPermanence;
                case exports.TypeDroits.fonctionnalites.gestionAbsencesDemiPension:
                    return this._droitsSession.fonctionnalites.gestionAbsencesDemiPension;
                case exports.TypeDroits.fonctionnalites.gestionAbsencesInternat:
                    return this._droitsSession.fonctionnalites.gestionAbsencesInternat;
                case exports.TypeDroits.fonctionnalites.gestionEtendueEleves:
                    return this._droitsSession.fonctionnalites.gestionEtendueEleves;
                case exports.TypeDroits.fonctionnalites.gestionEleves:
                    return this._droitsSession.fonctionnalites.gestionEleves;
                case exports.TypeDroits.fonctionnalites.gestionPersonnels:
                    return this._droitsSession.fonctionnalites.gestionPersonnels;
                case exports.TypeDroits.fonctionnalites.forcerARInfos:
                    return this._droitsSession.fonctionnalites.forcerARInfos;
                case exports.TypeDroits.fonctionnalites.gestionSondageAnonyme:
                    return this._droitsSession.fonctionnalites.gestionSondageAnonyme;
                case exports.TypeDroits.fonctionnalites.gestionAbsenceDJParUtilisateur:
                    return this._droitsSession.fonctionnalites.gestionAbsenceDJParUtilisateur;
                case exports.TypeDroits.fonctionnalites.attestationEtendue:
                    return this._droitsSession.fonctionnalites.attestationEtendue;
                case exports.TypeDroits.fonctionnalites.afficherProjetsAccompagnement:
                    return this._droitsSession.fonctionnalites.afficherProjetsAccompagnement;
                case exports.TypeDroits.fonctionnalites.gestionARBulletins:
                    return this._droitsSession.fonctionnalites.gestionARBulletins;
                case exports.TypeDroits.fonctionnalites.importExportEducationNationale:
                    return this._droitsSession.fonctionnalites.importExportEducationNationale;
                case exports.TypeDroits.fonctionnalites.avecTransformationFluxFichier:
                    return this._droitsSession.fonctionnalites.avecTransformationFluxFichier;
                case exports.TypeDroits.fonctionnalites.avecCommissions:
                    return this._droits.avecCommissions;
                case exports.TypeDroits.fonctionnalites.gestionQCM:
                    return this._droitsSession.fonctionnalites.gestionQCM;
                case exports.TypeDroits.fonctionnalites.gestionInfosSondage:
                    return this._droitsSession.fonctionnalites.gestionInfosSondage;
                default:
                    ;return false;
                }
            }
            init() {
                this._droits = {
                    AssistantSaisieAppreciations: false,
                    VoirTousLesEleves: false,
                    ConsulterIdentiteEleve: false,
                    ConsulterFichesResponsables: false,
                    ConsulterPhotosEleves: false,
                    avecSaisieParcoursPedagogique: false,
                    AvecAffectationElevesGroupesNonGAEV: false,
                    AvecAffectationElevesGroupesGAEV: false,
                    AvecSaisieProjetIndividuel: false,
                    AvecSaisieAttestations: false,
                    consulterDonneesAdministrativesAutresEleves: true,
                    AutoriserCommunicationsToutesClasses: false,
                    AvecDiscussion: false,
                    discussionDesactiveeSelonHoraire: false,
                    messageDiscussionDesactiveeSelonHoraire: '',
                    discussionInterdit: false,
                    AvecDiscussionPersonnels: false,
                    AvecDiscussionProfesseurs: false,
                    AvecDiscussionParents: false,
                    AvecDiscussionEleves: false,
                    avecMessageInstantane: false,
                    AvecContactVS: false,
                    lancerAlertesPPMS: false,
                    estDestinataireChat: false,
                    AvecDiscussionAvancee: false,
                    DomaineRecapitulatifAbsences: new TypeDomaine_1.TypeDomaine(),
                    AvecSaisieAppelEtVS: false,
                    AvecSaisieAppel: false,
                    AvecSaisieCours: false,
                    AvecSaisieAbsenceOuverte: false,
                    AvecSaisieHorsCours: false,
                    AvecSaisieSurGrille: false,
                    AvecSaisieSurGrilleAppelProf: false,
                    AvecSaisieAbsence: false,
                    AvecSaisieRetard: false,
                    AvecSaisiePassageInfirmerie: false,
                    avecAnciennesFeuilleDAppel: false,
                    AvecSaisieExclusion: false,
                    AvecSaisiePunition: false,
                    AvecSaisieObservation: false,
                    AvecConsultationDefautCarnet: false,
                    AvecSaisieDefautCarnet: false,
                    AvecSaisieObservationsParents: false,
                    AvecSaisieEncouragements: false,
                    AvecAccesAuxEvenementsAutresCours: false,
                    AvecSaisieAbsencesToutesPermanences: false,
                    DateSaisieAbsence: null,
                    AvecDeclarerUneAbsence: false,
                    AvecDeclarerDispensePonctuelle: false,
                    AvecDeclarerDispenseLongue: false,
                    AvecSaisieAbsencesGrilleAbsencesRepas: false,
                    AvecSaisieAbsencesGrilleAbsencesInternat: false,
                    AvecSuiviAbsenceRetard: false,
                    AvecSaisieEvaluations: false,
                    AvecSaisieItems: false,
                    AvecValidationCompetences: false,
                    AvecSaisieAgenda: false,
                    AvecSaisieActualite: false,
                    avecPublicationPageEtablissement: false,
                    avecPublicationListeDiffusion: false,
                    avecSaisieDocumentsCasiersIntervenant: false,
                    avecSaisieDocumentsCasiersResponsable: false,
                    avecAccesALaListeDesDocumentEleve: false,
                    gererLaCollecteDeDocuments: false,
                    collecterDocsAupresDesEleves: false,
                    collecterDocsAupresDesResponsables: false,
                    accesSignatureNumerique: false,
                    CreerDossiersVS: false,
                    ModifierDossiersVS: false,
                    SaisieMotifsDossiersVS: false,
                    PublierDossiersVS: false,
                    ConsulterMemosEleve: false,
                    SaisirMemos: false,
                    accesDecrochage: false,
                    suiviDecrochage: false,
                    avecSaisieDispense: false,
                    incidents: {
                        acces: false,
                        saisie: false,
                        publier: false
                    },
                    AvecPublicationPunitions: false,
                    avecAccesPunitions: false,
                    avecSaisiePunitions: false,
                    avecRecapPunitions: false,
                    avecRecapSanctions: false,
                    avecCreerMotifIncidentPunitionSanction: false,
                    avecCommissions: false,
                    avecAccesRemplacementsProfs: false,
                    voirAbsencesEtRemplacementsProfs: false,
                    sePorterVolontaireRemplacement: false,
                    avecSaisieAppreciationsGenerales: false,
                    cours: {
                        domaineConsultationEDT: new TypeDomaine_1.TypeDomaine(),
                        avecReservationCreneauxLibres: false,
                        modifierElevesDetachesSurCoursDeplaceCreneauLibre: false,
                        modifierMatieres: false,
                        modifierMatieresCoursEPIEtAP: false,
                        modifierClasses: false,
                        modifierProfesseurs: false,
                        modifierSalles: false,
                        modifierMateriels: false,
                        creerCours: false,
                        creerCoursPermanenceFeuilleAppel: false,
                        deplacerCours: false,
                        modificationNonLimiteAuxSemaine: false,
                        domaineModificationCours: new TypeDomaine_1.TypeDomaine(),
                        estGestionnaireSalle: false,
                        estGestionnaireMateriel: false,
                        avecMateriel: false,
                        avecFicheCoursConseil: false,
                        masquerPartiesDeClasse: false,
                        afficherElevesDetachesDansCours: false
                    },
                    autoriserEditionToutesOffresStages: false,
                    avecSaisieCahierDeTexte: false,
                    creerCategoriesDeCahierDeTexte: false,
                    avecSaisiePieceJointeCahierDeTexte: false,
                    tailleMaxPieceJointeCahierDeTexte: 0,
                    AvecSaisieDevoirs: false,
                    tailleMaxDocJointEtablissement: 0,
                    tailleMaxRenduTafEleve: 0,
                    tailleTravailAFaire: 1000,
                    tailleCirconstance: 1000,
                    tailleCommentaire: 1000,
                    compte: {
                        avecSaisieIdentifiant: false,
                        avecSaisieMotDePasse: false,
                        avecSaisieMotDePasseEleve: false,
                        avecInformationsPersonnelles: false,
                        avecSaisieInfosPersoCoordonnees: false,
                        avecSaisieInfosPersoAutorisations: false
                    },
                    intendance: {
                        avecDemandeTravauxIntendance: false,
                        uniquementMesTravauxIntendance: false,
                        avecExecutionTravauxIntendance: false,
                        avecGestionTravauxIntendance: false,
                        avecDemandeTachesSecretariat: false,
                        uniquementMesTachesSecretariat: false,
                        avecExecutionTachesSecretariat: false,
                        avecDemandeTachesInformatique: false,
                        uniquementMesTachesInformatique: false,
                        avecExecutionTachesInformatique: false,
                        avecGestionTachesInformatique: false,
                        avecDemandeCommandes: false,
                        uniquementMesCommandes: false,
                        avecExecutionCommandes: false,
                        avecGestionCommandes: false
                    },
                    services: {
                        avecCreationSousServices: false,
                        avecModificationCoefGeneral: false
                    },
                    autoriseAConsulterPhotosDeTousLesEleves: false,
                    avecCreationSujetForum: false,
                    avecModificationForumAPosteriori: false,
                    autoriserImpressionBulletinReleveBrevet: false,
                    avecDroitDeconnexionMessagerie: false,
                    estDirecteur: false,
                    estEnseignant: false
                };
            }
            initDroitsSession() {
                this._droitsSession = {
                    fonctionnalites: {
                        gestionNotation: true,
                        gestionCompetences: true,
                        gestionBrevet: true,
                        gestionProgrammesBO: true,
                        gestionStages: true,
                        gestionIPR: true,
                        appelSaisirMotifJustifDAbsence: false,
                        gestionTwitter: false,
                        gestionBulletinClasse: true,
                        gestionPunitions: true,
                        gestionInfirmerie: true,
                        gestionPermanence: true,
                        gestionAbsencesDemiPension: true,
                        gestionAbsencesInternat: true,
                        gestionEtendueEleves: true,
                        gestionEleves: true,
                        gestionPersonnels: true,
                        forcerARInfos: false,
                        gestionSondageAnonyme: true,
                        gestionAbsenceDJParUtilisateur: false,
                        attestationEtendue: true,
                        afficherProjetsAccompagnement: true,
                        saisieEtendueAbsenceDepuisAppel: false,
                        importExportEducationNationale: true,
                        gestionCDT: true,
                        gestionPeriodeNotation: true,
                        gestionARBulletins: false,
                        avecTransformationFluxFichier: false,
                        gestionQCM: true,
                        gestionInfosSondage: true
                    }
                };
            }
            chargerJSON(aJSON) {
                if (aJSON && aJSON.autorisationsSession) {
                    this.initDroitsSession();
                    $.extend(true, this._droitsSession, aJSON.autorisationsSession);
                }
                if (aJSON && aJSON.autorisations) {
                    this._autorisationsChargees = true;
                    this.init();
                    $.extend(true, this._droits, aJSON.autorisations);
                    this._droits.listeDatesSaisieAbsence = new ObjetListeElements_1.ObjetListeElements();
                    for (let I = 0; this._droits.DateSaisieAbsence && (I < this._droits.DateSaisieAbsence.length); I++) {
                        const lDate = new ObjetElement_1.ObjetElement();
                        lDate.Date = aJSON.autorisations.DateSaisieAbsence[I];
                        lDate.Libelle = ObjetDate_1.GDate.formatDate(lDate.Date, '%JJJJ %JJ %MMM');
                        this._droits.listeDatesSaisieAbsence.addElement(lDate);
                    }
                }
            }
        }
        exports.ObjetDroitsPN = ObjetDroitsPN;
    },
    fn: 'objetdroitspn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Callback = void 0;
        class Callback {
            constructor(aPere, aEvenement, aIdentifiant) {
                this.pere = aPere;
                this.evenement = aEvenement;
                this.identifiant = aIdentifiant;
            }
            appel(...aParams) {
                if (this.pere && this.evenement) {
                    return this.evenement.call(this.pere, ...aParams);
                }
            }
        }
        exports.Callback = Callback;
    },
    fn: 'callback.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ConstantesIdRequetesAjaxCP = exports.ConstantesUploadFile = exports.ConstantesJSON = void 0;
        var ConstantesJSON;
        (function(ConstantesJSON) {
            ConstantesJSON["Signature"] = "Signature";
            ConstantesJSON["SignatureAttente"] = "SignatureAttente";
            ConstantesJSON["SignatureAttenteParametres"] = "ParametresAtt";
            ConstantesJSON["Donnees"] = "data";
            ConstantesJSON["numeroSession"] = "session";
            ConstantesJSON["numeroOrdre"] = "no";
            ConstantesJSON["donneesSecurisee"] = "dataSec";
            ConstantesJSON["donneesNonSecurisee"] = "dataNonSec";
            ConstantesJSON["idRequete"] = "id";
            ConstantesJSON["echecReseau"] = "echecReseau";
            ConstantesJSON["fichiersBase64"] = "fichiers";
        }
        )(ConstantesJSON || (exports.ConstantesJSON = ConstantesJSON = {}));
        var ConstantesUploadFile;
        (function(ConstantesUploadFile) {
            ConstantesUploadFile["numeroOrdre"] = "u_no";
            ConstantesUploadFile["numeroSession"] = "u_ns";
            ConstantesUploadFile["idRequete"] = "u_idR";
            ConstantesUploadFile["idFichier"] = "u_idF";
            ConstantesUploadFile["md5"] = "u_md5";
        }
        )(ConstantesUploadFile || (exports.ConstantesUploadFile = ConstantesUploadFile = {}));
        var ConstantesIdRequetesAjaxCP;
        (function(ConstantesIdRequetesAjaxCP) {
            ConstantesIdRequetesAjaxCP["fonctionParametres"] = "FonctionParametres";
            ConstantesIdRequetesAjaxCP["identification"] = "Identification";
            ConstantesIdRequetesAjaxCP["authentification"] = "Authentification";
            ConstantesIdRequetesAjaxCP["recupererInfosConnexion"] = "RecupererInfosConnexion";
        }
        )(ConstantesIdRequetesAjaxCP || (exports.ConstantesIdRequetesAjaxCP = ConstantesIdRequetesAjaxCP = {}));
    },
    fn: 'typesrequetejson.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteConsultation = exports.ObjetRequeteSaisie = exports.ObjetRequeteJSON = exports.utils = exports.EGenreReponseSaisie = void 0;
        require("Divers");
        const Callback_1 = require("Callback");
        const Invocateur_1 = require("Invocateur");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const AccessApp_1 = require("AccessApp");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        var EGenreReponseSaisie;
        (function(EGenreReponseSaisie) {
            EGenreReponseSaisie["erreur"] = "reponseSaisie_erreur";
            EGenreReponseSaisie["annulation"] = "reponseSaisie_annulation";
            EGenreReponseSaisie["succes"] = "reponseSaisie_succes";
        }
        )(EGenreReponseSaisie || (exports.EGenreReponseSaisie = EGenreReponseSaisie = {}));
        const utils = {
            getIdentNotification(aIdent) {
                return 'notificationsRequete_' + aIdent;
            }
        };
        exports.utils = utils;
        Invocateur_1.Invocateur.abonner('deserialisation_notificationsPolling', (aJSONRacine) => {
            const lJSON = aJSONRacine[TypesRequeteJSON_1.ConstantesJSON.Signature];
            if (lJSON) {
                if (lJSON.ModeExclusif !== undefined) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modificationModeExclusif, lJSON.ModeExclusif);
                }
                if (ObjetRequeteJSON.modules.deserialiserPolling) {
                    ObjetRequeteJSON.modules.deserialiserPolling(lJSON, aJSONRacine);
                }
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
            }
        }
        );
        class ObjetRequeteJSON {
            constructor(aPere, aEvenementSurReussite, aEvenementSurEchec) {
                this.communication = (0,
                AccessApp_1.getApp)().getCommunication();
                this.setOptions(null);
                const lSelf = this;
                const lPere = aPere;
                this.callbackReussite = new Callback_1.Callback(lPere || {},( (...aParams) => {
                    if (lPere && lPere.isDestroyed && lPere.isDestroyed()) {
                        IE.log.addLog('callbackReussite avec un pere detruit');
                        return;
                    }
                    const lResult = aEvenementSurReussite ? aEvenementSurReussite.apply(aPere, aParams) : null
                      , lResultPromesse = lSelf._executionFonctionPromesse(lSelf.reussitePromesse, aParams);
                    lSelf._refreshHTML(!!aEvenementSurReussite);
                    return aEvenementSurReussite ? lResult : lResultPromesse;
                }
                ));
                if (!this.estUneSaisie) {
                    this.callbackEchec = new Callback_1.Callback(lPere || {},( (...aParams) => {
                        if (lPere && lPere.isDestroyed && lPere.isDestroyed()) {
                            IE.log.addLog('callbackEchec avec un pere detruit');
                            return;
                        }
                        const lResult = aEvenementSurEchec ? aEvenementSurEchec.apply(aPere, aParams) : null
                          , lResultPromesse = lSelf._executionFonctionPromesse(lSelf.echecPromesse, aParams);
                        lSelf._refreshHTML(!!aEvenementSurReussite);
                        return aEvenementSurEchec ? lResult : lResultPromesse;
                    }
                    ));
                }
                this.reussitePromesse = null;
                this.echecPromesse = null;
                this._jsonRacineParametres = {};
                this.JSON = {};
                if (ObjetRequeteJSON.modules.modifierRechercheSignature) {
                    this.modifierRechercheSignature = ObjetRequeteJSON.modules.modifierRechercheSignature;
                }
                if (ObjetRequeteJSON.modules.initialiser) {
                    const lFunc = (aJSONSignature) => {
                        this._jsonRacineParametres[TypesRequeteJSON_1.ConstantesJSON.Signature] = aJSONSignature;
                    }
                    ;
                    ObjetRequeteJSON.modules.initialiser(lFunc);
                }
                if (ObjetRequeteJSON.modules.factoryModuleUploadCloud) {
                    this.moduleUploadCloud = ObjetRequeteJSON.modules.factoryModuleUploadCloud();
                }
            }
            static declarerModules(aModules) {
                Object.assign(ObjetRequeteJSON.modules, aModules);
            }
            setOptions(aOptions) {
                if (!this.options) {
                    this.options = {
                        avecRefreshHTML: true,
                        avecControleModeExclusif: false,
                        messageDetail: '',
                        gererMessageErreur: null,
                        sansBlocageInterface: false,
                        titreEchecModeExclusif: ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.UsageExclusif'),
                        messageEchecModeExclusif: ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.SaisieImpossibleConsultation')
                    };
                }
                Object.assign(this.options, aOptions);
                return this;
            }
            _reponseRequete(aJSONRacine, aErreurCommunication) {
                this._jsonRacine = aJSONRacine || {};
                this.JSONReponse = {};
                this.JSONSignature = {};
                if (aErreurCommunication) {
                    this.JSONReponse.erreurCommunication = aErreurCommunication;
                }
                if (this._jsonRacine[TypesRequeteJSON_1.ConstantesJSON.Donnees]) {
                    this.JSONReponse = this._jsonRacine[TypesRequeteJSON_1.ConstantesJSON.Donnees];
                }
                if (this._jsonRacine[TypesRequeteJSON_1.ConstantesJSON.Signature]) {
                    this.JSONSignature = this._jsonRacine[TypesRequeteJSON_1.ConstantesJSON.Signature];
                }
                this.traiterReponseRequete(aErreurCommunication);
                this.apresReponseRequete();
            }
            traiterReponseRequete(aErreurCommunication) {}
            apresReponseRequete() {}
            serialiserJSON() {
                if (this._jsonRacineParametres) {
                    if (this.JSON && !$.isEmptyObject(this.JSON)) {
                        this._jsonRacineParametres[TypesRequeteJSON_1.ConstantesJSON.Donnees] = this.JSON;
                    }
                }
            }
            async appelAsynchrone() {
                if (this.options.avecControleModeExclusif && (0,
                AccessApp_1.getApp)().getModeExclusif()) {
                    const lPromiseMessage = (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        titre: this.options.titreEchecModeExclusif,
                        message: this.options.messageEchecModeExclusif
                    });
                    return Promise.reject({
                        modeExclusif: true,
                        promiseMessage: lPromiseMessage
                    });
                }
                if (!this._jsonRacineParametres) {
                    IE.log.addLog('La requete n\'a pas de json definit !', null, IE.log.genre.Avertissement);
                }
                if (this.moduleUploadCloud && this.moduleUploadCloud.actif()) {
                    return this.moduleUploadCloud.lancer().then( () => {
                        return this._serialisationJSONEtEnvoieRequeteSaisie();
                    }
                    );
                }
                return this._serialisationJSONEtEnvoieRequeteSaisie();
            }
            lancerRequete(...aParametres) {
                if (aParametres.length > 0) {
                    Object.assign(this.JSON, aParametres[0]);
                }
                return this.appelAsynchrone();
            }
            addUpload(aParams) {
                this.paramsUpload = aParams;
                if (aParams && aParams.listeDJCloud) {
                    if (this.moduleUploadCloud && this.moduleUploadCloud.setListePJs) {
                        this.moduleUploadCloud.setListePJs(aParams.listeDJCloud);
                    } else {}
                }
                return this;
            }
            deserialiserSignature() {
                if (ObjetRequeteJSON.modules.deserialiserSignature) {
                    ObjetRequeteJSON.modules.deserialiserSignature(this.JSONSignature);
                }
            }
            _refreshHTML(aAvecEvenementSurReussite) {
                if (this.options.avecRefreshHTML) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
                    if (!aAvecEvenementSurReussite) {
                        setTimeout( () => {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
                        }
                        , 0);
                    }
                }
            }
            _executionFonctionPromesse(aMethodes, aArguments) {
                let lResult;
                if (aMethodes) {
                    if (aArguments.length === 0) {
                        lResult = aMethodes();
                    } else if (aArguments.length === 1) {
                        lResult = aMethodes(aArguments[0]);
                    } else {
                        lResult = aMethodes(Array.prototype.slice.call(aArguments));
                    }
                }
                return lResult;
            }
            _serialisationJSONEtEnvoieRequeteSaisie() {
                return new Promise( (aResolve, aReject) => {
                    this.reussitePromesse = aResolve;
                    this.echecPromesse = aReject;
                    this.serialiserJSON();
                    const lParams = {
                        nom: this.nom,
                        json: this._jsonRacineParametres,
                        callbackPere: this,
                        callbackEvenement: this._reponseRequete,
                        numeroRequete: undefined,
                        messageDetail: this.options.messageDetail,
                        requetePrioritaire: this.options.requetePrioritaire,
                        sansBlocageInterface: !!this.options.sansBlocageInterface,
                        estRequeteDeconnexion: this.options.estRequeteDeconnexion,
                        paramsUpload: this.paramsUpload
                    };
                    this.paramsUpload = null;
                    this.communication.appelFonctionAsynchroneXML(lParams);
                }
                );
            }
        }
        exports.ObjetRequeteJSON = ObjetRequeteJSON;
        ObjetRequeteJSON.modules = {};
        class ObjetRequeteSaisie extends ObjetRequeteJSON {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    avecControleModeExclusif: true,
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('requete.validationEnCours'),
                    titreEchecValidation: ObjetTraduction_1.GTraductions.getValeur('requete.validationEchec'),
                    titreAnnulationValidation: '',
                    afficherMessageErreur: true
                });
            }
            actionApresRequete(aGenreReponse) {
                this.callbackReussite.appel({
                    JSONRapportSaisie: this.JSONRapportSaisie,
                    JSONReponse: this.JSONReponse,
                    genreReponse: aGenreReponse,
                    messageErreur: this.messageErreur,
                    promiseMessage: this.promiseMessage
                });
            }
            traiterReponseRequete(aErreurCommunication) {
                this.actionApresRequete(this.traiterReponseSaisie(aErreurCommunication));
            }
            _getMessageErreurSaisie(aMessagesErreurRapportSaisie, aReponse, aTitre) {
                let lDetails = '';
                if (aMessagesErreurRapportSaisie && Array.isArray(aMessagesErreurRapportSaisie)) {
                    lDetails = aMessagesErreurRapportSaisie.join('\n');
                }
                let lTitre = aTitre || '';
                if (!lTitre) {
                    switch (aReponse) {
                    case EGenreReponseSaisie.erreur:
                        lTitre = this.options.titreEchecValidation || '';
                        break;
                    case EGenreReponseSaisie.annulation:
                        lTitre = this.options.titreAnnulationValidation || '';
                        break;
                    }
                }
                if (lTitre || lDetails) {
                    this.messageErreur = {
                        titre: lTitre,
                        message: lDetails || ''
                    };
                }
            }
            traiterReponseSaisieMessage(aMessagesErreurRapportSaisie, aReponse, aTitre) {
                this._getMessageErreurSaisie(aMessagesErreurRapportSaisie, aReponse, aTitre);
                if (this.messageErreur && this.options.afficherMessageErreur) {
                    this.promiseMessage = (0,
                    AccessApp_1.getApp)().getMessage().afficher(this.messageErreur);
                }
            }
            traiterReponseSaisie(aErreurCommunication) {
                let lReponse = aErreurCommunication ? EGenreReponseSaisie.erreur : EGenreReponseSaisie.succes;
                if (!this.JSONRapportSaisie) {
                    this.JSONRapportSaisie = (this._jsonRacine && this._jsonRacine.RapportSaisie ? this._jsonRacine.RapportSaisie : {});
                }
                let lMessagesErreurRapportSaisie = !this.JSONRapportSaisie ? null : this.JSONRapportSaisie._messagesErreur_ ? this.JSONRapportSaisie._messagesErreur_ : this.JSONRapportSaisie._erreurSaisie_ ? [] : null;
                if (!lMessagesErreurRapportSaisie) {
                    lMessagesErreurRapportSaisie = this.JSONSignature && this.JSONSignature.Erreur ? this.JSONSignature.MessageErreur ? [this.JSONSignature.MessageErreur] : [] : null;
                }
                const lTitreErreur = !this.JSONRapportSaisie ? null : this.JSONRapportSaisie.titre_Messages_Erreur || '';
                if (this.reponseEnErreur()) {
                    lReponse = EGenreReponseSaisie.erreur;
                } else if (lMessagesErreurRapportSaisie) {
                    lReponse = EGenreReponseSaisie.annulation;
                }
                if (lMessagesErreurRapportSaisie) {
                    this.traiterReponseSaisieMessage(lMessagesErreurRapportSaisie, lReponse, lTitreErreur);
                }
                this.deserialiserSignature();
                if (!lMessagesErreurRapportSaisie && this.options.avecControleModeExclusif && (0,
                AccessApp_1.getApp)().getModeExclusif()) {
                    lReponse = EGenreReponseSaisie.annulation;
                    this.messageErreur = {
                        titre: this.options.titreEchecModeExclusif,
                        message: this.options.messageEchecModeExclusif
                    };
                    if (this.options.afficherMessageErreur) {
                        this.promiseMessage = (0,
                        AccessApp_1.getApp)().getMessage().afficher(this.messageErreur);
                    }
                }
                return lReponse;
            }
            reponseEnErreur() {
                return (this.JSONRapportSaisie && this.JSONRapportSaisie._erreurSaisie_) || (this.JSONSignature && this.JSONSignature.Erreur);
            }
        }
        exports.ObjetRequeteSaisie = ObjetRequeteSaisie;
        ObjetRequeteSaisie.prototype.estUneSaisie = true;
        class ObjetRequeteConsultation extends ObjetRequeteJSON {
            constructor(...aParams) {
                super(...aParams);
                this._evenementEchec = aParams[2];
                this.setOptions({
                    gererMessageErreur: function(aMessage) {
                        const lMessage = aMessage && (aMessage.length > 0) ? aMessage : ObjetTraduction_1.GTraductions.getValeur('requete.erreur');
                        try {
                            return (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: lMessage
                            });
                        } catch (e) {}
                    }
                });
            }
            traiterReponseRequete(aErreurCommunication) {
                if (!aErreurCommunication) {
                    this.deserialiserSignature();
                }
                if (this.callbackEchec.evenement && this.JSONSignature && this.JSONSignature.Erreur) {
                    this.traiterReponseEchecConsultation();
                } else {
                    this.actionApresRequete();
                }
            }
            traiterReponseEchecConsultation() {
                const lMessage = this.JSONSignature && this.JSONSignature.MessageErreur ? this.JSONSignature.MessageErreur : '';
                IE.log.addLog('Erreur de consultation control avec le message : ' + lMessage, null, IE.log.genre.Avertissement);
                let lParametresEchec = lMessage;
                if (!this._evenementEchec) {
                    if (this.options.gererMessageErreur) {
                        lParametresEchec = {
                            promiseMessage: this.options.gererMessageErreur(lMessage),
                            message: lMessage
                        };
                    }
                }
                if (this.callbackEchec.appel(lParametresEchec)) {
                    this.actionApresRequete();
                }
            }
            actionApresRequete() {
                this.callbackReussite.appel(this.JSONReponse);
            }
        }
        exports.ObjetRequeteConsultation = ObjetRequeteConsultation;
    },
    fn: 'objetrequetejson.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Requetes = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const lCollectionRequetes = {};
        const lRequetes = function(aIdentRequete, ...aParams) {
            const lClasseRequete = lCollectionRequetes[aIdentRequete];
            if (!lClasseRequete) {
                return {
                    lancerRequete: function() {}
                };
            }
            const lInstanceRequete = new lClasseRequete(...aParams);
            lInstanceRequete.nom = aIdentRequete;
            return lInstanceRequete;
        };
        exports.Requetes = lRequetes;
        lRequetes.inscrire = function(aIdentRequete, aClasse) {
            if (!aIdentRequete) {
                return this;
            }
            if (!aClasse) {
                return this;
            }
            if (lCollectionRequetes[aIdentRequete]) {
                if (lCollectionRequetes[aIdentRequete] !== aClasse) {}
                return this;
            }
            if (!(aClasse === ObjetRequeteJSON_1.ObjetRequeteConsultation || aClasse === ObjetRequeteJSON_1.ObjetRequeteSaisie)) {
                aClasse.prototype.nom = aIdentRequete;
            }
            lCollectionRequetes[aIdentRequete] = aClasse;
        }
        ;
        lRequetes.collection = lCollectionRequetes;
    },
    fn: 'collectionrequetes.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.IELocalStorage = void 0;
        let lLocalStorage = null;
        try {
            lLocalStorage = window.localStorage || (window.globalStorage ? window.globalStorage[window.location.hostname] : null);
            if (lLocalStorage.setItem) {
                lLocalStorage.setItem('_bidon_', '1');
                lLocalStorage.removeItem('_bidon_');
            }
        } catch (e) {
            lLocalStorage = null;
        }
        exports.IELocalStorage = {
            actif: !!lLocalStorage,
            getItem(aCle) {
                if (lLocalStorage) {
                    try {
                        return lLocalStorage.getItem ? lLocalStorage.getItem(aCle) : lLocalStorage[aCle];
                    } catch (e) {}
                }
                return null;
            },
            getItemJSON(aCle) {
                const lResult = this.getItem(aCle);
                let lJSON = null;
                try {
                    lJSON = lResult ? JSON.parse(lResult) : null;
                } catch (e) {
                    lJSON = null;
                }
                return lJSON;
            },
            setItem(aCle, aValeur) {
                if (lLocalStorage) {
                    try {
                        if (lLocalStorage.setItem) {
                            lLocalStorage.setItem(aCle, aValeur);
                        } else {
                            lLocalStorage[aCle] = aValeur;
                        }
                    } catch (e) {}
                }
            },
            setItemJSON(aCle, aJSON) {
                let lChaineJSON = '';
                try {
                    lChaineJSON = JSON.stringify(aJSON);
                } catch (e) {}
                this.setItem(aCle, lChaineJSON || '');
            },
            removeItem(aCle) {
                if (lLocalStorage) {
                    try {
                        if (lLocalStorage.removeItem) {
                            lLocalStorage.removeItem(aCle);
                        } else {
                            lLocalStorage[aCle] = null;
                        }
                    } catch (e) {}
                }
            }
        };
    },
    fn: 'localstorage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireIdentifiantNavigateur = void 0;
        const LocalStorage_1 = require("LocalStorage");
        const c_marqueur = '_idNavIndex_';
        exports.UtilitaireIdentifiantNavigateur = {
            get() {
                try {
                    return LocalStorage_1.IELocalStorage.getItem(c_marqueur);
                } catch (e) {
                    return '';
                }
            },
            set(aValue) {
                try {
                    LocalStorage_1.IELocalStorage.setItem(c_marqueur, aValue);
                } catch (e) {}
            }
        };
    },
    fn: 'utilitaireidentifiantnavigateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteFonctionParametres = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const UtilitaireIdentifiantNavigateur_1 = require("UtilitaireIdentifiantNavigateur");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        class ObjetRequeteFonctionParametres extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            lancerRequete(aObjet) {
                this.JSON = {
                    Uuid: aObjet.uuidRSA,
                    identifiantNav: UtilitaireIdentifiantNavigateur_1.UtilitaireIdentifiantNavigateur.get()
                };
                return this.appelAsynchrone();
            }
            actionApresRequete() {
                if (this.JSONReponse.identifiantNav) {
                    UtilitaireIdentifiantNavigateur_1.UtilitaireIdentifiantNavigateur.set(this.JSONReponse.identifiantNav);
                }
                this.callbackReussite.appel(this.JSONReponse);
            }
        }
        exports.ObjetRequeteFonctionParametres = ObjetRequeteFonctionParametres;
        CollectionRequetes_1.Requetes.inscrire(TypesRequeteJSON_1.ConstantesIdRequetesAjaxCP.fonctionParametres, ObjetRequeteFonctionParametres);
    },
    fn: 'objetrequetefonctionparametres.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCycles = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const TypeDomaine_1 = require("TypeDomaine");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const ObjetDate_1 = require("ObjetDate");
        const C_JourCycleHorsGrille = -1;
        const C_MaxJoursParSemaine = 7;
        const {C_MaxDomaineCycle} = TypeDomaine_1.TypeDomaine;
        const C_NbJoursCaches = C_MaxDomaineCycle * 7 + 21;
        var EnumRecherche;
        (function(EnumRecherche) {
            EnumRecherche[EnumRecherche["strict"] = 0] = "strict";
            EnumRecherche[EnumRecherche["autoriserSuivants"] = 1] = "autoriserSuivants";
            EnumRecherche[EnumRecherche["autoriserPrecedents"] = 2] = "autoriserPrecedents";
        }
        )(EnumRecherche || (EnumRecherche = {}));
        class ObjetCycles {
            constructor() {
                this.donneesCycles = {
                    premiereDate: null,
                    derniereDate: null,
                    dateDebutPremierCycle: null,
                    joursOuvresParCycle: null,
                    premierJourSemaine: 2,
                    joursOuvres: null,
                    joursFeries: new TypeEnsembleNombre_1.TypeEnsembleNombre(),
                    cyclesSansFeries: false,
                    cyclesHebdomadaire: true
                };
                this.cache = {
                    datePremierJourOuvre: null,
                    cycleEtIndiceParDate: [],
                    datesAfficheesParCycle: [],
                    bornesCycles: [],
                    nombreCyclesAnneeScolaire: null,
                    domaineFerie: null,
                    indicesJoursOuvres: null
                };
                this.recherche = EnumRecherche;
            }
            init(aParametres) {
                $.extend(this.donneesCycles, aParametres);
                this._calculer();
                return this;
            }
            nombreJoursOuvresParCycle() {
                return this.donneesCycles.joursOuvresParCycle;
            }
            dateDebutPremierCycle() {
                return new Date(this.cache.bornesCycles[1].DateDebut);
            }
            dateFinDernierCycle() {
                return new Date(this.cache.bornesCycles[this.cache.nombreCyclesAnneeScolaire].DateFin);
            }
            dateEnCycleEtJourCycle(aDate, aTypeRecherche) {
                let LDate;
                let LCycleEtIndice = {
                    cycle: -1,
                    indice: C_JourCycleHorsGrille
                };
                let lResult = {
                    trouve: false
                };
                try {
                    LDate = aDate;
                    if (LDate < this.dateDebutPremierCycle()) {
                        if (aTypeRecherche !== ObjetCycles.recherche.autoriserSuivants) {
                            return lResult;
                        }
                        LDate = this.dateDebutPremierCycle();
                    }
                    if (LDate > this.dateFinDernierCycle()) {
                        if (aTypeRecherche !== ObjetCycles.recherche.autoriserPrecedents) {
                            return lResult;
                        }
                        LDate = this.dateFinDernierCycle();
                    }
                    while (LCycleEtIndice.indice === C_JourCycleHorsGrille && LDate >= this.dateDebutPremierCycle() && LDate <= this.dateFinDernierCycle()) {
                        LCycleEtIndice = this.cycleEtIndiceCycleDeDate(LDate);
                        if (LCycleEtIndice.indice === C_JourCycleHorsGrille) {
                            switch (aTypeRecherche) {
                            case ObjetCycles.recherche.autoriserSuivants:
                                LDate = ObjetDate_1.GDate.getJourSuivant(LDate, 1);
                                break;
                            case ObjetCycles.recherche.autoriserPrecedents:
                                LDate = ObjetDate_1.GDate.getJourSuivant(LDate, -1);
                                break;
                            default:
                                return lResult;
                            }
                        }
                    }
                } finally {
                    lResult.cycle = LCycleEtIndice.cycle;
                    lResult.indice = LCycleEtIndice.indice;
                    lResult.trouve = lResult.indice !== C_JourCycleHorsGrille;
                }
                return lResult;
            }
            nombreCyclesAnneeScolaire() {
                return this.cache.nombreCyclesAnneeScolaire;
            }
            cycleDeLaDate(aDate) {
                const LDate = this._getDateBornee(aDate)
                  , lObj = this.cycleEtIndiceCycleDeDate(LDate);
                return lObj ? lObj.cycle : 0;
            }
            dateEnJourCycle(aDate) {
                const lTimeJour = new Date(aDate.getFullYear(),aDate.getMonth(),aDate.getDate()).getTime();
                if (!this._cacheDateEnJourCycle) {
                    this._cacheDateEnJourCycle = {};
                }
                if (!this._cacheDateEnJourCycle[lTimeJour] && this._cacheDateEnJourCycle[lTimeJour] !== 0) {
                    const lResult = this.dateEnCycleEtJourCycle(aDate, ObjetCycles.recherche.autoriserPrecedents);
                    if (lResult.trouve) {
                        this._cacheDateEnJourCycle[lTimeJour] = lResult.indice;
                    }
                }
                const lJourCycle = this._cacheDateEnJourCycle[lTimeJour];
                return lJourCycle === undefined ? 0 : lJourCycle;
            }
            cycleCourant() {
                return this.cycleDeLaDate(new Date());
            }
            dateDebutCycle(aCycle) {
                const lDate = this.cache.bornesCycles[Math.borner(aCycle, 1, this.nombreCyclesAnneeScolaire())].DateDebut;
                return MethodesObjet_1.MethodesObjet.isDate(lDate) ? new Date(lDate) : lDate;
            }
            dateFinCycle(aCycle) {
                const lDate = this.cache.bornesCycles[Math.borner(aCycle, 1, this.nombreCyclesAnneeScolaire())].DateFin;
                return MethodesObjet_1.MethodesObjet.isDate(lDate) ? new Date(lDate) : lDate;
            }
            datePremierJourOuvreCycle(aCycle) {
                const lCycle = Math.borner(aCycle, 1, this.nombreCyclesAnneeScolaire());
                let lResult = null;
                for (let lIndice = 0; lIndice < this.donneesCycles.joursOuvresParCycle; lIndice++) {
                    lResult = this.cache.datesAfficheesParCycle[lCycle][lIndice] || null;
                    if (lResult !== null) {
                        break;
                    }
                }
                return MethodesObjet_1.MethodesObjet.isDate(lResult) ? new Date(lResult) : lResult;
            }
            dateDernierJourOuvreCycle(aCycle) {
                const lCycle = Math.borner(aCycle, 1, this.nombreCyclesAnneeScolaire());
                let lIndice = this.donneesCycles.joursOuvresParCycle;
                let lResult = null;
                while (lResult === null && lIndice >= 0) {
                    lResult = this.cache.datesAfficheesParCycle[lCycle][lIndice] || null;
                    lIndice += -1;
                }
                return MethodesObjet_1.MethodesObjet.isDate(lResult) ? new Date(lResult) : lResult;
            }
            jourCycleEnDate(AJourCycle, ACycle) {
                if (ACycle < 1) {
                    return this.dateDebutPremierCycle();
                }
                if (ACycle > this.cache.nombreCyclesAnneeScolaire) {
                    return this.dateFinCycle(this.cache.nombreCyclesAnneeScolaire);
                }
                if (AJourCycle < 0) {
                    return this.dateDebutCycle(ACycle);
                }
                if (!this.cache.datesAfficheesParCycle[ACycle]) {
                    return this.dateDebutPremierCycle();
                }
                if (AJourCycle >= this.cache.datesAfficheesParCycle[ACycle].length) {
                    return this.dateFinCycle(ACycle);
                }
                const lDate = this.cache.datesAfficheesParCycle[ACycle][AJourCycle];
                return MethodesObjet_1.MethodesObjet.isDate(lDate) ? new Date(lDate) : lDate;
            }
            estDateFerie(aDate) {
                if (this.donneesCycles.joursFeries) {
                    const lJourAnnuel = ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle(), aDate);
                    return this.donneesCycles.joursFeries.contains(lJourAnnuel + 1);
                }
                return false;
            }
            getDomaineFerie() {
                if (!this.cache.domaineFerie) {
                    this.cache.domaineFerie = new TypeDomaine_1.TypeDomaine();
                    let lJourCycle, LSemaineFeriee, lNombreCycles = this.nombreCyclesAnneeScolaire(), lNombreJoursCycle = this.nombreJoursOuvresParCycle(), lDate;
                    for (let lCycle = 1; lCycle <= lNombreCycles; lCycle += 1) {
                        LSemaineFeriee = true;
                        for (lJourCycle = 0; lJourCycle < lNombreJoursCycle && LSemaineFeriee; lJourCycle += 1) {
                            lDate = this.jourCycleEnDate(lJourCycle, lCycle);
                            LSemaineFeriee = this.estDateFerie(lDate) || !this._dateDansBorne(lDate);
                        }
                        this.cache.domaineFerie.setValeur(LSemaineFeriee, lCycle);
                    }
                }
                return this.cache.domaineFerie;
            }
            cycleDansAnnee(aCycle) {
                return Math.max(1, Math.min(this.nombreCyclesAnneeScolaire(), aCycle));
            }
            indicesJoursOuvres() {
                if (!this.cache.indicesJoursOuvres) {
                    this.cache.indicesJoursOuvres = [];
                    if (this.donneesCycles.cyclesHebdomadaire) {
                        for (let i = 0; i < 7; i++) {
                            if (this.donneesCycles.joursOuvres.contains(i)) {
                                let lJour = (i + this.donneesCycles.premierJourSemaine - 2) % 7;
                                if (lJour < 0) {
                                    lJour = 6;
                                }
                                this.cache.indicesJoursOuvres.push(lJour);
                            }
                        }
                    } else {
                        for (let i = 0; i < this.donneesCycles.joursOuvresParCycle; i++) {
                            this.cache.indicesJoursOuvres.push(i);
                        }
                    }
                }
                return this.cache.indicesJoursOuvres;
            }
            _calculer() {
                let lDatesAIgnorer = new TypeEnsembleNombre_1.TypeEnsembleNombre(), lEnSemaine, lJourSemaine, iJour, iCycle, lIndiceCycle, lJourHebdo, LCycle, IDate, LIndiceJourAnnee, LPasToutRempli, lTab, i;
                this._cacheDateEnJourCycle = null;
                if (!this.donneesCycles.joursOuvres || this.donneesCycles.joursOuvres.count() === 0) {
                    return;
                }
                if (this.donneesCycles.cyclesSansFeries && this.donneesCycles.joursFeries) {
                    lTab = this.donneesCycles.joursFeries.items();
                    for (i in lTab) {
                        lDatesAIgnorer.add(ObjetDate_1.GDate.getJourSuivant(this.donneesCycles.dateDebutPremierCycle, lTab[i] - 1).getTime());
                    }
                }
                this.cache.datePremierJourOuvre = this.donneesCycles.premiereDate;
                lEnSemaine = lDatesAIgnorer.count() === 0 && (this.donneesCycles.joursOuvresParCycle % this.donneesCycles.joursOuvres.count() === 0);
                if (lEnSemaine) {
                    lJourSemaine = this.cache.datePremierJourOuvre.getDay() + 1;
                    while (lJourSemaine !== this.donneesCycles.premierJourSemaine) {
                        this.cache.datePremierJourOuvre = ObjetDate_1.GDate.getJourSuivant(this.cache.datePremierJourOuvre, -1);
                        lJourSemaine = this.cache.datePremierJourOuvre.getDay() + 1;
                    }
                }
                for (iJour = 0; iJour <= C_NbJoursCaches; iJour++) {
                    this.cache.cycleEtIndiceParDate[iJour] = {
                        cycle: 1,
                        indice: C_JourCycleHorsGrille
                    };
                }
                for (iCycle = 0; iCycle <= ObjetCycles.C_MaxDomaineCycle; iCycle += 1) {
                    this.cache.datesAfficheesParCycle[iCycle] = [];
                    this.cache.bornesCycles[iCycle] = {
                        DateDebut: new Date(0),
                        DateFin: new Date(0)
                    };
                }
                this.cache.bornesCycles[1].DateDebut = this.cache.datePremierJourOuvre;
                lIndiceCycle = -1;
                lJourHebdo = _DateEnJourHebdo(this.cache.datePremierJourOuvre, this.donneesCycles.premierJourSemaine) - 1;
                LCycle = 0;
                let lIncDate = 0;
                this.cache.nombreCyclesAnneeScolaire = 0;
                LIndiceJourAnnee = 0;
                LPasToutRempli = true;
                while (LPasToutRempli) {
                    IDate = ObjetDate_1.GDate.getJourSuivant(this.cache.datePremierJourOuvre, lIncDate);
                    lIncDate++;
                    lJourHebdo = _IncJourHebdo(lJourHebdo);
                    if (lDatesAIgnorer.contains(IDate.getTime()) || ((!lEnSemaine) && (IDate.getTime() < this.donneesCycles.premiereDate.getTime())) || !(this.donneesCycles.joursOuvres.contains(lJourHebdo))) {
                        if (LIndiceJourAnnee <= C_NbJoursCaches) {
                            this.cache.cycleEtIndiceParDate[LIndiceJourAnnee] = {
                                cycle: Math.max(1, LCycle),
                                indice: C_JourCycleHorsGrille
                            };
                        }
                    } else {
                        lIndiceCycle = (lIndiceCycle + 1) % this.donneesCycles.joursOuvresParCycle;
                        if (lIndiceCycle === 0) {
                            LCycle += 1;
                        }
                        if (LIndiceJourAnnee <= C_NbJoursCaches) {
                            this.cache.cycleEtIndiceParDate[LIndiceJourAnnee] = {
                                cycle: LCycle,
                                indice: lIndiceCycle
                            };
                        }
                        if (LCycle <= ObjetCycles.C_MaxDomaineCycle) {
                            this.cache.datesAfficheesParCycle[LCycle][lIndiceCycle] = IDate;
                        }
                        if ((lIndiceCycle === 0) && (LCycle > 1)) {
                            if (LCycle <= ObjetCycles.C_MaxDomaineCycle) {
                                this.cache.bornesCycles[LCycle].DateDebut = new Date(IDate.getTime());
                            }
                            if (LCycle - 1 <= ObjetCycles.C_MaxDomaineCycle) {
                                this.cache.bornesCycles[LCycle - 1].DateFin = ObjetDate_1.GDate.getJourSuivant(IDate, -1);
                            }
                        }
                    }
                    if (ObjetDate_1.GDate.estJourEgal(IDate, this.donneesCycles.derniereDate)) {
                        this.cache.nombreCyclesAnneeScolaire = LCycle;
                    }
                    LIndiceJourAnnee += 1;
                    LPasToutRempli = (LCycle <= ObjetCycles.C_MaxDomaineCycle) || (LIndiceJourAnnee <= C_NbJoursCaches);
                }
            }
            cycleEtIndiceCycleDeDate(aDate) {
                const lDate = ObjetDate_1.GDate.getJour(aDate);
                const LDateRef = this.cache.bornesCycles[1].DateDebut;
                let lResult = {
                    cycle: -1,
                    indice: C_JourCycleHorsGrille
                };
                if ((lDate.getTime() >= LDateRef.getTime()) && (lDate.getTime() <= this.cache.bornesCycles[this.cache.nombreCyclesAnneeScolaire].DateFin.getTime())) {
                    lResult = this.cache.cycleEtIndiceParDate[ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(LDateRef, lDate)];
                }
                return lResult;
            }
            _getDateBornee(aDate) {
                if (aDate < this.donneesCycles.premiereDate) {
                    return new Date(this.donneesCycles.premiereDate.getTime());
                }
                if (aDate > this.donneesCycles.derniereDate) {
                    return new Date(this.donneesCycles.derniereDate.getTime());
                } else {
                    return aDate;
                }
            }
            _dateDansBorne(aDate) {
                return (aDate >= this.donneesCycles.premiereDate || ObjetDate_1.GDate.estJourEgal(aDate, this.donneesCycles.premiereDate)) && (aDate <= this.donneesCycles.derniereDate || ObjetDate_1.GDate.estJourEgal(aDate, this.donneesCycles.derniereDate));
            }
        }
        exports.ObjetCycles = ObjetCycles;
        ObjetCycles.C_IndicePremierJourCycle = 0;
        ObjetCycles.C_IndiceDernierJourCycle = Number.MAX_VALUE;
        ObjetCycles.C_IndiceDernierJourOuvreCycle = Number.MAX_VALUE - 1;
        ObjetCycles.C_MaxDomaineCycle = C_MaxDomaineCycle;
        ObjetCycles.recherche = EnumRecherche;
        function _DateEnJourHebdo(ADate, APremierJourSemaine) {
            let LPremierJour = APremierJourSemaine;
            if (LPremierJour > C_MaxJoursParSemaine) {
                LPremierJour = LPremierJour - C_MaxJoursParSemaine;
            }
            let LJourTt = ADate.getDay() + 1;
            if (LJourTt >= LPremierJour) {
                return LJourTt - LPremierJour;
            }
            return LJourTt + C_MaxJoursParSemaine - LPremierJour;
        }
        function _IncJourHebdo(aJourHebdo) {
            return (aJourHebdo + 1) % C_MaxJoursParSemaine;
        }
    },
    fn: 'objetcycles.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ChoixThemesPourAppli = exports.ChoixDarkMode = exports.TypeThemeCollectivite = exports.TypeThemeProduit = exports.TypeThemeCouleur = void 0;
        exports.forEachThemesCouleurEtProduitEtCollectivite = forEachThemesCouleurEtProduitEtCollectivite;
        const MethodesObjet_1 = require("MethodesObjet");
        var TypeThemeCouleur;
        (function(TypeThemeCouleur) {
            TypeThemeCouleur[TypeThemeCouleur["Bordeaux"] = 0] = "Bordeaux";
            TypeThemeCouleur[TypeThemeCouleur["Jaune"] = 1] = "Jaune";
            TypeThemeCouleur[TypeThemeCouleur["Bleu"] = 2] = "Bleu";
            TypeThemeCouleur[TypeThemeCouleur["Turquoise"] = 3] = "Turquoise";
            TypeThemeCouleur[TypeThemeCouleur["Vert"] = 4] = "Vert";
            TypeThemeCouleur[TypeThemeCouleur["Violet"] = 5] = "Violet";
        }
        )(TypeThemeCouleur || (exports.TypeThemeCouleur = TypeThemeCouleur = {}));
        var TypeThemeProduit;
        (function(TypeThemeProduit) {
            TypeThemeProduit[TypeThemeProduit["ProduitPN"] = 1003] = "ProduitPN";
            TypeThemeProduit[TypeThemeProduit["ProduitEDT"] = 1004] = "ProduitEDT";
            TypeThemeProduit[TypeThemeProduit["ProduitHP"] = 1005] = "ProduitHP";
            TypeThemeProduit[TypeThemeProduit["Pronote"] = 1006] = "Pronote";
            TypeThemeProduit[TypeThemeProduit["EDT"] = 1007] = "EDT";
            TypeThemeProduit[TypeThemeProduit["MobileHP"] = 1008] = "MobileHP";
        }
        )(TypeThemeProduit || (exports.TypeThemeProduit = TypeThemeProduit = {}));
        var TypeThemeCollectivite;
        (function(TypeThemeCollectivite) {
            TypeThemeCollectivite[TypeThemeCollectivite["ColIdf"] = 1009] = "ColIdf";
        }
        )(TypeThemeCollectivite || (exports.TypeThemeCollectivite = TypeThemeCollectivite = {}));
        function forEachThemesCouleurEtProduitEtCollectivite(aCallback) {
            for (const lKey of MethodesObjet_1.MethodesObjet.enumKeys(TypeThemeCouleur)) {
                aCallback(TypeThemeCouleur[lKey], lKey);
            }
            for (const lKey of MethodesObjet_1.MethodesObjet.enumKeys(TypeThemeProduit)) {
                aCallback(TypeThemeProduit[lKey], lKey);
            }
            for (const lKey of MethodesObjet_1.MethodesObjet.enumKeys(TypeThemeCollectivite)) {
                aCallback(TypeThemeCollectivite[lKey], lKey);
            }
        }
        var ChoixDarkMode;
        (function(ChoixDarkMode) {
            ChoixDarkMode["systeme"] = "systeme";
            ChoixDarkMode["clair"] = "clair";
            ChoixDarkMode["sombre"] = "sombre";
        }
        )(ChoixDarkMode || (exports.ChoixDarkMode = ChoixDarkMode = {}));
        exports.ChoixThemesPourAppli = [TypeThemeProduit.Pronote, TypeThemeProduit.MobileHP, TypeThemeProduit.EDT, TypeThemeCollectivite.ColIdf];
    },
    fn: 'typethemecouleur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ThemesCouleurs = void 0;
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        const Invocateur_1 = require("Invocateur");
        const AccessApp_1 = require("AccessApp");
        class ObjetThemesCouleurs {
            constructor() {
                var _a, _b, _c, _d;
                this.elementZoneFenetre = null;
                this.choixDarkMode = TypeThemeCouleur_1.ChoixDarkMode.clair;
                this.estDarkModeSysteme = false;
                this.avecChoixForcerDarkMode_DEBUG = !IE.estMobile;
                this.setTheme(null);
                Invocateur_1.Invocateur.abonner('creationZoneFenetre', (aElement) => {
                    this.elementZoneFenetre = aElement;
                    $(this.elementZoneFenetre).addClass(this.getClassThemeCourant());
                }
                );
                if (global.matchMedia) {
                    try {
                        this.estDarkModeSysteme = (_a = global.matchMedia) === null || _a === void 0 ? void 0 : _a.call(global, '(prefers-color-scheme: dark)').matches;
                        (_d = (_c = (_b = global.matchMedia) === null || _b === void 0 ? void 0 : _b.call(global, '(prefers-color-scheme: dark)')) === null || _c === void 0 ? void 0 : _c.addEventListener) === null || _d === void 0 ? void 0 : _d.call(_c, 'change', event => {
                            var _a, _b;
                            this.estDarkModeSysteme = (_b = (_a = global.matchMedia) === null || _a === void 0 ? void 0 : _a.call(global, '(prefers-color-scheme: dark)')) === null || _b === void 0 ? void 0 : _b.matches;
                            this.actualiserDarkMode();
                        }
                        );
                    } catch (e) {}
                }
            }
            setTheme(aGenreTheme) {
                this.genreTheme = aGenreTheme;
                if (document.body && (0,
                AccessApp_1.getApp)()) {
                    this.actualiserDarkMode();
                    this.actualiserTheme();
                }
            }
            getClassThemeCourant() {
                let lNomTheme = '';
                (0,
                TypeThemeCouleur_1.forEachThemesCouleurEtProduitEtCollectivite)( (aTheme, aKey) => {
                    if (aTheme === this.genreTheme) {
                        lNomTheme = aKey;
                    }
                }
                );
                if (lNomTheme) {
                    return 'Theme' + lNomTheme;
                } else {
                    return 'ThemeNeutre';
                }
            }
            actualiserTheme() {
                const lTabRemove = ['ThemeNeutre'];
                (0,
                TypeThemeCouleur_1.forEachThemesCouleurEtProduitEtCollectivite)( (aTheme, aKey) => {
                    lTabRemove.push('Theme' + aKey);
                }
                );
                const lNomTheme = this.getClassThemeCourant();
                $('#' + (0,
                AccessApp_1.getApp)().getIdConteneur().escapeJQ()).removeClass(lTabRemove.join(' ')).addClass(lNomTheme);
                if (this.elementZoneFenetre) {
                    $(this.elementZoneFenetre).removeClass(lTabRemove.join(' ')).addClass(lNomTheme);
                }
            }
            getDarkMode() {
                var _a, _b, _c, _d, _e;
                if (this.avecChoixForcerDarkMode_DEBUG && ((_b = (_a = (0,
                AccessApp_1.getApp)()) === null || _a === void 0 ? void 0 : _a.estDebug) === null || _b === void 0 ? void 0 : _b.call(_a))) {
                    return (_e = (_d = (_c = (0,
                    AccessApp_1.getApp)()) === null || _c === void 0 ? void 0 : _c.getOptionsDebug) === null || _d === void 0 ? void 0 : _d.call(_c)) === null || _e === void 0 ? void 0 : _e.forcerDarkMode;
                }
                switch (this.choixDarkMode) {
                case TypeThemeCouleur_1.ChoixDarkMode.clair:
                    {
                        return false;
                    }
                case TypeThemeCouleur_1.ChoixDarkMode.sombre:
                    {
                        return true;
                    }
                case TypeThemeCouleur_1.ChoixDarkMode.systeme:
                    {
                        return this.estDarkModeSysteme;
                    }
                default:
                    ;
                }
                return false;
            }
            setChoixDarkMode(aChoixThemeSombre) {
                this.choixDarkMode = aChoixThemeSombre;
                this.actualiserDarkMode();
            }
            actualiserDarkMode() {
                if (this.getDarkMode()) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }
        }
        exports.ThemesCouleurs = new ObjetThemesCouleurs();
    },
    fn: 'themescouleurs.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreDomaineFrequence = void 0;
        var EGenreDomaineFrequence;
        (function(EGenreDomaineFrequence) {
            EGenreDomaineFrequence[EGenreDomaineFrequence["H"] = 0] = "H";
            EGenreDomaineFrequence[EGenreDomaineFrequence["QZ1"] = 1] = "QZ1";
            EGenreDomaineFrequence[EGenreDomaineFrequence["QZ2"] = 2] = "QZ2";
        }
        )(EGenreDomaineFrequence || (exports.EGenreDomaineFrequence = EGenreDomaineFrequence = {}));
    },
    fn: 'enumere_domainefrequence.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreEspace = void 0;
        var EGenreEspace;
        (function(EGenreEspace) {
            EGenreEspace[EGenreEspace["Commun"] = 0] = "Commun";
            EGenreEspace[EGenreEspace["Professeur"] = 1] = "Professeur";
            EGenreEspace[EGenreEspace["Parent"] = 2] = "Parent";
            EGenreEspace[EGenreEspace["Eleve"] = 3] = "Eleve";
            EGenreEspace[EGenreEspace["Entreprise"] = 4] = "Entreprise";
            EGenreEspace[EGenreEspace["Academie"] = 5] = "Academie";
            EGenreEspace[EGenreEspace["Mobile_Eleve"] = 6] = "Mobile_Eleve";
            EGenreEspace[EGenreEspace["Mobile_Parent"] = 7] = "Mobile_Parent";
            EGenreEspace[EGenreEspace["Mobile_Professeur"] = 8] = "Mobile_Professeur";
            EGenreEspace[EGenreEspace["Mobile_Commun"] = 9] = "Mobile_Commun";
            EGenreEspace[EGenreEspace["Etablissement"] = 13] = "Etablissement";
            EGenreEspace[EGenreEspace["Mobile_Etablissement"] = 14] = "Mobile_Etablissement";
            EGenreEspace[EGenreEspace["Gestion_SSO"] = 15] = "Gestion_SSO";
            EGenreEspace[EGenreEspace["Administrateur"] = 16] = "Administrateur";
            EGenreEspace[EGenreEspace["Mobile_Administrateur"] = 17] = "Mobile_Administrateur";
            EGenreEspace[EGenreEspace["Inscription"] = 18] = "Inscription";
            EGenreEspace[EGenreEspace["PrimProfesseur"] = 19] = "PrimProfesseur";
            EGenreEspace[EGenreEspace["PrimParent"] = 20] = "PrimParent";
            EGenreEspace[EGenreEspace["Mobile_PrimProfesseur"] = 21] = "Mobile_PrimProfesseur";
            EGenreEspace[EGenreEspace["Mobile_PrimParent"] = 22] = "Mobile_PrimParent";
            EGenreEspace[EGenreEspace["PrimEleve"] = 23] = "PrimEleve";
            EGenreEspace[EGenreEspace["Mobile_PrimEleve"] = 24] = "Mobile_PrimEleve";
            EGenreEspace[EGenreEspace["Accompagnant"] = 25] = "Accompagnant";
            EGenreEspace[EGenreEspace["Mobile_Accompagnant"] = 26] = "Mobile_Accompagnant";
            EGenreEspace[EGenreEspace["PrimAccompagnant"] = 27] = "PrimAccompagnant";
            EGenreEspace[EGenreEspace["Mobile_PrimAccompagnant"] = 28] = "Mobile_PrimAccompagnant";
            EGenreEspace[EGenreEspace["Tuteur"] = 29] = "Tuteur";
            EGenreEspace[EGenreEspace["Mobile_Tuteur"] = 30] = "Mobile_Tuteur";
            EGenreEspace[EGenreEspace["PrimPeriscolaire"] = 31] = "PrimPeriscolaire";
            EGenreEspace[EGenreEspace["Mobile_PrimPeriscolaire"] = 32] = "Mobile_PrimPeriscolaire";
            EGenreEspace[EGenreEspace["PagePubliqueEtablissement"] = 33] = "PagePubliqueEtablissement";
            EGenreEspace[EGenreEspace["Mobile_PagePubliqueEtablissement"] = 34] = "Mobile_PagePubliqueEtablissement";
            EGenreEspace[EGenreEspace["PrimMairie"] = 35] = "PrimMairie";
            EGenreEspace[EGenreEspace["Mobile_PrimMairie"] = 36] = "Mobile_PrimMairie";
            EGenreEspace[EGenreEspace["PrimDirection"] = 37] = "PrimDirection";
            EGenreEspace[EGenreEspace["Mobile_PrimDirection"] = 38] = "Mobile_PrimDirection";
            EGenreEspace[EGenreEspace["Mobile_Entreprise"] = 39] = "Mobile_Entreprise";
        }
        )(EGenreEspace || (exports.EGenreEspace = EGenreEspace = {}));
    },
    fn: 'enumere_espace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenrePeriodeDeNotationUtil = exports.EGenrePeriodeDeNotation = void 0;
        var EGenrePeriodeDeNotation;
        (function(EGenrePeriodeDeNotation) {
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Trimestre1"] = 0] = "Trimestre1";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Trimestre2"] = 1] = "Trimestre2";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Trimestre3"] = 2] = "Trimestre3";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Semestre1"] = 3] = "Semestre1";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Semestre2"] = 4] = "Semestre2";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Annuelle"] = 5] = "Annuelle";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Utilisateur"] = 6] = "Utilisateur";
        }
        )(EGenrePeriodeDeNotation || (exports.EGenrePeriodeDeNotation = EGenrePeriodeDeNotation = {}));
        const EGenrePeriodeDeNotationUtil = {
            estTrimestrielle(aGenrePeriodeDeNotation) {
                return [EGenrePeriodeDeNotation.Trimestre1, EGenrePeriodeDeNotation.Trimestre2, EGenrePeriodeDeNotation.Trimestre3].includes(aGenrePeriodeDeNotation);
            },
            estSemestrielle(aGenrePeriodeDeNotation) {
                return [EGenrePeriodeDeNotation.Semestre1, EGenrePeriodeDeNotation.Semestre2].includes(aGenrePeriodeDeNotation);
            },
            estAnnuelle(aGenrePeriodeDeNotation) {
                return [EGenrePeriodeDeNotation.Annuelle].includes(aGenrePeriodeDeNotation);
            },
            estOfficielle(aGenrePeriodeDeNotation) {
                return EGenrePeriodeDeNotationUtil.estTrimestrielle(aGenrePeriodeDeNotation) || EGenrePeriodeDeNotationUtil.estSemestrielle(aGenrePeriodeDeNotation) || EGenrePeriodeDeNotationUtil.estAnnuelle(aGenrePeriodeDeNotation);
            }
        };
        exports.EGenrePeriodeDeNotationUtil = EGenrePeriodeDeNotationUtil;
    },
    fn: 'enumere_periodedenotation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetParametresCP = void 0;
        class ObjetParametresCP {
            getNomEspace() {
                return '';
            }
            getCookieValidationAppli() {
                return '';
            }
            estPeriodeTrimestrielle(aNumeroPeriode) {
                return false;
            }
            estPeriodeSemestrielle(aNumeroPeriode) {
                return false;
            }
            estPeriodeOfficielle(aNumeroPeriode) {
                return true;
            }
            setDocumentTitle(aLibelleOnglet) {
                return;
            }
        }
        exports.ObjetParametresCP = ObjetParametresCP;
    },
    fn: 'objetparametrescp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireCouleur = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        exports.UtilitaireCouleur = {
            hslDelphiMax: 240,
            couleurToRGB: function(aHex) {
                if (!aHex || !aHex.substring || aHex[0] !== '#' || (aHex.length !== 4 && aHex.length < 7)) {
                    return {
                        r: 0,
                        g: 0,
                        b: 0
                    };
                }
                if (aHex.length === 4) {
                    const lRGBHex = {
                        r: aHex.substring(1, 2),
                        g: aHex.substring(2, 3),
                        b: aHex.substring(3, 4)
                    };
                    return {
                        r: parseInt(lRGBHex.r + lRGBHex.r, 16),
                        g: parseInt(lRGBHex.g + lRGBHex.g, 16),
                        b: parseInt(lRGBHex.b + lRGBHex.b, 16)
                    };
                }
                return {
                    r: parseInt(aHex.substring(1, 3), 16),
                    g: parseInt(aHex.substring(3, 5), 16),
                    b: parseInt(aHex.substring(5, 7), 16)
                };
            },
            couleurToHSV: function(hex) {
                return this.rgbToHSV(this.couleurToRGB(hex));
            },
            rgbToCouleur: function(aRGB) {
                if (!aRGB) {
                    return null;
                }
                let lRGB = null;
                if (typeof aRGB === 'string') {
                    const lRegex = /rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/;
                    const lRGBRegex = lRegex.exec(aRGB);
                    if (lRGBRegex) {
                        lRGB = {
                            r: parseInt(lRGBRegex[1]),
                            g: parseInt(lRGBRegex[2]),
                            b: parseInt(lRGBRegex[3])
                        };
                    }
                } else {
                    lRGB = aRGB;
                }
                if (!lRGB || isNaN(lRGB.r) || isNaN(lRGB.g) || isNaN(lRGB.b) || lRGB.r < 0 || lRGB.g < 0 || lRGB.b < 0) {
                    return null;
                }
                const hex = [lRGB.r.toString(16), lRGB.g.toString(16), lRGB.b.toString(16)];
                $.each(hex, (nr, val) => {
                    if (val.length === 1) {
                        hex[nr] = '0' + val;
                    }
                }
                );
                return '#' + hex.join('');
            },
            rgbToHSV: function(rgb) {
                let rr, gg, bb;
                const r = rgb.r / 255
                  , g = rgb.g / 255
                  , b = rgb.b / 255;
                let h, s;
                const v = Math.max(r, g, b)
                  , diff = v - Math.min(r, g, b)
                  , diffc = function(c) {
                    return (v - c) / 6 / diff + 1 / 2;
                };
                if (diff === 0) {
                    h = s = 0;
                } else {
                    s = diff / v;
                    rr = diffc(r);
                    gg = diffc(g);
                    bb = diffc(b);
                    if (r === v) {
                        h = bb - gg;
                    } else if (g === v) {
                        h = (1 / 3) + rr - bb;
                    } else if (b === v) {
                        h = (2 / 3) + gg - rr;
                    }
                    if (h < 0) {
                        h += 1;
                    } else if (h > 1) {
                        h -= 1;
                    }
                }
                return {
                    h: Math.round(h * 360),
                    s: Math.round(s * 100),
                    l: Math.round(v * 100)
                };
            },
            hsvToCouleur: function(hsl) {
                return this.rgbToCouleur(this.hsvToRGB(hsl));
            },
            hsvToRGB: function(hsl) {
                const rgb = {};
                let h = Math.round(hsl.h);
                const s = Math.round(hsl.s * 255 / 100);
                const v = Math.round(hsl.l * 255 / 100);
                if (s === 0) {
                    rgb.r = rgb.g = rgb.b = v;
                } else {
                    const t1 = v;
                    const t2 = (255 - s) * v / 255;
                    const t3 = (t1 - t2) * (h % 60) / 60;
                    if (h === 360) {
                        h = 0;
                    }
                    if (h < 60) {
                        rgb.r = t1;
                        rgb.b = t2;
                        rgb.g = t2 + t3;
                    } else if (h < 120) {
                        rgb.g = t1;
                        rgb.b = t2;
                        rgb.r = t1 - t3;
                    } else if (h < 180) {
                        rgb.g = t1;
                        rgb.r = t2;
                        rgb.b = t2 + t3;
                    } else if (h < 240) {
                        rgb.b = t1;
                        rgb.r = t2;
                        rgb.g = t1 - t3;
                    } else if (h < 300) {
                        rgb.b = t1;
                        rgb.g = t2;
                        rgb.r = t2 + t3;
                    } else if (h < 360) {
                        rgb.r = t1;
                        rgb.g = t2;
                        rgb.b = t1 - t3;
                    } else {
                        rgb.r = 0;
                        rgb.g = 0;
                        rgb.b = 0;
                    }
                }
                return {
                    r: Math.round(rgb.r),
                    g: Math.round(rgb.g),
                    b: Math.round(rgb.b)
                };
            },
            hsvToHSLDelphi: function(hsv) {
                const lLuminance = (200 - hsv.s) * hsv.l / 200
                  , lHSL = {
                    h: hsv.h * this.hslDelphiMax / 360,
                    s: 0,
                    l: lLuminance * this.hslDelphiMax / 100
                };
                lHSL.s = (hsv.l > 0 ? hsv.s * hsv.l / (lLuminance < 50 ? lLuminance * 2 : 200 - lLuminance * 2) : hsv.s) * this.hslDelphiMax / 100;
                if (isNaN(lHSL.s)) {
                    lHSL.s = 0;
                }
                return lHSL;
            },
            hslDelphiToHSV: function(hsl) {
                const lHSV = {
                    h: hsl.h * 360 / this.hslDelphiMax,
                    s: hsl.s * 100 / this.hslDelphiMax,
                    l: hsl.l * 100 / this.hslDelphiMax
                };
                const t = lHSV.s * (lHSV.l < 50 ? lHSV.l : 100 - lHSV.l) / 100;
                lHSV.s = lHSV.l > 0 ? 200 * t / (lHSV.l + t) : lHSV.s;
                if (isNaN(lHSV.s)) {
                    lHSV.s = 0;
                }
                lHSV.l = t + lHSV.l;
                return lHSV;
            },
            getContrastedColor(aColor) {
                const lWhite = '#FFFFFF';
                const lBlack = '#000000';
                if (this.contrastRatio(aColor, lWhite) > this.contrastRatio(aColor, lBlack)) {
                    return lWhite;
                }
                return lBlack;
            },
            contrastRatio(aColor1, aColor2) {
                let ratio = (0.05 + this.relativeLum(aColor1)) / (0.05 + this.relativeLum(aColor2));
                if (ratio < 1) {
                    ratio = 1 / ratio;
                }
                return ratio;
            },
            findContrastVariant(aCouleurATrouver, aCouleurOpposee, aMinRatio=4.5) {
                const lBaseRgb = this.couleurToRGB(aCouleurATrouver);
                const lTargetRgb = this.couleurToRGB(aCouleurOpposee);
                if (this.contrastRatio(lBaseRgb, lTargetRgb) >= aMinRatio) {
                    return aCouleurATrouver;
                }
                const lBaseHsl = this.rgbToHSV(lBaseRgb);
                const lLuminanceBase = lBaseHsl.l;
                const lLuminanceAgainst = this.rgbToHSV(lTargetRgb).l;
                const lFindSup = lLuminanceBase === lLuminanceAgainst ? lLuminanceBase < 50 : lLuminanceBase > lLuminanceAgainst;
                let lLow = lFindSup ? lLuminanceBase : 0;
                let lHigh = lFindSup ? 100 : lLuminanceBase;
                let lBest = null;
                for (let i = 0; i < 20; i++) {
                    if (lHigh <= lLow) {
                        return lBest;
                    }
                    const lMid = (lLow + lHigh) / 2;
                    const lTestRgb = this.hsvToRGB(Object.assign(Object.assign({}, lBaseHsl), {
                        l: lMid
                    }));
                    const lContrast = this.contrastRatio(lTestRgb, lTargetRgb);
                    if (lContrast >= aMinRatio) {
                        lBest = this.rgbToCouleur(lTestRgb);
                        if (lFindSup) {
                            lHigh = lMid;
                        } else {
                            lLow = lMid;
                        }
                    } else {
                        if (lFindSup) {
                            lLow = lMid;
                        } else {
                            lHigh = lMid;
                        }
                    }
                }
                return lBest;
            },
            relativeLum(aColor) {
                let lRGB = null;
                if (MethodesObjet_1.MethodesObjet.isString(aColor)) {
                    lRGB = this.couleurToRGB(aColor);
                } else if (aColor && 'r'in aColor) {
                    lRGB = Object.assign({}, aColor);
                }
                if (!lRGB) {
                    return 1;
                }
                lRGB.r = (lRGB.r || 0) / 255;
                lRGB.g = (lRGB.g || 0) / 255;
                lRGB.b = (lRGB.b || 0) / 255;
                let transformed = {};
                let x;
                for (x in lRGB) {
                    if (lRGB[x] <= 0.04045) {
                        transformed[x] = lRGB[x] / 12.92;
                    } else {
                        transformed[x] = Math.pow(((lRGB[x] + 0.055) / 1.055), 2.4);
                    }
                }
                let lum = ((transformed.r * 0.2126) + (transformed.g * 0.7152) + (transformed.b * 0.0722));
                return lum;
            }
        };
    },
    fn: 'utilitairecouleur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjectCouleurCelluleListe = exports.ObjectCouleurCellule = exports._ObjetCouleur = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const UtilitaireCouleur_1 = require("UtilitaireCouleur");
        if (!global.GCouleur) {
            global.GCouleur = null;
        }
        class _ObjetCouleur {
            constructor(aAvecNonEditable) {
                this.blanc = 'var(--color-background)';
                this.noir = 'var(--color-text)';
                this.eleve = {
                    garcon: '#2D24F0',
                    fille: '#EE01F6'
                };
                this.fond = 'var(--color-background)';
                this.themeNeutre = {};
                ['light', 'legere', 'legere2', 'claire', 'moyen1', 'moyen2', 'moyen3', 'foncee', 'sombre'].forEach( (aKey) => {
                    this.themeNeutre[aKey] = `var(--theme-neutre-${aKey})`;
                }
                );
                this.themeCouleur = {};
                ['claire', 'moyen1', 'foncee', 'sombre'].forEach( (aKey) => {
                    this.themeCouleur[aKey] = `var(--theme-${aKey})`;
                }
                );
                this.texte = this.noir;
                this.bordure = this.trait = this.themeNeutre.moyen2;
                this.cumul = this.themeNeutre.moyen2;
                this.nonEditable = {
                    fond: 'var(--color-background-non-editable)',
                    texte: this.themeNeutre.foncee,
                    bordure: this.themeNeutre.moyen2
                };
                this.intermediaire = this.themeNeutre.claire;
                this.avecNonEditable = aAvecNonEditable === null || aAvecNonEditable === undefined ? true : aAvecNonEditable;
                this.texteListeCreation = '#444444';
                this.fenetre = {
                    fond: this.fond,
                    bordure: this.bordure,
                    bandeau: {
                        fond: this.blanc,
                        texte: this.noir
                    },
                    nonEditable: this.nonEditable,
                    cumul: this.cumul,
                    texte: this.themeNeutre.foncee,
                    intermediaire: this.themeNeutre.claire
                };
                this.rouge = 'var(--color-red-foncee)';
                this.rougeClair = 'var(--color-red-claire)';
                this.vert = 'var( --color-green-moyen)';
                this.grisTresClair = this.fenetre.nonEditable;
                this.grisClair = this.fenetre.intermediaire;
                this.grisFonce = this.fenetre.cumul;
                this.grisTresFonce = this.fenetre.texte;
                this.standard = new ObjectCouleurCellule(this.blanc,this.noir);
                this.selection = new ObjectCouleurCelluleFC('var(--couleur-selection)',this.blanc);
                this.selection.fondClair = 'var(--couleur-selection-fond-clair)';
                this.inactif = new ObjectCouleurCellule('#F0F0F0','#AAAAAA');
                this.grille = {
                    fond: this.themeNeutre.moyen1,
                    bordure: '#848484',
                    texte: 'black',
                    gabarit: 'var(--color-grille-gabarit)',
                    fondCoursSuperpose: '#f9f4f0',
                    selectionCours: this.selection.fond
                };
                this.bandeau = {
                    fond: this.themeNeutre.moyen1,
                    texte: this.noir,
                    bordure: this.themeNeutre.light,
                    separateur: this.themeCouleur.foncee
                };
                this.titre = new ObjectCouleurCellule(this.themeNeutre.light,this.themeCouleur.foncee,this.bordure);
                this.liste = new ObjectCouleurCelluleListe();
                this.liste.bordure = this.bordure;
                this.liste.cellule = new ObjectCouleurCellule(this.fond,this.texte,this.bordure);
                this.liste.editable = new ObjectCouleurCellule(this.blanc,this.noir,this.bordure);
                this.liste.editableAlternee1 = new ObjectCouleurCellule(this.themeNeutre.light,this.noir,this.bordure);
                this.liste.editableAlternee2 = new ObjectCouleurCellule(this.blanc,this.noir,this.bordure);
                this.liste.nonEditable = new ObjectCouleurCellule(this.avecNonEditable ? this.themeNeutre.legere2 : this.blanc,this.noir,this.bordure);
                this.liste.nonEditableAlternee1 = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.nonEditableAlternee2 = new ObjectCouleurCellule(this.themeNeutre.legere2,this.noir,this.bordure);
                this.liste.nonApplicable = new ObjectCouleurCellule(this.themeNeutre.moyen1,this.noir,this.bordure);
                this.liste.colonneFixe = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.colonneFixeAlternee1 = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.colonneFixeAlternee2 = new ObjectCouleurCellule(this.themeNeutre.legere2,this.noir,this.bordure);
                this.liste.moyenne = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.moyenneAlternee1 = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.moyenneAlternee2 = new ObjectCouleurCellule(this.themeNeutre.legere2,this.noir,this.bordure);
                this.liste.total = new ObjectCouleurCellule(this.themeNeutre.foncee,this.blanc,this.bordure);
                this.liste.totalAlternee1 = new ObjectCouleurCellule(this.themeNeutre.sombre,this.blanc,this.bordure);
                this.liste.totalAlternee2 = new ObjectCouleurCellule(this.themeNeutre.foncee,this.blanc,this.bordure);
                this.liste.cumul = new ObjectCouleurCelluleCumul(this.themeCouleur.claire,this.noir,this.bordure);
                this.liste.cumul[0] = new ObjectCouleurCellule(this.themeCouleur.moyen1,this.blanc,this.bordure);
                this.liste.cumul[1] = new ObjectCouleurCellule(this.themeCouleur.claire,this.noir,this.bordure);
                this.liste.cumul[2] = new ObjectCouleurCellule(this.themeNeutre.moyen1,this.noir,this.bordure);
                this.liste.cumul[3] = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.listeNeutre = MethodesObjet_1.MethodesObjet.dupliquer(this.liste);
                this.listeNeutre.cumul[0].fond = this.themeNeutre.claire;
                this.listeNeutre.cumul[1].fond = this.themeNeutre.claire;
                this.listeNeutre.cumul[2].fond = this.themeNeutre.claire;
                this.listeNeutre.cumul[3].fond = this.themeNeutre.claire;
                this.correspondance = {};
                this.accessible = {};
                this.devoir = {
                    commeUnBonus: '#00FF00',
                    commeUneNote: 'darkorange',
                    commeUnSeuil: '#9933FF'
                };
                this.surlignageTexte = '#99cde4';
            }
            getCouleurCellule(aEditable, aSelectionne) {
                if (aSelectionne) {
                    return this.selection;
                }
                return aEditable ? this.liste.editable : this.liste.nonEditable;
            }
            couleurToRGB(aHex) {
                return UtilitaireCouleur_1.UtilitaireCouleur.couleurToRGB(aHex);
            }
            couleurToHSV(hex) {
                return UtilitaireCouleur_1.UtilitaireCouleur.couleurToHSV(hex);
            }
            rgbToCouleur(aRGB) {
                return UtilitaireCouleur_1.UtilitaireCouleur.rgbToCouleur(aRGB);
            }
            rgbToHSV(rgb) {
                return UtilitaireCouleur_1.UtilitaireCouleur.rgbToHSV(rgb);
            }
            hsvToCouleur(hsl) {
                return UtilitaireCouleur_1.UtilitaireCouleur.hsvToCouleur(hsl);
            }
            hsvToRGB(hsl) {
                return UtilitaireCouleur_1.UtilitaireCouleur.hsvToRGB(hsl);
            }
            hsvToHSLDelphi(hsv) {
                return UtilitaireCouleur_1.UtilitaireCouleur.hsvToHSLDelphi(hsv);
            }
            hslDelphiToHSV(hsl) {
                return UtilitaireCouleur_1.UtilitaireCouleur.hslDelphiToHSV(hsl);
            }
            getCouleurCorrespondance(aCouleur) {
                return UtilitaireCouleur_1.UtilitaireCouleur.getContrastedColor(aCouleur);
            }
            getCouleurAccessible(aCouleur) {
                if (!aCouleur || !aCouleur.substring) {
                    return aCouleur;
                }
                if (this.accessible[aCouleur] !== undefined) {
                    return this.accessible[aCouleur];
                }
                let r = parseInt(aCouleur.substring(1, 3), 16) / 255;
                let g = parseInt(aCouleur.substring(3, 5), 16) / 255;
                let b = parseInt(aCouleur.substring(5, 7), 16) / 255;
                const max = Math.max(r, g, b)
                  , min = Math.min(r, g, b);
                const l = (max + min) / 2;
                r = g = b = Math.round(l * 255);
                this.accessible[aCouleur] = '#' + (r < 16 ? '0' : '') + r.toString(16) + (g < 16 ? '0' : '') + g.toString(16) + (b < 16 ? '0' : '') + b.toString(16);
                return this.accessible[aCouleur];
            }
            getCouleurTransparente(aColor, aOpacity, aBackground, aBackOpa) {
                if (!aColor || !aColor.substring) {
                    return false;
                }
                if (aOpacity < 0 || aOpacity > 1) {
                    return false;
                }
                if (!aBackOpa || aBackOpa < 0 || aBackOpa > 1) {
                    aBackOpa = 1;
                }
                const lDest = [];
                const lFond = [255, 255, 255];
                const lOrig = [];
                if (aBackground && aBackground.substring) {
                    lFond[0] = parseInt(aBackground.substring(1, 3), 16);
                    lFond[1] = parseInt(aBackground.substring(3, 5), 16);
                    lFond[2] = parseInt(aBackground.substring(5, 7), 16);
                }
                lDest[0] = parseInt(aColor.substring(1, 3), 16);
                lDest[1] = parseInt(aColor.substring(3, 5), 16);
                lDest[2] = parseInt(aColor.substring(5, 7), 16);
                for (let i = 0; i < 3; i++) {
                    lOrig[i] = Math.floor(((lDest[i] * (aOpacity + aBackOpa * (1 - aOpacity))) - ((lFond[i] * aBackOpa) * (1 - aOpacity))) / aOpacity);
                    if (lOrig[i] > 255 || lOrig[i] < 0) {
                        return false;
                    }
                }
                return '#' + (lOrig[0] < 16 ? '0' : '') + lOrig[0].toString(16) + (lOrig[1] < 16 ? '0' : '') + lOrig[1].toString(16) + (lOrig[2] < 16 ? '0' : '') + lOrig[2].toString(16);
            }
            getCouleurTransformationCours(aCouleur) {
                const lRGB = this.couleurToRGB(aCouleur)
                  , lHSL = this.hsvToHSLDelphi(this.rgbToHSV(lRGB));
                let lEstProcheDuGris = (Math.abs(lRGB.r - lRGB.g) < 10) && (Math.abs(lRGB.r - lRGB.b) < 10) && (Math.abs(lRGB.g - lRGB.b) < 10);
                if (!lEstProcheDuGris) {
                    lEstProcheDuGris = lHSL.s < 8;
                }
                if (lEstProcheDuGris) {
                    lRGB.r = Math.borner(lRGB.r + 50, 180, 255);
                    lRGB.g = Math.borner(lRGB.g + 50, 180, 255);
                    lRGB.b = Math.borner(lRGB.b + 50, 180, 255);
                    return this.rgbToCouleur(lRGB);
                } else {
                    lHSL.s = Math.max(lHSL.s - 100, 60);
                    if (lHSL.l < 140) {
                        lHSL.l = 160;
                    } else if (lHSL.l < 160) {
                        lHSL.l = 200;
                    } else {
                        lHSL.l = 220;
                    }
                    return this.hsvToCouleur(this.hslDelphiToHSV(lHSL));
                }
            }
            getCouleurContrastee(aCouleur, aCouleurFond, aParametresContraste) {
                if (!aCouleur || !aCouleurFond) {
                    return aCouleur || '#000';
                }
                if (!aParametresContraste) {
                    aParametresContraste = {};
                }
                if (aParametresContraste.ponderationFoncee === undefined) {
                    aParametresContraste.ponderationFoncee = 1;
                }
                if (aParametresContraste.ponderationClaire === undefined) {
                    aParametresContraste.ponderationClaire = 1;
                }
                const lHSL = UtilitaireCouleur_1.UtilitaireCouleur.hsvToHSLDelphi(UtilitaireCouleur_1.UtilitaireCouleur.couleurToHSV(aCouleur));
                const lHSLFond = UtilitaireCouleur_1.UtilitaireCouleur.hsvToHSLDelphi(UtilitaireCouleur_1.UtilitaireCouleur.couleurToHSV(aCouleurFond));
                const lDeltaInitial = 30;
                const lDeltaRenduPlusFoncee = lDeltaInitial * aParametresContraste.ponderationFoncee;
                const lDeltaRenduPlusClair = lDeltaInitial * aParametresContraste.ponderationClaire;
                if (lHSLFond.l > 75) {
                    if (lHSL.l >= lDeltaRenduPlusFoncee) {
                        lHSL.l += (-1 * lDeltaRenduPlusFoncee);
                    } else {
                        lHSL.l = 0;
                    }
                } else {
                    lHSL.l = UtilitaireCouleur_1.UtilitaireCouleur.hslDelphiMax - lDeltaRenduPlusClair;
                }
                return UtilitaireCouleur_1.UtilitaireCouleur.hsvToCouleur(UtilitaireCouleur_1.UtilitaireCouleur.hslDelphiToHSV(lHSL));
            }
        }
        exports._ObjetCouleur = _ObjetCouleur;
        _ObjetCouleur.hslDelphiMax = UtilitaireCouleur_1.UtilitaireCouleur.hslDelphiMax;
        class ObjectCouleurCellule {
            constructor(aFond, aTexte, aBordure) {
                this.fond = aFond;
                this.texte = aTexte;
                this.bordure = aBordure;
            }
            getFond(aPourImpression) {
                return aPourImpression ? global.GCouleur.blanc : this.fond;
            }
            getTexte(aPourImpression) {
                return aPourImpression ? global.GCouleur.noir : this.texte;
            }
            getBordure(aPourImpression) {
                return aPourImpression ? global.GCouleur.noir : this.bordure;
            }
        }
        exports.ObjectCouleurCellule = ObjectCouleurCellule;
        class ObjectCouleurCelluleCumul extends ObjectCouleurCellule {
        }
        class ObjectCouleurCelluleFC extends ObjectCouleurCellule {
        }
        class ObjectCouleurCelluleListe extends ObjectCouleurCellule {
        }
        exports.ObjectCouleurCelluleListe = ObjectCouleurCelluleListe;
    },
    fn: '_objetcouleur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCouleur = void 0;
        const _ObjetCouleur_1 = require("_ObjetCouleur");
        const ObjetStyle_1 = require("ObjetStyle");
        class ObjetCouleur extends _ObjetCouleur_1._ObjetCouleur {
            constructor(aAvecNonEditable) {
                super(aAvecNonEditable);
                this.service = this.intermediaire;
                this.note = '#FFFFCC';
                this.periodesFonce = ['', '#CC33CC', '#399361', '#3399FF', '#CC33CC', '#399361', '#CC33CC'];
                this.periodesClair = ['', '#EBA2D5', '#8CE4A3', '#A9D4E9', '#EBA2D5', '#8CE4A3', '#EBA2D5'];
                this.grilleOccupation = {
                    fond: '#808080',
                    placeLibre: '#FFFFFF',
                    bordure: '#f9f4f0'
                };
                this.grilleSlider = {
                    fond: '#D8D8D8',
                    fondBouton: '#F0F0F0',
                    fondBoutonSurvol: '#D0D0D0',
                    fondBoutonSelectionne: '#FFFFFF',
                    boutonBordureFonce: '#A0A0A0',
                    boutonBordureClaire: '#FFFFFF'
                };
                this.voeuxRencontres = ['#FFFFFF', '#F7B95D', '#7EECAA', '#F95959'];
                this.diagnostic = {
                    placeLibre: 'white',
                    occupation: 'red',
                    occupationPermanence: '#FFBF3A',
                    demiPension: '#884605',
                    site: '#FF00CC',
                    absenceRessource: '#CC0033',
                    indisponibilite: '#d5818a',
                    gaev: '#CC0033',
                    recreation: '#784c1e'
                };
                $.extend(this.grille, {
                    indisponibilite: '#F18280',
                    indisponibiliteSouple: '#f9d059',
                    voeu: '#8acb63',
                    priorite1: '#f000f0',
                    priorite2: '#990099',
                    priorite3: '#500070',
                    demiPensionActive: '#52E252',
                    demiPensionInactive: '#B54095',
                    indisponibiliteSession: '#0066CC',
                    indisponibiliteSessionPlanning: '#326699',
                    horsPlageSessionRencontre: '#F0F0F0',
                    recreations: '#F4D217'
                });
            }
            composeCouleurSelection() {
                return ObjetStyle_1.GStyle.composeCouleur(this.selection.fond, this.selection.texte);
            }
            setCouleurSelection(aId) {
                ObjetStyle_1.GStyle.setCouleur(aId, this.selection.fond, this.selection.texte);
            }
        }
        exports.ObjetCouleur = ObjetCouleur;
    },
    fn: 'objetcouleur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeCollectiviteToTypeThemeCollectivite = exports.TypeCollectivite = void 0;
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        var TypeCollectivite;
        (function(TypeCollectivite) {
            TypeCollectivite[TypeCollectivite["TCL_Aucune"] = 0] = "TCL_Aucune";
            TypeCollectivite[TypeCollectivite["TCL_IleDeFrance"] = 1] = "TCL_IleDeFrance";
        }
        )(TypeCollectivite || (exports.TypeCollectivite = TypeCollectivite = {}));
        const TypeCollectiviteToTypeThemeCollectivite = (aType) => {
            switch (aType) {
            case TypeCollectivite.TCL_IleDeFrance:
                return TypeThemeCouleur_1.TypeThemeCollectivite.ColIdf;
            }
        }
        ;
        exports.TypeCollectiviteToTypeThemeCollectivite = TypeCollectiviteToTypeThemeCollectivite;
    },
    fn: 'typecollectivite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetParametres = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetCycles_1 = require("ObjetCycles");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        const TypeDomaine_1 = require("TypeDomaine");
        const TypeNote_1 = require("TypeNote");
        const Enumere_DomaineFrequence_1 = require("Enumere_DomaineFrequence");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_PeriodeDeNotation_1 = require("Enumere_PeriodeDeNotation");
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        const ObjetParametresCP_1 = require("ObjetParametresCP");
        const ObjetCouleur_1 = require("ObjetCouleur");
        const TypeCollectivite_1 = require("TypeCollectivite");
        global.GParametres = null;
        class ObjetParametres extends ObjetParametresCP_1.ObjetParametresCP {
            constructor(aJSON) {
                var _a;
                super();
                this.application = GApplication;
                this.application.initDateServeur(aJSON.DateServeurHttp);
                this.application.setDateDemo(aJSON.DateDemo);
                if (aJSON.urlLogout) {
                    this.application.urlLogout = aJSON.urlLogout;
                }
                this.avecMembre = aJSON.avecMembre;
                this.pourNouvelleCaledonie = aJSON.pourNouvelleCaledonie;
                this.genreImageConnexion = aJSON.genreImageConnexion;
                this.urlImageConnexion = aJSON.urlImageConnexion;
                this.urlFondEcran = aJSON.urlFondEcran;
                this.avecAccesMobile = aJSON.AvecEspaceMobile;
                this.URLMobile = aJSON.URLMobile;
                this.URLEspace = aJSON.URLEspace;
                this.logoProduitCss = aJSON.logoProduitCss;
                this.listeCivilites = aJSON.listeCivilites;
                this.listePays = aJSON.listePays;
                this.listeLienParente = aJSON.listeLienParente;
                this.listeMatieres = aJSON.listeMatieres;
                this.listeOrientations = aJSON.listeOrientations;
                this.listeVilles = aJSON.listeVilles;
                this.listeRegimes = aJSON.listeRegimes;
                this.listeEtablissements = aJSON.listeEtablissements;
                this.listeSituations = aJSON.listeSituations;
                this.listeProfessions = aJSON.listeProfessions;
                this.listeSessionsInscriptions = aJSON.listeSessionsInscriptions;
                this.listePolices = aJSON.listePolices;
                this.PageEtablissement = aJSON.PageEtablissement;
                this.estAfficheDansENT = (_a = aJSON.estAfficheDansENT) !== null && _a !== void 0 ? _a : false;
                const lJGeneral = this.general = aJSON.General;
                this.version = lJGeneral.version;
                this.versionPN = lJGeneral.versionPN;
                this.millesime = lJGeneral.millesime;
                this.nomProduit = lJGeneral.nomProduit;
                this.langue = lJGeneral.langue;
                this.langID = lJGeneral.langID;
                this.listeLangues = lJGeneral.listeLangues;
                this.publierMentions = lJGeneral.publierMentions;
                this.avecForum = lJGeneral.avecForum;
                this.estHebergeEnFrance = lJGeneral.estHebergeEnFrance;
                this.urlSiteIndexEducation = lJGeneral.urlSiteIndexEducation;
                this.urlInfosHebergement = lJGeneral.urlSiteInfosHebergement;
                this.urlAide = lJGeneral.UrlAide;
                this.urlAccesVideos = lJGeneral.urlAccesVideos;
                this.urlAccesTwitter = lJGeneral.urlAccesTwitter;
                this.urlFAQEnregistrementDoubleAuth = lJGeneral.urlFAQEnregistrementDoubleAuth;
                this.urlTutoVideoSecurite = lJGeneral.urlTutoVideoSecurite;
                this.urlTutoEnregistrerAppareils = lJGeneral.urlTutoEnregistrerAppareils;
                this.urlCanope = lJGeneral.urlCanope;
                this.urlDeclarationAccessibilite = lJGeneral.urlDeclarationAccessibilite;
                this.accessibiliteNonConforme = lJGeneral.accessibiliteNonConforme;
                this.urlConfidentialite = aJSON.urlConfidentialite;
                this.labelLienProduit = aJSON.labelLienProduit;
                this.urlLogo = lJGeneral.urlLogo;
                this.logoDepartementImage = lJGeneral.logoDepartementImage;
                this.logoDepartementLien = lJGeneral.logoDepartementLien;
                this.avecChoixConnexion = lJGeneral.AvecChoixConnexion;
                this.numeroPremiereSemaine = lJGeneral.numeroPremiereSemaine;
                this.anneeScolaire = lJGeneral.AnneeScolaire;
                this.dateDebutPremierCycle = lJGeneral.dateDebutPremierCycle;
                this.PremierLundi = lJGeneral.PremierLundi;
                this.PremiereDate = lJGeneral.PremiereDate;
                this.DerniereDate = lJGeneral.DerniereDate;
                this.PremierJourSemaine = ObjetDate_1.GDate.getJourDeDate(this.PremierLundi);
                this.DernierJourSemaine = (this.PremierJourSemaine + 6) % 7;
                this.listeJoursFeries = lJGeneral.listeJoursFeries;
                this.JourOuvre = lJGeneral.JourOuvre;
                this.JoursOuvres = lJGeneral.JoursOuvres;
                this.DemiJourneesOuvrees = lJGeneral.DemiJourneesOuvrees;
                this.joursDemiPension = lJGeneral.JoursDemiPension;
                this.JoursFeries = this.getJoursFeries();
                this.PlacesParJour = lJGeneral.PlacesParJour;
                this.PlacesParHeure = lJGeneral.PlacesParHeure;
                this.DureeSequence = lJGeneral.DureeSequence;
                this.PlaceDemiJournee = lJGeneral.PlaceDemiJourneeAbsence;
                this.saisirAbsencesParDJ = lJGeneral.saisirAbsencesParDJ;
                this.joursOuvresParCycle = lJGeneral.joursOuvresParCycle;
                this.premierJourSemaine = lJGeneral.premierJourSemaine;
                this.grillesEDTEnCycle = lJGeneral.grillesEDTEnCycle;
                this.setOfJoursCycleOuvre = lJGeneral.setOfJoursCycleOuvre;
                this.activationDemiPension = lJGeneral.activationDemiPension;
                this.debutDemiPension = lJGeneral.debutDemiPension;
                this.finDemiPension = lJGeneral.finDemiPension;
                this.recreations = lJGeneral.recreations;
                this.AvecHeuresPleinesApresMidi = lJGeneral.AvecHeuresPleinesApresMidi;
                this.LibellesHeures = lJGeneral.ListeHeures;
                this.LibellesHeuresFin = lJGeneral.ListeHeuresFin;
                this.LibellesHeuresFinPourVS = lJGeneral.ListeHeuresFinPourVS;
                this.PremiereHeure = lJGeneral.PremiereHeure;
                this.afficherSequences = lJGeneral.afficherSequences;
                this.sequences = lJGeneral.sequences;
                this.ActivationMessagerieEntreParents = lJGeneral.ActivationMessagerieEntreParents;
                this.GestionParcoursExcellence = lJGeneral.GestionParcoursExcellence;
                this.activerBlog = lJGeneral.activerBlog;
                this.NomEtablissement = lJGeneral.NomEtablissement;
                this.NomEtablissementConnexion = lJGeneral.NomEtablissementConnexion;
                this.NomEspace = aJSON.Nom;
                this.listeComboPeriodes = lJGeneral.listeComboPeriodes;
                this.listeAnneesPrecedentes = lJGeneral.listeAnneesPrecedentes;
                this.tailleMaxAppreciation = lJGeneral.TailleMaxAppreciation;
                this.baremeNotation = lJGeneral.BaremeNotation;
                if (TypeNote_1.TypeNote) {
                    TypeNote_1.TypeNote.baremeNotation = this.baremeNotation;
                }
                this.baremeMaxDevoirs = lJGeneral.BaremeMaxDevoirs;
                this.nbJDecalageDatePublicationParDefautDevoirEval = lJGeneral.NbJDecalageDatePublicationParDefaut || 0;
                this.nbJDecalagePublicationAuxParents = lJGeneral.NbJDecalagePublicationAuxParents || 0;
                this.avecAffichageDecalagePublicationNotesAuxParents = !!lJGeneral.AvecAffichageDecalagePublicationNotesAuxParents;
                this.avecAffichageDecalagePublicationEvalsAuxParents = !!lJGeneral.AvecAffichageDecalagePublicationEvalsAuxParents;
                if (TypeNote_1.TypeNote) {
                    TypeNote_1.TypeNote.listeAnnotationsAutorisees = lJGeneral.listeAnnotationsAutorisees;
                }
                this.minBaremeQuestionQCM = lJGeneral.minBaremeQuestionQCM;
                this.maxBaremeQuestionQCM = lJGeneral.maxBaremeQuestionQCM;
                this.maxNombrePointsQCM = lJGeneral.maxNbPointQCM;
                this.maxNiveauQCM = lJGeneral.maxNiveauQCM;
                this.tailleLibelleElementGrilleCompetence = lJGeneral.tailleLibelleElementGrilleCompetence;
                this.tailleCommentaireDevoir = lJGeneral.tailleCommentaireDevoir;
                this.tailleMaxLibelleUrlCours = lJGeneral.tailleLibelleUrlCours;
                this.tailleMaxCommentaireUrlCours = lJGeneral.tailleCommentaireUrlCours;
                this.listeNiveauxDAcquisitions = lJGeneral.ListeNiveauxDAcquisitions;
                this.afficherAbbreviationNiveauDAcquisition = lJGeneral.AfficherAbbreviationNiveauDAcquisition;
                this.avecEvaluationHistorique = lJGeneral.AvecEvaluationHistorique;
                this.avecRecuperationInfosConnexion = lJGeneral.AvecRecuperationInfosConnexion;
                this.parentAutoriseChangerMDP = !!lJGeneral.parentAutoriseChangerMDP;
                this.avecElevesRattaches = lJGeneral.AvecElevesRattaches;
                this.police = lJGeneral.Police;
                this.taillePolice = lJGeneral.TaillePolice + 'px';
                this.collectivite = lJGeneral.Collectivite;
                this.publicationSuiviStageParDefaut = lJGeneral.publicationSuiviStage;
                if (lJGeneral.maskTelephone) {
                    ObjetChaine_1.GChaine.maskTelephone = lJGeneral.maskTelephone;
                }
                const lDomainesFrequences = lJGeneral.DomainesFrequences;
                const lLibellesFrequences = lJGeneral.LibellesFrequences;
                this.frequences = null;
                if (!this.application.getEtatUtilisateur().pourPrimaire()) {
                    this.frequences = [];
                    for (let lNumeroSemaine = 1; lNumeroSemaine <= ObjetCycles_1.ObjetCycles.C_MaxDomaineCycle; lNumeroSemaine++) {
                        this.frequences[lNumeroSemaine] = {};
                        for (const lKey of MethodesObjet_1.MethodesObjet.enumKeys(Enumere_DomaineFrequence_1.EGenreDomaineFrequence)) {
                            const lGenre = Enumere_DomaineFrequence_1.EGenreDomaineFrequence[lKey];
                            if ((lGenre === Enumere_DomaineFrequence_1.EGenreDomaineFrequence.QZ1) || (lGenre === Enumere_DomaineFrequence_1.EGenreDomaineFrequence.QZ2)) {
                                if (lDomainesFrequences[lGenre].getValeur(lNumeroSemaine)) {
                                    this.frequences[lNumeroSemaine].genre = lGenre;
                                    this.frequences[lNumeroSemaine].libelle = lLibellesFrequences[lGenre];
                                }
                            }
                        }
                    }
                }
                this.initialiserCouleur();
                this.listePeriodes = new ObjetListeElements_1.ObjetListeElements().fromJSON(lJGeneral.ListePeriodes, this._ajouterPeriode);
                this.nomCookieAppli = lJGeneral.nomCookieAppli;
                if ((GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.Inscription) && aJSON.infosInscription) {
                    this.infosInscription = aJSON.infosInscription;
                }
                this.mentionsPagesPubliques = aJSON.mentionsPagesPubliques;
                this.aideContextuelle = false;
                if (lJGeneral.aideContextuelle) {
                    this.aideContextuelle = lJGeneral.aideContextuelle;
                    this.aideContextuelle.getNombreDeGenreOnglet = function(aGenre) {
                        let lResult = 0;
                        let lAccessor;
                        if (MethodesObjet_1.MethodesObjet.isNumber(aGenre)) {
                            lAccessor = aGenre.toString();
                        } else if (MethodesObjet_1.MethodesObjet.isString(aGenre)) {
                            lAccessor = aGenre;
                        }
                        if (lAccessor !== undefined) {
                            lResult = this[lAccessor];
                            if (lResult === undefined) {
                                lResult = 0;
                            }
                        }
                        return lResult;
                    }
                    ;
                }
                if (aJSON.tableauVersion) {
                    this.tableauVersion = aJSON.tableauVersion;
                }
            }
            getLibelleHeure(aPlace) {
                try {
                    return this.LibellesHeures.getLibelle(aPlace);
                } catch (e) {
                    return '';
                }
            }
            initAuthentification(aParam) {
                this.domaineVerrou = aParam.domaineVerrou ? aParam.domaineVerrou : new TypeDomaine_1.TypeDomaine();
                if (aParam.avecMembre !== undefined) {
                    this.avecMembre = aParam.avecMembre;
                }
            }
            initialiserCouleur() {
                var _a, _b;
                this.themeParDefaut = this.application.estEDT ? TypeThemeCouleur_1.TypeThemeProduit.EDT : TypeThemeCouleur_1.TypeThemeProduit.Pronote;
                if ((this === null || this === void 0 ? void 0 : this.collectivite) && Object.values(TypeCollectivite_1.TypeCollectivite).includes((_a = this === null || this === void 0 ? void 0 : this.collectivite) === null || _a === void 0 ? void 0 : _a.genreCollectivite) && ((_b = this === null || this === void 0 ? void 0 : this.collectivite) === null || _b === void 0 ? void 0 : _b.genreCollectivite) !== TypeCollectivite_1.TypeCollectivite.TCL_Aucune) {
                    const lThemeCollectivite = (0,
                    TypeCollectivite_1.TypeCollectiviteToTypeThemeCollectivite)(this.collectivite.genreCollectivite);
                    if (lThemeCollectivite) {
                        this.themeParDefaut = lThemeCollectivite;
                    }
                }
                ThemesCouleurs_1.ThemesCouleurs.setTheme(this.themeParDefaut);
                global.GCouleur = new ObjetCouleur_1.ObjetCouleur(![Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Inscription, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur].includes(GEtatUtilisateur.GenreEspace));
            }
            getNomEspace() {
                return this.NomEspace;
            }
            getCookieValidationAppli() {
                return this.nomCookieAppli;
            }
            getJoursFeries() {
                const lJoursFeries = new TypeDomaine_1.TypeDomaine(null,ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle, this.DerniereDate) + 1);
                for (let I = 0; I < this.listeJoursFeries.count(); I++) {
                    const lJourFerie = this.listeJoursFeries.get(I);
                    lJoursFeries.setValeur(true, ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle, lJourFerie.dateDebut) + 1, ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle, lJourFerie.dateFin) + 1);
                }
                return lJoursFeries;
            }
            getDomaineCycleFerie() {
                if (!this.domaineCycleFerie) {
                    this.domaineCycleFerie = new TypeDomaine_1.TypeDomaine();
                    let LSemaineFeriee;
                    const lNombreCycles = IE.Cycles.nombreCyclesAnneeScolaire();
                    const lNombreJoursCycle = IE.Cycles.nombreJoursOuvresParCycle();
                    for (let lCycle = 1; lCycle <= lNombreCycles; lCycle += 1) {
                        LSemaineFeriee = true;
                        for (let lJourCycle = 0; lJourCycle < lNombreJoursCycle && LSemaineFeriee; lJourCycle += 1) {
                            const lJourAnnuel = ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle, IE.Cycles.jourCycleEnDate(lJourCycle, lCycle));
                            LSemaineFeriee = this.JoursFeries.getValeur(lJourAnnuel + 1);
                        }
                        this.domaineCycleFerie.setValeur(LSemaineFeriee, lCycle);
                    }
                }
                return this.domaineCycleFerie;
            }
            getTailleMaxAppreciationParEnumere(aGenre) {
                let lTailleMaxAppreciation = 255;
                if (aGenre !== null) {
                    lTailleMaxAppreciation = this.tailleMaxAppreciation[aGenre];
                }
                return lTailleMaxAppreciation ? lTailleMaxAppreciation : 1000000;
            }
            _ajouterPeriode(aJSON, aElement) {
                aElement.periodeNotation = aJSON.periodeNotation;
                aElement.dates = {
                    debut: aJSON.dateDebut,
                    fin: aJSON.dateFin
                };
            }
            getDatesPeriodeDeNotation(aNumeroPeriode) {
                const lPeriode = this.listePeriodes.getElementParNumero(aNumeroPeriode);
                return lPeriode ? lPeriode.dates : null;
            }
            getDateDansPeriodeDeNotation(aDate, aNumeroPeriode) {
                const lDates = this.getDatesPeriodeDeNotation(aNumeroPeriode);
                const lDate = aDate ? aDate : ObjetDate_1.GDate.getDateCourante();
                if (lDates && (lDate > lDates.fin)) {
                    return lDates.fin;
                }
                if (lDates && (lDate < lDates.debut)) {
                    return lDates.debut;
                }
                return lDate;
            }
            getPeriodeDeNotation(aNumeroPeriode) {
                const lPeriode = this.listePeriodes.getElementParNumero(aNumeroPeriode);
                return lPeriode ? lPeriode.periodeNotation : null;
            }
            getPeriodeDeNotationParGenre(aGenrePeriodeDeNotation) {
                for (let i = 0; i < this.listePeriodes.count(); i++) {
                    const lPeriode = this.listePeriodes.get(i);
                    if (aGenrePeriodeDeNotation === lPeriode.periodeNotation) {
                        return lPeriode;
                    }
                }
            }
            estPeriodeTrimestrielle(aNumeroPeriode) {
                return Enumere_PeriodeDeNotation_1.EGenrePeriodeDeNotationUtil.estTrimestrielle(this.getPeriodeDeNotation(aNumeroPeriode));
            }
            estPeriodeSemestrielle(aNumeroPeriode) {
                return Enumere_PeriodeDeNotation_1.EGenrePeriodeDeNotationUtil.estSemestrielle(this.getPeriodeDeNotation(aNumeroPeriode));
            }
            estPeriodeAnnuelle(aNumeroPeriode) {
                return Enumere_PeriodeDeNotation_1.EGenrePeriodeDeNotationUtil.estAnnuelle(this.getPeriodeDeNotation(aNumeroPeriode));
            }
            estPeriodeOfficielle(aNumeroPeriode) {
                return Enumere_PeriodeDeNotation_1.EGenrePeriodeDeNotationUtil.estOfficielle(this.getPeriodeDeNotation(aNumeroPeriode));
            }
            getListeComboPeriodes(aGenres) {
                if (!aGenres) {
                    return this.listeComboPeriodes;
                }
                const lListePeriodes = new ObjetListeElements_1.ObjetListeElements();
                for (let I = 0; I < this.listeComboPeriodes.count(); I++) {
                    const lPeriode = this.listeComboPeriodes.get(I);
                    if (aGenres.includes(lPeriode.getGenre())) {
                        lListePeriodes.addElement(lPeriode);
                    }
                }
                return lListePeriodes;
            }
            setDocumentTitle(aLibelleOnglet) {
                const lLibelleOnglet = aLibelleOnglet ? aLibelleOnglet + ' - ' : '';
                const lLibelleProduit = this.nomProduit + (this.versionPN ? ' ' + this.versionPN : '');
                document.title = `${lLibelleOnglet}${this.NomEspace} - ${lLibelleProduit} - ${this.NomEtablissementConnexion}`;
            }
        }
        exports.ObjetParametres = ObjetParametres;
    },
    fn: 'parametres.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Chronometre = void 0;
        class Chronometre {
            constructor() {
                this.dateChrono = 0;
                this.valeur = 0;
                this.reset();
                this.actif = true;
            }
            start() {
                this.dateChrono = Date.now();
                this.actif = true;
            }
            stop() {
                this.valeur += Date.now() - this.dateChrono;
                this.actif = false;
            }
            reset() {
                this.dateChrono = Date.now();
                this.valeur = 0;
            }
            toString() {
                const lValeur = this.valeur + (this.actif ? (Date.now() - this.dateChrono) : 0);
                if (lValeur > 1000) {
                    return (lValeur / 1000) + ' s';
                }
                return lValeur + ' ms';
            }
        }
        exports.Chronometre = Chronometre;
    },
    fn: 'chronometre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.deferLoadingScript = void 0;
        require("NamespaceIE");
        require("Divers");
        const Invocateur_1 = require("Invocateur");
        const Chronometre_1 = require("Chronometre");
        const lModules = {}
          , isOpera = typeof window.opera !== 'undefined' && window.opera.toString() === '[object Opera]'
          , uUrlsProcess = {}
          , options = {
            done: null,
            fail: null,
            messageChargement: ''
        };
        let lModuleEnCours = null, lSupportASync, lHead = null;
        const uPileChargementEnCours = {};
        function createNode(config) {
            const node = config.xhtml ? document.createElementNS('http://www.w3.org/1999/xhtml', 'html:script') : document.createElement('script');
            if (config.scriptType) {
                node.type = config.scriptType;
            }
            node.async = false;
            return node;
        }
        function removeListener(node, func, name, ieName) {
            if (node.detachEvent && !isOpera) {
                if (ieName) {
                    node.detachEvent(ieName, func);
                }
            } else {
                node.removeEventListener(name, func, false);
            }
        }
        function _getHead() {
            if (!lHead) {
                lHead = document.getElementsByTagName('head')[0];
            }
            return lHead;
        }
        function createLoaderScript(aUrl, aCallback, aParams) {
            let lLoader = null;
            function finScript(evt) {
                const node = (evt.currentTarget || evt.srcElement);
                removeListener(node, onScriptLoad, 'load', 'onreadystatechange');
                removeListener(node, onScriptError, 'error');
                return node;
            }
            function onScriptLoad(evt) {
                if (evt.type === 'load' || (/^(complete|loaded)$/.test((evt.currentTarget || evt.srcElement).readyState))) {
                    finScript(evt);
                    lLoader.loaded = true;
                    lLoader.finChargement();
                }
            }
            lLoader = {
                url: aUrl,
                loaded: false,
                loadedFail: false,
                chrono: null,
                supportASync: false,
                timerFail: -1,
                params: aParams,
                load: function() {
                    if (this.loaded) {
                        this.finChargement();
                        return;
                    }
                    const node = createNode({});
                    if (lSupportASync === undefined) {
                        if (!document.addEventListener) {
                            lSupportASync = false;
                        } else {
                            lSupportASync = 'async'in node;
                        }
                    }
                    if (node.attachEvent && !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) && !isOpera) {
                        node.attachEvent('onreadystatechange', onScriptLoad);
                        lSupportASync = false;
                    } else {
                        node.addEventListener('load', onScriptLoad, false);
                        node.addEventListener('error', onScriptError, false);
                    }
                    node.src = this.url;
                    if (lSupportASync && this.params.accepteASync) {
                        node.async = false;
                    }
                    _getHead().appendChild(node);
                    const lSelf = this;
                    this.timerFail = setTimeout( () => {
                        lSelf.loadedTimeoutFail = true;
                        onScriptError({
                            currentTarget: node
                        });
                    }
                    , aParams.timeoutFailScript);
                    if (lSupportASync && this.params.accepteASync && this.next) {
                        this.params._compteurTimeout += 1;
                        if (this.params.timeoutLoad >= 0 && this.params._compteurTimeout >= this.params.nbPourDelaiTimeout) {
                            this.params._compteurTimeout = 0;
                            setTimeout( () => {
                                lSelf.next.load();
                            }
                            , this.params.timeoutLoad);
                        } else {
                            Promise.resolve().then( () => {
                                this.next.load();
                            }
                            );
                        }
                    }
                },
                finChargement: function() {
                    clearTimeout(this.timerFail);
                    aCallback(this);
                    if (this.next && !(lSupportASync && this.params.accepteASync)) {
                        this.next.load();
                    }
                }
            };
            function onScriptError(evt) {
                var _a;
                finScript(evt);
                lLoader.loadedFail = true;
                lLoader.finChargement();
            }
            return lLoader;
        }
        function _loadSingletonModule(aNom, aParams) {
            var _a;
            const lNom = aNom.toLowerCase()
              , lModule = lModules[lNom];
            lModule.nom = lNom;
            lModule.params = aParams;
            const _callbackFin = (aEchec) => {
                if (aEchec) {
                    if (options.fail) {
                        options.fail(aNom, lModule);
                    }
                    if (aParams.fail) {
                        aParams.fail(aNom, lModule);
                    }
                } else {
                    if (options.done) {
                        options.done(aNom, lModule);
                    }
                    aParams.done(aNom, lModule);
                }
            }
            ;
            if (uPileChargementEnCours[lNom]) {
                uPileChargementEnCours[lNom].push(_callbackFin);
                return;
            }
            uPileChargementEnCours[lNom] = [];
            const lCallbackPile = (aEchec) => {
                _callbackFin();
                if (uPileChargementEnCours[lNom]) {
                    const lTab = uPileChargementEnCours[lNom];
                    delete uPileChargementEnCours[lNom];
                    lTab.forEach( (aFunc) => {
                        aFunc(aEchec);
                    }
                    );
                }
            }
            ;
            if (!aParams || !aParams.done) {
                lCallbackPile(true);
                return exports.deferLoadingScript;
            }
            if (!lModule) {
                lCallbackPile(true);
                return exports.deferLoadingScript;
            }
            lModuleEnCours = lNom;
            let lUrl, i, lScript, LPrevScript;
            function _callback(aLoader) {
                var _a;
                if (lModule.interrupt) {
                    return;
                }
                if (aLoader.loadedFail) {
                    aLoader.next = undefined;
                    lModule.interrupt = true;
                    uUrlsProcess[aLoader.url].failed = true;
                    lCallbackPile(true);
                    return;
                }
                uUrlsProcess[aLoader.url].resolved = true;
                if (!aLoader.next) {
                    lCallbackPile();
                }
            }
            let lSurStartLoading = true;
            lModule.first = undefined;
            for (i = 0; i < lModule.urls.length; i++) {
                lUrl = lModule.urls[i];
                if (!uUrlsProcess[lUrl]) {
                    uUrlsProcess[lUrl] = {
                        started: true
                    };
                    if (lSurStartLoading) {
                        lSurStartLoading = false;
                    }
                    lScript = createLoaderScript(lUrl, _callback, aParams);
                    if (LPrevScript) {
                        LPrevScript.next = lScript;
                    }
                    if (!lModule.first) {
                        lModule.first = lScript;
                    }
                    LPrevScript = lScript;
                }
            }
            if (lModule.first) {
                lModule.first.load(lModule);
            } else {
                lCallbackPile();
            }
        }
        exports.deferLoadingScript = {
            add(aNom, aUrls) {
                const lNom = aNom.toLowerCase()
                  , lModule = {
                    urls: [],
                    count: 0
                };
                let lUrl, i;
                lModules[lNom] = lModule;
                for (i = 0; i < aUrls.length; i++) {
                    lUrl = aUrls[i];
                    lModule.urls.push(lUrl);
                }
                return exports.deferLoadingScript;
            },
            contains(aNom) {
                return !!lModules[aNom.toLowerCase()];
            },
            setOptions(aOptions) {
                Object.assign(options, aOptions);
                return exports.deferLoadingScript;
            },
            load(aNom, aParam) {
                if (typeof aNom === 'string') {
                    exports.deferLoadingScript.load([aNom], aParam);
                    return;
                }
                function _loadSingletonDeTableau(aNomsTraites, aParam, aDone, aFail) {
                    if (aNomsTraites.length === 0) {
                        lModuleEnCours = null;
                        if (aParam.eventIO !== false) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                        }
                        aDone();
                        return;
                    }
                    aParam.done = function() {
                        aNomsTraites.shift();
                        if (aParam.timeoutLoadGroupe >= 0) {
                            setTimeout( () => {
                                _loadSingletonDeTableau(aNomsTraites, aParam, aDone, aFail);
                            }
                            , aParam.timeoutLoadGroupe);
                        } else {
                            Promise.resolve().then( () => {
                                _loadSingletonDeTableau(aNomsTraites, aParam, aDone, aFail);
                            }
                            );
                        }
                    }
                    ;
                    aParam.fail = function(aNom) {
                        aNomsTraites = [];
                        if (aParam.eventIO !== false) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                        }
                        if (aFail) {
                            aFail(aNom);
                        }
                    }
                    ;
                    aParam._compteurTimeout = 0;
                    if (exports.deferLoadingScript.contains(aNomsTraites[0])) {
                        if (aParam.eventIOExt) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                        }
                        if (aParam.eventIO !== false) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                                actualisation: true,
                                message: (options.messageChargement + ' ' + aNomsTraites[0]).trim()
                            });
                        }
                        _loadSingletonModule(aNomsTraites[0], aParam);
                    } else {
                        aParam.done();
                    }
                }
                const lParams = Object.assign({
                    done: undefined,
                    fail: undefined,
                    eventIO: false,
                    timeoutLoadGroupe: -1,
                    timeoutLoad: -1,
                    nbPourDelaiTimeout: 1,
                    accepteASync: true,
                    timeoutFailScript: 3 * 60 * 1000
                }, aParam);
                if (Array.isArray(aNom)) {
                    const lDone = lParams.done
                      , lFail = lParams.fail;
                    if (lParams.eventIO !== false) {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                            message: options.messageChargement
                        });
                    }
                    _loadSingletonDeTableau(aNom, lParams, lDone, lFail);
                    return exports.deferLoadingScript;
                } else {
                    return exports.deferLoadingScript;
                }
            },
            async loadAsync(aNom, aParam) {
                return await new Promise( (aResolve, aReject) => {
                    const lParams = Object.assign(aParam || {}, {
                        done: function(aParam) {
                            aResolve(aParam);
                        },
                        fail: function(aParam) {
                            aReject(aParam);
                        }
                    });
                    exports.deferLoadingScript.load(aNom, lParams);
                }
                );
            },
            afficherPatience() {
                var _a;
                if (!lModuleEnCours) {
                    return false;
                }
                const lModule = lModules[lModuleEnCours.toLowerCase()];
                if (!lModule || !lModule.nom || !lModule.params) {
                    return false;
                }
                lModule.params.eventIO = true;
                lModule.params.eventIOExt = true;
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                    message: (options.messageChargement + ' ' + lModule.nom).trim()
                });
                return true;
            }
        };
    },
    fn: 'deferloadingscript.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreBoiteMessage = void 0;
        var EGenreBoiteMessage;
        (function(EGenreBoiteMessage) {
            EGenreBoiteMessage[EGenreBoiteMessage["Information"] = 0] = "Information";
            EGenreBoiteMessage[EGenreBoiteMessage["Confirmation"] = 1] = "Confirmation";
            EGenreBoiteMessage[EGenreBoiteMessage["MrFiche"] = 2] = "MrFiche";
        }
        )(EGenreBoiteMessage || (exports.EGenreBoiteMessage = EGenreBoiteMessage = {}));
    },
    fn: 'enumere_boitemessage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeHttpAcces = void 0;
        var TypeHttpAcces;
        (function(TypeHttpAcces) {
            TypeHttpAcces[TypeHttpAcces["HttpAcces_Espace"] = 0] = "HttpAcces_Espace";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionEspace"] = 1] = "HttpAcces_ConnexionEspace";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionDirect"] = 2] = "HttpAcces_ConnexionDirect";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionJetonEspace"] = 3] = "HttpAcces_ConnexionJetonEspace";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionJetonDirect"] = 4] = "HttpAcces_ConnexionJetonDirect";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionCookie"] = 5] = "HttpAcces_ConnexionCookie";
        }
        )(TypeHttpAcces || (exports.TypeHttpAcces = TypeHttpAcces = {}));
    },
    fn: 'enumere_acces.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetAcces = void 0;
        const Enumere_Acces_1 = require("Enumere_Acces");
        class ObjetAcces {
            constructor(aGenreAcces, aGenreEspace, aGenreOnglet, aGenreSousOnglet, aNumeroRessource, aNumeroRessourceSecondaire) {
                this.genre = aGenreAcces;
                this.genreEspace = aGenreEspace;
                this.genreOnglet = aGenreOnglet;
                this.genreSousOnglet = aGenreSousOnglet;
                this.numeroRessource = aNumeroRessource;
                this.numeroRessourceSecondaire = aNumeroRessourceSecondaire;
                this.avecRecherche = false;
                this.initialisation();
            }
            initialisation() {
                this.utilisateur = {};
                this.utilisateur.nom = '';
                this.utilisateur.libelleRecherche = '';
                this.utilisateur.identifiant = '';
                this.utilisateur.password = '';
            }
            setNom(aNom, aLibelleRecherche) {
                this.utilisateur.nom = aNom;
                this.utilisateur.libelleRecherche = aLibelleRecherche;
            }
            getNom() {
                return this.utilisateur.nom;
            }
            setIdentification(aIdentifiant, aPassword) {
                this.utilisateur.identifiant = aIdentifiant;
                this.utilisateur.password = aPassword ? aPassword : '@direct';
            }
            estConnexionCAS() {
                return (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonEspace || this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonDirect);
            }
            estConnexionCookie() {
                return this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionCookie;
            }
            estConnexionDirect() {
                if (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionDirect) {}
                const lResult = (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonDirect);
                return lResult;
            }
            estConnexionEspaceEtudiant() {
                if (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionEspace) {}
                const lResult = (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonEspace);
                return lResult;
            }
        }
        exports.ObjetAcces = ObjetAcces;
    },
    fn: 'objetacces.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetAccesPN = void 0;
        const Enumere_Acces_1 = require("Enumere_Acces");
        const ObjetAcces_1 = require("ObjetAcces");
        const Enumere_Espace_1 = require("Enumere_Espace");
        class ObjetAccesPN extends ObjetAcces_1.ObjetAcces {
            constructor(aGenreAcces, aGenreEspace, aGenreOnglet, aGenreSousOnglet, aNumeroRessource, aNumeroRessourceSecondaire) {
                super(aGenreAcces, aGenreEspace, aGenreOnglet, aGenreSousOnglet, aNumeroRessource, aNumeroRessourceSecondaire);
            }
            estConnexionEspaceEtudiant() {
                if (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_Espace) {}
                let lResult = (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonEspace);
                lResult = (lResult && this.genreEspace === Enumere_Espace_1.EGenreEspace.Eleve);
                return lResult;
            }
        }
        exports.ObjetAccesPN = ObjetAccesPN;
    },
    fn: 'objetaccespn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetOptionsEspaceLocal = void 0;
        const LocalStorage_1 = require("LocalStorage");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        const MethodesObjet_1 = require("MethodesObjet");
        const AccessApp_1 = require("AccessApp");
        class ObjetOptionsEspaceLocal {
            constructor(aOptions) {
                this.options = $.extend({
                    racine: 'OPTIONS_ESPACE_',
                    nomProduit: '',
                    espace: ''
                }, aOptions);
                try {
                    ThemesCouleurs_1.ThemesCouleurs.setChoixDarkMode(this.getChoixDarkMode());
                } catch (e) {}
            }
            getOptionsJSON() {
                let lJSON = LocalStorage_1.IELocalStorage.getItemJSON(this.options.racine + (this.options.nomProduit || ''));
                if (!lJSON) {
                    lJSON = {};
                }
                return lJSON;
            }
            setOptionsJSON(aJSON) {
                LocalStorage_1.IELocalStorage.setItemJSON(this.options.racine + (this.options.nomProduit || ''), aJSON);
            }
            getOptionEspace(aNomOption) {
                return this.getOptionsJSON()[aNomOption + '_' + this.options.espace];
            }
            setOptionEspace(aNomOption, aValeur) {
                const lJSON = this.getOptionsJSON();
                if (aValeur) {
                    lJSON[aNomOption + '_' + this.options.espace] = aValeur;
                } else if (aValeur === undefined || aValeur === null || aValeur === false) {
                    delete lJSON[aNomOption + '_' + this.options.espace];
                }
                this.setOptionsJSON(lJSON);
                return this;
            }
            getAvecCodeCompetences() {
                return !!this.getOptionEspace('avecCC');
            }
            setAvecCodeCompetences(aModeAccessible) {
                this.setOptionEspace('avecCC', aModeAccessible);
            }
            getChoixDarkMode() {
                let lResult = this.getOptionEspace('choix-darkmode');
                if (!MethodesObjet_1.MethodesObjet.valueInEnum(lResult, TypeThemeCouleur_1.ChoixDarkMode)) {
                    lResult = TypeThemeCouleur_1.ChoixDarkMode.clair;
                }
                return lResult;
            }
            setChoixDarkMode(aChoix) {
                this.setOptionEspace('choix-darkmode', aChoix);
                ThemesCouleurs_1.ThemesCouleurs.setChoixDarkMode(aChoix);
            }
            getSyntheseVocaleActif() {
                return false;
            }
            setSyntheseVocaleActif(aActif) {
                return this;
            }
            getSyntheseVocaleAvecSurlignage() {
                return !!this.getOptionEspace('ieSVSurLignage');
            }
            setSyntheseVocaleAvecSurlignage(aValeur) {
                return this;
            }
            getVoixSyntheseVocale() {
                return this.getOptionEspace('ieSVVoix');
            }
            setVoixSyntheseVocale(aUriVoix) {
                this.setOptionEspace('ieSVVoix', aUriVoix);
                return this;
            }
        }
        exports.ObjetOptionsEspaceLocal = ObjetOptionsEspaceLocal;
    },
    fn: 'objetoptionsespacelocal.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetOptionsEspaceLocalPN = void 0;
        const AccessApp_1 = require("AccessApp");
        const ObjetOptionsEspaceLocal_1 = require("ObjetOptionsEspaceLocal");
        class ObjetOptionsEspaceLocalPN extends ObjetOptionsEspaceLocal_1.ObjetOptionsEspaceLocal {
            getGenreConnexion() {
                return this.getOptionsJSON().genreConnexion;
            }
            setGenreConnexion(aGenreConnexion) {
                const lJSON = this.getOptionsJSON();
                lJSON.genreConnexion = aGenreConnexion;
                this.setOptionsJSON(lJSON);
            }
            getSyntheseVocaleActif() {
                const lApp = (0,
                AccessApp_1.getApp)();
                return lApp.estPrimaire && !!this.getOptionEspace('ieSVActive');
            }
            setSyntheseVocaleActif(aActif) {
                const lApp = (0,
                AccessApp_1.getApp)();
                if (lApp.estPrimaire) {
                    this.setOptionEspace('ieSVActive', aActif);
                } else {}
                return this;
            }
            getSyntheseVocaleAvecSurlignage() {
                const lApp = (0,
                AccessApp_1.getApp)();
                return lApp.estPrimaire && !!this.getOptionEspace('ieSVSurLignage');
            }
            setSyntheseVocaleAvecSurlignage(aValeur) {
                const lApp = (0,
                AccessApp_1.getApp)();
                if (lApp.estPrimaire || (lApp.getOptionsDebug() && lApp.getOptionsDebug().forcerSyntheseVocale)) {
                    this.setOptionEspace('ieSVSurLignage', aValeur);
                }
                return this;
            }
        }
        exports.ObjetOptionsEspaceLocalPN = ObjetOptionsEspaceLocalPN;
    },
    fn: 'objetoptionsespacelocalpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeModeGrillesEDT = void 0;
        var TypeModeGrillesEDT;
        (function(TypeModeGrillesEDT) {
            TypeModeGrillesEDT[TypeModeGrillesEDT["TMG_CycleHebdomadaire"] = 0] = "TMG_CycleHebdomadaire";
            TypeModeGrillesEDT[TypeModeGrillesEDT["TMG_CycleAvecferies"] = 1] = "TMG_CycleAvecferies";
            TypeModeGrillesEDT[TypeModeGrillesEDT["TMG_CycleSansFeries"] = 2] = "TMG_CycleSansFeries";
        }
        )(TypeModeGrillesEDT || (exports.TypeModeGrillesEDT = TypeModeGrillesEDT = {}));
    },
    fn: 'typemodegrillesedt.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        require("NamespaceIE");
        require("DeclarationJQuery");
        const Invocateur_1 = require("Invocateur");
        let _actif = false;
        let _actifRequete = false;
        const _idLogAutorises = {};
        let _compteurRequete = 0;
        const _nbRequetesMax = 200;
        let _pileLog = [];
        const _pileRequete = [];
        var TypeGenreLog;
        (function(TypeGenreLog) {
            TypeGenreLog[TypeGenreLog["Message"] = 0] = "Message";
            TypeGenreLog[TypeGenreLog["Avertissement"] = 1] = "Avertissement";
            TypeGenreLog[TypeGenreLog["Erreur"] = 2] = "Erreur";
            TypeGenreLog[TypeGenreLog["Deprecated"] = 3] = "Deprecated";
        }
        )(TypeGenreLog || (TypeGenreLog = {}));
        const Log = {
            genre: TypeGenreLog,
            getActif() {
                return _actif;
            },
            setActif(aActif) {
                _actif = aActif;
                if (aActif) {
                    this.addLog('Dmarrage Log', null, Log.genre.Avertissement);
                }
            },
            getActifRequete() {
                return _actifRequete;
            },
            setActifRequete(aActif) {
                _actifRequete = aActif;
            },
            addLog(aMessage, aIdFiltrage, aGenreLog) {
                if (!_actif) {
                    return;
                }
                if (aIdFiltrage && _idLogAutorises && !_idLogAutorises[aIdFiltrage]) {
                    return;
                }
                const lMessage = aMessage && aMessage.toString ? aMessage.toString() : 'aMessage NON LOGGABLE !!!';
                const lLog = {
                    message: lMessage,
                    genreLog: aGenreLog,
                    date: new Date()
                };
                _pileLog.push(lLog);
                this.addConsoleLog(aMessage, aGenreLog);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.DEBUG_log, lLog);
            },
            vider() {
                _pileLog = [];
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.DEBUG_log, null);
            },
            setIDFiltrageLog(aID, aAutoriser) {
                if (aAutoriser) {
                    _idLogAutorises[aID] = true;
                } else {
                    delete _idLogAutorises[aID];
                }
            },
            addRequete(aDonnees) {
                if (!this.getActifRequete()) {
                    return;
                }
                const lDonnees = {
                    nomRequete: '',
                    numeroRequete: 0,
                    numeroOrdre: 0,
                    chrono: null,
                    estReponse: false,
                    lgcontenu: null
                };
                Object.assign(lDonnees, aDonnees);
                lDonnees.date = new Date();
                if (!lDonnees.estReponse) {
                    _compteurRequete += 1;
                }
                _pileRequete.push(lDonnees);
                if (_pileRequete.length > _nbRequetesMax) {
                    _pileRequete.shift();
                }
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.DEBUG_logRequete, lDonnees);
            },
            getCompteurRequete() {
                return _compteurRequete;
            },
            getPile() {
                return _pileLog;
            },
            getRequetes() {
                return _pileRequete;
            },
            addConsoleLog(aMessage, aGenreMsg) {},
            addConsoleLogObjet(aObjet, aLibelle) {},
            addConsolePileAppel(aLibelle) {}
        };
        IE.log = Log;
        module.exports = Log;
    },
    fn: 'ielog.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        var __extends;
        var __assign;
        var __rest;
        var __decorate;
        var __param;
        var __esDecorate;
        var __runInitializers;
        var __propKey;
        var __setFunctionName;
        var __metadata;
        var __awaiter;
        var __generator;
        var __exportStar;
        var __values;
        var __read;
        var __spread;
        var __spreadArrays;
        var __spreadArray;
        var __await;
        var __asyncGenerator;
        var __asyncDelegator;
        var __asyncValues;
        var __makeTemplateObject;
        var __importStar;
        var __importDefault;
        var __classPrivateFieldGet;
        var __classPrivateFieldSet;
        var __classPrivateFieldIn;
        var __createBinding;
        var __addDisposableResource;
        var __disposeResources;
        (function(factory) {
            var root = typeof global === "object" ? global : typeof self === "object" ? self : typeof this === "object" ? this : {};
            if (typeof define === "function" && define.amd) {
                define("tslib", ["exports"], function(exports) {
                    factory(createExporter(root, createExporter(exports)));
                });
            } else if (typeof module === "object" && typeof module.exports === "object") {
                factory(createExporter(root, createExporter(module.exports)));
            } else {
                factory(createExporter(root));
            }
            function createExporter(exports, previous) {
                if (exports !== root) {
                    if (typeof Object.create === "function") {
                        Object.defineProperty(exports, "__esModule", {
                            value: true
                        });
                    } else {
                        exports.__esModule = true;
                    }
                }
                return function(id, v) {
                    return exports[id] = previous ? previous(id, v) : v;
                }
                ;
            }
        }
        )(function(exporter) {
            var extendStatics = Object.setPrototypeOf || ({
                __proto__: []
            }instanceof Array && function(d, b) {
                d.__proto__ = b;
            }
            ) || function(d, b) {
                for (var p in b)
                    if (Object.prototype.hasOwnProperty.call(b, p))
                        d[p] = b[p];
            }
            ;
            __extends = function(d, b) {
                if (typeof b !== "function" && b !== null)
                    throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
                extendStatics(d, b);
                function __() {
                    this.constructor = d;
                }
                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype,
                new __());
            }
            ;
            __assign = Object.assign || function(t) {
                for (var s, i = 1, n = arguments.length; i < n; i++) {
                    s = arguments[i];
                    for (var p in s)
                        if (Object.prototype.hasOwnProperty.call(s, p))
                            t[p] = s[p];
                }
                return t;
            }
            ;
            __rest = function(s, e) {
                var t = {};
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
                        t[p] = s[p];
                if (s != null && typeof Object.getOwnPropertySymbols === "function")
                    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                            t[p[i]] = s[p[i]];
                    }
                return t;
            }
            ;
            __decorate = function(decorators, target, key, desc) {
                var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
                if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
                    r = Reflect.decorate(decorators, target, key, desc);
                else
                    for (var i = decorators.length - 1; i >= 0; i--)
                        if (d = decorators[i])
                            r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
                return c > 3 && r && Object.defineProperty(target, key, r),
                r;
            }
            ;
            __param = function(paramIndex, decorator) {
                return function(target, key) {
                    decorator(target, key, paramIndex);
                }
            }
            ;
            __esDecorate = function(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
                function accept(f) {
                    if (f !== void 0 && typeof f !== "function")
                        throw new TypeError("Function expected");
                    return f;
                }
                var kind = contextIn.kind
                  , key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
                var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
                var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
                var _, done = false;
                for (var i = decorators.length - 1; i >= 0; i--) {
                    var context = {};
                    for (var p in contextIn)
                        context[p] = p === "access" ? {} : contextIn[p];
                    for (var p in contextIn.access)
                        context.access[p] = contextIn.access[p];
                    context.addInitializer = function(f) {
                        if (done)
                            throw new TypeError("Cannot add initializers after decoration has completed");
                        extraInitializers.push(accept(f || null));
                    }
                    ;
                    var result = (0,
                    decorators[i])(kind === "accessor" ? {
                        get: descriptor.get,
                        set: descriptor.set
                    } : descriptor[key], context);
                    if (kind === "accessor") {
                        if (result === void 0)
                            continue;
                        if (result === null || typeof result !== "object")
                            throw new TypeError("Object expected");
                        if (_ = accept(result.get))
                            descriptor.get = _;
                        if (_ = accept(result.set))
                            descriptor.set = _;
                        if (_ = accept(result.init))
                            initializers.unshift(_);
                    } else if (_ = accept(result)) {
                        if (kind === "field")
                            initializers.unshift(_);
                        else
                            descriptor[key] = _;
                    }
                }
                if (target)
                    Object.defineProperty(target, contextIn.name, descriptor);
                done = true;
            }
            ;
            __runInitializers = function(thisArg, initializers, value) {
                var useValue = arguments.length > 2;
                for (var i = 0; i < initializers.length; i++) {
                    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
                }
                return useValue ? value : void 0;
            }
            ;
            __propKey = function(x) {
                return typeof x === "symbol" ? x : "".concat(x);
            }
            ;
            __setFunctionName = function(f, name, prefix) {
                if (typeof name === "symbol")
                    name = name.description ? "[".concat(name.description, "]") : "";
                return Object.defineProperty(f, "name", {
                    configurable: true,
                    value: prefix ? "".concat(prefix, " ", name) : name
                });
            }
            ;
            __metadata = function(metadataKey, metadataValue) {
                if (typeof Reflect === "object" && typeof Reflect.metadata === "function")
                    return Reflect.metadata(metadataKey, metadataValue);
            }
            ;
            __awaiter = function(thisArg, _arguments, P, generator) {
                function adopt(value) {
                    return value instanceof P ? value : new P(function(resolve) {
                        resolve(value);
                    }
                    );
                }
                return new (P || (P = Promise))(function(resolve, reject) {
                    function fulfilled(value) {
                        try {
                            step(generator.next(value));
                        } catch (e) {
                            reject(e);
                        }
                    }
                    function rejected(value) {
                        try {
                            step(generator["throw"](value));
                        } catch (e) {
                            reject(e);
                        }
                    }
                    function step(result) {
                        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
                    }
                    step((generator = generator.apply(thisArg, _arguments || [])).next());
                }
                );
            }
            ;
            __generator = function(thisArg, body) {
                var _ = {
                    label: 0,
                    sent: function() {
                        if (t[0] & 1)
                            throw t[1];
                        return t[1];
                    },
                    trys: [],
                    ops: []
                }, f, y, t, g;
                return g = {
                    next: verb(0),
                    "throw": verb(1),
                    "return": verb(2)
                },
                typeof Symbol === "function" && (g[Symbol.iterator] = function() {
                    return this;
                }
                ),
                g;
                function verb(n) {
                    return function(v) {
                        return step([n, v]);
                    }
                    ;
                }
                function step(op) {
                    if (f)
                        throw new TypeError("Generator is already executing.");
                    while (g && (g = 0,
                    op[0] && (_ = 0)),
                    _)
                        try {
                            if (f = 1,
                            y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y),
                            0) : y.next) && !(t = t.call(y, op[1])).done)
                                return t;
                            if (y = 0,
                            t)
                                op = [op[0] & 2, t.value];
                            switch (op[0]) {
                            case 0:
                            case 1:
                                t = op;
                                break;
                            case 4:
                                _.label++;
                                return {
                                    value: op[1],
                                    done: false
                                };
                            case 5:
                                _.label++;
                                y = op[1];
                                op = [0];
                                continue;
                            case 7:
                                op = _.ops.pop();
                                _.trys.pop();
                                continue;
                            default:
                                if (!(t = _.trys,
                                t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                                    _ = 0;
                                    continue;
                                }
                                if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {
                                    _.label = op[1];
                                    break;
                                }
                                if (op[0] === 6 && _.label < t[1]) {
                                    _.label = t[1];
                                    t = op;
                                    break;
                                }
                                if (t && _.label < t[2]) {
                                    _.label = t[2];
                                    _.ops.push(op);
                                    break;
                                }
                                if (t[2])
                                    _.ops.pop();
                                _.trys.pop();
                                continue;
                            }
                            op = body.call(thisArg, _);
                        } catch (e) {
                            op = [6, e];
                            y = 0;
                        } finally {
                            f = t = 0;
                        }
                    if (op[0] & 5)
                        throw op[1];
                    return {
                        value: op[0] ? op[1] : void 0,
                        done: true
                    };
                }
            }
            ;
            __exportStar = function(m, o) {
                for (var p in m)
                    if (p !== "default" && !Object.prototype.hasOwnProperty.call(o, p))
                        __createBinding(o, m, p);
            }
            ;
            __createBinding = Object.create ? (function(o, m, k, k2) {
                if (k2 === undefined)
                    k2 = k;
                var desc = Object.getOwnPropertyDescriptor(m, k);
                if (!desc || ("get"in desc ? !m.__esModule : desc.writable || desc.configurable)) {
                    desc = {
                        enumerable: true,
                        get: function() {
                            return m[k];
                        }
                    };
                }
                Object.defineProperty(o, k2, desc);
            }
            ) : (function(o, m, k, k2) {
                if (k2 === undefined)
                    k2 = k;
                o[k2] = m[k];
            }
            );
            __values = function(o) {
                var s = typeof Symbol === "function" && Symbol.iterator
                  , m = s && o[s]
                  , i = 0;
                if (m)
                    return m.call(o);
                if (o && typeof o.length === "number")
                    return {
                        next: function() {
                            if (o && i >= o.length)
                                o = void 0;
                            return {
                                value: o && o[i++],
                                done: !o
                            };
                        }
                    };
                throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
            }
            ;
            __read = function(o, n) {
                var m = typeof Symbol === "function" && o[Symbol.iterator];
                if (!m)
                    return o;
                var i = m.call(o), r, ar = [], e;
                try {
                    while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                        ar.push(r.value);
                } catch (error) {
                    e = {
                        error: error
                    };
                } finally {
                    try {
                        if (r && !r.done && (m = i["return"]))
                            m.call(i);
                    } finally {
                        if (e)
                            throw e.error;
                    }
                }
                return ar;
            }
            ;
            __spread = function() {
                for (var ar = [], i = 0; i < arguments.length; i++)
                    ar = ar.concat(__read(arguments[i]));
                return ar;
            }
            ;
            __spreadArrays = function() {
                for (var s = 0, i = 0, il = arguments.length; i < il; i++)
                    s += arguments[i].length;
                for (var r = Array(s), k = 0, i = 0; i < il; i++)
                    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++,
                    k++)
                        r[k] = a[j];
                return r;
            }
            ;
            __spreadArray = function(to, from, pack) {
                if (pack || arguments.length === 2)
                    for (var i = 0, l = from.length, ar; i < l; i++) {
                        if (ar || !(i in from)) {
                            if (!ar)
                                ar = Array.prototype.slice.call(from, 0, i);
                            ar[i] = from[i];
                        }
                    }
                return to.concat(ar || Array.prototype.slice.call(from));
            }
            ;
            __await = function(v) {
                return this instanceof __await ? (this.v = v,
                this) : new __await(v);
            }
            ;
            __asyncGenerator = function(thisArg, _arguments, generator) {
                if (!Symbol.asyncIterator)
                    throw new TypeError("Symbol.asyncIterator is not defined.");
                var g = generator.apply(thisArg, _arguments || []), i, q = [];
                return i = {},
                verb("next"),
                verb("throw"),
                verb("return", awaitReturn),
                i[Symbol.asyncIterator] = function() {
                    return this;
                }
                ,
                i;
                function awaitReturn(f) {
                    return function(v) {
                        return Promise.resolve(v).then(f, reject);
                    }
                    ;
                }
                function verb(n, f) {
                    if (g[n]) {
                        i[n] = function(v) {
                            return new Promise(function(a, b) {
                                q.push([n, v, a, b]) > 1 || resume(n, v);
                            }
                            );
                        }
                        ;
                        if (f)
                            i[n] = f(i[n]);
                    }
                }
                function resume(n, v) {
                    try {
                        step(g[n](v));
                    } catch (e) {
                        settle(q[0][3], e);
                    }
                }
                function step(r) {
                    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);
                }
                function fulfill(value) {
                    resume("next", value);
                }
                function reject(value) {
                    resume("throw", value);
                }
                function settle(f, v) {
                    if (f(v),
                    q.shift(),
                    q.length)
                        resume(q[0][0], q[0][1]);
                }
            }
            ;
            __asyncDelegator = function(o) {
                var i, p;
                return i = {},
                verb("next"),
                verb("throw", function(e) {
                    throw e;
                }),
                verb("return"),
                i[Symbol.iterator] = function() {
                    return this;
                }
                ,
                i;
                function verb(n, f) {
                    i[n] = o[n] ? function(v) {
                        return (p = !p) ? {
                            value: __await(o[n](v)),
                            done: false
                        } : f ? f(v) : v;
                    }
                    : f;
                }
            }
            ;
            __asyncValues = function(o) {
                if (!Symbol.asyncIterator)
                    throw new TypeError("Symbol.asyncIterator is not defined.");
                var m = o[Symbol.asyncIterator], i;
                return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](),
                i = {},
                verb("next"),
                verb("throw"),
                verb("return"),
                i[Symbol.asyncIterator] = function() {
                    return this;
                }
                ,
                i);
                function verb(n) {
                    i[n] = o[n] && function(v) {
                        return new Promise(function(resolve, reject) {
                            v = o[n](v),
                            settle(resolve, reject, v.done, v.value);
                        }
                        );
                    }
                    ;
                }
                function settle(resolve, reject, d, v) {
                    Promise.resolve(v).then(function(v) {
                        resolve({
                            value: v,
                            done: d
                        });
                    }, reject);
                }
            }
            ;
            __makeTemplateObject = function(cooked, raw) {
                if (Object.defineProperty) {
                    Object.defineProperty(cooked, "raw", {
                        value: raw
                    });
                } else {
                    cooked.raw = raw;
                }
                return cooked;
            }
            ;
            var __setModuleDefault = Object.create ? (function(o, v) {
                Object.defineProperty(o, "default", {
                    enumerable: true,
                    value: v
                });
            }
            ) : function(o, v) {
                o["default"] = v;
            }
            ;
            __importStar = function(mod) {
                if (mod && mod.__esModule)
                    return mod;
                var result = {};
                if (mod != null)
                    for (var k in mod)
                        if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k))
                            __createBinding(result, mod, k);
                __setModuleDefault(result, mod);
                return result;
            }
            ;
            __importDefault = function(mod) {
                return (mod && mod.__esModule) ? mod : {
                    "default": mod
                };
            }
            ;
            __classPrivateFieldGet = function(receiver, state, kind, f) {
                if (kind === "a" && !f)
                    throw new TypeError("Private accessor was defined without a getter");
                if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
                    throw new TypeError("Cannot read private member from an object whose class did not declare it");
                return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
            }
            ;
            __classPrivateFieldSet = function(receiver, state, value, kind, f) {
                if (kind === "m")
                    throw new TypeError("Private method is not writable");
                if (kind === "a" && !f)
                    throw new TypeError("Private accessor was defined without a setter");
                if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
                    throw new TypeError("Cannot write private member to an object whose class did not declare it");
                return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)),
                value;
            }
            ;
            __classPrivateFieldIn = function(state, receiver) {
                if (receiver === null || (typeof receiver !== "object" && typeof receiver !== "function"))
                    throw new TypeError("Cannot use 'in' operator on non-object");
                return typeof state === "function" ? receiver === state : state.has(receiver);
            }
            ;
            __addDisposableResource = function(env, value, async) {
                if (value !== null && value !== void 0) {
                    if (typeof value !== "object" && typeof value !== "function")
                        throw new TypeError("Object expected.");
                    var dispose;
                    if (async) {
                        if (!Symbol.asyncDispose)
                            throw new TypeError("Symbol.asyncDispose is not defined.");
                        dispose = value[Symbol.asyncDispose];
                    }
                    if (dispose === void 0) {
                        if (!Symbol.dispose)
                            throw new TypeError("Symbol.dispose is not defined.");
                        dispose = value[Symbol.dispose];
                    }
                    if (typeof dispose !== "function")
                        throw new TypeError("Object not disposable.");
                    env.stack.push({
                        value: value,
                        dispose: dispose,
                        async: async
                    });
                } else if (async) {
                    env.stack.push({
                        async: true
                    });
                }
                return value;
            }
            ;
            var _SuppressedError = typeof SuppressedError === "function" ? SuppressedError : function(error, suppressed, message) {
                var e = new Error(message);
                return e.name = "SuppressedError",
                e.error = error,
                e.suppressed = suppressed,
                e;
            }
            ;
            __disposeResources = function(env) {
                function fail(e) {
                    env.error = env.hasError ? new _SuppressedError(e,env.error,"An error was suppressed during disposal.") : e;
                    env.hasError = true;
                }
                function next() {
                    while (env.stack.length) {
                        var rec = env.stack.pop();
                        try {
                            var result = rec.dispose && rec.dispose.call(rec.value);
                            if (rec.async)
                                return Promise.resolve(result).then(next, function(e) {
                                    fail(e);
                                    return next();
                                });
                        } catch (e) {
                            fail(e);
                        }
                    }
                    if (env.hasError)
                        throw env.error;
                }
                return next();
            }
            ;
            exporter("__extends", __extends);
            exporter("__assign", __assign);
            exporter("__rest", __rest);
            exporter("__decorate", __decorate);
            exporter("__param", __param);
            exporter("__esDecorate", __esDecorate);
            exporter("__runInitializers", __runInitializers);
            exporter("__propKey", __propKey);
            exporter("__setFunctionName", __setFunctionName);
            exporter("__metadata", __metadata);
            exporter("__awaiter", __awaiter);
            exporter("__generator", __generator);
            exporter("__exportStar", __exportStar);
            exporter("__createBinding", __createBinding);
            exporter("__values", __values);
            exporter("__read", __read);
            exporter("__spread", __spread);
            exporter("__spreadArrays", __spreadArrays);
            exporter("__spreadArray", __spreadArray);
            exporter("__await", __await);
            exporter("__asyncGenerator", __asyncGenerator);
            exporter("__asyncDelegator", __asyncDelegator);
            exporter("__asyncValues", __asyncValues);
            exporter("__makeTemplateObject", __makeTemplateObject);
            exporter("__importStar", __importStar);
            exporter("__importDefault", __importDefault);
            exporter("__classPrivateFieldGet", __classPrivateFieldGet);
            exporter("__classPrivateFieldSet", __classPrivateFieldSet);
            exporter("__classPrivateFieldIn", __classPrivateFieldIn);
            exporter("__addDisposableResource", __addDisposableResource);
            exporter("__disposeResources", __disposeResources);
        });
    },
    fn: 'tslib.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetHint = void 0;
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const MethodesTableau_1 = require("MethodesTableau");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetSupport_1 = require("ObjetSupport");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const AccessApp_1 = require("AccessApp");
        let uTimeoutFondu = null;
        const uIdConteneur = GUID_1.GUID.getId();
        const uIdScroll = uIdConteneur + '_scroll';
        let uHintsEnAttente = [];
        let uHintEnCoursChargement = null;
        let uHintAffiche = null;
        let uHintInitialise = false;
        class ConteneurEventInvocateur {
            constructor() {
                this.pileAbonnementInvocateur = {};
            }
            getPileAbonnement() {
                return this.pileAbonnementInvocateur;
            }
        }
        const uConteneurEventInvocateur = new ConteneurEventInvocateur();
        const ObjetHint = {
            optionsDefault: {
                sansDelai: false,
                maxHeight: 500,
                maxWidth: 550,
                delaiTimer: 400,
                delaiFermeture: 0,
                sansDelaiFermetureSuppression: false
            },
            getDisabled() {
                return !ObjetNavigateur_1.Navigateur;
            },
            start(aContenu, aOptions) {
                if (ObjetHint.getDisabled()) {
                    IE.log.addLog('ObjetHint.start => disabled sur espaces mobiles');
                    return;
                }
                if (!uHintInitialise) {
                    uHintInitialise = true;
                    $(document).off('pointerdown.Hint keyup.Hint').on('pointerdown.Hint keyup.Hint', (aEvent) => {
                        _stopAll(aEvent);
                    }
                    );
                    $(window).off('resize.Hint').on('resize.Hint', (event) => {
                        if (uHintAffiche && uHintAffiche.hintTouch) {
                            return;
                        }
                        _stopAll(event);
                    }
                    );
                }
                const lHint = Object.assign({
                    position: null,
                    event: null,
                    elementDOM: null
                }, ObjetHint.optionsDefault, aOptions);
                lHint.actif = false;
                if (!aContenu || (aContenu === '')) {
                    return lHint;
                }
                if (lHint.elementDOM && lHint.elementDOM.setAttribute) {
                    lHint.elementDOM.setAttribute('title', '');
                }
                lHint.actif = true;
                uHintsEnAttente.push(lHint);
                if (lHint.sansDelai) {
                    _afficher(aContenu, lHint);
                } else {
                    lHint.promiseTimerDelai = new Promise( (aResolve) => {
                        lHint.timer = setTimeout( () => {
                            _afficher(aContenu, lHint);
                            if (lHint.pomiseAfficher) {
                                lHint.pomiseAfficher.then( () => {
                                    aResolve();
                                }
                                );
                            } else {
                                aResolve();
                            }
                        }
                        , lHint.delaiTimer);
                    }
                    );
                }
                return lHint;
            },
            stop(aHint) {
                if (aHint && aHint === uHintEnCoursChargement) {
                    return false;
                }
                if (aHint) {
                    const lARetirer = !aHint.estAffiche;
                    _stopHint(aHint);
                    if (lARetirer) {
                        setTimeout( () => {
                            _retirerHintPileAttente(aHint);
                        }
                        , 0);
                    }
                } else {
                    _stopAll();
                }
            },
            attach(aParam) {
                if (ObjetHint.getDisabled()) {
                    IE.log.addLog('ObjetHint.attach > disabled sur espaces mobiles');
                    return;
                }
                const lNamespace = aParam.namespace ? aParam.namespace = '.' + aParam.namespace : '.IEHint'
                  , lContenu = aParam.contenu
                  , lInterrupt = aParam.interrupt
                  , lMargeDeplacementTouch = 50
                  , lIdentEventsTouch = ObjetNavigateur_1.Navigateur.getEventInvocateur('pointermove');
                let lHint;
                let lTimeoutTouch;
                const lStop = function() {
                    if (lTimeoutTouch) {
                        clearTimeout(lTimeoutTouch);
                        lTimeoutTouch = null;
                    }
                    Invocateur_1.Invocateur.desabonner(lIdentEventsTouch, uConteneurEventInvocateur);
                    if (ObjetHint.stop(lHint) !== false) {
                        lHint = null;
                    }
                };
                if (!aParam.$Element) {
                    return false;
                }
                if (aParam.off !== false) {
                    aParam.$Element.off(' pointerover' + lNamespace + ' pointerleave' + lNamespace + ' pointerout' + lNamespace + ' destroyed' + lNamespace + ' pointerdown' + lNamespace);
                }
                const lElementDOM = aParam.$Element.get(0);
                const lMap = {};
                lMap['pointerover' + lNamespace] = function(event) {
                    if (event.pointerType === 'touch') {
                        return;
                    }
                    if (uHintEnCoursChargement) {
                        return;
                    }
                    if (lInterrupt && lInterrupt.call(this, event)) {
                        return;
                    }
                    const lContenuAAfficher = lContenu;
                    lHint = ObjetHint.start(lContenuAAfficher, {
                        event: event,
                        elementDOM: lElementDOM
                    });
                }
                ;
                lMap['destroyed' + lNamespace] = function() {
                    lStop();
                }
                ;
                lMap['pointerleave' + lNamespace + ' pointerout' + lNamespace] = function(aEvent) {
                    if (aEvent.pointerType === 'touch') {
                        return;
                    }
                    if (lHint && lHint.hintTouch) {
                        return;
                    }
                    lStop();
                }
                ;
                lMap['pointerdown' + lNamespace] = function(event) {
                    if (event.pointerType !== 'touch') {
                        return;
                    }
                    if (lInterrupt && lInterrupt.call(this, event)) {
                        return;
                    }
                    if (event.originalEvent.__hintSurEventPointerDown__) {
                        return;
                    }
                    event.originalEvent.hintTouch = true;
                    const lPositionEvent = ObjetPosition_1.GPosition.getPositionEventJQuery(event);
                    lHint = ObjetHint.start(lContenu, {
                        delaiTimer: 500,
                        event: event,
                        position: {
                            x: lPositionEvent.x + 5,
                            y: lPositionEvent.y + 5
                        },
                        elementDOM: lElementDOM,
                        avecTestDisplay: true
                    });
                    if (!lHint || !lHint.promiseTimerDelai) {
                        return;
                    }
                    const lTestDeplacement = function(aEvent) {
                        if (lHint && lHint.actif && lHint.position) {
                            const lPositionEvent = ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent);
                            if (Math.abs(lPositionEvent.x - lHint.position.x) > lMargeDeplacementTouch || Math.abs(lPositionEvent.y - lHint.position.y) > lMargeDeplacementTouch) {
                                lStop();
                            }
                        }
                    };
                    Invocateur_1.Invocateur.desabonner(lIdentEventsTouch, uConteneurEventInvocateur);
                    Invocateur_1.Invocateur.abonner(lIdentEventsTouch, lTestDeplacement, uConteneurEventInvocateur);
                    lHint.promiseTimerDelai.then( () => {
                        if (!lHint.estAffiche) {
                            return;
                        }
                        event.originalEvent.__hintSurEventPointerDown__ = true;
                        lHint.hintTouch = true;
                        if (lHint.hintAvecScroll) {
                            lHint.stopSurFinScroll = lStop;
                            return;
                        }
                        if (lTimeoutTouch) {
                            clearTimeout(lTimeoutTouch);
                        }
                        lTimeoutTouch = setTimeout( () => {
                            lTimeoutTouch = null;
                            if (lHint && lHint.actif && lHint.estAffiche) {
                                lStop();
                            }
                        }
                        , 1500);
                    }
                    );
                }
                ;
                aParam.$Element.on(lMap);
                aParam.$Element = null;
            },
            nodeDansHint(aNode) {
                return $(aNode).parents('#' + uIdConteneur.escapeJQ()).length > 0;
            }
        };
        exports.ObjetHint = ObjetHint;
        function _stopHint(aHint) {
            if (!aHint || aHint === uHintEnCoursChargement) {
                return;
            }
            if (aHint.elementDOM && aHint.elementDOM.removeAttribute) {
                aHint.elementDOM.removeAttribute('title');
            }
            if (aHint.estAffiche) {
                uHintAffiche = null;
                $('#' + uIdConteneur.escapeJQ()).removeClass('visible');
                if (ObjetSupport_1.Support.avecSupportTransitions && !aHint.sansDelaiFermetureSuppression) {
                    clearTimeout(uTimeoutFondu);
                    uTimeoutFondu = setTimeout( () => {
                        ObjetHtml_1.GHtml.supprimerElementDOM(uIdConteneur);
                        uTimeoutFondu = null;
                    }
                    , 200);
                } else {
                    ObjetHtml_1.GHtml.supprimerElementDOM(uIdConteneur);
                }
            }
            if (aHint.timerFermeture) {
                clearTimeout(aHint.timerFermeture);
                aHint.timerFermeture = null;
            }
            if (aHint.timer) {
                clearTimeout(aHint.timer);
                aHint.timer = null;
            }
            aHint.estAffiche = false;
            aHint.actif = false;
        }
        function _stopEnAttente() {
            let lHintEnAttente;
            for (let i = 0, lNb = uHintsEnAttente.length; i < lNb; i++) {
                lHintEnAttente = uHintsEnAttente[i];
                if (lHintEnAttente) {
                    lHintEnAttente.actif = false;
                    if (lHintEnAttente.timer) {
                        clearTimeout(lHintEnAttente.timer);
                        lHintEnAttente.timer = null;
                    }
                }
            }
            uHintsEnAttente = [];
        }
        function _stopAll(event, aConserverHintEnCours) {
            if (event && event.originalEvent && event.originalEvent.hintTouch) {
                return;
            }
            if (uHintEnCoursChargement) {
                return;
            }
            if (uHintAffiche && !aConserverHintEnCours) {
                _stopHint(uHintAffiche);
            }
            _stopEnAttente();
        }
        function _getContenu(aContenu, aHint) {
            if (MethodesObjet_1.MethodesObjet.isFunction(aContenu)) {
                const lResult = aContenu(aHint);
                if (typeof lResult === 'string') {
                    return lResult;
                }
                uHintEnCoursChargement = aHint;
                return lResult.finally( () => {
                    setTimeout( () => {
                        if (aHint === uHintEnCoursChargement) {
                            uHintEnCoursChargement = null;
                        }
                    }
                    , 50);
                }
                );
            } else {
                return aContenu;
            }
        }
        function _retirerHintPileAttente(aHint) {
            const lIndice = uHintsEnAttente.indexOf(aHint);
            if (lIndice >= 0) {
                MethodesTableau_1.MethodesTableau.supprimerElement(uHintsEnAttente, lIndice);
            }
        }
        function _loopAnimateScroll(aHint, aId, aHauteurAScroller) {
            const lDuree = aHauteurAScroller * 1000 / 100;
            $(aId).delay(1000).animate({
                scrollTop: aHauteurAScroller
            }, {
                duration: lDuree,
                easing: 'linear',
                done() {
                    if (aHint.stopSurFinScroll) {
                        aHint.stopSurFinScroll();
                    }
                }
            }).delay(1000).animate({
                scrollTop: 0
            }, {
                duration: 300,
                done: function() {
                    _loopAnimateScroll(aHint, aId, aHauteurAScroller);
                }
            });
        }
        function _afficher(aContenu, aHint) {
            if (uHintEnCoursChargement) {
                return;
            }
            if (aHint.avecTestDisplay && aHint.elementDOM && !$(aHint.elementDOM).is(':visible')) {
                return;
            }
            if (_avecTitleDansEventHint(aHint)) {
                return;
            }
            aHint.pomiseAfficher = Promise.resolve().then( () => {
                return _getContenu(aContenu, aHint);
            }
            ).then( (aContenu) => {
                if (!aHint.actif || !aContenu || (aContenu === '')) {
                    aHint.timer = null;
                    aHint.actif = false;
                    return;
                }
                const lContenu = aContenu;
                _retirerHintPileAttente(aHint);
                _stopAll();
                uHintAffiche = aHint;
                uHintAffiche.contenu = lContenu;
                clearTimeout(uTimeoutFondu);
                aHint.estAffiche = true;
                aHint.timer = null;
                if (aHint.delaiFermeture > 0) {
                    aHint.timerFermeture = setTimeout( () => {
                        _stopHint(aHint);
                    }
                    , aHint.delaiFermeture);
                }
                let lConteneur = ObjetHtml_1.GHtml.getElement(uIdConteneur);
                if (!ObjetHtml_1.GHtml.elementExiste(lConteneur)) {
                    lConteneur = ObjetHtml_1.GHtml.htmlToDOM('<div id="' + uIdConteneur + '" class="ie-hint"></div>');
                    ObjetHtml_1.GHtml.insererElementDOM(ObjetHtml_1.GHtml.getElement((0,
                    AccessApp_1.getApp)().getIdConteneur()), lConteneur);
                }
                ObjetHtml_1.GHtml.setHtml(lConteneur, compose(lContenu, aHint));
                let lPositionEvent = {};
                if (!aHint.position && aHint.event && IE.estMobile) {
                    lPositionEvent = ObjetPosition_1.GPosition.getPositionEventJQuery(aHint.event);
                }
                const lPosition = Object.assign({
                    y: ObjetNavigateur_1.Navigateur.pointerY,
                    x: ObjetNavigateur_1.Navigateur.pointerX
                }, lPositionEvent, aHint.position)
                  , lDecalage = aHint.position ? {
                    x: 0,
                    y: 0
                } : {
                    x: 0,
                    y: 20
                };
                const lJScroll = $('#' + uIdScroll.escapeJQ())
                  , lHeightScroll = lJScroll.height()
                  , lHeightContenu = lJScroll.children().height()
                  , lAvecScroll = lHeightScroll < lHeightContenu;
                lJScroll.css('width', lJScroll.outerWidth());
                ObjetPosition_1.GPosition.placerFicheSource(uIdConteneur, lPosition.x, lPosition.x, lPosition.y, lPosition.y, false, lDecalage);
                $(lConteneur).addClass('visible');
                if (lAvecScroll) {
                    aHint.hintAvecScroll = true;
                    _loopAnimateScroll(aHint, '#' + uIdScroll.escapeJQ(), lHeightContenu - lHeightScroll);
                }
            }
            );
        }
        function compose(aContenu, aHint) {
            return (IE.jsx.str("div", {
                id: uIdScroll,
                tabindex: "-1",
                class: "ie-hint-cont",
                style: `max-height:${Math.min(aHint.maxHeight, ObjetNavigateur_1.Navigateur.ecranL)}px; max-width:${Math.min(aHint.maxWidth, ObjetNavigateur_1.Navigateur.ecranH)}px;`
            }, IE.jsx.str("div", null, aContenu)));
        }
        function _avecTitleDansEventHint(aHint) {
            var _a;
            if (!aHint || !aHint.event || !aHint.event.target || !aHint.elementDOM || aHint.event.target === aHint.elementDOM) {
                return false;
            }
            let lResult = false;
            const lDOMTarget = aHint.event.target;
            if ((_a = lDOMTarget === null || lDOMTarget === void 0 ? void 0 : lDOMTarget.hasAttribute) === null || _a === void 0 ? void 0 : _a.call(lDOMTarget, 'title')) {
                lResult = true;
            }
            if (!lResult) {
                $(lDOMTarget).parentsUntil(aHint.elementDOM).each( (aIndex, aElement) => {
                    var _a;
                    if (!lResult && ((_a = aElement.hasAttribute) === null || _a === void 0 ? void 0 : _a.call(aElement, 'title'))) {
                        lResult = true;
                    }
                }
                );
            }
            return lResult;
        }
    },
    fn: 'objethint.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireTraitementImage = void 0;
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const Invocateur_1 = require("Invocateur");
        const UtilitaireTraitementImage = {
            browserAutoRotate: false,
            fileToDataUrlPromise(aFile) {
                return new Promise( (aResolve, aReject) => {
                    if (!aFile) {
                        aReject();
                    }
                    const lReader = new FileReader();
                    lReader.onloadend = function(e) {
                        if (e.target.readyState === FileReader.DONE) {
                            aResolve(e.target.result);
                        }
                    }
                    ;
                    lReader.onerror = function() {
                        aReject();
                    }
                    ;
                    lReader.onabort = function() {
                        aReject();
                    }
                    ;
                    lReader.readAsDataURL(aFile);
                }
                );
            },
            loadImageDataUrlPromise(aDataUrl, aImage) {
                return new Promise( (aResolve, aReject) => {
                    const lImg = aImage || new Image();
                    lImg.onload = function() {
                        aResolve(lImg);
                    }
                    ;
                    lImg.onerror = function() {
                        aReject();
                    }
                    ;
                    lImg.src = aDataUrl;
                }
                );
            },
            fileToImgPromise(aFile, aImage) {
                return UtilitaireTraitementImage.fileToDataUrlPromise(aFile).then( (aDataUrl) => {
                    return UtilitaireTraitementImage.loadImageDataUrlPromise(aDataUrl, aImage);
                }
                ).then( (aImg) => {
                    let lOrientation = -2;
                    return Promise.resolve().then( () => {
                        if (UtilitaireTraitementImage.avecOrientationPossible(aFile)) {
                            return UtilitaireTraitementImage.getOrientationPromise(aFile).then( (aOrientation) => {
                                lOrientation = aOrientation;
                            }
                            , () => {}
                            );
                        }
                    }
                    ).then( () => {
                        return {
                            img: aImg,
                            orientation: lOrientation
                        };
                    }
                    );
                }
                );
            },
            getOrientationPromise(file) {
                return new Promise( (aResolve, aReject) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const view = new DataView(e.target.result);
                            if (view.getUint16(0, false) != 0xFFD8) {
                                return aResolve(-2);
                            }
                            const length = view.byteLength;
                            let offset = 2;
                            while (offset < length) {
                                if (view.getUint16(offset + 2, false) <= 8) {
                                    return aResolve(-1);
                                }
                                const marker = view.getUint16(offset, false);
                                offset += 2;
                                if (marker == 0xFFE1) {
                                    if (view.getUint32(offset += 2, false) != 0x45786966) {
                                        return aResolve(-1);
                                    }
                                    const little = view.getUint16(offset += 6, false) == 0x4949;
                                    offset += view.getUint32(offset + 4, little);
                                    const tags = view.getUint16(offset, little);
                                    offset += 2;
                                    for (let i = 0; i < tags; i++) {
                                        if (view.getUint16(offset + (i * 12), little) == 0x0112) {
                                            return aResolve(view.getUint16(offset + (i * 12) + 8, little));
                                        }
                                    }
                                } else if ((marker & 0xFF00) != 0xFF00) {
                                    break;
                                } else {
                                    offset += view.getUint16(offset, false);
                                }
                            }
                            return aResolve(-1);
                        } catch (e) {
                            aReject(e);
                        }
                    }
                    ;
                    reader.onerror = function(e) {
                        aReject(e);
                    }
                    ;
                    reader.readAsArrayBuffer(file);
                }
                );
            },
            avecOrientationPossible(aFile) {
                return !!(aFile && aFile.type === 'image/jpeg') && !this.browserAutoRotate;
            },
            resizeEtOrientationImgToCanvas(aParams) {
                const lParams = Object.assign({
                    img: null,
                    width: 0,
                    height: 0,
                    widthResize: 0,
                    heightResize: 0,
                    orientation: -1
                }, aParams);
                const lWidth = lParams.widthResize || lParams.width;
                const lHeight = lParams.heightResize || lParams.height;
                const lCanvasResult = document.createElement('canvas');
                const lCtxDest = lCanvasResult.getContext('2d');
                lCanvasResult.width = lWidth;
                lCanvasResult.height = lHeight;
                if (lParams.orientation > 0) {
                    const lCanvas = document.createElement('canvas');
                    const lCtx = lCanvas.getContext('2d');
                    lCanvas.width = lParams.width;
                    lCanvas.height = lParams.height;
                    lCtx.drawImage(lParams.img, 0, 0, lCanvas.width, lCanvas.height);
                    if (4 < lParams.orientation && lParams.orientation < 9) {
                        lCanvasResult.width = lHeight;
                        lCanvasResult.height = lWidth;
                    }
                    switch (lParams.orientation) {
                    case 2:
                        lCtxDest.transform(-1, 0, 0, 1, lWidth, 0);
                        break;
                    case 3:
                        lCtxDest.transform(-1, 0, 0, -1, lWidth, lHeight);
                        break;
                    case 4:
                        lCtxDest.transform(1, 0, 0, -1, 0, lHeight);
                        break;
                    case 5:
                        lCtxDest.transform(0, 1, 1, 0, 0, 0);
                        break;
                    case 6:
                        lCtxDest.transform(0, 1, -1, 0, lHeight, 0);
                        break;
                    case 7:
                        lCtxDest.transform(0, -1, -1, 0, lHeight, lWidth);
                        break;
                    case 8:
                        lCtxDest.transform(0, -1, 1, 0, 0, lWidth);
                        break;
                    default:
                        break;
                    }
                    lCtxDest.drawImage(lCanvas, 0, 0, lWidth, lHeight);
                } else {
                    lCtxDest.drawImage(lParams.img, 0, 0, lWidth, lHeight);
                }
                return lCanvasResult;
            },
            resizeImgToCanvas(aImg, aMaxWidth, aMaxHeight, aOrientation) {
                const lWidthOriginal = aImg.width;
                const lHeightOriginal = aImg.height;
                const lMAX_WIDTH = aMaxWidth || 1500;
                const lMAX_HEIGHT = aMaxHeight || 1500;
                let lWidth = lWidthOriginal;
                let lHeight = lHeightOriginal;
                if (lWidth > lHeight) {
                    if (lWidth > lMAX_WIDTH) {
                        lHeight *= lMAX_WIDTH / lWidth;
                        lWidth = lMAX_WIDTH;
                    }
                } else {
                    if (lHeight > lMAX_HEIGHT) {
                        lWidth *= lMAX_HEIGHT / lHeight;
                        lHeight = lMAX_HEIGHT;
                    }
                }
                let lCanvasResult = null;
                const lAvecResize = lHeightOriginal !== lHeight || lWidthOriginal !== lWidth;
                if (lAvecResize) {
                    lCanvasResult = UtilitaireTraitementImage.resizeEtOrientationImgToCanvas({
                        img: aImg,
                        width: lWidthOriginal,
                        height: lHeightOriginal,
                        widthResize: lWidth,
                        heightResize: lHeight,
                        orientation: aOrientation
                    });
                }
                return {
                    avecResize: lAvecResize,
                    canvas: lCanvasResult,
                    img: aImg,
                    width: lWidth,
                    height: lHeight,
                    widthOriginal: lWidthOriginal,
                    heightOriginal: lHeightOriginal
                };
            },
            canvasToBlobPromise(aCanvas, aType, aName, aCompression) {
                return new Promise( (aResolve) => {
                    aCanvas.toBlob( (aBlob) => {
                        aBlob.name = aName;
                        aResolve(aBlob);
                    }
                    , aType, aCompression);
                }
                );
            },
            resizeFilePromise(aFile, aMaxWidth, aMaxHeight, aCompression) {
                return UtilitaireTraitementImage.fileToImgPromise(aFile).then( (aParamsFileToPromise) => {
                    const lResult = UtilitaireTraitementImage.resizeImgToCanvas(aParamsFileToPromise.img, aMaxWidth, aMaxHeight, aParamsFileToPromise.orientation);
                    if (lResult.avecResize && lResult.canvas) {
                        return UtilitaireTraitementImage.canvasToBlobPromise(lResult.canvas, aFile.type, aFile.name, aCompression).then( (aBlob) => {
                            lResult.file = aBlob;
                            return lResult;
                        }
                        );
                    }
                    lResult.file = aFile;
                    return lResult;
                }
                ).catch( (e) => {
                    return null;
                }
                );
            },
            avecResizePossible(aFile) {
                return !!(aFile && aFile.type && ['image/jpeg', 'image/jpg', 'image/png', 'image/bmp', 'image/webp'].indexOf(aFile.type) >= 0);
            },
            async genererPdfAsync(aListeFichiers) {
                try {
                    await DeferLoadingScript_1.deferLoadingScript.loadAsync('jspdf');
                } catch (_a) {
                    throw {
                        erreurLib: true
                    };
                }
                const lLibJsPDF = await Promise.resolve().then( () => require('jspdf.min'));
                if (!lLibJsPDF) {
                    throw {
                        erreurLib: true
                    };
                }
                return Promise.resolve().then( () => {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                        delai: 100
                    });
                    const lPromises = [];
                    if (aListeFichiers) {
                        aListeFichiers.parcourir( (aFichier) => {
                            if (!aFichier.estResize && UtilitaireTraitementImage.avecOrientationPossible(aFichier.file)) {
                                lPromises.push(UtilitaireTraitementImage.fileToImgPromise(aFichier.file).then( (aParamsFileToPromise) => {
                                    if (aParamsFileToPromise.orientation >= 2) {
                                        const lCanvasResult = UtilitaireTraitementImage.resizeEtOrientationImgToCanvas({
                                            img: aParamsFileToPromise.img,
                                            width: aParamsFileToPromise.img.width,
                                            height: aParamsFileToPromise.img.height,
                                            orientation: aParamsFileToPromise.orientation
                                        });
                                        return UtilitaireTraitementImage.canvasToBlobPromise(lCanvasResult, aFichier.file.type, aFichier.file.name).then( (aBlob) => {
                                            aFichier.file = aBlob;
                                        }
                                        );
                                    }
                                }
                                ).catch( () => {
                                    return Promise.reject({
                                        nom: aFichier.Libelle
                                    });
                                }
                                ));
                            }
                        }
                        );
                    }
                    return Promise.all(lPromises);
                }
                ).then( () => {
                    return new Promise( (aResolve, aReject) => {
                        const lNbFichiers = aListeFichiers ? aListeFichiers.count() : 0;
                        if (aListeFichiers && lNbFichiers > 0) {
                            let lNb = 0;
                            const lFilesDataUrl = [];
                            aListeFichiers.parcourir( (aFichier, aIndex) => {
                                const lFichier = aFichier;
                                UtilitaireTraitementImage.fileToDataUrlPromise(lFichier.file).then(( (aIndex, aDataUrl) => {
                                    lNb += 1;
                                    lFilesDataUrl[aIndex] = {
                                        dataUrl: aDataUrl,
                                        fichier: aFichier,
                                        type: lFichier.file.type
                                    };
                                    if (lNb >= lNbFichiers) {
                                        aResolve(lFilesDataUrl);
                                    }
                                }
                                ).bind(null, aIndex), ( (aLibelle) => {
                                    aReject({
                                        nom: aLibelle
                                    });
                                }
                                ).bind(null, lFichier.Libelle));
                            }
                            );
                        } else {
                            aResolve(null);
                        }
                    }
                    );
                }
                ).then( (aFilesDataUrl) => {
                    if (aFilesDataUrl && aFilesDataUrl.length > 0) {
                        const lPDF = new lLibJsPDF.jsPDF();
                        const lPromisesErreursJsPDF = [];
                        aFilesDataUrl.forEach( (aFile) => {
                            try {
                                aFile.imageProp = lPDF.getImageProperties(aFile.dataUrl);
                            } catch (e) {
                                lPromisesErreursJsPDF.push(new Promise( (aResolve, aReject) => {
                                    let lTypePDF = '';
                                    switch (aFile.type) {
                                    case 'image/jpeg':
                                        lTypePDF = 'JPEG';
                                        break;
                                    case 'image/png':
                                        lTypePDF = 'PNG';
                                        break;
                                    default:
                                        aReject({
                                            nom: aFile.fichier.Libelle
                                        });
                                        return;
                                    }
                                    UtilitaireTraitementImage.loadImageDataUrlPromise(aFile.dataUrl).then(( (aFile, aTypePDF, aImage) => {
                                        aFile.imageProp = {
                                            width: aImage.width,
                                            height: aImage.height,
                                            fileType: aTypePDF
                                        };
                                        aResolve();
                                    }
                                    ).bind(null, aFile, lTypePDF), ( (aFile) => {
                                        return Promise.reject({
                                            nom: aFile.fichier.Libelle
                                        });
                                    }
                                    ).bind(null, aFile));
                                }
                                ));
                            }
                        }
                        );
                        return Promise.all(lPromisesErreursJsPDF).then( () => {
                            return aFilesDataUrl;
                        }
                        );
                    }
                }
                ).then( (aFilesDataUrl) => {
                    if (aFilesDataUrl && aFilesDataUrl.length > 0) {
                        return new Promise( (aResolve, aReject) => {
                            let lPDF = new lLibJsPDF.jsPDF();
                            aFilesDataUrl.every( (aFile, aIndex) => {
                                try {
                                    const lImageProp = aFile.imageProp;
                                    const lOrientation = lImageProp.width >= lImageProp.height ? 'l' : 'p';
                                    if (aIndex !== 0) {
                                        lPDF.addPage([lImageProp.width, lImageProp.height], lOrientation);
                                    } else {
                                        lPDF = new lLibJsPDF.jsPDF({
                                            format: [lImageProp.width, lImageProp.height],
                                            unit: 'px',
                                            orientation: lOrientation,
                                            compress: true
                                        });
                                    }
                                    lPDF.addImage(aFile.dataUrl, lImageProp.fileType, 0, 0, lImageProp.width, lImageProp.height, '', 'SLOW');
                                    return true;
                                } catch (e) {
                                    aReject({
                                        nom: aFile.fichier.Libelle
                                    });
                                    return false;
                                }
                            }
                            );
                            const lFile = lPDF.output('blob');
                            lFile.name = 'file.pdf';
                            aResolve({
                                file: lFile
                            });
                        }
                        );
                    }
                }
                ).finally( () => {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                }
                );
            },
            getTabMimePDFImage() {
                return ['image/jpeg', 'image/jpg', 'image/png', 'image/bmp', 'image/gif'];
            },
            estEnBase64(aURL) {
                var _a;
                return ((_a = aURL.match(/data:[a-zA-Z/]*;base64,/)) === null || _a === void 0 ? void 0 : _a.length) > 0;
            }
        };
        exports.UtilitaireTraitementImage = UtilitaireTraitementImage;
        function _browserAutoRotatesPromise() {
            return new Promise( (resolve, reject) => {
                const image = new Image();
                image.onload = function() {
                    resolve(image.naturalWidth === 1);
                }
                ;
                image.onerror = reject;
                image.src = 'data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z';
            }
            );
        }
        _browserAutoRotatesPromise().then( (aVal) => {
            UtilitaireTraitementImage.browserAutoRotate = !!aVal;
        }
        );
        if (!HTMLCanvasElement.prototype.toBlob) {
            Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {
                value: function(callback, type, quality) {
                    const canvas = this;
                    setTimeout( () => {
                        const binStr = atob(canvas.toDataURL(type, quality).split(',')[1])
                          , len = binStr.length
                          , arr = new Uint8Array(len);
                        for (let i = 0; i < len; i++) {
                            arr[i] = binStr.charCodeAt(i);
                        }
                        callback(new Blob([arr],{
                            type: type || 'image/png'
                        }));
                    }
                    );
                }
            });
        }
    },
    fn: 'utilitairetraitementimage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireLoaderImage = void 0;
        const UtilitaireTraitementImage_1 = require("UtilitaireTraitementImage");
        const GUID_1 = require("GUID");
        const c_pilesImages = {
            enCours: [],
            enAttente: [],
            nbMax: 2,
            timeoutEchec: 60 * 1000
        };
        let UtilitaireLoaderImage = {
            loadImage(aNodeImage, aUrl) {
                if (c_pilesImages.enCours.length >= c_pilesImages.nbMax) {
                    c_pilesImages.enAttente.push({
                        node: aNodeImage,
                        url: aUrl
                    });
                } else {
                    _loadImage(aNodeImage, aUrl);
                }
            }
        };
        exports.UtilitaireLoaderImage = UtilitaireLoaderImage;
        const uGenerateurGUID = new GUID_1.GUID.generateur();
        function _loadImage(aNodeImage, aUrl) {
            if (!aNodeImage || !document.body.contains(aNodeImage)) {
                _depiler();
                return;
            }
            const lId = uGenerateurGUID.get();
            c_pilesImages.enCours.push(lId);
            return Promise.race([UtilitaireTraitementImage_1.UtilitaireTraitementImage.loadImageDataUrlPromise(aUrl, aNodeImage).catch( () => {}
            ), new Promise( (aResolve) => {
                setTimeout( () => {
                    aResolve();
                }
                , c_pilesImages.timeoutEchec);
            }
            )]).then( () => {
                const lIndex = c_pilesImages.enCours.indexOf(lId);
                if (lIndex >= 0) {
                    c_pilesImages.enCours.splice(lIndex, 1);
                }
                _depiler();
            }
            );
        }
        function _depiler() {
            if (c_pilesImages.enAttente.length > 0 && c_pilesImages.enCours.length < c_pilesImages.nbMax) {
                const lAttente = c_pilesImages.enAttente.shift();
                _loadImage(lAttente.node, lAttente.url);
            }
        }
    },
    fn: 'utilitaireloaderimage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const UtilitaireLoaderImage_1 = require("UtilitaireLoaderImage");
        let uObserverImgSrc = null;
        const cDataImageBlank = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';
        function addOnErreurNode(aNode) {
            $(aNode).on('error', () => {
                var _a, _b;
                if (aNode.classList.contains('img-portrait')) {
                    aNode.setAttribute('src', (_a = IEHtml.outils.getObject('img-portrait')) === null || _a === void 0 ? void 0 : _a.srcPortrait);
                    aNode.classList.add('img-portrait-empty');
                }
                (_b = IEHtml.outils.getObject('ie-imgviewer')) === null || _b === void 0 ? void 0 : _b.detachViewer(aNode);
            }
            );
        }
        IEHtml.addAttribut('ie-load-src', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            var _a;
            const lUrl = aAttributValue || '';
            if (lUrl) {
                if ((_a = lUrl.startsWith) === null || _a === void 0 ? void 0 : _a.call(lUrl, 'data:')) {
                    aContexteCourant.node.setAttribute('src', lUrl);
                    aOutils.addCommentaireDebug(aContexteCourant.node, `ie-load-src="data:...base64.."`);
                    return true;
                }
                aContexteCourant.node.setAttribute('data-src', lUrl);
                if (!aContexteCourant.node.getAttribute('src')) {
                    aContexteCourant.node.setAttribute('src', cDataImageBlank);
                }
                aOutils.surInjectionHtml(aContexteCourant, () => {
                    if (uObserverImgSrc) {
                        uObserverImgSrc.observe(aContexteCourant.node);
                    } else {
                        addOnErreurNode(aContexteCourant.node);
                        UtilitaireLoaderImage_1.UtilitaireLoaderImage.loadImage(aContexteCourant.node, lUrl);
                    }
                }
                );
            }
            aOutils.addCommentaireDebug(aContexteCourant.node, `ie-load-src="${lUrl}"`);
            return true;
        }
        );
        IEHtml.outils.addObject('ie-load-src', {
            imgWithoutSrc(aNode) {
                return aNode && aNode.hasAttribute && !aNode.hasAttribute('src') && !aNode.hasAttribute('ie-load-src') && !aNode.hasAttribute('data-src');
            },
            imgWithoutLoadSrc(aNode) {
                return aNode && aNode.hasAttribute && !aNode.hasAttribute('ie-load-src') && !aNode.hasAttribute('data-src');
            }
        });
        try {
            uObserverImgSrc = new IntersectionObserver( (aObservables) => {
                aObservables.forEach( (aObservable) => {
                    if (aObservable.intersectionRatio > 0 || aObservable.isIntersecting) {
                        const lNode = aObservable.target;
                        if (lNode) {
                            const lUrl = lNode.dataset.src;
                            addOnErreurNode(lNode);
                            UtilitaireLoaderImage_1.UtilitaireLoaderImage.loadImage(lNode, lUrl);
                            uObserverImgSrc.unobserve(lNode);
                        }
                    }
                }
                );
            }
            );
        } catch (e) {
            uObserverImgSrc = null;
        }
    },
    fn: 'iehtml.load.src.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlImgViewer = void 0;
        require("IEHtml.ImgViewer.css");
        exports.StylesIEHtmlImgViewer = {
            ieImgviewer: 'ie-imgviewer',
            ieImgviewerPopup: 'ie-imgviewer-popup',
            active: 'active',
            loading: 'loading',
            zoomistContainer: 'zoomist-container',
            zoomistWrapper: 'zoomist-wrapper',
            zoomistImage: 'zoomist-image',
            conteneurImg: 'conteneur-img',
            VoileDeFondViewer: 'VoileDeFondViewer',
            BandeauViewer: 'BandeauViewer',
            TitreImage: 'TitreImage',
            btnCarrViewer: 'btn-carr-viewer',
            prec: 'prec',
            suiv: 'suiv',
            btnZoomViewer: 'btn-zoom-viewer',
            zoomIn: 'zoom-in',
            zoomOut: 'zoom-out',
            btnFermer: 'btn-fermer'
        };
    },
    fn: 'iehtml.imgviewer.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("IEHtml.ImgViewer.css");
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ToucheClavier_1 = require("ToucheClavier");
        const GUID_1 = require("GUID");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const jsx_1 = require("jsx");
        const ObjetSupport_1 = require("ObjetSupport");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const uSingleton_IdViewer = `id-imgviewer-${GUID_1.GUID.getId()}`;
        let uSingleton_ViewerIsVisible = false;
        const uViewerSurZoom = {
            estZoom: false,
            styleIdViewer: {},
            styleIdArticle: {},
            styleIdViewerImg: {}
        };
        const uIdBtnZoomIn = 'btnZoomIn' + GUID_1.GUID.getId();
        const uIdBtnZoomOut = 'btnZoomOut' + GUID_1.GUID.getId();
        const uIdBtnNext = 'btnNext' + GUID_1.GUID.getId();
        const uIdBtnPrev = 'btnPrev' + GUID_1.GUID.getId();
        const uIdTitre = 'zoneTitre' + GUID_1.GUID.getId();
        const uIdBtnFermer = 'btnFermer' + GUID_1.GUID.getId();
        let uIdNavGauche;
        let uIdNavDroite;
        let lWidthDefaut;
        let lHeightDefaut;
        let uState;
        let uFocusPrecedent = null;
        IEHtml.addAttribut('ie-imgviewer', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            var _a, _b, _c, _d, _e, _f;
            if (((_b = (_a = aContexteCourant.node).hasAttribute) === null || _b === void 0 ? void 0 : _b.call(_a, 'src')) && ((_d = (_c = aContexteCourant.node).getAttribute) === null || _d === void 0 ? void 0 : _d.call(_c, 'src')) === ((_e = IEHtml.outils.getObject('img-portrait')) === null || _e === void 0 ? void 0 : _e.srcPortrait)) {
                aOutils.addCommentaireDebug(aContexteCourant.node, `ie-imgviewer annul sur portrait`);
                return true;
            }
            if (aNodeName !== 'img') {
                return true;
            }
            if ((_f = aOutils.getObject('ie-load-src')) === null || _f === void 0 ? void 0 : _f.imgWithoutSrc(aContexteCourant.node)) {
                aOutils.addCommentaireDebug(aContexteCourant.node, `!! ie-imgviewer ignor sans src !!`);
                return true;
            }
            $(aContexteCourant.node).addClass('ie-imgviewer');
            if (!aContexteCourant.node.hasAttribute('tabindex')) {
                aContexteCourant.node.setAttribute('tabindex', '0');
            }
            $(aContexteCourant.node).eventValidation( (aEvent) => {
                if (!aContexteCourant.node.classList.contains('ie-imgviewer')) {
                    return;
                }
                uFocusPrecedent = document.activeElement;
                _ouvrirViewer(aContexteCourant.node, aEvent, true);
                if (ObjetSupport_1.Support.supportEventOnPopState) {
                    uState = MethodesObjet_1.MethodesObjet.dupliquer(window.history.state);
                    window.history.pushState({
                        popStateViewer: true
                    }, '');
                }
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, `ie-imgviewer`);
            return true;
        }
        );
        IEHtml.outils.addObject('ie-imgviewer', {
            detachViewer: detachViewer
        });
        function detachViewer(aNode) {
            if (aNode && aNode.classList && aNode.classList.contains('ie-imgviewer')) {
                aNode.classList.remove('ie-imgviewer');
                aNode.removeAttribute('tabindex');
                $(aNode).off('.eventValidation');
            }
        }
        async function _ouvrirViewer(aNode, aEvent, aAvecAnimationOuverture) {
            var _a;
            lWidthDefaut = 0;
            lHeightDefaut = 0;
            const lUrl = _getUrlImg(aNode);
            if (lUrl) {
                if (aEvent) {
                    aEvent.stopPropagation();
                }
                _fermer();
                let lIndicePrec = -1;
                let lIndiceSuiv = -1;
                let lJImgsNav;
                const lNodeDiapos = aNode.closest('.ie-imgviewer-container');
                if (lNodeDiapos) {
                    lJImgsNav = $(lNodeDiapos).find('img.ie-imgviewer');
                    if (lJImgsNav.length > 1) {
                        const lIndexImageCourante = lJImgsNav.index(aNode);
                        lIndicePrec = lIndexImageCourante === 0 ? lJImgsNav.length - 1 : lIndexImageCourante - 1;
                        lIndiceSuiv = lIndexImageCourante >= lJImgsNav.length - 1 ? 0 : lIndexImageCourante + 1;
                        if (!_getUrlImg(lJImgsNav.get(lIndicePrec))) {
                            lIndicePrec = -1;
                        }
                        if (!_getUrlImg(lJImgsNav.get(lIndiceSuiv))) {
                            lIndiceSuiv = -1;
                        }
                    }
                }
                uSingleton_ViewerIsVisible = true;
                const lControleur = {
                    nodeFocus(aNextTab) {
                        $(this.node).on('focus', () => {
                            const lJQBandeau = $('.BandeauViewer >');
                            ObjetHtml_1.GHtml.setFocus(aNextTab ? lJQBandeau.first().get(0) : lJQBandeau.last().get(0));
                        }
                        );
                    },
                    getNode() {
                        $(this.node).on({
                            'destroyed': () => {
                                if (uIdNavGauche) {
                                    Invocateur_1.Invocateur.desabonner([uIdNavGauche]);
                                }
                                if (uIdNavDroite) {
                                    Invocateur_1.Invocateur.desabonner([uIdNavDroite]);
                                }
                            }
                        });
                        if (!IE.estMobile) {
                            $(this.node).find('img').on({
                                'ie-doubletap': () => {
                                    if (!uViewerSurZoom.estZoom) {
                                        _surEntreeDansModeZoom();
                                    } else {
                                        _surSortieDuModeZoom();
                                    }
                                    IEHtml.refresh();
                                }
                            });
                        }
                        $(this.node).find('>.VoileDeFondViewer').on('click', (aEvent) => {
                            if (!IE.estMobile || (!uViewerSurZoom.estZoom && !(aEvent.pointerType !== 'touch' && (lIndicePrec >= 0 || lIndiceSuiv >= 0)))) {
                                _fermerTransition();
                            }
                        }
                        );
                        if (lIndicePrec >= 0) {
                            if (uIdNavGauche) {
                                Invocateur_1.Invocateur.desabonner([uIdNavGauche]);
                            }
                            uIdNavGauche = Invocateur_1.Invocateur.abonner(ObjetNavigateur_1.Navigateur.getEventInvocateur('keyup'), (aEvent) => {
                                if (!uViewerSurZoom.estZoom && [ToucheClavier_1.ToucheClavier.FlecheGauche].includes(aEvent.which)) {
                                    _ouvrirViewer(lJImgsNav.get(lIndicePrec));
                                    ObjetHtml_1.GHtml.setFocus(aEvent.target.id);
                                }
                            }
                            );
                        }
                        if (lIndiceSuiv >= 0) {
                            if (uIdNavDroite) {
                                Invocateur_1.Invocateur.desabonner([uIdNavDroite]);
                            }
                            uIdNavDroite = Invocateur_1.Invocateur.abonner(ObjetNavigateur_1.Navigateur.getEventInvocateur('keyup'), (aEvent) => {
                                if (!uViewerSurZoom.estZoom && [ToucheClavier_1.ToucheClavier.FlecheDroite].includes(aEvent.which)) {
                                    _ouvrirViewer(lJImgsNav.get(lIndiceSuiv));
                                    ObjetHtml_1.GHtml.setFocus(aEvent.target.id);
                                }
                            }
                            );
                        }
                    },
                    nodeImg() {
                        $(this.node).on('load', function() {
                            this.classList.remove('loading');
                            const lNatHeight = this.naturalHeight;
                            const lNatWidth = this.naturalWidth;
                            const lPourcentEcran = 0.9;
                            let lRatio = 0;
                            const lClientL = ObjetNavigateur_1.Navigateur.clientL - (lIndicePrec >= 0 || lIndiceSuiv >= 0 ? 35 * 2 : 0);
                            const lRatioImage = lNatHeight / lNatWidth;
                            const lRatioEcran = ObjetNavigateur_1.Navigateur.clientH / lClientL;
                            if (lRatioEcran > lRatioImage) {
                                lRatio = lClientL * lPourcentEcran / lNatWidth;
                            } else {
                                lRatio = ObjetNavigateur_1.Navigateur.clientH * lPourcentEcran / lNatHeight;
                            }
                            lRatio = Math.min(lRatio, 2);
                            lHeightDefaut = lNatHeight * lRatio;
                            lWidthDefaut = lNatWidth * lRatio;
                            $(this).css({
                                height: lHeightDefaut,
                                width: lWidthDefaut
                            });
                            if (IE.estMobile) {
                                _surEntreeDansModeZoom();
                            }
                        });
                    },
                    avecBtnZoom() {
                        return !IE.estMobile;
                    },
                    btnFermer: {
                        event() {
                            _fermerTransition();
                        },
                        getTitle() {
                            return ObjetTraduction_1.GTraductions.getValeur('Fermer');
                        }
                    },
                    btnNav: {
                        event(aIndiceNode, aEvent) {
                            _ouvrirViewer(lJImgsNav.get(aIndiceNode), aEvent);
                            ObjetHtml_1.GHtml.setFocus(aEvent.target.id);
                        }
                    },
                    btnZoom: {
                        event(aEstZoomIn) {
                            _surActionZoom(aEstZoomIn);
                        },
                        getDisabled(aEstZoomIn) {
                            const lJImage = $('#' + uSingleton_IdViewer + ' img');
                            const lWidth = lJImage.width();
                            const lHeight = lJImage.height();
                            if (!lWidth || !lWidthDefaut) {
                                return !aEstZoomIn;
                            }
                            return aEstZoomIn ? Math.round10(lWidth, -1) >= Math.round10(lWidthDefaut * Math.pow(1.5, 4), -1) || Math.round10(lHeight, -1) >= Math.round10(lHeightDefaut * Math.pow(1.5, 4), -1) : !uViewerSurZoom.estZoom || Math.round10(lWidth, -1) <= Math.round10(lWidthDefaut, -1) || Math.round10(lHeight, -1) <= Math.round10(lHeightDefaut, -1);
                        }
                    },
                    dragImg() {
                        let lScrollLeftDepart = 0;
                        let lScrollTopDepart = 0;
                        return {
                            start() {
                                if (!IE.estMobile && uViewerSurZoom.estZoom) {
                                    const lJImage = $('#' + uSingleton_IdViewer + ' img');
                                    lJImage.css({
                                        cursor: 'grabbing'
                                    });
                                    const lScroll = $('#' + uSingleton_IdViewer).get(0);
                                    lScrollLeftDepart = lScroll.scrollLeft;
                                    lScrollTopDepart = lScroll.scrollTop;
                                }
                            },
                            drag(aParamsDrag) {
                                if (!IE.estMobile && uViewerSurZoom.estZoom) {
                                    const lScroll = $('#' + uSingleton_IdViewer).get(0);
                                    lScroll.scrollLeft = lScrollLeftDepart - aParamsDrag.offset.x;
                                    lScroll.scrollTop = lScrollTopDepart - aParamsDrag.offset.y;
                                }
                            },
                            stop() {
                                if (!IE.estMobile && uViewerSurZoom.estZoom) {
                                    const lJImage = $('#' + uSingleton_IdViewer + ' img');
                                    lJImage.css({
                                        cursor: 'grab'
                                    });
                                }
                            }
                        };
                    }
                };
                const lLibelleImage = (_a = aNode.getAttribute('data-libelle')) !== null && _a !== void 0 ? _a : '';
                const lHtmlImg = IE.jsx.str("img", {
                    src: lUrl,
                    class: ['AvecMenuContextuel', 'loading'],
                    alt: ObjetTraduction_1.GTraductions.getValeur('Visionneuse.altImage'),
                    "aria-labelledby": uIdTitre,
                    "ie-node": "nodeImg",
                    "ie-draggable": !IE.estMobile ? 'dragImg' : false
                });
                const lHtmlConteneurImage = IE.estMobile ? IE.jsx.str("div", {
                    class: "zoomist-container"
                }, IE.jsx.str("div", {
                    class: "zoomist-wrapper"
                }, IE.jsx.str("div", {
                    class: "conteneur-img zoomist-image"
                }, lHtmlImg))) : IE.jsx.str("div", {
                    class: "conteneur-img"
                }, lHtmlImg);
                IEHtml.injectHTMLParams({
                    element: IEZoneFenetre_1.ZoneFenetre.getElementZoneFenetre(),
                    html: IE.jsx.str("div", {
                        id: uSingleton_IdViewer,
                        class: ['ie-imgviewer-popup', aAvecAnimationOuverture ? '' : 'active'],
                        "ie-node": "getNode",
                        role: "dialog",
                        "aria-modal": "true"
                    }, IE.jsx.str("div", {
                        class: "sr-only",
                        tabindex: "0",
                        "aria-hidden": "true",
                        "ie-node": "nodeFocus(false)"
                    }), IE.jsx.str("div", {
                        class: "VoileDeFondViewer",
                        "aria-hidden": "true"
                    }), IE.jsx.str("div", {
                        class: "BandeauViewer"
                    }, IE.jsx.str("ie-btnicon", {
                        id: uIdBtnZoomIn,
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnZoom', [true]),
                        "ie-if": "avecBtnZoom",
                        class: "icon_zoom_in btn-zoom-viewer zoom-in bt-activable bt-large",
                        title: ObjetTraduction_1.GTraductions.getValeur('Agrandir')
                    }), IE.jsx.str("ie-btnicon", {
                        id: uIdBtnZoomOut,
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnZoom', [false]),
                        "ie-if": "avecBtnZoom",
                        class: "icon_zoom_out btn-zoom-viewer zoom-out bt-activable bt-large",
                        title: ObjetTraduction_1.GTraductions.getValeur('Reduire')
                    }), lIndicePrec >= 0 ? IE.jsx.str("ie-btnicon", {
                        id: uIdBtnPrev,
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnNav', [lIndicePrec]),
                        class: "icon_angle_left btn-carr-viewer prec bt-activable bt-large",
                        title: ObjetTraduction_1.GTraductions.getValeur('Precedent'),
                        tabindex: "0"
                    }) : '', IE.jsx.str("div", {
                        id: uIdTitre,
                        class: "TitreImage",
                        "ie-ellipsis": true,
                        tabindex: "0"
                    }, lLibelleImage), lIndiceSuiv >= 0 ? IE.jsx.str("ie-btnicon", {
                        id: uIdBtnNext,
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnNav', [lIndiceSuiv]),
                        class: "icon_angle_right btn-carr-viewer suiv bt-activable bt-large",
                        title: ObjetTraduction_1.GTraductions.getValeur('Suivant'),
                        tabindex: "0"
                    }) : '', IE.jsx.str("ie-btnicon", {
                        id: uIdBtnFermer,
                        "ie-model": "btnFermer",
                        class: "icon_fermeture_widget btn-fermer bt-activable bt-large"
                    })), lHtmlConteneurImage, IE.jsx.str("div", {
                        class: "sr-only",
                        tabindex: "0",
                        "aria-hidden": "true",
                        "ie-node": "nodeFocus(true)"
                    })),
                    controleur: lControleur
                });
                if (aAvecAnimationOuverture) {
                    const lElement = ObjetHtml_1.GHtml.getElement(uSingleton_IdViewer);
                    lElement.offsetWidth;
                    lElement.classList.add('active');
                }
                if (IE.estMobile) {
                    try {
                        await DeferLoadingScript_1.deferLoadingScript.loadAsync('zoomist');
                        const Zoomist = await Promise.resolve().then( () => require('zoomist.umd'));
                        new Zoomist('.zoomist-container',{
                            maxScale: 8,
                            minScale: 1
                        });
                    } catch (e) {}
                }
                if (!IE.estMobile) {
                    ObjetHtml_1.GHtml.setFocus(uIdTitre);
                } else {
                    _surEntreeDansModeZoom();
                }
            }
        }
        function _getUrlImg(aNode) {
            if (aNode && aNode.getAttribute) {
                let lStrUrl = aNode.getAttribute('src') || aNode.getAttribute('data-src');
                if (lStrUrl) {
                    try {
                        let lUrl = new URL(lStrUrl,location);
                        lUrl.searchParams.delete('miniature');
                        return lUrl.toString();
                    } catch (e) {
                        return lStrUrl;
                    }
                }
            }
        }
        function _surEntreeDansModeZoom() {
            let lStyle = $('#' + uSingleton_IdViewer).get(0).style;
            uViewerSurZoom.styleIdViewer = {
                overflow: lStyle.overflow,
                display: lStyle.display
            };
            lStyle = $('#' + uSingleton_IdViewer + ' .conteneur-img').get(0).style;
            uViewerSurZoom.styleIdArticle = {
                'min-height': lStyle.minHeight,
                'min-width': lStyle.minWidth
            };
            lStyle = $('#' + uSingleton_IdViewer + ' img').get(0).style;
            uViewerSurZoom.styleIdViewerImg = {
                width: lStyle.width,
                height: lStyle.height,
                'max-width': lStyle.maxWidth,
                position: lStyle.position,
                margin: lStyle.margin,
                cursor: lStyle.cursor
            };
            const lRatioZoom = IE.estMobile ? 1.15 : 1.5;
            const lWidthStart = lWidthDefaut * lRatioZoom;
            const lHeightStart = lHeightDefaut * lRatioZoom;
            $('#' + uSingleton_IdViewer).css({
                overflow: 'scroll',
                display: 'inline-block'
            });
            $('#' + uSingleton_IdViewer + ' .conteneur-img').css({
                'min-height': '100%',
                'min-width': '100%'
            });
            $('#' + uSingleton_IdViewer + ' img').css({
                width: lWidthStart + 'px',
                height: lHeightStart + 'px',
                'max-width': 'none',
                position: 'relative',
                margin: 'auto',
                cursor: 'grab'
            });
            $('#' + uSingleton_IdViewer).get(0).scrollLeft = (lWidthStart - ObjetNavigateur_1.Navigateur.clientL) / 2;
            $('#' + uSingleton_IdViewer).get(0).scrollTop = (lHeightStart - ObjetNavigateur_1.Navigateur.clientH) / 2;
            uViewerSurZoom.estZoom = true;
        }
        function _surSortieDuModeZoom() {
            if (IE.estMobile) {
                _fermerTransition();
            } else {
                $('#' + uSingleton_IdViewer).css(uViewerSurZoom.styleIdViewer);
                $('#' + uSingleton_IdViewer + ' .conteneur-img').css(uViewerSurZoom.styleIdArticle);
                $('#' + uSingleton_IdViewer + ' img').css(uViewerSurZoom.styleIdViewerImg);
                $('#' + uSingleton_IdViewer + ' > .VoileDeFondViewer').show();
                uViewerSurZoom.estZoom = false;
            }
        }
        function _fermer() {
            if (uSingleton_ViewerIsVisible) {
                uSingleton_ViewerIsVisible = false;
                uViewerSurZoom.estZoom = false;
                $(`#${uSingleton_IdViewer}`).remove();
            }
            $(window).off('popstate.imgviewer');
            if (uState) {
                window.history.replaceState(uState, '');
            }
        }
        function _fermerTransition() {
            if (uSingleton_ViewerIsVisible) {
                $(`#${uSingleton_IdViewer}`).removeClass('active').on('transitionend', () => {
                    _fermer();
                    if ((uFocusPrecedent === null || uFocusPrecedent === void 0 ? void 0 : uFocusPrecedent.focus) && $(uFocusPrecedent).length === 1) {
                        uFocusPrecedent.focus();
                        uFocusPrecedent = null;
                    }
                }
                );
            }
        }
        function _surActionZoom(aEstZoomIn) {
            const lJImage = $('#' + uSingleton_IdViewer + ' img');
            const lWidth = lJImage.width();
            const lHeight = lJImage.height();
            const lScroll = $('#' + uSingleton_IdViewer).get(0);
            let lNewWidth = 0;
            let lNewHeight = 0;
            if (aEstZoomIn) {
                if (uViewerSurZoom.estZoom) {
                    lNewWidth = lWidth * 1.5;
                    lNewHeight = lHeight * 1.5;
                    lJImage.width(lNewWidth);
                    lJImage.height(lNewHeight);
                    lScroll.scrollLeft += (lNewWidth - lWidth) / 2;
                    lScroll.scrollTop += (lNewHeight - lHeight) / 2;
                } else {
                    _surEntreeDansModeZoom();
                }
            } else {
                lNewWidth = lWidth / 1.5;
                lNewHeight = lHeight / 1.5;
                if (Math.round10(lNewWidth, -1) === Math.round10(lWidthDefaut, -1) && Math.round10(lNewHeight, -1) === Math.round10(lHeightDefaut, -1)) {
                    _surSortieDuModeZoom();
                } else {
                    lJImage.width(lNewWidth);
                    lJImage.height(lNewHeight);
                    lScroll.scrollLeft += (lNewWidth - lWidth) / 2;
                    lScroll.scrollTop += (lNewHeight - lHeight) / 2;
                }
            }
        }
        $(document).ready( () => {
            $(document).on('keydown.imgviewer', (aEvent) => {
                if (uSingleton_ViewerIsVisible) {
                    if ([ToucheClavier_1.ToucheClavier.Espace, ToucheClavier_1.ToucheClavier.RetourChariot].includes(aEvent.which)) {
                        if (![uIdBtnZoomIn, uIdBtnZoomOut, uIdBtnNext, uIdBtnPrev].includes(aEvent.target.id)) {
                            _fermerTransition();
                        }
                    }
                    if ([ToucheClavier_1.ToucheClavier.Echap].includes(aEvent.which)) {
                        _fermerTransition();
                    }
                }
            }
            );
            $(window).on('scroll.imgviewer resize.imgviewer', () => {
                if (!IE.estMobile && !uViewerSurZoom.estZoom) {
                    _fermerTransition();
                }
            }
            );
        }
        );
        $(window).on('popstate.imgviewer', (event) => {
            event.preventDefault();
            _fermerTransition();
        }
        );
        Invocateur_1.Invocateur.abonner('surAffichageFenetre', () => {
            _fermerTransition();
        }
        );
        Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.fermerFenetres, () => {
            _fermerTransition();
        }
        );
    },
    fn: 'iehtml.imgviewer.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml_1 = require("IEHtml");
        IEHtml_1.default.addAttribut('ie-autoresize', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            if (aNodeName === 'ie-textareamax') {
                return true;
            }
            if (aNodeName !== 'textarea') {
                return true;
            }
            let lEstTextAreaMaxWrapper = false;
            let lJNode = $(aContexteCourant.node);
            let lInitBesoinObserveur = true;
            const lCalcul = function() {
                const lEstVisible = aContexteCourant.node.scrollHeight > 0;
                if (!lEstVisible) {
                    if (lInitBesoinObserveur) {
                        lInitBesoinObserveur = false;
                        let lObserver;
                        try {
                            lObserver = new IntersectionObserver( (aObservables) => {
                                if (aObservables[0] && (aObservables[0].intersectionRatio > 0 || aObservables[0].isIntersecting)) {
                                    lObserver.disconnect();
                                    lCalcul();
                                }
                            }
                            );
                            lObserver.observe(aContexteCourant.node);
                        } catch (e) {
                            lObserver = null;
                        }
                    }
                    return;
                }
                lInitBesoinObserveur = false;
                aContexteCourant.node.style.height = '5px';
                const lComputedStyle = global.getComputedStyle(aContexteCourant.node);
                let lTaille = Math.ceil(aContexteCourant.node.scrollHeight + parseFloat(lComputedStyle.getPropertyValue('border-top-width')) + parseFloat(lComputedStyle.getPropertyValue('border-bottom-width')));
                aContexteCourant.node.style.height = lTaille + 'px';
                if (lEstTextAreaMaxWrapper) {
                    const lNodeWrapper = aContexteCourant.node.closest('.textareamax-wrapper');
                    if (!lNodeWrapper) {
                        return;
                    }
                    const lHeightParent = $(lNodeWrapper).height();
                    if (lTaille > lHeightParent) {
                        aContexteCourant.node.style.height = lHeightParent + 'px';
                    } else if (lTaille < lHeightParent) {
                        aContexteCourant.node.style.height = '100%';
                    }
                }
            };
            let lVal = lJNode.val();
            let lValPlaceHolder = lJNode.attr('placeholder');
            lJNode.on('input', () => {
                const lNewVal = lJNode.val();
                if (lVal !== lNewVal) {
                    lVal = lNewVal;
                    lCalcul();
                }
            }
            );
            aOutils.abonnerRefresh( () => {
                const lNewVal = lJNode.val();
                const lNewValPlaceHolder = lJNode.attr('placeholder');
                if (lVal !== lNewVal || lValPlaceHolder !== lNewValPlaceHolder) {
                    lVal = lNewVal;
                    lValPlaceHolder = lNewValPlaceHolder;
                    lCalcul();
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.surInjectionHtml(aContexteCourant, () => {
                lEstTextAreaMaxWrapper = lJNode.hasClass('textareamax') && !!aContexteCourant.node.closest('.textareamax-wrapper');
                lCalcul();
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-autoresize');
        }
        );
    },
    fn: 'iehtml.autoresize.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const ToucheClavier_1 = require("ToucheClavier");
        IEHtml.addClass('collapsible', (aContexteCourant) => {
            _refresh(aContexteCourant);
            const lObserver = new MutationObserver( (aMutations) => {
                if (aMutations[0] && aMutations[0].type === 'childList') {
                    _refresh(aContexteCourant);
                }
            }
            );
            lObserver.observe(aContexteCourant.node, {
                childList: true
            });
            return true;
        }
        );
        function _refresh(aContexteCourant) {
            const lJNode = $(aContexteCourant.node);
            const lJHeaders = lJNode.children('li').children('.collapsible-header:not([data-iecollapsibleinit])');
            if (lJHeaders.length === 0) {
                return;
            }
            lJHeaders.attr({
                'tabindex': 0,
                'data-iecollapsibleinit': true
            });
            const lEstAccordeon = !aContexteCourant.node.classList.contains('collapsible-not-accordeon');
            const lJActiveBodies = lJNode.children('li.active').children('.collapsible-body');
            if (lEstAccordeon) {
                lJActiveBodies.first().css('display', 'block');
            } else {
                lJActiveBodies.css('display', 'block');
            }
            lJHeaders.each( (aIndex, aElement) => {
                $(aElement).attr('aria-expanded', $(aElement).parent().hasClass('active') ? 'true' : 'false');
            }
            );
            const lAction = (aEvent) => {
                const $header = $(aEvent.target).closest('.collapsible-header');
                if (aEvent.target && $header.length) {
                    const $collapsible = $header.closest('.collapsible');
                    if ($collapsible[0] === aContexteCourant.node) {
                        const $collapsibleLi = $header.closest('li');
                        const $collapsibleLis = $collapsible.children('li');
                        const isActive = $collapsibleLi[0].classList.contains('active');
                        const index = $collapsibleLis.index($collapsibleLi);
                        if (isActive) {
                            close(index);
                        } else {
                            open(index);
                        }
                    }
                }
            }
            ;
            lJHeaders.off('click.collapsible keydown.collapsible').on({
                'click.collapsible'(aEvent) {
                    lAction(aEvent);
                },
                'keydown.collapsible'(aEvent) {
                    if ([ToucheClavier_1.ToucheClavier.Espace, ToucheClavier_1.ToucheClavier.RetourChariot, ToucheClavier_1.ToucheClavier.Echap].includes(aEvent.which)) {
                        lAction(aEvent);
                    }
                }
            });
            function open(index) {
                const $collapsibleLi = lJNode.children('li').eq(index);
                if ($collapsibleLi.length && !$collapsibleLi[0].classList.contains('active')) {
                    if (lEstAccordeon) {
                        const $collapsibleLis = lJNode.children('li');
                        const $activeLis = lJNode.children('li.active');
                        $activeLis.each( (aIndex, aEl) => {
                            const index = $collapsibleLis.index($(aEl));
                            close(index);
                        }
                        );
                    }
                    $collapsibleLi[0].classList.add('active');
                    const lJBody = $collapsibleLi.children('.collapsible-body');
                    $collapsibleLi.children('.collapsible-header').attr('aria-expanded', 'true');
                    lJBody.css({
                        display: 'block',
                        height: 0,
                        overflow: 'hidden'
                    });
                    const lHeight = lJBody[0].scrollHeight;
                    const lPTop = lJBody.css('padding-top');
                    const lPBottom = lJBody.css('padding-bottom');
                    lJBody.css({
                        paddingTop: 0,
                        paddingBottom: 0
                    });
                    lJBody.css({
                        height: lHeight + 'px',
                        paddingTop: lPTop,
                        paddingBottom: lPBottom
                    }).off('transitionend.collapsible').one('transitionend.collapsible', () => {
                        lJBody.css({
                            height: '',
                            paddingTop: '',
                            paddingBottom: '',
                            overflow: ''
                        });
                    }
                    );
                }
            }
            function close(index) {
                const $collapsibleLi = lJNode.children('li').eq(index);
                if ($collapsibleLi.length && $collapsibleLi[0].classList.contains('active')) {
                    $collapsibleLi[0].classList.remove('active');
                    const lJBody = $collapsibleLi.eq(0).children('.collapsible-body');
                    $collapsibleLi.children('.collapsible-header').attr('aria-expanded', 'false');
                    const lHeight = lJBody[0].scrollHeight;
                    const lPTop = lJBody.css('padding-top');
                    const lPBottom = lJBody.css('padding-bottom');
                    lJBody.css({
                        display: 'block',
                        height: lHeight + 'px',
                        paddingTop: lPTop,
                        paddingBottom: lPBottom,
                        overflow: 'hidden'
                    });
                    lJBody.off('transitionend.collapsible');
                    lJBody.get(0).offsetWidth;
                    lJBody.css({
                        height: '0',
                        paddingTop: 0,
                        paddingBottom: 0
                    }).one('transitionend.collapsible', () => {
                        lJBody.css({
                            display: '',
                            overflow: '',
                            height: '',
                            paddingTop: '',
                            paddingBottom: ''
                        });
                    }
                    );
                }
            }
        }
    },
    fn: 'iehtml.collapsible.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const c_id_attribut_nodeVisibility = 'ie-visibility-observer';
        let uObserver_ie_node_visibility = null;
        try {
            uObserver_ie_node_visibility = new IntersectionObserver( (aObservables) => {
                for (const lObservable of aObservables) {
                    if (lObservable && lObservable.target) {
                        const lCallbackChange = $(lObservable.target).data(c_id_attribut_nodeVisibility);
                        if (lCallbackChange) {
                            const lVisible = lObservable.intersectionRatio > 0 || lObservable.isIntersecting;
                            lCallbackChange(lVisible);
                        }
                    }
                }
            }
            );
        } catch (e) {
            uObserver_ie_node_visibility = null;
        }
        IEHtml.addAttribut(c_id_attribut_nodeVisibility, (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, (...aParams) => {
                const lCallback = (aVisible) => {
                    if (lInfos.callback([aVisible, aContexteCourant.node, ...aParams]) === false) {
                        $(aContexteCourant.node).data(c_id_attribut_nodeVisibility, null);
                        uObserver_ie_node_visibility.unobserve(aContexteCourant.node);
                    }
                }
                ;
                if (uObserver_ie_node_visibility) {
                    $(aContexteCourant.node).data(c_id_attribut_nodeVisibility, lCallback);
                    uObserver_ie_node_visibility.observe(aContexteCourant.node);
                    $(aContexteCourant.node).on(`destroyed.${c_id_attribut_nodeVisibility}`, () => {
                        uObserver_ie_node_visibility.unobserve(aContexteCourant.node);
                    }
                    );
                } else {
                    lCallback(true);
                }
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, `${c_id_attribut_nodeVisibility}="${lValue}"`);
            return true;
        }
        );
    },
    fn: 'iehtml.visibilityobserver.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const c_id_attribut_resizeObserver = 'ie-resize-observer';
        IEHtml.addAttribut(c_id_attribut_resizeObserver, (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, (...aParams) => {
                try {
                    let lResizeObserver = new ResizeObserver( (aObservers) => {
                        const lObserver = aObservers[0];
                        if (lObserver && lObserver.contentRect) {
                            let lResult = false;
                            try {
                                lResult = lInfos.callback([{
                                    node: aContexteCourant.node,
                                    observer: lObserver,
                                    contentRect: lObserver.contentRect
                                }, ...aParams]);
                            } catch (e) {
                                lResult = false;
                            }
                            if (lResult === false && lResizeObserver) {
                                lResizeObserver.disconnect();
                                lResizeObserver = null;
                            }
                        }
                    }
                    );
                    lResizeObserver.observe(aContexteCourant.node);
                    $(aContexteCourant.node).on(`destroyed.${c_id_attribut_resizeObserver}`, () => {
                        if (lResizeObserver) {
                            lResizeObserver.disconnect();
                            lResizeObserver = null;
                        }
                    }
                    );
                } catch (e) {}
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, `${c_id_attribut_resizeObserver}="${lValue}"`);
            return true;
        }
        );
    },
    fn: 'iehtml.resizeobserver.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlRipple = void 0;
        require("IEHtml.Ripple.css");
        exports.StylesIEHtmlRipple = {
            ieRipple: 'ie-ripple',
            disabled: 'disabled',
            ieRippleDisabled: 'ie-ripple-disabled',
            ieRippleClaire: 'ie-ripple-claire',
            ieRippleActivation: 'ie-ripple-activation',
            ieRippleDeactivation: 'ie-ripple-deactivation',
            ieRippleRadiusIn: 'ie-ripple-radius-in',
            ieRippleOpacityIn: 'ie-ripple-opacity-in',
            ieRippleOpacityOut: 'ie-ripple-opacity-out'
        };
    },
    fn: 'iehtml.ripple.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesCustomIEHTMLRipple = void 0;
        require("IEHtml.Ripple.css");
        const IEHtml = require("IEHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetHtml_1 = require("ObjetHtml");
        const IEHtml_Ripple_css_1 = require("IEHtml.Ripple.css");
        const c_DureeActivate = 500;
        const c_DureeDeactivatee = 150;
        exports.StylesCustomIEHTMLRipple = {
            ieRippleAllowpass: 'ie-ripple-allowpass'
        };
        IEHtml.addClass('ie-ripple', (aContexteCourant, aNodeName, aOutils) => {
            if (!IE.estMobile) {
                return;
            }
            let lTimeoutActivate = null;
            let lTimeoutDeactivate = null;
            let lActivateEnd = {};
            const lEndDeactive = () => {
                aContexteCourant.node.classList.remove(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleDeactivation);
            }
            ;
            const lHide = () => {
                if (lActivateEnd && lActivateEnd.event && lActivateEnd.timeout) {
                    lActivateEnd = {};
                    aContexteCourant.node.classList.remove(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleActivation);
                    aContexteCourant.node.classList.add(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleDeactivation);
                    lTimeoutDeactivate = setTimeout(lEndDeactive, c_DureeDeactivatee);
                }
            }
            ;
            $(aContexteCourant.node).on({
                'pointerdown'(aEvent) {
                    if ($(this).is(':disabled') || $(this).hasClass('disabled') || $(this).hasClass(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleDisabled) || $(this).attr('aria-disabled') === 'true') {
                        return;
                    }
                    if (aEvent.target && aEvent.target !== aContexteCourant.node && aEvent.target.classList) {
                        if (aEvent.target.classList.contains(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple)) {
                            return;
                        }
                        const lNode = ObjetHtml_1.GHtml.getClosestFocusable(aEvent.target);
                        if (lNode && !lNode.classList.contains(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple) && !lNode.classList.contains(exports.StylesCustomIEHTMLRipple.ieRippleAllowpass) && !!lNode.closest(`.${IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple}`)) {
                            return;
                        }
                    }
                    if (aContexteCourant.node.classList.contains(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleActivation)) {
                        aContexteCourant.node.classList.remove(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleActivation);
                        aContexteCourant.node.scrollTop;
                    }
                    clearTimeout(lTimeoutActivate);
                    clearTimeout(lTimeoutDeactivate);
                    lActivateEnd = {};
                    lEndDeactive();
                    aContexteCourant.node.classList.add(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleActivation);
                    const lRect = ObjetPosition_1.GPosition.getClientRect(aContexteCourant.node);
                    let lPosEventRelatif = {
                        x: aEvent.clientX - lRect.left,
                        y: aEvent.clientY - lRect.top
                    };
                    const lSizeMax = Math.max(lRect.width, lRect.height);
                    const lSizeAfter = lSizeMax / 3;
                    const lScale = lSizeMax / lSizeAfter * 2;
                    const lPosX = lPosEventRelatif.x - lSizeAfter / 2;
                    const lPosY = lPosEventRelatif.y - lSizeAfter / 2;
                    $(aContexteCourant.node).css({
                        '--ie-ripple-size': `${lSizeAfter}px`,
                        '--ie-ripple-scale': lScale,
                        '--ie-ripple-translate': `${lPosX}px, ${lPosY}px`
                    });
                    lTimeoutActivate = setTimeout( () => {
                        lActivateEnd.timeout = true;
                        lHide();
                    }
                    , c_DureeActivate);
                },
                'touchend touchcancel mouseup mouseleave dragend'() {
                    lActivateEnd.event = true;
                    lHide();
                },
                'destroyed'() {
                    clearTimeout(lTimeoutActivate);
                    clearTimeout(lTimeoutDeactivate);
                }
            });
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-ripple');
            return true;
        }
        );
    },
    fn: 'iehtml.ripple.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TradGlossaireWAI = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TradGlossaireWAI = ObjetTraduction_1.TraductionsModule.getModule('GlossaireWAI', {
            wai: {
                Aide: ''
            },
            heures: '',
            colonne: '',
            ligne: '',
            Coche: '',
            Decoche: '',
            CochePartiel: '',
            PeriodeCloturee: '',
            ContenusExcluRGAA: ''
        });
        exports.TradGlossaireWAI = TradGlossaireWAI;
    },
    fn: 'glossairewai.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreAttribut = exports.EGenreRole = exports.EGenreObjet = exports.GObjetWAI = exports.ObjetWAI = void 0;
        const GlossaireWAI_1 = require("GlossaireWAI");
        const GUID_1 = require("GUID");
        const ObjetTraduction_1 = require("ObjetTraduction");
        var EGenreObjet;
        (function(EGenreObjet) {
            EGenreObjet[EGenreObjet["Aide"] = 1] = "Aide";
            EGenreObjet[EGenreObjet["Tableau"] = 2] = "Tableau";
            EGenreObjet[EGenreObjet["AvecValidation"] = 3] = "AvecValidation";
            EGenreObjet[EGenreObjet["BarreOnglets"] = 4] = "BarreOnglets";
            EGenreObjet[EGenreObjet["NavigationHorizontal"] = 5] = "NavigationHorizontal";
            EGenreObjet[EGenreObjet["NavigationVertical"] = 6] = "NavigationVertical";
            EGenreObjet[EGenreObjet["NavigationHorizontalAvecValidation"] = 7] = "NavigationHorizontalAvecValidation";
            EGenreObjet[EGenreObjet["NavigationVerticalAvecValidation"] = 8] = "NavigationVerticalAvecValidation";
            EGenreObjet[EGenreObjet["CalendrierNavigation"] = 9] = "CalendrierNavigation";
            EGenreObjet[EGenreObjet["CalendrierPrecedent"] = 10] = "CalendrierPrecedent";
            EGenreObjet[EGenreObjet["CalendrierSuivant"] = 11] = "CalendrierSuivant";
            EGenreObjet[EGenreObjet["DetailEvenement"] = 12] = "DetailEvenement";
            EGenreObjet[EGenreObjet["TitreDetailEvenement"] = 13] = "TitreDetailEvenement";
            EGenreObjet[EGenreObjet["AvecMenuContextuel"] = 16] = "AvecMenuContextuel";
            EGenreObjet[EGenreObjet["ItemDesactiver"] = 17] = "ItemDesactiver";
            EGenreObjet[EGenreObjet["AvecEdition"] = 18] = "AvecEdition";
            EGenreObjet[EGenreObjet["Tabulation"] = 19] = "Tabulation";
            EGenreObjet[EGenreObjet["Supprimer"] = 20] = "Supprimer";
            EGenreObjet[EGenreObjet["Fenetre"] = 21] = "Fenetre";
            EGenreObjet[EGenreObjet["NouvelElement"] = 22] = "NouvelElement";
            EGenreObjet[EGenreObjet["BarreOngletsPrincipal"] = 23] = "BarreOngletsPrincipal";
            EGenreObjet[EGenreObjet["SousOnglets"] = 24] = "SousOnglets";
            EGenreObjet[EGenreObjet["ValidezEvenement"] = 25] = "ValidezEvenement";
            EGenreObjet[EGenreObjet["RetourDebutFenetre"] = 26] = "RetourDebutFenetre";
            EGenreObjet[EGenreObjet["FenetreChoix"] = 27] = "FenetreChoix";
        }
        )(EGenreObjet || (exports.EGenreObjet = EGenreObjet = {}));
        var EGenreRole;
        (function(EGenreRole) {
            EGenreRole[EGenreRole["Application"] = 1] = "Application";
            EGenreRole[EGenreRole["Window"] = 2] = "Window";
            EGenreRole[EGenreRole["Textbox"] = 3] = "Textbox";
            EGenreRole[EGenreRole["Link"] = 5] = "Link";
            EGenreRole[EGenreRole["Combobox"] = 6] = "Combobox";
            EGenreRole[EGenreRole["Option"] = 7] = "Option";
            EGenreRole[EGenreRole["Checkbox"] = 8] = "Checkbox";
            EGenreRole[EGenreRole["Radio"] = 10] = "Radio";
            EGenreRole[EGenreRole["Radiogroup"] = 11] = "Radiogroup";
            EGenreRole[EGenreRole["Button"] = 12] = "Button";
            EGenreRole[EGenreRole["Progressbar"] = 13] = "Progressbar";
            EGenreRole[EGenreRole["Tree"] = 17] = "Tree";
            EGenreRole[EGenreRole["Treeitem"] = 19] = "Treeitem";
            EGenreRole[EGenreRole["Presentation"] = 20] = "Presentation";
            EGenreRole[EGenreRole["Group"] = 21] = "Group";
            EGenreRole[EGenreRole["Grid"] = 22] = "Grid";
            EGenreRole[EGenreRole["Tab"] = 24] = "Tab";
            EGenreRole[EGenreRole["Tabpanel"] = 25] = "Tabpanel";
            EGenreRole[EGenreRole["Tablist"] = 26] = "Tablist";
            EGenreRole[EGenreRole["Rowheader"] = 30] = "Rowheader";
            EGenreRole[EGenreRole["Columnheader"] = 31] = "Columnheader";
            EGenreRole[EGenreRole["List"] = 32] = "List";
            EGenreRole[EGenreRole["Listitem"] = 33] = "Listitem";
            EGenreRole[EGenreRole["Menu"] = 34] = "Menu";
            EGenreRole[EGenreRole["Menubar"] = 35] = "Menubar";
            EGenreRole[EGenreRole["Menuitem"] = 36] = "Menuitem";
            EGenreRole[EGenreRole["Alert"] = 37] = "Alert";
            EGenreRole[EGenreRole["Alertdialog"] = 38] = "Alertdialog";
            EGenreRole[EGenreRole["Dialog"] = 39] = "Dialog";
            EGenreRole[EGenreRole["Gridcell"] = 40] = "Gridcell";
            EGenreRole[EGenreRole["Log"] = 41] = "Log";
            EGenreRole[EGenreRole["Marquee"] = 42] = "Marquee";
            EGenreRole[EGenreRole["Menuitemcheckbox"] = 43] = "Menuitemcheckbox";
            EGenreRole[EGenreRole["Menuitemradio"] = 44] = "Menuitemradio";
            EGenreRole[EGenreRole["Scrollbar"] = 45] = "Scrollbar";
            EGenreRole[EGenreRole["Slider"] = 46] = "Slider";
            EGenreRole[EGenreRole["Spinbutton"] = 47] = "Spinbutton";
            EGenreRole[EGenreRole["Status"] = 48] = "Status";
            EGenreRole[EGenreRole["Timer"] = 49] = "Timer";
            EGenreRole[EGenreRole["Tooltip"] = 50] = "Tooltip";
            EGenreRole[EGenreRole["Listbox"] = 51] = "Listbox";
            EGenreRole[EGenreRole["Treegrid"] = 52] = "Treegrid";
            EGenreRole[EGenreRole["Article"] = 53] = "Article";
            EGenreRole[EGenreRole["Definition"] = 54] = "Definition";
            EGenreRole[EGenreRole["Directory"] = 55] = "Directory";
            EGenreRole[EGenreRole["Document"] = 56] = "Document";
            EGenreRole[EGenreRole["Heading"] = 57] = "Heading";
            EGenreRole[EGenreRole["Img"] = 58] = "Img";
            EGenreRole[EGenreRole["Math"] = 59] = "Math";
            EGenreRole[EGenreRole["Note"] = 60] = "Note";
            EGenreRole[EGenreRole["Region"] = 61] = "Region";
            EGenreRole[EGenreRole["Row"] = 62] = "Row";
            EGenreRole[EGenreRole["Separator"] = 63] = "Separator";
            EGenreRole[EGenreRole["Toolbar"] = 64] = "Toolbar";
            EGenreRole[EGenreRole["Banner"] = 65] = "Banner";
            EGenreRole[EGenreRole["Complementary"] = 66] = "Complementary";
            EGenreRole[EGenreRole["Contentinfo"] = 67] = "Contentinfo";
            EGenreRole[EGenreRole["Form"] = 68] = "Form";
            EGenreRole[EGenreRole["Main"] = 69] = "Main";
            EGenreRole[EGenreRole["Navigation"] = 70] = "Navigation";
            EGenreRole[EGenreRole["Search"] = 71] = "Search";
            EGenreRole[EGenreRole["Cell"] = 72] = "Cell";
        }
        )(EGenreRole || (exports.EGenreRole = EGenreRole = {}));
        var EGenreAttribut;
        (function(EGenreAttribut) {
            EGenreAttribut[EGenreAttribut["activedescendant"] = 0] = "activedescendant";
            EGenreAttribut[EGenreAttribut["atomic"] = 1] = "atomic";
            EGenreAttribut[EGenreAttribut["autocomplete"] = 2] = "autocomplete";
            EGenreAttribut[EGenreAttribut["busy"] = 3] = "busy";
            EGenreAttribut[EGenreAttribut["checked"] = 4] = "checked";
            EGenreAttribut[EGenreAttribut["controls"] = 5] = "controls";
            EGenreAttribut[EGenreAttribut["describedby"] = 6] = "describedby";
            EGenreAttribut[EGenreAttribut["disabled"] = 7] = "disabled";
            EGenreAttribut[EGenreAttribut["dropeffect"] = 8] = "dropeffect";
            EGenreAttribut[EGenreAttribut["expanded"] = 9] = "expanded";
            EGenreAttribut[EGenreAttribut["flowto"] = 10] = "flowto";
            EGenreAttribut[EGenreAttribut["grabbed"] = 11] = "grabbed";
            EGenreAttribut[EGenreAttribut["haspopup"] = 12] = "haspopup";
            EGenreAttribut[EGenreAttribut["hidden"] = 13] = "hidden";
            EGenreAttribut[EGenreAttribut["invalid"] = 14] = "invalid";
            EGenreAttribut[EGenreAttribut["label"] = 15] = "label";
            EGenreAttribut[EGenreAttribut["labelledby"] = 16] = "labelledby";
            EGenreAttribut[EGenreAttribut["level"] = 17] = "level";
            EGenreAttribut[EGenreAttribut["live"] = 18] = "live";
            EGenreAttribut[EGenreAttribut["multiline"] = 19] = "multiline";
            EGenreAttribut[EGenreAttribut["multiselectable"] = 20] = "multiselectable";
            EGenreAttribut[EGenreAttribut["orientation"] = 21] = "orientation";
            EGenreAttribut[EGenreAttribut["owns"] = 22] = "owns";
            EGenreAttribut[EGenreAttribut["posinset"] = 23] = "posinset";
            EGenreAttribut[EGenreAttribut["pressed"] = 24] = "pressed";
            EGenreAttribut[EGenreAttribut["readonly"] = 25] = "readonly";
            EGenreAttribut[EGenreAttribut["relevant"] = 26] = "relevant";
            EGenreAttribut[EGenreAttribut["required"] = 27] = "required";
            EGenreAttribut[EGenreAttribut["selected"] = 28] = "selected";
            EGenreAttribut[EGenreAttribut["setsize"] = 29] = "setsize";
            EGenreAttribut[EGenreAttribut["sort"] = 30] = "sort";
            EGenreAttribut[EGenreAttribut["valuemax"] = 31] = "valuemax";
            EGenreAttribut[EGenreAttribut["valuemin"] = 32] = "valuemin";
            EGenreAttribut[EGenreAttribut["valuenow"] = 33] = "valuenow";
            EGenreAttribut[EGenreAttribut["valuetext"] = 34] = "valuetext";
            EGenreAttribut[EGenreAttribut["colindex"] = 35] = "colindex";
            EGenreAttribut[EGenreAttribut["colspan"] = 36] = "colspan";
            EGenreAttribut[EGenreAttribut["rowindex"] = 37] = "rowindex";
            EGenreAttribut[EGenreAttribut["rowspan"] = 38] = "rowspan";
            EGenreAttribut[EGenreAttribut["description"] = 39] = "description";
        }
        )(EGenreAttribut || (exports.EGenreAttribut = EGenreAttribut = {}));
        class ObjetWAI {
            constructor() {
                this.idMessagesAide = GUID_1.GUID.getId();
                this.InfoWai = [];
                this.InfoWai[EGenreObjet.Aide] = GlossaireWAI_1.TradGlossaireWAI.wai.Aide;
                this.InfoWai[EGenreObjet.Tableau] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Tableau');
                this.InfoWai[EGenreObjet.AvecValidation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.AvecValidation');
                this.InfoWai[EGenreObjet.BarreOnglets] = ObjetTraduction_1.GTraductions.getValeur('Navigation.BarreOnglets');
                this.InfoWai[EGenreObjet.NavigationHorizontal] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NavigationHorizontal');
                this.InfoWai[EGenreObjet.NavigationVertical] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NavigationVertical');
                this.InfoWai[EGenreObjet.NavigationHorizontalAvecValidation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NavigationHorizontalAvecValidation');
                this.InfoWai[EGenreObjet.NavigationVerticalAvecValidation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NavigationVerticalAvecValidation');
                this.InfoWai[EGenreObjet.CalendrierNavigation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.CalendrierNavigation');
                this.InfoWai[EGenreObjet.CalendrierPrecedent] = ObjetTraduction_1.GTraductions.getValeur('Navigation.CalendrierPrecedent');
                this.InfoWai[EGenreObjet.CalendrierSuivant] = ObjetTraduction_1.GTraductions.getValeur('Navigation.CalendrierSuivant');
                this.InfoWai[EGenreObjet.ValidezEvenement] = ObjetTraduction_1.GTraductions.getValeur('Navigation.ValidezEvenement');
                this.InfoWai[EGenreObjet.TitreDetailEvenement] = ObjetTraduction_1.GTraductions.getValeur('Navigation.TitreDetailEvenement');
                this.InfoWai[EGenreObjet.ItemDesactiver] = ObjetTraduction_1.GTraductions.getValeur('Navigation.ItemDesactiver');
                this.InfoWai[EGenreObjet.AvecEdition] = ObjetTraduction_1.GTraductions.getValeur('Navigation.AvecEdition');
                this.InfoWai[EGenreObjet.Tabulation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Tabulation');
                this.InfoWai[EGenreObjet.Supprimer] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Supprimer');
                this.InfoWai[EGenreObjet.Fenetre] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Fenetre');
                this.InfoWai[EGenreObjet.NouvelElement] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NouvelElement');
                this.InfoWai[EGenreObjet.BarreOngletsPrincipal] = ObjetTraduction_1.GTraductions.getValeur('Navigation.BarreOngletsPrincipal');
                this.InfoWai[EGenreObjet.SousOnglets] = ObjetTraduction_1.GTraductions.getValeur('Navigation.SousOnglets');
                this.InfoWai[EGenreObjet.RetourDebutFenetre] = ObjetTraduction_1.GTraductions.getValeur('Navigation.RetourDebutFenetre');
                this.InfoWai[EGenreObjet.FenetreChoix] = ObjetTraduction_1.GTraductions.getValeur('Navigation.FenetreChoix');
                this.WaiRole = [];
                this.WaiRole[EGenreRole.Window] = 'window';
                this.WaiRole[EGenreRole.Alert] = 'alert';
                this.WaiRole[EGenreRole.Alertdialog] = 'alertdialog';
                this.WaiRole[EGenreRole.Button] = 'button';
                this.WaiRole[EGenreRole.Checkbox] = 'checkbox';
                this.WaiRole[EGenreRole.Cell] = 'cell';
                this.WaiRole[EGenreRole.Dialog] = 'dialog';
                this.WaiRole[EGenreRole.Gridcell] = 'gridcell';
                this.WaiRole[EGenreRole.Link] = 'link';
                this.WaiRole[EGenreRole.Log] = 'log';
                this.WaiRole[EGenreRole.Marquee] = 'marquee';
                this.WaiRole[EGenreRole.Menuitem] = 'menuitem';
                this.WaiRole[EGenreRole.Menuitemcheckbox] = 'menuitemcheckbox';
                this.WaiRole[EGenreRole.Menuitemradio] = 'menuitemradio';
                this.WaiRole[EGenreRole.Option] = 'option';
                this.WaiRole[EGenreRole.Progressbar] = 'progressbar';
                this.WaiRole[EGenreRole.Radio] = 'radio';
                this.WaiRole[EGenreRole.Scrollbar] = 'scrollbar';
                this.WaiRole[EGenreRole.Slider] = 'slider';
                this.WaiRole[EGenreRole.Spinbutton] = 'spinbutton';
                this.WaiRole[EGenreRole.Status] = 'status';
                this.WaiRole[EGenreRole.Tab] = 'tab';
                this.WaiRole[EGenreRole.Tabpanel] = 'tabpanel';
                this.WaiRole[EGenreRole.Textbox] = 'textbox';
                this.WaiRole[EGenreRole.Timer] = 'timer';
                this.WaiRole[EGenreRole.Tooltip] = 'tooltip';
                this.WaiRole[EGenreRole.Treeitem] = 'treeitem';
                this.WaiRole[EGenreRole.Combobox] = 'combobox';
                this.WaiRole[EGenreRole.Grid] = 'grid';
                this.WaiRole[EGenreRole.Listbox] = 'listbox';
                this.WaiRole[EGenreRole.Menu] = 'menu';
                this.WaiRole[EGenreRole.Menubar] = 'menubar';
                this.WaiRole[EGenreRole.Radiogroup] = 'radiogroup';
                this.WaiRole[EGenreRole.Tablist] = 'tablist';
                this.WaiRole[EGenreRole.Tree] = 'tree';
                this.WaiRole[EGenreRole.Treegrid] = 'treegrid';
                this.WaiRole[EGenreRole.Article] = 'article';
                this.WaiRole[EGenreRole.Columnheader] = 'columnheader';
                this.WaiRole[EGenreRole.Definition] = 'definition';
                this.WaiRole[EGenreRole.Directory] = 'directory';
                this.WaiRole[EGenreRole.Document] = 'document';
                this.WaiRole[EGenreRole.Group] = 'group';
                this.WaiRole[EGenreRole.Heading] = 'heading';
                this.WaiRole[EGenreRole.Img] = 'img';
                this.WaiRole[EGenreRole.List] = 'list';
                this.WaiRole[EGenreRole.Listitem] = 'listitem';
                this.WaiRole[EGenreRole.Math] = 'math';
                this.WaiRole[EGenreRole.Note] = 'note';
                this.WaiRole[EGenreRole.Presentation] = 'presentation';
                this.WaiRole[EGenreRole.Region] = 'region';
                this.WaiRole[EGenreRole.Row] = 'row';
                this.WaiRole[EGenreRole.Rowheader] = 'rowheader';
                this.WaiRole[EGenreRole.Separator] = 'separator';
                this.WaiRole[EGenreRole.Toolbar] = 'toolbar';
                this.WaiRole[EGenreRole.Application] = 'application';
                this.WaiRole[EGenreRole.Banner] = 'banner';
                this.WaiRole[EGenreRole.Complementary] = 'complementary';
                this.WaiRole[EGenreRole.Contentinfo] = 'contentinfo';
                this.WaiRole[EGenreRole.Form] = 'form';
                this.WaiRole[EGenreRole.Main] = 'main';
                this.WaiRole[EGenreRole.Navigation] = 'navigation';
                this.WaiRole[EGenreRole.Search] = 'search';
                this.WaiAttribut = [];
                this.WaiAttribut[EGenreAttribut.activedescendant] = 'aria-activedescendant';
                this.WaiAttribut[EGenreAttribut.atomic] = 'aria-atomic';
                this.WaiAttribut[EGenreAttribut.autocomplete] = 'aria-autocomplete';
                this.WaiAttribut[EGenreAttribut.busy] = 'aria-busy';
                this.WaiAttribut[EGenreAttribut.checked] = 'aria-checked';
                this.WaiAttribut[EGenreAttribut.controls] = 'aria-controls';
                this.WaiAttribut[EGenreAttribut.describedby] = 'aria-describedby';
                this.WaiAttribut[EGenreAttribut.disabled] = 'aria-disabled';
                this.WaiAttribut[EGenreAttribut.dropeffect] = 'aria-dropeffect';
                this.WaiAttribut[EGenreAttribut.expanded] = 'aria-expanded';
                this.WaiAttribut[EGenreAttribut.flowto] = 'aria-flowto';
                this.WaiAttribut[EGenreAttribut.grabbed] = 'aria-grabbed';
                this.WaiAttribut[EGenreAttribut.haspopup] = 'aria-haspopup';
                this.WaiAttribut[EGenreAttribut.hidden] = 'aria-hidden';
                this.WaiAttribut[EGenreAttribut.invalid] = 'aria-invalid';
                this.WaiAttribut[EGenreAttribut.label] = 'aria-label';
                this.WaiAttribut[EGenreAttribut.labelledby] = 'aria-labelledby';
                this.WaiAttribut[EGenreAttribut.level] = 'aria-level';
                this.WaiAttribut[EGenreAttribut.live] = 'aria-live';
                this.WaiAttribut[EGenreAttribut.multiline] = 'aria-multiline';
                this.WaiAttribut[EGenreAttribut.multiselectable] = 'aria-multiselectable';
                this.WaiAttribut[EGenreAttribut.orientation] = 'aria-orientation';
                this.WaiAttribut[EGenreAttribut.owns] = 'aria-owns';
                this.WaiAttribut[EGenreAttribut.posinset] = 'aria-posinset';
                this.WaiAttribut[EGenreAttribut.pressed] = 'aria-pressed';
                this.WaiAttribut[EGenreAttribut.readonly] = 'aria-readonly';
                this.WaiAttribut[EGenreAttribut.relevant] = 'aria-relevant';
                this.WaiAttribut[EGenreAttribut.required] = 'aria-required';
                this.WaiAttribut[EGenreAttribut.selected] = 'aria-selected';
                this.WaiAttribut[EGenreAttribut.setsize] = 'aria-setsize';
                this.WaiAttribut[EGenreAttribut.sort] = 'aria-sort';
                this.WaiAttribut[EGenreAttribut.valuemax] = 'aria-valuemax';
                this.WaiAttribut[EGenreAttribut.valuemin] = 'aria-valuemin';
                this.WaiAttribut[EGenreAttribut.valuenow] = 'aria-valuenow';
                this.WaiAttribut[EGenreAttribut.valuetext] = 'aria-valuetext';
                this.WaiAttribut[EGenreAttribut.colindex] = 'aria-colindex';
                this.WaiAttribut[EGenreAttribut.colspan] = 'aria-colspan';
                this.WaiAttribut[EGenreAttribut.rowindex] = 'aria-rowindex';
                this.WaiAttribut[EGenreAttribut.rowspan] = 'aria-rowspan';
                this.WaiAttribut[EGenreAttribut.description] = 'aria-description';
            }
            getInfo(AEnum) {
                return this.InfoWai[AEnum];
            }
            strRole(AEnum) {
                return this.WaiRole[AEnum] || false;
            }
            getRole(AEnum) {
                return 'role="' + this.strRole(AEnum) + '"';
            }
            getAttribut(aEnum) {
                return this.WaiAttribut[aEnum];
            }
            composeSpan(AParametre, AId) {
                const lID = AId || false;
                const lTabIndex = AId ? '-1' : false;
                return typeof (AParametre) === 'string' ? IE.jsx.str("span", {
                    id: lID,
                    tabindex: lTabIndex,
                    class: "sr-only"
                }, AParametre) : IE.jsx.str("span", {
                    id: lID,
                    tabindex: lTabIndex,
                    class: "sr-only"
                }, this.getInfo(AParametre));
            }
            composeRole(AParametre) {
                return typeof (AParametre) === 'string' ? '' : this.getRole(AParametre);
            }
            composeAttribut(aParametre) {
                if (aParametre.valeur && typeof (aParametre.valeur) !== 'string') {
                    IE.log.addLog('ObjetWAI.composeAttribut: mauvais type de parametre ' + aParametre.genre + ' => ' + aParametre.valeur);
                }
                if (!aParametre.valeur || typeof (aParametre.valeur) !== 'string') {
                    return '';
                }
                const lAttribute = this.getAttribut(aParametre.genre);
                return typeof (aParametre.genre) === 'string' && lAttribute ? '' : ' ' + lAttribute + '="' + aParametre.valeur.toAttrValue() + '"';
            }
            getObjetAttributValeur(aGenreAttribut, aValeur) {
                const lObjetValeurAttribut = {};
                const lValeurStringAttribut = this.composeAttribut({
                    genre: aGenreAttribut,
                    valeur: aValeur
                });
                if (lValeurStringAttribut && lValeurStringAttribut.includes('=')) {
                    const lSplit = lValeurStringAttribut.split('=');
                    if (lSplit && lSplit.length === 2) {
                        lObjetValeurAttribut[lSplit[0]] = lSplit[1];
                    }
                }
                return lObjetValeurAttribut;
            }
            getNodeRechercheNavigation(aTabNodes, aNodeOrigine, aModeRecherche) {
                if (aTabNodes && aTabNodes.length > 0) {
                    let lIndexTrouve = aTabNodes.indexOf(aNodeOrigine);
                    if (lIndexTrouve < 0) {
                        aTabNodes.forEach( (aElement, aIndex) => {
                            if (lIndexTrouve < 0 && $(aElement).find(aNodeOrigine).length > 0) {
                                lIndexTrouve = aIndex;
                            }
                        }
                        );
                    }
                    if (lIndexTrouve < 0) {
                        return null;
                    }
                    switch (aModeRecherche) {
                    case ObjetWAI.ModeRechercheNavigation.current:
                        return aTabNodes[lIndexTrouve];
                    case ObjetWAI.ModeRechercheNavigation.prev:
                        return lIndexTrouve > 0 ? aTabNodes[lIndexTrouve - 1] : null;
                    case ObjetWAI.ModeRechercheNavigation.prevCycle:
                        return lIndexTrouve > 0 ? aTabNodes[lIndexTrouve - 1] : aTabNodes[aTabNodes.length - 1];
                    case ObjetWAI.ModeRechercheNavigation.next:
                        return lIndexTrouve < aTabNodes.length - 1 ? aTabNodes[lIndexTrouve + 1] : null;
                    case ObjetWAI.ModeRechercheNavigation.nextCycle:
                        return lIndexTrouve < aTabNodes.length - 1 ? aTabNodes[lIndexTrouve + 1] : aTabNodes[0];
                    case ObjetWAI.ModeRechercheNavigation.first:
                        return aTabNodes[0];
                    case ObjetWAI.ModeRechercheNavigation.last:
                        return aTabNodes[aTabNodes.length - 1];
                    default:
                        ;
                    }
                }
                return null;
            }
        }
        exports.ObjetWAI = ObjetWAI;
        (function(ObjetWAI) {
            let ModeRechercheNavigation;
            (function(ModeRechercheNavigation) {
                ModeRechercheNavigation[ModeRechercheNavigation["prev"] = 0] = "prev";
                ModeRechercheNavigation[ModeRechercheNavigation["prevCycle"] = 1] = "prevCycle";
                ModeRechercheNavigation[ModeRechercheNavigation["next"] = 2] = "next";
                ModeRechercheNavigation[ModeRechercheNavigation["nextCycle"] = 3] = "nextCycle";
                ModeRechercheNavigation[ModeRechercheNavigation["first"] = 4] = "first";
                ModeRechercheNavigation[ModeRechercheNavigation["last"] = 5] = "last";
                ModeRechercheNavigation[ModeRechercheNavigation["current"] = 6] = "current";
            }
            )(ModeRechercheNavigation = ObjetWAI.ModeRechercheNavigation || (ObjetWAI.ModeRechercheNavigation = {}));
        }
        )(ObjetWAI || (exports.ObjetWAI = ObjetWAI = {}));
        const GObjetWAI = new ObjetWAI();
        exports.GObjetWAI = GObjetWAI;
    },
    fn: 'objetwai.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetWAI_1 = require("ObjetWAI");
        IEHtml.addAttribut('ie-zonenavigation', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lParams = {
                returnNavNode(aNode) {
                    $(aNode).focus();
                },
                retourNavigationDefaut: null,
                nodeBackup: null
            };
            if (aAttributValue) {
                const lInfos = aOutils.getAccesParametres(aAttributValue, aAttrName, aContexteCourant);
                if (!lInfos.estFonction) {
                    return true;
                }
                Object.assign(lParams, lInfos.callback([aContexteCourant.node]));
            }
            if (!lParams) {
                return true;
            }
            $(aContexteCourant.node).data('ie-zonenavigation', lParams).addClass('ie-zonenavigation').on({
                'keyup'(aEvent) {
                    if (aEvent.which === ToucheClavier_1.ToucheClavierUtil.ToucheRetourNavigation) {
                        const lPreviousZone = ObjetWAI_1.GObjetWAI.getNodeRechercheNavigation($(document).find('.ie-zonenavigation').toArray(), aContexteCourant.node, ObjetWAI_1.ObjetWAI.ModeRechercheNavigation.prev);
                        if (lPreviousZone) {
                            const lParamsPrevious = $(lPreviousZone).data('ie-zonenavigation');
                            if (lParamsPrevious) {
                                if (lParamsPrevious.nodeBackup && lParamsPrevious.returnNavNode && $(lPreviousZone).find(lParamsPrevious.nodeBackup).length > 0) {
                                    lParamsPrevious.returnNavNode(lParamsPrevious.nodeBackup);
                                    return;
                                }
                                if (lParamsPrevious.retourNavigationDefaut) {
                                    lParamsPrevious.retourNavigationDefaut();
                                    return;
                                }
                                ;
                            } else {}
                        }
                    }
                },
                'focusout'(aEvent) {
                    lParams.nodeBackup = aEvent.target;
                }
            });
            aOutils.addCommentaireDebug(aContexteCourant.node, aAttributValue ? `ie-zonenavigation="${aAttributValue}"` : 'ie-zonenavigation');
            return true;
        }
        );
    },
    fn: 'iehtml.zonenavigation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlBtnImage = void 0;
        require("IEHtml.BtnImage.css");
        exports.StylesIEHtmlBtnImage = {
            btnImage: 'btnImage',
            btnImageDisable: 'btnImageDisable',
            btnTooltip: 'btnTooltip',
            avecFond: 'avecFond',
            btActivable: 'bt-activable',
            btnImageIcon: 'btnImageIcon',
            colorNeutre: 'color-neutre',
            colorRed: 'color-red',
            ThemeNeutre: 'ThemeNeutre',
            iGreen: 'i-green',
            iRed: 'i-red',
            btnImageSelection: 'btnImageSelection',
            bgRedClaire: 'bg-red-claire',
            bgGreenClaire: 'bg-green-claire',
            bgOrangeClaire: 'bg-orange-claire',
            bgBlueClaire: 'bg-blue-claire',
            themeBoutonPrimaire: 'themeBoutonPrimaire',
            themeBoutonNeutre: 'themeBoutonNeutre',
            mrfiche: 'mrfiche',
            icon_star_half: 'icon_star_half',
            btBig: 'bt-big',
            btLarge: 'bt-large',
            btSmall: 'bt-small',
            iTop: 'i-top',
            btn_icone_deploiement: 'btn_icone_deploiement',
            btnBandeau: 'btn-bandeau'
        };
    },
    fn: 'iehtml.btnimage.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesTooltip = void 0;
        require("Tooltip.module.css");
        exports.StylesTooltip = {
            tooltip: 'Tooltip-tooltip-3cab4dc0',
            btntooltip: 'Tooltip-btntooltip-dc88b9f8',
            hide: 'Tooltip-hide-fd829d55',
            label: 'Tooltip-label-140d7a93',
            arrow: 'Tooltip-arrow-d70990ec',
            arrowTop: 'Tooltip-arrowTop-3ab68b07',
            debugKO: 'Tooltip-debugKO-869ada0',
            debugOK: 'Tooltip-debugOK-a8867e20'
        };
    },
    fn: 'tooltip.module.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Tooltip = void 0;
        const GUID_1 = require("GUID");
        const IEHtml_1 = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const ObjetPosition_1 = require("ObjetPosition");
        const Tooltip_module_css_1 = require("Tooltip.module.css");
        const ToucheClavier_1 = require("ToucheClavier");
        class Tooltip {
            static getNodeConteneur() {
                if (!this.nodeConteneur || !ObjetHtml_1.GHtml.elementExiste(this.idConteneur)) {
                    this.nodeConteneur = IEHtml_1.default.injectHTMLParams({
                        html: IE.jsx.str("div", {
                            "aria-hidden": "true",
                            id: this.idConteneur
                        }),
                        element: ObjetHtml_1.GHtml.getElement(GApplication.getIdConteneur()) || document.body,
                        ignorerScroll: true
                    });
                }
                return this.nodeConteneur;
            }
            static getHtmlArrow() {
                return IE.jsx.str("div", {
                    class: Tooltip_module_css_1.StylesTooltip.arrow
                }, IE.jsx.str("div", null));
            }
            static getNodeLabelTooltip() {
                this.getNodeConteneur();
                if (!ObjetHtml_1.GHtml.elementExiste(this.idNodelabelTooltip)) {
                    IEHtml_1.default.injectHTMLParams({
                        html: IE.jsx.str("div", {
                            role: "tooltip",
                            id: this.idNodelabelTooltip,
                            class: [Tooltip_module_css_1.StylesTooltip.tooltip, Tooltip_module_css_1.StylesTooltip.hide]
                        }, IE.jsx.str("div", {
                            class: Tooltip_module_css_1.StylesTooltip.label
                        }), this.getHtmlArrow()),
                        element: this.nodeConteneur,
                        ignorerScroll: true
                    });
                }
                return ObjetHtml_1.GHtml.getElement(this.idNodelabelTooltip);
            }
            static addNodeLabelDescribe(aNode, aIEAttrname, aEstPourLabel, aInfosLabel, aEstDynamique) {
                var _a, _b, _c, _d, _e, _f;
                IEHtml_1.default.outils.addCommentaireDebug(aNode, aEstPourLabel && !aInfosLabel.estFonction ? `${aIEAttrname} <-> aria-label` : `${aIEAttrname}="${aInfosLabel.nomCommentaire || aInfosLabel.value}"`);
                let lFuncTootlip;
                let lStrToolTip = '';
                if (aInfosLabel.estFonction) {
                    lFuncTootlip = () => {
                        var _a, _b;
                        return ((_b = (_a = aInfosLabel.callback([aNode])) === null || _a === void 0 ? void 0 : _a.replaceRCToHTML) === null || _b === void 0 ? void 0 : _b.call(_a)) || '';
                    }
                    ;
                    if (!aEstDynamique) {
                        lStrToolTip = lFuncTootlip();
                        lFuncTootlip = undefined;
                    }
                } else {
                    lStrToolTip = (_f = (_d = (_b = (_a = aInfosLabel.nom) === null || _a === void 0 ? void 0 : _a.ajouterEntites) === null || _b === void 0 ? void 0 : (_c = _b.call(_a)).replaceRCToHTML) === null || _d === void 0 ? void 0 : (_e = _d.call(_c)).trim) === null || _f === void 0 ? void 0 : _f.call(_e);
                    if (!lStrToolTip) {
                        return;
                    }
                }
                const lType = this.getTypeNode(aNode);
                if (!lType) {
                    aNode.setAttribute(Tooltip.attrType, Tooltip.Type.default);
                } else if (lType !== Tooltip.Type.default) {
                    return;
                }
                this.getNodeConteneur();
                if (aEstPourLabel && !aInfosLabel.estFonction) {
                    aNode.setAttribute('aria-label', aInfosLabel.nom);
                    return;
                }
                const lUniqueNumber = this.uniqueNumberGenerator.generate();
                const lId = `id_tooltip_${lUniqueNumber}`;
                const lAttr = aEstPourLabel ? 'aria-labelledby' : 'aria-describedby';
                aNode.setAttribute(lAttr, [aNode.getAttribute(lAttr) || '', lId].join(' ').trim());
                aNode.setAttribute(this.attrId, lId);
                const lNode = IEHtml_1.default.injectHTMLParams({
                    html: (IE.jsx.str("div", {
                        role: "tooltip",
                        class: [Tooltip_module_css_1.StylesTooltip.tooltip, Tooltip_module_css_1.StylesTooltip.hide],
                        id: lId
                    }, IE.jsx.str("div", {
                        class: Tooltip_module_css_1.StylesTooltip.label,
                        "ie-html": lFuncTootlip || false
                    }, lStrToolTip || ''), this.getHtmlArrow())),
                    element: this.nodeConteneur,
                    ignorerScroll: true
                });
                $(aNode).on('destroyed.tooltip', () => {
                    this.uniqueNumberGenerator.release(lUniqueNumber);
                    lNode.remove();
                }
                );
            }
            static cancelOpenClose() {
                if (this.timerOpen) {
                    clearTimeout(this.timerOpen);
                    this.timerOpen = undefined;
                }
            }
            static cancelTimerClose() {
                if (this.timerClose) {
                    clearTimeout(this.timerClose);
                    this.timerClose = undefined;
                }
            }
            static getAlign(aNode) {
                var _a;
                let lAlign = aNode.getAttribute(Tooltip.attrAlign);
                if (!lAlign) {
                    const lNode = (_a = aNode.closest) === null || _a === void 0 ? void 0 : _a.call(aNode, `[${Tooltip.attrAlign}]`);
                    if (lNode) {
                        lAlign = lNode.getAttribute(Tooltip.attrAlign);
                    }
                }
                if (!lAlign || !Tooltip.Align[lAlign]) {
                    lAlign = Tooltip.Align.bottom;
                }
                return lAlign;
            }
            static getTypeNode(aNode) {
                let lType = null;
                if (aNode.hasAttribute(Tooltip.attrType)) {
                    lType = aNode.getAttribute(Tooltip.attrType);
                    if (!lType || !Tooltip.Type[lType]) {
                        lType = Tooltip.Type.default;
                    }
                    return lType;
                }
            }
            static positionnerTooltip(aNodeSource, aNodeTooltip, aRectSource) {
                let lAlign = this.getAlign(aNodeSource);
                let lAlignFinal = lAlign;
                const lRectTooltip = ObjetPosition_1.GPosition.getClientRect(aNodeTooltip);
                let lRectSource = aRectSource;
                const lNodeOverflow = ObjetHtml_1.GHtml.getParentOverflowNonVisible(aNodeSource);
                if (lNodeOverflow) {
                    const lRectOverflow = ObjetPosition_1.GPosition.getClientRect(lNodeOverflow);
                    const lLeft = Math.max(aRectSource.left, lRectOverflow.left);
                    const lTop = Math.max(aRectSource.top, lRectOverflow.top);
                    const lBottom = Math.min(aRectSource.bottom, lRectOverflow.bottom);
                    const lRight = Math.min(aRectSource.right, lRectOverflow.right);
                    lRectSource = {
                        left: lLeft,
                        top: lTop,
                        bottom: lBottom,
                        right: lRight
                    };
                }
                lRectSource.top = Math.max(lRectSource.top, 0);
                lRectSource.left = Math.max(lRectSource.left, 0);
                lRectSource.bottom = Math.min(lRectSource.bottom, ObjetNavigateur_1.Navigateur.ecranH);
                lRectSource.right = Math.min(lRectSource.right, ObjetNavigateur_1.Navigateur.ecranL);
                const lCenterSource = lRectSource.left + (lRectSource.right - lRectSource.left) / 2;
                const lPos = {
                    left: lCenterSource - lRectTooltip.width / 2,
                    top: lAlign === Tooltip.Align.bottom ? lRectSource.bottom + this.ecartNode : lRectSource.top - this.ecartNode - lRectTooltip.height,
                    width: lRectTooltip.width,
                    height: lRectTooltip.height
                };
                switch (lAlign) {
                case Tooltip.Align.bottom:
                    {
                        if (lPos.top + lRectTooltip.height > ObjetNavigateur_1.Navigateur.ecranH - this.ecartBordEcran) {
                            if (lRectSource.top < ObjetNavigateur_1.Navigateur.ecranH - lRectSource.bottom) {
                                ObjetPosition_1.GPosition.setHeight(aNodeTooltip, ObjetNavigateur_1.Navigateur.ecranH - lPos.top - this.ecartBordEcran);
                            } else {
                                lPos.top = lRectSource.top - this.ecartNode - lRectTooltip.height;
                                lAlignFinal = Tooltip.Align.top;
                            }
                        }
                        break;
                    }
                case Tooltip.Align.top:
                    {
                        if (lRectTooltip.height > lRectSource.top - this.ecartNode - this.ecartBordEcran) {
                            if (lRectSource.top > ObjetNavigateur_1.Navigateur.ecranH - lRectSource.bottom) {
                                ObjetPosition_1.GPosition.setHeight(aNodeTooltip, lRectSource.top - this.ecartNode - this.ecartBordEcran);
                            } else {
                                lPos.top = lRectSource.bottom + this.ecartNode;
                                lAlignFinal = Tooltip.Align.bottom;
                            }
                        }
                        break;
                    }
                }
                if (lPos.left + lPos.width + this.ecartBordEcran > ObjetNavigateur_1.Navigateur.ecranL) {
                    lPos.left = Math.max(this.ecartBordEcran, ObjetNavigateur_1.Navigateur.ecranL - lPos.width - this.ecartBordEcran);
                }
                lPos.left = Math.max(this.ecartBordEcran, lPos.left);
                lPos.top = Math.max(this.ecartBordEcran, lPos.top);
                const lJArrow = $(aNodeTooltip).find(`.${Tooltip_module_css_1.StylesTooltip.arrow}`);
                switch (lAlignFinal) {
                case Tooltip.Align.bottom:
                    {
                        lJArrow.removeClass(Tooltip_module_css_1.StylesTooltip.arrowTop);
                        break;
                    }
                case Tooltip.Align.top:
                    {
                        lJArrow.addClass(Tooltip_module_css_1.StylesTooltip.arrowTop);
                        break;
                    }
                }
                ObjetPosition_1.GPosition.setLeft(lJArrow.get(0), lCenterSource - lPos.left - this.tailleArrow);
                ObjetPosition_1.GPosition.setPosition(aNodeTooltip, lPos.left, lPos.top, false);
            }
            static isDisabled(aNode) {
                var _a, _b;
                if ((_a = aNode === null || aNode === void 0 ? void 0 : aNode.hasAttribute) === null || _a === void 0 ? void 0 : _a.call(aNode, Tooltip.attrDisabled)) {
                    return ((_b = aNode.getAttribute) === null || _b === void 0 ? void 0 : _b.call(aNode, Tooltip.attrDisabled)) !== 'false';
                }
                return false;
            }
            static getNodeClosest(aNode, aSurClick) {
                var _a, _b;
                if (!aNode) {
                    return null;
                }
                let lNode = null;
                lNode = (_a = aNode.closest) === null || _a === void 0 ? void 0 : _a.call(aNode, `[${Tooltip.attrType}]`);
                if (lNode) {
                    if (this.isDisabled(lNode)) {
                        return null;
                    }
                    const lSurClick = ((_b = lNode.getAttribute) === null || _b === void 0 ? void 0 : _b.call(lNode, Tooltip.attrBtn)) === 'true';
                    if (lSurClick === aSurClick) {
                        return lNode;
                    }
                    return null;
                }
                return null;
            }
            static getContenuTooltip(aNode) {
                var _a;
                const lIdTooltip = (_a = aNode.getAttribute) === null || _a === void 0 ? void 0 : _a.call(aNode, Tooltip.attrId);
                const lType = this.getTypeNode(aNode);
                if (lType === Tooltip.Type.ellipsis) {
                    return aNode.innerHTML;
                }
                if (lIdTooltip) {
                    const lNodes = this.getNodeTooltip(aNode);
                    if (lNodes.nodeCopie) {
                        return lNodes.nodeCopie.innerHTML;
                    }
                    return $(lNodes.node).find(`.${Tooltip_module_css_1.StylesTooltip.label}`).get(0).innerHTML;
                }
                let lLabel = aNode.getAttribute(Tooltip.attrText) || aNode.getAttribute(Tooltip.attrHtml);
                if (lLabel) {
                    return;
                }
                return aNode.getAttribute('aria-label');
            }
            static getNodeTooltip(aNode) {
                var _a;
                const lIdTooltip = (_a = aNode === null || aNode === void 0 ? void 0 : aNode.getAttribute) === null || _a === void 0 ? void 0 : _a.call(aNode, Tooltip.attrId);
                if (lIdTooltip) {
                    const lNodeTooltip = ObjetHtml_1.GHtml.getElement(lIdTooltip);
                    if (!(lNodeTooltip === null || lNodeTooltip === void 0 ? void 0 : lNodeTooltip.closest(`#${this.idConteneur}`))) {
                        return {
                            node: this.getNodeLabelTooltip(),
                            nodeCopie: lNodeTooltip
                        };
                    }
                    return {
                        node: lNodeTooltip
                    };
                }
                return {
                    node: this.getNodeLabelTooltip()
                };
            }
            static show(aNode, aAfficher, aDelai) {
                var _a;
                if (aNode.dataset.avecIeHint) {
                    return;
                }
                const lType = this.getTypeNode(aNode);
                const lEstEllipsis = lType === Tooltip.Type.ellipsis;
                let lEstTooltipDedie = false;
                let lEstTooltipLabel = false;
                const lIdTooltip = (_a = aNode.getAttribute) === null || _a === void 0 ? void 0 : _a.call(aNode, Tooltip.attrId);
                let lNodeTooltip = null;
                let lNodeCopieId = null;
                if (lEstEllipsis) {
                    if (aAfficher) {
                        const lJNode = $(aNode);
                        if (Math.ceil(lJNode.outerWidth()) >= lJNode.prop('scrollWidth')) {
                            if (aNode.parentElement) {
                                const lNodeParent = Tooltip.getNodeClosest(aNode.parentElement, false);
                                if (lNodeParent) {
                                    Tooltip.show(lNodeParent, aAfficher, aDelai);
                                }
                            }
                            return;
                        }
                    }
                    lNodeTooltip = this.getNodeTooltip(aNode).node;
                    lNodeCopieId = aNode;
                } else if (lIdTooltip) {
                    const lNodes = this.getNodeTooltip(aNode);
                    lNodeTooltip = lNodes.node;
                    lEstTooltipDedie = true;
                    if (lNodes.nodeCopie) {
                        lNodeCopieId = lNodes.nodeCopie;
                        lNodeTooltip = lNodes.node;
                        lEstTooltipDedie = false;
                    }
                } else {
                    lNodeTooltip = this.getNodeTooltip(aNode).node;
                    lEstTooltipLabel = true;
                }
                if (!lNodeTooltip) {
                    return;
                }
                const lIsVisible = !lNodeTooltip.classList.contains(Tooltip_module_css_1.StylesTooltip.hide);
                if (this.nodeDisplay === aNode && lIsVisible === aAfficher) {
                    this.cancelTimerClose();
                    return;
                }
                if (aAfficher) {
                    const lTitle = aNode.getAttribute('title');
                    if (lTitle) {
                        return;
                    }
                    if (lTitle !== '' && !(aNode instanceof SVGElement)) {
                        aNode.setAttribute('title', '');
                    }
                }
                this.cancelTimerClose();
                const lJText = $(lNodeTooltip).find(`.${Tooltip_module_css_1.StylesTooltip.label}`);
                if (aAfficher) {
                    if (lIdTooltip && !this.getContenuTooltip(aNode)) {
                        this.hideAll();
                        return;
                    }
                    if (this.nodeDisplay !== aNode) {
                        this.hideAll();
                    }
                    const lDisplay = () => {
                        var _a, _b, _c, _d, _e;
                        this.hideAll();
                        if (lJText.length !== 1) {
                            return;
                        }
                        const lRectSource = ObjetPosition_1.GPosition.getClientRect(aNode);
                        if (lRectSource.width === 0 || lRectSource.height === 0) {
                            return;
                        }
                        if (lEstTooltipLabel) {
                            let lAvecTraitementEnTexte = true;
                            let lLabel = aNode.getAttribute(Tooltip.attrText);
                            if (!lLabel) {
                                lLabel = aNode.getAttribute(Tooltip.attrHtml);
                                if (lLabel) {
                                    lAvecTraitementEnTexte = false;
                                } else {
                                    lLabel = aNode.getAttribute('aria-label');
                                }
                            }
                            if (!lLabel) {
                                return;
                            }
                            lJText.get(0).innerHTML = lAvecTraitementEnTexte ? (_c = (_a = lLabel.ajouterEntites) === null || _a === void 0 ? void 0 : (_b = _a.call(lLabel)).replaceRCToHTML) === null || _c === void 0 ? void 0 : _c.call(_b) : lLabel;
                        } else if (lNodeCopieId) {
                            lJText.get(0).innerHTML = (_e = (_d = lNodeCopieId.innerHTML) === null || _d === void 0 ? void 0 : _d.replaceRCToHTML) === null || _e === void 0 ? void 0 : _e.call(_d);
                            lJText.find('*').each(function() {
                                if (this.hasAttribute('id')) {
                                    this.removeAttribute('id');
                                }
                            });
                        }
                        if (lIdTooltip && !this.getContenuTooltip(aNode)) {
                            return;
                        }
                        const lClassTooltip = aNode.getAttribute(Tooltip.attrClass);
                        this.nodeDisplay = aNode;
                        lNodeTooltip.setAttribute('class', [Tooltip_module_css_1.StylesTooltip.tooltip, lClassTooltip || ''].join(' '));
                        this.positionnerTooltip(aNode, lNodeTooltip, lRectSource);
                    }
                    ;
                    if (aDelai) {
                        this.timerOpen = setTimeout( () => {
                            this.timerOpen = undefined;
                            lDisplay();
                        }
                        , aDelai);
                    } else {
                        lDisplay();
                    }
                } else {
                    this.cancelOpenClose();
                    const lHide = () => {
                        this.nodeDisplay = undefined;
                        if (!lEstTooltipDedie) {
                            lJText.empty();
                        }
                        this.hideAll();
                    }
                    ;
                    if (aDelai) {
                        this.timerClose = setTimeout( () => {
                            this.timerClose = undefined;
                            lHide();
                        }
                        , aDelai);
                    } else {
                        lHide();
                    }
                }
            }
            static hideAll() {
                this.nodeDisplay = undefined;
                $(this.nodeConteneur).find(`>:not(.${Tooltip_module_css_1.StylesTooltip.hide})`).each(function() {
                    this.setAttribute('class', [Tooltip_module_css_1.StylesTooltip.tooltip, Tooltip_module_css_1.StylesTooltip.hide].join(' '));
                    this.removeAttribute('style');
                });
                this.cancelOpenClose();
                this.cancelTimerClose();
            }
            static init() {
                $(document).on({
                    'mouseover.tooltip'(aEvent) {
                        if (IE.estMobile) {
                            return;
                        }
                        let lNode = Tooltip.getNodeClosest(aEvent.target, false);
                        if (lNode) {
                            Tooltip.show(lNode, true, Tooltip.options.delayOpenHover);
                        }
                    },
                    'mouseout.tooltip'(aEvent) {
                        if (IE.estMobile) {
                            return;
                        }
                        let lNode = Tooltip.getNodeClosest(aEvent.target, false);
                        if (lNode) {
                            Tooltip.show(lNode, false, Tooltip.options.delayCloseHover);
                        }
                    },
                    'focusin.tooltip'(aEvent) {
                        var _a, _b;
                        if (((_b = (_a = aEvent.target) === null || _a === void 0 ? void 0 : _a.hasAttribute) === null || _b === void 0 ? void 0 : _b.call(_a, Tooltip.attrType)) && !Tooltip.isDisabled(aEvent.target)) {
                            Tooltip.show(aEvent.target, true, Tooltip.options.delayOpenFocus);
                        }
                    },
                    'focusout.tooltip'(aEvent) {
                        var _a, _b;
                        if ((_b = (_a = aEvent.target) === null || _a === void 0 ? void 0 : _a.hasAttribute) === null || _b === void 0 ? void 0 : _b.call(_a, Tooltip.attrType)) {
                            Tooltip.show(aEvent.target, false);
                        }
                    },
                    'click.tooltip'(aEvent) {
                        let lNode = Tooltip.getNodeClosest(aEvent.target, true);
                        if (lNode) {
                            Tooltip.show(lNode, true);
                        }
                    },
                    'pointerdown.tooltip'() {
                        setTimeout( () => {
                            Tooltip.hideAll();
                        }
                        , 0);
                    },
                    'keydown.tooltip'(aEvent) {
                        if (aEvent.key === ToucheClavier_1.ToucheClavier.Espace || aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                            Tooltip.hideAll();
                        }
                    }
                });
                document.addEventListener('keydown', (aEvent) => {
                    if (aEvent.key === ToucheClavier_1.ToucheClavierKey.Escape) {
                        Tooltip.hideAll();
                    }
                }
                , true);
                $(window).on({
                    'resize.tooltip': () => {
                        Tooltip.hideAll();
                    }
                });
            }
        }
        exports.Tooltip = Tooltip;
        Tooltip.attrType = 'data-tooltip';
        Tooltip.attrId = 'data-tooltip-id';
        Tooltip.attrAlign = 'data-tooltip-align';
        Tooltip.attrText = 'data-tooltip-text';
        Tooltip.attrHtml = 'data-tooltip-html';
        Tooltip.attrDisabled = 'data-tooltip-disabled';
        Tooltip.attrClass = 'data-tooltip-class';
        Tooltip.attrBtn = 'data-tooltip-btn';
        Tooltip.options = {
            delayOpenHover: 300,
            delayCloseHover: 100,
            delayOpenFocus: 100
        };
        Tooltip.idConteneur = GUID_1.GUID.getId();
        Tooltip.idNodelabelTooltip = GUID_1.GUID.getId();
        Tooltip.ecartBordEcran = 3;
        Tooltip.ecartNode = 8;
        Tooltip.tailleArrow = 5;
        Tooltip.uniqueNumberGenerator = new GUID_1.UniqueNumberGenerator();
        (function(Tooltip) {
            let Type;
            (function(Type) {
                Type["default"] = "default";
                Type["ellipsis"] = "ellipsis";
            }
            )(Type = Tooltip.Type || (Tooltip.Type = {}));
            let Align;
            (function(Align) {
                Align["top"] = "top";
                Align["bottom"] = "bottom";
            }
            )(Align = Tooltip.Align || (Tooltip.Align = {}));
        }
        )(Tooltip || (exports.Tooltip = Tooltip = {}));
        Tooltip.init();
        IEHtml_1.default.addAttribut('ie-tooltiplabel', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            let lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant, aOutils.TypeAccesParametres.jsxStrict);
            Tooltip.addNodeLabelDescribe(aContexteCourant.node, aAttrName, true, lInfos, true);
            return true;
        }
        );
        IEHtml_1.default.addAttribut('ie-tooltiplabel-static', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            let lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant, aOutils.TypeAccesParametres.jsxStrict);
            Tooltip.addNodeLabelDescribe(aContexteCourant.node, aAttrName, true, lInfos, false);
            return true;
        }
        );
        IEHtml_1.default.addAttribut('ie-tooltipdescribe', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            let lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant, aOutils.TypeAccesParametres.jsxStrict);
            Tooltip.addNodeLabelDescribe(aContexteCourant.node, aAttrName, false, lInfos, true);
            return true;
        }
        );
        IEHtml_1.default.addAttribut('ie-tooltipdescribe-static', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            let lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant, aOutils.TypeAccesParametres.jsxStrict);
            Tooltip.addNodeLabelDescribe(aContexteCourant.node, aAttrName, false, lInfos, false);
            return true;
        }
        );
    },
    fn: 'tooltip.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesFonts = void 0;
        require("fonts.css");
        exports.StylesFonts = {
            mceIco: 'mce-ico',
            iconText: 'icon-text',
            icon_balance: 'icon_balance',
            icon_deja_present: 'icon_deja_present',
            icon_volontaire: 'icon_volontaire',
            icon_stop_sign: 'icon_stop_sign',
            icon_mission_pacte: 'icon_mission_pacte',
            icon_qr_code_tournant: 'icon_qr_code_tournant',
            icon_stop_harcelement: 'icon_stop_harcelement',
            icon_doc_certifie: 'icon_doc_certifie',
            icon_base_connaissance: 'icon_base_connaissance',
            icon_file_pleine: 'icon_file_pleine',
            icon_diode: 'icon_diode',
            icon_super_administrateur: 'icon_super_administrateur',
            icon_cahier_texte_verrou: 'icon_cahier_texte_verrou',
            icon_fichier_envelope: 'icon_fichier_envelope',
            icon_etat_stage_prolonge: 'icon_etat_stage_prolonge',
            icon_etat_non_place_echec: 'icon_etat_non_place_echec',
            icon_etat_place: 'icon_etat_place',
            icon_etat_stage_termine: 'icon_etat_stage_termine',
            icon_etat_stage_Interrompu: 'icon_etat_stage_Interrompu',
            icon_etat_stage_en_cours: 'icon_etat_stage_en_cours',
            icon_etat_stage_prevu: 'icon_etat_stage_prevu',
            icon_sortie_pedagogique: 'icon_sortie_pedagogique',
            icon_autre_service: 'icon_autre_service',
            icon_chaine_verticale: 'icon_chaine_verticale',
            icon_direction: 'icon_direction',
            icon_historique_service: 'icon_historique_service',
            icon_allergene_moutarde: 'icon_allergene_moutarde',
            icon_allergene_lupin: 'icon_allergene_lupin',
            icon_allergene_soja: 'icon_allergene_soja',
            icon_allergene_celeri: 'icon_allergene_celeri',
            icon_allergene_mollusques: 'icon_allergene_mollusques',
            icon_allergene_sesame: 'icon_allergene_sesame',
            icon_allergene_sulfites: 'icon_allergene_sulfites',
            icon_allergene_poissons: 'icon_allergene_poissons',
            icon_allergene_gluten: 'icon_allergene_gluten',
            icon_allergene_lait: 'icon_allergene_lait',
            icon_allergene_arachides: 'icon_allergene_arachides',
            icon_allergene_fruits_coques: 'icon_allergene_fruits_coques',
            icon_allergene_oeufs: 'icon_allergene_oeufs',
            icon_allergene_crustaces: 'icon_allergene_crustaces',
            icon_trcd: 'icon_trcd',
            icon_instagram: 'icon_instagram',
            icon_youtube: 'icon_youtube',
            icon_etat_de_debut_cours_EDT: 'icon_etat_de_debut_cours_EDT',
            icon_gaev_mixte: 'icon_gaev_mixte',
            icon_forum: 'icon_forum',
            icon_dupliquer: 'icon_dupliquer',
            icon_bouclier_rgpd: 'icon_bouclier_rgpd',
            icon_mairie: 'icon_mairie',
            icon_comment_vide: 'icon_comment_vide',
            icon_co_enseignement: 'icon_co_enseignement',
            icon_orientation: 'icon_orientation',
            icon_coordinateur_pole_activite: 'icon_coordinateur_pole_activite',
            icon_fiche_t_vide: 'icon_fiche_t_vide',
            icon_modif_edt: 'icon_modif_edt',
            icon_trmd: 'icon_trmd',
            icon_plume: 'icon_plume',
            icon_pipette: 'icon_pipette',
            icon_carre: 'icon_carre',
            icon_alternance: 'icon_alternance',
            icon_sigma: 'icon_sigma',
            icon_suivi: 'icon_suivi',
            icon_bilan_domaine: 'icon_bilan_domaine',
            icon_grille_domaine: 'icon_grille_domaine',
            icon_jeux_coefficients: 'icon_jeux_coefficients',
            icon_diagramme_frequentation: 'icon_diagramme_frequentation',
            icon_demi_journee: 'icon_demi_journee',
            icon_service: 'icon_service',
            icon_affichage_classe: 'icon_affichage_classe',
            icon_externalise: 'icon_externalise',
            icon_reglages: 'icon_reglages',
            icon_percent: 'icon_percent',
            icon_travail_donne_pour_cours: 'icon_travail_donne_pour_cours',
            icon_affichage_pluri_annuel: 'icon_affichage_pluri_annuel',
            icon_livret_competence: 'icon_livret_competence',
            icon_afficher_cours_plus_promo_liee: 'icon_afficher_cours_plus_promo_liee',
            icon_liste_appel_non_fait: 'icon_liste_appel_non_fait',
            icon_tableau_de_bord: 'icon_tableau_de_bord',
            icon_maquette: 'icon_maquette',
            icon_resultat_evaluation: 'icon_resultat_evaluation',
            icon_recap_heure_decharge_motif: 'icon_recap_heure_decharge_motif',
            icon_semaine_presence: 'icon_semaine_presence',
            icon_afficher_occupation: 'icon_afficher_occupation',
            icon_debut_cours: 'icon_debut_cours',
            icon_volume_horaire: 'icon_volume_horaire',
            icon_trombi_enseignant: 'icon_trombi_enseignant',
            icon_puzzle: 'icon_puzzle',
            icon_planning_multisemaines: 'icon_planning_multisemaines',
            icon_planning_general: 'icon_planning_general',
            icon_engagement: 'icon_engagement',
            icon_contour_check: 'icon_contour_check',
            icon_sujet: 'icon_sujet',
            icon_afficher_cours_groupe_promo_plus_TD: 'icon_afficher_cours_groupe_promo_plus_TD',
            icon_afficher_cours_TD_plus_TD: 'icon_afficher_cours_TD_plus_TD',
            icon_cle: 'icon_cle',
            icon_legende: 'icon_legende',
            icon_apprentissage_referentiel: 'icon_apprentissage_referentiel',
            icon_apprentissage_suivi: 'icon_apprentissage_suivi',
            icon_apprentissage_synthese: 'icon_apprentissage_synthese',
            icon_lien_entrepartie: 'icon_lien_entrepartie',
            icon_pause: 'icon_pause',
            icon_desiderata: 'icon_desiderata',
            icon_carnet_liaison: 'icon_carnet_liaison',
            icon_fleche_droite: 'icon_fleche_droite',
            icon_ecole: 'icon_ecole',
            icon_signature: 'icon_signature',
            icon_sous_discussion: 'icon_sous_discussion',
            icon_dispense: 'icon_dispense',
            icon_convocation: 'icon_convocation',
            icon_valorisation: 'icon_valorisation',
            icon_afficher_cours_TD_plus_promo: 'icon_afficher_cours_TD_plus_promo',
            icon_afficher_cours_promo_plus_TD: 'icon_afficher_cours_promo_plus_TD',
            icon_graphe_araigne: 'icon_graphe_araigne',
            icon_accompagnant: 'icon_accompagnant',
            icon_graphe_evolution: 'icon_graphe_evolution',
            icon_graphe_ecart: 'icon_graphe_ecart',
            icon_chaine_double: 'icon_chaine_double',
            icon_suivant: 'icon_suivant',
            icon_precedent: 'icon_precedent',
            icon_fiche_eleve: 'icon_fiche_eleve',
            icon_fiche_T_triple: 'icon_fiche_T_triple',
            icon_fiche_T_double: 'icon_fiche_T_double',
            icon_photo: 'icon_photo',
            icon_absences_prevue: 'icon_absences_prevue',
            icon_attente_publication: 'icon_attente_publication',
            icon_menu_burger: 'icon_menu_burger',
            icon_rond: 'icon_rond',
            icon_filtre: 'icon_filtre',
            icon_work: 'icon_work',
            icon_plus_cercle: 'icon_plus_cercle',
            icon_systeme_correcteur: 'icon_systeme_correcteur',
            icon_charge_travail: 'icon_charge_travail',
            icon_btn_cours_non_places: 'icon_btn_cours_non_places',
            icon_anciens_etudiants_pour_bandeau_titre: 'icon_anciens_etudiants_pour_bandeau_titre',
            icon_afficher_modification_dispense_jour: 'icon_afficher_modification_dispense_jour',
            icon_calendar_large: 'icon_calendar_large',
            icon_post_it_rempli: 'icon_post_it_rempli',
            icon_groupes_accompagnement_personnalise: 'icon_groupes_accompagnement_personnalise',
            icon_egal: 'icon_egal',
            icon_fleche_bas: 'icon_fleche_bas',
            icon_maintenance_informatique: 'icon_maintenance_informatique',
            icon_exercice_numerique: 'icon_exercice_numerique',
            icon_fiche_T: 'icon_fiche_T',
            icon_qcm_Evl_Devoir_20: 'icon_qcm_Evl_Devoir_20',
            icon_qcm_Evl_Devoir_10: 'icon_qcm_Evl_Devoir_10',
            icon_retirer_bibliotheque: 'icon_retirer_bibliotheque',
            icon_supprimer_pj: 'icon_supprimer_pj',
            icon_cloud_pronote_trait: 'icon_cloud_pronote_trait',
            icon_pinceau: 'icon_pinceau',
            icon_ne_pas_deranger: 'icon_ne_pas_deranger',
            icon_text: 'icon_text',
            icon_case_inactive: 'icon_case_inactive',
            icon_justifier: 'icon_justifier',
            icon_discussion_repondu: 'icon_discussion_repondu',
            icon_nouvelle_conversation: 'icon_nouvelle_conversation',
            icon_plus_fin: 'icon_plus_fin',
            icon_check_fin: 'icon_check_fin',
            icon_case_indetermine: 'icon_case_indetermine',
            icon_case_on: 'icon_case_on',
            icon_radio_on: 'icon_radio_on',
            icon_radio_off: 'icon_radio_off',
            icon_info_sondage_publier: 'icon_info_sondage_publier',
            icon_info_sondage_non_publier: 'icon_info_sondage_non_publier',
            icon_pastille_evaluation: 'icon_pastille_evaluation',
            icon_details_seance: 'icon_details_seance',
            icon_email_participant: 'icon_email_participant',
            icon_liste_etudiant: 'icon_liste_etudiant',
            icon_cent_pourcent: 'icon_cent_pourcent',
            icon_fleche_suivant: 'icon_fleche_suivant',
            icon_fleche_precedent: 'icon_fleche_precedent',
            icon_fleche_num_gauche: 'icon_fleche_num_gauche',
            icon_DS: 'icon_DS',
            icon_cours_virtuel: 'icon_cours_virtuel',
            icon_cours_virtuel_lien: 'icon_cours_virtuel_lien',
            icon_qcm_associer: 'icon_qcm_associer',
            icon_dupliquer_question: 'icon_dupliquer_question',
            icon_supprimer_question: 'icon_supprimer_question',
            icon_nouvelle_question: 'icon_nouvelle_question',
            icon_nouveau_qcm: 'icon_nouveau_qcm',
            icon_qcm: 'icon_qcm',
            icon_bulletin_officiel: 'icon_bulletin_officiel',
            icon_devoir_rendre: 'icon_devoir_rendre',
            icon_devoir_deposer: 'icon_devoir_deposer',
            icon_retour_mobile: 'icon_retour_mobile',
            icon_info_widget: 'icon_info_widget',
            icon_disquette_pleine: 'icon_disquette_pleine',
            icon_cloud_pronote: 'icon_cloud_pronote',
            icon_eleve_detache: 'icon_eleve_detache',
            icon_strategie_notif: 'icon_strategie_notif',
            icon_strategie_code_pin: 'icon_strategie_code_pin',
            icon_Message_Alerte_Contenu_Inapproprie: 'icon_Message_Alerte_Contenu_Inapproprie',
            icon_discussion_terminee: 'icon_discussion_terminee',
            icon_sortir_reintegrer_conversation: 'icon_sortir_reintegrer_conversation',
            icon_brouillon_discussion: 'icon_brouillon_discussion',
            icon_purger_messages: 'icon_purger_messages',
            icon_archiver_discussion: 'icon_archiver_discussion',
            icon_classer_discussion: 'icon_classer_discussion',
            icon_discussion_cours: 'icon_discussion_cours',
            icon_calendrier_aujourdhui: 'icon_calendrier_aujourdhui',
            icon_transferer_discussion: 'icon_transferer_discussion',
            icon_nouvelle_discussion: 'icon_nouvelle_discussion',
            icon_systeme_conversation: 'icon_systeme_conversation',
            icon_conversation_cours: 'icon_conversation_cours',
            icon_conversation_alerte: 'icon_conversation_alerte',
            icon_conversation_contact_vie_sco: 'icon_conversation_contact_vie_sco',
            icon_observation_attention_parents: 'icon_observation_attention_parents',
            icon_encouragement: 'icon_encouragement',
            icon_saisie_cahier_texte_V2: 'icon_saisie_cahier_texte_V2',
            icon_Masquer_cours_annule: 'icon_Masquer_cours_annule',
            icon_sondage_bibliotheque: 'icon_sondage_bibliotheque',
            icon_fermeture_widget: 'icon_fermeture_widget',
            icon_affichage_widget: 'icon_affichage_widget',
            icon_papillon_notif: 'icon_papillon_notif',
            icon_papillon_notif_cercle: 'icon_papillon_notif_cercle',
            icon_appel_non_fait: 'icon_appel_non_fait',
            icon_piece_jointe: 'icon_piece_jointe',
            icon_edt_permanence: 'icon_edt_permanence',
            icon_connexion_edt: 'icon_connexion_edt',
            icon_connexion_pronote: 'icon_connexion_pronote',
            icon_connexion_http: 'icon_connexion_http',
            icon_appreciation_manquante: 'icon_appreciation_manquante',
            icon_filigrane_ard: 'icon_filigrane_ard',
            icon_filigrane_bulletins: 'icon_filigrane_bulletins',
            icon_lien_cliquable: 'icon_lien_cliquable',
            icon_calculatrice: 'icon_calculatrice',
            icon_fiche_cours_partage: 'icon_fiche_cours_partage',
            icon_cantine_entree: 'icon_cantine_entree',
            icon_cantine_festif: 'icon_cantine_festif',
            icon_venus: 'icon_venus',
            icon_mars: 'icon_mars',
            icon_troisieme_sexe: 'icon_troisieme_sexe',
            icon_administrateur_hp: 'icon_administrateur_hp',
            icon_administrateur_base: 'icon_administrateur_base',
            icon_uniF2C0: 'icon_uniF2C0',
            icon_cantine_assembler_place: 'icon_cantine_assembler_place',
            icon_cantine_bio: 'icon_cantine_bio',
            icon_plat: 'icon_plat',
            icon_cantine_accompagnement: 'icon_cantine_accompagnement',
            icon_cantine_dessert: 'icon_cantine_dessert',
            icon_cantine_fromage: 'icon_cantine_fromage',
            icon_glass: 'icon_glass',
            icon_casier_trait: 'icon_casier_trait',
            icon_reservation_materiel: 'icon_reservation_materiel',
            icon_diagramme: 'icon_diagramme',
            icon_save: 'icon_save',
            icon_etiquette: 'icon_etiquette',
            icon_envelope: 'icon_envelope',
            icon_download_alt: 'icon_download_alt',
            icon_print: 'icon_print',
            icon_comments: 'icon_comments',
            icon_mobile_phone: 'icon_mobile_phone',
            icon_mode_conseil_classe: 'icon_mode_conseil_classe',
            icon_alerte_oraux: 'icon_alerte_oraux',
            icon_alerte_demande: 'icon_alerte_demande',
            icon_total_colonne: 'icon_total_colonne',
            icon_total_ligne: 'icon_total_ligne',
            icon_ordre_chronologique: 'icon_ordre_chronologique',
            icon_cumul_liste: 'icon_cumul_liste',
            icon_fleche_num: 'icon_fleche_num',
            icon_fleche_num_bas: 'icon_fleche_num_bas',
            icon_coller_liste: 'icon_coller_liste',
            icon_diffuser_info: 'icon_diffuser_info',
            icon_copier_liste: 'icon_copier_liste',
            icon_saisie_appreciation: 'icon_saisie_appreciation',
            icon_reservation_salle: 'icon_reservation_salle',
            icon_saisie_cahier_texte: 'icon_saisie_cahier_texte',
            icon_saisie_note: 'icon_saisie_note',
            icon_faire_appel: 'icon_faire_appel',
            icon_saisie_evaluation: 'icon_saisie_evaluation',
            icon_nouveau_document: 'icon_nouveau_document',
            icon_qr_code: 'icon_qr_code',
            icon_nouvelles_evals: 'icon_nouvelles_evals',
            icon_pour_classe: 'icon_pour_classe',
            icon_double_check_vide: 'icon_double_check_vide',
            icon_double_check: 'icon_double_check',
            icon_pour_ecole: 'icon_pour_ecole',
            icon_delete_clavier_mobile: 'icon_delete_clavier_mobile',
            icon_competence_non_rendu: 'icon_competence_non_rendu',
            icon_tres_satisfait: 'icon_tres_satisfait',
            icon_insatisfait: 'icon_insatisfait',
            icon_tres_insatisfait: 'icon_tres_insatisfait',
            icon_chaine: 'icon_chaine',
            icon_sens_interdit: 'icon_sens_interdit',
            icon_recap_vs_programmation: 'icon_recap_vs_programmation',
            icon_punition_exclusion: 'icon_punition_exclusion',
            icon_calendar_empty: 'icon_calendar_empty',
            icon_mesure_conservatoire: 'icon_mesure_conservatoire',
            icon_observation: 'icon_observation',
            icon_Defaut_de_carnet: 'icon_Defaut_de_carnet',
            icon_incident: 'icon_incident',
            icon_lsu: 'icon_lsu',
            icon_tel_fax: 'icon_tel_fax',
            icon_tel_personne_autorise: 'icon_tel_personne_autorise',
            icon_tel_urgence: 'icon_tel_urgence',
            icon_competence_dispense: 'icon_competence_dispense',
            icon_competence_absent: 'icon_competence_absent',
            icon_nouvel_evenement: 'icon_nouvel_evenement',
            icon_diffuser_sondage: 'icon_diffuser_sondage',
            icon_diffuser_information: 'icon_diffuser_information',
            icon_casier: 'icon_casier',
            icon_retard: 'icon_retard',
            icon_punition: 'icon_punition',
            icon_recap_cours: 'icon_recap_cours',
            icon_intervenants: 'icon_intervenants',
            icon_cours_annule: 'icon_cours_annule',
            icon_absences: 'icon_absences',
            icon_academie: 'icon_academie',
            icon_entreprise: 'icon_entreprise',
            icon_eleve: 'icon_eleve',
            icon_parents: 'icon_parents',
            icon_enseignant_prof: 'icon_enseignant_prof',
            icon_appariteur: 'icon_appariteur',
            icon_dernieres_evals: 'icon_dernieres_evals',
            icon_communiquer: 'icon_communiquer',
            icon_infos_sondages: 'icon_infos_sondages',
            icon_ical: 'icon_ical',
            icon_doc_telech: 'icon_doc_telech',
            icon_bulletin: 'icon_bulletin',
            icon_contenu_cours: 'icon_contenu_cours',
            icon_feuille_appel: 'icon_feuille_appel',
            icon_notes_etoile: 'icon_notes_etoile',
            icon_releve_notes: 'icon_releve_notes',
            icon_taf: 'icon_taf',
            icon_vs: 'icon_vs',
            icon_clic: 'icon_clic',
            icon_contact_vs: 'icon_contact_vs',
            icon_editeur: 'icon_editeur',
            icon_utilisateur: 'icon_utilisateur',
            icon_num_0: 'icon_num_0',
            icon_num_1: 'icon_num_1',
            icon_num_2: 'icon_num_2',
            icon_num_3: 'icon_num_3',
            icon_num_4: 'icon_num_4',
            icon_num_5: 'icon_num_5',
            icon_num_6: 'icon_num_6',
            icon_num_7: 'icon_num_7',
            icon_num_8: 'icon_num_8',
            icon_num_9: 'icon_num_9',
            icon_pdf: 'icon_pdf',
            icon_salle_porte: 'icon_salle_porte',
            icon_secretariat: 'icon_secretariat',
            icon_stats: 'icon_stats',
            icon_notdef: 'icon_notdef',
            icon_alerte_ppms: 'icon_alerte_ppms',
            icon_alert_ppms_notif: 'icon_alert_ppms_notif',
            icon_logo_client_not: 'icon_logo_client_not',
            icon_music: 'icon_music',
            icon_search: 'icon_search',
            icon_heart: 'icon_heart',
            icon_star: 'icon_star',
            icon_star_empty: 'icon_star_empty',
            icon_user: 'icon_user',
            icon_film: 'icon_film',
            icon_th_large: 'icon_th_large',
            icon_th: 'icon_th',
            icon_th_list: 'icon_th_list',
            icon_ok: 'icon_ok',
            icon_remove: 'icon_remove',
            icon_zoom_in: 'icon_zoom_in',
            icon_zoom_out: 'icon_zoom_out',
            icon_off: 'icon_off',
            icon_cog: 'icon_cog',
            icon_trash: 'icon_trash',
            icon_home: 'icon_home',
            icon_file_alt: 'icon_file_alt',
            icon_time: 'icon_time',
            icon_inbox: 'icon_inbox',
            icon_repeat: 'icon_repeat',
            icon_refresh: 'icon_refresh',
            icon_list_alt: 'icon_list_alt',
            icon_lock: 'icon_lock',
            icon_flag: 'icon_flag',
            icon_headphones: 'icon_headphones',
            icon_volume_off: 'icon_volume_off',
            icon_volume_down: 'icon_volume_down',
            icon_volume_up: 'icon_volume_up',
            icon_book: 'icon_book',
            icon_bookmark: 'icon_bookmark',
            icon_camera: 'icon_camera',
            icon_font: 'icon_font',
            icon_bold: 'icon_bold',
            icon_italic: 'icon_italic',
            icon_text_height: 'icon_text_height',
            icon_text_width: 'icon_text_width',
            icon_align_left: 'icon_align_left',
            icon_align_center: 'icon_align_center',
            icon_align_right: 'icon_align_right',
            icon_align_justify: 'icon_align_justify',
            icon_list: 'icon_list',
            icon_indent_left: 'icon_indent_left',
            icon_indent_right: 'icon_indent_right',
            icon_facetime_video: 'icon_facetime_video',
            icon_picture: 'icon_picture',
            icon_pencil: 'icon_pencil',
            icon_map_marker: 'icon_map_marker',
            icon_adjust: 'icon_adjust',
            icon_edit: 'icon_edit',
            icon_share: 'icon_share',
            icon_check: 'icon_check',
            icon_chevron_left: 'icon_chevron_left',
            icon_chevron_right: 'icon_chevron_right',
            icon_question_sign: 'icon_question_sign',
            icon_info_sign: 'icon_info_sign',
            icon_arrow_left: 'icon_arrow_left',
            icon_arrow_right: 'icon_arrow_right',
            icon_arrow_up: 'icon_arrow_up',
            icon_arrow_down: 'icon_arrow_down',
            icon_resize_full: 'icon_resize_full',
            icon_resize_small: 'icon_resize_small',
            icon_plus: 'icon_plus',
            icon_minus: 'icon_minus',
            icon_asterisk: 'icon_asterisk',
            icon_exclamation_sign: 'icon_exclamation_sign',
            icon_eye_open: 'icon_eye_open',
            icon_eye_close: 'icon_eye_close',
            icon_warning_sign: 'icon_warning_sign',
            icon_calendar: 'icon_calendar',
            icon_random: 'icon_random',
            icon_comment: 'icon_comment',
            icon_chevron_up: 'icon_chevron_up',
            icon_chevron_down: 'icon_chevron_down',
            icon_folder_close: 'icon_folder_close',
            icon_folder_open: 'icon_folder_open',
            icon_resize_vertical: 'icon_resize_vertical',
            icon_resize_horizontal: 'icon_resize_horizontal',
            icon_bar_chart: 'icon_bar_chart',
            icon_cogs: 'icon_cogs',
            icon_star_half: 'icon_star_half',
            icon_signout: 'icon_signout',
            icon_pushpin: 'icon_pushpin',
            icon_external_link: 'icon_external_link',
            icon_signin: 'icon_signin',
            icon_trophy: 'icon_trophy',
            icon_upload_alt: 'icon_upload_alt',
            icon_phone: 'icon_phone',
            icon_check_empty: 'icon_check_empty',
            icon_bookmark_empty: 'icon_bookmark_empty',
            icon_phone_sign: 'icon_phone_sign',
            icon_twitter: 'icon_twitter',
            icon_facebook: 'icon_facebook',
            icon_unlock: 'icon_unlock',
            icon_credit_card: 'icon_credit_card',
            icon_rss: 'icon_rss',
            icon_hdd: 'icon_hdd',
            icon_bullhorn: 'icon_bullhorn',
            icon_bell: 'icon_bell',
            icon_globe: 'icon_globe',
            icon_wrench: 'icon_wrench',
            icon_briefcase: 'icon_briefcase',
            icon_fullscreen: 'icon_fullscreen',
            icon_group: 'icon_group',
            icon_link: 'icon_link',
            icon_cloud: 'icon_cloud',
            icon_paper_clip: 'icon_paper_clip',
            icon_reorder: 'icon_reorder',
            icon_ul: 'icon_ul',
            icon_ol: 'icon_ol',
            icon_strikethrough: 'icon_strikethrough',
            icon_underline: 'icon_underline',
            icon_table: 'icon_table',
            icon_magic: 'icon_magic',
            icon_undo: 'icon_undo',
            icon_legal: 'icon_legal',
            icon_bolt: 'icon_bolt',
            icon_sitemap: 'icon_sitemap',
            icon_umbrella: 'icon_umbrella',
            icon_light_bulb: 'icon_light_bulb',
            icon_exchange: 'icon_exchange',
            icon_cloud_download: 'icon_cloud_download',
            icon_cloud_upload: 'icon_cloud_upload',
            icon_user_md: 'icon_user_md',
            icon_stethoscope: 'icon_stethoscope',
            icon_suitcase: 'icon_suitcase',
            icon_food: 'icon_food',
            icon_file_text_alt: 'icon_file_text_alt',
            icon_building: 'icon_building',
            icon_ambulance: 'icon_ambulance',
            icon_medkit: 'icon_medkit',
            icon_h_sign: 'icon_h_sign',
            icon_f0fe: 'icon_f0fe',
            icon_angle_left: 'icon_angle_left',
            icon_angle_right: 'icon_angle_right',
            icon_angle_up: 'icon_angle_up',
            icon_angle_down: 'icon_angle_down',
            icon_desktop: 'icon_desktop',
            icon_laptop: 'icon_laptop',
            icon_tablet: 'icon_tablet',
            icon_circle_blank: 'icon_circle_blank',
            icon_quote_left: 'icon_quote_left',
            icon_quote_right: 'icon_quote_right',
            icon_reply: 'icon_reply',
            icon_folder_close_alt: 'icon_folder_close_alt',
            icon_folder_open_alt: 'icon_folder_open_alt',
            icon_smile: 'icon_smile',
            icon_star_half_empty: 'icon_star_half_empty',
            icon_unlink: 'icon_unlink',
            icon_question: 'icon_question',
            icon_exclamation: 'icon_exclamation',
            icon_microphone: 'icon_microphone',
            icon_microphone_off: 'icon_microphone_off',
            icon_unlock_alt: 'icon_unlock_alt',
            icon_ellipsis_horizontal: 'icon_ellipsis_horizontal',
            icon_ellipsis_vertical: 'icon_ellipsis_vertical',
            icon_play_sign: 'icon_play_sign',
            icon_eur: 'icon_eur',
            icon_gbp: 'icon_gbp',
            icon_usd: 'icon_usd',
            icon_female: 'icon_female',
            icon_male: 'icon_male',
            icon_sun: 'icon_sun',
            icon_lune: 'icon_lune',
            icon_archive: 'icon_archive',
            icon_bug: 'icon_bug',
            icon_handicap: 'icon_handicap',
            icon_diplome: 'icon_diplome',
            icon_voiture: 'icon_voiture',
            icon_serveur: 'icon_serveur',
            icon_uniF1C1: 'icon_uniF1C1',
            icon_fichier_word: 'icon_fichier_word',
            icon_fichier_excel: 'icon_fichier_excel',
            icon_fichier_powerpoint: 'icon_fichier_powerpoint',
            icon_fichier_image: 'icon_fichier_image',
            icon_fichier_zip: 'icon_fichier_zip',
            icon_fichier_audio: 'icon_fichier_audio',
            icon_fichier_video: 'icon_fichier_video',
            icon_fichier_web: 'icon_fichier_web',
            icon_assistance: 'icon_assistance',
            icon_envoyer: 'icon_envoyer',
            icon_retour_arriere: 'icon_retour_arriere',
            icon_paragraphe: 'icon_paragraphe',
            icon_parametre: 'icon_parametre',
            icon_ballon_foot: 'icon_ballon_foot',
            icon_copyright: 'icon_copyright',
            icon_arobase: 'icon_arobase',
            icon_anniversaire: 'icon_anniversaire',
            icon_diagramme_camembert: 'icon_diagramme_camembert',
            icon_graphe_courbe: 'icon_graphe_courbe',
            icon_toggle_switch_off: 'icon_toggle_switch_off',
            icon_toggle_switch_on: 'icon_toggle_switch_on',
            icon_velo: 'icon_velo',
            icon_bus: 'icon_bus',
            icon_internat: 'icon_internat',
            icon_curseur_souris: 'icon_curseur_souris',
            icon_curseur_typo: 'icon_curseur_typo',
            icon_reserver: 'icon_reserver',
            icon_cc: 'icon_cc',
            icon_ecran: 'icon_ecran',
            icon_usb: 'icon_usb',
            icon_accessibilite_web: 'icon_accessibilite_web',
            icon_uniF2A0: 'icon_uniF2A0',
            icon_uniF2A2: 'icon_uniF2A2',
            icon_uniF2A4: 'icon_uniF2A4',
            icon_uniF2A8: 'icon_uniF2A8',
            icon_projet_accompagnement: 'icon_projet_accompagnement',
            icon_uniF2BA: 'icon_uniF2BA',
            icon_uniF2BC: 'icon_uniF2BC',
            icon_uniF2BD: 'icon_uniF2BD',
            icon_uniF2BE: 'icon_uniF2BE',
            icon_uniF2C3: 'icon_uniF2C3',
            icon_uniF2D0: 'icon_uniF2D0',
            icon_uniF2D2: 'icon_uniF2D2',
            icon_uniF2D4: 'icon_uniF2D4'
        };
    },
    fn: 'fonts.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml_BtnImage_css_1 = require("IEHtml.BtnImage.css");
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetHtml_1 = require("ObjetHtml");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const Divers_css_1 = require("Divers.css");
        const Tooltip_1 = require("Tooltip");
        const fonts_css_1 = require("fonts.css");
        const Tooltip_module_css_1 = require("Tooltip.module.css");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TradBtnImage = ObjetTraduction_1.TraductionsModule.getModule('BtnImage', {
            InformationsComplementaires: ''
        });
        var TypeEtatBtnImage;
        (function(TypeEtatBtnImage) {
            TypeEtatBtnImage[TypeEtatBtnImage["NonSelectionne"] = 0] = "NonSelectionne";
            TypeEtatBtnImage[TypeEtatBtnImage["Inactif"] = 1] = "Inactif";
            TypeEtatBtnImage[TypeEtatBtnImage["ClicNonSelectionne"] = 2] = "ClicNonSelectionne";
            TypeEtatBtnImage[TypeEtatBtnImage["Selectionne"] = 3] = "Selectionne";
            TypeEtatBtnImage[TypeEtatBtnImage["SurvolNonSelectionne"] = 4] = "SurvolNonSelectionne";
            TypeEtatBtnImage[TypeEtatBtnImage["SurvolSelectionne"] = 5] = "SurvolSelectionne";
        }
        )(TypeEtatBtnImage || (TypeEtatBtnImage = {}));
        IEHtml.addBalise('ie-btnimage', (aContexteCourant, aOutils) => {
            return _ieBtn(false, false, aContexteCourant, aOutils);
        }
        );
        IEHtml.addBalise('ie-btnicon', (aContexteCourant, aOutils) => {
            return _ieBtn(true, false, aContexteCourant, aOutils);
        }
        );
        IEHtml.addBalise('ie-btntooltip', (aContexteCourant, aOutils) => {
            return _ieBtn(true, true, aContexteCourant, aOutils);
        }
        );
        function _ieBtn(aForcerIcone, aEstBtnTooltip, aContexteCourant, aOutils) {
            let lEstIcone;
            let lEstSVG;
            let lInfosGetSelection;
            function _actualiser(aJBouton, aData, aEtat) {
                if (lEstIcone) {
                    if (aData.$selection) {
                        aJBouton.addClass('btnImageSelection');
                    } else {
                        aJBouton.removeClass('btnImageSelection');
                    }
                    if (lInfosGetSelection && lInfosGetSelection.valide) {
                        aJBouton.attr('aria-pressed', aData.$selection ? 'true' : 'false');
                    }
                }
                if (lEstIcone || lEstSVG) {
                    return;
                }
                if (!aData.$disabled) {
                    if (aData.$selection) {
                        aData.$genre = aEtat.survol ? TypeEtatBtnImage.SurvolSelectionne : TypeEtatBtnImage.Selectionne;
                    } else if (aEtat.clique) {
                        aData.$genre = TypeEtatBtnImage.ClicNonSelectionne;
                    } else {
                        aData.$genre = aEtat.survol ? TypeEtatBtnImage.SurvolNonSelectionne : TypeEtatBtnImage.NonSelectionne;
                    }
                } else {
                    aData.$genre = TypeEtatBtnImage.Inactif;
                }
                aJBouton.css('background-position', (-aData.$width * aData.$genre) + 'px 0');
            }
            const lEtat = {
                clique: false,
                survol: false
            };
            Object.assign(aContexteCourant.data, {
                $width: 20,
                $selection: false,
                $genre: TypeEtatBtnImage.NonSelectionne,
                $disabled: false
            });
            const lData = aContexteCourant.data;
            const lNodeName = aContexteCourant.node.nodeName.toLowerCase();
            const lInnerHtml = aContexteCourant.node.innerHTML;
            lEstSVG = !!lInnerHtml && $(aContexteCourant.node).find('svg').length > 0;
            const lEstIconeStandard = aForcerIcone || $(aContexteCourant.node).hasClass(IEHtml_BtnImage_css_1.StylesIEHtmlBtnImage.btnImageIcon);
            lEstIcone = lEstIconeStandard || $(aContexteCourant.node).hasClass('btn-bandeau') || $(aContexteCourant.node).hasClass('ObjetBoutonMenu_icone');
            let lGetterTooltip;
            const lFuncToolTipDescr = aEstBtnTooltip ? () => {
                if (lGetterTooltip) {
                    return lGetterTooltip();
                }
                return '';
            }
            : false;
            const lBouton = lEstIcone ? ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("i", {
                role: "button",
                tabindex: "0",
                "aria-label": aEstBtnTooltip ? TradBtnImage.InformationsComplementaires : false,
                "ie-tooltipdescribe": lFuncToolTipDescr,
                "data-tooltip-align": aEstBtnTooltip ? Tooltip_1.Tooltip.Align.top : false
            })) : ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("div", {
                role: "button",
                tabindex: "0"
            }));
            const lJBouton = $(lBouton);
            lJBouton.ieData(aContexteCourant.data);
            const lTestWAILabel = () => {
                var _a;
                const lNode = lJBouton.get(0);
                if (lNode && lNode.getAttribute && !['none', 'presentation'].includes(lNode.getAttribute('role')) && !((_a = lNode.closest) === null || _a === void 0 ? void 0 : _a.call(lNode, '[aria-hidden="true"]')) && !lNode.classList.contains(IEHtml.Styles.debugWAIInputIgnoreAssert)) {
                    lNode.classList.add(Divers_css_1.StylesDivers.debugWAIBk);
                }
            }
            ;
            let lInfosEvent, lInfosGetDisabled, lInfosGetTitle, lInfosGetTooltip, lAvecControleSaisie, lDisabled = false, lModele = aOutils.getModel(aContexteCourant);
            const lAvecTooltiplabel = aContexteCourant.node.hasAttribute('ie-tooltiplabel') || aContexteCourant.node.hasAttribute('ie-tooltiplabel-static');
            let lAvecLabelAccessible = lAvecTooltiplabel || aContexteCourant.node.hasAttribute('aria-label') || aContexteCourant.node.hasAttribute('aria-labelledby');
            let lLabelWAIManquant = !lAvecLabelAccessible;
            const lSetDisabled = function(aDisabled) {
                if (aDisabled) {
                    lJBouton.attr('aria-disabled', 'true');
                    lJBouton.addClass(IEHtml_BtnImage_css_1.StylesIEHtmlBtnImage.btnImageDisable);
                    if (aEstBtnTooltip) {
                        lBouton.setAttribute(Tooltip_1.Tooltip.attrDisabled, 'true');
                    }
                } else {
                    lJBouton.get(0).removeAttribute('aria-disabled');
                    lJBouton.removeClass(IEHtml_BtnImage_css_1.StylesIEHtmlBtnImage.btnImageDisable);
                    if (aEstBtnTooltip) {
                        lBouton.removeAttribute(Tooltip_1.Tooltip.attrDisabled);
                    }
                }
            };
            aOutils.copyAttributs(aContexteCourant.node, lBouton, (aName, aValue) => {
                if (aName === 'title' && aValue && (!lInfosGetTitle || !lInfosGetTitle.estFonction)) {
                    if (aEstBtnTooltip) {
                        return false;
                    }
                    if (lAvecTooltiplabel) {
                        return false;
                    }
                    lJBouton.attr('aria-label', aValue);
                    lJBouton.attr(Tooltip_1.Tooltip.attrType, Tooltip_1.Tooltip.Type.default);
                    lLabelWAIManquant = false;
                    return false;
                } else if (aName === 'aria-label') {
                    if (aEstBtnTooltip) {
                        return false;
                    }
                    if (lAvecTooltiplabel) {
                        return false;
                    }
                    lJBouton.attr(Tooltip_1.Tooltip.attrType, Tooltip_1.Tooltip.Type.default);
                    return true;
                } else if (aName === 'disabled') {
                    lDisabled = true;
                    return false;
                }
            }
            );
            if (aEstBtnTooltip) {
                lBouton.classList.add(IEHtml_BtnImage_css_1.StylesIEHtmlBtnImage.btnTooltip, fonts_css_1.StylesFonts.icon_diffuser_info, Divers_css_1.StylesDivers.ThemeBleu);
                lBouton.setAttribute(Tooltip_1.Tooltip.attrType, Tooltip_1.Tooltip.Type.default);
                lBouton.setAttribute(Tooltip_1.Tooltip.attrBtn, 'true');
                lBouton.setAttribute(Tooltip_1.Tooltip.attrClass, Tooltip_module_css_1.StylesTooltip.btntooltip);
            }
            if (lModele) {
                let lGetSelection;
                let lGetterDisabled;
                if (aEstBtnTooltip) {
                    lInfosGetTooltip = aOutils.getAccesParametresModel('getTooltip', aContexteCourant);
                    if (!lInfosGetTooltip.estFonction) {} else {
                        lGetterTooltip = () => {
                            return lInfosGetTooltip.callback([lBouton, lData]);
                        }
                        ;
                    }
                } else {
                    lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant);
                    lInfosGetSelection = aOutils.getAccesParametresModel('getSelection', aContexteCourant);
                    lInfosGetTitle = aOutils.getAccesParametresModel('getTitle', aContexteCourant);
                }
                lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                const lRefresh = aContexteCourant.contexte.refresh;
                lAvecControleSaisie = aOutils.getControleSaisieEvent(lJBouton.get(0));
                if (lInfosEvent === null || lInfosEvent === void 0 ? void 0 : lInfosEvent.estFonction) {
                    lJBouton.eventValidation(function(event) {
                        if (lData.$disabled) {
                            return;
                        }
                        const lAction = () => {
                            const lResult = lInfosEvent.callback([event, this, aContexteCourant.data]);
                            lRefresh();
                            return lResult;
                        }
                        ;
                        if (lAvecControleSaisie) {
                            (0,
                            ControleSaisieEvenement_1.ControleSaisieEvenement)(lAction);
                        } else {
                            return lAction();
                        }
                    });
                }
                if (lInfosGetSelection === null || lInfosGetSelection === void 0 ? void 0 : lInfosGetSelection.valide) {
                    lGetSelection = function() {
                        return !!lInfosGetSelection.callback([aContexteCourant.node, aContexteCourant.data]);
                    }
                    ;
                    lData.$selection = lGetSelection();
                }
                if (lInfosGetDisabled === null || lInfosGetDisabled === void 0 ? void 0 : lInfosGetDisabled.valide) {
                    lGetterDisabled = function() {
                        return !!lInfosGetDisabled.callback([lBouton, aContexteCourant.data]);
                    }
                    ;
                    if (lInfosGetDisabled.estFonction || !lGetterDisabled() || lGetterDisabled() === true) {
                        lDisabled = !!lGetterDisabled();
                    } else {
                        lGetterDisabled = null;
                        IE.log.addLog('echec getDisabled de ie-bouton, proprit incorrecte du model "' + lModele + '"');
                    }
                }
                if (lInfosGetTitle === null || lInfosGetTitle === void 0 ? void 0 : lInfosGetTitle.estFonction) {
                    Tooltip_1.Tooltip.addNodeLabelDescribe(lBouton, 'tooltip btnicon', true, lInfosGetTitle, true);
                    lLabelWAIManquant = false;
                }
                if (lGetSelection || lGetterDisabled) {
                    aOutils.abonnerRefresh( () => {
                        let lActualiser = false;
                        if (lGetSelection) {
                            const lSelection = lGetSelection();
                            if (lSelection !== lData.$selection) {
                                lData.$selection = lSelection;
                                lActualiser = true;
                            }
                        }
                        if (lGetterDisabled) {
                            const lDisabled = !!lGetterDisabled();
                            if (lDisabled !== lData.$disabled) {
                                lData.$disabled = lDisabled;
                                lSetDisabled(lDisabled);
                                lActualiser = true;
                            }
                        }
                        if (lActualiser) {
                            _actualiser(lJBouton, aContexteCourant.data, lEtat);
                        }
                    }
                    , lBouton, aContexteCourant);
                }
            }
            if (!lBouton.style.width) {
                if (!lEstSVG && !lEstIconeStandard) {
                    lBouton.style.width = lData.$width + 'px';
                }
            } else {
                lData.$width = parseInt(lBouton.style.width, 10) || lData.$width;
            }
            lData.$disabled = lDisabled;
            _actualiser(lJBouton, aContexteCourant.data, lEtat);
            if (lDisabled) {
                lSetDisabled(lDisabled);
            }
            lJBouton.addClass(IEHtml_BtnImage_css_1.StylesIEHtmlBtnImage.btnImage).on('focusin mouseover', () => {
                lEtat.survol = true;
                _actualiser(lJBouton, aContexteCourant.data, lEtat);
            }
            ).on('focusout mouseout', () => {
                lEtat.survol = false;
                _actualiser(lJBouton, aContexteCourant.data, lEtat);
            }
            ).on('pointerdown', () => {
                lEtat.clique = true;
                _actualiser(lJBouton, aContexteCourant.data, lEtat);
                Invocateur_1.Invocateur.abonnerUnique(ObjetNavigateur_1.Navigateur.getEventInvocateur('pointerup'), () => {
                    lEtat.clique = false;
                    _actualiser(lJBouton, aContexteCourant.data, lEtat);
                }
                );
            }
            );
            const lRacine = lJBouton.get(0);
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            if (lModele) {
                aOutils.surNodeEtNodeAfter(aContexteCourant);
            }
            aOutils.addCommentaireDebug(lRacine, lNodeName);
            if (lInnerHtml) {
                aOutils.injectHTML({
                    element: lRacine,
                    html: lInnerHtml,
                    controleur: aContexteCourant.controleur,
                    ignorerScroll: true,
                    contexte: aContexteCourant.contexte
                });
            }
            return {
                node: lRacine,
                avecCompileFils: false
            };
        }
    },
    fn: 'iehtml.btnimage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIESwitch = void 0;
        require("IESwitch.css");
        exports.StylesIESwitch = {
            switchField: 'switch-field',
            switch: 'switch',
            lever: 'lever',
            tabbed: 'tabbed'
        };
    },
    fn: 'ieswitch.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlCheckboxRadio = void 0;
        require("IEHtml.CheckboxRadio.css");
        exports.StylesIEHtmlCheckboxRadio = {
            ieswitch: 'ieswitch',
            iecb: 'iecb',
            lever: 'lever',
            filledIn: 'filled-in',
            iecbrbgauche: 'iecbrbgauche',
            iecbrbdroite: 'iecbrbdroite',
            short: 'short',
            asChips: 'as-chips',
            noLabel: 'no-label',
            isDisabled: 'is-disabled',
            isChecked: 'is-checked',
            blinkAnimation: 'blink-animation',
            onAir: 'on-air',
            voeux: 'voeux',
            indisponibilites: 'indisponibilites',
            neutreFoncee: 'neutre-foncee',
            avecCouleurIsDisabled: 'avecCouleur-is-disabled',
            marron: 'marron',
            vert: 'vert',
            rouge: 'rouge',
            lightJaune: 'light-jaune',
            iconic: 'iconic',
            switch: 'switch',
            lblRight: 'lbl-right',
            ApplicationMobileIndex: 'ApplicationMobileIndex',
            onWidgets: 'on-widgets',
            tabbed: 'tabbed',
            showPass: 'show-pass',
            iecbTexteDisabled: 'iecb-texte-disabled',
            coloredLabel: 'colored-label',
            ThemeCatCommunication: 'ThemeCat-communication',
            ThemeCatPedagogie: 'ThemeCat-pedagogie',
            ThemeCatViescolaire: 'ThemeCat-viescolaire',
            ThemeCatResultat: 'ThemeCat-resultat',
            ThemeCatEdt: 'ThemeCat-edt',
            longText: 'long-text'
        };
    },
    fn: 'iehtml.checkboxradio.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IESwitch_css_1 = require("IESwitch.css");
        const IEHtml_CheckboxRadio_css_1 = require("IEHtml.CheckboxRadio.css");
        const IEHtml = require("IEHtml");
        const GUID_1 = require("GUID");
        const AccessApp_1 = require("AccessApp");
        const Divers_css_1 = require("Divers.css");
        var TypeCBRadio;
        (function(TypeCBRadio) {
            TypeCBRadio["checkbox"] = "checkbox";
            TypeCBRadio["radio"] = "radio";
            TypeCBRadio["switch"] = "switch";
        }
        )(TypeCBRadio || (TypeCBRadio = {}));
        const c_GenerateurGUID = new GUID_1.GenerateurGUID();
        function _creerCBEtRB(aContexteCourant, aType, aOutils) {
            const lInnerHTML = aContexteCourant.node.innerHTML;
            const lNomModele = aOutils.getModel(aContexteCourant);
            const lAvecIEHtml = aContexteCourant.node.hasAttribute('ie-html');
            const lAvecIETexte = aContexteCourant.node.hasAttribute('ie-texte');
            const lInfosGetLibelle = lNomModele ? aOutils.getAccesParametresModel('getLibelle', aContexteCourant) : null;
            const lAvecGetLibelle = lInfosGetLibelle && lInfosGetLibelle.estFonction;
            const lAvecLibelle = lInnerHTML.length > 0 || lAvecIEHtml || lAvecIETexte || lAvecGetLibelle;
            let lJModele;
            let lJInput;
            let lRacine;
            let llName;
            let lContexteCourant;
            const lMap = aOutils.getMapDeNode(aContexteCourant.node);
            let lEventMap;
            let lEtatIndetermine = false;
            let lSubstitution = true;
            let lEstDroite = false;
            if (!lEstDroite && aContexteCourant.node.hasAttribute('ie-textleft')) {
                lEstDroite = true;
            }
            aContexteCourant.data.estRadioBouton = aType === TypeCBRadio.radio;
            const lIdInput = lMap['id'] || `cb-${c_GenerateurGUID.get()}-gen-for`;
            let lClassCss;
            let lClassSpan = '';
            if (aType === TypeCBRadio.switch) {
                lClassCss = IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.ieswitch + ' ' + (lEstDroite ? IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.iecbrbdroite : IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.iecbrbgauche);
                lClassSpan = IESwitch_css_1.StylesIESwitch.lever;
            } else {
                lClassCss = IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.iecb + ' ' + (lEstDroite ? IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.iecbrbdroite : IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.iecbrbgauche);
            }
            if ($(aContexteCourant.node).hasClass(IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.asChips)) {
                let lImageIconChips = aContexteCourant.node.getAttribute('ie-icon') || '';
                if (lImageIconChips) {
                    aContexteCourant.node.removeAttribute('ie-icon');
                }
                lClassCss += ' ' + lImageIconChips;
            }
            const lHtmlLabel = (IE.jsx.str("label", {
                class: lClassCss,
                for: lIdInput
            }, IE.jsx.str("input", {
                type: aType !== TypeCBRadio.radio ? 'checkbox' : 'radio',
                id: lIdInput,
                role: aType === TypeCBRadio.switch ? 'switch' : false,
                class: Divers_css_1.StylesDivers.srOnly
            }), IE.jsx.str("span", {
                class: lClassSpan || false,
                "aria-hidden": "true"
            }), !lInnerHTML && lAvecLibelle ? IE.jsx.str("span", null) : ''));
            lJModele = $(aType === TypeCBRadio.switch ? IE.jsx.str("div", {
                class: IESwitch_css_1.StylesIESwitch.switch
            }, lHtmlLabel) : lHtmlLabel);
            lJInput = lJModele.find('input');
            lRacine = lJModele.get(0);
            const lElementInput = lJInput.get(0);
            lJModele.ieData(aContexteCourant.data);
            Object.assign(aContexteCourant.data, {
                $couleurActif: '',
                $couleurInactif: (0,
                AccessApp_1.getApp)().getCouleur().nonEditable.texte,
                $AvecMain: true
            });
            for (llName in lMap) {
                if (llName !== 'type' && llName !== 'ie-textleft' && llName !== 'ie-icon') {
                    try {
                        if (llName === 'style' || llName === 'title' || aOutils.composantsAttributs[llName] || llName === 'aria-hidden' || llName === 'inert') {
                            lJModele.attr(llName, lMap[llName]);
                            if (!lSubstitution && llName !== 'style') {
                                lJInput.removeAttr(llName);
                            }
                        } else if (llName === 'class') {
                            lJModele.addClass(lMap[llName]);
                        } else {
                            if (lSubstitution) {
                                lJInput.attr(llName, lMap[llName]);
                            }
                        }
                    } catch (e) {}
                }
            }
            if (aType === TypeCBRadio.radio && lNomModele) {
                let lName = '';
                const lInfosGetName = aOutils.getAccesParametresModel('getName', aContexteCourant);
                if (lInfosGetName === null || lInfosGetName === void 0 ? void 0 : lInfosGetName.estFonction) {
                    lName = lInfosGetName.callback([aContexteCourant.node]);
                }
                if (lName) {
                    lJInput.attr('name', lName);
                }
            }
            if (aType === TypeCBRadio.radio && !lMap.name && lNomModele && aContexteCourant.data.$modeleParsed && aContexteCourant.controleur) {
                lJInput.attr('name', aContexteCourant.controleur.$GUID + '_' + aContexteCourant.data.$modeleParsed.nom);
            }
            if (aType === TypeCBRadio.checkbox) {
                lEtatIndetermine = lElementInput.indeterminate;
                if (lNomModele) {
                    const lInfosGetIndeterminate = aOutils.getAccesParametresModel('getIndeterminate', aContexteCourant);
                    if (lInfosGetIndeterminate.estFonction) {
                        lEtatIndetermine = !!lInfosGetIndeterminate.callback([aContexteCourant.node]);
                        aOutils.abonnerRefresh( () => {
                            const lEtat = !!lInfosGetIndeterminate.callback([aContexteCourant.node]);
                            if (lEtat !== lElementInput.indeterminate) {
                                lEtatIndetermine = lEtat;
                                lElementInput.indeterminate = lEtatIndetermine;
                            }
                        }
                        , lElementInput, aContexteCourant);
                    }
                }
            }
            lEventMap = {};
            lEventMap.focus = function() {
                $(this).parent().triggerHandler('focusin');
            }
            ;
            lEventMap.blur = function() {
                $(this).parent().triggerHandler('focusout');
            }
            ;
            lJInput.on(lEventMap);
            if (aContexteCourant.data.$modeleValue || aContexteCourant.data.$modelObjectJSX) {
                lContexteCourant = Object.assign({}, aContexteCourant);
                lContexteCourant.node = lElementInput;
                aOutils.gererInputCB(lContexteCourant, lMap.type);
            } else {
                lJInput.on(IEHtml.C_eventsModifyCheckbox, () => {
                    aContexteCourant.contexte.refresh();
                }
                );
            }
            if (lEtatIndetermine) {
                lElementInput.indeterminate = lEtatIndetermine;
            }
            const lJLabelParent = lJInput.closest('label');
            const lGetDisabled = function() {
                return lJInput.is(':disabled');
            };
            let lEstDisabled = lGetDisabled();
            if (lEstDisabled) {
                lJLabelParent.addClass(IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.isDisabled);
            }
            const lGetChecked = function() {
                return lJInput.is(':checked');
            };
            let lEstChecked = lGetChecked();
            if (lEstChecked) {
                lJLabelParent.addClass(IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.isChecked);
            }
            const lGetIndeterminate = function() {
                return lJInput.is(':indeterminate');
            };
            let lEstIndeterminate = lGetIndeterminate();
            if (lEstIndeterminate) {
                lJLabelParent.addClass('is-indeterminate');
            }
            aOutils.abonnerRefresh( () => {
                const lNewEstDisabled = lGetDisabled();
                if (lNewEstDisabled !== lEstDisabled) {
                    if (lNewEstDisabled) {
                        lJLabelParent.addClass(IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.isDisabled);
                    } else {
                        lJLabelParent.removeClass(IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.isDisabled);
                    }
                    lEstDisabled = lNewEstDisabled;
                }
                const lNewEstChecked = lGetChecked();
                if (lNewEstChecked !== lEstChecked) {
                    if (lNewEstChecked) {
                        lJLabelParent.addClass(IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.isChecked);
                    } else {
                        lJLabelParent.removeClass(IEHtml_CheckboxRadio_css_1.StylesIEHtmlCheckboxRadio.isChecked);
                    }
                    lEstChecked = lNewEstChecked;
                }
                const lNewEstIndeterminate = lGetIndeterminate();
                if (lNewEstIndeterminate !== lEstIndeterminate) {
                    if (lNewEstIndeterminate) {
                        lJLabelParent.addClass('is-indeterminate');
                    } else {
                        lJLabelParent.removeClass('is-indeterminate');
                    }
                    lEstIndeterminate = lNewEstIndeterminate;
                }
            }
            , lElementInput, aContexteCourant);
            if (lSubstitution) {
                aOutils.replaceNode(aContexteCourant.node, lRacine);
            }
            aOutils.addCommentaireDebug(lRacine, ('ie-' + aType));
            if (lAvecLibelle) {
                let lDest = lRacine;
                if (aType === TypeCBRadio.switch) {
                    lDest = lRacine.firstChild;
                }
                if (lInnerHTML) {
                    aOutils.injectHTML({
                        element: lDest,
                        html: IE.jsx.str("span", null, lInnerHTML),
                        controleur: aContexteCourant.controleur,
                        ignorerScroll: true,
                        contexte: aContexteCourant.contexte
                    });
                }
                aContexteCourant.nodeTransfertContenuDynamique = lDest.lastChild;
                if (lAvecGetLibelle) {
                    aOutils.addGetterHtml(aContexteCourant, lInfosGetLibelle);
                }
            }
            aContexteCourant.node = lRacine;
            return {
                node: aContexteCourant.node,
                avecCompileFils: false
            };
        }
        IEHtml.addBalise('ie-checkbox', (aContexteCourant, aOutils) => {
            return _creerCBEtRB(aContexteCourant, TypeCBRadio.checkbox, aOutils);
        }
        );
        IEHtml.addBalise('ie-radio', (aContexteCourant, aOutils) => {
            return _creerCBEtRB(aContexteCourant, TypeCBRadio.radio, aOutils);
        }
        );
        IEHtml.addBalise('ie-switch', (aContexteCourant, aOutils) => {
            return _creerCBEtRB(aContexteCourant, TypeCBRadio.switch, aOutils);
        }
        );
    },
    fn: 'iehtml.checkboxradio.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        IEHtml.addAttribut('ie-identite', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lNode = aContexteCourant.node;
            if (lNode.id) {
                return true;
            }
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lCallbackParams = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lCallbackParams.estFonction) {
                return true;
            }
            const lValueCallback = lCallbackParams.callback([aContexteCourant.node]);
            if (!lValueCallback || !lValueCallback.class) {
                return true;
            }
            let lInstance = new lValueCallback.class({
                pere: lValueCallback.pere,
                evenement: lValueCallback.evenement
            });
            lNode.id = lInstance.getNom();
            $(lNode).on('destroyed', () => {
                if (MethodesObjet_1.MethodesObjet.isFunction(lValueCallback.destroy)) {
                    lValueCallback.destroy(lInstance);
                }
                lInstance.free();
                lInstance = null;
            }
            );
            if (MethodesObjet_1.MethodesObjet.isFunction(lValueCallback.init)) {
                lValueCallback.init(lInstance);
            }
            aOutils.surInjectionHtml(aContexteCourant, () => {
                if (MethodesObjet_1.MethodesObjet.isFunction(lInstance.initialiser)) {
                    lInstance.initialiser();
                }
                if (MethodesObjet_1.MethodesObjet.isFunction(lValueCallback.start)) {
                    lValueCallback.start(lInstance);
                }
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, `ie-identite="${lCallbackParams.nomCommentaire || lValue}"`);
            return true;
        }
        );
    },
    fn: 'iehtml.identite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlChips = void 0;
        require("IEHtml.Chips.css");
        exports.StylesIEHtmlChips = {
            ieChips: 'ie-chips',
            btn: 'btn',
            ObjetListe: 'ObjetListe',
            skin_flatDesign: 'skin_flatDesign',
            chipsDesignListe: 'chips-design-liste',
            chipsMinimal: 'chips-minimal',
            disabled: 'disabled',
            avecEvent: 'avec-event',
            pressed: 'pressed',
            noUnderline: 'no-underline',
            iconic: 'iconic',
            noLabel: 'no-label',
            tagStyle: 'tag-style',
            alert: 'alert',
            success: 'success',
            ThemeCatEdt: 'ThemeCat-edt',
            ThemeCatResultat: 'ThemeCat-resultat',
            ThemeCatViescolaire: 'ThemeCat-viescolaire',
            ThemeCatPedagogie: 'ThemeCat-pedagogie',
            ThemeCatCommunication: 'ThemeCat-communication',
            colorTheme: 'color-theme',
            gdRedFoncee: 'gd-red-foncee',
            gdRedMoyen: 'gd-red-moyen',
            gdRedClaire: 'gd-red-claire',
            gdGreenFoncee: 'gd-green-foncee',
            gdGreenMoyen: 'gd-green-moyen',
            gdGreenClaire: 'gd-green-claire',
            gdOrangeFoncee: 'gd-orange-foncee',
            gdOrangeMoyen: 'gd-orange-moyen',
            gdOrangeClaire: 'gd-orange-claire',
            gdBlueFoncee: 'gd-blue-foncee',
            gdBlueMoyen: 'gd-blue-moyen',
            gdBlueClaire: 'gd-blue-claire',
            text: 'text',
            listeUrlChips: 'liste-url-chips',
            maxWidth: 'max-width'
        };
    },
    fn: 'iehtml.chips.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("IEHtml.Chips.css");
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ToucheClavier_1 = require("ToucheClavier");
        const Tooltip_1 = require("Tooltip");
        IEHtml.addBalise('ie-chips', (aContexteCourant, aOutils) => {
            const lModele = aOutils.getModel(aContexteCourant);
            const lInnerHtml = aContexteCourant.node.innerHTML;
            const lHref = aContexteCourant.node.getAttribute('href');
            const lOptions = {
                avecBtn: true,
                classIconeBtn: 'icon_fermeture_widget ',
                titleBtn: ObjetTraduction_1.GTraductions.getValeur('Supprimer'),
                disabled: false,
                selected: false
            };
            const lHtmlInterneChips = IE.jsx.str("div", {
                class: "text",
                "ie-ellipsis": true
            }, lInnerHtml);
            const lElementChips = ObjetHtml_1.GHtml.htmlToDOM(lHref ? IE.jsx.str("a", {
                href: lHref,
                target: "_blank"
            }, lHtmlInterneChips) : IE.jsx.str("div", null, lHtmlInterneChips));
            const lJChips = $(lElementChips);
            let lJBtnSuppr = null;
            let lJRoleButton = $(lElementChips);
            const lJText = lJChips.find('.text');
            let lInfosEvent;
            let lInfosEventBtn;
            let lInfosGetDisabled;
            let lInfosGetOptions;
            let lInfosGetLibelle;
            let lAvecBtnSuppr = false;
            let lFuncGetLabelBtnSuppr = null;
            let lLabelBtnSuppr_bak = '';
            const lRefresh = aContexteCourant.contexte.refresh;
            aOutils.copyAttributs(aContexteCourant.node, lElementChips);
            if (lModele) {
                lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant);
                lInfosEventBtn = aOutils.getAccesParametresModel('eventBtn', aContexteCourant);
                lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                const lInfosGetSelected = aOutils.getAccesParametresModel('getSelected', aContexteCourant);
                lInfosGetOptions = aOutils.getAccesParametresModel('getOptions', aContexteCourant);
                lInfosGetLibelle = aOutils.getAccesParametresModel('getLibelle', aContexteCourant);
                if (lInfosGetOptions.estFonction) {
                    Object.assign(lOptions, lInfosGetOptions.callback([lElementChips]));
                }
                if (lOptions.avecBtn && lOptions.classIconeBtn && lInfosEventBtn && lInfosEventBtn.estFonction) {
                    lAvecBtnSuppr = true;
                    lJRoleButton = lJText;
                }
                let lGetterDisabled;
                if (lInfosGetDisabled.estFonction) {
                    lGetterDisabled = function() {
                        return !!lInfosGetDisabled.callback([lElementChips]);
                    }
                    ;
                    lOptions.disabled = lGetterDisabled();
                }
                const lSetDisabled = function() {
                    var _a;
                    if (lOptions.disabled) {
                        lJRoleButton.attr('aria-disabled', 'true');
                        lJBtnSuppr === null || lJBtnSuppr === void 0 ? void 0 : lJBtnSuppr.attr('aria-disabled', 'true');
                        lJChips.addClass('disabled');
                    } else {
                        lJRoleButton.get(0).removeAttribute('aria-disabled');
                        (_a = lJBtnSuppr === null || lJBtnSuppr === void 0 ? void 0 : lJBtnSuppr.get(0)) === null || _a === void 0 ? void 0 : _a.removeAttribute('aria-disabled');
                        lJChips.removeClass('disabled');
                    }
                };
                if (lInfosGetSelected.estFonction) {
                    lOptions.selected = !!lInfosGetSelected.callback([lElementChips]);
                    lOptions.selected ? lJChips.addClass('pressed') : lJChips.removeClass('pressed');
                    lJRoleButton.attr('aria-pressed', lOptions.selected + '');
                }
                if (lGetterDisabled || lInfosGetSelected.estFonction) {
                    aOutils.abonnerRefresh( () => {
                        if (lGetterDisabled) {
                            const lDisabled = !!lGetterDisabled();
                            if (lDisabled !== lOptions.disabled) {
                                lOptions.disabled = lDisabled;
                                lSetDisabled();
                            }
                        }
                        if (lInfosGetSelected.estFonction) {
                            const lEstSelected = !!lInfosGetSelected.callback([lElementChips]);
                            if (lEstSelected !== lOptions.selected) {
                                lOptions.selected = lEstSelected;
                                lOptions.selected ? lJChips.addClass('pressed') : lJChips.removeClass('pressed');
                                lJRoleButton.attr('aria-pressed', lOptions.selected + '');
                            }
                        }
                    }
                    , lElementChips, aContexteCourant);
                }
                if (lAvecBtnSuppr) {
                    lFuncGetLabelBtnSuppr = () => {
                        return `${lOptions.titleBtn} ${lJText.text()}`;
                    }
                    ;
                    lLabelBtnSuppr_bak = lFuncGetLabelBtnSuppr();
                    lJChips.append(IE.jsx.str("i", {
                        class: ['btn', lOptions.classIconeBtn],
                        role: "button",
                        tabindex: "0",
                        "aria-label": lLabelBtnSuppr_bak,
                        "data-tooltip": Tooltip_1.Tooltip.Type.default
                    }));
                    lJBtnSuppr = lJChips.find('>i');
                }
                if (lOptions.disabled) {
                    lSetDisabled();
                }
            }
            if (!lHref && lInfosEvent && lInfosEvent.estFonction) {
                lJRoleButton.get(0).setAttribute('role', 'button');
                lJRoleButton.get(0).setAttribute('tabindex', '0');
            }
            let lClass = 'ie-chips' + (lHref ? ' AvecMenuContextuel' : '');
            if ((lInfosEvent && lInfosEvent.estFonction) || lHref) {
                lJChips.eventValidation( (aEvent) => {
                    var _a;
                    if ((_a = aEvent.originalEvent) === null || _a === void 0 ? void 0 : _a.__eventBtn__) {
                        return;
                    }
                    if (lOptions.disabled) {
                        if (lHref) {
                            return false;
                        }
                        return;
                    }
                    if ((lInfosEvent && lInfosEvent.estFonction)) {
                        const lResult = lInfosEvent.callback([aEvent, lElementChips]);
                        lRefresh();
                        return lResult;
                    }
                }
                );
                lClass += ' avec-event ie-ripple ie-ripple-claire';
            }
            if (lJBtnSuppr) {
                lJBtnSuppr.eventValidation( (aEvent) => {
                    if (lOptions.disabled) {
                        return;
                    }
                    if (aEvent.originalEvent) {
                        aEvent.originalEvent.__eventBtn__ = true;
                    }
                    let lResult = lInfosEventBtn.callback([aEvent, lElementChips]);
                    lRefresh();
                    if (lHref) {
                        lResult = false;
                    }
                    return lResult;
                }
                );
                lJChips.on('keyup', (aEvent) => {
                    if (lOptions.disabled) {
                        return;
                    }
                    if (ToucheClavier_1.ToucheClavierUtil.estEventSupprimer(aEvent) || aEvent.which === ToucheClavier_1.ToucheClavier.Backspace) {
                        const lResult = lInfosEventBtn.callback([aEvent, lElementChips]);
                        lRefresh();
                        return lResult;
                    }
                }
                );
            }
            lJChips.addClass(lClass);
            const lRacine = lElementChips;
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aContexteCourant.node = lRacine;
            if (lModele) {
                aOutils.surNodeEtNodeAfter(aContexteCourant);
            }
            aContexteCourant.nodeTransfertContenuDynamique = lJText.get(0);
            if (lInfosGetLibelle && lInfosGetLibelle.estFonction) {
                if (aContexteCourant.nodeTransfertContenuDynamique) {
                    aOutils.addGetterHtml(aContexteCourant, lInfosGetLibelle);
                    if (lFuncGetLabelBtnSuppr) {
                        aOutils.abonnerRefresh( () => {
                            if (lInfosGetLibelle) {
                                const lLabelBtnSuppr = lFuncGetLabelBtnSuppr();
                                if (lLabelBtnSuppr !== lLabelBtnSuppr_bak) {
                                    lLabelBtnSuppr_bak = lLabelBtnSuppr;
                                    lJBtnSuppr.get(0).setAttribute('aria-label', lLabelBtnSuppr);
                                }
                            }
                        }
                        , lElementChips, aContexteCourant);
                    }
                }
            }
            aOutils.addCommentaireDebug(lRacine, 'ie-chips');
            return {
                node: lRacine,
                avecCompileFils: true
            };
        }
        );
    },
    fn: 'iehtml.chips.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreEvenementObjetSaisie = void 0;
        var EGenreEvenementObjetSaisie;
        (function(EGenreEvenementObjetSaisie) {
            EGenreEvenementObjetSaisie[EGenreEvenementObjetSaisie["selection"] = 0] = "selection";
            EGenreEvenementObjetSaisie[EGenreEvenementObjetSaisie["deploiement"] = 1] = "deploiement";
            EGenreEvenementObjetSaisie[EGenreEvenementObjetSaisie["fermeture"] = 2] = "fermeture";
        }
        )(EGenreEvenementObjetSaisie || (exports.EGenreEvenementObjetSaisie = EGenreEvenementObjetSaisie = {}));
    },
    fn: 'enumere_evenementobjetsaisie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreSaisie = void 0;
        var EGenreSaisie;
        (function(EGenreSaisie) {
            EGenreSaisie[EGenreSaisie["Combo"] = 2] = "Combo";
            EGenreSaisie[EGenreSaisie["SaisieRecherche"] = 3] = "SaisieRecherche";
        }
        )(EGenreSaisie || (exports.EGenreSaisie = EGenreSaisie = {}));
    },
    fn: 'enumere_saisie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesFormComponents = void 0;
        require("Form-components.css");
        exports.StylesFormComponents = {
            styleInput: 'style-input',
            asInput: 'as-input',
            asPlaceholder: 'as-placeholder',
            listAsMenu: 'list-as-menu',
            labelForInput: 'label-for-input',
            ObjetAffichagePageAvecMenusDeroulants_divPrimaire: 'ObjetAffichagePageAvecMenusDeroulants_divPrimaire',
            PetitEspaceDroit: 'PetitEspaceDroit',
            comboGlobalWrapper: 'combo-global-wrapper',
            asPassword: 'as-password',
            asSearch: 'as-search',
            disabled: 'disabled',
            ObjetCelluleDate: 'ObjetCelluleDate',
            inputWrapper: 'input-wrapper',
            inputWrapperDisabled: 'input-wrapper-disabled',
            btnImageDisable: 'btnImageDisable',
            btnImage: 'btnImage',
            icon: 'icon',
            icon_angle_left: 'icon_angle_left',
            ocb_cont: 'ocb_cont',
            ocbLibelle: 'ocb-libelle',
            ocb_bouton: 'ocb_bouton',
            ocb_icone_gauche: 'ocb_icone_gauche',
            asSelect: 'as-select',
            onMobile: 'on-mobile',
            asMultiChoix: 'as-multi-choix',
            asDatePicker: 'as-date-picker',
            deroulantConteneurShowHide: 'deroulant-conteneur-show-hide',
            listeAsOptions: 'liste-as-options',
            elementDistinct: 'element-distinct',
            titreListe: 'titre-liste',
            asLi: 'as-li',
            listeFondCumul: 'liste-fond-cumul',
            elementIndentation: 'element-indentation',
            selected: 'selected',
            text_empty: 'text_empty',
            dmi_texte_combo: 'dmi_texte_combo',
            iconic: 'iconic',
            multiSelections: 'multi-selections',
            checkConteneur: 'check-conteneur',
            isTactile: 'is-tactile',
            validateConteneur: 'validate-conteneur',
            likeInput: 'like-input',
            isTiny: 'is-tiny',
            tox: 'tox',
            toxTinymce: 'tox-tinymce',
            browserDefault: 'browser-default',
            textareamaxWrapper: 'textareamax-wrapper',
            notHover: 'not-hover',
            realSize: 'real-size',
            avecChips: 'avec-chips',
            asColorPicker: 'as-color-picker',
            ieChips: 'ie-chips',
            themePicker: 'theme-picker',
            carreColor: 'carre-color',
            hasScroll: 'has-scroll',
            objetInterfaceMobile_zoneSelection: 'objetInterfaceMobile_zoneSelection',
            ObjetFenetre_Date_racine: 'ObjetFenetre_Date_racine',
            widget: 'widget',
            btnAvecEdition: 'btn-avec-edition',
            avecPrevsuiv: 'avec-prevsuiv',
            zoneContenu: 'zone-contenu',
            ObjetSaisie: 'ObjetSaisie',
            ieCombo: 'ie-combo',
            ObjetSaisie_cont: 'ObjetSaisie_cont',
            saisieCdtSelection: 'saisie-cdt-selection',
            btnPrevSuiv: 'btn-prev-suiv',
            ieBtnselecteur: 'ie-btnselecteur',
            comboSelecteur: 'combo-selecteur',
            asSelecteur: 'as-selecteur'
        };
    },
    fn: 'form-components.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreDirection = void 0;
        var EGenreDirection;
        (function(EGenreDirection) {
            EGenreDirection[EGenreDirection["SensInverse"] = -1] = "SensInverse";
            EGenreDirection[EGenreDirection["DeuxSenses"] = 0] = "DeuxSenses";
            EGenreDirection[EGenreDirection["SensNormal"] = 1] = "SensNormal";
        }
        )(EGenreDirection || (exports.EGenreDirection = EGenreDirection = {}));
    },
    fn: 'enumere_direction.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreOrientationAffichage = void 0;
        var EGenreOrientationAffichage;
        (function(EGenreOrientationAffichage) {
            EGenreOrientationAffichage[EGenreOrientationAffichage["Vertical"] = 0] = "Vertical";
            EGenreOrientationAffichage[EGenreOrientationAffichage["Horizontal"] = 1] = "Horizontal";
        }
        )(EGenreOrientationAffichage || (exports.EGenreOrientationAffichage = EGenreOrientationAffichage = {}));
    },
    fn: 'enumere_orientationaffichage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Identite = void 0;
        require("Divers.js");
        require("NamespaceIE");
        require("DeclarationExtensionsObjetNatif");
        const IEHtml = require("IEHtml");
        const Callback_1 = require("Callback");
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        const Enumere_Direction_1 = require("Enumere_Direction");
        const Enumere_OrientationAffichage_1 = require("Enumere_OrientationAffichage");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const uGenerateurGUIDIdentite = new GUID_1.GUID.generateur();
        class Identite {
            constructor(aParamsCreate, AIdent, APere, AEvenement) {
                this.pileAbonnementInvocateur = {};
                let lNomConstructionCollection = '';
                if (typeof aParamsCreate === 'string') {
                    this.Nom = this.construireNom(aParamsCreate, AIdent);
                    this.Pere = APere;
                    this.Evenement = AEvenement;
                    this.estRacine = !this.Pere;
                } else {
                    const lParametres = {
                        nomComplet: '',
                        nomObjet: undefined,
                        pere: undefined,
                        evenement: undefined
                    };
                    $.extend(lParametres, aParamsCreate);
                    this.Pere = lParametres.pere || {};
                    this.Evenement = lParametres.evenement;
                    this.estRacine = !!lParametres.estRacine;
                    if (lParametres.nomObjet && lParametres.pere && lParametres.pere instanceof Identite) {
                        this.Nom = lParametres.pere.Nom + '.' + lParametres.nomObjet;
                    } else if (lParametres.nomComplet) {
                        this.Nom = lParametres.nomComplet || '';
                    } else {
                        lNomConstructionCollection = uGenerateurGUIDIdentite.get();
                        this.Nom = `IE.Identite.collection.${lNomConstructionCollection}`;
                        IE.Identite.collection[lNomConstructionCollection] = this;
                    }
                }
                this.callback = new Callback_1.Callback(this.Pere,this.Evenement);
                this._callbacksSurDestruction = [];
                if (this.Pere && this.Pere instanceof Identite) {
                    this.Pere.ajouterInstanceADetruire(this);
                }
                this.options = {};
                this.Actif = true;
                this.Visible = true;
                this.TableauGauche = {};
                this.TableauDroite = {};
                this.TableauHaut = {};
                this.TableauBas = {};
                this.IdPremierElement = '';
                this.idMessageActionRequise = GUID_1.GUID.getId();
                this.tabIndex = 0;
                this.pileEvenementGlobaux = [];
                this.instancesADetruire = {};
                this.controleur = IEHtml.initControleur(this.getControleur(this) || {});
                if (this.controleur) {
                    this.controleur.instance = this;
                }
                if (lNomConstructionCollection) {
                    this.ajouterCallbackSurDestruction( () => {
                        if (IE.Identite.collection[lNomConstructionCollection]) {
                            delete IE.Identite.collection[lNomConstructionCollection];
                        }
                    }
                    );
                }
            }
            setOptions(aOptions) {
                Object.assign(this.options, aOptions);
                return this;
            }
            getOptions() {
                return this.options;
            }
            getPileAbonnement() {
                return this.pileAbonnementInvocateur;
            }
            setParametres(...aParams) {}
            setAvecTabulation(AAvecTabIndex) {
                this.tabIndex = (AAvecTabIndex === null || AAvecTabIndex === undefined || AAvecTabIndex) ? 0 : -1;
            }
            setDonnees(...aParams) {}
            recupererDonnees() {}
            construireAffichage(...aParams) {
                return '&nbsp;';
            }
            getGenre() {
                return this.Genre;
            }
            setGenre(AGenre) {
                this.Genre = AGenre;
            }
            setActif(AActif) {
                this.Actif = AActif;
            }
            getActif() {
                return this.Actif;
            }
            setVisible(AVisible) {
                ObjetStyle_1.GStyle.setDisplay(this.Nom, this.Visible = AVisible);
            }
            estUneInteractionUtilisateur() {
                return this.InteractionUtilisateur !== false;
            }
            setEtatSaisie(aEtatSaisie) {
                if (this.Pere && this.Pere instanceof Identite) {
                    this.Pere.setEtatSaisie(aEtatSaisie);
                } else {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.etatSaisie, aEtatSaisie);
                }
            }
            setControleNavigation(AControleNavigation) {
                this.ControleNavigation = AControleNavigation;
            }
            getEtatSaisie() {
                if (this.Pere && this.Pere instanceof Identite) {
                    return this.Pere.getEtatSaisie();
                }
            }
            $refresh(aForcerSynchrone) {
                return IEHtml.refresh(aForcerSynchrone);
            }
            $refreshSelf() {
                return IEHtml.refresh();
            }
            getControleur(aInstance) {
                return {};
            }
            avecEventResizeNavigateur() {
                return this.Pere && this.Pere instanceof Identite ? this.Pere.avecEventResizeNavigateur() : true;
            }
            construireNom(ANom, AIdent) {
                return (AIdent === null || AIdent === undefined ? ANom : ANom + '[' + AIdent + ']');
            }
            getNom() {
                return this.Nom;
            }
            effacer(aMessage) {
                if (aMessage === null || aMessage === undefined) {
                    aMessage = '&nbsp;';
                }
                ObjetHtml_1.GHtml.setHtml(this.Nom, aMessage);
            }
            afficher(H, ...aParams) {
                let lHtml = '';
                if (H === null || H === undefined) {
                    lHtml = this.construireAffichage();
                } else if (aParams.length === 0 && typeof H === 'string') {
                    lHtml = H;
                } else {}
                if (lHtml) {
                    ObjetHtml_1.GHtml.setHtml(this.Nom, lHtml, {
                        instance: this
                    });
                }
            }
            initialiser() {
                const H = this.construireAffichage();
                if (H) {
                    ObjetHtml_1.GHtml.setHtml(this.Nom, H, {
                        instance: this
                    });
                }
                this.recupererDonnees();
            }
            composeMessage(aMessage) {
                return IE.jsx.str("div", {
                    role: "note"
                }, IE.jsx.str("p", {
                    id: this.idMessageActionRequise,
                    class: "semi-bold taille-m text-center p-y-xl m-bottom-l"
                }, aMessage));
            }
            navigationClavier(AId) {
                if (ObjetNavigateur_1.Navigateur.isToucheFleche()) {
                    this.focusSuivant(AId, (ObjetNavigateur_1.Navigateur.isToucheFlecheGauche() || ObjetNavigateur_1.Navigateur.isToucheFlecheDroite()) ? (Enumere_OrientationAffichage_1.EGenreOrientationAffichage.Horizontal) : (Enumere_OrientationAffichage_1.EGenreOrientationAffichage.Vertical), (ObjetNavigateur_1.Navigateur.isToucheFlecheGauche() || ObjetNavigateur_1.Navigateur.isToucheFlecheHaut()) ? Enumere_Direction_1.EGenreDirection.SensInverse : Enumere_Direction_1.EGenreDirection.SensNormal);
                }
            }
            focusSuivant(AId, AOrientation, ADirection) {
                const lIdSuivant = this.getIdNavigationSuivant(AId, AOrientation, ADirection);
                if (lIdSuivant) {
                    ObjetHtml_1.GHtml.setFocus(lIdSuivant);
                }
            }
            getIdNavigationSuivant(aId, aOrientation, aDirection) {
                return (aOrientation === Enumere_OrientationAffichage_1.EGenreOrientationAffichage.Horizontal) ? ((aDirection === Enumere_Direction_1.EGenreDirection.SensNormal) ? this.TableauDroite[aId] : this.TableauGauche[aId]) : ((aDirection === Enumere_Direction_1.EGenreDirection.SensNormal) ? this.TableauBas[aId] : this.TableauHaut[aId]);
            }
            ajouterAuTableaux(APremierId, ADeuxiemeId, AHorizontal, AVertical) {
                switch (AHorizontal) {
                case Enumere_Direction_1.EGenreDirection.DeuxSenses:
                    this.TableauDroite[APremierId] = ADeuxiemeId;
                    this.TableauGauche[ADeuxiemeId] = APremierId;
                    break;
                case Enumere_Direction_1.EGenreDirection.SensNormal:
                    this.TableauDroite[APremierId] = ADeuxiemeId;
                    break;
                case Enumere_Direction_1.EGenreDirection.SensInverse:
                    this.TableauGauche[ADeuxiemeId] = APremierId;
                    break;
                }
                switch (AVertical) {
                case Enumere_Direction_1.EGenreDirection.DeuxSenses:
                    this.TableauBas[APremierId] = ADeuxiemeId;
                    this.TableauHaut[ADeuxiemeId] = APremierId;
                    break;
                case Enumere_Direction_1.EGenreDirection.SensNormal:
                    this.TableauBas[APremierId] = ADeuxiemeId;
                    break;
                case Enumere_Direction_1.EGenreDirection.SensInverse:
                    this.TableauHaut[ADeuxiemeId] = APremierId;
                    break;
                }
            }
            resetTableauxNavigation() {
                this.TableauGauche = {};
                this.TableauDroite = {};
                this.TableauHaut = {};
                this.TableauBas = {};
            }
            estObjetGraphiqueFenetre() {
                return false;
            }
            getId(APositionId) {
                if (this.TabId && APositionId < this.TabId.length) {
                    return this.TabId[APositionId];
                }
            }
            focusSurPremierElement() {
                ObjetHtml_1.GHtml.setFocus(this.IdPremierElement);
            }
            setPremierElement(AElement) {
                this.IdPremierElement = AElement;
            }
            getPremierElement() {
                return this.IdPremierElement;
            }
            ajouterInstanceADetruire(aInstance) {
                if (aInstance && aInstance.Nom) {
                    this.instancesADetruire[aInstance.Nom] = aInstance;
                }
            }
            enleverInstanceADetruire(aInstance) {
                if (aInstance && aInstance.Nom) {
                    this.instancesADetruire[aInstance.Nom] = null;
                }
            }
            ajouterEvenementGlobal(aEvenement, aMethode) {
                if (!ObjetNavigateur_1.Navigateur.addEvent) {
                    return;
                }
                if (!aMethode) {
                    return;
                }
                ObjetNavigateur_1.Navigateur.addEvent(aEvenement, this, aMethode);
                this.pileEvenementGlobaux.push({
                    evenement: aEvenement,
                    methode: aMethode
                });
                return this.pileEvenementGlobaux.length - 1;
            }
            viderEvenementGlobaux() {
                for (let i = 0; i < this.pileEvenementGlobaux.length; i++) {
                    ObjetNavigateur_1.Navigateur.delEvent(this.pileEvenementGlobaux[i].evenement, this);
                }
                this.pileEvenementGlobaux = [];
            }
            detruireInstances() {}
            free() {
                if (this.isDestroyed()) {
                    return;
                }
                this.__enCoursDeDestruction = true;
                try {
                    this._viderEvenements();
                    this.detruireInstancesFils();
                    if (this.detruireInstances) {
                        this.detruireInstances();
                    }
                    if (this.estObjetGraphiqueFenetre()) {
                        if (ObjetHtml_1.GHtml.elementExiste(this.Nom)) {
                            IEZoneFenetre_1.ZoneFenetre.enleverFenetre(this.Nom);
                        }
                    } else if (!this.Pere || !('__enCoursDeDestruction'in this.Pere && this.Pere.__enCoursDeDestruction)) {
                        ObjetHtml_1.GHtml.setHtml(this.Nom, '', true);
                    }
                    if (this.Pere && this.Pere instanceof Identite) {
                        this.Pere.enleverInstanceADetruire(this);
                    }
                    if (this._callbacksSurDestruction.length > 0) {
                        this._callbacksSurDestruction.forEach( (aCallback) => {
                            aCallback();
                        }
                        );
                    }
                } catch (e) {} finally {
                    delete this.__enCoursDeDestruction;
                    this._estDetruite = true;
                }
            }
            detruireInstancesFils() {
                for (const lNom in this.instancesADetruire) {
                    if (this.instancesADetruire.hasOwnProperty(lNom)) {
                        const lInstance = this.instancesADetruire[lNom];
                        if (lInstance && !lInstance._estDetruite && lInstance.free) {
                            lInstance.free();
                        }
                        this.instancesADetruire[lNom] = null;
                    }
                }
            }
            ajouterCallbackSurDestruction(aCallback) {
                this._callbacksSurDestruction.push(aCallback);
                return this;
            }
            isDestroyed() {
                return this._estDetruite || this.__enCoursDeDestruction;
            }
            static creerInstance(aConstructeur, aParametres) {
                if (!aConstructeur) {
                    return null;
                }
                const lInstance = new aConstructeur(aParametres);
                if (aParametres === null || aParametres === void 0 ? void 0 : aParametres.options) {
                    lInstance.setOptions(aParametres.options);
                }
                return lInstance;
            }
            _viderEvenements() {
                Invocateur_1.Invocateur.desabonner(this);
                this.viderEvenementGlobaux();
            }
        }
        exports.Identite = Identite;
    },
    fn: 'objetidentite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCelluleBouton = exports.EGenreBoutonCellule = void 0;
        require("Form-components.css");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_Event_1 = require("Enumere_Event");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetWAI_1 = require("ObjetWAI");
        const MethodesObjet_1 = require("MethodesObjet");
        const IEHtml_1 = require("IEHtml");
        const AccessApp_1 = require("AccessApp");
        const IEHtml_Ripple_1 = require("IEHtml.Ripple");
        const IEHtml_Ripple_css_1 = require("IEHtml.Ripple.css");
        const Divers_css_1 = require("Divers.css");
        var EGenreBoutonCellule;
        (function(EGenreBoutonCellule) {
            EGenreBoutonCellule[EGenreBoutonCellule["Aucun"] = 0] = "Aucun";
            EGenreBoutonCellule[EGenreBoutonCellule["Fleche"] = 1] = "Fleche";
            EGenreBoutonCellule[EGenreBoutonCellule["Loupe"] = 2] = "Loupe";
            EGenreBoutonCellule[EGenreBoutonCellule["Points"] = 3] = "Points";
            EGenreBoutonCellule[EGenreBoutonCellule["Image"] = 4] = "Image";
        }
        )(EGenreBoutonCellule || (exports.EGenreBoutonCellule = EGenreBoutonCellule = {}));
        class ObjetCelluleBouton extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.idZone = this.Nom + '_Zone';
                this.NomEdit = this.Nom + '_Edit';
                this.NomDescr = this.Nom + '_Descr';
                this.idTexte = this.NomEdit;
                this.idBouton = this.Nom + '_Bouton';
                this.libelle = '';
                this.options = {
                    hauteur: 18,
                    largeur: 80,
                    genreBouton: EGenreBoutonCellule.Aucun,
                    iconeGauche: '',
                    avecBordures: true,
                    avecCouleurFondBouton: true,
                    avecFocusVisibleTexte: true,
                    avecZoneSaisie: true,
                    estSaisissable: false,
                    selectionSaisieSurFocus: false,
                    taillePolice: 10,
                    classeZone: 'FondBlanc',
                    classTexte: '',
                    classBackground: '',
                    styleZoneTexte: '',
                    styleBouton: '',
                    placeHolder: '',
                    libelleHaut: '',
                    withTabulation: true,
                    roleWAI: ObjetWAI_1.EGenreRole.Button,
                    ariaLabel: '',
                    popupWAI: false,
                    ariaLabelledBy: '',
                    ariaDescribedBy: '',
                    desactiverAideSaisie: false,
                    ariaExpanded: false,
                    required: false,
                    titleForce: '',
                    setValue: null,
                    editAvecTrim: false,
                    ariaControls: '',
                    ariaDescription: ''
                };
                this.setOptionsObjetCelluleBouton({
                    estSaisissable: true,
                    genreBouton: EGenreBoutonCellule.Fleche
                });
                this.IdPremierElement = this.NomEdit;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    ifLibelleHaut: function() {
                        return !!aInstance.options.libelleHaut;
                    },
                    htmlLibelleHaut: function() {
                        return aInstance.options.libelleHaut;
                    },
                    getClassZone: function() {
                        return 'Texte' + aInstance.options.taillePolice + ' ' + aInstance.options.classeZone + ' CelluleBoutonZoneJQ' + (aInstance.Actif ? ' AvecMain' : '');
                    },
                    getStyleConteneur: function() {
                        return {
                            'width': (aInstance.options.largeur && aInstance.options.largeur === '100%' ? '100%' : '')
                        };
                    },
                    getClass_ocb_cont() {
                        return !aInstance.Actif ? IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleDisabled : '';
                    },
                    getStyleContenu: function() {
                        if (!IE.estMobile) {
                            return {
                                'width': (aInstance.options.largeur && aInstance.options.largeur !== '100%' ? aInstance.options.largeur + 'px' : '')
                            };
                        } else {
                            return {};
                        }
                    },
                    getAttrContenu() {
                        const lAriaLabel = aInstance.options.ariaLabel || aInstance.options.titleForce || null;
                        const lAttr = {
                            'aria-disabled': aInstance.Actif ? null : true,
                            'aria-label': lAriaLabel,
                            'aria-labelledby': lAriaLabel ? null : aInstance.options.ariaLabelledBy || null,
                            'aria-describedby': aInstance.options.ariaDescribedBy || null,
                            'aria-controls': aInstance.options.ariaControls || null
                        };
                        if (aInstance.options.roleWAI === ObjetWAI_1.EGenreRole.Combobox) {
                            lAttr['aria-expanded'] = !!aInstance.options.ariaExpanded;
                        }
                        return lAttr;
                    },
                    getTitleDescriptionEdit: function() {
                        return !aInstance.options.titleForce ? aInstance.estLibelleHTML ? '' : (aInstance.libelle && typeof aInstance.options.largeur === 'number' && ObjetChaine_1.GChaine.getLongueurChaineDansDiv(aInstance.libelle, aInstance.options.taillePolice, false) >= aInstance.options.largeur) ? ObjetChaine_1.GChaine.enleverEntites(aInstance.libelle) : '' : aInstance.options.titleForce;
                    },
                    edit: {
                        getValue: function() {
                            return aInstance.libelle;
                        },
                        setValue: function(aValue) {
                            aInstance.libelle = aValue;
                            if (aInstance.options.setValue) {
                                aInstance.options.setValue(aValue, aInstance);
                            }
                        },
                        getDisabled: function() {
                            return !aInstance.Actif;
                        },
                        node: function() {
                            if (!aInstance.options.estSaisissable) {
                                $(this.node).on('focus', function() {
                                    ObjetHtml_1.GHtml.setFocus(this, false);
                                });
                            }
                            $(this.node).on('keyup blur focusout', (aEvent) => {
                                aInstance._surEventEdit(aEvent);
                            }
                            );
                        },
                        getNodeSansSaisie: function() {
                            $(this.node).on('mousedown click keyup blur focusout', (aEvent) => {
                                aInstance._surEventEdit(aEvent);
                            }
                            );
                        },
                        getClassEdit: function() {
                            return 'CelluleBoutonNomEditJQ Texte' + aInstance.options.taillePolice + ' ' + (aInstance.options.classTexte || '') + (aInstance.Actif ? (aInstance.options.estSaisissable ? ' AvecTexte' : ' AvecMain') : '') + ' ' + (aInstance.options.classBackground || '');
                        },
                        getStylePourBoutonNonEditable: function() {
                            return {
                                'background-color': aInstance.Actif ? '' : (0,
                                AccessApp_1.getApp)().getCouleur().nonEditable.fond
                            };
                        }
                    },
                    getHtmlConsult: function() {
                        if (aInstance.libelle || !aInstance.options.placeHolder) {
                            return ObjetChaine_1.GChaine.avecEspaceSiVide(aInstance.estLibelleHTML ? aInstance.libelle : ObjetChaine_1.GChaine.insecable(aInstance.libelle));
                        } else if (aInstance.options.placeHolder) {
                            if (typeof aInstance.options.placeHolder === 'string') {
                                return IE.jsx.str("span", {
                                    class: "as-placeholder",
                                    "aria-disabled": "true"
                                }, aInstance.options.placeHolder);
                            }
                            if (aInstance.options.placeHolder.libelleHtml) {
                                return ObjetChaine_1.GChaine.avecEspaceSiVide(aInstance.options.placeHolder.libelleHtml);
                            }
                        }
                    },
                    getNodeBouton: function() {
                        $(this.node).on('mousedown click keyup', (aEvent) => {
                            if (!aInstance.Actif) {
                                return;
                            }
                            let lEvent = null;
                            switch (aEvent.type) {
                            case 'mousedown':
                                lEvent = Enumere_Event_1.EEvent.SurMouseDown;
                                break;
                            case 'click':
                                lEvent = Enumere_Event_1.EEvent.SurClick;
                                break;
                            case 'keyup':
                                lEvent = Enumere_Event_1.EEvent.SurKeyUp;
                                break;
                            }
                            if (lEvent !== null) {
                                aInstance.callback.appel(lEvent, aEvent, false);
                                if (aInstance.Pere && aInstance.Pere instanceof ObjetIdentite_1.Identite && aInstance.Pere.$refreshSelf) {
                                    aInstance.Pere.$refreshSelf();
                                }
                            }
                        }
                        );
                    }
                });
            }
            setParametresPN(aAvecBouton, aLargeur, aHauteur, aClassTexte) {
                this.setOptionsObjetCelluleBouton({
                    genreBouton: aAvecBouton ? EGenreBoutonCellule.Fleche : EGenreBoutonCellule.Aucun,
                    largeur: aLargeur,
                    hauteur: aHauteur ? aHauteur : 15,
                    classTexte: aClassTexte ? aClassTexte : 'Gras',
                    estSaisissable: false,
                    avecZoneSaisie: false
                });
            }
            setOptionsObjetCelluleBouton(aOptions) {
                $.extend(this.options, aOptions);
                this.avecBouton = this.options.genreBouton !== EGenreBoutonCellule.Aucun;
                this.$refreshSelf();
            }
            construireAffichage() {
                const H = [];
                let lClasseBtn = '';
                switch (this.options.genreBouton) {
                case EGenreBoutonCellule.Fleche:
                    lClasseBtn = 'as-select ';
                    break;
                case EGenreBoutonCellule.Loupe:
                    lClasseBtn = 'as-search';
                    break;
                case EGenreBoutonCellule.Points:
                    lClasseBtn = 'as-multi-choix';
                    break;
                case EGenreBoutonCellule.Image:
                    lClasseBtn = 'as-date-picker';
                    break;
                }
                H.push('<div ie-if="ifLibelleHaut" ie-html="htmlLibelleHaut" class="LibelleHaut"></div>');
                H.push('<div class="input-wrapper" ie-style="getStyleConteneur">', '<div class="ocb_cont as-input ', lClasseBtn, (!this.options.avecZoneSaisie ? ' ' + IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple : ''), '" ie-class="getClass_ocb_cont">');
                if (this.options.iconeGauche) {
                    H.push(IE.jsx.str("i", {
                        class: ['ocb_icone_gauche', this.options.iconeGauche],
                        "ie-node": "edit.getNodeSansSaisie",
                        "aria-hidden": "true"
                    }));
                }
                const lStrAttrsWAI = {
                    role: ObjetWAI_1.GObjetWAI.strRole(this.options.roleWAI),
                    'aria-haspopup': this.options.popupWAI || false,
                    'aria-required': this.options.required ? 'true' : false,
                    'aria-description': this.options.ariaDescription || false,
                    'aria-expanded': this.options.roleWAI === ObjetWAI_1.EGenreRole.Combobox ? 'false' : false
                };
                if (this.options.avecZoneSaisie) {
                    H.push(IE.jsx.str("input", Object.assign({
                        type: "text",
                        "ie-model": "edit",
                        "ie-trim": !!this.options.editAvecTrim,
                        id: this.NomEdit,
                        class: Divers_css_1.StylesDivers.browserDefault,
                        "ie-style": "getStyleContenu",
                        "ie-attr": "getAttrContenu",
                        autocomplete: this.options.desactiverAideSaisie ? 'off' : false,
                        autocorrect: this.options.desactiverAideSaisie ? 'off' : false,
                        autocapitalize: this.options.desactiverAideSaisie ? 'off' : false,
                        spellcheck: this.options.desactiverAideSaisie ? 'false' : false,
                        "ie-title": "getTitleDescriptionEdit",
                        "ie-selecttextfocus": !!this.options.selectionSaisieSurFocus,
                        readonly: !this.options.estSaisissable,
                        "aria-readonly": this.options.estSaisissable ? false : 'true',
                        "ie-ellipsis": !this.options.estSaisissable
                    }, lStrAttrsWAI, {
                        "aria-autocomplete": "list",
                        placeholder: this.options.placeHolder && MethodesObjet_1.MethodesObjet.isString(this.options.placeHolder) ? this.options.placeHolder : false
                    })));
                } else {
                    H.push(IE.jsx.str("div", Object.assign({
                        class: ['ocb-libelle', IEHtml_Ripple_1.StylesCustomIEHTMLRipple.ieRippleAllowpass],
                        tabindex: this.options.withTabulation ? '0' : '',
                        id: this.idTexte,
                        "ie-html": "getHtmlConsult",
                        "ie-style": "getStyleContenu",
                        "ie-attr": "getAttrContenu",
                        "ie-node": "edit.getNodeSansSaisie",
                        "ie-ellipsis": !this.options.titleForce,
                        title: this.options.titleForce || false
                    }, lStrAttrsWAI, {
                        "aria-live": this.options.roleWAI === ObjetWAI_1.EGenreRole.Combobox ? 'polite' : false,
                        "aria-relevant": this.options.roleWAI === ObjetWAI_1.EGenreRole.Combobox ? 'text' : false
                    })));
                }
                if (this.avecBouton) {
                    H.push(IE.jsx.str("div", {
                        class: "ocb_bouton",
                        "ie-node": "getNodeBouton",
                        role: "presentation"
                    }));
                }
                H.push('</div>');
                H.push('</div>');
                return H.join('');
            }
            recupererDonnees() {
                if (!ObjetHtml_1.GHtml.elementExiste(this.idZone)) {
                    return;
                }
                let lEventMap = {};
                if (this.options.avecFocusVisibleTexte) {
                    lEventMap = {
                        'focusin': function() {
                            $(this).find('.CelluleBoutonNomEditJQ').css('outline', (0,
                            AccessApp_1.getApp)().getCouleur().texte + ' dotted 1px');
                        },
                        'focusout': function() {
                            $(this).find('.CelluleBoutonNomEditJQ').css('outline', 'none');
                        }
                    };
                }
                $('#' + this.Nom.escapeJQ()).on(lEventMap, {
                    instance: this
                }).data('couleurFocus', (0,
                AccessApp_1.getApp)().getCouleur().texte);
            }
            setActif(AActif) {
                super.setActif(AActif);
                this.$refreshSelf();
            }
            setLibelle(aLibelle) {
                this.libelle = aLibelle;
                this.estLibelleHTML = false;
                this.$refreshSelf();
            }
            setLibelleHtml(aLibelleHtml) {
                if (this.options.avecZoneSaisie) {
                    return;
                }
                this.estLibelleHTML = true;
                this.libelle = aLibelleHtml;
                this.$refreshSelf();
            }
            getLibelle() {
                return this.libelle;
            }
            setLargeur(aLargeur) {
                this.setOptionsObjetCelluleBouton({
                    largeur: aLargeur ? aLargeur : undefined
                });
            }
            setTitle(aTitle) {
                this.setOptionsObjetCelluleBouton({
                    titleForce: aTitle
                });
            }
            setFocus() {
                ObjetHtml_1.GHtml.setFocus(this.NomEdit);
            }
            setAvecBouton(aAvecBouton) {
                if (this.avecBouton === aAvecBouton) {
                    return;
                }
                this.avecBouton = aAvecBouton;
                this.$refreshSelf();
            }
            _surEventEdit(aEvent) {
                if (!this.Actif) {
                    return;
                }
                let lEvent = null;
                switch (aEvent.type) {
                case 'keyup':
                    lEvent = Enumere_Event_1.EEvent.SurKeyUp;
                    break;
                case 'blur':
                    lEvent = Enumere_Event_1.EEvent.SurBlur;
                    break;
                case 'focusout':
                    lEvent = Enumere_Event_1.EEvent.SurFocusOut;
                    break;
                case 'mousedown':
                    lEvent = Enumere_Event_1.EEvent.SurMouseDown;
                    break;
                case 'click':
                    lEvent = Enumere_Event_1.EEvent.SurClick;
                    break;
                default:
                    ;
                }
                if (lEvent) {
                    this.callback.appel(lEvent, aEvent, true);
                    IEHtml_1.default.refresh();
                }
            }
        }
        exports.ObjetCelluleBouton = ObjetCelluleBouton;
    },
    fn: 'objetcellulebouton.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeThemeBouton = void 0;
        var TypeThemeBouton;
        (function(TypeThemeBouton) {
            TypeThemeBouton["primaire"] = "themeBoutonPrimaire";
            TypeThemeBouton["secondaire"] = "themeBoutonSecondaire";
            TypeThemeBouton["neutre"] = "themeBoutonNeutre";
        }
        )(TypeThemeBouton || (exports.TypeThemeBouton = TypeThemeBouton = {}));
    },
    fn: 'type_themebouton.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetSaisie = void 0;
        require("ObjetSaisie.css");
        exports.StylesObjetSaisie = {
            ObjetSaisie: 'ObjetSaisie',
            asInput: 'as-input',
            asSelect: 'as-select',
            ObjetSaisie_100P: 'ObjetSaisie_100P',
            ObjetSaisie_cont: 'ObjetSaisie_cont',
            inputWrapper: 'input-wrapper',
            fullWidth: 'full-width',
            openUp: 'open-up',
            ocb_cont: 'ocb_cont',
            ocb_bouton: 'ocb_bouton',
            asLi: 'as-li',
            ObjetSaisie_contenuvide: 'ObjetSaisie_contenuvide',
            ObjetSaisie_entete_liste: 'ObjetSaisie_entete_liste',
            ObjetSaisie_pied_liste: 'ObjetSaisie_pied_liste',
            comboSansFleche: 'combo-sans-fleche',
            ocb_icone_gauche: 'ocb_icone_gauche',
            ObjetSaisieModal: 'ObjetSaisie-modal',
            visible: 'visible',
            active: 'active',
            deroulantConteneurShowHide: 'deroulant-conteneur-show-hide',
            coloredSquareLibelle: 'colored-square-libelle',
            ieCombo: 'ie-combo',
            flagConteneur: 'flag-conteneur',
            comboClassic: 'combo-classic',
            ieRippleDisabled: 'ie-ripple-disabled'
        };
    },
    fn: 'objetsaisie.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TradGlossaireCP = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TradGlossaireCP = ObjetTraduction_1.TraductionsModule.getModule('GlossaireCP', {
            PiecesJointes: '',
            ConsulterLesPiecesJointes: '',
            PageConnexion: '',
            PageDeconnexion: '',
            PageCommune: '',
            Aucun: '',
            Aucune: ''
        });
        exports.TradGlossaireCP = TradGlossaireCP;
    },
    fn: 'glossairecp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetSaisie = void 0;
        const GUID_1 = require("GUID");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetStyle_1 = require("ObjetStyle");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const Enumere_EvenementObjetSaisie_1 = require("Enumere_EvenementObjetSaisie");
        const Enumere_Event_1 = require("Enumere_Event");
        const Enumere_Saisie_1 = require("Enumere_Saisie");
        const ObjetCelluleBouton_1 = require("ObjetCelluleBouton");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetWAI_1 = require("ObjetWAI");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const ToucheClavier_1 = require("ToucheClavier");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const IEHtml_1 = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetSaisie_css_1 = require("ObjetSaisie.css");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const IEHtml_DraggableDroppable_1 = require("IEHtml.DraggableDroppable");
        const AccessApp_1 = require("AccessApp");
        const Form_components_css_1 = require("Form-components.css");
        const GlossaireCP_1 = require("GlossaireCP");
        class ObjetSaisie extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.Survolee = -1;
                this.Selection = -1;
                this.Timer = null;
                this._listeSelections = new ObjetListeElements_1.ObjetListeElements();
                this.NomListe = this.Nom + '_Liste';
                this.nomListeConteneur = this.Nom + '_Liste_cont';
                this.idContenu = this.Nom + '_Contenu';
                this.idContenuScroll = this.Nom + '_ContenuScroll';
                this.idWrapperBouton = this.Nom + '_wrapperbouton';
                this.NomLabel = this.Nom + '_Label';
                this.idBtnValidation = this.Nom + '_btnValidation';
                this.idBloc = this.Nom + '_bloc';
                this.idLibelleHaut = this.Nom + '_lib_haut';
                this.cache = {
                    editionEnCours: false
                };
                this.init();
                Invocateur_1.Invocateur.abonner(`surAffichageFenetre ${Invocateur_1.ObjetInvocateur.events.resizeNavigateur}`, () => {
                    if (this.listeDeroulee && this._estOuvertureModale()) {
                        this.fermerListe(false);
                    }
                }
                , this);
            }
            init() {
                this._initParseur();
                this.bouton = new ObjetCelluleBouton_1.ObjetCelluleBouton(this.Nom + '.bouton',null,this,this._surEvenementBouton.bind(this));
                this.IdPremierElement = this.bouton.NomEdit;
                this.initialiserOptionsObjetSaisie();
                this.decalageTopOuvertureInverse = 15;
            }
            detruireInstances() {
                $('#' + this.idContenu.escapeJQ()).stop(true, true);
                clearTimeout(this.cache.timerMAJ);
                clearTimeout(this._timerInitParseur);
                clearTimeout(this._timerEditionRecherche);
                $(`#${this.nomListeConteneur.escapeJQ()}`).remove();
            }
            static calculTailleMaxLibelle(aLibelle, aEstGras) {
                return Math.ceil(ObjetChaine_1.GChaine.getLongueurChaineDansDiv(aLibelle, '1.2rem', aEstGras)) + 4 + 1;
            }
            initialiserOptionsObjetSaisie() {
                this._options = {
                    mode: Enumere_Saisie_1.EGenreSaisie.Combo,
                    multiSelection: false,
                    avecElementObligatoire: false,
                    avecDesignMobile: false,
                    avecOuvertureDeroulantPopup: IE.estMobile,
                    longueur: 125,
                    hauteur: null,
                    hauteurLigneDefault: 18,
                    largeurListe: null,
                    estLargeurAuto: false,
                    getTailleElementlargeurAuto: function(aElement, aEstGras) {
                        return ObjetSaisie.calculTailleMaxLibelle(aElement.getLibelle(), aEstGras);
                    },
                    largeurAutoMin: 40,
                    largeurAutoMax: 500,
                    avecBouton: true,
                    iconeGauche: '',
                    deroulerListeSeulementSiPlusieursElements: true,
                    initAutoSelectionAvecUnElement: true,
                    controlerNbrElements: false,
                    avecTriListeElements: false,
                    nbrLignes: 15,
                    classTexte: '',
                    classBackground: null,
                    placeHolder: '',
                    desactiverAideSaisie: false,
                    couleurFondDeroulant: null,
                    celluleAvecTexteHtml: false,
                    getContenuCellule: null,
                    texteEdit: '',
                    couleurTexteEdit: null,
                    styleTexteEdit: null,
                    classTexteEdit: null,
                    largeurTexteEdit: null,
                    getClassElement: null,
                    getContenuElement: null,
                    getEstElementNonSelectionnable: null,
                    getElementSelectionnableParPrecSuiv: null,
                    getEnteteListe: null,
                    getPiedListe: null,
                    libelleHaut: '',
                    avecEventSurFermetureListe: false,
                    avecFondSelectionSurSurvol: true,
                    avecGrasSurSurvol: false,
                    modifierContenuCelluleSurSelection: true,
                    avecReservationPlaceBarreScroll: false,
                    desactiverScrollInfini: false,
                    nbBlocsScrollInfini: 2,
                    roleWAI: ObjetWAI_1.EGenreRole.Combobox,
                    labelWAICellule: '',
                    ariaLabelledBy: '',
                    ariaDescribedBy: '',
                    required: false,
                    avecBoutonsPrecSuiv: false,
                    avecBoutonsPrecSuivVisiblesInactifs: true,
                    avecBoutonsPrecSuiv_boucle: false,
                    optionsBouton: {},
                    surValidation: null,
                    getInfosElementCB: null,
                    libelleElementSiVide: GlossaireCP_1.TradGlossaireCP.Aucun,
                    getLibelleCelluleMultiSelection: function(aListeSelections) {
                        return aListeSelections ? aListeSelections.getTableauLibelles().join(', ') : '';
                    },
                    getLibelleBoutonValider: function(aNombreSelectionnes, aNombre) {
                        return aNombre > 0 ? ObjetChaine_1.GChaine.format('%s (%d / %d)', [ObjetTraduction_1.GTraductions.getValeur('Valider'), aNombreSelectionnes, aNombre]) : ObjetTraduction_1.GTraductions.getValeur('Valider');
                    },
                    surEditionRecherche: null,
                    nbCarMinRecherche: 2,
                    delaiSurEditionRecherche: 500,
                    rechercheTout: ['', '*'],
                    avecSurlignageSuggestion: true,
                    couleurSurlignageSuggestion: (0,
                    AccessApp_1.getApp)().getCouleur().surlignageTexte,
                    avecSurlignageElement: null,
                    callbackToutCalcule: null,
                    dureeAnimationDeploiement: 150
                };
            }
            setOptionsObjetSaisie(aOptions) {
                $.extend(this._options, aOptions);
                const lEstListeOuCombo = [Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode);
                const lAvecSaisieRechercheDynamique = this._avecSaisieRechercheDynamique();
                const lLabelledBy = this._options.ariaLabelledBy || (this._options.texteEdit ? this.NomLabel : undefined) || (this._options.libelleHaut ? this.idLibelleHaut : undefined);
                const lOptionsBouton = $.extend({
                    estSaisissable: !lEstListeOuCombo,
                    avecZoneSaisie: !lEstListeOuCombo,
                    genreBouton: this._options.avecBouton ? lEstListeOuCombo ? ObjetCelluleBouton_1.EGenreBoutonCellule.Fleche : ObjetCelluleBouton_1.EGenreBoutonCellule.Loupe : ObjetCelluleBouton_1.EGenreBoutonCellule.Aucun,
                    largeur: this._options.avecDesignMobile && IE.estMobile ? '100%' : this._options.longueur,
                    hauteur: this._options.hauteur || undefined,
                    iconeGauche: this._options.avecBoutonsPrecSuiv ? '' : this._options.iconeGauche,
                    classTexte: this._options.classTexte,
                    classBackground: this._options.classBackground,
                    placeHolder: this._options.placeHolder,
                    desactiverAideSaisie: this._options.desactiverAideSaisie || this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche,
                    roleWAI: this._options.roleWAI || undefined,
                    ariaLabel: this._options.labelWAICellule || undefined,
                    popupWAI: 'listbox',
                    ariaLabelledBy: lLabelledBy,
                    ariaDescribedBy: this._options.ariaDescribedBy || '',
                    required: this._options.required || undefined,
                    setValue: this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche ? this._modificationSaisieBoutonRecherche.bind(this) : null,
                    editAvecTrim: lAvecSaisieRechercheDynamique,
                    selectionSaisieSurFocus: lAvecSaisieRechercheDynamique
                }, aOptions.optionsBouton);
                this.bouton.setOptionsObjetCelluleBouton(lOptionsBouton);
                this.$refreshSelf();
                return this;
            }
            chercherIndiceSelectionSelonSens(aIndice, aPrecedent, aEnBoucle, aMethodeSelec) {
                if (!this.ListeElements || !this.ListeElements.count) {
                    return -1;
                }
                let lIndice = aIndice;
                const lNbr = this.ListeElements.count();
                if (lIndice !== null && lIndice !== undefined) {
                    while (lIndice < lNbr && lIndice >= 0 && (!this._estSelectionnable(this.ListeElements.get(lIndice)) || (aMethodeSelec && aMethodeSelec({
                        element: this.ListeElements.get(lIndice)
                    }) !== true))) {
                        lIndice += aPrecedent ? -1 : 1;
                    }
                } else {
                    lIndice = -1;
                }
                if (lIndice >= lNbr) {
                    lIndice = -1;
                }
                if (aEnBoucle && lIndice === -1) {
                    return this.chercherIndiceSelectionSelonSens(aPrecedent ? lNbr - 1 : 0, aPrecedent, false, aMethodeSelec);
                }
                return lIndice;
            }
            setParametres(AMode, ALongueur, AAvecBouton, aAvecStyleSite, aControlerNbrElements, aHauteur, aClassTexte) {
                this.setOptionsObjetSaisie({
                    mode: AMode,
                    longueur: ALongueur === null || ALongueur === undefined ? undefined : ALongueur,
                    hauteur: aHauteur,
                    avecBouton: AAvecBouton === null || AAvecBouton === undefined ? undefined : AAvecBouton,
                    controlerNbrElements: aControlerNbrElements,
                    classTexte: aClassTexte
                });
                IE.log.addLog('ObjetSaisie.setParametres deprecated!', null, IE.log.genre.Deprecated);
            }
            setLabel(aTexte, aClass, aStyle) {
                this._options.texteEdit = aTexte;
                $.extend(this._options, {
                    classTexteEdit: aClass ? aClass : undefined,
                    styleTexteEdit: aStyle ? aStyle : undefined
                });
                const lElementLabel = ObjetHtml_1.GHtml.getElement(this.NomLabel);
                if (ObjetHtml_1.GHtml.estElement(lElementLabel)) {
                    ObjetHtml_1.GHtml.setHtml(lElementLabel, ObjetChaine_1.GChaine.insecable(this._options.texteEdit) + '&nbsp;');
                    if (this._options.classTexteEdit) {
                        ObjetHtml_1.GHtml.setClass(lElementLabel, this._options.classTexteEdit);
                    }
                    if (this._options.styleTexteEdit) {
                        ObjetStyle_1.GStyle.setStyle(lElementLabel, this._options.styleTexteEdit);
                    }
                }
            }
            recupererDonnees() {
                this.setOptionsObjetSaisie({});
                this.bouton.initialiser();
            }
            construireAffichage() {
                if (ObjetHtml_1.GHtml.elementExiste(this.Nom)) {
                    return this.construireHtml();
                }
                return;
            }
            construireHtml() {
                $('#' + this.idContenu.escapeJQ()).stop(true, true);
                const lOuvertureModale = this._estOuvertureModale();
                const lDesignMobile = this._options.avecDesignMobile && IE.estMobile;
                const lCssBtn = lDesignMobile ? '' : 'icon btnImageIcon';
                const lJSXifLibelleHaut = () => !!this._options.libelleHaut;
                const lJSXhtmlLibelleHaut = () => this._options.libelleHaut;
                const lJSXgetClassesDynamiques = () => {
                    const lClasses = [];
                    if (!this.getActif()) {
                        lClasses.push('input-wrapper-disabled');
                    }
                    return lClasses.join(' ');
                }
                ;
                const lJSXListeEventOut = () => {
                    return {
                        nodesExclus: [ObjetHtml_1.GHtml.getElement(this.bouton.getNom())],
                        callback: () => {
                            if (this.listeDeroulee && this.activerEventOut) {
                                this._declencherFermetureListe();
                            }
                        }
                    };
                }
                ;
                return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("label", {
                    class: "ie-titre-petit bloc-contain m-bottom",
                    "ie-if": lJSXifLibelleHaut,
                    "ie-html": lJSXhtmlLibelleHaut,
                    id: this.idLibelleHaut
                }), IE.jsx.str("div", {
                    role: "presentation",
                    class: ['input-wrapper', ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie, ((this._options.longueur === '100%' || lDesignMobile) ? ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie_100P : '')],
                    "ie-class": lJSXgetClassesDynamiques,
                    id: this.idWrapperBouton
                }, () => {
                    if (this._options.texteEdit && this._options.texteEdit.trim()) {
                        const lLabel = (IE.jsx.str("label", {
                            id: this.NomLabel,
                            class: MethodesObjet_1.MethodesObjet.isString(this._options.classTexteEdit) ? this._options.classTexteEdit : ' label-default',
                            style: this._options.couleurTexteEdit ? ObjetStyle_1.GStyle.composeCouleurTexte(this._options.couleurTexteEdit) : this._options.styleTexteEdit || false,
                            for: this._options.labelWAICellule || [Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode) ? false : this.bouton.NomEdit
                        }, ObjetChaine_1.GChaine.insecable(this._options.texteEdit) + '&nbsp;'));
                        if (this._options.largeurTexteEdit) {
                            return IE.jsx.str("div", {
                                style: ObjetStyle_1.GStyle.composeWidth(this._options.largeurTexteEdit)
                            }, lLabel);
                        }
                        return lLabel;
                    }
                }
                , this._options.avecBoutonsPrecSuiv ? IE.jsx.str("ie-btnicon", {
                    class: ['icon_angle_left', lCssBtn],
                    "ie-model": this.jsxModelBtnSuivPrec.bind(this, true),
                    "ie-style": this.jsxGetStyleBtnSuivPrec.bind(this, true),
                    title: ObjetTraduction_1.GTraductions.getValeur('Precedent'),
                    "aria-label": (this._options.labelWAICellule ? this._options.labelWAICellule + ' - ' : '') + ObjetTraduction_1.GTraductions.getValeur('Precedent')
                }) : '', IE.jsx.str("div", {
                    class: ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie_cont
                }, IE.jsx.str("div", {
                    id: this.bouton.getNom(),
                    "ie-node": this.jsxGetNodeBouton.bind(this),
                    class: this._options.avecBoutonsPrecSuiv && IE.estMobile ? 'btn-prev-suiv text-center' : ''
                }), () => {
                    const lHtmlList = IE.jsx.str("div", {
                        id: this.NomListe,
                        "ie-eventout": lJSXListeEventOut,
                        class: ['deroulant-conteneur-show-hide', IE.estMobile || ObjetNavigateur_1.Navigateur.isTactile ? ' is-tactile' : ''],
                        style: lOuvertureModale ? false : {
                            display: 'none'
                        }
                    });
                    if (lOuvertureModale) {
                        let lZIndex = 2000;
                        $(`#${this.nomListeConteneur.escapeJQ()}`).remove();
                        IEHtml_1.default.injectHTMLParams({
                            element: IEZoneFenetre_1.ZoneFenetre.getElementZoneFenetre(),
                            html: (IE.jsx.str("div", {
                                id: this.nomListeConteneur,
                                class: [ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie, ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisieModal],
                                style: {
                                    zIndex: lZIndex
                                }
                            }, lHtmlList))
                        });
                        return '';
                    }
                    return lHtmlList;
                }
                ), this._options.avecBoutonsPrecSuiv ? IE.jsx.str("ie-btnicon", {
                    class: ['icon_angle_right', lCssBtn],
                    "ie-model": this.jsxModelBtnSuivPrec.bind(this, false),
                    "ie-style": this.jsxGetStyleBtnSuivPrec.bind(this, false),
                    title: ObjetTraduction_1.GTraductions.getValeur('Suivant'),
                    "aria-label": (this._options.labelWAICellule ? this._options.labelWAICellule + ' - ' : '') + ObjetTraduction_1.GTraductions.getValeur('Suivant')
                }) : ''));
            }
            jsxGetNodeBouton(aNode) {
                $(aNode).on({
                    'swipeleft': () => {
                        if (this._options.avecBoutonsPrecSuiv && this._boutonPrecSuivOK(false)) {
                            this._surPrecedentSuivant(false);
                        }
                    }
                    ,
                    'swiperight': () => {
                        if (this._options.avecBoutonsPrecSuiv && this._boutonPrecSuivOK(true)) {
                            this._surPrecedentSuivant(true);
                        }
                    }
                });
            }
            jsxModelBtnSuivPrec(aPrecedent) {
                return {
                    event: () => {
                        this._surPrecedentSuivant(aPrecedent);
                    }
                    ,
                    getDisabled: () => {
                        return !this._boutonPrecSuivOK(aPrecedent);
                    }
                };
            }
            jsxGetStyleBtnSuivPrec(aPrecedent) {
                if (this._options.avecBoutonsPrecSuivVisiblesInactifs) {
                    return;
                }
                return {
                    visibility: this._boutonPrecSuivOK(aPrecedent) ? '' : 'hidden'
                };
            }
            setSelection(ASelection) {
                const lIndice = this.chercherIndiceSelectionSelonSens(ASelection, false);
                if (lIndice >= 0) {
                    if (this._options.multiSelection) {
                        this._selectionnerUnElementEnMultiSelection(lIndice);
                    }
                    this.surValidation(false, lIndice);
                }
            }
            surSelection(aParams) {
                if ((this.getNbElementsVisible() > 0 || !this._options.deroulerListeSeulementSiPlusieursElements) && !this.actualiserListe) {
                    this._deroulerListe();
                } else {
                    this.surValidation(false, undefined, aParams);
                }
            }
            deroulerListe() {
                this._deroulerListe();
            }
            surValidation(aInteractionUtilisateur, ASelection, aParams) {
                this.InteractionUtilisateur = aInteractionUtilisateur;
                this.cache.surDemandeSaisieRechercheTout = false;
                const lParams = Object.assign({
                    saisieRecherche: false,
                    validationMultiSelection: false,
                    surBoutonCellule: false
                }, aParams);
                const lEstMultiSelection = this._options.multiSelection;
                if (!this.ListeElements || !this.ListeElements.get(ASelection) || this._estSelectionnable(this.ListeElements.get(ASelection))) {
                    this.Selection = ASelection;
                    this.fermerListe(true);
                    this.$refreshSelf();
                    clearTimeout(this._timerEditionRecherche);
                    let LValeur;
                    const lEditionEnCours = this.cache.editionEnCours;
                    this.cache.editionEnCours = false;
                    if (lEstMultiSelection) {
                        if (!this._listeSelections) {
                            this._listeSelections = new ObjetListeElements_1.ObjetListeElements();
                        }
                        this._listeSelections.vider();
                        const lListeIndices = [];
                        if (this.ListeElements) {
                            this.ListeElements.parcourir( (D, aIndex) => {
                                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                                if (lInfos && ASelection === aIndex && lInfos.estCumul) {
                                    this.Selection = -1;
                                }
                                if (lInfos && !lInfos.estCumul && lInfos.selectionne) {
                                    this._listeSelections.addElement(D);
                                    lListeIndices.push(aIndex);
                                }
                            }
                            );
                        }
                        let lMAJContenu = lParams.validationMultiSelection || this.Selection >= 0 || this._listeSelections.count() > 0;
                        if (lParams.surBoutonCellule && this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche && !lEditionEnCours) {
                            LValeur = '';
                            lMAJContenu = false;
                            this.cache.surDemandeSaisieRechercheTout = true;
                        } else if (lParams.saisieRecherche || lEditionEnCours || (this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche && this._listeSelections.count() === 0 && !lParams.validationMultiSelection)) {
                            LValeur = this.getContenu();
                        } else {
                            LValeur = this._options.getLibelleCelluleMultiSelection(this._listeSelections);
                        }
                        if (this._options.modifierContenuCelluleSurSelection && lMAJContenu) {
                            this.setContenu(LValeur);
                        }
                        const lIdDescendant = this.Nom + '_' + lListeIndices.join(',' + this.Nom + '_');
                        this._actualiserWAICombo(lIdDescendant);
                    } else if (ASelection >= -1 && !lParams.validationMultiSelection && !lParams.saisieRecherche) {
                        const lElement = ASelection >= 0 ? this.ListeElements.get(this.Selection) : null;
                        LValeur = lElement ? lElement.getLibelle() : '';
                        if (this._options.modifierContenuCelluleSurSelection) {
                            if (this._options.getContenuCellule) {
                                this._appliquerGetContenuCellule(lElement);
                            } else if (this._options.celluleAvecTexteHtml && lElement && lElement.libelleHtml) {
                                this.bouton.setLibelleHtml(lElement.libelleHtml);
                            } else {
                                this.setContenu(LValeur);
                            }
                            const lIdDescendant = this.Nom + '_' + ASelection;
                            this._actualiserWAICombo(lIdDescendant);
                        }
                    } else {
                        if (lParams.surBoutonCellule && this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche && !lEditionEnCours) {
                            LValeur = '';
                            this.cache.surDemandeSaisieRechercheTout = true;
                        } else {
                            LValeur = [Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode) ? '*' : this.getContenu();
                        }
                    }
                    if ((ASelection >= 0 || lEstMultiSelection) && this.ControleNavigation && ControleSaisieEvenement_1.ControleSaisieEvenement) {
                        (0,
                        ControleSaisieEvenement_1.ControleSaisieEvenement)(this._retourSurNavigation.bind(this, Object.assign({
                            valeur: LValeur,
                            retourSaisieAnnule: true
                        }, lParams)));
                    } else {
                        this._retourSurNavigation(Object.assign({
                            valeur: LValeur,
                            retourSaisieAnnule: false
                        }, lParams));
                    }
                }
            }
            _remplirListe() {
                const lHeightScroll = this.cache.heightScroll;
                this.cache = {
                    scrollInfiniActif: false,
                    blocs: [],
                    nbVisibles: 0,
                    toutCalcule: false,
                    heightScroll: lHeightScroll,
                    largeurCellule: this._options.avecDesignMobile && IE.estMobile ? '100%' : this._options.longueur,
                    editionEnCours: false,
                    surDemandeSaisieRechercheTout: this.cache.surDemandeSaisieRechercheTout
                };
                if (!this.ListeElements) {
                    if (this._options.multiSelection) {
                        this._infosElementsCbs = {};
                    }
                    return;
                }
                this._trierElements();
                let lBlocs = {
                    debut: 0,
                    fin: 0,
                    lignesVisibles: []
                };
                let lNb = 0;
                let lTailleMaxLibelle = 0;
                this.cache.blocs.push(lBlocs);
                this.ListeElements.parcourir( (aElement, aIndex) => {
                    if (lNb >= this._options.nbrLignes) {
                        lBlocs = {
                            debut: aIndex,
                            fin: aIndex,
                            lignesVisibles: []
                        };
                        this.cache.blocs.push(lBlocs);
                        lNb = 0;
                    }
                    lBlocs.debut = Math.min(lBlocs.debut, aIndex);
                    lBlocs.fin = Math.max(lBlocs.debut, aIndex);
                    if (aElement.existe() && aElement.Visible !== false) {
                        lNb += 1;
                        lBlocs.lignesVisibles.push(aIndex);
                        this.cache.nbVisibles += 1;
                        if (this._options.estLargeurAuto && MethodesObjet_1.MethodesObjet.isFunction(this._options.getTailleElementlargeurAuto)) {
                            lTailleMaxLibelle = Math.max(lTailleMaxLibelle, this._options.getTailleElementlargeurAuto(aElement, this._options.classTexte === 'Gras')) + (this._options.multiSelection ? 10 : 0);
                        }
                    }
                }
                );
                if (this._options.estLargeurAuto && lTailleMaxLibelle && MethodesObjet_1.MethodesObjet.isNumeric(this.cache.largeurCellule)) {
                    this.cache.largeurCellule = Math.min(Math.max(lTailleMaxLibelle, this._options.largeurAutoMin), this._options.largeurAutoMax);
                    this.bouton.setLargeur(this.cache.largeurCellule);
                }
                this.cache.scrollInfiniActif = !this._options.desactiverScrollInfini && this.cache.blocs.length > (2 * this._options.nbBlocsScrollInfini + 2) && this.cache.nbVisibles > 100;
                this.cache.avecCBMultiSelection = false;
                if (this._options.multiSelection) {
                    if (!this._infosElementsCbs) {
                        this._infosElementsCbs = {};
                    }
                    this.ListeElements.parcourir( (aElement, aIndex) => {
                        if (aElement.existe() && aElement.Visible !== false) {
                            this._initInfosElementsCBs(aIndex);
                            if (this._infosElementsCbs[aIndex].avecCB) {
                                this.cache.avecCBMultiSelection = this._infosElementsCbs[aIndex].avecCB;
                            }
                        }
                    }
                    );
                }
                if (this.cache.nbVisibles === 0 && this._options.deroulerListeSeulementSiPlusieursElements) {
                    return;
                }
                if ($('#' + this.Nom.escapeJQ()).length === 0) {
                    return;
                }
                let lLargeurListe = this._getLargeurListe()
                  , lCompteurLigne = 0
                  , lNumeroDerniereLigne = 0
                  , lNumeroLigneReference = -1
                  , lEstMultiSelection = this._options.multiSelection
                  , lAvecScroll = false;
                this.cache.recherchesSurlignage = null;
                this.cache.avecSurlignage = this._options.avecSurlignageSuggestion && this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche;
                const lEstOuvertureModale = this._estOuvertureModale();
                if (!lEstOuvertureModale) {
                    $('#' + this.idWrapperBouton.escapeJQ()).css('position', 'relative');
                    $('#' + this.NomListe.escapeJQ()).css('width', lLargeurListe);
                }
                if (lEstMultiSelection && !this._infosElementsCbs) {
                    this._infosElementsCbs = {};
                }
                if (this.cache.avecSurlignage && !this.cache.surDemandeSaisieRechercheTout) {
                    const lRecherche = this.bouton.getLibelle().trim();
                    if (lRecherche && lRecherche.length > 0 && (!this._options.rechercheTout || !this._options.rechercheTout.includes(lRecherche))) {
                        this.cache.recherchesSurlignage = lRecherche.split(' ');
                    }
                }
                if (!this._avecDeroulerListe()) {
                    return;
                }
                let lEnteteListe = null;
                if (MethodesObjet_1.MethodesObjet.isFunction(this._options.getEnteteListe)) {
                    lEnteteListe = this._options.getEnteteListe(this);
                }
                let lPiedListe = null;
                if (MethodesObjet_1.MethodesObjet.isFunction(this._options.getPiedListe)) {
                    lPiedListe = this._options.getPiedListe(this);
                }
                if (lLargeurListe > 0) {
                    lLargeurListe = lLargeurListe - 1;
                }
                this.ListeElements.parcourir( (aElement, aIndex) => {
                    if (aElement.existe() && aElement.Visible !== false) {
                        lNumeroDerniereLigne = aIndex;
                        lCompteurLigne += 1;
                        if (lCompteurLigne === this._options.nbrLignes) {
                            lNumeroLigneReference = aIndex;
                        }
                        if (lCompteurLigne > this._options.nbrLignes) {
                            lAvecScroll = true;
                        }
                    }
                }
                );
                this.cache.largeurContenu = lLargeurListe - (ObjetNavigateur_1.Navigateur.getLargeurBarreDeScroll && (lAvecScroll || this._options.avecReservationPlaceBarreScroll) ? ObjetNavigateur_1.Navigateur.getLargeurBarreDeScroll() - 2 : 0);
                const lEstContenuVide = this.cache.nbVisibles === 0;
                if (ObjetHtml_1.GHtml.elementExiste(this.NomListe)) {
                    const lHtmlCombo = (IE.jsx.str("div", {
                        role: "presentation",
                        style: {
                            backgroundColor: this._options.couleurFondDeroulant || null
                        }
                    }, lEnteteListe && lEnteteListe.html ? IE.jsx.str("div", {
                        class: ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie_entete_liste
                    }) : '', IE.jsx.str("div", {
                        id: this.idContenu,
                        tabindex: "-1",
                        role: "presentation",
                        "ie-node": this.jsxGetNodeContenu.bind(this),
                        class: IEHtml_DraggableDroppable_1.StylesIEHtmlDraggableDroppableSelecteur.ieDraggableHandleCancel,
                        style: 'height:0px; overflow-y: auto; overflow-x: hidden;' + (lEstOuvertureModale ? '' : ObjetStyle_1.GStyle.composeWidth(lLargeurListe))
                    }, IE.jsx.str("ul", {
                        class: ['liste-as-options', this.cache.avecCBMultiSelection ? ' multi-selections ' : ''],
                        id: this.idContenuScroll,
                        role: "listbox",
                        "aria-multiselectable": this.cache.avecCBMultiSelection ? 'true' : false
                    }, (aTab) => {
                        if (lEstContenuVide) {
                            const lJSXGetNodeListeVide = (aNode) => {
                                $(aNode).eventValidation( () => {
                                    this.fermerListe();
                                }
                                );
                            }
                            ;
                            aTab.push(IE.jsx.str("li", {
                                "ie-node": lJSXGetNodeListeVide
                            }, IE.jsx.str("div", {
                                class: "as-li ObjetSaisie_contenuvide"
                            }, ObjetTraduction_1.GTraductions.getValeur('Navigation.ObjetSaisieVide'))));
                        } else {
                            if (this.cache.scrollInfiniActif) {
                                for (let i = 0; i <= this._options.nbBlocsScrollInfini; i++) {
                                    aTab.push(this._composeBloc(this.cache.blocs[i], i));
                                }
                            } else {
                                this.cache.blocs.forEach( (aBloc, aIndex) => {
                                    aTab.push(this._composeBloc(aBloc, aIndex));
                                }
                                );
                            }
                        }
                    }
                    )), lPiedListe && lPiedListe.html ? IE.jsx.str("div", {
                        class: ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie_pied_liste
                    }) : '', lEstMultiSelection ? IE.jsx.str("div", {
                        class: "validate-conteneur"
                    }, IE.jsx.str("ie-bouton", {
                        "ie-model": this.jsxBtnModelValidationCB.bind(this),
                        "ie-node": this.jsxGetNodeBtnValidationCB.bind(this),
                        "ie-html": this.jsxGetHtmlBtnValidationCB.bind(this),
                        class: Type_ThemeBouton_1.TypeThemeBouton.primaire,
                        id: this.idBtnValidation
                    })) : ''));
                    ObjetHtml_1.GHtml.setDisplay(this.NomListe, true);
                    if (lEstOuvertureModale) {
                        const lConteneur = ObjetHtml_1.GHtml.getElement(this.nomListeConteneur);
                        lConteneur.classList.add('visible');
                    }
                    ObjetHtml_1.GHtml.setHtml(this.NomListe, lHtmlCombo, {
                        controleur: this.controleur,
                        ignorerScroll: true
                    });
                    if (lEnteteListe && lEnteteListe.html) {
                        $(`#${this.NomListe.escapeJQ()} .${ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie_entete_liste}`).ieHtml(lEnteteListe.html, {
                            controleur: lEnteteListe.controleur,
                            instance: this
                        });
                    }
                    if (lPiedListe && lPiedListe.html) {
                        $(`#${this.NomListe.escapeJQ()} .${ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie_pied_liste}`).ieHtml(lPiedListe.html, {
                            controleur: lPiedListe.controleur,
                            instance: this
                        });
                    }
                    if (this.cache.scrollInfiniActif) {
                        let lTop = 0
                          , lNbLignesVisibles = 0
                          , lAvecBlocInvisible = false;
                        this.cache.blocs.forEach( (aBloc, aNumeroBloc) => {
                            if (aBloc.dessine) {
                                this._majBloc(aNumeroBloc);
                                lTop += aBloc.height;
                                lNbLignesVisibles += aBloc.lignesVisibles.length;
                            } else {
                                lAvecBlocInvisible = true;
                            }
                        }
                        );
                        if (!this.cache.heightScroll) {
                            this.cache.heightScroll = lTop;
                            if (lAvecBlocInvisible) {
                                this.cache.heightScroll = lTop / lNbLignesVisibles * this.cache.nbVisibles;
                            }
                        }
                        $('#' + this.idContenuScroll.escapeJQ()).height(this.cache.heightScroll);
                        this._majBlocsTacheFond();
                    }
                    const lEventMap = {
                        'focusin.saisie': this._surFocusLigne,
                        'pointerdown.saisie': function(event) {
                            const T = this.id.split('_');
                            const lIndice = parseInt(T[T.length - 1], 10);
                            event.data.instance.surLigne(lIndice);
                        },
                        'click.saisie': this._surClickListe,
                        'mousemove.saisie': this._surMouseMoveListe
                    };
                    $('#' + this.NomListe.escapeJQ()).off(lEventMap).on(lEventMap, '.' + lClasseJQ, {
                        instance: this
                    });
                    const lEventMap2 = {
                        focusin: this._surFocusLigne,
                        keydown: this._surKeyDownListe,
                        keyup: this._surKeyUpListe
                    };
                    $('#' + this.NomListe.escapeJQ()).off(lEventMap2).on(lEventMap2, {
                        instance: this
                    });
                }
                if (lNumeroLigneReference < 0) {
                    lNumeroLigneReference = lNumeroDerniereLigne;
                }
                this._ouvertureInverse = false;
                const lJLigne = lEstContenuVide ? $('#' + this.Nom.escapeJQ() + ' .ObjetSaisie_contenuvide') : $('#' + this.Nom.escapeJQ() + '_' + lNumeroLigneReference);
                if (lJLigne.length > 0) {
                    this.hauteurContenu = lJLigne.position().top + lJLigne.outerHeight(true);
                } else {
                    this.hauteurContenu = 0;
                }
                if (lEstMultiSelection) {
                    this.hauteurContenu += 1;
                }
                const lDecalageOmbre = 1;
                const lJBouton = $('#' + this.bouton.getNom().escapeJQ());
                let lPositionBouton = lJBouton.position();
                if (!lPositionBouton) {
                    lPositionBouton = {
                        top: 0,
                        left: 0
                    };
                }
                const lRectOverflow = ObjetPosition_1.GPosition.getClientRect(ObjetHtml_1.GHtml.getParentOverflowNonVisible(lJBouton.get(0)));
                const lRectRef = ObjetPosition_1.GPosition.getClientRect(lEstOuvertureModale ? this.Nom : lJBouton.get(0));
                const lJListe = $('#' + this.NomListe.escapeJQ());
                const lCorrectionHauteur = lDecalageOmbre + 5 + ObjetPosition_1.GPosition.remToPixels(1.2) + (lEstMultiSelection ? $('#' + this.NomListe.escapeJQ() + ' .validate-conteneur').outerHeight() : 0) + (lEnteteListe && lEnteteListe.html ? $(`#${this.NomListe.escapeJQ()} .${ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie_entete_liste}`).outerHeight() + ObjetPosition_1.GPosition.remToPixels(0.4 * 2) : 0) + (lPiedListe && lPiedListe.html ? $(`#${this.NomListe.escapeJQ()} .${ObjetSaisie_css_1.StylesObjetSaisie.ObjetSaisie_pied_liste}`).outerHeight() + ObjetPosition_1.GPosition.remToPixels(0.4 * 2) : 0);
                const lHauteurVersBas = Math.min(lRectOverflow.bottom, ObjetNavigateur_1.Navigateur.ecranH) - lRectRef.bottom - lCorrectionHauteur;
                const lHauteurVersHaut = lRectRef.top - lCorrectionHauteur - lRectOverflow.top;
                this.decalageTopOuvertureInverse = lCorrectionHauteur + (lEstOuvertureModale ? -7 : -3);
                if (this.hauteurContenu > lHauteurVersBas && lHauteurVersHaut > 20 && lHauteurVersHaut * 2 / 3 > lHauteurVersBas) {
                    this._ouvertureInverse = true;
                    this.hauteurContenu = Math.min(this.hauteurContenu, lHauteurVersHaut);
                    if (lJListe.length) {
                        const lTop = lEstOuvertureModale ? lRectRef.top - this.hauteurContenu - this.decalageTopOuvertureInverse : -(lRectRef.height + lDecalageOmbre);
                        lJListe.css({
                            top: lTop + 'px'
                        });
                    }
                } else {
                    if (lJListe.length) {
                        lJListe.css({
                            top: (lRectRef.height + lDecalageOmbre + (lEstOuvertureModale ? lRectRef.top : 0)) + 'px'
                        });
                    }
                    this.hauteurContenu = Math.min(this.hauteurContenu, lHauteurVersBas);
                }
                if (!lEstOuvertureModale) {
                    let lLeft = lPositionBouton.left;
                    if (this._options.largeurListe) {
                        const lLeftAbs = ObjetPosition_1.GPosition.getLeft(this.Nom);
                        const lWidthListe = $('#' + this.NomListe.escapeJQ()).width();
                        if (lLeftAbs + lWidthListe > ObjetNavigateur_1.Navigateur.clientL) {
                            lLeft = Math.max(-lLeftAbs + 2, ObjetPosition_1.GPosition.getWidth(this.Nom) - lWidthListe);
                        }
                    }
                    lJListe.css({
                        left: lLeft
                    });
                }
                if (this.cache.largeurCellule === 0) {
                    this.cache.largeurCellule = ObjetHtml_1.GHtml.getElement(this.NomListe).scrollWidth;
                    this.bouton.setLargeur(this.cache.largeurCellule);
                    ObjetPosition_1.GPosition.setWidth(this.NomListe, this.cache.largeurCellule);
                }
                ObjetHtml_1.GHtml.setDisplay(this.NomListe, false);
                if (lEstOuvertureModale) {
                    ObjetHtml_1.GHtml.getElement(this.nomListeConteneur).classList.remove('visible');
                }
            }
            jsxBtnModelValidationCB() {
                return {
                    event: (aEvent) => {
                        aEvent.stopPropagation();
                        this.surValidation(true, -1, {
                            validationMultiSelection: true
                        });
                    }
                    ,
                    getDisabled: () => {
                        let lDisabled = false;
                        if (this._options.avecElementObligatoire) {
                            let lNbSelectionnes = 0;
                            this.ListeElements.parcourir( (aElement, aIndex) => {
                                const lInfosCBs = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                                if (lInfosCBs && !lInfosCBs.estCumul && this._estSelectionnable(aElement)) {
                                    if (lInfosCBs.selectionne) {
                                        lNbSelectionnes += 1;
                                    }
                                }
                            }
                            );
                            lDisabled = (lNbSelectionnes === 0);
                        }
                        return lDisabled;
                    }
                };
            }
            jsxGetNodeContenu(aNode) {
                const lInstance = this;
                $(aNode).on({
                    keydown(aEvent) {
                        if (!aEvent.altKey && (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas || aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut)) {
                            aEvent.preventDefault();
                        }
                    },
                    wheel(aEvent) {
                        if (this.scrollHeight > this.clientHeight) {
                            aEvent.originalEvent.__wheelSurCombo__ = true;
                        }
                    }
                });
                if (this.cache.scrollInfiniActif) {
                    $(aNode).on('scroll', function() {
                        lInstance._majBlocsDeTop(this.scrollTop);
                    });
                }
            }
            jsxGetNodeBtnValidationCB(aNode) {
                $(aNode).on({
                    mouseover: () => {
                        this._survolBoutonMultiSelection();
                    }
                });
            }
            jsxGetHtmlBtnValidationCB() {
                let lNb = 0;
                let lNbSelectionnes = 0;
                if (this.ListeElements) {
                    this.ListeElements.parcourir( (aElement, aIndex) => {
                        const lInfosCBs = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                        if (lInfosCBs && !lInfosCBs.estCumul && this._estSelectionnable(aElement)) {
                            lNb += 1;
                            if (lInfosCBs.selectionne) {
                                lNbSelectionnes += 1;
                            }
                        }
                    }
                    );
                }
                return this._options.getLibelleBoutonValider(lNbSelectionnes, lNb);
            }
            getNbElementsVisible() {
                let lResult = 0;
                if (this.ListeElements) {
                    for (let i = 0, lNb = this.ListeElements.count(); i < lNb; i++) {
                        const lElement = this.ListeElements.get(i);
                        if (lElement.existe() && lElement.Visible !== false) {
                            lResult++;
                        }
                    }
                }
                return lResult;
            }
            fermerListe(AAvecFocus) {
                if (this.Selection >= 0) {
                    this._majBlocsDeLigne(this.Selection, true);
                }
                if (this.listeDeroulee) {
                    this._arreterFermetureListe();
                    clearTimeout(this._timerEditionRecherche);
                    clearTimeout(this.cache.timerMAJ);
                    this._selectionLigne(this.Survolee, false);
                    this.Survolee = -1;
                    if (AAvecFocus) {
                        this.setFocus();
                    }
                    this.listeDeroulee = false;
                    this.activerEventOut = false;
                    this.bouton.setOptionsObjetCelluleBouton({
                        ariaExpanded: false,
                        ariaControls: ''
                    });
                    const lElementListe = ObjetHtml_1.GHtml.getElement(this.NomListe);
                    const lElementContenuListe = ObjetHtml_1.GHtml.getElement(this.idContenu);
                    if (ObjetHtml_1.GHtml.estElement(lElementListe) && ObjetHtml_1.GHtml.estElement(lElementContenuListe)) {
                        lElementContenuListe.style.overflowY = 'hidden';
                        if (!this._estOuvertureModale()) {
                            ObjetStyle_1.GStyle.setZindex(lElementListe, 200);
                        }
                        const lObjet = this;
                        if (this._ouvertureInverse) {
                            $(lElementListe).css({
                                top: -lObjet.hauteurContenu - this.decalageTopOuvertureInverse
                            });
                        }
                        $(lElementContenuListe).css({
                            height: lObjet.hauteurContenu
                        }).animate({
                            height: 0
                        }, {
                            duration: this._options.dureeAnimationDeploiement,
                            step: this._ouvertureInverse ? this._etapeFermetureInverse.bind(this, $(lElementListe)) : null
                        }).queue(function() {
                            lObjet._eventAnimationFermetureFin();
                            $(this).dequeue();
                        });
                    }
                }
            }
            surLigne(ASurvolee, aSansFocusLigne) {
                if (!this.listeDeroulee) {
                    return;
                }
                const lAvecFocus = aSansFocusLigne !== true;
                if (this.Survolee !== ASurvolee && MethodesObjet_1.MethodesObjet.isNumber(ASurvolee)) {
                    this._majBlocsDeLigne(ASurvolee);
                    const N = this.ListeElements.count();
                    if (this._estSelectionnable(this.ListeElements.get(ASurvolee))) {
                        if ((this.Survolee > -1) && (this.Survolee < N)) {
                            this._selectionLigne(this.Survolee, false);
                        }
                        this.Survolee = ASurvolee;
                        this._selectionLigne(this.Survolee, true);
                    }
                    const lElementContenu = ObjetHtml_1.GHtml.getElement(this.idContenu);
                    if (lElementContenu) {
                        const lJContenuElement = $('#' + this.Nom.escapeJQ() + '_' + this.Survolee);
                        if (lJContenuElement.length === 1) {
                            if (this.Survolee === 0) {
                                lElementContenu.scrollTop = 0;
                            } else {
                                ObjetPosition_1.GPosition.scrollToElement(lJContenuElement.get(0), lElementContenu);
                            }
                        }
                    }
                    if (lAvecFocus) {
                        ObjetHtml_1.GHtml.setFocus(this.Nom + '_' + this.Survolee);
                    }
                } else if (ASurvolee === -1) {
                    if (lAvecFocus) {
                        this._majBlocsDeLigne(ASurvolee);
                        ObjetHtml_1.GHtml.setFocus(this.NomListe);
                    }
                }
            }
            setDonneesObjetSaisie(aParams) {
                var _a, _b;
                const lParams = Object.assign({
                    liste: null,
                    selection: null,
                    deroulerListe: false,
                    actualiserListe: false,
                    ignorerSelectionAutomatiqueAvecUnElement: false,
                    options: null
                }, aParams);
                if (lParams.options) {
                    this.setOptionsObjetSaisie(lParams.options);
                }
                if (this.listeDeroulee) {
                    this.fermerListe(false);
                }
                clearTimeout(this.cache.timerMAJ);
                this.ListeElements = lParams.liste;
                this.actualiserListe = lParams.actualiserListe;
                this._trierElements();
                this.listeDeroulee = false;
                this.activerEventOut = false;
                this.cache.heightScroll = 0;
                let lAvecSelectionAutomatique = false;
                if (this._options.initAutoSelectionAvecUnElement && !this._options.multiSelection && !lParams.ignorerSelectionAutomatiqueAvecUnElement) {
                    lAvecSelectionAutomatique = this._gererCasUnSeulElement();
                }
                this._remplirListe();
                if (!lAvecSelectionAutomatique && typeof lParams.selection === 'number') {
                    this.setSelection(lParams.selection);
                }
                if (this._options.multiSelection && lParams.selection instanceof ObjetListeElements_1.ObjetListeElements) {
                    this._initListeSelections(lParams.selection);
                }
                if (lParams.deroulerListe && (this.getNbElementsVisible() > 1 || !this._options.deroulerListeSeulementSiPlusieursElements)) {
                    this._deroulerListe(lParams.selection ? null : 0);
                }
            }
            setDonnees(AListeElements, ASelection, ADeroulerListe, AActualiserListe) {
                this.setDonneesObjetSaisie({
                    liste: AListeElements,
                    selection: ASelection,
                    deroulerListe: ADeroulerListe,
                    actualiserListe: AActualiserListe
                });
            }
            setFocus() {
                this.bouton.setFocus();
                if (this._avecSaisieRechercheDynamique()) {
                    setTimeout( () => {
                        ObjetHtml_1.GHtml.setCursorAtEnd(this.bouton.NomEdit);
                    }
                    , 0);
                }
            }
            viderContenu() {
                this.setContenu('');
                this._actualiserWAICombo(null);
            }
            setContenu(AContenu) {
                let lLibelle = '';
                if (AContenu instanceof ObjetListeElements_1.ObjetListeElements) {
                    lLibelle = this._options.getLibelleCelluleMultiSelection(AContenu);
                } else if (AContenu instanceof ObjetElement_1.ObjetElement) {
                    lLibelle = AContenu.getLibelle();
                } else {
                    lLibelle = AContenu || '';
                }
                this.bouton.setLibelle(lLibelle);
            }
            getContenu() {
                if ([Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode) && !this.estComboMultiSelection()) {
                    return this.Selection > -1 ? this.ListeElements.get(this.Selection).getLibelle() : '';
                } else {
                    return this.bouton.getLibelle();
                }
            }
            getListeElements() {
                return this.ListeElements;
            }
            estComboMultiSelection() {
                return this._options.multiSelection;
            }
            reset() {
                this.setDonnees(new ObjetListeElements_1.ObjetListeElements());
                this.viderContenu();
                this.Selection = -1;
            }
            getSelection() {
                return this.Selection > -1 ? this.ListeElements.get(this.Selection) : null;
            }
            initSelectionParNumeroEtGenre(ANumero, AGenre, AIndiceSiNonTrouve) {
                if ((ANumero === null || ANumero === undefined) && (AGenre === null || AGenre === undefined)) {
                    ANumero = 0;
                }
                if (this.ListeElements) {
                    let LIndice = this.ListeElements.getIndiceParNumeroEtGenre(ANumero, AGenre);
                    if (LIndice === null || LIndice === undefined) {
                        LIndice = AIndiceSiNonTrouve;
                    }
                    this.initSelection(LIndice);
                }
            }
            initSelection(aSelection) {
                this.Selection = aSelection >= 0 ? aSelection : -1;
                if (this.Selection >= 0 && this._options.modifierContenuCelluleSurSelection) {
                    const lElement = this.ListeElements.get(this.Selection);
                    if (lElement) {
                        if (this._options.getContenuCellule) {
                            this._appliquerGetContenuCellule(lElement);
                        } else if (this._options.celluleAvecTexteHtml && lElement.libelleHtml) {
                            this.bouton.setLibelleHtml(lElement.libelleHtml);
                        } else {
                            this.setContenu(lElement.getLibelle());
                        }
                        const lIdDescendant = this.Nom + '_' + this.Selection;
                        this._actualiserWAICombo(lIdDescendant);
                    }
                }
                this.$refreshSelf();
            }
            setSelectionParNumeroEtGenre(ANumero, AGenre, AIndice) {
                let lResult = false;
                if ((ANumero === null || ANumero === undefined) && (AGenre === null || AGenre === undefined)) {
                    ANumero = 0;
                }
                if (this.ListeElements) {
                    let LIndice = this.ListeElements.getIndiceParNumeroEtGenre(ANumero, AGenre);
                    if (LIndice === null || LIndice === undefined) {
                        LIndice = AIndice;
                    }
                    lResult = LIndice >= 0;
                    this.setSelection(LIndice);
                }
                return lResult;
            }
            setSelectionParIndice(aIndice) {
                if (this.ListeElements.getNbrElementsExistes() <= 1) {
                    return;
                }
                this.setSelection(aIndice);
            }
            setSelectionParElement(aElement, aIndice) {
                if (aElement) {
                    this.setSelectionParNumeroEtGenre(aElement.getNumero(), aElement.getGenre(), aIndice);
                } else {
                    this.setSelectionParNumeroEtGenre(null, null, aIndice);
                }
            }
            setListeSelections(aListeSelections) {
                let lResult = false;
                if (this._infosElementsCbs) {
                    lResult = this._initListeSelections(aListeSelections);
                }
                this.surValidation(false, -1, {
                    validationMultiSelection: true
                });
                return lResult;
            }
            surPrecedentSuivant(aPrecedent) {
                this._surPrecedentSuivant(aPrecedent);
            }
            setActif(AActif) {
                super.setActif(AActif);
                this.bouton.setActif(AActif);
                this.$refreshSelf();
            }
            getDonneesPourHTMLCombo() {
                return {
                    options: this._options,
                    bouton: this.bouton
                };
            }
            _avecSaisieRechercheDynamique() {
                return this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche && !!this._options.surEditionRecherche;
            }
            _trierElements() {
                if (this._options.avecTriListeElements && this.ListeElements) {
                    this.ListeElements.trier();
                }
            }
            _callbackRecherche(aParam) {
                const lParam = Object.assign({
                    liste: null
                }, aParam);
                if (lParam.liste && lParam.liste.count() > 0) {
                    this.ListeElements = lParam.liste;
                    this._trierElements();
                    this.fermerListe(false);
                    this._deroulerListe(0, false, true);
                } else {
                    this.fermerListe(false);
                }
            }
            _modificationSaisieBoutonRecherche(aValue) {
                this.ListeElements = new ObjetListeElements_1.ObjetListeElements();
                this.Selection = -1;
                const lValue = (aValue + '').trim();
                clearTimeout(this._timerEditionRecherche);
                if (lValue.length < this._options.nbCarMinRecherche) {
                    this.fermerListe(false);
                } else if (this._options.surEditionRecherche) {
                    this.cache.editionEnCours = true;
                    if (this._avecSaisieRechercheDynamique()) {
                        if (this._options.delaiSurEditionRecherche >= 0) {
                            this._timerEditionRecherche = setTimeout( () => {
                                this.cache.surDemandeSaisieRechercheTout = false;
                                this._options.surEditionRecherche(lValue, this._callbackRecherche.bind(this));
                            }
                            , this._options.delaiSurEditionRecherche);
                        } else {
                            this.cache.surDemandeSaisieRechercheTout = false;
                            this._options.surEditionRecherche(lValue, this._callbackRecherche.bind(this));
                        }
                    }
                }
            }
            _boutonPrecSuivOK(aPrecedent) {
                const lListe = this.ListeElements;
                if (!lListe || !lListe.count || lListe.count() < 2) {
                    return false;
                }
                if (!this.getActif()) {
                    return false;
                }
                let lIndice = this.Selection;
                const lEnBoucle = this._options.avecBoutonsPrecSuiv_boucle;
                if (lIndice === -1) {
                    if (aPrecedent) {
                        lIndice = lEnBoucle ? 0 : -1;
                    } else {
                        return lListe.count() > 0;
                    }
                }
                const lElement = lListe.get(lIndice);
                if (!lElement) {
                    return false;
                }
                if (aPrecedent && lListe.get(this.chercherIndiceSelectionSelonSens(lIndice - 1, true, lEnBoucle, this._options.getElementSelectionnableParPrecSuiv))) {
                    return true;
                }
                if (!aPrecedent && lListe.get(this.chercherIndiceSelectionSelonSens(lIndice + 1, false, lEnBoucle, this._options.getElementSelectionnableParPrecSuiv))) {
                    return true;
                }
                return false;
            }
            _parcourirFilsDeCumul(aIndice, aFunction) {
                const lInfos = this._infosElementsCbs[aIndice];
                this.ListeElements.parcourir( (D, aIndex) => {
                    if (aIndice !== aIndex && D.Visible !== false && (!lInfos.estFilsCumul || lInfos.estFilsCumul(D))) {
                        aFunction.call(this, D, aIndex);
                    }
                }
                , this);
            }
            _getSelectionElement(aInfos, aIndice) {
                const lResult = {
                    selectionne: false,
                    nbFils: 0,
                    nbFilsSelectionne: 0
                };
                if (!aInfos.estCumul) {
                    lResult.selectionne = aInfos.selectionne;
                } else {
                    this._parcourirFilsDeCumul(aIndice, (D, aIndex) => {
                        lResult.nbFils += 1;
                        const lInfosFils = this._infosElementsCbs[aIndex];
                        if (lInfosFils && lInfosFils.selectionne) {
                            lResult.nbFilsSelectionne += 1;
                        }
                    }
                    );
                    lResult.selectionne = lResult.nbFilsSelectionne > 0 && lResult.nbFilsSelectionne === lResult.nbFils;
                }
                return lResult;
            }
            getValueElementCB(aIndice) {
                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndice] : null;
                if (lInfos) {
                    return this._getSelectionElement(lInfos, aIndice).selectionne;
                }
                return false;
            }
            _modifierSelectionElement(aIndice, aValue, aProfondeur) {
                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndice] : null;
                if (lInfos) {
                    lInfos.selectionne = aValue;
                    const lElementSource = this.ListeElements.get(aIndice)
                      , lProfondeur = aProfondeur || 0;
                    if (lProfondeur > 1) {
                        return;
                    }
                    this.ListeElements.parcourir( (D, aIndex) => {
                        const lInfosElement = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                        if (aIndice !== aIndex && D.Visible !== false && lInfosElement && !lInfosElement.estCumul && lInfosElement.setModifierSelection) {
                            const lResult = lInfosElement.setModifierSelection({
                                elementCourantSelectionne: lInfosElement.selectionne,
                                elementSource: lElementSource,
                                elementSourceSelectionne: aValue
                            });
                            if ((lResult === true && lInfosElement.selectionne !== true) || (lResult === false && lInfosElement.selectionne !== false)) {
                                this._modifierSelectionElement(aIndex, lResult, lProfondeur + 1);
                            }
                        }
                    }
                    , this);
                }
            }
            _setValueElementCB(aIndice, aValue) {
                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndice] : null;
                if (lInfos) {
                    if (lInfos.estCumul) {
                        this._parcourirFilsDeCumul(aIndice, (D, aIndex) => {
                            this._modifierSelectionElement(aIndex, aValue);
                        }
                        );
                    } else {
                        this._modifierSelectionElement(aIndice, aValue);
                    }
                }
            }
            _surPrecedentSuivant(aPrecedent) {
                let lIndice = this.Selection;
                const lListe = this.ListeElements;
                const lEnBoucle = this._options.avecBoutonsPrecSuiv_boucle;
                const lMethodeSelec = this._options.getElementSelectionnableParPrecSuiv;
                if (this._options.multiSelection && lListe) {
                    lListe.parcourir( (D, aIndex) => {
                        const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                        if (lInfos && !lInfos.estCumul && lInfos.selectionne) {
                            lIndice = aIndex;
                            if (aPrecedent) {
                                return false;
                            }
                        }
                    }
                    , this);
                }
                if (lIndice === -1 && aPrecedent) {
                    lIndice = lEnBoucle ? 0 : -1;
                }
                if (MethodesObjet_1.MethodesObjet.isNumber(lIndice) && lListe && lListe.get) {
                    if (aPrecedent && (lListe.get(lIndice - 1) || lEnBoucle)) {
                        lIndice = this.chercherIndiceSelectionSelonSens(lIndice - 1, true, lEnBoucle, lMethodeSelec);
                    } else if (!aPrecedent && (lListe.get(lIndice + 1) || lEnBoucle)) {
                        lIndice = this.chercherIndiceSelectionSelonSens(lIndice + 1, false, lEnBoucle, lMethodeSelec);
                    }
                    if (lIndice >= 0) {
                        if (this._options.multiSelection) {
                            lListe.parcourir( (D, aIndex) => {
                                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                                if (lInfos && lInfos.selectionne) {
                                    lInfos.selectionne = false;
                                }
                            }
                            , this);
                            this._setValueElementCB(lIndice, true);
                            this.surValidation(true, lIndice);
                        } else {
                            this.surValidation(true, lIndice);
                        }
                    }
                }
            }
            _getLargeurListe() {
                return this._options.largeurListe ? this._options.largeurListe : $('#' + this.bouton.getNom().escapeJQ()).width();
            }
            _surEvenementBouton(aGenreEvent, aEvent, aEvenementSurEdit) {
                var _a;
                switch (aGenreEvent) {
                case Enumere_Event_1.EEvent.SurMouseDown:
                    if (aEvenementSurEdit) {
                        if ([Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode)) {
                            this.surSelection();
                        }
                    } else {
                        this.surSelection({
                            surBoutonCellule: true
                        });
                    }
                    break;
                case Enumere_Event_1.EEvent.SurKeyUp:
                    switch (this._options.mode) {
                    case Enumere_Saisie_1.EGenreSaisie.Combo:
                        {
                            if (!this.listeDeroulee) {
                                if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut || aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas) {
                                    this._deroulerListe();
                                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Debut) {
                                    this._deroulerListe(0);
                                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Fin) {
                                    this._deroulerListe(this._getDerniereLingeSelectionnable());
                                }
                            }
                            if (!this.listeDeroulee && !aEvent.altKey && (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheGauche || aEvent.which === ToucheClavier_1.ToucheClavier.FlecheDroite) && !this._options.multiSelection && !((_a = ObjetHtml_1.GHtml.getElement(this.getNom())) === null || _a === void 0 ? void 0 : _a.closest('[role="toolbar"]'))) {
                                this._surPrecedentSuivant(aEvent.which === ToucheClavier_1.ToucheClavier.FlecheGauche);
                            }
                            break;
                        }
                    case Enumere_Saisie_1.EGenreSaisie.SaisieRecherche:
                        {
                            const lNbVisibles = this.getNbElementsVisible();
                            if (!this.listeDeroulee && aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas && (lNbVisibles > 0 || !this._options.deroulerListeSeulementSiPlusieursElements)) {
                                this._deroulerListe(0, true);
                            } else {
                                this._defilerFleches(aEvent);
                            }
                            if (ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent)) {
                                if (this.listeDeroulee && (lNbVisibles > 0 || !this._options.deroulerListeSeulementSiPlusieursElements)) {
                                    this.surValidation(true, this.Selection >= 0 ? this.Selection : 0);
                                } else if ((lNbVisibles > 0 || !this._options.deroulerListeSeulementSiPlusieursElements) && !this.actualiserListe) {
                                    if (lNbVisibles > 1 || !this._options.deroulerListeSeulementSiPlusieursElements) {
                                        this._deroulerListe(0, true);
                                    } else {
                                        this._gererCasUnSeulElement();
                                    }
                                } else {
                                    this.surValidation(false, -1, {
                                        saisieRecherche: true
                                    });
                                }
                            }
                            return;
                        }
                    }
                    if (ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent)) {
                        this.surSelection();
                    }
                    break;
                case Enumere_Event_1.EEvent.SurFocusOut:
                    switch (this._options.mode) {
                    case Enumere_Saisie_1.EGenreSaisie.SaisieRecherche:
                        if (this._avecSaisieRechercheDynamique()) {
                            this._declencherFermetureListe();
                        }
                        break;
                    }
                    break;
                }
            }
            _appliquerGetContenuCellule(aElement) {
                if (!aElement) {
                    this.setContenu('');
                    return;
                }
                const lContenuCellule = this._options.getContenuCellule(aElement, this);
                if (typeof lContenuCellule === 'string') {
                    if (lContenuCellule) {
                        this.setContenu(lContenuCellule);
                    }
                } else if (lContenuCellule) {
                    if (MethodesObjet_1.MethodesObjet.isString(lContenuCellule.libelleHtml)) {
                        this.bouton.setLibelleHtml(lContenuCellule.libelleHtml);
                    } else if (MethodesObjet_1.MethodesObjet.isString(lContenuCellule.libelle)) {
                        this.setContenu(lContenuCellule.libelle);
                    }
                }
            }
            _getParamsCallback(aParams) {
                return Object.assign({
                    combo: this,
                    genreEvenement: -1,
                    element: null,
                    indice: null,
                    genre: this.Genre,
                    surSetDonnees: null,
                    listeSelections: null,
                    estComboMultiSelection: this._options.multiSelection,
                    interactionUtilisateur: this.InteractionUtilisateur,
                    estSelectionManuelle: false,
                    editionEnCours: this.cache.editionEnCours,
                    valeur: null,
                    saisieRecherche: false,
                    validationMultiSelection: false,
                    surBoutonCellule: false
                }, aParams);
            }
            _callback(aParams) {
                return this.callback.appel(aParams);
            }
            _retourSurNavigation(aParams) {
                if (aParams.retourSaisieAnnule) {
                    this.setEtatSaisie(false);
                }
                const lSurSetDonnes = this._surSetDonnnes;
                const lParams = this._getParamsCallback(Object.assign({
                    genreEvenement: Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection,
                    element: this.Selection >= 0 ? this.ListeElements.get(this.Selection) : null,
                    indice: this.Selection || 0,
                    genre: this.Genre,
                    surSetDonnees: lSurSetDonnes,
                    listeSelections: this._listeSelections,
                    estSelectionManuelle: this.InteractionUtilisateur
                }, aParams));
                delete this._surSetDonnnes;
                if (lParams.element && lParams.element.callbackSelection && MethodesObjet_1.MethodesObjet.isFunction(lParams.element.callbackSelection)) {
                    lParams.element.callbackSelection(lParams);
                }
                this._callback(lParams);
                if (this._options.surValidation) {
                    this._options.surValidation.call(this.Pere, lParams);
                }
                IEHtml_1.default.refresh();
                if (this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche) {
                    this.ListeElements = new ObjetListeElements_1.ObjetListeElements();
                }
            }
            _survolBoutonMultiSelection() {
                this._selectionLigne(this.Survolee, false);
                this.Survolee += 1;
            }
            _defilerFleches(aEvent, aSurKeyDown) {
                if (this.listeDeroulee) {
                    if (this._estEventFermetureFleche(aEvent)) {
                        if (!aSurKeyDown) {
                            this.fermerListe(true);
                        }
                        return false;
                    }
                    if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas) {
                        if (this._chercherSuivantSelectionnable(this.Survolee, true) < this.ListeElements.count()) {
                            this.surLigne(this._chercherSuivantSelectionnable(this.Survolee, true));
                            return true;
                        }
                        if (this._options.multiSelection && this.Survolee < this.ListeElements.count()) {
                            this._survolBoutonMultiSelection();
                            ObjetHtml_1.GHtml.setFocus(this.idBtnValidation, true);
                            return true;
                        }
                    }
                    if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut) {
                        if (this._chercherSuivantSelectionnable(this.Survolee, false) > -1) {
                            this.surLigne(this._chercherSuivantSelectionnable(this.Survolee, false));
                        }
                        return true;
                    }
                }
                return false;
            }
            _defiler(aEvent, aIgnorerFleches) {
                if (!this.listeDeroulee && ([Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode))) {
                    if (ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent)) {
                        this._deroulerListe();
                    }
                }
                if (this.listeDeroulee) {
                    if (ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent) || this._estEventFermetureFleche(aEvent)) {
                        this._surValidationClavier();
                    } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Echap) {
                        this.fermerListe(true);
                    } else if (!(!aIgnorerFleches && this._defilerFleches(aEvent)) && ToucheClavier_1.ToucheClavierUtil.estEventCaractereAlphaNumerique(aEvent)) {
                        clearTimeout(this._timerInitParseur);
                        this._timerInitParseur = setTimeout(this._initParseur.bind(this), 500);
                        this._parseur = this._parseur + aEvent.key;
                        const lIndice = this.ListeElements.getIndiceParParsingLibelle(this._parseur);
                        if (lIndice >= 0) {
                            this.surLigne(lIndice);
                        }
                    }
                }
            }
            _surValidationClavier() {
                if (this._options.multiSelection) {
                    this._setValueElementCB(this.Survolee, !this.getValueElementCB(this.Survolee));
                    this.$refreshSelf();
                } else {
                    this.surValidation(true, this.Survolee);
                }
            }
            _estEventFermetureFleche(aEvent) {
                return aEvent && aEvent.altKey && aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut;
            }
            _initParseur() {
                this._parseur = '';
            }
            _chercherSuivantSelectionnable(aIndice, aSensSuivant) {
                const lSens = aSensSuivant ? 1 : -1;
                aIndice = aIndice + lSens;
                const N = this.ListeElements.count();
                while ((aIndice > -1) && (aIndice < N) && this.ListeElements && this.ListeElements.get(aIndice) && !this._estSelectionnable(this.ListeElements.get(aIndice))) {
                    aIndice += lSens;
                }
                return aIndice;
            }
            _initInfosElementsCBs(aNumeroLigne) {
                const lElement = this.ListeElements.get(aNumeroLigne);
                const lSelectionnable = !!this._estSelectionnable(lElement);
                this._infosElementsCbs[aNumeroLigne] = {
                    selectionne: lSelectionnable && !!this._listeSelections.getElementParElement(lElement),
                    avecCB: lSelectionnable,
                    selectionnable: lSelectionnable,
                    nonEditable: false,
                    estCumul: false,
                    estFilsCumul: null,
                    setModifierSelection: null
                };
                if (this._options.getInfosElementCB && lElement) {
                    $.extend(this._infosElementsCbs[aNumeroLigne], this._options.getInfosElementCB(lElement));
                }
            }
            _composeLigne(aElement, I, aLignesVisibles) {
                if (!aElement) {
                    return '';
                }
                const lPaddingLeft = 3;
                const lParams = {
                    element: aElement,
                    indice: I,
                    largeur: this.cache.largeurContenu - lPaddingLeft
                };
                let LLibelle = aElement.getLibelle();
                let lEstLibelleVide = false;
                if (aElement.libelleHtml || this._options.getContenuElement) {
                    LLibelle = this._options.getContenuElement ? this._options.getContenuElement(lParams) : aElement.libelleHtml;
                }
                if (!LLibelle && this._options.libelleElementSiVide) {
                    LLibelle = IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("span", {
                        "aria-hidden": "true"
                    }, "<"), this._options.libelleElementSiVide, IE.jsx.str("span", {
                        "aria-hidden": "true"
                    }, ">"));
                    lEstLibelleVide = true;
                }
                const lEstCumul = !!(this._options.getEstCumul && this._options.getEstCumul(aElement));
                const lClassElement = this._options.getClassElement ? this._options.getClassElement(lParams) : lEstCumul ? 'titre-liste' : '';
                let lAvecEllipsis = !this._options.getContenuElement && !this._estOuvertureModale();
                if (this.cache.avecSurlignage && this.cache.recherchesSurlignage && !aElement.libelleHtml && !lEstLibelleVide && !this._options.getContenuElement && (!this._options.avecSurlignageElement || this._options.avecSurlignageElement(lParams))) {
                    LLibelle = ObjetChaine_1.GChaine.getLibelleSurligne(LLibelle, this.cache.recherchesSurlignage, {
                        couleur: this._options.couleurSurlignageSuggestion
                    });
                }
                LLibelle = ObjetChaine_1.GChaine.avecEspaceSiVide(LLibelle);
                const lAvecSelection = this._estSelectionnable(aElement);
                if (!aElement.libelleHtml && !this._options.getContenuElement && (aElement.ClassAffichage || aElement.StyleAffichage)) {
                    LLibelle = IE.jsx.str("div", {
                        "ie-ellipsis": !!lAvecEllipsis,
                        class: aElement.ClassAffichage || false,
                        style: aElement.StyleAffichage || false
                    }, LLibelle);
                    lAvecEllipsis = false;
                }
                const lGetIdLigne = (aLigne) => {
                    return `${this.Nom}_${aLigne}`;
                }
                ;
                const lLineHeight = this._options.hauteur ? this._options.hauteur : this._options.hauteurLigneDefault;
                let lRole = 'option';
                let lAriaOwns = [];
                if (!lAvecSelection) {
                    if (lEstCumul) {
                        lRole = 'group';
                        aLignesVisibles.forEach( (aNumeroLigne) => {
                            const lLigne = this.ListeElements.get(aNumeroLigne);
                            if (lLigne !== aElement && this._options.getEstFilsDeCumul && this._options.getEstFilsDeCumul(lLigne, aElement)) {
                                lAriaOwns.push(lGetIdLigne(aNumeroLigne));
                            }
                        }
                        );
                    } else {
                        lRole = 'presentation';
                    }
                }
                return (IE.jsx.str("li", {
                    class: lClassElement || false,
                    role: "presentation"
                }, this.cache.avecCBMultiSelection && this._infosElementsCbs && this._infosElementsCbs[lParams.indice] && this._infosElementsCbs[lParams.indice].avecCB ? IE.jsx.str("div", {
                    class: "check-conteneur",
                    role: "presentation",
                    "ie-node": this.jsxGetNodeCBMulti.bind(this)
                }, IE.jsx.str("ie-checkbox", {
                    "aria-hidden": "true",
                    tabindex: "-1",
                    "ie-model": this.jsxModelCbElement.bind(this, I)
                })) : '', IE.jsx.str("div", {
                    id: lGetIdLigne(I),
                    role: lRole,
                    "ie-attr": lAvecSelection ? this.jsxGetAttrWAIOption.bind(this, I) : false,
                    "ie-ellipsis": lAvecEllipsis,
                    class: ['as-li', lClasseJQ, lEstLibelleVide ? Form_components_css_1.StylesFormComponents.text_empty : ''],
                    style: 'line-height:' + (lLineHeight * 0.1) + 'rem; overflow: hidden;',
                    tabindex: lAvecSelection ? '-1' : false,
                    "aria-owns": lAriaOwns.length > 0 ? lAriaOwns.join(' ') : false,
                    "aria-label": lRole === 'group' && !aElement.libelleHtml ? LLibelle : false
                }, LLibelle)));
            }
            jsxGetNodeCBMulti(aNode) {
                $(aNode).on({
                    'mouseenter mouseleave': (event) => {
                        if (event.type === 'mouseenter') {
                            this._selectionLigne(this.Survolee, false);
                            this.Survolee = -1;
                        }
                    }
                });
            }
            jsxModelCbElement(aIndice) {
                return {
                    getValue: () => {
                        return this.getValueElementCB(aIndice);
                    }
                    ,
                    setValue: (aValue) => {
                        this._setValueElementCB(aIndice, aValue);
                    }
                    ,
                    getIndeterminate: () => {
                        const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndice] : null;
                        if (lInfos) {
                            const lSelection = this._getSelectionElement(lInfos, aIndice);
                            return lSelection.nbFilsSelectionne > 0 && lSelection.nbFilsSelectionne < lSelection.nbFils;
                        }
                        return false;
                    }
                    ,
                    getDisabled: () => {
                        const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndice] : null;
                        if (lInfos) {
                            return lInfos.nonEditable;
                        }
                        return false;
                    }
                };
            }
            jsxGetAttrWAIOption(aLigne) {
                const lResult = {};
                if (this._options.multiSelection) {
                    const lInfos = this._infosElementsCbs[aLigne];
                    lResult[ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.selected)] = '' + !!((lInfos === null || lInfos === void 0 ? void 0 : lInfos.avecCB) && (lInfos === null || lInfos === void 0 ? void 0 : lInfos.selectionne));
                } else {
                    lResult[ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.selected)] = '' + (this.Selection === aLigne);
                }
                return lResult;
            }
            _composeBloc(aBloc, aNumeroBloc) {
                if (aBloc && aBloc.lignesVisibles) {
                    aBloc.dessine = true;
                    aBloc.calcule = false;
                    aBloc.top = 0;
                    aBloc.height = 0;
                    const T = [];
                    aBloc.lignesVisibles.forEach( (aNumeroLigne) => {
                        T.push(this._composeLigne(this.ListeElements.get(aNumeroLigne), aNumeroLigne, aBloc.lignesVisibles));
                    }
                    );
                    if (this.cache.scrollInfiniActif) {
                        return (IE.jsx.str("li", {
                            id: this.idBloc + aNumeroBloc,
                            style: "position:absolute;top:-1000px",
                            role: "presentation"
                        }, IE.jsx.str("ul", {
                            class: 'liste-as-options' + (this.cache.avecCBMultiSelection ? ' multi-selections ' : ''),
                            role: "presentation"
                        }, T.join(''))));
                    }
                    return T.join('');
                }
                return '';
            }
            _majBlocsTacheFond() {
                clearTimeout(this.cache.timerMAJ);
                if (!this.listeDeroulee) {
                    return;
                }
                if (this.cache.toutCalcule) {
                    return;
                }
                let lNumeroACalculer = 0;
                const lToutCalcule = this.cache.blocs.every( (aBloc, aNumeroBloc) => {
                    if (!aBloc.calcule) {
                        lNumeroACalculer = aNumeroBloc;
                    }
                    return !!aBloc.calcule;
                }
                );
                if (lNumeroACalculer > 0) {
                    this.cache.timerMAJ = setTimeout(function(aNumeroBloc) {
                        const lBloc = this.cache.blocs[aNumeroBloc];
                        const lASupprimer = !lBloc.dessine;
                        this._majBloc(aNumeroBloc);
                        if (lASupprimer) {
                            $('#' + (this.idBloc + aNumeroBloc).escapeJQ()).remove();
                            lBloc.dessine = false;
                        }
                        this._majBlocsTacheFond();
                    }
                    .bind(this, lNumeroACalculer), 0);
                }
                if (!this.cache.toutCalcule && lToutCalcule) {
                    this.cache.toutCalcule = true;
                    if (this._options.callbackToutCalcule) {
                        this._options.callbackToutCalcule();
                    }
                    const lDernierBloc = this.cache.blocs[this.cache.blocs.length - 1];
                    const lHeightScroll = lDernierBloc.top + lDernierBloc.height;
                    if (lHeightScroll !== this.cache.heightScroll) {
                        this.cache.heightScroll = lHeightScroll;
                        $('#' + this.idContenuScroll.escapeJQ()).height(lHeightScroll);
                    }
                }
            }
            _majBloc(aNumeroBloc, aSurFermeture) {
                if (!aSurFermeture) {
                    const lBlocPrecedent = this.cache.blocs[aNumeroBloc - 1];
                    if (lBlocPrecedent && !lBlocPrecedent.calcule) {
                        this._majBloc(aNumeroBloc - 1);
                    }
                }
                const lBloc = this.cache.blocs[aNumeroBloc];
                if (!lBloc) {
                    return;
                }
                if (!lBloc.dessine && ObjetHtml_1.GHtml.elementExiste(this.idContenuScroll)) {
                    lBloc.dessine = true;
                    ObjetHtml_1.GHtml.addHtml(this.idContenuScroll, this._composeBloc(lBloc, aNumeroBloc), {
                        controleur: this.controleur,
                        ignorerScroll: true
                    });
                }
                if (!lBloc.calcule && !aSurFermeture) {
                    const lJBloc = $('#' + (this.idBloc + aNumeroBloc).escapeJQ());
                    lBloc.height = lJBloc.height();
                    lBloc.top = aNumeroBloc === 0 ? 0 : this.cache.blocs[aNumeroBloc - 1].top + this.cache.blocs[aNumeroBloc - 1].height;
                    lBloc.calcule = true;
                    lJBloc.css('top', lBloc.top);
                }
            }
            _visibiliteSurNumeroBloc(aNumeroBlocVisible, aSurFermeture) {
                this.cache.blocs.forEach( (aBloc, aNumeroBloc) => {
                    const lVisible = aSurFermeture ? aNumeroBloc === aNumeroBlocVisible : aNumeroBloc <= aNumeroBlocVisible + this._options.nbBlocsScrollInfini && aNumeroBloc >= aNumeroBlocVisible - this._options.nbBlocsScrollInfini;
                    const lSurvolSurBloc = aBloc.debut <= this.Survolee && aBloc.fin >= this.Survolee;
                    if (lVisible) {
                        const lEstDejaDessine = aBloc.dessine;
                        this._majBloc(aNumeroBloc, aSurFermeture);
                        if (!lEstDejaDessine && lSurvolSurBloc) {
                            this._selectionLigne(this.Survolee, true);
                            ObjetHtml_1.GHtml.setFocus(this.Nom + '_' + this.Survolee);
                        }
                    } else {
                        if (aBloc.dessine) {
                            $('#' + (this.idBloc + aNumeroBloc).escapeJQ()).remove();
                        }
                        aBloc.dessine = false;
                        if (lSurvolSurBloc) {
                            ObjetHtml_1.GHtml.setFocus(this.idContenu);
                        }
                    }
                }
                );
            }
            _majBlocsDeLigne(aLigne, aSurFermeture) {
                if (!this.cache.scrollInfiniActif) {
                    return;
                }
                let lNumeroBloc = 0;
                this.cache.blocs.every( (aBloc, aNumeroBloc) => {
                    lNumeroBloc = aNumeroBloc;
                    return aLigne >= 0 && (aLigne < aBloc.debut || aLigne > aBloc.fin);
                }
                );
                this._visibiliteSurNumeroBloc(lNumeroBloc, aSurFermeture);
                if (!aSurFermeture) {
                    this._majBlocsTacheFond();
                }
            }
            _majBlocsDeTop(aTop) {
                if (!this.cache.scrollInfiniActif) {
                    return;
                }
                let lNumeroBlocVisible = 0;
                let lTrouve = false;
                let lDernierBlocCalcule = 0;
                this.cache.blocs.every( (aBloc, aNumeroBloc) => {
                    if (aBloc.calcule) {
                        lDernierBlocCalcule = aNumeroBloc;
                    }
                    return !!aBloc.calcule;
                }
                );
                this.cache.blocs.every( (aBloc, aNumeroBloc) => {
                    if (aBloc.calcule && aBloc.top <= aTop && (aBloc.top + aBloc.height) > aTop) {
                        lNumeroBlocVisible = aNumeroBloc;
                        lTrouve = true;
                    }
                    return !lTrouve;
                }
                );
                if (!lTrouve) {
                    if (lDernierBlocCalcule >= 0) {
                        this._majBloc(lDernierBlocCalcule + 1);
                        this._majBlocsDeTop(aTop);
                    }
                    return;
                }
                this._visibiliteSurNumeroBloc(lNumeroBlocVisible);
                this._majBlocsTacheFond();
            }
            _surFocusLigne(event) {
                event.data.instance._arreterFermetureListe();
            }
            _surKeyDownListe(aEvent) {
                const lThis = aEvent.data.instance;
                if (lThis.listeDeroulee && aEvent.which === ToucheClavier_1.ToucheClavier.Tab) {
                    if (!lThis._options.multiSelection) {
                        lThis._surValidationClavier();
                    }
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Debut) {
                    lThis.surLigne(lThis.chercherIndiceSelectionSelonSens(0));
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Fin) {
                    lThis.surLigne(lThis._getDerniereLingeSelectionnable());
                } else {
                    lThis._defilerFleches(aEvent, true);
                }
            }
            _surKeyUpListe(event) {
                event.data.instance._defiler(event, true);
                if (event.which === ToucheClavier_1.ToucheClavier.Echap) {
                    ObjetNavigateur_1.Navigateur.stopperEvenement(event.originalEvent);
                }
            }
            _selectionnerUnElementEnMultiSelection(aIndice) {
                if (this._infosElementsCbs && this._infosElementsCbs[aIndice] && !this._infosElementsCbs[aIndice].selectionnable) {
                    return false;
                }
                if (this.ListeElements) {
                    this.ListeElements.parcourir( (D, aIndex) => {
                        const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                        if (lInfos && lInfos.selectionne) {
                            lInfos.selectionne = false;
                        }
                    }
                    , this);
                }
                this._setValueElementCB(aIndice, true);
                return true;
            }
            _surClickListe(event) {
                const T = this.id.split('_')
                  , lIndice = parseInt(T[T.length - 1], 10)
                  , lInstance = event.data.instance;
                if (lInstance._options.multiSelection) {
                    lInstance._selectionnerUnElementEnMultiSelection(lIndice);
                }
                lInstance.surValidation(true, lIndice);
            }
            _surMouseMoveListe(event) {
                const T = this.id.split('_');
                const lIndice = parseInt(T[T.length - 1], 10);
                const lInstance = event.data.instance;
                lInstance.surLigne(lIndice);
                lInstance._arreterFermetureListe();
            }
            _avecDeroulerListe() {
                const lNbVisibles = this.getNbElementsVisible();
                return lNbVisibles > 1 || (lNbVisibles > 0 && this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche) || (lNbVisibles > 0 && this._options.multiSelection && this._options.mode === Enumere_Saisie_1.EGenreSaisie.Combo) || (!this._options.deroulerListeSeulementSiPlusieursElements && lNbVisibles <= 1);
            }
            _estOuvertureModale() {
                return IE.estMobile ? this._options.avecOuvertureDeroulantPopup : false;
            }
            _deroulerListe(ASurvolee, aListeDejaRemplie, aSansFocusLigne) {
                if (this.listeDeroulee) {
                    this.fermerListe();
                    this.listeDeroulee = false;
                    return;
                }
                const lParams = this._getParamsCallback({
                    genreEvenement: Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.deploiement
                });
                if (this._callback(lParams) === false) {
                    IEHtml_1.default.refresh();
                    return;
                }
                if (this._avecDeroulerListe()) {
                    this._arreterFermetureListe();
                    if (this._avecSaisieRechercheDynamique()) {
                        setTimeout(this._arreterFermetureListe.bind(this), 0);
                    }
                    if (!aListeDejaRemplie) {
                        this._remplirListe();
                    }
                    this.listeDeroulee = true;
                    this.bouton.setOptionsObjetCelluleBouton({
                        ariaExpanded: true,
                        ariaControls: this.idContenuScroll
                    });
                    const lElementListe = ObjetHtml_1.GHtml.getElement(this.NomListe);
                    const lElementContenuListe = ObjetHtml_1.GHtml.getElement(this.idContenu);
                    ObjetHtml_1.GHtml.setDisplay(lElementListe, true);
                    lElementContenuListe.style.overflowY = 'hidden';
                    if (this._estOuvertureModale()) {
                        const lCont = ObjetHtml_1.GHtml.getElement(this.nomListeConteneur);
                        lCont.classList.add('visible');
                        lCont.offsetWidth;
                        lCont.classList.add('active');
                        if (IE.estMobile && ObjetNavigateur_1.Navigateur.getZIndexModalMobile) {
                            lCont.style.zIndex = ObjetNavigateur_1.Navigateur.getZIndexModalMobile(true) + '';
                        }
                    } else {
                        ObjetStyle_1.GStyle.setZindex(lElementListe, 500);
                    }
                    this.activerEventOut = false;
                    setTimeout( () => {
                        this.activerEventOut = true;
                    }
                    , 50);
                    const lObjet = this;
                    $(lElementContenuListe).css({
                        height: 0
                    }).animate({
                        height: lObjet.hauteurContenu + 'px'
                    }, this._options.dureeAnimationDeploiement);
                    if (this._ouvertureInverse) {
                        const lEstOuvertureModale = this._estOuvertureModale();
                        const lRectRef = ObjetPosition_1.GPosition.getClientRect(lEstOuvertureModale ? this.Nom : this.bouton.getNom());
                        const lTop = lEstOuvertureModale ? lRectRef.top - this.hauteurContenu - this.decalageTopOuvertureInverse : -(this.hauteurContenu + this.decalageTopOuvertureInverse);
                        $(lElementListe).css({
                            top: (lEstOuvertureModale ? lRectRef.top : 0) - this.decalageTopOuvertureInverse
                        }).animate({
                            top: lTop + 'px'
                        }, this._options.dureeAnimationDeploiement);
                    }
                    $(lElementContenuListe).queue(function() {
                        $('#' + lObjet.idContenu.escapeJQ()).css('overflowY', 'auto');
                        lObjet._eventAnimationOuvertureFin(ASurvolee, aSansFocusLigne);
                        $(this).dequeue();
                    });
                } else {
                    this._gererCasUnSeulElement();
                }
            }
            _eventAnimationOuvertureFin(ASurvolee, aSansFocusLigne) {
                let lNumeroLigne = ASurvolee === null || ASurvolee === undefined ? this.Selection === null || this.Selection === undefined ? 0 : this.Selection : ASurvolee;
                lNumeroLigne = this.chercherIndiceSelectionSelonSens(lNumeroLigne >= 0 ? lNumeroLigne : 0);
                this.surLigne(lNumeroLigne, aSansFocusLigne);
            }
            _declencherFermetureListe(AAvecFocus) {
                clearTimeout(this.Timer);
                this.Timer = setTimeout(this.fermerListe.bind(this, AAvecFocus), 100);
            }
            _arreterFermetureListe() {
                clearTimeout(this.Timer);
                this.Timer = null;
            }
            _etapeFermetureInverse(aJElement, aNow) {
                aJElement.css({
                    top: -aNow - this.decalageTopOuvertureInverse
                });
            }
            _eventAnimationFermetureFin() {
                if (this._estOuvertureModale()) {
                    ObjetHtml_1.GHtml.getElement(this.nomListeConteneur).classList.remove('visible');
                    if (IE.estMobile && ObjetNavigateur_1.Navigateur.getZIndexModalMobile) {
                        ObjetNavigateur_1.Navigateur.getZIndexModalMobile(false);
                    }
                }
                setTimeout(ObjetHtml_1.GHtml.setDisplay.bind(ObjetHtml_1.GHtml, this.NomListe, false), 5);
                if (this._options.avecEventSurFermetureListe) {
                    this._callback(this._getParamsCallback({
                        genreEvenement: Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.fermeture,
                        indice: 0
                    }));
                    IEHtml_1.default.refresh();
                }
            }
            _estSelectionnable(aElement) {
                return !!aElement && aElement.AvecSelection !== false && aElement.Visible !== false && (!this._options.getEstElementNonSelectionnable || this._options.getEstElementNonSelectionnable(aElement) !== true);
            }
            _selectionLigne(aLigne, aSelectionner) {
                if ((aLigne > -1) && (aLigne < this.ListeElements.count())) {
                    const lElement = this.ListeElements.get(aLigne);
                    if (aSelectionner && !this._estSelectionnable(lElement)) {
                        return;
                    }
                    const lJDOM = $(`#${this.Nom.escapeJQ() + '_' + aLigne}`);
                    if (lJDOM.length === 0) {
                        return;
                    }
                    if (aSelectionner) {
                        lJDOM.attr('tabindex', '0');
                    } else {
                        lJDOM.attr('tabindex', '-1');
                    }
                    if (this._options.avecFondSelectionSurSurvol) {
                        if (aSelectionner) {
                            lJDOM.addClass('selected');
                        } else {
                            lJDOM.removeClass('selected');
                        }
                    }
                    if (this._options.avecGrasSurSurvol) {
                        if (aSelectionner) {
                            lJDOM.addClass('Gras');
                        } else {
                            lJDOM.removeClass('Gras');
                        }
                    }
                }
            }
            _gererCasUnSeulElement() {
                let lResult = false;
                if (this.getNbElementsVisible() === 1) {
                    let LLibelle = '';
                    let lEstHtml = false;
                    let lElement;
                    const lIndex = this.ListeElements.getIndiceElementParFiltre( (aEl) => {
                        return aEl.Visible !== false;
                    }
                    );
                    lElement = this.ListeElements.get(lIndex);
                    if (lElement) {
                        LLibelle = lElement.getLibelle();
                        if (this._options.getContenuElement) {
                            LLibelle = this._options.getContenuElement({
                                element: lElement,
                                indice: lIndex
                            });
                        } else if (this._options.celluleAvecTexteHtml && lElement.libelleHtml) {
                            LLibelle = lElement.libelleHtml;
                            lEstHtml = true;
                        }
                    }
                    if (LLibelle) {
                        this.Selection = lIndex;
                        if (this._options.controlerNbrElements) {
                            ObjetHtml_1.GHtml.setHtml(this.Nom, IE.jsx.str("span", {
                                class: "Gras Insecable"
                            }, LLibelle));
                        }
                        this.surValidation(false, this.Selection);
                        lResult = true;
                    } else {
                        this.Selection = -1;
                    }
                    if (this._options.modifierContenuCelluleSurSelection) {
                        if (this._options.getContenuCellule) {
                            this._appliquerGetContenuCellule(lElement);
                        } else if (lEstHtml) {
                            this.bouton.setLibelleHtml(LLibelle);
                        } else {
                            this.setContenu(LLibelle);
                        }
                        const lIdDescendant = this.Selection > -1 ? this.Nom + '_' + this.Selection : '';
                        this._actualiserWAICombo(lIdDescendant);
                    }
                }
                this.$refreshSelf();
                return lResult;
            }
            _actualiserWAICombo(aIdDescendant) {
                const lId = aIdDescendant && ObjetHtml_1.GHtml.getElement(aIdDescendant) ? aIdDescendant : null;
                $('#' + this.bouton.NomEdit.escapeJQ()).attr({
                    'aria-activedescendant': lId
                });
            }
            _initListeSelections(aListeSelections) {
                const lListeSelections = MethodesObjet_1.MethodesObjet.dupliquer(aListeSelections);
                if (!this._listeSelections) {
                    this._listeSelections = new ObjetListeElements_1.ObjetListeElements();
                }
                this._listeSelections.vider();
                let lResult = false;
                if (this.ListeElements) {
                    this.ListeElements.parcourir( (D, aIndex) => {
                        const lElement = lListeSelections ? lListeSelections.getElementParNumero(D.getNumero()) : null;
                        if (lElement) {
                            lResult = true;
                            this._listeSelections.addElement(lElement);
                            if (this._infosElementsCbs && this._infosElementsCbs[aIndex]) {
                                this._infosElementsCbs[aIndex].selectionne = true;
                            }
                        } else if (this._infosElementsCbs && this._infosElementsCbs[aIndex]) {
                            this._infosElementsCbs[aIndex].selectionne = false;
                        }
                    }
                    );
                    if (this._listeSelections.count() > 0) {
                        this.setContenu(this._listeSelections);
                    }
                }
                return lResult;
            }
            _getDerniereLingeSelectionnable() {
                return this.ListeElements && this.ListeElements.count ? this.chercherIndiceSelectionSelonSens(this.ListeElements.count() - 1, true) : 0;
            }
        }
        exports.ObjetSaisie = ObjetSaisie;
        const lClasseJQ = GUID_1.GUID.getClassCss();
    },
    fn: 'objetsaisie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml_1 = require("IEHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_EvenementObjetSaisie_1 = require("Enumere_EvenementObjetSaisie");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetSaisie_1 = require("ObjetSaisie");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetIdentite_1 = require("ObjetIdentite");
        IEHtml_1.default.addBalise('ie-combo', (aContexteCourant, aOutils) => {
            function _listesIdentiques(aListe1, aListe2) {
                return aListe1 && aListe1.listeIdentiqueParElementsOrdonnes ? aListe1.listeIdentiqueParElementsOrdonnes(aListe2) : false;
            }
            const lModele = aOutils.getModel(aContexteCourant)
              , const_forcerActualisation = 'forcer_Actualisation';
            if (!lModele) {
                return;
            }
            const lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant)
              , lInfosInit = aOutils.getAccesParametresModel('init', aContexteCourant)
              , lInfosGetDonnees = aOutils.getAccesParametresModel('getDonnees', aContexteCourant)
              , lInfosGetIndice = aOutils.getAccesParametresModel('getIndiceSelection', aContexteCourant)
              , lInfosSetIndice = aOutils.getAccesParametresModel('setIndiceSelection', aContexteCourant)
              , lInfosGetLibelle = aOutils.getAccesParametresModel('getLibelle', aContexteCourant)
              , lInfosDestroy = aOutils.getAccesParametresModel('destroy', aContexteCourant)
              , lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant)
              , lRefresh = aContexteCourant.contexte.refresh;
            let lListeSelectionsBackup = null;
            const lStrAriaLabel = aContexteCourant.node.getAttribute('aria-label');
            if (lStrAriaLabel) {
                aContexteCourant.node.removeAttribute('aria-label');
            }
            const lStrAriaLabelledBy = aContexteCourant.node.getAttribute('aria-labelledby');
            if (lStrAriaLabelledBy) {
                aContexteCourant.node.removeAttribute('aria-labelledby');
            }
            const lStrAriaDescribedBy = aContexteCourant.node.getAttribute('aria-describedby');
            if (lStrAriaDescribedBy) {
                aContexteCourant.node.removeAttribute('aria-describedby');
            }
            let lInstanceCombo = ObjetIdentite_1.Identite.creerInstance(ObjetSaisie_1.ObjetSaisie, {
                pere: {},
                evenement: function(aParams) {
                    const lParametres = aParams;
                    const lCallback = function() {
                        if (lParametres.genreEvenement === Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection) {
                            if (((lParametres.estComboMultiSelection && !_listesIdentiques(lParametres.listeSelections, lListeSelectionsBackup)) || (MethodesObjet_1.MethodesObjet.isNumber(lParametres.indice) && lParametres.indice !== aContexteCourant.data.$indice)) || aContexteCourant.data.$indice === const_forcerActualisation) {
                                if (lInfosSetIndice.estFonction) {
                                    lInfosSetIndice.callback([lParametres.estComboMultiSelection ? lParametres.listeSelections : lParametres.indice, lInstanceCombo, aContexteCourant.data]);
                                }
                                aContexteCourant.data.$indice = lParametres.indice;
                            }
                        }
                        if (lInfosEvent.estFonction) {
                            lInfosEvent.callback([lParametres, lInstanceCombo, aContexteCourant.data]);
                        }
                        lRefresh();
                    };
                    lCallback();
                }
            });
            const lRacine = ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("div", {
                id: lInstanceCombo.getNom()
            }))
              , lJRacine = $(lRacine);
            const lAvecControleSaisie = aOutils.getControleSaisieEvent(aContexteCourant.node);
            lInstanceCombo.ControleNavigation = !!lAvecControleSaisie;
            if (IE.estMobile && !aContexteCourant.node.classList.contains('combo-classic')) {
                if (aContexteCourant.node.classList.contains('membre-combo')) {} else if (aContexteCourant.node.classList.contains('search-contain')) {
                    lInstanceCombo.setOptionsObjetSaisie({
                        avecDesignMobile: true
                    });
                } else {
                    lInstanceCombo.setOptionsObjetSaisie({
                        avecDesignMobile: true
                    });
                }
            }
            if (lStrAriaLabel || lStrAriaLabelledBy || lStrAriaDescribedBy) {
                lInstanceCombo.setOptionsObjetSaisie({
                    labelWAICellule: lStrAriaLabel || '',
                    ariaLabelledBy: lStrAriaLabelledBy || '',
                    ariaDescribedBy: lStrAriaDescribedBy || ''
                });
            }
            const lParams = {
                liste: new ObjetListeElements_1.ObjetListeElements(),
                indice: -1
            };
            if (lInfosInit.estFonction) {
                lInfosInit.callback([lInstanceCombo, aContexteCourant.data]);
            }
            const lRemplirListe = (aNode, aParams, aAEstFils) => {
                if (aNode && aNode.childNodes) {
                    for (let i = 0; i < aNode.childNodes.length; i++) {
                        const lNode = aNode.childNodes[i];
                        const lNodeName = lNode.nodeName.toLowerCase();
                        if (lNodeName && lNodeName === 'option') {
                            const lArticle = ObjetElement_1.ObjetElement.create({
                                Libelle: lNode.innerHTML,
                                Numero: lNode.value,
                                node: lNode,
                                avecIndentation: aAEstFils
                            });
                            aParams.liste.add(lArticle);
                            if (lNode.getAttribute('selected') === 'selected') {
                                aParams.indice = aParams.liste.count() - 1;
                            }
                        } else if (lNodeName && lNodeName === 'optgroup') {
                            const lLibelle = lNode.getAttribute('label') || '';
                            aParams.liste.add(ObjetElement_1.ObjetElement.create({
                                Libelle: lLibelle,
                                AvecSelection: false,
                                estCumul: true,
                                node: lNode
                            }));
                            lRemplirListe(lNode, aParams, true);
                        }
                    }
                }
            }
            ;
            lRemplirListe(aContexteCourant.node, lParams);
            if (lParams.liste.count() > 0) {
                lInstanceCombo.setDonneesObjetSaisie({
                    liste: lParams.liste,
                    selection: lParams.indice,
                    options: {
                        getClassElement(aParams) {
                            if (aParams.element.estCumul) {
                                return 'liste-fond-cumul';
                            } else if (aParams.element.avecIndentation) {
                                return 'element-indentation';
                            }
                            return '';
                        }
                    }
                });
                if (lParams.indice < 0) {
                    lInstanceCombo.initSelection(0);
                }
            }
            aOutils.injectHTML({
                element: lRacine,
                html: lInstanceCombo.construireHtml(),
                controleur: lInstanceCombo.controleur,
                ignorerScroll: true,
                contexte: aContexteCourant.contexte
            });
            lJRacine.ieData(aContexteCourant.data);
            lJRacine.on('destroyed', () => {
                if (lInfosDestroy.estFonction) {
                    lInfosDestroy.callback([lInstanceCombo, aContexteCourant.data]);
                }
                lInstanceCombo.free();
                lInstanceCombo = null;
            }
            );
            aOutils.surInjectionHtml(aContexteCourant, () => {
                lInstanceCombo.recupererDonnees();
                let lActualiserSelection;
                const lDemarrerGetIndice = function() {
                    if (lInfosGetIndice.estFonction) {
                        let lGetterIndice;
                        lActualiserSelection = function() {
                            if (!lInstanceCombo) {
                                return;
                            }
                            let lIndice = lGetterIndice();
                            const lEstListe = lInstanceCombo.getDonneesPourHTMLCombo().options.multiSelection;
                            if (((lEstListe && (!lListeSelectionsBackup || !lListeSelectionsBackup.preventionBoucle) && !_listesIdentiques(lIndice, lListeSelectionsBackup)) || (!lEstListe && lIndice !== aContexteCourant.data.$indice)) || aContexteCourant.data.$indice === const_forcerActualisation) {
                                if (lEstListe) {
                                    if (lIndice && lIndice instanceof ObjetListeElements_1.ObjetListeElements) {
                                        lListeSelectionsBackup = lIndice;
                                    } else {
                                        lListeSelectionsBackup = new ObjetListeElements_1.ObjetListeElements();
                                    }
                                    lListeSelectionsBackup.preventionBoucle = true;
                                    lInstanceCombo.setListeSelections(lIndice);
                                } else {
                                    const lIndiceNumber = lIndice;
                                    aContexteCourant.data.$indice = lIndiceNumber;
                                    if (lInstanceCombo.getNbElementsVisible() === 0 && lIndiceNumber < 0) {
                                        lInstanceCombo.surValidation(false, lIndiceNumber);
                                    } else if (lIndiceNumber >= 0) {
                                        lInstanceCombo.setSelection(lIndiceNumber);
                                    }
                                }
                            } else if (lListeSelectionsBackup && lListeSelectionsBackup.preventionBoucle) {
                                lListeSelectionsBackup.preventionBoucle = false;
                            }
                        }
                        ;
                        lGetterIndice = function() {
                            let lIndice = lInfosGetIndice.callback([lInstanceCombo, aContexteCourant.data]) || 0;
                            if (!lInstanceCombo.getDonneesPourHTMLCombo().options.multiSelection) {
                                lIndice = lInstanceCombo.chercherIndiceSelectionSelonSens(lIndice, false);
                            }
                            return lIndice;
                        }
                        ;
                        const lIndice = lGetterIndice();
                        if (lInstanceCombo.getDonneesPourHTMLCombo().options.multiSelection) {
                            if (lIndice && lIndice instanceof ObjetListeElements_1.ObjetListeElements) {
                                lListeSelectionsBackup = lIndice;
                            } else {
                                lListeSelectionsBackup = new ObjetListeElements_1.ObjetListeElements();
                            }
                            lInstanceCombo.setListeSelections(lListeSelectionsBackup);
                        } else {
                            aContexteCourant.data.$indice = lIndice;
                            if (lIndice >= 0) {
                                lInstanceCombo.setSelection(lIndice);
                            }
                        }
                        aOutils.abonnerRefresh(lActualiserSelection, lRacine, aContexteCourant);
                    }
                };
                if (lInfosGetDonnees.estFonction) {
                    const lGetterDonnees = function() {
                        return lInfosGetDonnees.callback([lInstanceCombo.getListeElements(), lInstanceCombo, aContexteCourant.data]) || null;
                    };
                    const lDonnees = lGetterDonnees();
                    let lComboInitialise = false;
                    if (lDonnees && lDonnees.count) {
                        lInstanceCombo.setDonneesObjetSaisie({
                            liste: lDonnees
                        });
                        lDemarrerGetIndice();
                        lComboInitialise = true;
                    }
                    aOutils.abonnerRefresh( () => {
                        if (!lInstanceCombo) {
                            IE.log.addLog('lInstanceCombo n\'existe pas');
                            return null;
                        }
                        const lDonnees = lGetterDonnees();
                        const lListeCourante = lInstanceCombo.getListeElements();
                        if (lDonnees && lDonnees.count && lListeCourante !== lDonnees && !(lDonnees.count() === 0 && lListeCourante && lListeCourante.count && lListeCourante.count() === 0)) {
                            lInstanceCombo.setDonneesObjetSaisie({
                                liste: lDonnees
                            });
                            aContexteCourant.data.$indice = const_forcerActualisation;
                            if (!lComboInitialise) {
                                lDemarrerGetIndice();
                                lComboInitialise = true;
                            } else if (lActualiserSelection) {
                                lActualiserSelection();
                            }
                        }
                    }
                    , lRacine, aContexteCourant);
                } else {
                    lDemarrerGetIndice();
                }
                if (lInfosGetLibelle.estFonction) {
                    const lGetterLibelle = function() {
                        return lInfosGetLibelle.callback([lInstanceCombo, aContexteCourant.data]);
                    };
                    const lLibelle = lGetterLibelle();
                    if (lLibelle === '' || (lLibelle && lLibelle.length > 0)) {
                        lInstanceCombo.setContenu(lLibelle);
                    }
                    aOutils.abonnerRefresh( () => {
                        if (!lInstanceCombo) {
                            IE.log.addLog('lInstanceCombo n\'existe pas');
                            return null;
                        }
                        const lLibelle = lGetterLibelle();
                        if ((lLibelle === '' || (lLibelle && lLibelle.length > 0)) && lLibelle !== lInstanceCombo.getDonneesPourHTMLCombo().bouton.getLibelle()) {
                            lInstanceCombo.setContenu(lLibelle);
                        }
                    }
                    , lRacine, aContexteCourant);
                }
            }
            );
            if (lInfosGetDisabled.estFonction) {
                const lGetterDisabled = function() {
                    return !!lInfosGetDisabled.callback([lInstanceCombo, aContexteCourant.data]);
                };
                const lEstDisabled = lGetterDisabled();
                aContexteCourant.data.$disabled = lEstDisabled;
                if (lEstDisabled) {
                    lInstanceCombo.setActif(false);
                }
                aOutils.abonnerRefresh( () => {
                    if (!lInstanceCombo) {
                        IE.log.addLog('lInstanceCombo n\'existe pas');
                        return null;
                    }
                    const lEstDisabled = lGetterDisabled();
                    if (lEstDisabled !== aContexteCourant.data.$disabled) {
                        aContexteCourant.data.$disabled = lEstDisabled;
                        lInstanceCombo.setActif(!lEstDisabled);
                    }
                }
                , lRacine, aContexteCourant);
            }
            if (lModele) {
                aOutils.surNodeEtNodeAfter(aContexteCourant);
            }
            aOutils.copyAttributs(aContexteCourant.node, lRacine, (aName) => {
                if (aName === 'id') {
                    return false;
                }
            }
            );
            lJRacine.addClass('ObjetSaisie ie-combo');
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aOutils.addCommentaireDebug(lRacine, 'ie-combo');
            if (lStrAriaLabel) {
                aOutils.addCommentaireDebug(lRacine, `transfert aria-label="${lStrAriaLabel}"`);
            }
            if (lStrAriaLabelledBy) {
                aOutils.addCommentaireDebug(lRacine, `transfert aria-labelledby="${lStrAriaLabelledBy}"`);
            }
            if (lStrAriaDescribedBy) {
                aOutils.addCommentaireDebug(lRacine, `transfert aria-describedby="${lStrAriaDescribedBy}"`);
            }
            return {
                node: lRacine,
                avecCompileFils: false
            };
        }
        );
    },
    fn: 'iehtml.combo.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlBouton = void 0;
        require("IEHtml.Bouton.css");
        exports.StylesIEHtmlBouton = {
            ieBouton: 'ieBouton',
            boutonCarre: 'bouton-carre',
            ieBoutonIcon: 'ieBoutonIcon',
            ieBoutonDefautSansImage: 'ieBoutonDefautSansImage',
            themeBoutonPrimaire: 'themeBoutonPrimaire',
            hyperplanning: 'hyperplanning',
            ieRipple: 'ie-ripple',
            themeBoutonNeutre: 'themeBoutonNeutre',
            heightAuto: 'height-auto',
            fixedMobile: 'fixed-mobile',
            smallBt: 'small-bt',
            hasDots: 'has-dots',
            themeTabBar: 'themeTabBar',
            sideIcon: 'side-icon',
            btnSmall: 'btn-small',
            btnFlatMinimal: 'btn-flat-minimal',
            ieBtnContImgImg: 'ieBtnContImg-img',
            themeHyperplanning: 'theme-hyperplanning',
            themeEdt: 'theme-edt',
            themePronote: 'theme-pronote',
            ThemeNeutre: 'ThemeNeutre',
            widget: 'widget',
            ctaConteneur: 'cta-conteneur',
            bgWhite: 'bg-white',
            ieBtnContImgTexte: 'ieBtnContImg-texte',
            smallMobile: 'small-mobile',
            btn: 'btn',
            btnFlat: 'btn-flat',
            tab: 'tab'
        };
    },
    fn: 'iehtml.bouton.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("IEHtml.Bouton.css");
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const ToucheClavier_1 = require("ToucheClavier");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const Divers_css_1 = require("Divers.css");
        const IEHtml_Ripple_css_1 = require("IEHtml.Ripple.css");
        const u_Dots = '...';
        IEHtml.addBalise('ie-bouton', (aContexteCourant, aOutils) => {
            let lOptions = {
                disabled: false,
                theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire,
                tailleBordure: null,
                fontWeight: '',
                hasDots: false
            };
            function _getCss(aSurvol) {
                const lStyle = {};
                let lColor = (lOptions.disabled ? lOptions.couleurTexteInactif : aSurvol ? lOptions.couleurTexteSurvol : lOptions.couleurTexte) || '';
                if (lColor) {
                    lStyle.color = lColor;
                }
                lColor = (lOptions.disabled ? lOptions.couleurFondInactif : aSurvol ? lOptions.couleurFondSurvol : lOptions.couleurFond) || '';
                if (lColor) {
                    lStyle.backgroundColor = lColor;
                }
                if (lOptions.tailleBordure >= 0 && MethodesObjet_1.MethodesObjet.isNumber(lOptions.tailleBordure)) {
                    lStyle.borderWidth = lOptions.tailleBordure + 'px';
                }
                lColor = (lOptions.disabled ? lOptions.couleurBordureInactif : aSurvol ? lOptions.couleurBordureSurvol : lOptions.couleurBordure) || '';
                if (lColor) {
                    lStyle.borderColor = lColor;
                }
                return lStyle;
            }
            function _estToucheValider(aNumeroTouche) {
                return aNumeroTouche === ToucheClavier_1.ToucheClavier.Espace || aNumeroTouche === ToucheClavier_1.ToucheClavier.RetourChariot;
            }
            let lInnerHtml = aContexteCourant.node.innerHTML;
            const lInnerHtmlInitial = lInnerHtml;
            const lBouton = ObjetHtml_1.GHtml.htmlToDOM('<button>' + '</button>');
            const lJBouton = $(lBouton);
            if (lInnerHtml === u_Dots) {
                lOptions.hasDots = true;
            }
            if ($(aContexteCourant.node).hasClass(Type_ThemeBouton_1.TypeThemeBouton.primaire)) {
                lOptions.theme = Type_ThemeBouton_1.TypeThemeBouton.primaire;
            }
            const lImage = aContexteCourant.node.getAttribute('ie-image') || '';
            if (lImage) {
                aContexteCourant.node.removeAttribute('ie-image');
            }
            const lImageIcon = aContexteCourant.node.getAttribute('ie-icon') || '';
            if (lImageIcon) {
                aContexteCourant.node.removeAttribute('ie-icon');
            }
            const lIconSize = aContexteCourant.node.getAttribute('ie-iconsize') || '';
            if (lIconSize) {
                aContexteCourant.node.removeAttribute('ie-iconsize');
            }
            const lEstBoutonCarre = $(aContexteCourant.node).hasClass('bouton-carre');
            if (lEstBoutonCarre) {
                let lWidthDefaut = 0;
                if (aContexteCourant.node.style.width) {
                    const lWidth = Math.round($(aContexteCourant.node).innerWidth());
                    if (lWidth > 0) {
                        lWidthDefaut = Math.max(10, lWidth - 2 - 2);
                    }
                }
                lOptions = Object.assign(lOptions, {
                    theme: Type_ThemeBouton_1.TypeThemeBouton.neutre,
                    widthBoutonImage: lWidthDefaut,
                    heightTexteBoutonImage: 0,
                    heightImageBoutonImage: 0
                });
            }
            let lDisabled = false;
            const lModele = aOutils.getModel(aContexteCourant);
            aOutils.copyAttributs(aContexteCourant.node, lBouton, (aName) => {
                switch (aName) {
                case 'disabled':
                    lDisabled = true;
                    break;
                }
            }
            );
            let lInfosGetLibelle;
            if (lModele) {
                const lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant)
                  , lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant)
                  , lInfosGetOptions = aOutils.getAccesParametresModel('getOptions', aContexteCourant);
                lInfosGetLibelle = aOutils.getAccesParametresModel('getLibelle', aContexteCourant);
                const lAvecControleSaisie = aOutils.getControleSaisieEvent(lBouton);
                let lKeyUpValiderAIgnorer = false;
                if (lInfosEvent.estFonction) {
                    const lRefresh = aContexteCourant.contexte.refresh;
                    lJBouton.eventValidation(function(aEvent) {
                        if (lOptions.disabled) {
                            return;
                        }
                        if (aEvent.type === 'keyup') {
                            if (lKeyUpValiderAIgnorer) {
                                lKeyUpValiderAIgnorer = false;
                                return;
                            }
                        }
                        const lAction = () => {
                            const lResult = lInfosEvent.callback([aEvent, this, aContexteCourant.data]);
                            lRefresh();
                            return lResult;
                        }
                        ;
                        if (lAvecControleSaisie) {
                            (0,
                            ControleSaisieEvenement_1.ControleSaisieEvenement)(lAction);
                        } else {
                            return lAction();
                        }
                    }).on({
                        'focusin': function() {
                            if (ObjetNavigateur_1.Navigateur && ObjetNavigateur_1.Navigateur.ShiftTouche !== null) {
                                lKeyUpValiderAIgnorer = _estToucheValider(ObjetNavigateur_1.Navigateur.CodeTouche);
                                if (lKeyUpValiderAIgnorer) {
                                    $(window).off('keydown.IEHTMLBoutonKeyupAIgnorer').one('keydown.IEHTMLBoutonKeyupAIgnorer', () => {
                                        lKeyUpValiderAIgnorer = false;
                                    }
                                    );
                                }
                            }
                        },
                        'focusout': function() {
                            lKeyUpValiderAIgnorer = false;
                        }
                    });
                }
                if (lInfosGetDisabled.valide) {
                    const lGetter = function() {
                        return !!lInfosGetDisabled.callback([lBouton, aContexteCourant.data]);
                    };
                    if (lInfosGetDisabled.estFonction || !lGetter() || lGetter() === true) {
                        lDisabled = !!lGetter();
                        aOutils.abonnerRefresh( () => {
                            const lDisabled = !!lGetter();
                            if (lDisabled !== lOptions.disabled) {
                                lOptions.disabled = lDisabled;
                                $(lBouton).inputDisabled(lDisabled);
                            }
                        }
                        , lBouton, aContexteCourant);
                    } else {
                        IE.log.addLog('echec getDisabled de ie-bouton, proprit incorrecte du model "' + lModele + '"');
                    }
                }
                if (lInfosGetOptions.estFonction) {
                    const lOptionsPerso = lInfosGetOptions.callback([lBouton, aContexteCourant.data]);
                    if (lOptionsPerso) {
                        Object.assign(lOptions, lOptionsPerso);
                    }
                }
                aOutils.surNodeEtNodeAfter(aContexteCourant);
                aContexteCourant.invocateurNode.abonner(aOutils.nomInvocRefresh, (aParams) => {
                    if (aParams.refreshHtml) {
                        const lHasDots = aParams.html === u_Dots;
                        if (lOptions.hasDots !== lHasDots) {
                            lOptions.hasDots = lHasDots;
                            if (lOptions.hasDots) {
                                lJBouton.addClass('has-dots');
                            } else {
                                lJBouton.removeClass('has-dots');
                            }
                        }
                    }
                }
                );
            }
            let lClassDefaut = '';
            if (!lBouton.style.height && !lImage && !lImageIcon) {
                lClassDefaut = ' ieBoutonDefautSansImage';
            }
            switch (lOptions.theme) {
            case Type_ThemeBouton_1.TypeThemeBouton.primaire:
                if (!lJBouton.hasClass(Type_ThemeBouton_1.TypeThemeBouton.secondaire) && !lJBouton.hasClass(Type_ThemeBouton_1.TypeThemeBouton.neutre)) {
                    lJBouton.addClass(Type_ThemeBouton_1.TypeThemeBouton.primaire);
                }
                break;
            case Type_ThemeBouton_1.TypeThemeBouton.neutre:
                if (!lJBouton.hasClass(Type_ThemeBouton_1.TypeThemeBouton.secondaire) && !lJBouton.hasClass(Type_ThemeBouton_1.TypeThemeBouton.primaire)) {
                    lJBouton.addClass(Type_ThemeBouton_1.TypeThemeBouton.neutre);
                }
                break;
            }
            if (!lDisabled && lOptions.disabled) {
                lJBouton.attr('disabled', '');
            } else if (lDisabled) {
                $(lBouton).inputDisabled(true);
            }
            lOptions.disabled = lDisabled;
            const lCss = {
                'font-weight': lOptions.fontWeight
            };
            let lWrapperHtml;
            if (lImage || lImageIcon) {
                lWrapperHtml = function(aHtml) {
                    return IE.jsx.str("span", {
                        class: Divers_css_1.StylesDivers.ellipsisMultilignes,
                        style: {
                            '--clamp-number': 2
                        }
                    }, aHtml);
                }
                ;
                const lHtmlImage = lImage ? IE.jsx.str("span", {
                    class: lImage
                }) : IE.jsx.str("i", {
                    class: ['ieBoutonIcon', lImageIcon],
                    style: lIconSize ? `font-size:${lIconSize}` : false,
                    "aria-hidden": "true"
                });
                if (lEstBoutonCarre) {
                    lInnerHtml = [IE.jsx.str("span", {
                        class: "ieBtnContImg-img"
                    }, lHtmlImage), IE.jsx.str("span", {
                        class: "ieBtnContImg-texte"
                    }, lWrapperHtml(lInnerHtml))].join('');
                    lCss.padding = 1;
                } else {
                    lInnerHtml = IE.jsx.str("span", {
                        class: "ieBtnContImg-img"
                    }, IE.jsx.str(IE.jsx.fragment, null, lHtmlImage, IE.jsx.str("span", {
                        "ie-ellipsis": aContexteCourant.node.hasAttribute('ie-ellipsis')
                    }, lInnerHtml)));
                }
            }
            if (lOptions.minWidth > 0) {
                lCss['min-width'] = lOptions.minWidth + 'px';
            }
            let lClasse = 'ieBouton ';
            lClasse += IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple + ' ';
            lClasse = (lOptions.hasDots ? 'has-dots ' : '') + lClasse;
            lJBouton.css(Object.assign(lCss, _getCss())).addClass(lClasse + ' NoWrap' + lClassDefaut).on({
                mouseout: function() {
                    if (ObjetNavigateur_1.Navigateur && ObjetNavigateur_1.Navigateur.isTactile) {
                        return;
                    }
                    if (lOptions.disabled) {
                        return;
                    }
                    $(this).css(_getCss(false));
                },
                mouseover: function() {
                    if (ObjetNavigateur_1.Navigateur && ObjetNavigateur_1.Navigateur.isTactile) {
                        return;
                    }
                    if (lOptions.disabled) {
                        return;
                    }
                    $(this).css(_getCss(true));
                },
                IEDisabled: function() {
                    const lJThis = $(this);
                    lOptions.disabled = lJThis.is(':disabled');
                    if (lOptions.disabled) {
                        lJThis.removeClass('AvecMain');
                    } else {
                        lJThis.addClass('AvecMain');
                    }
                    lJThis.css(_getCss());
                }
            });
            const lRacine = lJBouton.get(0);
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aContexteCourant.node = lJBouton.get(0);
            if (lInnerHtml) {
                aOutils.injectHTML({
                    element: lRacine,
                    html: lInnerHtml,
                    controleur: aContexteCourant.controleur,
                    ignorerScroll: true,
                    contexte: aContexteCourant.contexte
                });
            }
            if (lImage || lImageIcon) {
                if (lEstBoutonCarre) {
                    aContexteCourant.nodeTransfertContenuDynamique = $(aContexteCourant.node).find('>.ieBtnContImg-texte').get(0);
                } else {
                    aContexteCourant.nodeTransfertContenuDynamique = $(aContexteCourant.node).find('>.ieBtnContImg-img>:not(:first-child)').get(0);
                }
            }
            if (lInfosGetLibelle && lInfosGetLibelle.estFonction) {
                aOutils.addGetterHtml(aContexteCourant, lInfosGetLibelle, lWrapperHtml);
            }
            aOutils.addCommentaireDebug(lRacine, 'ie-bouton' + (lImage ? ' ie-image="' + lImage + '"' : '') + (lImageIcon ? ' ie-icon="' + lImageIcon + '"' : '') + (lIconSize ? ' ie-iconsize="' + lIconSize + '"' : ''));
            return {
                node: aContexteCourant.node,
                avecCompileFils: false
            };
        }
        );
    },
    fn: 'iehtml.bouton.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlBtnSelecteur = void 0;
        require("IEHtml.BtnSelecteur.css");
        exports.StylesIEHtmlBtnSelecteur = {
            ieBtnselecteur: 'ie-btnselecteur',
            objetInterfaceMobile_zoneSelection: 'objetInterfaceMobile_zoneSelection',
            bsLibelle: 'bs-libelle',
            bsIcone: 'bs-icone',
            multilignes: 'multilignes',
            bsIconeLeft: 'bs-icone-left',
            chipsInside: 'chips-inside',
            ieChips: 'ie-chips',
            btn: 'btn',
            squareColor: 'square-color',
            pj: 'pj',
            isDisabled: 'is-disabled',
            conteneurPj: 'conteneur-pj',
            choixWidgets: 'choix-widgets'
        };
    },
    fn: 'iehtml.btnselecteur.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ToucheClavier_1 = require("ToucheClavier");
        const AccessApp_1 = require("AccessApp");
        const IEHtml_BtnSelecteur_css_1 = require("IEHtml.BtnSelecteur.css");
        const fonts_css_1 = require("fonts.css");
        const IEHtml_Ripple_css_1 = require("IEHtml.Ripple.css");
        IEHtml.addBalise('ie-btnselecteur', (aContexteCourant, aOutils) => {
            const lEstMultilines = aContexteCourant.node.classList.contains(IEHtml_BtnSelecteur_css_1.StylesIEHtmlBtnSelecteur.multilignes);
            const lInnerHtml = aContexteCourant.node.innerHTML;
            const lBtn = ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("div", {
                class: [IEHtml_BtnSelecteur_css_1.StylesIEHtmlBtnSelecteur.ieBtnselecteur, IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple],
                tabindex: "0",
                "aria-haspopup": "dialog"
            }, IE.jsx.str("div", {
                class: IEHtml_BtnSelecteur_css_1.StylesIEHtmlBtnSelecteur.bsIcone,
                "aria-hidden": "true"
            }), IE.jsx.str("div", {
                class: IEHtml_BtnSelecteur_css_1.StylesIEHtmlBtnSelecteur.bsLibelle,
                "ie-ellipsis": !lEstMultilines
            }, lInnerHtml)));
            const lJBtn = $(lBtn);
            const lDOMIcone = lJBtn.find(`>.${IEHtml_BtnSelecteur_css_1.StylesIEHtmlBtnSelecteur.bsIcone}`).get(0);
            const lDOMLibelle = lJBtn.find(`>.${IEHtml_BtnSelecteur_css_1.StylesIEHtmlBtnSelecteur.bsLibelle}`).get(0);
            const lModele = aOutils.getModel(aContexteCourant);
            let lInfosGetLibelle = null;
            let lInfosEvent = null;
            let lInfosGetIcone = null;
            let lInfosGetHtmlIcone = null;
            let lDisabled = aContexteCourant.node.getAttribute('aria-disabled') === 'true';
            const lFuncActualiserDisabled = () => {
                if (lDisabled) {
                    aContexteCourant.node.setAttribute('aria-disabled', 'true');
                } else {
                    aContexteCourant.node.removeAttribute('aria-disabled');
                }
            }
            ;
            if (lModele) {
                lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant);
                const lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                lInfosGetLibelle = aOutils.getAccesParametresModel('getLibelle', aContexteCourant);
                lInfosGetIcone = aOutils.getAccesParametresModel('getIcone', aContexteCourant);
                lInfosGetHtmlIcone = aOutils.getAccesParametresModel('getIconeHtml', aContexteCourant);
                if (lInfosGetDisabled.estFonction) {
                    lDisabled = !!lInfosGetDisabled.callback([lBtn]);
                    lFuncActualiserDisabled();
                    aOutils.abonnerRefresh( () => {
                        const lDisabledNew = !!lInfosGetDisabled.callback([lBtn]);
                        if (lDisabledNew !== lDisabled) {
                            lDisabled = lDisabledNew;
                            lFuncActualiserDisabled();
                        }
                    }
                    , lBtn, aContexteCourant);
                }
            }
            let lHtmlPlaceHolder = '';
            aOutils.copyAttributs(aContexteCourant.node, lBtn, (aName, aValue) => {
                if (aName === 'class' && aValue) {
                    lJBtn.addClass(aValue);
                    return false;
                }
                if (aName === 'placeholder' && aValue) {
                    lHtmlPlaceHolder = IE.jsx.str("span", {
                        class: "as-placeholder",
                        "aria-disabled": "true"
                    }, aValue);
                    return false;
                }
            }
            );
            let lRole = lBtn.getAttribute('role');
            if (!lRole) {
                lRole = 'combobox';
                lBtn.setAttribute('role', lRole);
            }
            const lEstComboBox = lRole === 'combobox';
            if (lEstComboBox && !lBtn.hasAttribute('aria-expanded')) {
                lBtn.setAttribute('aria-expanded', 'false');
            }
            const lTitle = lBtn.getAttribute('title');
            if (lTitle && !lBtn.getAttribute('aria-label') && !lBtn.getAttribute('aria-labelledby')) {
                lBtn.setAttribute('aria-label', lTitle);
            }
            if (lInfosEvent && lInfosEvent.estFonction) {
                lJBtn.eventValidation( (aEvent) => {
                    if (!lDisabled) {
                        lInfosEvent.callback([aEvent, lBtn]);
                    }
                }
                );
                if (lEstComboBox) {
                    lJBtn.on('keyup', function(aEvent) {
                        if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas) {
                            lInfosEvent.callback([aEvent, lBtn]);
                        }
                    });
                }
            }
            const lAvecGetHtmlIcone = lInfosGetHtmlIcone && lInfosGetHtmlIcone.estFonction;
            if (!lAvecGetHtmlIcone) {
                const lIconeDefault = fonts_css_1.StylesFonts.icon_ellipsis_horizontal;
                let lFuncGetIncon = () => {
                    let lIcone = '';
                    if (lInfosGetIcone === null || lInfosGetIcone === void 0 ? void 0 : lInfosGetIcone.estFonction) {
                        lIcone = lInfosGetIcone.callback([lBtn, lDOMIcone, aContexteCourant]);
                    }
                    if (!lIcone) {
                        lIcone = lIconeDefault;
                    }
                    return lIcone;
                }
                ;
                const lAtrr = {
                    'ie-class': (lInfosGetIcone === null || lInfosGetIcone === void 0 ? void 0 : lInfosGetIcone.estFonction) ? lFuncGetIncon : false,
                    class: (lInfosGetIcone === null || lInfosGetIcone === void 0 ? void 0 : lInfosGetIcone.estFonction) ? false : lIconeDefault
                };
                $(lDOMIcone).ieHtml(IE.jsx.str("i", Object.assign({
                    role: "presentation"
                }, lAtrr)));
            }
            aOutils.surNodeEtNodeAfter(aContexteCourant);
            aOutils.replaceNode(aContexteCourant.node, lBtn);
            aContexteCourant.node = lBtn;
            if (lInfosGetLibelle && lInfosGetLibelle.estFonction) {
                aContexteCourant.nodeTransfertContenuDynamique = lDOMLibelle;
                const lGet = {
                    callback() {
                        let lResult = lInfosGetLibelle.callback([lBtn]) || '';
                        if (!lResult && lHtmlPlaceHolder) {
                            lResult = lHtmlPlaceHolder;
                        }
                        return lResult;
                    },
                    estFonction: true
                };
                aOutils.addGetterHtml(aContexteCourant, lGet);
            }
            if (lAvecGetHtmlIcone) {
                aContexteCourant.nodeTransfertContenuDynamique = lDOMIcone;
                aOutils.addGetterHtml(aContexteCourant, lInfosGetHtmlIcone);
            }
            if ((0,
            AccessApp_1.getApp)().estDebug() && lEstComboBox && !lBtn.getAttribute('aria-label') && !lBtn.getAttribute('aria-labelledby')) {}
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-btnselecteur');
            return {
                node: aContexteCourant.node,
                avecCompileFils: true
            };
        }
        );
    },
    fn: 'iehtml.btnselecteur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlZoneDessin = void 0;
        require("IEHtml.ZoneDessin.module.css");
        exports.StylesIEHtmlZoneDessin = {
            ieZonedessin: 'IEHtmlZoneDessin-ie-zonedessin-a7787a9e'
        };
    },
    fn: 'iehtml.zonedessin.module.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ZoneDessinEvenement = void 0;
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        require('signature_pad.umd.min.js');
        require('signature_pad.umd.js');
        const IEHtml_ZoneDessin_module_css_1 = require("IEHtml.ZoneDessin.module.css");
        var ZoneDessinEvenement;
        (function(ZoneDessinEvenement) {
            ZoneDessinEvenement["DebutDessin"] = "ZD_DebutDessin";
            ZoneDessinEvenement["FinDessin"] = "ZD_FinDessin";
            ZoneDessinEvenement["Effacement"] = "ZD_Effacement";
            ZoneDessinEvenement["AnnulerDernierTrait"] = "ZD_AnnulerDernierTrait";
        }
        )(ZoneDessinEvenement || (exports.ZoneDessinEvenement = ZoneDessinEvenement = {}));
        const cFacteurTraitTailleMin = 0.5;
        const cFacteurTraitTailleMax = 2.5;
        IEHtml.addBalise('ie-zonedessin', (aContexteCourant, aOutils) => {
            let lEstZoneDessinDisabled = false;
            let lSignaturePad;
            let lInfosDestroy;
            const lInnerDivGlobal = IE.jsx.str("div", {
                class: IEHtml_ZoneDessin_module_css_1.StylesIEHtmlZoneDessin.ieZonedessin
            });
            const lElementDivGlobal = ObjetHtml_1.GHtml.htmlToDOM(lInnerDivGlobal);
            const lJDivGlobal = $(lElementDivGlobal);
            let lJDivCanvas = null;
            let lFaireInitTaille = true;
            const lFuncVisibility = (aVisible) => {
                if (aVisible && lFaireInitTaille) {
                    lFaireInitTaille = false;
                    const lWidthParent = lJDivGlobal.width();
                    const lHeightParent = lJDivGlobal.height();
                    lJDivCanvas.attr('width', lWidthParent).attr('height', lHeightParent);
                }
            }
            ;
            aOutils.injectHTML({
                element: lElementDivGlobal,
                html: IE.jsx.str("canvas", {
                    "ie-visibility-observer": lFuncVisibility
                }),
                ignorerScroll: true,
                contexte: aContexteCourant.contexte
            });
            lJDivCanvas = $(lElementDivGlobal).find('>canvas');
            const lElementCanvas = lJDivCanvas.get(0);
            const lOptionsZoneDessin = {
                couleurCrayon: '#000',
                tailleCrayon: 1
            };
            DeferLoadingScript_1.deferLoadingScript.loadAsync(['signature-pad']).then( () => {
                let lInfosInitialiseZoneDessin;
                let lInfosSurEvenementZoneDessin;
                const lModele = aOutils.getModel(aContexteCourant);
                if (lModele) {
                    lInfosInitialiseZoneDessin = aOutils.getAccesParametresModel('initialiseZoneDessin', aContexteCourant);
                    lInfosDestroy = aOutils.getAccesParametresModel('destroy', aContexteCourant);
                    const lInfosGetOptions = aOutils.getAccesParametresModel('getOptions', aContexteCourant);
                    if (lInfosGetOptions && lInfosGetOptions.estFonction) {
                        Object.assign(lOptionsZoneDessin, lInfosGetOptions.callback([]));
                    }
                    const lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                    if (lInfosGetDisabled && lInfosGetDisabled.estFonction) {
                        const lGetter = function() {
                            return !!lInfosGetDisabled.callback([]);
                        };
                        lEstZoneDessinDisabled = !!lGetter();
                        aOutils.abonnerRefresh( () => {
                            const lDisabled = !!lGetter();
                            if (lDisabled !== lEstZoneDessinDisabled) {
                                lEstZoneDessinDisabled = lDisabled;
                                if (lEstZoneDessinDisabled) {
                                    $(aContexteCourant.node).find('canvas').attr('disabled', 'disabled');
                                    lSignaturePad.off();
                                } else {
                                    $(aContexteCourant.node).find('canvas').removeAttr('disabled');
                                    lSignaturePad.on();
                                }
                            }
                        }
                        , lElementDivGlobal, aContexteCourant);
                    }
                    lInfosSurEvenementZoneDessin = aOutils.getAccesParametresModel('surEvenementZoneDessin', aContexteCourant);
                }
                const lDefaultOptionsSignaturePad = {
                    dotSize: 1,
                    minWidth: 0.5,
                    maxWidth: 2.5,
                    throttle: 0,
                    minDistance: 5,
                    backgroundColor: '#FFF',
                    penColor: '#000',
                    velocityFilterWeight: 0.7
                };
                const lOptionsSignaturePad = Object.assign(lDefaultOptionsSignaturePad, {
                    minWidth: cFacteurTraitTailleMin * lOptionsZoneDessin.tailleCrayon,
                    maxWidth: cFacteurTraitTailleMax * lOptionsZoneDessin.tailleCrayon,
                    dotSize: lDefaultOptionsSignaturePad.maxWidth,
                    penColor: lOptionsZoneDessin.couleurCrayon
                });
                lSignaturePad = new global.SignaturePad(lElementCanvas,lOptionsSignaturePad);
                if (lInfosInitialiseZoneDessin && lInfosInitialiseZoneDessin.estFonction) {
                    lInfosInitialiseZoneDessin.callback([lSignaturePad]);
                }
                if (lEstZoneDessinDisabled) {
                    lSignaturePad.off();
                }
                if (lInfosSurEvenementZoneDessin && lInfosSurEvenementZoneDessin.estFonction) {
                    lSignaturePad.addEventListener('beginStroke', () => {
                        lInfosSurEvenementZoneDessin.callback([ZoneDessinEvenement.DebutDessin]);
                    }
                    );
                }
                lSignaturePad.addEventListener('endStroke', () => {
                    if (lInfosSurEvenementZoneDessin && lInfosSurEvenementZoneDessin.estFonction) {
                        lInfosSurEvenementZoneDessin.callback([ZoneDessinEvenement.FinDessin]);
                    }
                    aContexteCourant.contexte.refresh();
                }
                );
                const downloadBlob = (aBlob, aNomFichier) => {
                    const url = window.URL.createObjectURL(aBlob);
                    const a = document.createElement('a');
                    a.style = 'display: none';
                    a.href = url;
                    a.download = aNomFichier;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                }
                ;
                const dataURLToBlob = (aDataURL) => {
                    const lInfosB64 = aDataURL.split(';base64,');
                    const lContentType = lInfosB64[0].split(':')[1];
                    const lRaw = window.atob(lInfosB64[1]);
                    const lRawLength = lRaw.length;
                    const lUInt = new Uint8Array(lRawLength);
                    for (let i = 0; i < lRawLength; ++i) {
                        lUInt[i] = lRaw.charCodeAt(i);
                    }
                    return new Blob([lUInt],{
                        type: lContentType
                    });
                }
                ;
                const dataURLToUint8Array = (aDataURL) => {
                    const lInfosB64 = aDataURL.split(';base64,');
                    const lRaw = window.atob(lInfosB64[1]);
                    const lRawLength = lRaw.length;
                    const lUInt = new Uint8Array(lRawLength);
                    for (let i = 0; i < lRawLength; ++i) {
                        lUInt[i] = lRaw.charCodeAt(i);
                    }
                    return lUInt;
                }
                ;
                lSignaturePad.getImageBase64 = () => {
                    return lSignaturePad.toDataURL('image/png');
                }
                ;
                lSignaturePad.recupererBlob = (aCallback) => {
                    lElementCanvas.toBlob(aCallback);
                }
                ;
                lSignaturePad.getDataUrl = (aType, aEncoderOptions) => {
                    switch (aType) {
                    case 'image/png':
                    case 'image/jpeg':
                        return lSignaturePad.toDataURL(aType, aEncoderOptions);
                        break;
                    default:
                        ;return '';
                    }
                }
                ;
                lSignaturePad.getSVGDataUrl = (aEncoderOptions) => {
                    return lSignaturePad.toDataURL('image/svg+xml', aEncoderOptions ? aEncoderOptions : {
                        includeBackgroundColor: false
                    });
                }
                ;
                lSignaturePad.getSVGUint8Array = (aEncoderOptions) => {
                    let lDataUrl = lSignaturePad.getSVGDataUrl(aEncoderOptions);
                    return dataURLToUint8Array(lDataUrl);
                }
                ;
                lSignaturePad.downloadAsType = (aType, aNomFichier, aEncoderOptions) => {
                    let lDataURL = lSignaturePad.getDataUrl(aType, aEncoderOptions);
                    let lBlob = dataURLToBlob(lDataURL);
                    downloadBlob(lBlob, aNomFichier);
                }
                ;
                lSignaturePad.downloadAsSVG = (aNomFichier, aEncoderOptions) => {
                    let lDataURL = lSignaturePad.getSVGDataUrl(aEncoderOptions);
                    let lBlob = dataURLToBlob(lDataURL);
                    downloadBlob(lBlob, aNomFichier);
                }
                ;
                lSignaturePad.enregistrerImage = (aNomFichier) => {
                    lElementCanvas.toBlob( (aBlobDeCanvas) => {
                        downloadBlob(aBlobDeCanvas, aNomFichier);
                    }
                    );
                }
                ;
                lSignaturePad.estZoneDessinVide = () => {
                    return lSignaturePad.isEmpty();
                }
                ;
                lSignaturePad.annulerDernierTrait = () => {
                    const lDataActuelle = lSignaturePad.toData();
                    if (lDataActuelle) {
                        lDataActuelle.pop();
                        lSignaturePad.fromData(lDataActuelle);
                    }
                    if (lInfosSurEvenementZoneDessin && lInfosSurEvenementZoneDessin.estFonction) {
                        lInfosSurEvenementZoneDessin.callback([ZoneDessinEvenement.AnnulerDernierTrait]);
                    }
                }
                ;
                lSignaturePad.effacerZoneDessin = () => {
                    lSignaturePad.clear();
                    if (lInfosSurEvenementZoneDessin && lInfosSurEvenementZoneDessin.estFonction) {
                        lInfosSurEvenementZoneDessin.callback([ZoneDessinEvenement.Effacement]);
                    }
                }
                ;
                lSignaturePad.getCouleurTrait = () => {
                    return lSignaturePad.penColor;
                }
                ;
                lSignaturePad.changerCouleurTrait = (aCouleur) => {
                    lOptionsZoneDessin.couleurCrayon = aCouleur;
                    lSignaturePad.penColor = lOptionsZoneDessin.couleurCrayon;
                }
                ;
            }
            );
            lJDivCanvas.on('destroyed', () => {
                lSignaturePad = null;
                if (lInfosDestroy && lInfosDestroy.estFonction) {
                    lInfosDestroy.callback([]);
                }
            }
            );
            aOutils.copyAttributs(aContexteCourant.node, lElementDivGlobal);
            const lRacine = lElementDivGlobal;
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aContexteCourant.node = lRacine;
            aOutils.surNodeEtNodeAfter(aContexteCourant);
            aOutils.addCommentaireDebug(lElementDivGlobal, 'ie-zonedessin');
            return {
                node: lElementDivGlobal
            };
        }
        );
    },
    fn: 'iehtml.zonedessin.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlSelecFile = void 0;
        require("IEHtml.SelecFile.css");
        exports.StylesIEHtmlSelecFile = {
            SelecFile_DragEnCours: 'SelecFile_DragEnCours',
            SelecFile_DragEnCours_survol: 'SelecFile_DragEnCours_survol'
        };
    },
    fn: 'iehtml.selecfile.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GestionnaireModale = exports.OpaciteVoileBloquant = void 0;
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        const Invocateur_1 = require("Invocateur");
        const GUID_1 = require("GUID");
        const AccessApp_1 = require("AccessApp");
        var TypePrioriteBlocageInterface;
        (function(TypePrioriteBlocageInterface) {
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["voile"] = 1] = "voile";
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["standard"] = 10] = "standard";
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["message"] = 20] = "message";
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["messageInformatif"] = 30] = "messageInformatif";
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["systeme"] = 99999] = "systeme";
        }
        )(TypePrioriteBlocageInterface || (TypePrioriteBlocageInterface = {}));
        var OpaciteVoileBloquant;
        (function(OpaciteVoileBloquant) {
            OpaciteVoileBloquant[OpaciteVoileBloquant["default"] = 1] = "default";
            OpaciteVoileBloquant[OpaciteVoileBloquant["opaqueComplet"] = 2] = "opaqueComplet";
        }
        )(OpaciteVoileBloquant || (exports.OpaciteVoileBloquant = OpaciteVoileBloquant = {}));
        exports.GestionnaireModale = (function() {
            const uBlocage = {
                pile: [],
                nb: 0,
                avecVoile: false,
                pourPatience: false
            };
            const CidBlocageGeneral = GUID_1.GUID.getId() + '_bloquer';
            const uPileZIndex = {};
            let uMaxZIndex = -1;
            const uZIndexBlocage = 1000;
            const uGenerateurGUID = new GUID_1.GUID.generateur();
            const uClassBloquageInterface = 'nav_zoneBloquageInterface';
            function _ajoutDansPile(aId, aPourPremierPlan, aPourBlocageInterface, aPrioriteBlocage) {
                const lPriorite = _getPrioriteBlocageDePriorite(aPrioriteBlocage);
                if (uPileZIndex[aId]) {
                    uPileZIndex[aId].pourPremierPlan = uPileZIndex[aId].pourPremierPlan || aPourPremierPlan;
                    uPileZIndex[aId].pourBlocageInterface = uPileZIndex[aId].pourBlocageInterface || aPourBlocageInterface;
                    uPileZIndex[aId].prioriteBlocage = Math.max(uPileZIndex[aId].prioriteBlocage, lPriorite);
                } else {
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    const lZindex = ObjetStyle_1.GStyle.getZindex(aId);
                    if (lZindex || aPourBlocageInterface) {
                        uPileZIndex[aId] = {
                            element: lElement,
                            zIndexOrigine: lZindex,
                            zIndex: lZindex,
                            pourPremierPlan: aPourPremierPlan,
                            pourBlocageInterface: aPourBlocageInterface,
                            prioriteBlocage: lPriorite,
                            estBloque: false,
                            pileBlocage: []
                        };
                        uMaxZIndex = Math.max(uMaxZIndex, lZindex);
                    }
                }
            }
            function _setZIndex(aId, zIndex) {
                if (!uPileZIndex[aId]) {
                    return;
                }
                uPileZIndex[aId].zIndex = zIndex;
                ObjetStyle_1.GStyle.setZindex(aId, zIndex);
            }
            function _getPrioriteBlocageCourant() {
                let lPriorite = 0;
                uBlocage.pile.forEach( (aElement) => {
                    lPriorite = Math.max(lPriorite, aElement.priorite);
                }
                );
                return lPriorite;
            }
            function _getPrioriteBlocageDePriorite(aPrioriteBlocage) {
                return aPrioriteBlocage || exports.GestionnaireModale.TypePrioriteBlocageInterface.standard;
            }
            function _notifierAbonneBlocageInterface(aId, aBloquer, aForcerDeblocage, aPrioriteBlocage, aEtatBloquerPrecedent) {
                const lElement = uPileZIndex[aId];
                if (lElement && lElement.pourBlocageInterface) {
                    const lPrioriteBlocage = _getPrioriteBlocageDePriorite(aPrioriteBlocage);
                    if (!aBloquer && aForcerDeblocage) {
                        lElement.estBloque = false;
                        if (lElement.methode) {
                            lElement.methode(aBloquer, uBlocage.avecVoile, uBlocage.pourPatience);
                        } else {
                            _setZIndex(aId, lElement.zIndexOrigine);
                        }
                    } else {
                        if ((aBloquer && (!lElement.estBloque || (!lElement.avecVoile && uBlocage.avecVoile !== false)) && (lElement.prioriteBlocage <= lPrioriteBlocage)) || (!aBloquer && lElement.estBloque && !aEtatBloquerPrecedent)) {
                            if (aBloquer) {
                                lElement.estBloque = true;
                            } else {
                                lElement.estBloque = !!aEtatBloquerPrecedent;
                            }
                            if (lElement.methode) {
                                if (lElement.estBloque) {
                                    lElement.avecVoile = uBlocage.avecVoile;
                                }
                                lElement.methode(lElement.estBloque, uBlocage.avecVoile, uBlocage.pourPatience);
                            } else {
                                if (lElement.estBloque) {
                                    if (lElement.zIndex > uZIndexBlocage - 10) {
                                        _setZIndex(aId, uZIndexBlocage - 10);
                                    }
                                } else {
                                    _setZIndex(aId, lElement.zIndexOrigine);
                                }
                            }
                        }
                    }
                    let lId = aId;
                    if (lElement.blocageGeneral && (0,
                    AccessApp_1.getApp)()) {
                        lId = (0,
                        AccessApp_1.getApp)().getIdConteneur();
                    }
                    if (lElement.estBloque) {
                        $('#' + lId.escapeJQ()).addClass(uClassBloquageInterface);
                    } else {
                        $('#' + lId.escapeJQ()).removeClass(uClassBloquageInterface);
                    }
                }
            }
            function _notifierAbonnesBlocageInterface(aBloquer, aForcerDeblocage, aPrioriteBlocage) {
                for (let lId in uPileZIndex) {
                    const lElement = uPileZIndex[lId];
                    let lEtatPrecedent = null;
                    if (aBloquer) {
                        lElement.pileBlocage.push(lElement.estBloque);
                    } else {
                        lEtatPrecedent = lElement.pileBlocage.pop();
                    }
                    _notifierAbonneBlocageInterface(lId, aBloquer, aForcerDeblocage, aPrioriteBlocage, lEtatPrecedent);
                }
            }
            function _desabonnementBlocageInterface(aId) {
                if (uPileZIndex[aId] && uPileZIndex[aId].pourBlocageInterface) {
                    ObjetStyle_1.GStyle.setZindex(aId, uPileZIndex[aId].zIndex);
                    if (!uPileZIndex[aId].pourPremierPlan) {
                        delete uPileZIndex[aId];
                    } else {
                        uPileZIndex[aId].estBloque = false;
                        uPileZIndex[aId].pourBlocageInterface = false;
                    }
                }
            }
            function _desabonnementPremierPlan(aId) {
                if (uPileZIndex[aId]) {
                    if (uPileZIndex[aId].zIndex >= uMaxZIndex) {
                        uMaxZIndex = -1;
                        for (const lId in uPileZIndex) {
                            if (uPileZIndex[lId] && uPileZIndex[lId].pourPremierPlan && (lId !== aId)) {
                                uMaxZIndex = Math.max(uMaxZIndex, uPileZIndex[lId].zIndex);
                            }
                        }
                    }
                    _setZIndex(aId, uPileZIndex[aId].zIndexOrigine);
                    if (!uPileZIndex[aId].pourBlocageInterface) {
                        delete uPileZIndex[aId];
                    } else {
                        uPileZIndex[aId].pourPremierPlan = false;
                    }
                }
            }
            function _bloquerInterfaceGenerale(ABloquer, aAvecVoileOpaque, aPourPatience) {
                if (IE.estTestMocha) {
                    return;
                }
                let lElement = ObjetHtml_1.GHtml.getElement(CidBlocageGeneral);
                if (!lElement) {
                    $(document.body).find(':first').before('<div id="' + CidBlocageGeneral + '" class="BloquerInterface NePasImprimer SansSelectionTexte" style="display:none;"></div>');
                    lElement = ObjetHtml_1.GHtml.getElement(CidBlocageGeneral);
                }
                if (ABloquer) {
                    const lAvecVoileOpaque = aAvecVoileOpaque !== null && aAvecVoileOpaque !== void 0 ? aAvecVoileOpaque : true;
                    $(lElement).removeClass('VoileOpaque50 VoileOpaqueComplet');
                    if (lAvecVoileOpaque) {
                        let lOpaciteVoile = OpaciteVoileBloquant.default;
                        uBlocage.pile.forEach( (aElement) => {
                            if (aElement.opaciteVoile > lOpaciteVoile) {
                                lOpaciteVoile = aElement.opaciteVoile;
                                if (lOpaciteVoile === OpaciteVoileBloquant.opaqueComplet) {}
                            }
                        }
                        );
                        let lCss = lOpaciteVoile === OpaciteVoileBloquant.default ? 'VoileOpaque50' : 'VoileOpaqueComplet';
                        $(lElement).addClass(lCss);
                    }
                }
                if (!lElement.oncontextmenu) {
                    lElement.oncontextmenu = function() {
                        return false;
                    }
                    ;
                }
                ObjetStyle_1.GStyle.setDisplay(lElement, ABloquer);
                if (aPourPatience) {
                    $(lElement).addClass('blocage-patience');
                } else {
                    $(lElement).removeClass('blocage-patience');
                }
            }
            Invocateur_1.Invocateur.abonner('finSession', () => {
                _notifierAbonnesBlocageInterface(false, true, exports.GestionnaireModale.TypePrioriteBlocageInterface.systeme);
            }
            );
            return {
                TypePrioriteBlocageInterface: TypePrioriteBlocageInterface,
                enPremierPlan(AIdPremierPlan) {
                    if (!uPileZIndex[AIdPremierPlan]) {
                        return;
                    }
                    for (const lId in uPileZIndex) {
                        let lElement = uPileZIndex[lId];
                        if (lElement && lElement.pourPremierPlan) {
                            if (!ObjetHtml_1.GHtml.elementExiste(lId)) {
                                IE.log.addLog('Erreur GestionnaireModale.enPremierPlan : element supprim sans etre desabonn', null, IE.log.genre.Erreur);
                                _desabonnementPremierPlan(lId);
                            } else if (!lElement.estBloque) {
                                if (lId === AIdPremierPlan) {
                                    _setZIndex(lId, uMaxZIndex + 1);
                                } else if (!uPileZIndex[lId].estBloque) {
                                    _setZIndex(lId, lElement.zIndexOrigine);
                                }
                            }
                        }
                    }
                },
                abonnementPremierPlan(aAbonner, aId) {
                    if (aAbonner) {
                        _ajoutDansPile(aId, true, false);
                    } else {
                        _desabonnementPremierPlan(aId);
                    }
                },
                abonnementBlocageInterfaceGenerale() {
                    uPileZIndex[CidBlocageGeneral] = {
                        blocageGeneral: true,
                        pourPremierPlan: false,
                        pourBlocageInterface: true,
                        estBloque: false,
                        pileBlocage: [],
                        prioriteBlocage: exports.GestionnaireModale.TypePrioriteBlocageInterface.voile,
                        methode: _bloquerInterfaceGenerale
                    };
                },
                abonnementBlocageInterface(aAbonner, aId, aPrioriteBlocage) {
                    if (aAbonner) {
                        _ajoutDansPile(aId, false, true, aPrioriteBlocage);
                        const lPriorite = _getPrioriteBlocageDePriorite(aPrioriteBlocage);
                        if (exports.GestionnaireModale.estInterfaceBloque() && _getPrioriteBlocageCourant() > lPriorite) {
                            _notifierAbonneBlocageInterface(aId, true, false, lPriorite);
                        }
                    } else {
                        _desabonnementBlocageInterface(aId);
                    }
                },
                estInterfaceBloque() {
                    return uBlocage.pile.length > 0;
                },
                estJElementBloque(aJElement) {
                    return aJElement && aJElement.parents ? aJElement.closest('.' + uClassBloquageInterface).length > 0 : false;
                },
                bloquerInterface(aParams) {
                    const lParams = Object.assign({
                        bloquer: false,
                        prioriteBlocage: exports.GestionnaireModale.TypePrioriteBlocageInterface.standard,
                        pourPatience: false,
                        avecVoile: null,
                        forcerDeblocage: false,
                        guidBlocage: null,
                        opaciteVoile: OpaciteVoileBloquant.default
                    }, aParams);
                    if (!lParams.bloquer && (uBlocage.pile.length === 0)) {
                        return;
                    }
                    let lId = null;
                    lParams.prioriteBlocage = _getPrioriteBlocageDePriorite(lParams.prioriteBlocage);
                    if (lParams.bloquer) {
                        const lElement = {
                            priorite: lParams.prioriteBlocage,
                            guid: uGenerateurGUID.get(),
                            opaciteVoile: lParams.opaciteVoile
                        };
                        uBlocage.pile.push(lElement);
                        lId = lElement.guid;
                        uBlocage.avecVoile = lParams.avecVoile;
                        uBlocage.pourPatience = !!lParams.pourPatience;
                    } else {
                        if (lParams.guidBlocage) {
                            let lTrouve = false;
                            uBlocage.pile = uBlocage.pile.filter( (aElement) => {
                                if (aElement.guid === lParams.guidBlocage) {
                                    lTrouve = true;
                                }
                                return aElement.guid !== lParams.guidBlocage;
                            }
                            );
                            if (!lTrouve) {
                                return;
                            }
                        } else {
                            uBlocage.pile.pop();
                        }
                    }
                    _notifierAbonnesBlocageInterface(lParams.bloquer, false, lParams.prioriteBlocage);
                    return lId;
                }
            };
        }());
        if (!IE.estMobile) {
            exports.GestionnaireModale.abonnementBlocageInterfaceGenerale();
        }
    },
    fn: 'gestionnairemodale.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireSelecFile = void 0;
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireTraitementImage_1 = require("UtilitaireTraitementImage");
        const Enumere_DocumentJoint_1 = require("Enumere_DocumentJoint");
        let uIdFichier = 0;
        const UtilitaireSelecFile = {
            C_MaxSize: 500 * 1024 * 1024,
            addFileDansListe(aFile, aListeFichiers, aGenrePJ) {
                const lElement = new ObjetElement_1.ObjetElement('',null,aGenrePJ);
                lElement.setEtat(Enumere_Etat_1.EGenreEtat.Creation);
                let lLibelle = ObjetChaine_1.GChaine.enleverChemin(aFile.name);
                if (lLibelle && lLibelle.replace) {
                    lLibelle = lLibelle.replace(/[:/\\*?"<>|]/g, '_');
                }
                if (lLibelle === 'image.jpg') {
                    lLibelle = `image_${Date.now()}.jpg`;
                }
                lElement.Libelle = ObjetChaine_1.GChaine.ajouterEntites(lLibelle);
                lElement.nomOriginal = lLibelle;
                lElement.file = aFile;
                try {
                    if (aFile.lastModified) {
                        lElement.lastModified = aFile.lastModified;
                    }
                } catch (error) {}
                uIdFichier += 1;
                lElement.idFichier = 'selecfile_' + uIdFichier + '_' + Date.now();
                aListeFichiers.addElement(lElement);
            },
            controleTailleFichiers(aListeFichiers, aMessagesErreur, aMaxSize) {
                const lListe = new ObjetListeElements_1.ObjetListeElements();
                aListeFichiers.parcourir( (aFichier) => {
                    if (aMaxSize > 0 && !UtilitaireSelecFile.estFichierCloudPartage(aFichier) && aFichier.file && aFichier.file.size > aMaxSize) {
                        let lVal = Math.floor(aMaxSize / 1024);
                        let lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Ko');
                        if (lVal > 1024 * 10 || (lVal > 1024 && Math.floor(lVal / 1024) === lVal / 1024)) {
                            lVal = Math.floor(lVal / 1024);
                            lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Mo');
                        }
                        aMessagesErreur.push(ObjetChaine_1.GChaine.format('%s (%s)', [ObjetTraduction_1.GTraductions.getValeur('inputFile.msgEchecTailleFichier', [lVal, lUnite]), aFichier.getLibelle()]));
                    } else {
                        lListe.addElement(aFichier);
                    }
                }
                );
                return lListe;
            },
            estFichierCloudPartage(aFichier) {
                return aFichier && aFichier.idPartage && aFichier.getGenre && aFichier.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.Cloud;
            },
            extraireListeFichiersCloudsPartage(aListeFichiers) {
                const lListeFichiersClouds = new ObjetListeElements_1.ObjetListeElements();
                if (aListeFichiers && aListeFichiers.parcourir) {
                    const lTabFichiers = [...aListeFichiers.getTabListeElements()];
                    lTabFichiers.forEach( (aFichier, aIndex) => {
                        if (UtilitaireSelecFile.estFichierCloudPartage(aFichier)) {
                            lListeFichiersClouds.add(aFichier);
                            aListeFichiers.remove(aIndex);
                        }
                    }
                    );
                }
                return lListeFichiersClouds;
            },
            genererPdfAsync(aListeFichiers, aMessagesErreur, aNomPDFaGenerer, aGenrePDF) {
                return UtilitaireTraitementImage_1.UtilitaireTraitementImage.genererPdfAsync(aListeFichiers).then( (aParamPDF) => {
                    aListeFichiers.vider();
                    if (aParamPDF && aParamPDF.file) {
                        if (aNomPDFaGenerer) {
                            aParamPDF.file.name = aNomPDFaGenerer;
                        }
                        UtilitaireSelecFile.addFileDansListe(aParamPDF.file, aListeFichiers, aGenrePDF);
                    }
                }
                ).catch( (aParamsReject) => {
                    aListeFichiers.vider();
                    if (aMessagesErreur.length > 0) {
                        aMessagesErreur.push('');
                    }
                    aMessagesErreur.push(ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('inputFile.echecImagePDF_S'), [(aParamsReject ? aParamsReject.nom : '') || '']));
                }
                );
            }
        };
        exports.UtilitaireSelecFile = UtilitaireSelecFile;
    },
    fn: 'utilitaireselecfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.SelecFile = void 0;
        const IEHtml = require("IEHtml");
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_DocumentJoint_1 = require("Enumere_DocumentJoint");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireTraitementImage_1 = require("UtilitaireTraitementImage");
        const UtilitaireSelecFile_1 = require("UtilitaireSelecFile");
        const AccessApp_1 = require("AccessApp");
        class SelecFile {
            static async select(aOptions) {
                return await new ObjetSelecFile(aOptions).select();
            }
            static async addFiles(aOptions, aFiles) {
                return await new ObjetSelecFile(aOptions).addFiles(aFiles);
            }
            static getOptionsDefaut() {
                return {
                    accept: '',
                    extensions: null,
                    maxSize: null,
                    multiple: false,
                    maxFiles: 0,
                    genrePJ: Enumere_DocumentJoint_1.EGenreDocumentJoint.Fichier,
                    avecResizeImage: true,
                    hauteurMaxImageResize: 1500,
                    largeurMaxImageResize: 1500,
                    compressionImage: 0.88,
                    avecTransformationFlux: true,
                    avecTransformationFlux_versCloud: false,
                    genererPDFImages: false,
                    nomPDFaGenerer: '',
                    accept_genererPDFImages: UtilitaireTraitementImage_1.UtilitaireTraitementImage.getTabMimePDFImage().join(', '),
                    capture: false
                };
            }
        }
        exports.SelecFile = SelecFile;
        const uIdConteneurInputFile = GUID_1.GUID.getId();
        class ObjetSelecFile {
            constructor(aOptions) {
                this.options = SelecFile.getOptionsDefaut();
                Object.assign(this.options, aOptions);
            }
            async select() {
                if (!MethodesObjet_1.MethodesObjet.isNumber(this.options.maxSize) || this.options.maxSize < 0) {
                    this.options.maxSize = 0;
                }
                if (this.options.maxSize <= 0) {
                    this.options.maxSize = 50 * 1024 * 1024;
                }
                return new Promise( (aResolve) => {
                    this.createInput(aResolve);
                    if (!this.jInput) {
                        return false;
                    }
                    if (this.options.surOuvertureSelecteur) {
                        this.options.surOuvertureSelecteur();
                    }
                    this.jInput.trigger('click');
                }
                );
            }
            async addFiles(aFiles) {
                const lParams = ({
                    files: aFiles,
                    listeFichiers: new ObjetListeElements_1.ObjetListeElements()
                });
                const lMessagesErreur = [];
                this.construireListeFichiers(lParams, lMessagesErreur);
                let lAvecBlocageInterface = false;
                try {
                    if (lParams.listeFichiers.count() > 0) {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                            delai: 500
                        });
                        lAvecBlocageInterface = true;
                    }
                    try {
                        for (const lFichier of lParams.listeFichiers) {
                            if (this.options.avecResizeImage && UtilitaireTraitementImage_1.UtilitaireTraitementImage.avecResizePossible(lFichier.file)) {
                                await this.scaleImage(lParams, lFichier, lMessagesErreur);
                            }
                        }
                        if (!this.avecTransformationFlux()) {
                            lParams.listeFichiers = UtilitaireSelecFile_1.UtilitaireSelecFile.controleTailleFichiers(lParams.listeFichiers, lMessagesErreur, this.options.maxSize);
                        }
                        if (this.options.genererPDFImages && lParams.listeFichiers.count() > 0) {
                            await UtilitaireSelecFile_1.UtilitaireSelecFile.genererPdfAsync(lParams.listeFichiers, lMessagesErreur, this.options.nomPDFaGenerer, this.options.genrePJ);
                            if (!this.avecTransformationFlux()) {
                                lParams.listeFichiers = UtilitaireSelecFile_1.UtilitaireSelecFile.controleTailleFichiers(lParams.listeFichiers, lMessagesErreur, this.options.maxSize);
                            }
                        }
                    } finally {
                        if (lAvecBlocageInterface) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                        }
                    }
                    if (this.avecTransformationFlux()) {
                        try {
                            await (0,
                            AccessApp_1.getApp)().getObject('transformationFlux').transformationFluxPromise(lParams.listeFichiers, this.options);
                        } catch (aError) {}
                        lParams.listeFichiers = UtilitaireSelecFile_1.UtilitaireSelecFile.controleTailleFichiers(lParams.listeFichiers, lMessagesErreur, this.options.maxSize);
                    }
                    if (lMessagesErreur.length > 0) {
                        await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            message: lMessagesErreur.join('<br>')
                        });
                    }
                    if (lParams.listeFichiers.count() > 0) {
                        lParams.eltFichier = lParams.listeFichiers.get(0);
                        IEHtml.refresh();
                        return lParams;
                    }
                } catch (e) {
                    await (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        message: ObjetTraduction_1.GTraductions.getValeur('inputFile.EchecAjoutFichier')
                    });
                    return null;
                }
            }
            createInput(aResolve) {
                this.removeInput();
                if (this.timeoutClean) {
                    clearTimeout(this.timeoutClean);
                }
                this.timeoutClean = null;
                if (!ObjetHtml_1.GHtml.getElement(uIdConteneurInputFile)) {
                    IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(uIdConteneurInputFile, -1);
                }
                const lAccept = (this.options.genererPDFImages ? this.options.accept_genererPDFImages : '') || this.options.accept;
                this.jInput = $(IEHtml.injectHTMLParams({
                    element: ObjetHtml_1.GHtml.getElement(uIdConteneurInputFile),
                    html: IE.jsx.str("input", {
                        type: "file",
                        style: "display:none",
                        multiple: !!this.options.multiple,
                        accept: lAccept || false,
                        capture: this.options.capture || false
                    }),
                    ignorerScroll: true
                }));
                this.jInput.on({
                    'change': async function(aEvent) {
                        const lInstance = aEvent.data.this;
                        try {
                            const lResult = await lInstance.addFiles(Array.from(this.files));
                            lInstance.removeInput();
                            aResolve(lResult);
                        } catch (e) {
                            lInstance.removeInput();
                            aResolve(null);
                        }
                    }
                }, {
                    this: this
                });
            }
            removeInput() {
                if (this.timeoutClean) {
                    clearTimeout(this.timeoutClean);
                }
                this.timeoutClean = null;
                $(`#${uIdConteneurInputFile}`).remove();
                this.jInput = null;
            }
            construireListeFichiers(aParams, aMessagesErreur) {
                let lNbMax = this.options.maxFiles;
                if (!this.options.multiple) {
                    lNbMax = 1;
                }
                Array.from(aParams.files).forEach( (aFile, aIndex) => {
                    const lFichierRefuse = lNbMax > 0 && MethodesObjet_1.MethodesObjet.isNumber(lNbMax) && aIndex >= lNbMax;
                    IE.log.addLog('Fichier ' + (lFichierRefuse ? 'refus (max atteint)' : 'ajout') + ' : ' + aFile.name + ' - Taille : ' + Math.ceil(aFile.size / 1024) + 'ko');
                    if (lFichierRefuse) {
                        return;
                    }
                    if (aFile.size === 0) {
                        aMessagesErreur.push(ObjetTraduction_1.GTraductions.getValeur('inputFile.msgDocJointVide', [aFile.name]));
                    } else if (this.options.extensions && this.options.extensions.length > 0 && !(this.options.extensions.includes(aFile.name.replace(/(.*)\.([^./]+)$/, '$2').toLowerCase()))) {
                        aMessagesErreur.push(ObjetTraduction_1.GTraductions.getValeur('inputFile.echecSelection', [this.options.extensions.join(', ')]));
                    } else {
                        UtilitaireSelecFile_1.UtilitaireSelecFile.addFileDansListe(aFile, aParams.listeFichiers, this.options.genrePJ);
                    }
                }
                );
                if (aParams.listeFichiers) {
                    aParams.listeFichiers.setTri([ObjetTri_1.ObjetTri.init('lastModified'), ObjetTri_1.ObjetTri.init('Libelle')]);
                    aParams.listeFichiers.trier();
                }
            }
            async scaleImage(aParams, aFichier, aMessagesErreur) {
                try {
                    const aParamsTraitement = await UtilitaireTraitementImage_1.UtilitaireTraitementImage.resizeFilePromise(aFichier.file, this.options.largeurMaxImageResize, this.options.hauteurMaxImageResize, this.options.compressionImage);
                    if (aParamsTraitement && aParamsTraitement.avecResize && aParamsTraitement.file && aParamsTraitement.file.size < aFichier.file.size) {
                        const lAncienFichier = aFichier.file;
                        aFichier.file = aParamsTraitement.file;
                        aFichier.estResize = true;
                        aMessagesErreur.push(ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('inputFile.reductionTailleImage_SDDDDDD'), [aFichier.Libelle, aParamsTraitement.widthOriginal, aParamsTraitement.heightOriginal, lAncienFichier.size / 1024, Math.round(aParamsTraitement.width), Math.round(aParamsTraitement.height), aFichier.file.size / 1024]));
                    }
                } catch (e) {
                    return null;
                }
            }
            avecTransformationFlux() {
                if (this.options.avecTransformationFlux && (0,
                AccessApp_1.getApp)()) {
                    const lTransformationFlux = (0,
                    AccessApp_1.getApp)().getObject('transformationFlux');
                    return (!!lTransformationFlux && lTransformationFlux.getActif()) && !['image/*', 'application/zip'].includes(this.options.accept);
                }
                return false;
            }
        }
    },
    fn: 'selecfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("IEHtml.SelecFile.css");
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetHtml_1 = require("ObjetHtml");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const ToucheClavier_1 = require("ToucheClavier");
        const SelecFile_1 = require("SelecFile");
        const Tooltip_1 = require("Tooltip");
        let uInvocateurSelecFile = new Invocateur_1.ObjetInvocateur();
        IEHtml.addAttribut('ie-selecfile', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lModele = aOutils.getModel(aContexteCourant);
            let lDisabled = false;
            let lDesactiverClick_openFileManuel = false;
            let lTimeoutDrag;
            let lTimeoutDragSurvol;
            const lDureeTimeoutDrag = 10;
            let lDragEnCours = false;
            let lDragHoverEnCours = false;
            let lIdsAbon = null;
            if (!lModele) {
                return true;
            }
            const lJElement = $(aContexteCourant.node)
              , lInfosOptions = aOutils.getAccesParametresModel('getOptionsSelecFile', aContexteCourant)
              , lInfosAdd = aOutils.getAccesParametresModel('addFiles', aContexteCourant)
              , lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
            if (!lInfosAdd.estFonction) {
                return true;
            }
            if (!lInfosOptions.estFonction) {
                return true;
            }
            const lOptions = SelecFile_1.SelecFile.getOptionsDefaut();
            function _estDisabled() {
                return lDisabled;
            }
            const lOuvrirSelecteur = async function() {
                const lResult = await SelecFile_1.SelecFile.select(lOptions);
                if (lResult && lResult.files) {
                    lInfosAdd.callback([lResult, aContexteCourant.node]);
                    IEHtml.refresh();
                }
            };
            function _surDrag(aParams) {
                if (_estDisabled()) {
                    return;
                }
                clearTimeout(lTimeoutDrag);
                if (aParams.start && lOptions.acceptDragDrop) {
                    if (!lDragEnCours && !GestionnaireModale_1.GestionnaireModale.estJElementBloque(lJElement)) {
                        lDragEnCours = true;
                        if (lOptions.classDrag) {
                            aContexteCourant.node.classList.add(lOptions.classDrag);
                        }
                        if (lOptions.eventSurDrag) {
                            lOptions.eventSurDrag({
                                surDrag: true
                            });
                        }
                    }
                } else if (lDragEnCours) {
                    lTimeoutDrag = setTimeout( () => {
                        lDragEnCours = false;
                        lDragHoverEnCours = false;
                        if (lOptions.classDrag) {
                            aContexteCourant.node.classList.remove(lOptions.classDrag);
                        }
                        if (lOptions.classDragHoverSelec) {
                            aContexteCourant.node.classList.remove(lOptions.classDragHoverSelec);
                        }
                        if (lOptions.eventSurDrag) {
                            lOptions.eventSurDrag({
                                surDrag: false
                            });
                        }
                    }
                    , lDureeTimeoutDrag);
                }
                if (lOptions.bloquerDropHorsZoneDrop) {
                    aParams.avecSelecAbonne = true;
                }
            }
            Object.assign(lOptions, {
                acceptDragDrop: true,
                eventClick: true,
                title: '',
                getClass: function(aDisabled) {
                    return aDisabled || !lOptions.eventClick ? '' : 'AvecMain';
                },
                interrompreClick: false,
                click_surEventCapture: true,
                dragEnCoursVisible: true,
                bloquerDropHorsZoneDrop: true,
                classDrag: 'SelecFile_DragEnCours',
                classDragHoverSelec: 'SelecFile_DragEnCours_survol',
                eventSurDrag: null
            });
            function _majOptions() {
                if (lInfosOptions.estFonction) {
                    const lFunc = () => {
                        lDesactiverClick_openFileManuel = true;
                        return lOuvrirSelecteur;
                    }
                    ;
                    const lResultOptions = lInfosOptions.callback([lFunc, aContexteCourant.node]);
                    if (lResultOptions) {
                        Object.assign(lOptions, lResultOptions);
                    }
                }
                if (lOptions.dragEnCoursVisible) {
                    if (lIdsAbon) {
                        uInvocateurSelecFile.desabonner(lIdsAbon);
                    }
                    lIdsAbon = uInvocateurSelecFile.abonner('drag', _surDrag);
                }
            }
            function _listenerClick(aEvent) {
                if (_estDisabled() || !lOptions.eventClick || lDesactiverClick_openFileManuel) {
                    return;
                }
                lOuvrirSelecteur();
                if (lOptions.interrompreClick) {
                    aEvent.stopImmediatePropagation();
                    aEvent.preventDefault();
                    return false;
                }
            }
            function _listenerClickCapture(aEvent) {
                if (lOptions.click_surEventCapture) {
                    _listenerClick(aEvent);
                }
            }
            function _listenerClickBubbling(aEvent) {
                if (!lOptions.click_surEventCapture) {
                    _listenerClick(aEvent);
                }
            }
            aContexteCourant.node.addEventListener('click', _listenerClickCapture, true);
            aContexteCourant.node.addEventListener('click', _listenerClickBubbling, false);
            const lOldRole = lJElement.attr('role');
            const lOldTabIndex = lJElement.attr('tabindex');
            const lEstDansElementInteractif = !!ObjetHtml_1.GHtml.getClosestInteractive(lJElement.get(0));
            lJElement.on({
                'destroyed': function() {
                    if (lIdsAbon) {
                        uInvocateurSelecFile.desabonner(lIdsAbon);
                        lIdsAbon = null;
                    }
                    clearTimeout(lTimeoutDrag);
                    clearTimeout(lTimeoutDragSurvol);
                    lDragEnCours = false;
                    lDragHoverEnCours = false;
                    if (lOptions.classDrag) {
                        aContexteCourant.node.classList.remove(lOptions.classDrag);
                    }
                    if (lOptions.classDragHoverSelec) {
                        aContexteCourant.node.classList.remove(lOptions.classDragHoverSelec);
                    }
                    if (lOptions.eventSurDrag) {
                        lOptions.eventSurDrag({
                            surDrag: false
                        });
                    }
                    aContexteCourant.node.removeEventListener('click', _listenerClickCapture, true);
                    aContexteCourant.node.removeEventListener('click', _listenerClickBubbling, false);
                },
                keyup(aEvent) {
                    if (!_estDisabled() && ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent)) {
                        lOuvrirSelecteur();
                    }
                },
                'dragenter.selecfile dragover.selecfile': function(aEvent) {
                    if (!lOptions.acceptDragDrop || _estDisabled() || !_eventDragAvecFiles(aEvent)) {
                        return;
                    }
                    aEvent.originalEvent.__dropAccepted__ = true;
                    aEvent.preventDefault();
                    if (lOptions.dragEnCoursVisible) {
                        clearTimeout(lTimeoutDragSurvol);
                        if (lOptions.classDragHoverSelec && !lDragHoverEnCours) {
                            lDragHoverEnCours = true;
                            aContexteCourant.node.classList.add(lOptions.classDragHoverSelec);
                        }
                    }
                },
                'dragexit.selecfile dragleave.selecfile dragend.selecfile': function() {
                    clearTimeout(lTimeoutDrag);
                    clearTimeout(lTimeoutDragSurvol);
                    if (lOptions.classDragHoverSelec && lDragHoverEnCours) {
                        lTimeoutDragSurvol = setTimeout( () => {
                            lDragHoverEnCours = false;
                            aContexteCourant.node.classList.remove(lOptions.classDragHoverSelec);
                        }
                        , lDureeTimeoutDrag);
                    }
                },
                'drop.selecfile': async function(aEvent) {
                    uInvocateurSelecFile.evenement('drag', {
                        start: false
                    });
                    if (!lOptions.acceptDragDrop || _estDisabled()) {
                        return;
                    }
                    aEvent.stopPropagation();
                    aEvent.preventDefault();
                    const lDataTransfert = aEvent.originalEvent.dataTransfer;
                    if (lDataTransfert) {
                        const lFiles = Array.from(lDataTransfert.files);
                        if (lFiles.length > 0) {
                            const lResult = await SelecFile_1.SelecFile.addFiles(lOptions, lFiles);
                            if (lResult && lResult.files) {
                                lInfosAdd.callback([lResult, aContexteCourant.node]);
                                IEHtml.refresh();
                            }
                        }
                    }
                }
            });
            const lTitleOrigine = aContexteCourant.node.title;
            const lMAJDisabled = (aDisabled) => {
                if (!aDisabled) {
                    _majOptions();
                }
                if (!aDisabled && !lEstDansElementInteractif && lOptions.eventClick && !lOldRole) {
                    lJElement.attr('role', 'button');
                } else {
                    lJElement.attr('role', lOldRole);
                }
                if (!aDisabled && !lEstDansElementInteractif && lOptions.eventClick && !lOldTabIndex) {
                    lJElement.attr('tabindex', '0');
                } else {
                    lJElement.attr('tabindex', lOldTabIndex);
                }
                if (!aContexteCourant.node.hasAttribute(Tooltip_1.Tooltip.attrType)) {
                    if (aDisabled && lTitleOrigine && lOptions.title) {
                        ObjetHtml_1.GHtml.setTitle(aContexteCourant.node, lTitleOrigine || '');
                    } else if (!aDisabled && lOptions.title) {
                        ObjetHtml_1.GHtml.setTitle(aContexteCourant.node, lOptions.title);
                    }
                }
                if (lOptions.getClass) {
                    lJElement.removeClass(lOptions.getClass(!aDisabled)).addClass(lOptions.getClass(aDisabled));
                }
            }
            ;
            if (lInfosGetDisabled.valide) {
                const lGetter = function() {
                    return !!lInfosGetDisabled.callback([lJElement.get(0), aContexteCourant.data]);
                };
                if (lInfosGetDisabled.estFonction || !lGetter() || lGetter() === true) {
                    lDisabled = !!lGetter();
                    aOutils.abonnerRefresh( () => {
                        const lNewDisabled = !!lGetter();
                        if (lNewDisabled !== lDisabled) {
                            lDisabled = lNewDisabled;
                            lMAJDisabled(lDisabled);
                        }
                    }
                    , lJElement.get(0), aContexteCourant);
                } else {
                    IE.log.addLog('echec getDisabled de ie-selecfile, proprit incorrecte du model "' + lModele + '"');
                }
            }
            lMAJDisabled(lDisabled);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-selecfile');
            return true;
        }
        );
        function _eventDragAvecFiles(aEvent) {
            if (aEvent.originalEvent && aEvent.originalEvent.dataTransfer && aEvent.originalEvent.dataTransfer.items && aEvent.originalEvent.dataTransfer.items.length > 0) {
                let lAvecFile = false;
                try {
                    for (let i = 0; i < aEvent.originalEvent.dataTransfer.items.length; i++) {
                        const lData = aEvent.originalEvent.dataTransfer.items[i];
                        if (!lData || lData.kind !== 'string') {
                            lAvecFile = true;
                            break;
                        }
                    }
                } catch (e) {
                    lAvecFile = true;
                }
                return lAvecFile;
            }
            return true;
        }
        $(document).on({
            'dragenter.selecfile dragover.selecfile': function(aEvent) {
                const lParams = {
                    start: true,
                    avecSelecAbonne: false
                };
                if (_eventDragAvecFiles(aEvent)) {
                    uInvocateurSelecFile.evenement('drag', lParams);
                } else {
                    lParams.avecSelecAbonne = false;
                }
                if (lParams.avecSelecAbonne && !('__dropAccepted__'in aEvent.originalEvent) && 'dataTransfer'in aEvent.originalEvent) {
                    aEvent.originalEvent.dataTransfer.dropEffect = 'none';
                    return false;
                }
            },
            'dragexit.selecfile dragleave.selecfile dragend.selecfile drop.selecfile': function() {
                uInvocateurSelecFile.evenement('drag', {
                    start: false
                });
            }
        });
    },
    fn: 'iehtml.selecfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlTextareaMax = void 0;
        require("IEHtml.TextareaMax.css");
        exports.StylesIEHtmlTextareaMax = {
            textareamax: 'textareamax',
            hasScroll: 'has-scroll',
            borderColorNeutre: 'border-color-neutre',
            textareamaxWrapper: 'textareamax-wrapper',
            ieAutoresize: 'ie-autoresize',
            tam_counter: 'tam_counter',
            tam_withspeech: 'tam_withspeech',
            textareaStyle: 'textarea-style',
            textareaCounter: 'textarea-counter',
            browserDefault: 'browser-default',
            tam_speech: 'tam_speech',
            smallIcon: 'small-icon',
            disabled: 'disabled'
        };
    },
    fn: 'iehtml.textareamax.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesToast = void 0;
        require("Toast.css");
        exports.StylesToast = {
            toast: 'toast',
            btn: 'btn',
            info: 'info',
            alert: 'alert',
            error: 'error',
            success: 'success',
            message: 'message',
            shown: 'shown',
            top: 'top',
            toRight: 'to-right',
            introBottom: 'intro-bottom',
            introTop: 'intro-top',
            openToast: 'open-toast'
        };
    },
    fn: 'toast.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Toast = exports.ETypeToast = void 0;
        const ObjetHtml_1 = require("ObjetHtml");
        const GUID_1 = require("GUID");
        const ObjetChaine_1 = require("ObjetChaine");
        require("Toast.css");
        const AccessApp_1 = require("AccessApp");
        var ETypeToast;
        (function(ETypeToast) {
            ETypeToast["info"] = "info";
            ETypeToast["alerte"] = "alerte";
            ETypeToast["succes"] = "succes";
            ETypeToast["erreur"] = "erreur";
            ETypeToast["message"] = "message";
        }
        )(ETypeToast || (exports.ETypeToast = ETypeToast = {}));
        const ETypeToastUtil = {
            getClasseCss(aType) {
                switch (aType) {
                case ETypeToast.info:
                    return 'info';
                case ETypeToast.alerte:
                    return 'alert';
                case ETypeToast.succes:
                    return 'success';
                case ETypeToast.erreur:
                    return 'error';
                case ETypeToast.message:
                    return 'message';
                }
            },
            getClasseIcon(aType) {
                switch (aType) {
                case ETypeToast.info:
                    return 'icon_diffuser_information';
                case ETypeToast.alerte:
                    return 'icon_exclamation';
                case ETypeToast.succes:
                    return 'icon_ok';
                case ETypeToast.erreur:
                    return 'icon_punition';
                case ETypeToast.message:
                    return 'icon_diffuser_information';
                }
            },
            getClassePosition(aType) {
                switch (aType) {
                case ETypeToast.erreur:
                    return 'top';
                default:
                    return IE.estMobile ? '' : 'to-right';
                }
            }
        };
        const uIdConteneurToast = GUID_1.GUID.getId();
        let uTimeoutFermeture = null;
        class Toast {
            static getHtmlToast(aParam) {
                const lClassTypeToast = ETypeToastUtil.getClasseCss(aParam.type);
                const lClassPosition = ETypeToastUtil.getClassePosition(aParam.type);
                const lIconToast = (aParam.icon !== null) && (aParam.icon !== undefined) ? aParam.icon : ETypeToastUtil.getClasseIcon(aParam.type);
                return (IE.jsx.str("div", {
                    class: ['toast ', lClassTypeToast, lClassPosition, lIconToast]
                }, IE.jsx.str("p", {
                    role: "alert",
                    "aria-live": "assertive"
                }, ObjetChaine_1.GChaine.replaceRCToHTML(aParam.msg))));
            }
            static afficher(aParam) {
                const lParams = Object.assign({
                    msg: '',
                    type: ETypeToast.succes,
                    dureeAffichage: 4500
                }, aParam);
                Toast.fermer();
                const lIdPere = (0,
                AccessApp_1.getApp)().getIdConteneur();
                const lConteneurPere = ObjetHtml_1.GHtml.getElement(lIdPere);
                if (lConteneurPere) {
                    const lConteneurToast = document.createElement('div');
                    lConteneurToast.innerHTML = Toast.getHtmlToast(lParams);
                    lConteneurToast.id = uIdConteneurToast;
                    lConteneurPere.appendChild(lConteneurToast);
                }
                return Toast.showToast(lParams).then( () => {
                    Toast.fermer();
                }
                );
            }
            static showToast(aParam) {
                return new Promise( (aResolve) => {
                    const _target = $('.toast');
                    _target.siblings('.toast').removeClass('shown');
                    (!_target.hasClass('shown')) ? _target.addClass('shown') : _target.removeClass('shown');
                    uTimeoutFermeture = setTimeout( () => {
                        uTimeoutFermeture = null;
                        _target.removeClass('shown');
                        aResolve();
                    }
                    , aParam.dureeAffichage);
                }
                );
            }
            static fermer() {
                const lIdPere = (0,
                AccessApp_1.getApp)().getIdConteneur();
                const lConteneurPere = ObjetHtml_1.GHtml.getElement(lIdPere);
                if ((lConteneurPere !== null) && (lConteneurPere !== undefined)) {
                    const lConteneurToast = ObjetHtml_1.GHtml.getElement(uIdConteneurToast);
                    if (lConteneurToast) {
                        lConteneurPere.removeChild(lConteneurToast);
                        ObjetHtml_1.GHtml.supprimerElementDOM(uIdConteneurToast);
                        if (uTimeoutFermeture) {
                            clearTimeout(uTimeoutFermeture);
                            uTimeoutFermeture = null;
                        }
                    }
                }
            }
        }
        exports.Toast = Toast;
    },
    fn: 'toast.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TradTextareaMax = void 0;
        require("IEHtml.TextareaMax.css");
        const ObjetStyle_1 = require("ObjetStyle");
        const IEHtml_1 = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_2 = require("ObjetStyle");
        const ObjetSupport_1 = require("ObjetSupport");
        const ObjetChaine_1 = require("ObjetChaine");
        const GUID_1 = require("GUID");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const AccessApp_1 = require("AccessApp");
        const IEHtml_TextareaMax_css_1 = require("IEHtml.TextareaMax.css");
        const Toast_1 = require("Toast");
        const Divers_css_1 = require("Divers.css");
        IEHtml_1.default.addBalise('ie-textareamax', (aContexteCourant, aOutils) => {
            var _a;
            const lModele = aOutils.getModel(aContexteCourant);
            const lMap = aOutils.getMapDeNode(aContexteCourant.node);
            let llName;
            let lContexteCourant;
            let lMaxLength = 0;
            let lAvecMaxLength = false;
            const lOptions = {
                heightCompteur: '1.4rem',
                pourcentageAvertissement: 0.9,
                couleurFond: (0,
                AccessApp_1.getApp)().getCouleur().nonEditable.fond,
                couleurBordure: (0,
                AccessApp_1.getApp)().getCouleur().bordure,
                couleurTexte: (0,
                AccessApp_1.getApp)().getCouleur().themeNeutre.sombre,
                couleurTexteAvertissement: 'red',
                borduresZoneMax: ObjetStyle_1.EGenreBordure.haut,
                longueurTexte: -1,
                libelleMax_dd: '%d/%d',
                getCompteur: null
            };
            let lSpeechRecognizer = null;
            let lInRecognition = false;
            let lJTextArea = null;
            let lAvecRefreshSelonTaille = null;
            const lFLogSpeech = function(aMsg) {
                let lMsg = '';
                switch (aMsg) {
                case 'no-speech':
                    lMsg = TradTextareaMax.SaisieVocale.NoSpeech;
                    break;
                case 'aborted':
                    lMsg = TradTextareaMax.SaisieVocale.Aborted;
                    break;
                case 'audio-capture':
                    lMsg = TradTextareaMax.SaisieVocale.AudioCapture;
                    break;
                case 'network':
                    lMsg = TradTextareaMax.SaisieVocale.Network;
                    break;
                case 'not-allowed':
                    lMsg = TradTextareaMax.SaisieVocale.NotAllowed;
                    break;
                case 'service-not-allowed':
                    lMsg = TradTextareaMax.SaisieVocale.ServiceNotAllowed;
                    break;
                case 'bad-grammar':
                    lMsg = TradTextareaMax.SaisieVocale.BadGrammar;
                    break;
                case 'language-not-supported':
                    lMsg = TradTextareaMax.SaisieVocale.LanguageNotSupported;
                    break;
                default:
                    lMsg = aMsg;
                }
                if (!!lMsg) {
                    Toast_1.Toast.afficher({
                        msg: lMsg,
                        type: Toast_1.ETypeToast.erreur
                    });
                }
                lInRecognition = false;
                IEHtml_1.default.refresh();
            };
            if (!lModele) {}
            if (lModele) {
                const lInfosGetOptions = aOutils.getAccesParametresModel('getOptions', aContexteCourant);
                if (lInfosGetOptions && lInfosGetOptions.estFonction) {
                    Object.assign(lOptions, lInfosGetOptions.callback([lOptions, aContexteCourant.node]));
                }
            }
            let lIdMaxLength = '';
            let lHtmlWAIDescr = '';
            let lAvecCompteur = false;
            if (lMap.maxlength || lMap['ie-compteurmax']) {
                lAvecCompteur = true;
                lAvecMaxLength = true;
                lMaxLength = parseInt(lMap.maxlength || lMap['ie-compteurmax'], 10);
                if (lMaxLength > 0) {
                    lIdMaxLength = GUID_1.GUID.getId();
                    lHtmlWAIDescr = IE.jsx.str("span", {
                        id: lIdMaxLength,
                        class: Divers_css_1.StylesDivers.srOnly,
                        "aria-hidden": "true"
                    }, TradTextareaMax.XCaracteresMax_D.format(lMaxLength));
                }
                if (lMap['ie-compteurmax']) {
                    aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-compteurmax:"' + lMap['ie-compteurmax'] + '"');
                    aContexteCourant.node.removeAttribute('ie-compteurmax');
                    delete lMap['ie-compteurmax'];
                }
                if (lMap['ie-compteur']) {
                    aContexteCourant.node.removeAttribute('ie-compteur');
                    delete lMap['ie-compteurmax'];
                }
            } else if (lMap['ie-compteur'] !== undefined) {
                lAvecCompteur = true;
                aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-compteur');
                aContexteCourant.node.removeAttribute('ie-compteur');
                delete lMap['ie-compteur'];
            }
            if (lAvecCompteur) {
                const lCouleur = aContexteCourant.node.style.borderColor;
                if (lCouleur !== 'initial' && lCouleur !== '' && lCouleur !== '-moz-use-text-color' && lCouleur !== 'currentColor') {
                    lOptions.couleurBordure = lCouleur;
                }
            }
            if (!!ObjetSupport_1.Support.speechRecognition && !IE.estMobile) {
                try {
                    lSpeechRecognizer = new ObjetSupport_1.Support.speechRecognition();
                    lSpeechRecognizer.interimResults = true;
                    lSpeechRecognizer.lang = ((_a = global.GParametres) === null || _a === void 0 ? void 0 : _a.langue) || 'fr';
                    lSpeechRecognizer.onresult = function(event) {
                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            if (event.results[i].isFinal) {
                                lJTextArea.get(0).value += (lJTextArea.get(0).value !== '' ? ' ' : '') + event.results[i][0].transcript;
                                lInRecognition = false;
                                lJTextArea.trigger('change');
                                IEHtml_1.default.refresh();
                            }
                        }
                    }
                    ;
                    lSpeechRecognizer.onerror = function(event) {
                        lFLogSpeech(event.error);
                        IEHtml_1.default.refresh();
                    }
                    ;
                } catch (ex) {
                    lFLogSpeech(ex.error);
                    IEHtml_1.default.refresh();
                }
            }
            const lAvecWrapperCompteurMobile = lAvecCompteur && !!IE.estMobile;
            const lAvecWrapperCompteurEspace = !lAvecWrapperCompteurMobile && (lAvecCompteur || !!lSpeechRecognizer);
            const lEstAutoSize = lMap['ie-autoresize'] !== undefined || (IE.estMobile && !$(aContexteCourant.node).hasClass('ie-no-autoresize'));
            let H;
            if (lAvecWrapperCompteurMobile) {
                H = (IE.jsx.str("div", {
                    tabindex: "-1",
                    class: IEHtml_TextareaMax_css_1.StylesIEHtmlTextareaMax.textareamaxWrapper
                }, IE.jsx.str("textarea", {
                    class: IEHtml_TextareaMax_css_1.StylesIEHtmlTextareaMax.textareamax
                }), IE.jsx.str("span", {
                    class: "tam_counter character-counter",
                    "ie-display": () => !lEstNonEditable
                }), lHtmlWAIDescr));
            } else if (lAvecWrapperCompteurEspace) {
                H = (IE.jsx.str("div", {
                    tabindex: "-1",
                    class: IEHtml_TextareaMax_css_1.StylesIEHtmlTextareaMax.textareamaxWrapper
                }, IE.jsx.str("div", {
                    class: "textarea-style"
                }, IE.jsx.str("textarea", {
                    class: [Divers_css_1.StylesDivers.browserDefault, IEHtml_TextareaMax_css_1.StylesIEHtmlTextareaMax.textareamax]
                })), lAvecCompteur ? IE.jsx.str("div", {
                    class: [IEHtml_TextareaMax_css_1.StylesIEHtmlTextareaMax.tam_counter, (lSpeechRecognizer ? IEHtml_TextareaMax_css_1.StylesIEHtmlTextareaMax.tam_withspeech : ''), IEHtml_TextareaMax_css_1.StylesIEHtmlTextareaMax.textareaCounter],
                    style: 'display:none;' + (lEstAutoSize ? '' : ObjetStyle_2.GStyle.composeCouleurFond(lOptions.couleurFond) + ObjetStyle_2.GStyle.composeCouleurBordure(lOptions.couleurBordure, 1, lOptions.borduresZoneMax)) + (lOptions.heightCompteur ? 'height:' + lOptions.heightCompteur + ';' : '')
                }, IE.jsx.str("span", null)) : '', () => {
                    if (lSpeechRecognizer) {
                        const lNode = (aNode) => {
                            $(aNode).eventValidation( () => {
                                if (!lFuncEstNonEditable()) {
                                    if (!lInRecognition) {
                                        try {
                                            lSpeechRecognizer.start();
                                            lInRecognition = true;
                                            $(aNode).attr('class', 'icon_microphone');
                                        } catch (ex) {
                                            lFLogSpeech(ex.error);
                                        }
                                    } else {
                                        try {
                                            lSpeechRecognizer.stop();
                                            lInRecognition = false;
                                        } catch (ex) {
                                            lFLogSpeech(ex.error);
                                        }
                                    }
                                    IEHtml_1.default.refresh();
                                }
                            }
                            );
                        }
                        ;
                        const lGetAttr = () => {
                            return {
                                style: lInRecognition ? 'color:red' : null,
                                'aria-pressed': lInRecognition ? 'true' : 'false'
                            };
                        }
                        ;
                        return IE.jsx.str("div", {
                            class: "tam_speech textarea-counter"
                        }, IE.jsx.str("i", {
                            role: "button",
                            "ie-node": lNode,
                            "ie-attr": lGetAttr,
                            class: "small-icon icon_microphone AvecMain",
                            "ie-tooltiplabel": TradTextareaMax.SaisieVocale.CaptureAudio,
                            tabindex: "0"
                        }));
                    }
                    return '';
                }
                , lHtmlWAIDescr));
            } else {
                H = IE.jsx.str("textarea", {
                    class: IEHtml_TextareaMax_css_1.StylesIEHtmlTextareaMax.textareamax
                });
            }
            const lDivConteneur = ObjetHtml_1.GHtml.htmlToDOM(H);
            const lJConteneur = $(lDivConteneur);
            let lJConteneurTextarea = null;
            let lJConteneurMax = null;
            let lJLibelleMax = null;
            if (lAvecWrapperCompteurMobile) {
                lJTextArea = lJConteneur.children().first();
                lJLibelleMax = lJConteneur.children().eq(1);
                lJConteneurMax = lJLibelleMax;
            } else if (lAvecWrapperCompteurEspace) {
                lJConteneurTextarea = lJConteneur.children().first();
                lJTextArea = lJConteneurTextarea.children().first();
                if (lAvecCompteur) {
                    lJConteneurMax = lJConteneur.children().eq(1);
                    lJLibelleMax = lJConteneurMax.children().first();
                }
            } else {
                lJTextArea = lJConteneur;
            }
            for (llName in lMap) {
                try {
                    switch (llName) {
                    case 'ie-autoresize':
                        break;
                    case 'required':
                        lJTextArea.attr(llName, '');
                        break;
                    case 'id':
                    case 'readonly':
                    case 'disabled':
                    case 'placeholder':
                    case 'maxlength':
                    case 'ie-trim':
                    case 'ie-textbrut':
                        lJTextArea.attr(llName, lMap[llName]);
                        break;
                    case 'ie-idcont':
                        if (lAvecWrapperCompteurEspace || lAvecWrapperCompteurMobile) {
                            lJConteneur.attr('id', lMap[llName]);
                        }
                        break;
                    default:
                        if (llName.startsWith('aria-')) {
                            lJTextArea.attr(llName, lMap[llName]);
                        } else {
                            if (llName === 'class') {
                                lJConteneur.addClass(lMap[llName]);
                            } else {
                                lJConteneur.attr(llName, lMap[llName]);
                            }
                        }
                    }
                } catch (e) {}
            }
            if (lEstAutoSize) {
                lJConteneur.addClass('ie-autoresize');
                lJTextArea.attr('ie-autoresize', '');
            }
            if (lIdMaxLength && lHtmlWAIDescr) {
                const lAttrDesc = ((lJTextArea.attr('aria-describedby') || '') + ' ' + lIdMaxLength).trim();
                lJTextArea.attr('aria-describedby', lAttrDesc);
            }
            if (lAvecWrapperCompteurEspace || lAvecWrapperCompteurMobile) {
                if (aContexteCourant.data.$modeleValue || aContexteCourant.data.$modelObjectJSX) {
                    lContexteCourant = Object.assign({}, aContexteCourant);
                    lContexteCourant.node = lJTextArea.get(0);
                    aOutils.gererInputText(lContexteCourant, '');
                }
                if (lJLibelleMax && lJLibelleMax.length === 1) {
                    aOutils.surInjectionHtml(aContexteCourant, () => {
                        IEHtml_1.default.refresh();
                    }
                    );
                    aOutils.abonnerRefresh( () => {
                        const lValue = lJTextArea.get(0).value || '';
                        const lLongueur = lOptions.getCompteur ? lOptions.getCompteur(lValue) : lValue.length;
                        if (lLongueur !== lOptions.longueurTexte) {
                            lOptions.longueurTexte = lLongueur;
                            if (lAvecMaxLength) {
                                lJLibelleMax.get(0).innerHTML = ObjetChaine_1.GChaine.format(lOptions.libelleMax_dd, [lLongueur, lMaxLength]);
                                lJConteneurMax.css('color', lLongueur > lMaxLength * lOptions.pourcentageAvertissement ? lOptions.couleurTexteAvertissement : lOptions.couleurTexte);
                            } else {
                                lJLibelleMax.get(0).innerHTML = lLongueur + '';
                            }
                        }
                    }
                    , lJLibelleMax.get(0), aContexteCourant);
                }
            }
            const lFuncEstNonEditable = function() {
                return !!(lJTextArea.is(':disabled') || lJTextArea.prop('readonly'));
            };
            let lEstNonEditable = lFuncEstNonEditable();
            const lAppliquerDisabled = function() {
                if (lJConteneur.is('textarea')) {
                    return;
                }
                if (lEstNonEditable) {
                    lJConteneur.addClass('disabled');
                } else {
                    lJConteneur.removeClass('disabled');
                }
            };
            lAppliquerDisabled();
            if (lAvecWrapperCompteurEspace) {
                lJConteneur.css({
                    position: 'relative'
                });
                let lTimeoutFocusOut;
                lJConteneur.on({
                    'focusin': function() {
                        clearTimeout(lTimeoutFocusOut);
                        if (lFuncEstNonEditable()) {
                            return;
                        }
                        if (lJConteneurMax) {
                            lJConteneurMax.show();
                        }
                        if (lOptions.heightCompteur) {
                            lJConteneurTextarea.css('bottom', lOptions.heightCompteur);
                        }
                        IEHtml_1.default.refresh();
                    },
                    'focusout': function() {
                        if (lJConteneurMax) {
                            lJConteneurMax.hide();
                        }
                        lJConteneurTextarea.css('bottom', '0');
                        lTimeoutFocusOut = setTimeout( () => {
                            lJTextArea.trigger('focusout_TextareaMax');
                        }
                        , 0);
                    }
                });
            } else {
                (lAvecWrapperCompteurEspace || lAvecWrapperCompteurMobile ? lJConteneur : lJTextArea).on('focusout', () => {
                    lJTextArea.trigger('focusout_TextareaMax');
                }
                );
            }
            aOutils.abonnerRefresh( () => {
                if (lEstNonEditable !== lFuncEstNonEditable()) {
                    lEstNonEditable = !lEstNonEditable;
                    lAppliquerDisabled();
                }
                if (lAvecRefreshSelonTaille) {
                    lAvecRefreshSelonTaille();
                }
            }
            , lDivConteneur, aContexteCourant);
            aOutils.replaceNode(aContexteCourant.node, lDivConteneur);
            aContexteCourant.node = lDivConteneur;
            aOutils.addCommentaireDebug(lDivConteneur, 'ie-textareamax');
            return {
                node: aContexteCourant.node,
                avecCompileFils: lAvecWrapperCompteurMobile || lAvecWrapperCompteurEspace
            };
        }
        );
        const TradTextareaMax = ObjetTraduction_1.TraductionsModule.getModule('TextareaMax', {
            XCaracteresMax_D: '',
            SaisieVocale: {
                NoSpeech: '',
                Aborted: '',
                AudioCapture: '',
                Network: '',
                NotAllowed: '',
                ServiceNotAllowed: '',
                BadGrammar: '',
                LanguageNotSupported: '',
                CaptureAudio: ''
            }
        });
        exports.TradTextareaMax = TradTextareaMax;
    },
    fn: 'iehtml.textareamax.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesIEHtmlComposants = void 0;
        const tslib_1 = require("tslib");
        const IEHtml = require("IEHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetHint_1 = require("ObjetHint");
        require("IEHtml.Load.Src.js");
        require("IEHtml.ImgViewer.js");
        require("IEHtml.AutoResize.js");
        require("IEHtml.Collapsible.js");
        require("IEHtml.VisibilityObserver.js");
        require("IEHtml.ResizeObserver.js");
        require("IEHtml.Ripple.js");
        require("IEHtml.DraggableDroppable.js");
        require("IEHtml.ZoneNavigation.js");
        require("IEHtml.BtnImage.js");
        require("IEHtml.CheckboxRadio.js");
        require("IEHtml.Identite.js");
        require("IEHtml.Chips.js");
        require("IEHtml.Combo.js");
        require("IEHtml.Bouton.js");
        require("IEHtml.BtnSelecteur.js");
        require("IEHtml.ZoneDessin.js");
        require("IEHtml.SelecFile");
        require("IEHtml.TextareaMax");
        const Divers_css_1 = require("Divers.css");
        const Tooltip_1 = require("Tooltip");
        exports.StylesIEHtmlComposants = {
            ellipsisCancelTitle: 'ellipsisCancelTitle'
        };
        IEHtml.addAttribut('ie-node', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.abonneNodeEtNodeAfter(lInfos, null, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, `${aAttrName}="${lInfos.nomCommentaire || lValue}"`);
            return true;
        }
        );
        IEHtml.addAttribut('ie-nodeafter', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.abonneNodeEtNodeAfter(null, lInfos, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-nodeafter="' + (lInfos.nomCommentaire || lValue) + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-eventmap', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.estFuncJSX) {
                return true;
            }
            const lMap = lInfos.callback([aContexteCourant.node]);
            const lMapJQuery = {};
            Object.keys(lMap).forEach( (aKey) => {
                if (lMap[aKey]) {
                    lMapJQuery[aKey] = function(aEvent, ...aRest) {
                        return lMap[aKey].call(this, aEvent, this, ...aRest);
                    }
                    ;
                }
            }
            );
            const lKeys = Object.keys(lMapJQuery);
            if (lKeys.length > 0) {
                aOutils.surInjectionHtml(aContexteCourant, () => {
                    $(aContexteCourant.node).on(lMapJQuery);
                }
                );
            }
            aOutils.addCommentaireDebug(aContexteCourant.node, `${aAttrName}="${lKeys.join(', ')}"`);
            return true;
        }
        );
        IEHtml.addAttribut('ie-eventvalidation', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, () => {
                $(aContexteCourant.node).eventValidation( (aEvent) => {
                    lInfos.callback([aEvent, aContexteCourant.node, aContexteCourant]);
                }
                );
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, `${aAttrName}="${lInfos.nomCommentaire || lValue}"`);
            return true;
        }
        );
        IEHtml.addAttribut('ie-event', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            let lTab = lValue.split('->');
            if (lTab.length < 2) {
                return;
            }
            let lMethode;
            const lEvents = lTab[0].trim().split('-');
            let lSelecteur = null;
            lTab.shift();
            lMethode = lTab.join('->');
            if (lMethode.length > 2 && lMethode.charAt(0) === '{') {
                lTab = lMethode.split('}');
                if (lTab.length < 2) {
                    return;
                }
                const lNomSelecteur = lTab[0].slice(1);
                lTab.shift();
                lMethode = lTab.join('}');
                if (aContexteCourant.data && aContexteCourant.data[lNomSelecteur]) {
                    lSelecteur = aContexteCourant.data[lNomSelecteur];
                } else {
                    lSelecteur = lNomSelecteur;
                }
            }
            const lInfos = aOutils.getAccesParametres(lMethode, aAttrName, aContexteCourant);
            if (!lInfos.valide || !lInfos.estFonction) {
                return;
            }
            if (lInfos) {
                const lCallbackEvent = function(aEvent) {
                    return lInfos.callback([aEvent, this, aContexteCourant.node, aContexteCourant.data]);
                };
                if (lSelecteur) {
                    $(aContexteCourant.node).on(lEvents.join(' '), lSelecteur, {
                        controleur: aContexteCourant.controleur
                    }, lCallbackEvent);
                } else {
                    $(aContexteCourant.node).on(lEvents.join(' '), {
                        controleur: aContexteCourant.controleur
                    }, lCallbackEvent);
                }
                aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-event="' + lValue + '"');
                return true;
            } else {
                aOutils.addCommentaireDebug(aContexteCourant.node, '[ECHEC] ie-event="' + lValue + '"');
            }
            return true;
        }
        );
        IEHtml.addAttribut('ie-eventout', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, () => {
                const lSelec = 'pointerdown.eventout keydown.eventout';
                function _event(aEvent, ...aParams) {
                    if (aContexteCourant.node !== aEvent.target && (aEvent.isTrigger || !ObjetHtml_1.GHtml.estDocument(aEvent.target)) && !$.contains(aContexteCourant.node, aEvent.target)) {
                        const lResult = lInfos.callback([aEvent, aContexteCourant.node]);
                        if (lResult && lResult.nodesExclus && lResult.callback) {
                            if (!lResult.nodesExclus.every || lResult.nodesExclus.every( (aNode) => {
                                return !aNode || (aNode !== aEvent.target && !$.contains(aNode, aEvent.target));
                            }
                            )) {
                                lResult.callback();
                            }
                        }
                    }
                }
                $(aContexteCourant.node).on('destroyed', () => {
                    $(document).off(lSelec, _event);
                }
                );
                $(document).on(lSelec, _event);
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-eventout="' + (lInfos.nomCommentaire || lValue) + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-title', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            let lNom = aAttributValue || '';
            let lCommValue = lNom;
            let lGetter;
            let lOldValue = lNom;
            if (lNom) {
                const lInfos = aOutils.getAccesParametres(lNom, aAttrName, aContexteCourant, aOutils.TypeAccesParametres.default, true);
                if (lInfos.estFonction) {
                    lCommValue = lInfos.nomCommentaire;
                    lGetter = function() {
                        const lResult = (lInfos.callback([aContexteCourant.node, aContexteCourant.data]) || '') + '';
                        return lResult.replace && ObjetChaine_1.GChaine && ObjetChaine_1.GChaine.enleverEntites ? ObjetChaine_1.GChaine.enleverEntites(lResult) : '';
                    }
                    ;
                }
            }
            if (lGetter) {
                lOldValue = lGetter();
            } else if (lOldValue === 'undefined' || lOldValue === 'null') {
                return false;
            } else {}
            $(aContexteCourant.node).attr('title', lOldValue);
            if (lGetter) {
                aOutils.abonnerRefresh( () => {
                    const lValue = lGetter().toString();
                    if (lOldValue !== lValue) {
                        lOldValue = lValue;
                        $(aContexteCourant.node).attr('title', lOldValue);
                    }
                }
                , aContexteCourant.node, aContexteCourant);
            }
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-title' + (lNom ? '="' + lCommValue + '"' : ''));
            return true;
        }
        );
        IEHtml.addAttribut('ie-hint', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            if (ObjetHint_1.ObjetHint.getDisabled()) {
                aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-hint (dsactiv sur mobile !)');
                return true;
            }
            const lNom = aAttributValue || '';
            let lCommValue = lNom;
            let lValue = lNom;
            if (lValue && lValue.length > 2 && lValue.charAt(0) === '\'' && lValue.charAt(lValue.length - 1) === '\'') {
                lValue = lValue.slice(1, lValue.length - 1);
            } else if (lNom) {
                const lInfos = aOutils.getAccesParametres(lNom, aAttrName, aContexteCourant, aOutils.TypeAccesParametres.default, true);
                if (lInfos.estFonction) {
                    lCommValue = lInfos.nomCommentaire || lNom;
                    lValue = function(aHint) {
                        const lResult = lInfos.callback([aHint, aContexteCourant.node, aContexteCourant.data]);
                        if (lResult && lResult.then) {
                            return lResult;
                        }
                        return (lResult || '') + '';
                    }
                    ;
                }
            }
            if (!lValue) {
                return true;
            }
            ObjetHint_1.ObjetHint.attach({
                $Element: $(aContexteCourant.node),
                namespace: 'iehint',
                contenu: lValue,
                off: false
            });
            aContexteCourant.node.dataset.avecIeHint = 'true';
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-hint' + (lCommValue ? '="' + lCommValue + '"' : ''));
            return true;
        }
        );
        IEHtml.addAttribut('ie-html', (aContexteCourant, aNodeName, aAttributValue, aOutils, aParametresCompile, aAttrName) => {
            let lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.valide) {
                return true;
            }
            const lNodeDestination = aOutils.addGetterHtml(aContexteCourant, lInfos);
            if (!lNodeDestination) {
                return;
            }
            aOutils.addCommentaireDebug(lNodeDestination, `${aAttrName}="${lInfos.nomCommentaire || lValue}"`);
            aParametresCompile.avecCompileFils = false;
            return true;
        }
        );
        IEHtml.addAttribut('ie-texte', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.valide) {
                return true;
            }
            const lNodeDestination = aContexteCourant.nodeTransfertContenuDynamique || aContexteCourant.node;
            const lGetter = function() {
                const lResult = lInfos.callback([aContexteCourant.node, lNodeDestination, aContexteCourant.data]);
                if (MethodesObjet_1.MethodesObjet.isNumber(lResult)) {
                    return lResult + '';
                }
                return (lResult || '') + '';
            };
            let lOldTexte = lGetter();
            $(lNodeDestination).ieHtml('');
            lNodeDestination.appendChild(document.createTextNode(lOldTexte));
            aOutils.abonnerRefresh( () => {
                const lTexte = lGetter();
                if (lTexte !== lOldTexte) {
                    lOldTexte = lTexte;
                    $(lNodeDestination).ieHtml('');
                    lNodeDestination.appendChild(document.createTextNode(lTexte));
                }
            }
            , lNodeDestination, aContexteCourant);
            aOutils.addCommentaireDebug(lNodeDestination, 'ie-texte="' + (lInfos.nomCommentaire || lValue) + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-style', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            let lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.valide || !lInfos.estFonction) {
                return true;
            }
            const lGetter = function() {
                const lStyle = lInfos.callback([aContexteCourant.node, aContexteCourant.data]) || null;
                return lStyle || {};
            };
            let lObjetCss = lGetter();
            const lJNode = $(aContexteCourant.node);
            if (!lObjetCss) {
                return;
            }
            lJNode.css(lObjetCss);
            aOutils.abonnerRefresh( () => {
                const lNewStyleCss = lGetter();
                if (!MethodesObjet_1.MethodesObjet.objetsIdentiques(lNewStyleCss, lObjetCss)) {
                    lObjetCss = lNewStyleCss;
                    $(aContexteCourant.node).css(lObjetCss);
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-style="' + (lInfos.nomCommentaire || lValue) + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-class', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.valide) {
                return true;
            }
            const lGetter = () => {
                return lInfos.callback([aContexteCourant.node]) || '';
            }
            ;
            let lClassCss = lGetter();
            if (lClassCss.length > 0) {
                $(aContexteCourant.node).addClass(lClassCss);
            }
            aOutils.abonnerRefresh( () => {
                const lNewClassCss = lGetter();
                if (lNewClassCss !== lClassCss) {
                    $(aContexteCourant.node).removeClass(lClassCss).addClass(lNewClassCss);
                    lClassCss = lNewClassCss;
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, `${aAttrName}="${lInfos.nomCommentaire || lValue}"`);
            return true;
        }
        );
        IEHtml.addAttribut('ie-display', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.valide) {
                return true;
            }
            const lGetter = function() {
                return !!lInfos.callback([aContexteCourant.node, aContexteCourant.data]);
            };
            const lDisplay = lGetter();
            ObjetHtml_1.GHtml.setDisplay(aContexteCourant.node, lDisplay);
            let lOldDisplayValue = lDisplay;
            aOutils.abonnerRefresh( () => {
                const lDisplay = lGetter();
                if (lDisplay !== lOldDisplayValue) {
                    lOldDisplayValue = lDisplay;
                    ObjetHtml_1.GHtml.setDisplay(aContexteCourant.node, lDisplay);
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-display="' + (lInfos.nomCommentaire || lValue) + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-attr', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aAttrName, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            const lGetter = () => {
                return lInfos.callback([aContexteCourant.node]);
            }
            ;
            let lAttr = MethodesObjet_1.MethodesObjet.dupliquer(lGetter());
            if (lAttr) {
                $(aContexteCourant.node).attr(lAttr);
            }
            aOutils.abonnerRefresh( () => {
                const lNewAttr = lGetter();
                if (!MethodesObjet_1.MethodesObjet.objetsIdentiques(lNewAttr, lAttr)) {
                    lAttr = MethodesObjet_1.MethodesObjet.dupliquer(lNewAttr);
                    $(aContexteCourant.node).attr(lAttr);
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, `${aAttrName}="${lInfos.nomCommentaire || lValue}"`);
            return true;
        }
        );
        function _initEllipsis(aContexteCourant, aOutils, aAttributValue, aAttrName) {
            $(aContexteCourant.node).addClass('ie-ellipsis');
            if (!aContexteCourant.node.hasAttribute(Tooltip_1.Tooltip.attrType) && !aContexteCourant.node.hasAttribute(Tooltip_1.Tooltip.attrDisabled)) {
                aContexteCourant.node.setAttribute(Tooltip_1.Tooltip.attrType, Tooltip_1.Tooltip.Type.ellipsis);
            }
        }
        IEHtml.addAttribut('ie-ellipsis', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            _initEllipsis(aContexteCourant, aOutils, aAttributValue, aAttrName);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-ellipsis');
            return true;
        }
        );
        IEHtml.addAttribut('ie-ellipsis-fixe', (aContexteCourant, aNodeName, aAttributValue, aOutils, aComp, aAttrName) => {
            _initEllipsis(aContexteCourant, aOutils, aAttributValue, aAttrName);
            aOutils.surInjectionHtml(aContexteCourant, (aParams) => {
                let lWidth = null;
                aParams.addMeasure( () => {
                    if (!aContexteCourant.node.style.width) {
                        lWidth = $(aContexteCourant.node).width();
                    }
                }
                );
                aParams.addMutate( () => {
                    if (lWidth !== null) {
                        $(aContexteCourant.node).width(Math.ceil(lWidth));
                    }
                }
                );
            }
            , true);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-ellipsis-fixe');
            return true;
        }
        );
        IEHtml.addClass(Divers_css_1.StylesDivers.ellipsisMultilignes, (aContexteCourant, aNodeName, aOutils) => {
            var _a;
            if (!aContexteCourant.node.hasAttribute('title') && !aContexteCourant.node.hasAttribute(Tooltip_1.Tooltip.attrType) && !((_a = aContexteCourant.node.classList) === null || _a === void 0 ? void 0 : _a.contains(exports.StylesIEHtmlComposants.ellipsisCancelTitle))) {
                aOutils.surInjectionHtml(aContexteCourant, (aParams) => {
                    const lText = $(aContexteCourant.node).text();
                    if (!lText) {
                        return;
                    }
                    let lAvecOverflow = false;
                    aParams.addMeasure( () => {
                        lAvecOverflow = aContexteCourant.node.clientHeight > 0 && aContexteCourant.node.scrollHeight > aContexteCourant.node.clientHeight;
                    }
                    );
                    aParams.addMutate( () => {
                        if (lAvecOverflow) {
                            aOutils.addCommentaireDebug(aContexteCourant.node, `tooltip ajout par "${Divers_css_1.StylesDivers.ellipsisMultilignes}"`);
                            aContexteCourant.node.setAttribute(Tooltip_1.Tooltip.attrType, Tooltip_1.Tooltip.Type.default);
                            aContexteCourant.node.setAttribute(Tooltip_1.Tooltip.attrText, lText);
                        }
                    }
                    );
                }
                );
            }
            return true;
        }
        );
        IEHtml.addAttribut('ie-selecttextfocus', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            if (aNodeName !== 'input' && aNodeName !== 'textarea') {
                return true;
            }
            $(aContexteCourant.node).on({
                'focus': function() {
                    if (this.select) {
                        this.select();
                    }
                },
                'mouseup': function(e) {
                    e.preventDefault();
                }
            });
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-selecttextfocus');
            return true;
        }
        );
        IEHtml.addClass('img-portrait', (aContexteCourant, aNodeName, aOutils) => {
            if (aNodeName === 'img') {
                const lSetSrcPortrait = () => {
                    var _a;
                    aContexteCourant.node.setAttribute('src', c_srcPortrait);
                    aContexteCourant.node.classList.add('img-portrait-empty');
                    (_a = aOutils.getObject('ie-imgviewer')) === null || _a === void 0 ? void 0 : _a.detachViewer(aContexteCourant.node);
                }
                ;
                const lUtils = IEHtml.outils.getObject('ie-load-src');
                if (lUtils) {
                    if (lUtils.imgWithoutSrc(aContexteCourant.node)) {
                        lSetSrcPortrait();
                        aOutils.addCommentaireDebug(aContexteCourant.node, `img-portrait, ajout src ${c_srcPortrait}`);
                    } else if (aContexteCourant.node.hasAttribute('src') && aContexteCourant.node.getAttribute('src') !== c_srcPortrait && lUtils.imgWithoutLoadSrc(aContexteCourant.node)) {
                        $(aContexteCourant.node).one('error', function() {
                            lSetSrcPortrait();
                        });
                    }
                }
            }
            return true;
        }
        );
        const c_srcPortrait = 'FichiersRessource/PortraitSilhouette.png';
        IEHtml.outils.addObject('img-portrait', {
            srcPortrait: c_srcPortrait
        });
        IEHtml.addClass(Divers_css_1.StylesDivers.tinyView, (aContexteCourant, aNodeName) => {
            $(aContexteCourant.node).find('*[style]').each(function() {
                var _a;
                if (((_a = this.style) === null || _a === void 0 ? void 0 : _a.position) === 'fixed') {
                    this.style.position = 'static';
                }
            });
            return true;
        }
        );
        tslib_1.__exportStar(require("IEHtml"), exports);
    },
    fn: 'iehtmlcomposants.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("fonts.css");
    },
    fn: 'declarationindexfont.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("lottie-player");
    },
    fn: 'declarationlottie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.LottiePatience = void 0;
        const GUID_1 = require("GUID");
        require("DeclarationLottie");
        class LottiePatience {
            static construire() {
                if (LottiePatience.url) {
                    return IE.jsx.str("lottie-player", {
                        src: LottiePatience.url,
                        class: "lottie-patience",
                        background: "transparent",
                        "aria-hidden": "true",
                        autoplay: true,
                        loop: true
                    });
                }
                ;return '';
            }
            static setUrl(aUrlLottie) {
                LottiePatience.url = aUrlLottie;
            }
        }
        exports.LottiePatience = LottiePatience;
        LottiePatience.url = '';
        $(window).on('load', () => {
            const lGuid = GUID_1.GUID.getId();
            setTimeout( () => {
                if (LottiePatience.url) {
                    $(document.body).append(IE.jsx.str("div", {
                        id: lGuid,
                        style: "display:none; position:absolute; left: -1000px; width: 0px;"
                    }, LottiePatience.construire()));
                    $(`#${lGuid}`).remove();
                }
            }
            , 5000);
        }
        );
    },
    fn: 'lottiepatience.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetMessageInformatif = void 0;
        require("ObjetMessageInformatif.module.css");
        exports.StylesObjetMessageInformatif = {
            content: 'ObjetMessageInforma-content-236e479f',
            progress: 'ObjetMessageInforma-progress-ac383dcb',
            detailMessage: 'ObjetMessageInforma-detail-message-b2089a21',
            overlay: 'ObjetMessageInforma-overlay-d70311ec'
        };
    },
    fn: 'objetmessageinformatif.module.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetMessageInformatif = void 0;
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const LottiePatience_1 = require("LottiePatience");
        const ObjetMessageInformatif_module_css_1 = require("ObjetMessageInformatif.module.css");
        let u_windowOK = false;
        $(window).on('load', () => {
            u_windowOK = true;
        }
        );
        class ObjetMessageInformatif {
            constructor() {
                this.Nom = GUID_1.GUID.getId();
                this.locked = false;
                this.DetailMessageInformatif = '';
                this.IdBarre = this.Nom + '_BarreProgression';
                this.IdDetailMessageInformatif = this.Nom + '_DetailMessageInformatif';
                this.IdMessageInformatif = this.Nom + '_DetailMessage';
                this.compteurBlocage = 0;
                if (u_windowOK) {
                    this.init();
                } else {
                    $(window).on('load', () => {
                        this.init();
                    }
                    );
                }
            }
            init() {
                if (!IE || !Invocateur_1.Invocateur || !ObjetHtml_1.GHtml) {
                    return;
                }
                IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(this.Nom, 2000);
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.eventIOAjax, this._surEventIOAjax.bind(this));
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.patience, this._surPatience.bind(this));
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.erreurCommunication, () => {
                    this.debloquer(true);
                    this.masquer();
                }
                );
                const lThis = this;
                $(window).on('resize', () => {
                    if (lThis.EnAffichage) {
                        lThis._positionner();
                    }
                }
                );
            }
            setDonnees(aMessage, aAvecBarreDeProgression, ANbElmtsTotal, ANbElmtsTraites, aParams) {
                this.AvecBarreDeProgression = aAvecBarreDeProgression;
                this.DetailMessageInformatif = aMessage;
                this.NbElmtsTotal = ANbElmtsTotal;
                this.NbElmtsTraites = (ANbElmtsTraites ? ANbElmtsTraites : 0) - 1;
                const lTraduction = ObjetTraduction_1.GTraductions ? ObjetTraduction_1.GTraductions.getValeur('connexion.MessageVeuillezPatienter') : '';
                this.afficher(lTraduction, null, true, null, aParams);
                if (this.AvecBarreDeProgression) {
                    this.locked = true;
                    this.progresser();
                }
            }
            afficher(aMessage, aDuree, aBloquer, aDetailMessageInformatif, aParams) {
                this.compteurBlocage += 1;
                this._arreterTimerAffichage();
                if (!this.locked) {
                    this.message = aMessage;
                    this.duree = aDuree;
                    this.bloquer = aBloquer;
                    if (this.bloquer && this.compteurBlocage === 1) {
                        this._bloquerInterface();
                    }
                    this._afficherContenu(aMessage, aDuree, aDetailMessageInformatif, aParams);
                }
            }
            bloquerAfficherAvecDelai(aMessage, aDelaiAffichage, aDetailMessageInformatif, aParams) {
                this.compteurBlocage += 1;
                this._arreterTimerAffichage();
                if (!this.locked) {
                    this.message = aMessage;
                    this.duree = null;
                    this.bloquer = true;
                    if (this.compteurBlocage === 1) {
                        this._bloquerInterface();
                    }
                    if (this.EnAffichage) {
                        this._afficherContenu(aMessage, null, aDetailMessageInformatif, aParams);
                    } else {
                        const lDelaiAffichage = !IE.estMobile && aDelaiAffichage ? aDelaiAffichage : 0;
                        this._timerAffichage = setTimeout(this._afficherContenu.bind(this, aMessage, null, aDetailMessageInformatif, aParams), lDelaiAffichage);
                    }
                }
            }
            masquer() {
                this.compteurBlocage = Math.max(0, this.compteurBlocage - 1);
                if (this.compteurBlocage > 0) {
                    return;
                }
                this._arreterTimerAffichage();
                if (!this.locked) {
                    ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
                    ObjetHtml_1.GHtml.setHtml(this.Nom, '');
                    this.DetailMessageInformatif = '';
                    if (this.bloquer && this.guidBlocage) {
                        try {
                            GestionnaireModale_1.GestionnaireModale.bloquerInterface({
                                bloquer: false,
                                avecVoile: false,
                                guidBlocage: this.guidBlocage
                            });
                            this.guidBlocage = null;
                        } catch (E) {}
                    }
                    this.EnAffichage = false;
                }
            }
            masquerAvecLock() {
                this._arreterTimerAffichage();
                this.locked = false;
                this.masquer();
            }
            progresser(aParam) {
                this._arreterTimerAffichage();
                if (this.AvecBarreDeProgression && !aParam) {
                    this.NbElmtsTraites++;
                    if (this.NbElmtsTotal !== 0) {
                        const LPourcentage = (this.NbElmtsTraites * 100) / this.NbElmtsTotal;
                        ObjetHtml_1.GHtml.setHtml(this.IdBarre, this.construireBarre(LPourcentage));
                        ObjetHtml_1.GHtml.setHtml(this.IdDetailMessageInformatif, this.DetailMessageInformatif + ' ' + this.NbElmtsTraites + '/' + this.NbElmtsTotal);
                    }
                } else if (this.AvecBarreDeProgression && aParam && MethodesObjet_1.MethodesObjet.isObject(aParam)) {
                    this.NbElmtsTraites = aParam.progress.actualFile;
                    ObjetHtml_1.GHtml.setHtml(this.IdBarre, this.construireBarre(aParam.progress.percent));
                    ObjetHtml_1.GHtml.setHtml(this.IdDetailMessageInformatif, (aParam.message || this.DetailMessageInformatif) + ' ' + this.NbElmtsTraites + '/' + this.NbElmtsTotal);
                }
            }
            debloquer(aDebloquerForcer) {
                this._arreterTimerAffichage();
                const LPourcentage = (this.NbElmtsTraites * 100) / this.NbElmtsTotal;
                if (LPourcentage === 100 || aDebloquerForcer) {
                    this.AvecBarreDeProgression = false;
                    this.DetailMessageInformatif = '';
                    this.locked = false;
                }
            }
            construireBarre(APourcentage) {
                return IE.jsx.str("div", {
                    style: {
                        width: APourcentage + '%'
                    }
                });
            }
            setDetailMessageInformatif(AMessage) {
                this.DetailMessageInformatif = AMessage;
                ObjetHtml_1.GHtml.setHtml(this.IdDetailMessageInformatif, AMessage);
            }
            _arreterTimerAffichage() {
                if (this._timerAffichage) {
                    clearTimeout(this._timerAffichage);
                    delete this._timerAffichage;
                }
            }
            _afficherContenu(aMessage, aDuree, aDetailMessageInformatif, aParams) {
                this._arreterTimerAffichage();
                const lParams = Object.assign({
                    htmlPied: '',
                    controleur: null
                }, aParams);
                const lHtml = IE.jsx.str("div", null, IE.jsx.str(IE.jsx.fragment, null, IE.estMobile ? IE.jsx.str("div", {
                    class: ObjetMessageInformatif_module_css_1.StylesObjetMessageInformatif.overlay
                }) : '', IE.jsx.str("div", {
                    class: ObjetMessageInformatif_module_css_1.StylesObjetMessageInformatif.content
                }, IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                    id: this.IdMessageInformatif,
                    tabindex: "-1",
                    role: "alert"
                }, aMessage), LottiePatience_1.LottiePatience.construire(), IE.jsx.str("div", {
                    class: ObjetMessageInformatif_module_css_1.StylesObjetMessageInformatif.detailMessage,
                    id: this.IdDetailMessageInformatif
                }, aDetailMessageInformatif ? aDetailMessageInformatif : this.DetailMessageInformatif), this.AvecBarreDeProgression ? IE.jsx.str("div", {
                    id: this.IdBarre,
                    class: ObjetMessageInformatif_module_css_1.StylesObjetMessageInformatif.progress,
                    "aria-hidden": "true"
                }, this.construireBarre(0)) : '', lParams.htmlPied ? IE.jsx.str("div", null, lParams.htmlPied) : ''))));
                if (this.EnAffichage) {
                    clearInterval(this.Timer);
                }
                ObjetHtml_1.GHtml.setHtml(this.Nom, lHtml, {
                    controleur: lParams.controleur
                });
                try {
                    ObjetHtml_1.GHtml.setDisplay(this.Nom, true);
                    $(`#${this.Nom.escapeJQ()} .${ObjetMessageInformatif_module_css_1.StylesObjetMessageInformatif.content}`).finish().css('opacity', 0).animate({
                        opacity: 1
                    }, {
                        duration: 500
                    });
                    this._positionner();
                } catch (E) {
                    try {
                        document.getElementById(this.IdMessageInformatif).style.outlineWidth = '0px';
                    } catch (e) {}
                }
                this.EnAffichage = true;
                if (aDuree) {
                    this.Timer = setTimeout(this.masquer.bind(this), aDuree * 1000);
                }
            }
            _positionner() {
                ObjetPosition_1.GPosition.centrer(this.Nom);
            }
            _bloquerInterface() {
                try {
                    this.guidBlocage = GestionnaireModale_1.GestionnaireModale.bloquerInterface({
                        bloquer: true,
                        pourPatience: true,
                        avecVoile: false,
                        prioriteBlocage: GestionnaireModale_1.GestionnaireModale.TypePrioriteBlocageInterface.messageInformatif
                    });
                } catch (E) {}
            }
            _surEventIOAjax(aParametres) {
                if (aParametres.actualisation) {
                    if (this.EnAffichage && !this.locked) {
                        this.setDetailMessageInformatif(aParametres.message || '');
                    }
                    return;
                }
                if (aParametres.blocageDeconnexion === true) {
                    this.blocageDeconnexion = true;
                    this.compteurBlocage = 0;
                    this.debloquer(true);
                    this.masquer();
                    this.bloquerAfficherAvecDelai(ObjetTraduction_1.GTraductions.getValeur('requete.VeuillezPatienter'), 0, aParametres.message || '');
                    return;
                }
                if (aParametres.blocageDeconnexion === false) {
                    delete this.blocageDeconnexion;
                    this.masquer();
                    return;
                }
                if (this.blocageDeconnexion) {
                    return;
                }
                if (aParametres.emission) {
                    if (aParametres.upload) {
                        if (aParametres.nombreFichiers > 0 && aParametres.progress) {
                            if (aParametres.progress.personnalise) {
                                this.progresser(aParametres);
                            } else if (aParametres.progress.percent === 0) {
                                this.setDonnees(aParametres.message || ObjetTraduction_1.GTraductions.getValeur('requete.transfertPJ'), true, aParametres.nombreFichiers, aParametres.progress.actualFile, aParametres.params);
                            } else {
                                this.progresser(aParametres);
                            }
                        } else if (aParametres.nombreFichiers > 0) {
                            this.setDonnees(aParametres.message || ObjetTraduction_1.GTraductions.getValeur('requete.transfertPJ'), true, aParametres.nombreFichiers, null, aParametres.params);
                        } else {
                            this.progresser();
                        }
                    } else {
                        const lMessage = ObjetTraduction_1.GTraductions.getValeur('requete.VeuillezPatienter');
                        const lDetail = aParametres.message || '';
                        if (aParametres.delai === 0) {
                            this.afficher(lMessage, null, true, lDetail, aParametres.params);
                        } else {
                            this.bloquerAfficherAvecDelai(lMessage, aParametres.delai || 500, lDetail, aParametres.params);
                        }
                    }
                } else {
                    if (aParametres.upload) {
                        this.debloquer(aParametres.debloquerForcer);
                    }
                    this.masquer();
                }
            }
            _surPatience(aAfficher, aParametres) {
                const lParametres = Object.assign({
                    delai: 0,
                    message: ''
                }, aParametres);
                if (aAfficher) {
                    this.bloquerAfficherAvecDelai(ObjetTraduction_1.GTraductions.getValeur('requete.VeuillezPatienter'), lParametres.delai || 0, lParametres.message || '');
                } else {
                    this.masquer();
                }
            }
        }
        exports.ObjetMessageInformatif = ObjetMessageInformatif;
    },
    fn: 'objetmessageinformatif.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreAction = void 0;
        var EGenreAction;
        (function(EGenreAction) {
            EGenreAction[EGenreAction["Valider"] = 0] = "Valider";
            EGenreAction[EGenreAction["NePasValider"] = 1] = "NePasValider";
            EGenreAction[EGenreAction["Annuler"] = 2] = "Annuler";
        }
        )(EGenreAction || (exports.EGenreAction = EGenreAction = {}));
    },
    fn: 'enumere_action.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetInterface = void 0;
        require("ObjetInterface.css");
        exports.StylesObjetInterface = {
            interface_affV: 'interface_affV',
            interface_affV_padding: 'interface_affV_padding',
            interface_affV_client: 'interface_affV_client',
            div: 'div',
            layoutColsAvecEdition: 'layout-cols-avec-edition',
            btnConteneur: 'btn-conteneur',
            mainConteneur: 'main-conteneur',
            Timeline: 'Timeline',
            ObjetTimeline_column: 'ObjetTimeline_column',
            ObjetTimeline_Container: 'ObjetTimeline_Container',
            overflowAuto: 'overflow-auto',
            withFooter: 'with-footer',
            stopwithFooter: 'stopwith-footer',
            eInscriptions: 'e-inscriptions',
            noFooter: 'no-footer'
        };
    },
    fn: 'objetinterface.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EStructureAffichage = void 0;
        var EStructureAffichage;
        (function(EStructureAffichage) {
            EStructureAffichage[EStructureAffichage["Verticale"] = 1] = "Verticale";
            EStructureAffichage[EStructureAffichage["Autre"] = 3] = "Autre";
        }
        )(EStructureAffichage || (exports.EStructureAffichage = EStructureAffichage = {}));
    },
    fn: 'enumere_structureaffichage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetInterface = void 0;
        require("ObjetInterface.css");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_Event_1 = require("Enumere_Event");
        const Enumere_StructureAffichage_1 = require("Enumere_StructureAffichage");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetWAI_1 = require("ObjetWAI");
        const AccessApp_1 = require("AccessApp");
        class ObjetInterface extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.Instances = [];
                this.GenreAffichage = [];
                this.NombreGenreAffichage = 0;
                this._pileInfosFenetres = [];
                this._pileFenetre = [];
                this.EnConstruction = false;
                this.EtatIdCourant = true;
                this.reinitialiser();
                this.AvecCadre = true;
                this.GenreStructure = Enumere_StructureAffichage_1.EStructureAffichage.Verticale;
                this.IdentZoneAlClient = -1;
                this.AddSurZone = [];
                this.idPremierObjet = '';
                if (this.Nom && this.avecEventResizeNavigateur()) {
                    this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurResize, this._surResizeInterface);
                }
            }
            reinitialiser() {
                this.detruireInstancesFils();
                this.Instances = [];
                this.GenreAffichage = [];
                this.NombreGenreAffichage = 0;
                this._pileInfosFenetres = [];
            }
            focusSurPremierElement() {}
            focusSurPremierObjet() {
                if (this.idPremierObjet) {
                    ObjetHtml_1.GHtml.setFocus(this.idPremierObjet);
                } else {
                    IE.log.addLog('[' + MethodesObjet_1.MethodesObjet.getNomClassDeConstructeur(this.constructor) + '] Il est o mon premierobjet ?', '', IE.log.genre.Avertissement);
                }
            }
            addInstance(aParametres) {
                const lParametres = {
                    objet: null,
                    constructionFenetre: false,
                    evenement: null,
                    init: null,
                    ident: null,
                    traductions: null
                };
                $.extend(lParametres, aParametres);
                const lObjetGraphique = this.getObjetGraphique(lParametres.objet);
                if (!lObjetGraphique) {
                    IE.log.addLog('ObjetInterface.addInstance : "' + (lObjetGraphique ? lObjetGraphique.nom : lParametres.objet) + '" n"existe pas!', null, IE.log.genre.Avertissement);
                    return null;
                }
                if ((lParametres.ident !== null && lParametres.ident !== undefined)) {
                    this.NombreGenreAffichage = lParametres.ident;
                }
                this.GenreAffichage[this.NombreGenreAffichage] = lParametres.objet;
                if (lObjetGraphique) {
                    if (lParametres.constructionFenetre) {
                        this._pileInfosFenetres[this.NombreGenreAffichage] = ({
                            ident: this.NombreGenreAffichage,
                            genre: lParametres.objet,
                            evenement: lParametres.evenement,
                            init: lParametres.init,
                            traductions: lParametres.traductions,
                            coordonnees: {
                                left: 0,
                                top: 0
                            }
                        });
                    } else {
                        const lInstance = this._construireObjetGraphique(lObjetGraphique.constructeur, lObjetGraphique.nom, this.NombreGenreAffichage, lParametres.evenement);
                        this.Instances[this.NombreGenreAffichage] = lInstance;
                        if (lParametres.init) {
                            lParametres.init.call(this, lInstance);
                        }
                    }
                }
                return this.NombreGenreAffichage++;
            }
            getObjetGraphique(aConstructor) {
                if (aConstructor && MethodesObjet_1.MethodesObjet.isFunction(aConstructor)) {
                    const lInfosObjet = {
                        nom: 'NON IDENTIFIE',
                        estFenetre: aConstructor.prototype && aConstructor.prototype.estObjetGraphiqueFenetre(),
                        constructeur: aConstructor
                    };
                    return lInfosObjet;
                }
                return null;
            }
            add(aClassIdentite, AEvenement, AInitialiser, aTraductions, I) {
                return this.addInstance({
                    objet: aClassIdentite,
                    evenement: AEvenement,
                    init: AInitialiser,
                    traductions: aTraductions,
                    ident: I
                });
            }
            addFenetre(aClassFenetre, AEvenement, AInitialiser, aTraductions, I) {
                return this.addInstance({
                    objet: aClassFenetre,
                    constructionFenetre: true,
                    evenement: AEvenement,
                    init: AInitialiser,
                    traductions: aTraductions,
                    ident: I
                });
            }
            del() {
                this.Instances[this.NombreGenreAffichage] = null;
                this.NombreGenreAffichage--;
            }
            getInstance(AIdent) {
                let lInstance = this.Instances[AIdent];
                if (!this.Instances[AIdent] && this.getObjetGraphique(this.GenreAffichage[AIdent]) && this.getObjetGraphique(this.GenreAffichage[AIdent]).estFenetre && this._pileInfosFenetres[AIdent] && !this.__enCoursDeDestruction) {
                    lInstance = this.creerFenetre(AIdent);
                }
                return lInstance;
            }
            existeInstance(aIdent) {
                return !!this.Instances[aIdent];
            }
            creerFenetre(AIdent) {
                let lInstance;
                if (this._pileInfosFenetres[AIdent]) {
                    const lInfosFenetre = this._pileInfosFenetres[AIdent];
                    const lObjetGraphique = this.getObjetGraphique(lInfosFenetre.genre);
                    lInstance = this._construireObjetGraphique(lObjetGraphique.constructeur, lObjetGraphique.nom, AIdent, lInfosFenetre.evenement);
                    lInstance.destructionSurFermeture = true;
                    const lSelf = this;
                    lInstance.ajouterCallbackSurDestruction( () => {
                        if (AIdent !== undefined && lSelf.Instances[AIdent] && lSelf._pileInfosFenetres[AIdent]) {
                            lSelf.Instances[AIdent] = null;
                            const lIndice = lSelf._pileFenetre.indexOf(lSelf.getZoneId(AIdent));
                            if (lIndice >= 0) {
                                lSelf._pileFenetre[lIndice] = null;
                            }
                        }
                    }
                    );
                    if (!this._pileFenetre) {
                        this._pileFenetre = [];
                    }
                    this._pileFenetre.push(this.getZoneId(AIdent));
                    IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(this.getZoneId(AIdent), lInstance.getZIndex ? lInstance.getZIndex() : '');
                    if (lInfosFenetre.init) {
                        lInfosFenetre.init.call(this, lInstance);
                    }
                    lInstance.coordonnees = lInfosFenetre.coordonnees;
                    lInstance.initialiser();
                    this.Instances[AIdent] = lInstance;
                }
                return lInstance;
            }
            getNomInstance(AIdent) {
                return this.getInstance(AIdent) ? this.getInstance(AIdent).getNom() : '';
            }
            getInstanceParNom(aNom) {
                for (let I = 0; I < this.NombreGenreAffichage; I++) {
                    if (this.getNomInstance(I) === aNom) {
                        return this.getInstance(I);
                    }
                }
            }
            getZoneId(AIdent) {
                return this.construireNom(this.Nom + '.Instances', AIdent);
            }
            initialiser(aReset) {
                if (aReset) {
                    this.reinitialiser();
                }
                this.EnConstruction = true;
                try {
                    this.construireInstances();
                    this.setParametresGeneraux();
                    ObjetHtml_1.GHtml.setHtml(this.estRacine ? (0,
                    AccessApp_1.getApp)().getIdConteneur() : this.Nom, this._construireStructureAffichage(), {
                        instance: this
                    });
                    this.construireAffichage();
                } finally {
                    this.EnConstruction = false;
                }
                this.recupererDonnees();
                this.surResizeInterface();
                return this;
            }
            getEnConstruction() {
                return this.EnConstruction;
            }
            appartientAZone(AIdent) {
                for (let I = 0; I < this.AddSurZone.length; I++) {
                    const lElement = this.AddSurZone[I];
                    if ((lElement === AIdent && lElement !== '') || (lElement && lElement.ident === AIdent)) {
                        return true;
                    }
                }
                return false;
            }
            construireStructureAffichageVerticale(lFooter) {
                const H = [];
                let lInfo;
                H.push('<div class="interface_affV', (this.AvecCadre ? ' interface_affV_padding' : ''), (!!lFooter ? lFooter : ''), '" ', ObjetWAI_1.GObjetWAI.composeRole(ObjetWAI_1.EGenreRole.Presentation), '>');
                const lTabAffichages = [];
                for (let I = 0; I < this.NombreGenreAffichage; I++) {
                    if (!this.appartientAZone(I) && !this.getObjetGraphique(this.GenreAffichage[I]).estFenetre) {
                        lInfo = {
                            estZoneClient: this.IdentZoneAlClient === I,
                            indice: I
                        };
                        lTabAffichages.push(lInfo);
                    }
                }
                for (let I = 0; I < lTabAffichages.length; I++) {
                    lInfo = lTabAffichages[I];
                    H.push('<div id="' + this.getZoneId(lInfo.indice) + '"', (lInfo.estZoneClient ? ' class="interface_affV_client"' : ''), '></div>');
                }
                if (this.NombreGenreAffichage === 0) {
                    H.push('<div>' + this.composeMessage('') + '</div>');
                }
                H.push('</div>');
                return H.join('');
            }
            construireStructureAffichageAutre() {
                return '';
            }
            construireStructureFenetres() {
                this._effacerFenetres();
                const H = [];
                for (let I = 0; I < this.NombreGenreAffichage; I++) {
                    const lInstance = this.Instances[I];
                    if (this.getObjetGraphique(this.GenreAffichage[I]).estFenetre && lInstance) {
                        if (!this._pileFenetre) {
                            this._pileFenetre = [];
                        }
                        this._pileFenetre.push(this.getZoneId(I));
                        IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(this.getZoneId(I), lInstance && 'getZIndex'in lInstance && MethodesObjet_1.MethodesObjet.isFunction(lInstance.getZIndex) ? lInstance.getZIndex() : '');
                    }
                }
                return H.join('');
            }
            construireInstances() {}
            setParametresGeneraux() {}
            construireStructureAffichage() {
                const H = [];
                switch (this.GenreStructure) {
                case Enumere_StructureAffichage_1.EStructureAffichage.Verticale:
                    H.push(this.construireStructureAffichageVerticale());
                    break;
                default:
                    H.push(this.construireStructureAffichageAutre());
                    break;
                }
                if ((this.AddSurZone.length || this.avecBandeau)) {
                    this.construireStructureAffichageBandeau();
                }
                return H.join('');
            }
            construireStructureAffichageBandeau() {}
            construireAffichage() {
                for (let I = 0; I < this.NombreGenreAffichage; I++) {
                    if (this.Instances[I]) {
                        if (!this.getObjetGraphique(this.GenreAffichage[I]).estFenetre) {
                            this.Instances[I].setVisible(this.Instances[I].Visible);
                        }
                        this.Instances[I].initialiser();
                    }
                }
                return '';
            }
            recupererDonnees(...aParams) {}
            construireObjetGraphique(ANomObjet, AIdent, AEvenement) {
                const lObjetGraphique = this.getObjetGraphique(ANomObjet);
                return lObjetGraphique ? this._construireObjetGraphique(lObjetGraphique.constructeur, lObjetGraphique.nom, AIdent, AEvenement) : null;
            }
            setCallbackNavigation(aCallbackNavigation) {
                this._callbackNavigation = aCallbackNavigation;
            }
            actionSurValidation(...aParams) {
                if (this._callbackNavigation) {
                    this._callbackNavigation();
                    delete this._callbackNavigation;
                } else if (this.afficherPage) {
                    this.afficherPage(...aParams);
                } else {
                    this.recupererDonnees(...aParams);
                }
            }
            setIdCourant(AId) {
                if (this.EtatIdCourant && window.GEtatUtilisateur) {
                    window.GEtatUtilisateur.IdCourant = AId;
                }
            }
            getIdCourant() {
                return window.GEtatUtilisateur ? window.GEtatUtilisateur.IdCourant : null;
            }
            setFocusIdCourant() {
                ObjetHtml_1.GHtml.setFocus(this.getIdCourant());
            }
            setEtatIdCourant(ABool) {
                this.EtatIdCourant = ((ABool !== null && ABool !== undefined)) ? ABool : true;
            }
            _surResizeInterface() {
                this.surResizeInterface();
            }
            surResizeInterface() {}
            detruireInstancesFils() {
                this._effacerFenetres();
                super.detruireInstancesFils();
                const lNbr = this.Instances ? this.Instances.length : 0;
                let lInstance;
                for (let I = 0; I < lNbr; I++) {
                    lInstance = this.Instances[I];
                    if (lInstance && (!lInstance.isDestroyed || !lInstance.isDestroyed()) && lInstance.free) {
                        IE.log.addLog('detruireInstancesFils instance non detruite : ' + lInstance.getNom());
                        lInstance.free();
                    }
                    this.Instances[I] = null;
                }
            }
            _construireObjetGraphique(aConstructeur, aNom, aIdent, aEvenement) {
                IE.log.addLog('Interface Construire ' + aNom + ' (' + aIdent + ')', 'OBJETINTERFACE_LOGNOM');
                if (aConstructeur) {
                    return new aConstructeur({
                        nomObjet: 'Instances[' + aIdent + ']',
                        pere: this,
                        evenement: aEvenement
                    });
                }
                ;return null;
            }
            getPageImpression(AFormat) {
                return;
            }
            _construireStructureAffichage() {
                const H = [];
                H.push(this.construireStructureFenetres());
                H.push(this.construireStructureAffichage());
                return H.join('');
            }
            _effacerFenetres() {
                if (this._pileFenetre) {
                    this._pileFenetre = [];
                }
            }
        }
        exports.ObjetInterface = ObjetInterface;
    },
    fn: 'objetinterface.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports._ObjetFenetre = void 0;
        const ObjetInterface_1 = require("ObjetInterface");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const Enumere_StructureAffichage_1 = require("Enumere_StructureAffichage");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const MethodesTableau_1 = require("MethodesTableau");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const Invocateur_1 = require("Invocateur");
        const ToucheClavier_1 = require("ToucheClavier");
        class _ObjetFenetre extends ObjetInterface_1.ObjetInterface {
            constructor(aParams, ...aSuiteDeprecated) {
                super(aParams, ...aSuiteDeprecated);
                this._structureBoutons = [];
                this.__surDestructionApresFermeture_ = false;
                this.optionsFenetre = {
                    roleWAI: 'dialog',
                    listeBoutonsInvisibles: [],
                    opaciteVoileModale: GestionnaireModale_1.OpaciteVoileBloquant.default
                };
                this.EnAffichage = false;
                this.promise = null;
                this._promiseResolve = null;
                this.NomFenetre = this.Nom + '_Fenetre';
                this.idFenetreContenu = this.Nom + '_FenetreContenu';
                this.IdTitre = this.Nom + '_Titre';
                this.IdTitreImage = this.IdTitre + '_image';
                this.IdContenu = this.Nom + '_Contenu';
                this.IdPremierElement = this.NomFenetre;
                this.GenreStructure = Enumere_StructureAffichage_1.EStructureAffichage.Autre;
                this.optionsInterne = {
                    closeStart: () => {}
                    ,
                    closeEnd: async () => {}
                };
            }
            setOptionsFenetre(aOptions) {
                Object.assign(this.optionsFenetre, aOptions);
                this._structureBoutons = null;
                this.$refreshSelf();
                return this;
            }
            _getOptionsFenetre() {
                return this.optionsFenetre;
            }
            setBoutonActif(I, AActif) {
                if (this.optionsFenetre.listeBoutonsInactifs) {
                    this.optionsFenetre.listeBoutonsInactifs[I] = !AActif;
                    this.$refreshSelf();
                }
            }
            composeBoutons() {
                return '';
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    $off: function() {
                        return aInstance.estControleurOff();
                    },
                    listeBoutons() {
                        if (!aInstance._structureBoutons) {
                            aInstance._structureBoutons = [];
                            const T = aInstance._structureBoutons;
                            aInstance.optionsFenetre.listeBoutons.forEach( (aElement, aIndex) => {
                                const lElement = {
                                    index: null,
                                    libelle: null,
                                    theme: null,
                                    sansFermeture: null
                                };
                                if (typeof aElement === 'string') {
                                    lElement.libelle = aElement;
                                } else {
                                    Object.assign(lElement, aElement);
                                }
                                if (aElement) {
                                    lElement.index = aIndex;
                                    lElement.theme = lElement.theme ? lElement.theme : (lElement.libelle === ObjetTraduction_1.GTraductions.getValeur('Valider') ? Type_ThemeBouton_1.TypeThemeBouton.primaire : Type_ThemeBouton_1.TypeThemeBouton.secondaire);
                                    lElement.sansFermeture = lElement.sansFermeture ? lElement.sansFermeture : false;
                                    T.push(lElement);
                                }
                            }
                            );
                        }
                        return aInstance._structureBoutons || [];
                    },
                    fenetreBtn: {
                        event(aBoutonRepeat) {
                            aInstance.surValidation(aBoutonRepeat.element.index);
                        },
                        getLibelle(aBoutonRepeat) {
                            return aBoutonRepeat.element.libelle;
                        },
                        getDisabled(aBoutonRepeat) {
                            if (aBoutonRepeat.element.getDisabled) {
                                return aBoutonRepeat.element.getDisabled();
                            }
                            return aInstance.optionsFenetre.listeBoutonsInactifs && aInstance.optionsFenetre.listeBoutonsInactifs[aBoutonRepeat.element.index] === true;
                        },
                        getOptions(aBoutonRepeat) {
                            if (MethodesObjet_1.MethodesObjet.isObject(aBoutonRepeat.element.options)) {
                                return aBoutonRepeat.element.options;
                            }
                        }
                    }
                });
            }
            composeContenu() {
                return '';
            }
            jsxNodeCreationNodeFenetre(aNode) {
                const lInstance = this;
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.fermerFenetres, this);
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.fermerFenetres, (aForcer) => {
                    if (aForcer || this.optionsFenetre.avecAbonnementFermetureFenetreGenerale) {
                        this.fermer();
                    }
                }
                );
                $(aNode).on({
                    'keyup'(aEvent) {
                        if (aEvent.which === ToucheClavier_1.ToucheClavier.Echap) {
                            lInstance.eventSurCroixFermeture();
                        }
                    },
                    'pointerdown'() {
                        if (!IE.estMobile) {
                            GestionnaireModale_1.GestionnaireModale.enPremierPlan(lInstance.getNom());
                        }
                    }
                });
            }
            focusSurPremierElement() {
                if (ObjetHtml_1.GHtml.elementExiste(this.IdTitre)) {
                    ObjetHtml_1.GHtml.setFocus(this.IdTitre);
                    return;
                }
                this.focusSurPemierOuDernierElement(false);
            }
            focusSurPemierOuDernierElement(aDernierElementFocus) {
                var _a;
                const lTab = ObjetHtml_1.GHtml.getElementsFocusablesDElement(this.NomFenetre, {
                    avecTabindexNegatif: false
                });
                if (lTab.length > 0) {
                    const lNode = aDernierElementFocus ? lTab[lTab.length - 1] : lTab[0];
                    (_a = lNode === null || lNode === void 0 ? void 0 : lNode.focus) === null || _a === void 0 ? void 0 : _a.call(lNode);
                    let lFocusReussi = true;
                    try {
                        lFocusReussi = !!lNode && document.activeElement === lNode;
                    } catch (e) {}
                    if (lFocusReussi) {
                        return;
                    }
                }
                if (ObjetHtml_1.GHtml.elementExiste(this.IdTitre)) {
                    ObjetHtml_1.GHtml.setFocus(this.IdTitre);
                } else {}
            }
            jsxNodeFocusSurPremierOuDernierElement(aPrecedent, aNode) {
                $(aNode).on('focus', () => {
                    this.focusSurPemierOuDernierElement(aPrecedent);
                }
                );
            }
            getBoutonNumero(aNumeroBouton) {
                let lBouton = {};
                if (this.optionsFenetre.listeBoutons) {
                    const lBoutonFenetre = this.optionsFenetre.listeBoutons[aNumeroBouton];
                    if (typeof lBoutonFenetre === 'string') {
                        lBouton = {
                            libelle: lBoutonFenetre
                        };
                    } else {
                        lBouton = lBoutonFenetre;
                    }
                }
                return lBouton || {
                    annuler: true
                };
            }
            setBoutonVisible(I, aVisible) {
                this.optionsFenetre.listeBoutonsInvisibles[I] = !aVisible;
                this.$refreshSelf();
            }
            getParametresValidation(aNumeroBouton) {
                const lParametres = {
                    instance: this,
                    bouton: this.getBoutonNumero(aNumeroBouton),
                    numeroBouton: aNumeroBouton
                };
                if (MethodesObjet_1.MethodesObjet.isFunction(this.optionsFenetre.addParametresValidation)) {
                    Object.assign(lParametres, this.optionsFenetre.addParametresValidation.call(this.Pere, lParametres));
                }
                return lParametres;
            }
            promiseResolve(aParams) {
                if (this._promiseResolve) {
                    this._promiseResolve(aParams);
                    this._promiseResolve = null;
                }
            }
            surValidation(ANumeroBouton) {
                const lParams = this.getParametresValidation(ANumeroBouton);
                this.promiseResolve(lParams);
                if (this.optionsFenetre.surValiderAvantFermer) {
                    this.optionsFenetre.surValiderAvantFermer.call(this.Pere, lParams);
                }
                if (!lParams || !lParams.bouton || typeof lParams.bouton !== 'object' || !lParams.bouton.sansFermeture) {
                    this.fermer();
                }
                if (this.optionsFenetre.callback) {
                    this.optionsFenetre.callback.call(this.Pere, ANumeroBouton, lParams);
                }
                this.callback.appel(ANumeroBouton, lParams);
            }
            async fermer(aSurInteractionUtilisateur) {
                if (!this.estAffiche()) {
                    return Promise.resolve();
                }
                this.optionsInterne.closeStart();
                try {
                    if (this._focusPrecedent && $(this._focusPrecedent).length === 1) {
                        if (ObjetHtml_1.GHtml.focusEstDansElement(this.Nom)) {
                            $(this._focusPrecedent).focus();
                        }
                        this._focusPrecedent = null;
                    }
                } catch (e) {}
                this.EnAffichage = false;
                if (this.surFermer) {
                    this.surFermer();
                }
                if (MethodesObjet_1.MethodesObjet.isFunction(this.optionsFenetre.callbackFermer)) {
                    this.optionsFenetre.callbackFermer();
                }
                if (MethodesObjet_1.MethodesObjet.isFunction(this.optionsFenetre.callbackApresFermer)) {
                    this.optionsFenetre.callbackApresFermer();
                }
                this.promiseResolve({
                    surFermer: true
                });
                this.$refresh();
                const lResultPromise = this.optionsInterne.closeEnd();
                const lFunc = () => {
                    ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
                    if (this.destructionSurFermeture && !this.__enCoursDeDestruction) {
                        this.__surDestructionApresFermeture_ = true;
                        this.free();
                    }
                }
                ;
                if (lResultPromise && lResultPromise.then) {
                    return lResultPromise.then(lFunc);
                }
                lFunc();
                return Promise.resolve();
            }
            async afficher(...aParams) {
                return;
            }
            surAfficher() {}
            actualiser() {}
            surFermer() {}
            estAffiche() {
                return this.EnAffichage === true;
            }
            jsxModeleBoutonCroixFermeture() {
                return {
                    event: () => {
                        this.eventSurCroixFermeture();
                    }
                };
            }
            eventSurCroixFermeture() {
                this.surValidation(this.optionsFenetre.indiceCroixFermeture);
            }
            setBoutonFocus(aVal, avecDecalageFocus) {
                let lIndice = aVal;
                if (MethodesObjet_1.MethodesObjet.isObject(aVal)) {
                    lIndice = MethodesTableau_1.MethodesTableau.indexOfMask(this.optionsFenetre.listeBoutons, aVal);
                }
                if (lIndice >= 0) {
                    ObjetHtml_1.GHtml.setFocus(this._getIdBoutons(lIndice), true, avecDecalageFocus);
                }
                return this;
            }
            composeBas() {
                return this.optionsFenetre.htmlFooter || '';
            }
            positionnerFenetre(aParams) {
                return this;
            }
            existeCoordonnees() {
                return false;
            }
            setCoordonnees() {}
            positionnerSousId(aId) {}
            surFixerTaille() {}
            _getIdBoutons(aIndice) {
                return this.Nom + '_btns_' + aIndice;
            }
            setBoutonLibelle(I, aLibelle) {}
            debutRetaillage() {}
            finRetaillage() {}
            getHeightMaxIdSelonEcran(aId) {
                return 0;
            }
            estObjetGraphiqueFenetre() {
                return true;
            }
            construireBouton(aBoutonRepeat, aMargin) {
                return '';
            }
            getDragFenetre() {
                return null;
            }
            estControleurOff() {
                return !this.EnAffichage;
            }
            initAfficher(aParametres) {
                var _a;
                this.destructionSurFermeture = (_a = aParametres === null || aParametres === void 0 ? void 0 : aParametres.destructionSurFermeture) !== null && _a !== void 0 ? _a : true;
                IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(this.getNom(), this.getZIndex ? this.getZIndex() : 1100);
                $('#' + this.getNom().escapeJQ()).on('destroyed', () => {
                    var _a;
                    (_a = aParametres === null || aParametres === void 0 ? void 0 : aParametres.surFermeture) === null || _a === void 0 ? void 0 : _a.call(aParametres, this);
                    if (this.destructionSurFermeture) {
                        this.free();
                    }
                }
                );
                if (aParametres === null || aParametres === void 0 ? void 0 : aParametres.options) {
                    this.setOptionsFenetre(aParametres.options);
                }
                if ((aParametres === null || aParametres === void 0 ? void 0 : aParametres.initialiser) !== false) {
                    if (MethodesObjet_1.MethodesObjet.isFunction(aParametres === null || aParametres === void 0 ? void 0 : aParametres.initialiser)) {
                        aParametres.initialiser.call(this.Pere, this);
                    }
                    this.initialiser();
                }
                return this;
            }
            static creerInstanceFenetre(aConstructeur, aParametres, aOptionsFenetre) {
                return new aConstructeur(aParametres).initAfficher({
                    initialiser: aParametres === null || aParametres === void 0 ? void 0 : aParametres.initialiser,
                    destructionSurFermeture: aParametres === null || aParametres === void 0 ? void 0 : aParametres.destructionSurFermeture,
                    options: aOptionsFenetre
                });
            }
            static creerInstance() {
                throw new Error('creerInstance incorrect');
            }
        }
        exports._ObjetFenetre = _ObjetFenetre;
    },
    fn: '_objetfenetre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetFenetre_Espace = void 0;
        require("ObjetFenetre_Espace.css");
        exports.StylesObjetFenetre_Espace = {
            Fenetre: 'Fenetre',
            Fenetre_Bouton: 'Fenetre_Bouton',
            Fenetre_Contenu: 'Fenetre_Contenu',
            Fenetre_Titre: 'Fenetre_Titre',
            Fenetre_Espace: 'Fenetre_Espace',
            Fenetre_Cadre: 'Fenetre_Cadre',
            Fenetre_Bordure: 'Fenetre_Bordure',
            Fenetre_Impression: 'Fenetre_Impression',
            Fenetre_ImageFond: 'Fenetre_ImageFond',
            Fenetre_SeparateurVertical: 'Fenetre_SeparateurVertical',
            ZoneDeplacementFenetre: 'ZoneDeplacementFenetre',
            ObjetFenetre_Espace: 'ObjetFenetre_Espace',
            ombreCadre: 'ombre-cadre',
            sansBandeau: 'sans-bandeau',
            ctaConteneur: 'cta-conteneur',
            btnImage: 'btnImage',
            btnImageIcon: 'btnImageIcon',
            asButton: 'as-button',
            Fenetre_Scroll: 'Fenetre_Scroll',
            overflowYScroll: 'overflow-y-scroll',
            SansPaddingLR: 'SansPaddingLR',
            bandeauHeader: 'bandeau-header',
            content: 'content',
            zoneBas: 'zone-bas',
            zoneBasGauche: 'zone-bas-gauche',
            btnConteneur: 'btn-conteneur',
            contentWrapper: 'content-wrapper',
            combosWrapper: 'combos-wrapper',
            fenetreResize: 'fenetre-resize',
            left: 'left',
            right: 'right',
            top: 'top',
            bottom: 'bottom',
            coin: 'coin',
            overlayResize: 'overlay-resize',
            lockedContain: 'locked-contain',
            topLine: 'top-line',
            titreBloc: 'titre-bloc',
            listeCompetences: 'liste-competences',
            publicTeam: 'public-team',
            iecb: 'iecb',
            tinyWrapper: 'tiny-wrapper',
            btnContain: 'btn-contain',
            tinyContenu: 'tiny-contenu',
            listePj: 'liste-pj',
            generalConteneur: 'general-conteneur',
            fondGris: 'fond-gris',
            ObjetFenetre_groupeInfos: 'ObjetFenetre_groupe-infos',
            ObjetFenetre_blocInfos: 'ObjetFenetre_bloc-infos',
            fluid: 'fluid',
            fixed: 'fixed',
            inputIconised: 'input-iconised',
            icon: 'icon',
            textareamaxWrapper: 'textareamax-wrapper',
            textareaStyle: 'textarea-style',
            textareaCounter: 'textarea-counter',
            ObjetFenetre_EditionScolarite_racine: 'ObjetFenetre_EditionScolarite_racine',
            menuTabsWrapper: 'menu-tabs-wrapper',
            listeClasses: 'liste-classes',
            listeBoutons: 'liste-boutons',
            mbXl: 'mb-xl',
            ObjetFichePopupConversation_racine: 'ObjetFichePopupConversation_racine',
            multitabsWrapper: 'multitabs-wrapper',
            destinatairesWrapper: 'destinataires-wrapper',
            menuWrapper: 'menu-wrapper',
            contenu: 'contenu',
            panel: 'panel',
            item: 'item',
            itemsWrapper: 'items-wrapper',
            radioContain: 'radio-contain',
            entites: 'entites',
            users: 'users',
            destinataireIndividuel: 'destinataire-individuel'
        };
    },
    fn: 'objetfenetre_espace.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetreEspace = void 0;
        const _ObjetFenetre_1 = require("_ObjetFenetre");
        require("ObjetFenetre_Espace.css");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetStyle_1 = require("ObjetStyle");
        const Enumere_Event_1 = require("Enumere_Event");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const AccessApp_1 = require("AccessApp");
        const Divers_css_1 = require("Divers.css");
        const ObjetFenetre_Espace_css_1 = require("ObjetFenetre_Espace.css");
        const uCoordonneesBackup = {};
        class ObjetFenetreEspace extends _ObjetFenetre_1._ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.Titre = '';
                this._initialiserOptionsFenetre();
                this.resetCoordonnees();
                if (this.Nom) {
                    this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurPreResize, this._preResizePositionnement);
                    this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurPostResize, this._postResizePositionnement);
                }
                Invocateur_1.Invocateur.abonner(`${ObjetNavigateur_1.Navigateur.getEventInvocateur('pointerdown')}.capture ${ObjetNavigateur_1.Navigateur.getEventInvocateur('keydown')}.capture`, (aEvent) => {
                    if (this.optionsFenetre.fermerFenetreSurClicHorsFenetre && this.EnAffichage && aEvent.target && !aEvent.target.closest(`#${this.Nom.escapeJQ()}`) && !GestionnaireModale_1.GestionnaireModale.estJElementBloque($('#' + this.Nom.escapeJQ()))) {
                        this.fermer();
                    }
                }
                );
                Object.assign(this.optionsInterne, {
                    closeStart: () => {
                        GestionnaireModale_1.GestionnaireModale.abonnementBlocageInterface(false, this.Nom);
                        if (this._interfaceEstBloquee) {
                            GestionnaireModale_1.GestionnaireModale.bloquerInterface({
                                bloquer: false,
                                guidBlocage: this._guidBlocage
                            });
                            delete this._interfaceEstBloquee;
                        }
                        GestionnaireModale_1.GestionnaireModale.abonnementPremierPlan(false, this.Nom);
                    }
                    ,
                    closeEnd: () => {
                        ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
                    }
                });
                this.getZIndex = function() {
                    return 1100;
                }
                ;
            }
            detruireInstances() {
                if (!this.__surDestructionApresFermeture_) {
                    this.fermer(false);
                }
            }
            setParametresGeneraux() {
                ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getTitre: function() {
                        return aInstance.optionsFenetre.titre ? MethodesObjet_1.MethodesObjet.isFunction(aInstance.optionsFenetre.titre) ? aInstance.optionsFenetre.titre() || '' : aInstance.optionsFenetre.titre : aInstance.Titre || '';
                    },
                    avecBoutons: function() {
                        return aInstance.optionsFenetre.listeBoutons && aInstance.optionsFenetre.listeBoutons.length > 0;
                    },
                    htmlRepeatBoutons: function(aBoutonRepeat) {
                        let lMargin = 4;
                        if (aBoutonRepeat.element.theme === Type_ThemeBouton_1.TypeThemeBouton.primaire && aBoutonRepeat.indice > 0 && aBoutonRepeat.tableau[aBoutonRepeat.indice - 1] && aBoutonRepeat.tableau[aBoutonRepeat.indice - 1].theme !== Type_ThemeBouton_1.TypeThemeBouton.primaire) {
                            lMargin = 8;
                        }
                        return aInstance.construireBouton(aBoutonRepeat, lMargin);
                    }
                });
            }
            construireBouton(aBoutonRepeat, aMargin) {
                return ['<ie-bouton', ' id="', this._getIdBoutons(aBoutonRepeat.element.index), '"', ' ie-model="fenetreBtn(bouton)" class="', aBoutonRepeat.element.theme && MethodesObjet_1.MethodesObjet.isString(aBoutonRepeat.element.theme) ? aBoutonRepeat.element.theme : '', '"', ' style="', this.optionsFenetre.listeBoutonsInvisibles[aBoutonRepeat.element.index] === true ? 'display:none;' : '', 'margin-left:', aMargin, 'px;', '"', aBoutonRepeat.element.title ? ObjetHtml_1.GHtml.composeAttr('title', aBoutonRepeat.element.title) : '', '>', '</ie-bouton>'].join('');
            }
            construireStructureAffichageAutre() {
                if (this.optionsFenetre.identConservationCoordonnees && uCoordonneesBackup[this.optionsFenetre.identConservationCoordonnees]) {
                    this.coordonnees = uCoordonneesBackup[this.optionsFenetre.identConservationCoordonnees] || this.coordonnees || {};
                }
                if (this.optionsFenetre.avecRetaillage && this.existeCoordonnees()) {
                    if (this.coordonnees.width > 0) {
                        this.optionsFenetre.largeur = this.coordonnees.width;
                    }
                    if (this.coordonnees.height > 0) {
                        this.optionsFenetre.hauteur = this.coordonnees.height;
                    }
                }
                let LStyle = this.optionsFenetre.largeur > 0 ? 'width: ' + this.optionsFenetre.largeur + 'px;' : '';
                LStyle += this.optionsFenetre.hauteur > 0 ? 'min-height: ' + this.optionsFenetre.hauteur + 'px;' : this.optionsFenetre.hauteur === 'auto' ? '' : ObjetStyle_1.GStyle.composeHeight(100, '%');
                LStyle += ObjetStyle_1.GStyle.composeCouleurFond(this.optionsFenetre.couleurFond);
                const lHtmlBas = this.composeBas();
                const lHtmlBoutons = this.composeBoutons();
                const lStyleContenuFenetre = [];
                if (this.optionsFenetre.hauteurMaxContenu > 0) {
                    lStyleContenuFenetre.push('max-height: ' + this.optionsFenetre.hauteurMaxContenu + 'px;');
                }
                if (this.optionsFenetre.largeurMin > 0) {
                    lStyleContenuFenetre.push('min-width: ' + this.optionsFenetre.largeurMin + 'px;');
                }
                if (this.optionsFenetre.hauteurMin > 0) {
                    lStyleContenuFenetre.push('min-height: ' + this.optionsFenetre.hauteurMin + 'px;');
                }
                return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("span", {
                    class: Divers_css_1.StylesDivers.srOnly,
                    tabindex: "0",
                    "ie-node": this.jsxNodeFocusSurPremierOuDernierElement.bind(this, true)
                }), IE.jsx.str("div", {
                    id: this.NomFenetre,
                    "ie-node": this.jsxNodeCreationNodeFenetre.bind(this),
                    "aria-labelledby": this.optionsFenetre.avecTitre ? this.IdTitre : false,
                    "aria-describedby": this.optionsFenetre.avecAriaDescribedByContenu ? this.IdContenu : false,
                    class: ['ObjetFenetre_Espace ', (this.optionsFenetre.cssFenetre || '')],
                    tabindex: "-1",
                    role: this.optionsFenetre.roleWAI || 'dialog',
                    "aria-modal": "true"
                }, IE.jsx.str("div", {
                    id: this.idFenetreContenu,
                    class: ['Fenetre_Cadre ombre-cadre'],
                    style: 'box-sizing:border-box; ' + LStyle
                }, this.optionsFenetre.avecTitre ? IE.jsx.str("div", {
                    class: "Fenetre_Titre NePasImprimer"
                }, IE.jsx.str("h1", {
                    id: this.IdTitre,
                    class: "ZoneDeplacementFenetre",
                    "ie-html": "getTitre",
                    "ie-draggable": this.getDragFenetre.bind(this),
                    tabindex: "-1"
                }), IE.jsx.str("div", {
                    class: "cta-conteneur",
                    "ie-display": "optionsFenetre.avecCroixFermeture"
                }, IE.jsx.str("ie-btnimage", {
                    class: "btnImageIcon as-button icon_fermeture_widget ",
                    "ie-model": this.jsxModeleBoutonCroixFermeture.bind(this),
                    title: ObjetTraduction_1.GTraductions.getValeur('Fermer')
                }))) : '', IE.jsx.str("div", {
                    id: `${this.Nom}_Res`,
                    class: ['Fenetre_Espace', this.optionsFenetre.avecScroll ? ObjetFenetre_Espace_css_1.StylesObjetFenetre_Espace.Fenetre_Scroll : '', (this.optionsFenetre.sansPaddingLR ? ' SansPaddingLR' : '')]
                }, IE.jsx.str("div", {
                    id: this.IdContenu,
                    class: ['Fenetre_Contenu', (this.optionsFenetre.avecScrollY_force ? ' overflow-y-scroll' : '')],
                    style: lStyleContenuFenetre.join('')
                }, ObjetChaine_1.GChaine.simpleHtmlToSafeHtml(this.composeContenu()))), lHtmlBas || lHtmlBoutons ? IE.jsx.str("div", {
                    class: "NePasImprimer"
                }, IE.jsx.str("div", {
                    class: "zone-bas"
                }, lHtmlBas !== '' ? IE.jsx.str("div", {
                    class: "zone-bas-gauche Fenetre_Bas"
                }, lHtmlBas) : '', lHtmlBoutons)) : '', this.optionsFenetre.avecRetaillage ? IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                    class: "fenetre-resize right",
                    "ie-draggable": this.getDragResize.bind(this)
                }), IE.jsx.str("div", {
                    class: "fenetre-resize bottom",
                    "ie-draggable": this.getDragResize.bind(this)
                }), IE.jsx.str("div", {
                    class: "fenetre-resize left",
                    "ie-draggable": this.getDragResize.bind(this)
                }), IE.jsx.str("div", {
                    class: "fenetre-resize top",
                    "ie-draggable": this.getDragResize.bind(this)
                }), IE.jsx.str("div", {
                    class: "fenetre-resize coin Image_Retailler",
                    "ie-draggable": this.getDragResize.bind(this)
                })) : '')), IE.jsx.str("span", {
                    class: Divers_css_1.StylesDivers.srOnly,
                    tabindex: "0",
                    "ie-node": this.jsxNodeFocusSurPremierOuDernierElement.bind(this, false)
                }));
            }
            composeBoutons() {
                const H = [];
                H.push('<div ie-if="avecBoutons" class="btn-conteneur">', '<div ie-repeat="bouton in listeBoutons" ie-html="htmlRepeatBoutons(bouton)"></div>', '</div>');
                return H.join('');
            }
            existeCoordonnees() {
                return this.optionsFenetre.conserverCoordonnees && ((this.coordonnees !== null && this.coordonnees !== undefined)) && !!(this.coordonnees.left && this.coordonnees.top);
            }
            resetCoordonnees() {
                this.coordonnees = Object.assign(this.coordonnees || {}, {
                    left: null,
                    top: null,
                    width: null,
                    height: null
                });
            }
            setCoordonnees() {
                if (!this.optionsFenetre.conserverCoordonnees) {
                    return;
                }
                Object.assign(this.coordonnees || {}, {
                    left: ObjetPosition_1.GPosition.getLeft(this.Nom),
                    top: ObjetPosition_1.GPosition.getTop(this.Nom),
                    width: this.optionsFenetre.avecRetaillage ? this.optionsFenetre.largeur : null,
                    height: this.optionsFenetre.avecRetaillage ? this.optionsFenetre.hauteur : null
                });
                if (this.optionsFenetre.identConservationCoordonnees) {
                    uCoordonneesBackup[this.optionsFenetre.identConservationCoordonnees] = this.coordonnees;
                }
                if (this.optionsFenetre.callbackDeplacer) {
                    this.optionsFenetre.callbackDeplacer(this.coordonnees);
                }
            }
            positionnerFenetre(aParams) {
                const lParams = Object.assign({
                    left: null,
                    top: null,
                    id: '',
                    positionSurSouris: false,
                    positionSurSourisSiAffiche: false,
                    enAffichage: null,
                    centrerParDefaut: true
                }, aParams);
                if (ObjetStyle_1.GStyle.styleSheetDisabled()) {
                    return;
                }
                let lEnAffichage = this.EnAffichage;
                if (lParams.enAffichage === false || lParams.enAffichage === true) {
                    lEnAffichage = lParams.enAffichage;
                }
                if (this.existeCoordonnees() && ObjetPosition_1.GPosition.placer) {
                    ObjetPosition_1.GPosition.placer(this.Nom, this.coordonnees.left, this.coordonnees.top);
                } else if (MethodesObjet_1.MethodesObjet.isNumber(lParams.top) && MethodesObjet_1.MethodesObjet.isNumber(lParams.left) && ObjetPosition_1.GPosition.placer) {
                    ObjetPosition_1.GPosition.placer(this.Nom, lParams.left, lParams.top);
                } else if (this.optionsFenetre.idPositionnement || lParams.id) {
                    ObjetPosition_1.GPosition.placerFiche(this.Nom, this.optionsFenetre.idPositionnement || lParams.id, lEnAffichage);
                } else if (this.optionsFenetre.positionSurSouris || lParams.positionSurSouris) {
                    if (!lEnAffichage || lParams.positionSurSourisSiAffiche) {
                        ObjetPosition_1.GPosition.placer(this.Nom, ObjetNavigateur_1.Navigateur.pointerX, ObjetNavigateur_1.Navigateur.pointerY);
                    }
                } else if (lParams.centrerParDefaut) {
                    ObjetPosition_1.GPosition.centrer(this.Nom);
                }
                return this;
            }
            async afficher(aHtml) {
                var _a, _b;
                const lEnAffichage = this.EnAffichage;
                if (!lEnAffichage) {
                    this._focusPrecedent = null;
                    if (!ObjetHtml_1.GHtml.elementExiste(this.Nom)) {
                        return;
                    }
                    if (!this.optionsFenetre.bloquerFocus && this.optionsFenetre.restaurerFocusSurFermeture) {
                        this._focusPrecedent = document.activeElement;
                    }
                    if (this.optionsFenetre.modale) {
                        this._guidBlocage = GestionnaireModale_1.GestionnaireModale.bloquerInterface({
                            bloquer: true,
                            prioriteBlocage: this.optionsFenetre.prioriteBlocageAbonnement,
                            opaciteVoile: this.optionsFenetre.opaciteVoileModale
                        });
                        this._interfaceEstBloquee = true;
                    }
                    if (this.optionsFenetre.avecAbonnementPremierPlan || this.optionsFenetre.modale) {
                        GestionnaireModale_1.GestionnaireModale.abonnementPremierPlan(true, this.Nom);
                        GestionnaireModale_1.GestionnaireModale.enPremierPlan(this.Nom);
                    }
                    if (this.optionsFenetre.avecAbonnementBlocage) {
                        GestionnaireModale_1.GestionnaireModale.abonnementBlocageInterface(true, this.Nom, this.optionsFenetre.prioriteBlocageAbonnement);
                    }
                    ;ObjetHtml_1.GHtml.setDisplay(this.Nom, true);
                    Invocateur_1.Invocateur.evenement('surAffichageFenetre');
                    this.EnAffichage = true;
                    this.$refresh(true);
                    this.EnAffichage = false;
                    if (aHtml) {
                        ObjetHtml_1.GHtml.setHtml(this.IdContenu, aHtml, {
                            controleur: this.controleur
                        });
                    }
                    if (this.optionsFenetre.positionnerFenetreSurAfficher) {
                        this._creerResizeObserver();
                        this.positionnerFenetre();
                    }
                    this.EnAffichage = true;
                    this.surFixerTaille();
                    if (this.surAfficher) {
                        this.surAfficher();
                    }
                    (_b = (_a = this.optionsFenetre).callbackSurAfficher) === null || _b === void 0 ? void 0 : _b.call(_a);
                    this.$refreshSelf();
                    this.promise = new Promise( (aResolve) => {
                        this._promiseResolve = aResolve;
                    }
                    );
                }
                try {
                    if (!this.optionsFenetre.bloquerFocus) {
                        this.focusSurPremierElement();
                    }
                } catch (e) {}
                return this.promise;
            }
            actualiser() {
                this.surFixerTaille();
                ObjetHtml_1.GHtml.setHtml(this.IdContenu, this.composeContenu(), {
                    controleur: this.controleur
                });
            }
            setBoutonLibelle(I, aLibelle) {
                if (MethodesObjet_1.MethodesObjet.isObject(this.optionsFenetre.listeBoutons[I])) {
                    this.optionsFenetre.listeBoutons[I].libelle = aLibelle;
                } else {
                    this.optionsFenetre.listeBoutons[I] = aLibelle;
                }
                this._structureBoutons = null;
                this.$refreshSelf();
            }
            positionnerSousId(aId) {
                if (ObjetHtml_1.GHtml.elementExiste(aId)) {
                    ObjetPosition_1.GPosition.placer(this.Nom, ObjetPosition_1.GPosition.getLeft(aId) + 5, ObjetPosition_1.GPosition.getTop(aId) + ObjetPosition_1.GPosition.getHeight(aId) + 7);
                    ObjetPosition_1.GPosition.placerFiche(this.Nom, aId, true);
                    this.setCoordonnees();
                }
            }
            surFixerTaille() {
                if (!this.optionsFenetre.avecRetaillage && $('#' + this.NomFenetre.escapeJQ()).width() < $('#' + this.idFenetreContenu.escapeJQ()).outerWidth()) {
                    $('#' + this.NomFenetre.escapeJQ()).css('min-width', $('#' + this.idFenetreContenu.escapeJQ()).width() + 'px');
                }
            }
            debutRetaillage() {
                this.surFixerTaille();
                $('#' + this.idFenetreContenu.escapeJQ()).css({
                    'min-height': ObjetPosition_1.GPosition.getHeight(this.idFenetreContenu) + 'px',
                    'width': ObjetPosition_1.GPosition.getWidth(this.idFenetreContenu) + 'px'
                });
            }
            finRetaillage() {
                this.surFixerTaille();
                this.setCoordonnees();
            }
            getHeightMaxIdSelonEcran(aId) {
                return ObjetNavigateur_1.Navigateur.ecranH - ($('#' + this.Nom.escapeJQ()).outerHeight() - $('#' + aId.escapeJQ()).height()) - 10;
            }
            avecEventResizeNavigateur() {
                return false;
            }
            _initialiserOptionsFenetre() {
                this.setOptionsFenetre({
                    modale: true,
                    avecTitre: true,
                    titre: '',
                    largeur: 100,
                    hauteur: 100,
                    hauteurMaxContenu: 0,
                    avecScroll: false,
                    avecScrollY_force: false,
                    marge: 12,
                    avecTailleSelonContenu: false,
                    avecPaddingContenu: true,
                    avecCroixFermeture: true,
                    indiceCroixFermeture: -1,
                    cssFenetre: MethodesObjet_1.MethodesObjet.getObjectClass(this) + '_racine',
                    avecRetaillage: false,
                    largeurMin: 0,
                    hauteurMin: 0,
                    tailleBandeRetaillage: 3,
                    callbackDeplacer: null,
                    addParametresValidation: null,
                    surValiderAvantFermer: null,
                    callback: null,
                    callbackFermer: null,
                    callbackApresFermer: null,
                    listeBoutons: [],
                    listeBoutonsInvisibles: [],
                    listeBoutonsInactifs: [],
                    avecAbonnementBlocage: true,
                    prioriteBlocageAbonnement: GestionnaireModale_1.GestionnaireModale.TypePrioriteBlocageInterface.standard,
                    avecAbonnementPremierPlan: true,
                    avecPositionnementResize: true,
                    positionnerFenetreSurAfficher: true,
                    idPositionnement: '',
                    positionSurSouris: false,
                    conserverCoordonnees: true,
                    identConservationCoordonnees: '',
                    avecAbonnementFermetureFenetreGenerale: true,
                    bloquerFocus: false,
                    restaurerFocusSurFermeture: true,
                    fermerFenetreSurClicHorsFenetre: false,
                    couleurFond: (0,
                    AccessApp_1.getApp)().getCouleur().blanc,
                    hauteurBandeau: (0,
                    AccessApp_1.getApp)().hauteurBandeau,
                    couleurFondBandeau: (0,
                    AccessApp_1.getApp)().getCouleur().fenetre.bandeau.fond,
                    couleurTexteBandeau: (0,
                    AccessApp_1.getApp)().getCouleur().fenetre.bandeau.texte,
                    avecAriaDescribedByContenu: false
                });
            }
            _creerResizeObserver() {
                const lElement = ObjetHtml_1.GHtml.getElement(this.Nom);
                if (!lElement) {
                    return;
                }
                let lPositionnerEnCours = false;
                let lObserver = new ResizeObserver( (aObserveds) => {
                    if (this.EnAffichage && !lPositionnerEnCours && aObserveds && aObserveds[0] && aObserveds[0].contentRect && aObserveds[0].contentRect.height > 0) {
                        lPositionnerEnCours = true;
                        try {
                            this.positionnerFenetre();
                        } finally {
                            lPositionnerEnCours = false;
                        }
                    }
                }
                );
                lObserver.observe(lElement);
                const lDisconnect = function(aEvent) {
                    if (lObserver) {
                        lObserver.disconnect();
                        lObserver = null;
                    }
                    lElement.removeEventListener(aEvent.type, lDisconnect, true);
                };
                lElement.addEventListener('pointerdown', lDisconnect, true);
            }
            _preResizePositionnement() {
                if (!this.optionsFenetre.avecPositionnementResize || !this.estAffiche()) {
                    return;
                }
                this._tempResize = {
                    left: ObjetPosition_1.GPosition.getLeft(this.Nom),
                    top: ObjetPosition_1.GPosition.getTop(this.Nom)
                };
                ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
            }
            _postResizePositionnement() {
                if (!this.optionsFenetre.avecPositionnementResize || !this.estAffiche() || !this._tempResize) {
                    return;
                }
                ObjetPosition_1.GPosition.placer(this.Nom, 0, 0);
                ObjetHtml_1.GHtml.setDisplay(this.Nom, true);
                ObjetPosition_1.GPosition.placer(this.Nom, this._tempResize.left, this._tempResize.top);
                this.setCoordonnees();
                delete this._tempResize;
            }
            getDragFenetre() {
                return {
                    start: (aParamsDrag) => {
                        const lJFenetre = $(`#${this.Nom.escapeJQ()}`);
                        aParamsDrag.rectFenetreStart = ObjetPosition_1.GPosition.getClientRect(lJFenetre.get(0));
                        lJFenetre.addClass('on-drag');
                        this._fenetreEnDeplacement = true;
                    }
                    ,
                    drag: (aParamsDrag) => {
                        const lJFenetre = $(`#${this.Nom.escapeJQ()}`);
                        const lRect = ObjetPosition_1.GPosition.getClientRect(lJFenetre.get(0));
                        let lTop = Math.max(aParamsDrag.rectContrainte.top, aParamsDrag.rectFenetreStart.top + aParamsDrag.offset.y);
                        let lLeft = Math.max(aParamsDrag.rectContrainte.left, aParamsDrag.rectFenetreStart.left + aParamsDrag.offset.x);
                        lLeft = Math.min(lLeft, aParamsDrag.rectContrainte.left + aParamsDrag.rectContrainte.width - lRect.width);
                        lTop = Math.min(lTop, aParamsDrag.rectContrainte.top + Math.floor(aParamsDrag.rectContrainte.height) - Math.ceil(lRect.height) - 1);
                        lJFenetre.css({
                            left: lLeft,
                            top: lTop
                        });
                    }
                    ,
                    stop: () => {
                        $(`#${this.Nom.escapeJQ()}`).removeClass('on-drag');
                        this.setCoordonnees();
                        this.focusSurPremierElement();
                        setTimeout( () => {
                            delete this._fenetreEnDeplacement;
                        }
                        , 0);
                    }
                };
            }
            getDragResize(aNode) {
                let lCoin = {
                    gauche: aNode.classList.contains('left'),
                    droit: aNode.classList.contains('right') || aNode.classList.contains('coin'),
                    haut: aNode.classList.contains('top'),
                    bas: aNode.classList.contains('bottom') || aNode.classList.contains('coin')
                };
                return {
                    start: (aParamsDrag) => {
                        const lClassCurseur = lCoin.bas && lCoin.droit ? 'AvecResize' : lCoin.droit || lCoin.gauche ? 'AvecResizeHorizontal' : 'AvecResizeVertical';
                        aParamsDrag.divBloquant = ObjetHtml_1.GHtml.htmlToDOM(`<div class="overlay-resize ${lClassCurseur}"></div>`);
                        ObjetHtml_1.GHtml.insererElementDOM(ObjetHtml_1.GHtml.getElement(this.NomFenetre), aParamsDrag.divBloquant);
                        Object.assign(aParamsDrag, {
                            OriginX: aParamsDrag.posStart.x,
                            OriginY: aParamsDrag.posStart.y,
                            OriginLargeur: ObjetPosition_1.GPosition.getWidth(this.idFenetreContenu),
                            OriginHauteur: ObjetPosition_1.GPosition.getHeight(this.idFenetreContenu),
                            Originleft: ObjetPosition_1.GPosition.getLeft(this.Nom),
                            OriginTop: ObjetPosition_1.GPosition.getTop(this.Nom)
                        });
                        $(`#${this.Nom.escapeJQ()}`).addClass('on-drag');
                        this.debutRetaillage();
                    }
                    ,
                    drag: (aParamsDrag) => {
                        const lJContenu = $('#' + this.idFenetreContenu.escapeJQ());
                        let lDeplacementX;
                        let lDeplacementY;
                        if (lCoin.droit) {
                            lDeplacementX = Math.borner(aParamsDrag.pos.x - aParamsDrag.OriginX, this.optionsFenetre.largeurMin - aParamsDrag.OriginLargeur, ObjetNavigateur_1.Navigateur.ecranL - 13 - aParamsDrag.OriginLargeur - ObjetPosition_1.GPosition.getLeft(this.idFenetreContenu));
                            this.optionsFenetre.largeur = aParamsDrag.OriginLargeur + lDeplacementX;
                            lJContenu.css({
                                'width': aParamsDrag.OriginLargeur + lDeplacementX + 'px'
                            });
                        }
                        if (lCoin.gauche) {
                            lDeplacementX = Math.borner(aParamsDrag.pos.x - aParamsDrag.OriginX, -aParamsDrag.Originleft, aParamsDrag.OriginLargeur - this.optionsFenetre.largeurMin);
                            this.optionsFenetre.largeur = aParamsDrag.OriginLargeur - lDeplacementX;
                            lJContenu.css({
                                'width': aParamsDrag.OriginLargeur - lDeplacementX + 'px'
                            });
                            this.coordonnees.left = aParamsDrag.Originleft + lDeplacementX;
                            ObjetPosition_1.GPosition.setLeft(this.Nom, this.coordonnees.left);
                        }
                        if (lCoin.bas) {
                            lDeplacementY = Math.borner(aParamsDrag.pos.y - aParamsDrag.OriginY, this.optionsFenetre.hauteurMin - aParamsDrag.OriginHauteur, ObjetNavigateur_1.Navigateur.ecranH - 13 - aParamsDrag.OriginHauteur - ObjetPosition_1.GPosition.getTop(this.idFenetreContenu));
                            this.optionsFenetre.hauteur = aParamsDrag.OriginHauteur + lDeplacementY;
                            lJContenu.css({
                                'min-height': aParamsDrag.OriginHauteur + lDeplacementY + 'px'
                            });
                        }
                        if (lCoin.haut) {
                            lDeplacementY = Math.borner(aParamsDrag.pos.y - aParamsDrag.OriginY, -aParamsDrag.OriginTop, aParamsDrag.OriginHauteur - this.optionsFenetre.hauteurMin);
                            this.optionsFenetre.hauteur = aParamsDrag.OriginHauteur - lDeplacementY;
                            lJContenu.css({
                                'min-height': aParamsDrag.OriginHauteur - lDeplacementY + 'px'
                            });
                            this.coordonnees.top = aParamsDrag.OriginTop + lDeplacementY;
                            ObjetPosition_1.GPosition.setTop(this.Nom, this.coordonnees.top);
                        }
                    }
                    ,
                    stop: (aParamsDrag) => {
                        if (aParamsDrag.divBloquant) {
                            ObjetHtml_1.GHtml.supprimerElementDOM(aParamsDrag.divBloquant);
                        }
                        $(`#${this.Nom.escapeJQ()}`).removeClass('on-drag');
                        this.finRetaillage();
                    }
                };
            }
        }
        exports.ObjetFenetreEspace = ObjetFenetreEspace;
    },
    fn: 'objetfenetre_espace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre = void 0;
        const _ObjetFenetre_1 = require("_ObjetFenetre");
        const ObjetFenetre_Mobile_1 = require("ObjetFenetre_Mobile");
        const ObjetFenetre_Espace_1 = require("ObjetFenetre_Espace");
        class ObjetFenetre extends _ObjetFenetre_1._ObjetFenetre {
        }
        exports.ObjetFenetre = ObjetFenetre;
        if (IE.estMobile) {
            exports.ObjetFenetre = ObjetFenetre = ObjetFenetre_Mobile_1.ObjetFenetreMobile;
        } else {
            exports.ObjetFenetre = ObjetFenetre = ObjetFenetre_Espace_1.ObjetFenetreEspace;
        }
    },
    fn: 'objetfenetre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetMessage = void 0;
        require("ObjetMessage.module.css");
        exports.StylesObjetMessage = {
            ObjetMessage: 'ObjetMessage-ObjetMessage-3862ef20',
            iconeTitre: 'ObjetMessage-iconeTitre-366914d',
            contenu: 'ObjetMessage-contenu-a3ad3155',
            contenuScroll: 'ObjetMessage-contenu-scroll-5f8c9275',
            mrFiche: 'ObjetMessage-mr-fiche-cfb1a40e'
        };
    },
    fn: 'objetmessage.module.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetMessage = void 0;
        const ObjetChaine_1 = require("ObjetChaine");
        const Enumere_Action_1 = require("Enumere_Action");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const MethodesObjet_1 = require("MethodesObjet");
        const Invocateur_1 = require("Invocateur");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const ObjetJSON_1 = require("ObjetJSON");
        const ObjetMessage_module_css_1 = require("ObjetMessage.module.css");
        const AccessApp_1 = require("AccessApp");
        class ObjetMessage {
            constructor() {
                this.EnAffichage = false;
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.erreurCommunication, () => {
                    this.fermer(Enumere_Action_1.EGenreAction.Annuler);
                }
                );
            }
            async afficher(aParametres) {
                if (this.EnAffichage) {
                    if (!this._pileMessage) {
                        this._pileMessage = [];
                    }
                    this._pileMessage.push(aParametres);
                    IE.log.addLog('ObjetMessage.afficher : un message est deja visible, le nouveau message est empil : ' + aParametres.message, null, IE.log.genre.Avertissement);
                    return new Promise( (aResolve) => {
                        aParametres.resolvePromise = aResolve;
                    }
                    );
                }
                this.Accepte = Enumere_Action_1.EGenreAction.Valider;
                this.EnAffichage = true;
                return new Promise( (aResolve) => {
                    const lParametres = $.extend({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                        titre: '',
                        message: '',
                        callback: null,
                        controleur: null,
                        delaiFermeture: null,
                        avecDecalageFocusBouton: false,
                        idRessource: null,
                        mrFiche: undefined,
                        width: null,
                        getDisabledBouton: null,
                        demanderConfirmation: true,
                        restaurerFocusSurFermeture: true,
                        listeBoutons: null,
                        resolvePromise: aResolve
                    }, aParametres);
                    if (lParametres.type === Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation && lParametres.demanderConfirmation === false) {
                        this.Accepte = Enumere_Action_1.EGenreAction.Valider;
                        this.EnAffichage = false;
                        this._fermer(lParametres);
                        return;
                    }
                    if (lParametres.idRessource || lParametres.mrFiche) {
                        let lTradMrFiche = lParametres.mrFiche;
                        if (!lTradMrFiche && lParametres.idRessource) {
                            const lChaine = ObjetTraduction_1.GTraductions.getValeur(lParametres.idRessource);
                            if (lChaine !== '') {
                                lTradMrFiche = ObjetJSON_1.ObjetJSON.parse(lChaine);
                            } else {}
                        }
                        if (lTradMrFiche && lTradMrFiche.titre && lTradMrFiche.html && (lTradMrFiche.type) >= 0) {
                            lParametres.type = this._typeEditeurToBoiteMessage(lTradMrFiche.type);
                            lParametres.titre = lTradMrFiche.titre;
                            lParametres.message = IE.jsx.str("div", {
                                class: ObjetMessage_module_css_1.StylesObjetMessage.mrFiche,
                                style: 'width:' + lTradMrFiche.width + 'px;min-height:' + lTradMrFiche.height + 'px;'
                            }, lTradMrFiche.html);
                        } else {}
                    }
                    const lDetailsMessage = this._construireMessage(lParametres);
                    this.fenetre = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetreInterneMessage, {
                        pere: this,
                        initialiser: (aInstance) => {
                            if (lParametres.controleur) {
                                $.extend(true, aInstance.controleur, lParametres.controleur);
                            }
                            aInstance.genreActionFenetre = Enumere_Action_1.EGenreAction.Annuler;
                            aInstance.setOptionsFenetre({
                                modale: true,
                                roleWAI: 'alertdialog',
                                prioriteBlocageAbonnement: GestionnaireModale_1.GestionnaireModale.TypePrioriteBlocageInterface.message,
                                cssFenetre: ObjetMessage_module_css_1.StylesObjetMessage.ObjetMessage + ' ObjetMessage_' + lParametres.type,
                                avecTailleSelonContenuMobile: true,
                                avecPositionnementResize: false,
                                avecCroixFermeture: false,
                                titre: lDetailsMessage.titre,
                                listeBoutons: lDetailsMessage.listeBoutons,
                                avecTailleSelonContenu: true,
                                restaurerFocusSurFermeture: lParametres.restaurerFocusSurFermeture,
                                avecAriaDescribedByContenu: true,
                                surValiderAvantFermer: (aParams) => {
                                    if (aParams.bouton && aParams.bouton.genreAction !== undefined) {
                                        aInstance.genreActionFenetre = aParams.bouton.genreAction;
                                    }
                                }
                                ,
                                callbackApresFermer: () => {
                                    clearTimeout(this._timeoutFermeture);
                                    this.EnAffichage = false;
                                    delete this.fenetre;
                                    this.Accepte = aInstance.genreActionFenetre;
                                    this._fermer(lParametres);
                                }
                            });
                        }
                    });
                    if (MethodesObjet_1.MethodesObjet.isFunction(lParametres.getDisabledBouton)) {
                        this.fenetre.controleur.fenetreBtn.getDisabled = function(aBoutonRepeat) {
                            return lParametres.getDisabledBouton(aBoutonRepeat.element);
                        }
                        ;
                    }
                    this.fenetre.afficher(lDetailsMessage.html.join(''));
                    this.fenetre.setBoutonFocus(0, lParametres.avecDecalageFocusBouton);
                    if (lParametres.delaiFermeture) {
                        const lDelai = lParametres.delaiFermeture === true ? 30 * 1000 : lParametres.delaiFermeture;
                        this._timeoutFermeture = setTimeout( () => {
                            if (this.fenetre) {
                                this.fermer(Enumere_Action_1.EGenreAction.Valider);
                            }
                        }
                        , lDelai);
                    }
                }
                ).catch( (aArg) => {
                    throw aArg;
                }
                );
            }
            fermer(aGenreAction) {
                if (this.fenetre) {
                    if (aGenreAction !== null && aGenreAction !== undefined) {
                        this.fenetre.genreActionFenetre = aGenreAction;
                    }
                    this.fenetre.fermer();
                }
            }
            _construireMessage(aParametres) {
                const lResult = {
                    titre: '',
                    listeBoutons: [],
                    html: []
                };
                if (aParametres.titre && !aParametres.message) {
                    aParametres.message = aParametres.titre;
                    aParametres.titre = '';
                }
                if (aParametres.titre) {
                    lResult.titre = aParametres.titre + '';
                } else {
                    switch (aParametres.type) {
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.Information:
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.MrFiche:
                        lResult.titre = ObjetTraduction_1.GTraductions.getValeur('genreBoiteMessage.Information');
                        break;
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation:
                        lResult.titre = ObjetTraduction_1.GTraductions.getValeur('genreBoiteMessage.Confirmation');
                        break;
                    default:
                        ;
                    }
                }
                lResult.titre = IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("i", {
                    class: ObjetMessage_module_css_1.StylesObjetMessage.iconeTitre,
                    "aria-hidden": "true"
                }), lResult.titre);
                const lFuncGetClasse = (aNode) => {
                    if (aNode.scrollHeight > aNode.clientHeight) {
                        return ObjetMessage_module_css_1.StylesObjetMessage.contenuScroll;
                    }
                    return '';
                }
                ;
                lResult.html.push(aParametres.idRessource || aParametres.mrFiche ? aParametres.message : IE.estMobile ? ObjetChaine_1.GChaine.replaceRCToHTML(aParametres.message + '') : IE.jsx.str("p", {
                    class: ObjetMessage_module_css_1.StylesObjetMessage.contenu,
                    "ie-class": lFuncGetClasse,
                    style: {
                        width: aParametres.width
                    }
                }, ObjetChaine_1.GChaine.replaceRCToHTML(aParametres.message + '')));
                if (aParametres.listeBoutons) {
                    lResult.listeBoutons = aParametres.listeBoutons;
                    lResult.listeBoutons.forEach( (aBouton) => {
                        switch (aBouton.theme) {
                        case Type_ThemeBouton_1.TypeThemeBouton.neutre:
                            break;
                        case Type_ThemeBouton_1.TypeThemeBouton.primaire:
                            aBouton.theme = Type_ThemeBouton_1.TypeThemeBouton.primaire;
                            break;
                        default:
                            aBouton.theme = Type_ThemeBouton_1.TypeThemeBouton.secondaire;
                            break;
                        }
                    }
                    );
                } else {
                    switch (aParametres.type) {
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.Information:
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.MrFiche:
                        lResult.listeBoutons.push({
                            libelle: ObjetTraduction_1.GTraductions.getValeur('principal.fermer'),
                            genreAction: Enumere_Action_1.EGenreAction.Valider,
                            theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire,
                            typeMessage: aParametres.type
                        });
                        break;
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation:
                        lResult.listeBoutons.push({
                            libelle: ObjetTraduction_1.GTraductions.getValeur('principal.oui'),
                            genreAction: Enumere_Action_1.EGenreAction.Valider,
                            theme: Type_ThemeBouton_1.TypeThemeBouton.primaire,
                            typeMessage: aParametres.type
                        }, {
                            libelle: ObjetTraduction_1.GTraductions.getValeur('principal.non'),
                            genreAction: Enumere_Action_1.EGenreAction.NePasValider,
                            theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire,
                            typeMessage: aParametres.type
                        });
                        break;
                    default:
                        ;
                    }
                }
                return lResult;
            }
            _fermer(aParametres) {
                if (aParametres.callback) {
                    if ('appel'in aParametres.callback && MethodesObjet_1.MethodesObjet.isFunction(aParametres.callback.appel)) {
                        aParametres.callback.appel(this.Accepte);
                    } else {
                        aParametres.callback(this.Accepte);
                    }
                }
                aParametres.resolvePromise(this.Accepte);
                if (this._pileMessage && this._pileMessage.length > 0) {
                    const lApp = (0,
                    AccessApp_1.getApp)();
                    if (lApp && lApp.SESSION_FINI) {
                        return;
                    }
                    const lParametres = this._pileMessage.pop();
                    if (this._pileMessage.length === 0) {
                        delete this._pileMessage;
                    }
                    setTimeout( () => {
                        this.afficher(lParametres);
                    }
                    , 200);
                }
            }
            _typeEditeurToBoiteMessage(aGenreEditeur) {
                switch (aGenreEditeur) {
                case 2:
                    return Enumere_BoiteMessage_1.EGenreBoiteMessage.Information;
                case 4:
                    return Enumere_BoiteMessage_1.EGenreBoiteMessage.MrFiche;
                case 3:
                    return Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation;
                default:
                    ;return Enumere_BoiteMessage_1.EGenreBoiteMessage.Information;
                }
            }
        }
        exports.ObjetMessage = ObjetMessage;
        class ObjetFenetreInterneMessage extends ObjetFenetre_1.ObjetFenetre {
        }
    },
    fn: 'objetmessage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplication = void 0;
        require("NamespaceIE.js");
        require("DeclarationExtensionsObjetNatif.js");
        require("Divers.js");
        require("IELog");
        require("jsx");
        require("IEHtmlComposants.js");
        require("DeclarationIndexFont.js");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const ObjetMessageInformatif_1 = require("ObjetMessageInformatif");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetMessage_1 = require("ObjetMessage");
        require("pep.min");
        global.GCouleur = undefined;
        let uEstDebug = false;
        class ObjetApplication {
            constructor() {
                this.nomProduit = 'INDEX';
                this.hauteurBandeau = 22;
                this.estAppliMobile = false;
                this._objetMessage = null;
                this.mapObject = new Map();
                this.init();
                IEZoneFenetre_1.ZoneFenetre.idConteneurApp = this.getIdConteneur();
                this.messageInformatif = new ObjetMessageInformatif_1.ObjetMessageInformatif();
                if (!window.PointerEvent) {
                    DeferLoadingScript_1.deferLoadingScript.loadAsync('pep_poly');
                }
            }
            init() {}
            getObject(aKey) {
                return this.mapObject.get(aKey);
            }
            setObject(aKey, aObject) {
                if (aObject === null) {
                    return this.mapObject.delete(aKey);
                }
                const lResult = this.mapObject.has(aKey);
                this.mapObject.set(aKey, aObject);
                return lResult;
            }
            getNom() {
                return 'GApplication';
            }
            getIdConteneur() {
                return 'div';
            }
            getDemo() {
                return false;
            }
            getDateDemo() {
                return new Date();
            }
            getMessage() {
                if (!this._objetMessage) {
                    this._objetMessage = new ObjetMessage_1.ObjetMessage();
                }
                return this._objetMessage;
            }
            estDebug() {
                return uEstDebug;
            }
            getModeExclusif() {
                return false;
            }
            getCouleur() {
                return global.GCouleur;
            }
        }
        exports.ObjetApplication = ObjetApplication;
    },
    fn: 'objetapplication.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetFenetre_MessageDynamiqueDemarrage = void 0;
        require("ObjetFenetre_MessageDynamiqueDemarrage.css");
        exports.StylesObjetFenetre_MessageDynamiqueDemarrage = {
            ObjetFenetre_MessageDynamiqueDemarrage_racine: 'ObjetFenetre_MessageDynamiqueDemarrage_racine',
            ob_mdd_conteneur: 'ob_mdd_conteneur',
            ob_mdd_hr: 'ob_mdd_hr',
            ob_mdd_cb: 'ob_mdd_cb'
        };
    },
    fn: 'objetfenetre_messagedynamiquedemarrage.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_MessageDynamiqueDemarrage = void 0;
        require("ObjetFenetre_MessageDynamiqueDemarrage.css");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        class ObjetRequeteInfosDynamiquesMarquerLu extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        CollectionRequetes_1.Requetes.inscrire('InfosDynamiquesMarquerLu', ObjetRequeteInfosDynamiquesMarquerLu);
        class ObjetFenetre_MessageDynamiqueDemarrage extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')],
                    avecComposeBasInFooter: true,
                    callbackFermer: () => {
                        if (this.marquerLu && this.optionsFenetre.messages && this.optionsFenetre.messages.length > 0) {
                            const lIds = [];
                            this.optionsFenetre.messages.forEach( (aMessage) => {
                                lIds.push(aMessage.id);
                            }
                            );
                            new ObjetRequeteInfosDynamiquesMarquerLu(this).lancerRequete({
                                tab: lIds
                            });
                        }
                    }
                });
                this.marquerLu = false;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    cbLu: {
                        getValue: function() {
                            return !!aInstance.marquerLu;
                        },
                        setValue: function(aValue) {
                            aInstance.marquerLu = aValue;
                        }
                    }
                });
            }
            composeContenu() {
                if (this.optionsFenetre.messages && this.optionsFenetre.messages.length > 0) {
                    let H = [];
                    this.optionsFenetre.messages.forEach( (aMessage) => {
                        if (aMessage && aMessage.contenu) {
                            if (H.length > 0) {
                                H.push('<hr class="ob_mdd_hr">');
                            }
                            H.push('<div class="comm_contenuMessageDynamique">', aMessage.contenu, '</div>');
                        }
                    }
                    );
                    if (!IE.estMobile) {
                        H = ['<div class="ob_mdd_conteneur">', H.join(''), '</div>'];
                    }
                    return H.join('');
                }
            }
            composeBas() {
                return IE.jsx.str("ie-checkbox", {
                    "ie-model": "cbLu",
                    class: "ob_mdd_cb"
                }, ObjetTraduction_1.GTraductions.getValeur('messagesDyn.marquerLu'));
            }
        }
        exports.ObjetFenetre_MessageDynamiqueDemarrage = ObjetFenetre_MessageDynamiqueDemarrage;
    },
    fn: 'objetfenetre_messagedynamiquedemarrage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDonneesCentraleNotifications = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const Invocateur_1 = require("Invocateur");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetFenetre_MessageDynamiqueDemarrage_1 = require("ObjetFenetre_MessageDynamiqueDemarrage");
        var TypeNotif;
        (function(TypeNotif) {
            TypeNotif["surModification"] = "odcn_surModification";
            TypeNotif["masquerNbNotifs"] = "odcn_masquerNbNotifs";
        }
        )(TypeNotif || (TypeNotif = {}));
        class ObjetDonneesCentraleNotifications {
            constructor() {
                this.nbNotifs = 0;
                Invocateur_1.Invocateur.abonner(ObjetRequeteJSON_1.utils.getIdentNotification('compteurCentraleNotif'), (aCompteur) => {
                    this.nbNotifs = aCompteur;
                    this._notifSurModification({
                        compteurCentraleNotif: true
                    });
                }
                );
                Invocateur_1.Invocateur.abonner(TypeNotif.masquerNbNotifs, (aNbNotifs) => {
                    this.nbNotifs = Math.max(0, this.nbNotifs - aNbNotifs);
                    this._notifSurModification({
                        masquerNbNotifs: true
                    });
                }
                );
            }
            _notifSurModification(aParams) {
                Invocateur_1.Invocateur.evenement(TypeNotif.surModification, Object.assign(aParams || {}, this.getDonnees()));
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
            }
            getDonnees(aParam) {
                return {
                    nbNotifs: this.nbNotifs
                };
            }
            addMessagesDynamiques(aTabMessages) {
                this.listeMessagesDynamiques = [];
                if (aTabMessages && aTabMessages.length > 0 && aTabMessages.forEach) {
                    aTabMessages.forEach( (aMessage) => {
                        if (aMessage && aMessage.id && aMessage.contenu) {
                            this.listeMessagesDynamiques.push(aMessage);
                        } else {}
                    }
                    );
                }
            }
            initSurInterfaceDisponible() {
                if (this.listeMessagesDynamiques && this.listeMessagesDynamiques.length > 0) {
                    ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_MessageDynamiqueDemarrage_1.ObjetFenetre_MessageDynamiqueDemarrage, {
                        pere: {}
                    }, {
                        messages: this.listeMessagesDynamiques
                    }).afficher();
                    this.listeMessagesDynamiques = [];
                }
                this._notifSurModification();
            }
        }
        exports.ObjetDonneesCentraleNotifications = ObjetDonneesCentraleNotifications;
        ObjetDonneesCentraleNotifications.typeNotif = TypeNotif;
    },
    fn: 'objetdonneescentralenotifications.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
    },
    fn: 'declarationjournauxcp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("montserrat_font.css");
    },
    fn: 'montserrat_font.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("montserrat_font.css");
    },
    fn: 'declarationfontmontserrat.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplicationProduit = exports.EtatApplication = void 0;
        const ObjetApplication_1 = require("ObjetApplication");
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const ObjetDonneesCentraleNotifications_1 = require("ObjetDonneesCentraleNotifications");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetHtml_1 = require("ObjetHtml");
        require("DeclarationJournauxCP.js");
        require("DeclarationFontMontserrat.js");
        require("DeclarationLottie");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const GlossaireCP_1 = require("GlossaireCP");
        const AccessApp_1 = require("AccessApp");
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        var EtatApplication;
        (function(EtatApplication) {
            EtatApplication[EtatApplication["normal"] = 1] = "normal";
            EtatApplication[EtatApplication["modeExclusif"] = 2] = "modeExclusif";
        }
        )(EtatApplication || (exports.EtatApplication = EtatApplication = {}));
        global.GEtatUtilisateur = undefined;
        global.GParametres = undefined;
        global.GInterface = undefined;
        class ObjetApplicationProduit extends ObjetApplication_1.ObjetApplication {
            constructor() {
                super();
                this.donneesCentraleNotifications = new ObjetDonneesCentraleNotifications_1.ObjetDonneesCentraleNotifications();
                this.estPrimaire = false;
                this.etatApplication = EtatApplication.normal;
                this.communication = null;
                this.estDemo = false;
                this.pileAbonnementInvocateur = {};
                this.idLigneSeparateur = GUID_1.GUID.getId();
                this.idLigneBandeau = 'ligne_bandeau';
                this.idBandeau = GUID_1.GUID.getId();
                this.idBreadcrumbCombo = 'breadcrumbBandeauCombo';
                this.idBreadcrumb = 'breadcrumbBandeau';
                this.idBreadcrumbPerso = 'breadcrumbBandeauPerso';
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.erreurCommunication, this.finSession, this);
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.modificationModeExclusif, this._setModeExclusif, this);
                try {
                    this.chargeEniFrame = window.parent && window.parent !== window;
                } catch (error) {
                    this.chargeEniFrame = false;
                }
            }
            getEtatUtilisateur() {
                return GEtatUtilisateur;
            }
            getObjetParametres() {
                return GParametres;
            }
            getCommunication() {
                return this.communication;
            }
            setCommunication(aInstanceCommunication) {
                this.communication = aInstanceCommunication;
                if (this.communication) {
                    this.communication.setNom(this.getNom() + '.getCommunication ()');
                }
                this.sendMessageChargementEniFrame();
            }
            sendMessageChargementEniFrame() {
                var _a;
                try {
                    if (this.chargeEniFrame && this.communication) {
                        this.communication.sendLogClient(`${((_a = this.constructor) === null || _a === void 0 ? void 0 : _a.name) || ''} - Charg en iframe : ${document.referrer}`);
                    }
                } catch (error) {}
            }
            getDemo() {
                return this.estDemo;
            }
            setDemo(aValeur) {
                this.estDemo = aValeur;
            }
            getDateDemo() {
                return this.dateDemo;
            }
            setDateDemo(aDateDemo) {
                this.dateDemo = aDateDemo;
            }
            initDateServeur(aDate) {
                this.dateServeurReferant = aDate;
                this.dateClientReferant = new Date();
            }
            getDateServeur() {
                if (!this.dateServeurReferant || !this.dateClientReferant) {
                    return new Date();
                }
                return new Date(this.dateServeurReferant.getTime() + new Date().getTime() - this.dateClientReferant.getTime());
            }
            getEtatApplication() {
                return this.etatApplication;
            }
            getModeExclusif() {
                return this.getEtatApplication() === EtatApplication.modeExclusif;
            }
            entreeModeExclusif() {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modeExclusif, true);
            }
            sortieModeExclusif() {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modeExclusif, false);
            }
            changerEtatApplication(aEtat) {
                switch (this.etatApplication) {
                case EtatApplication.normal:
                    switch (aEtat) {
                    case EtatApplication.normal:
                        break;
                    case EtatApplication.modeExclusif:
                        this.etatApplication = aEtat;
                        this.entreeModeExclusif();
                        break;
                    default:
                        ;
                    }
                    break;
                case EtatApplication.modeExclusif:
                    switch (aEtat) {
                    case EtatApplication.normal:
                        this.etatApplication = aEtat;
                        this.sortieModeExclusif();
                        break;
                    case EtatApplication.modeExclusif:
                        break;
                    default:
                        ;
                    }
                    break;
                default:
                    ;
                }
            }
            async creerFenetreDebug(aFuncGetTraitement) {}
            getOptionsDebug() {
                return this.optionsDebug;
            }
            getOptionsEspaceLocal() {
                return this.optionsEspaceLocal;
            }
            finSession(aParametres) {
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.erreurCommunication, this);
                const lParametresFin = {
                    constructionPage: false
                };
                Object.assign(lParametresFin, aParametres);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.fermerFenetres, true);
                Invocateur_1.Invocateur.evenement('finSession');
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.nettoyerJSX);
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.modificationModeExclusif, this);
                $(document).off();
                $(window).off();
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                ObjetNavigateur_1.Navigateur.viderCache();
                if (lParametresFin.constructionPage) {
                    try {
                        this.construirePageFinSession(lParametresFin);
                    } catch (e) {
                        IE.log.addLog('Exception construirePageFinSession : ' + e);
                    }
                }
                this.SESSION_FINI = true;
                if (this.communication) {
                    this.communication.arreter();
                }
                this.communication = null;
            }
            construirePageFinSession(aParametres) {
                if (this.unloadEnCours) {
                    return;
                }
                const lCouleur = {
                    texte: 'black',
                    fond: 'white',
                    bordure: 'black'
                };
                if (global.GCouleur) {
                    Object.assign(lCouleur, GCouleur);
                }
                const lParametresFin = {
                    jsonErreur: null,
                    statut: '',
                    couleur: lCouleur,
                    sansBoutonSeConnecter: false
                };
                Object.assign(lParametresFin, aParametres);
                let lTitre = null;
                let lMessage = null, lGenreErreur;
                if (lParametresFin.jsonErreur) {
                    lGenreErreur = lParametresFin.jsonErreur.G;
                    lTitre = lParametresFin.jsonErreur.Titre;
                    lMessage = lParametresFin.jsonErreur.Message;
                }
                lTitre = lTitre === null || lTitre === undefined ? ObjetTraduction_1.GTraductions.getValeur('connexion.PageIndisponible') : lTitre;
                lMessage = lMessage === null || lMessage === undefined ? ObjetTraduction_1.GTraductions.getValeur('connexion.AffichagePageImpossible') : lMessage;
                const lEstPrimaire = !!this.estPrimaire;
                const T = [];
                T.push(`<div class="page-deconnexion ImageFond bg-espace-${!lEstPrimaire ? '' : `primaire`}">`);
                try {
                    T.push(this.construireEnTetePageFinSession(lParametresFin));
                } catch (e) {}
                T.push(`<div class="deco-content" role="main">`);
                T.push(IE.jsx.str("h1", {
                    class: `deco-titre-${!lEstPrimaire ? (this.nomProduit).toLowerCase() : `primaire`}`,
                    "aria-label": this.nomProduit
                }));
                T.push(`<p id="waispan_id">${ObjetTraduction_1.GTraductions.getValeur('connexion.Deconnecter')}</p>`);
                if (lTitre) {
                    T.push('<p class="pageDeconnexion_titre">' + lTitre + (lParametresFin.statut ? ' (' + ObjetTraduction_1.GTraductions.getValeur('connexion.Erreur') + ' ' + lParametresFin.statut + ')' : '') + '</p>');
                }
                if (lMessage) {
                    T.push(IE.jsx.str("p", {
                        class: "message"
                    }, lMessage));
                }
                if (lGenreErreur !== 7 && !lParametresFin.sansBoutonSeConnecter) {
                    const lModel = () => {
                        return {
                            event() {
                                window.location.reload();
                            }
                        };
                    }
                    ;
                    T.push(IE.jsx.str("ie-bouton", {
                        class: "themeBoutonPrimaire m-top",
                        "aria-describedby": "waispan_id",
                        "ie-model": lModel
                    }, ObjetTraduction_1.GTraductions.getValeur('connexion.SeConnecter')));
                }
                T.push(`</div>`);
                ObjetHtml_1.GHtml.setHtml(this.getIdConteneur(), T.join(''));
                (0,
                AccessApp_1.getApp)().getObjetParametres().setDocumentTitle(GlossaireCP_1.TradGlossaireCP.PageDeconnexion);
            }
            construireEnTetePageFinSession(aParametres) {
                return '';
            }
            _setModeExclusif(aEstModeExclusif) {
                this.changerEtatApplication(aEstModeExclusif ? EtatApplication.modeExclusif : EtatApplication.normal);
            }
            getPileAbonnement() {
                return this.pileAbonnementInvocateur;
            }
            initApp(aParams) {
                var _a, _b, _c;
                this.estAppliMobile = true;
                if (aParams.darkMode) {
                    const lModeSombreActive = aParams.darkMode === 'sombre' || (aParams.darkMode === 'systeme' && aParams.darkModeSysteme === true);
                    this.getOptionsEspaceLocal().setChoixDarkMode(lModeSombreActive ? TypeThemeCouleur_1.ChoixDarkMode.sombre : TypeThemeCouleur_1.ChoixDarkMode.clair);
                }
                if ((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.cordova_iab) === null || _c === void 0 ? void 0 : _c.postMessage) {
                    window.open = function(url) {
                        window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({
                            action: 'openLink',
                            link: url
                        }));
                        return null;
                    }
                    ;
                }
            }
        }
        exports.ObjetApplicationProduit = ObjetApplicationProduit;
        $(document).on('click', '*:not(.tab) > a[href][target="_blank"], *:not(.tab) > a[href]:not([target])', function(aEvent) {
            var _a, _b, _c, _d;
            if (((_a = global.GApplication) === null || _a === void 0 ? void 0 : _a.estAppliMobile) && ((_d = (_c = (_b = window === null || window === void 0 ? void 0 : window.webkit) === null || _b === void 0 ? void 0 : _b.messageHandlers) === null || _c === void 0 ? void 0 : _c.cordova_iab) === null || _d === void 0 ? void 0 : _d.postMessage)) {
                window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({
                    action: 'openLink',
                    link: aEvent.currentTarget.href
                }));
                aEvent.preventDefault();
                aEvent.stopImmediatePropagation();
                return false;
            }
        });
    },
    fn: 'objetapplicationproduit.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesUtilitaireMAJPatience = void 0;
        require("UtilitaireMAJPatience.css");
        exports.StylesUtilitaireMAJPatience = {
            UtilitaireMAJPatience: 'UtilitaireMAJPatience',
            ObjetFenetre_SplashMAJServeur_racine: 'ObjetFenetre_SplashMAJServeur_racine',
            Fenetre_Contenu: 'Fenetre_Contenu',
            ofsm_texte: 'ofsm_texte',
            ofsm_image_MAJ: 'ofsm_image_MAJ'
        };
    },
    fn: 'utilitairemajpatience.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteSaisieDeconnexion = void 0;
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const ObjetTraduction_1 = require("ObjetTraduction");
        class ObjetRequeteSaisieDeconnexion extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('connexion.DeconnexionEnCours'),
                    avecControleModeExclusif: false,
                    estRequeteDeconnexion: true
                });
            }
        }
        exports.ObjetRequeteSaisieDeconnexion = ObjetRequeteSaisieDeconnexion;
        CollectionRequetes_1.Requetes.inscrire('SaisieDeconnexion', ObjetRequeteSaisieDeconnexion);
    },
    fn: 'objetrequetesaisiedeconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreMessageHtmlUtil = exports.EGenreMessageHtml = void 0;
        var EGenreMessageHtml;
        (function(EGenreMessageHtml) {
            EGenreMessageHtml["patiencePDF"] = "patiencePDF";
            EGenreMessageHtml["patiencePDF_Mobile"] = "patiencePDF_mobile";
            EGenreMessageHtml["deconnexionENT"] = "deconnexionENT";
            EGenreMessageHtml["deconnexionENT_Mobile"] = "deconnexionENT_Mobile";
        }
        )(EGenreMessageHtml || (exports.EGenreMessageHtml = EGenreMessageHtml = {}));
        const EGenreMessageHtmlUtil = {
            construireUrl(aGenreMessageHtml) {
                let lUrl = 'message.html';
                if (aGenreMessageHtml) {
                    lUrl += '?G=' + aGenreMessageHtml;
                }
                return lUrl;
            }
        };
        exports.EGenreMessageHtmlUtil = EGenreMessageHtmlUtil;
    },
    fn: 'enumere_messagehtml.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireDeconnexion = void 0;
        const Invocateur_1 = require("Invocateur");
        const ObjetRequeteSaisieDeconnexion_1 = require("ObjetRequeteSaisieDeconnexion");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_Action_1 = require("Enumere_Action");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const Enumere_MessageHtml_1 = require("Enumere_MessageHtml");
        const Enumere_MessageHtml_2 = require("Enumere_MessageHtml");
        const AccessApp_1 = require("AccessApp");
        exports.UtilitaireDeconnexion = {
            async confirmationDeconnexion(aSansPageDeconnexion) {
                return (0,
                AccessApp_1.getApp)().getMessage().afficher({
                    type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                    message: ObjetTraduction_1.GTraductions.getValeur('connexion.ConfirmezDeconnexion')
                }).then( (aGenreBouton) => {
                    if (aGenreBouton === Enumere_Action_1.EGenreAction.Valider) {
                        return new Promise( (aResolve) => {
                            (0,
                            ControleSaisieEvenement_1.ControleSaisieEvenement)( () => {
                                exports.UtilitaireDeconnexion.deconnexion(aSansPageDeconnexion);
                                aResolve(true);
                            }
                            );
                        }
                        );
                    } else {
                        return false;
                    }
                }
                );
            },
            async deconnexion(aSansPageDeconnexion) {
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                if (GEtatUtilisateur.reset) {
                    GEtatUtilisateur.reset();
                }
                return exports.UtilitaireDeconnexion.requeteDeconnexion().then( () => {
                    const lApplicationProduit = (0,
                    AccessApp_1.getApp)();
                    if (aSansPageDeconnexion) {
                        window.location.reload();
                    } else if (lApplicationProduit.urlLogout) {
                        window.location.href = lApplicationProduit.urlLogout;
                    } else if (lApplicationProduit.acces.estConnexionCAS()) {
                        window.location.href = Enumere_MessageHtml_2.EGenreMessageHtmlUtil.construireUrl(IE.estMobile ? Enumere_MessageHtml_1.EGenreMessageHtml.deconnexionENT_Mobile : Enumere_MessageHtml_1.EGenreMessageHtml.deconnexionENT);
                    } else {
                        lApplicationProduit.finSession({
                            constructionPage: true,
                            statut: 0,
                            jsonErreur: {
                                Titre: '',
                                Message: ''
                            }
                        });
                    }
                }
                );
            },
            async deconnexionEchecChargement() {
                return exports.UtilitaireDeconnexion.requeteDeconnexion().then( () => {
                    (0,
                    AccessApp_1.getApp)().finSession({
                        constructionPage: true,
                        statut: 0,
                        jsonErreur: {
                            Titre: '',
                            Message: ObjetTraduction_1.GTraductions.getValeur('connexion.EchecChargement')
                        }
                    });
                }
                );
            },
            async requeteDeconnexion() {
                return new ObjetRequeteSaisieDeconnexion_1.ObjetRequeteSaisieDeconnexion({}).lancerRequete();
            }
        };
    },
    fn: 'utilitairedeconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TradUtilitaireMAJServeur = exports.UtilitaireMAJServeur = void 0;
        require("UtilitaireMAJPatience.css");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetHtml_1 = require("ObjetHtml");
        const UtilitaireDuree_1 = require("UtilitaireDuree");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const ObjetChaine_1 = require("ObjetChaine");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const LottiePatience_1 = require("LottiePatience");
        exports.UtilitaireMAJServeur = {
            initialiser(aOptions) {
                const lUtil = {
                    fenetre: null,
                    idMessage: 'idMessageMAJ',
                    options: {
                        afficherMessageDelaiLong: true,
                        afficherMessageImminentEleve: false,
                        messageTitreFenetre: TradUtilitaireMAJServeur.MAJ_Titre,
                        messageFenetreMAJPrevue: TradUtilitaireMAJServeur.MAJ_Prevue_S,
                        messageFenetreMAJImminentEleve: TradUtilitaireMAJServeur.MAJ_Imminente_Eleve_S,
                        messageFenetreMAJImminent: TradUtilitaireMAJServeur.MAJ_Imminente_S,
                        messageAnnule: TradUtilitaireMAJServeur.MAJ_Annulee,
                        messageAttenteMAJ: TradUtilitaireMAJServeur.MAJ_Attente,
                        messageMAJEffectue: TradUtilitaireMAJServeur.MAJ_Effectue,
                        cssImage: ''
                    }
                };
                Object.assign(lUtil.options, aOptions);
                Invocateur_1.Invocateur.abonner(ObjetRequeteJSON_1.utils.getIdentNotification('dureeMAJServeur'), (aDuree) => {
                    _notificationMAJ(lUtil, aDuree);
                }
                );
                Invocateur_1.Invocateur.abonner(ObjetRequeteJSON_1.utils.getIdentNotification('MAJAnnulation'), () => {
                    clearTimeout(lUtil.timeoutRechargment);
                    if ((0,
                    AccessApp_1.getApp)().SESSION_FINI) {
                        return;
                    }
                    _ouvrirFenetreSplash({
                        util: lUtil,
                        init: function(aFenetre) {
                            aFenetre.estAnnulation = true;
                        }
                    });
                }
                );
            }
        };
        const lDelaiRepeatRequeteFinMAJ = 10 * 1000;
        const lDureeAttenteMAJPourRequete = 10 * 60 * 1000;
        const lDelaiMAJAvertissement = 4 * 60 * 1000;
        const lDelaiDeconnexion = 1 * 60 * 1000;
        function _ouvrirFenetreSplash(aParams) {
            if (aParams.util.fenetre) {
                aParams.util.fenetre.fermer();
            }
            aParams.util.fenetre = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_SplashMAJServeur, {
                pere: {},
                initialiser: function(aFenetre) {
                    aParams.init(aFenetre);
                    aFenetre.setOptionsFenetre(Object.assign({
                        titre: aParams.util.options.messageTitreFenetre,
                        callbackFermer: function() {
                            delete aParams.util.fenetre;
                            if (aParams.fermer) {
                                aParams.fermer(aFenetre);
                            }
                        }
                    }, aParams.util.options));
                }
            });
            aParams.util.fenetre.afficher();
        }
        function _notificationMAJ(aUtil, aDuree) {
            if (!MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                return;
            }
            let lTimeoutRechargementEcoule = false;
            let lDureeMs = UtilitaireDuree_1.TUtilitaireDuree.dureeEnMs(aDuree);
            const lDateMAJReelle = new Date(Date.now() + lDureeMs + lDelaiDeconnexion);
            if (lDateMAJReelle.getSeconds() === 59) {
                lDateMAJReelle.setSeconds(lDateMAJReelle.getSeconds() + 1);
            }
            const lEstDelaiLong = lDureeMs > lDelaiMAJAvertissement;
            if (!lEstDelaiLong) {
                lDureeMs = Math.floor(UtilitaireDuree_1.TUtilitaireDuree.dureeEnMin(aDuree, true)) * 60 * 1000;
            }
            if (aUtil.timeoutRechargment) {
                clearTimeout(aUtil.timeoutRechargment);
            }
            aUtil.timeoutRechargment = setTimeout( () => {
                lTimeoutRechargementEcoule = true;
                _deconnexion(aUtil);
            }
            , lDureeMs);
            if (lDureeMs < 1000) {
                return;
            }
            if (!lEstDelaiLong || aUtil.options.afficherMessageDelaiLong) {
                aUtil.deconnexionAvecFenetreOuverte = true;
                _ouvrirFenetreSplash({
                    util: aUtil,
                    init: function(aFenetre) {
                        aFenetre.estDelaiLong = lEstDelaiLong;
                        aFenetre.dateReelle = lDateMAJReelle;
                        aFenetre.dureeMs = lDureeMs;
                    },
                    fermer: function() {
                        if (!lTimeoutRechargementEcoule) {
                            aUtil.deconnexionAvecFenetreOuverte = false;
                        }
                    }
                });
            }
        }
        function _deconnexion(aUtil) {
            const lCallback = function() {
                UtilitaireDeconnexion_1.UtilitaireDeconnexion.requeteDeconnexion().then( () => {
                    (0,
                    AccessApp_1.getApp)().finSession({
                        constructionPage: true,
                        statut: 0,
                        sansBoutonSeConnecter: true,
                        jsonErreur: {
                            Titre: ObjetTraduction_1.GTraductions.getValeur('connexion.MessageVeuillezPatienter'),
                            Message: !(0,
                            AccessApp_1.getApp)().estAppliMobile ? IE.jsx.str("div", {
                                id: aUtil.idMessage
                            }, aUtil.options.messageAttenteMAJ, IE.jsx.str("div", {
                                class: "UtilitaireMAJPatience"
                            }, LottiePatience_1.LottiePatience.construire())) : aUtil.options.messageAttenteMAJ
                        }
                    });
                    if (!(0,
                    AccessApp_1.getApp)().estAppliMobile) {
                        aUtil.dateMSDemarrageAttente = Date.now();
                        setTimeout( () => {
                            _gererRechargementPage(aUtil);
                        }
                        , lDelaiRepeatRequeteFinMAJ);
                    }
                }
                );
            };
            (0,
            ControleSaisieEvenement_1.ControleSaisieEvenement)(lCallback);
        }
        function _messageFinMAJ(aUtil) {
            $(document).find('.pageDeconnexion_titre').remove();
            const lModel = () => {
                return {
                    event() {
                        window.location.reload();
                    }
                };
            }
            ;
            ObjetHtml_1.GHtml.setHtml(aUtil.idMessage, IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                style: "padding-bottom:3px; padding-top: 10px;"
            }, aUtil.options.messageMAJEffectue), IE.jsx.str("ie-bouton", {
                "ie-model": lModel
            }, ObjetTraduction_1.GTraductions.getValeur('connexion.SeConnecter'))));
        }
        function _gererRechargementPage(aUtil) {
            const lEnvoyerRequeteDelai = function() {
                setTimeout( () => {
                    if (Date.now() - aUtil.dateMSDemarrageAttente < lDureeAttenteMAJPourRequete) {
                        _gererRechargementPage(aUtil);
                    } else {
                        _messageFinMAJ(aUtil);
                    }
                }
                , lDelaiRepeatRequeteFinMAJ);
            };
            fetch('MAJServeurFin.html').then( (aReponse) => {
                if (aReponse.ok) {
                    if (!aUtil.deconnexionAvecFenetreOuverte) {
                        window.location.reload();
                    } else {
                        _messageFinMAJ(aUtil);
                    }
                } else {
                    return Promise.reject();
                }
            }
            ).catch( () => {
                lEnvoyerRequeteDelai();
            }
            );
        }
        class ObjetFenetre_SplashMAJServeur extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    modale: true,
                    largeur: 500,
                    hauteurBandeau: 25,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')],
                    avecAbonnementFermetureFenetreGenerale: false,
                    couleurFondBandeau: '#ed9e2b',
                    prioriteBlocageAbonnement: GestionnaireModale_1.GestionnaireModale.TypePrioriteBlocageInterface.messageInformatif
                });
            }
            composeContenu() {
                const T = [];
                let lMessage = '';
                if (this.estAnnulation) {
                    lMessage = this.optionsFenetre.messageAnnule;
                } else if (this.estDelaiLong) {
                    lMessage = ObjetChaine_1.GChaine.format(this.optionsFenetre.messageFenetreMAJPrevue, [ObjetDate_1.GDate.formatDate(this.dateReelle, '%hh%sh%mm')]);
                } else {
                    lMessage = ObjetChaine_1.GChaine.format(this.optionsFenetre.afficherMessageImminentEleve ? this.optionsFenetre.messageFenetreMAJImminentEleve : this.optionsFenetre.messageFenetreMAJImminent, [ObjetDate_1.GDate.formatDureeEnMillisecondes(this.dureeMs, '%xm')]);
                }
                T.push('<div class="ofsm_image_MAJ ', this.optionsFenetre.cssImage, '" role="presentation"></div>', '<p class="ofsm_texte">', lMessage, '</p>');
                return T.join('');
            }
        }
        const ObjetTraduction_2 = require("ObjetTraduction");
        const AccessApp_1 = require("AccessApp");
        const TradUtilitaireMAJServeur = ObjetTraduction_2.TraductionsModule.getModule('UtilitaireMAJServeur', {
            MAJ_Titre: '',
            MAJ_Prevue_S: '',
            MAJ_Imminente_Eleve_S: '',
            MAJ_Imminente_S: '',
            MAJ_Annulee: '',
            MAJ_Attente: '',
            MAJ_Effectue: ''
        });
        exports.TradUtilitaireMAJServeur = TradUtilitaireMAJServeur;
    },
    fn: 'utilitairemajserveur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesTypeStatutConnexion = void 0;
        require("TypeStatutConnexion.css");
        exports.StylesTypeStatutConnexion = {
            TypeGenreStatutConnexionGSC_Disponible: 'TypeGenreStatutConnexion-GSC_Disponible',
            TypeGenreStatutConnexionGSC_EnCours: 'TypeGenreStatutConnexion-GSC_EnCours',
            TypeGenreStatutConnexionGSC_NePasDeranger: 'TypeGenreStatutConnexion-GSC_NePasDeranger',
            TypeGenreStatutConnexionGSC_Deconnecte: 'TypeGenreStatutConnexion-GSC_Deconnecte',
            TypeGenreStatutConnexionDoubleIcone: 'TypeGenreStatutConnexion-double-icone',
            asTag: 'as-tag'
        };
    },
    fn: 'typestatutconnexion.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreStatutConnexionUtil = exports.TypeGenreStatutConnexionBase = exports.TypeGenreStatutConnexion = void 0;
        var TypeGenreStatutConnexion;
        (function(TypeGenreStatutConnexion) {
            TypeGenreStatutConnexion[TypeGenreStatutConnexion["GSC_Disponible"] = 0] = "GSC_Disponible";
            TypeGenreStatutConnexion[TypeGenreStatutConnexion["GSC_EnCours"] = 1] = "GSC_EnCours";
            TypeGenreStatutConnexion[TypeGenreStatutConnexion["GSC_NePasDeranger"] = 2] = "GSC_NePasDeranger";
            TypeGenreStatutConnexion[TypeGenreStatutConnexion["GSC_Deconnecte"] = 3] = "GSC_Deconnecte";
        }
        )(TypeGenreStatutConnexion || (exports.TypeGenreStatutConnexion = TypeGenreStatutConnexion = {}));
        var TypeGenreStatutConnexionBase;
        (function(TypeGenreStatutConnexionBase) {
            TypeGenreStatutConnexionBase[TypeGenreStatutConnexionBase["SCB_Connecte"] = 0] = "SCB_Connecte";
            TypeGenreStatutConnexionBase[TypeGenreStatutConnexionBase["SCB_NePasDeranger"] = 1] = "SCB_NePasDeranger";
            TypeGenreStatutConnexionBase[TypeGenreStatutConnexionBase["SCB_Invisible"] = 2] = "SCB_Invisible";
        }
        )(TypeGenreStatutConnexionBase || (exports.TypeGenreStatutConnexionBase = TypeGenreStatutConnexionBase = {}));
        const ObjetTraduction_1 = require("ObjetTraduction");
        require("TypeStatutConnexion.css");
        const TypeGenreStatutConnexionUtil = {
            getClassIcon(aGenre) {
                switch (aGenre) {
                case TypeGenreStatutConnexion.GSC_Disponible:
                    return 'TypeGenreStatutConnexion-GSC_Disponible';
                case TypeGenreStatutConnexion.GSC_EnCours:
                    return 'TypeGenreStatutConnexion-GSC_EnCours';
                case TypeGenreStatutConnexion.GSC_NePasDeranger:
                    return 'TypeGenreStatutConnexion-GSC_NePasDeranger';
                default:
                    return 'TypeGenreStatutConnexion-GSC_Deconnecte';
                }
            },
            toLibelle(aGenre, aAvecLibelleInvisible) {
                switch (aGenre) {
                case TypeGenreStatutConnexion.GSC_Disponible:
                    return ObjetTraduction_1.GTraductions.getValeur('Messagerie.Connectee');
                case TypeGenreStatutConnexion.GSC_EnCours:
                    return ObjetTraduction_1.GTraductions.getValeur('Messagerie.EnClasse');
                case TypeGenreStatutConnexion.GSC_NePasDeranger:
                    return ObjetTraduction_1.GTraductions.getValeur('Messagerie.NePasDeranger');
                default:
                    return aAvecLibelleInvisible ? ObjetTraduction_1.GTraductions.getValeur('Messagerie.Invisible') : ObjetTraduction_1.GTraductions.getValeur('Messagerie.NonConnectee');
                }
            }
        };
        exports.TypeGenreStatutConnexionUtil = TypeGenreStatutConnexionUtil;
    },
    fn: 'typestatutconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDonneesCentraleNotificationsSco = void 0;
        const Invocateur_1 = require("Invocateur");
        const ObjetDonneesCentraleNotifications_1 = require("ObjetDonneesCentraleNotifications");
        const TypeStatutConnexion_1 = require("TypeStatutConnexion");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        class ObjetDonneesCentraleNotificationsSco extends ObjetDonneesCentraleNotifications_1.ObjetDonneesCentraleNotifications {
            constructor(...aParams) {
                super(...aParams);
                this.compteurNotifsParOnglet = {};
                Invocateur_1.Invocateur.abonner('notification_communication', (aNotifs) => {
                    for (let i = 0; i < aNotifs.length; i++) {
                        this.compteurNotifsParOnglet[aNotifs[i].onglet] = aNotifs[i];
                    }
                    this._notifSurModification({
                        notification_communication: true
                    });
                }
                , this);
                Invocateur_1.Invocateur.abonner('modifier_notification_communication', (aGenreOnglet, aModificateur) => {
                    if (aModificateur === 0) {
                        return;
                    }
                    if (!this.compteurNotifsParOnglet[aGenreOnglet]) {
                        this.compteurNotifsParOnglet[aGenreOnglet] = {
                            nb: 0,
                            onglet: aGenreOnglet
                        };
                    }
                    this.compteurNotifsParOnglet[aGenreOnglet].nb = (this.compteurNotifsParOnglet[aGenreOnglet].nb || 0) + aModificateur;
                    this.nbNotifs += aModificateur;
                    this._notifSurModification({
                        modifier_notification_communication: true
                    });
                }
                , this);
                Invocateur_1.Invocateur.abonnerUnique('notification_chatVS', (aListe) => {
                    this.listeNotifsChatVS = aListe;
                }
                );
                this.nbConversationEnCours = 0;
                Invocateur_1.Invocateur.abonner('modifier_nb_conversationEnCours', (aNb) => {
                    this.nbConversationEnCours = aNb;
                    this._notifSurModification();
                }
                , this);
                this.statutConnexionCommunication = TypeStatutConnexion_1.TypeGenreStatutConnexion.GSC_Deconnecte;
                Invocateur_1.Invocateur.abonner(ObjetRequeteJSON_1.utils.getIdentNotification('statutConnexion'), (aStatut) => {
                    this.statutConnexionCommunication = aStatut;
                }
                );
            }
            _notifSurModification(aParams) {
                super._notifSurModification(aParams);
            }
            getDonnees(...aParams) {
                return Object.assign({}, {
                    compteurNotifsParOnglet: this.compteurNotifsParOnglet,
                    nbConversationEnCours: this.nbConversationEnCours
                }, super.getDonnees(...aParams));
            }
        }
        exports.ObjetDonneesCentraleNotificationsSco = ObjetDonneesCentraleNotificationsSco;
    },
    fn: 'objetdonneescentralenotificationssco.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetParametresUtilisateur = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const MethodesObjet_1 = require("MethodesObjet");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetParametresUtilisateur {
            constructor() {
                this.init();
            }
            get(aChaine) {
                switch (aChaine) {
                default:
                    {
                        let lValue = MethodesObjet_1.MethodesObjet.get(this._parametres, aChaine);
                        if (lValue === undefined) {
                            lValue = false;
                        }
                        return lValue;
                    }
                }
            }
            set(aChaine, aValeur, aIgnorerSaisie) {
                const lAncienneValeur = MethodesObjet_1.MethodesObjet.get(this._parametres, aChaine);
                let lResult = false;
                if (aChaine.trim && aChaine.split) {
                    const lSplit = aChaine.split('.');
                    let lObjet = this._parametres;
                    const lLength = lSplit.length;
                    for (let i = 0; i < lLength - 1; i++) {
                        if (!MethodesObjet_1.MethodesObjet.isObject(lObjet[lSplit[i]])) {
                            lObjet[lSplit[i]] = {};
                        }
                        lObjet = lObjet[lSplit[i]];
                    }
                }
                switch (aChaine) {
                case 'widgets':
                    this._parametres.widgets = aValeur;
                    lResult = true;
                    break;
                default:
                    lResult = MethodesObjet_1.MethodesObjet.set(this._parametres, aChaine, aValeur);
                    if (lResult) {
                        lResult = aValeur !== lAncienneValeur || MethodesObjet_1.MethodesObjet.isObject(aValeur);
                    }
                }
                if (lResult && !aIgnorerSaisie) {
                    this._save();
                }
            }
            has(aChaine) {
                switch (aChaine) {
                default:
                    {
                        const lValue = MethodesObjet_1.MethodesObjet.get(this._parametres, aChaine);
                        if (lValue !== undefined) {
                            return true;
                        }
                    }
                }
                return false;
            }
            init() {
                this._parametres = {};
            }
            chargerJSON(aJSON) {
                if (aJSON) {
                    this._parametres = aJSON;
                }
            }
            _save() {
                new ObjetRequeteSaisieParametresUtilisateur().lancerRequete(this._parametres);
            }
        }
        exports.ObjetParametresUtilisateur = ObjetParametresUtilisateur;
        class ObjetRequeteSaisieParametresUtilisateur extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            constructor() {
                super(null, () => {}
                );
                this.setOptions({
                    sansBlocageInterface: true
                });
            }
            lancerRequete(aParam) {
                this.JSON.parametres = aParam;
                return this.appelAsynchrone();
            }
            actionApresRequete() {
                this.callbackReussite.appel();
            }
        }
        CollectionRequetes_1.Requetes.inscrire('SaisieParametresUtilisateur', ObjetRequeteSaisieParametresUtilisateur);
    },
    fn: 'objetparametresutilisateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreOnglet = void 0;
        var EGenreOnglet;
        (function(EGenreOnglet) {
            EGenreOnglet[EGenreOnglet["MenuOnglets"] = -2] = "MenuOnglets";
            EGenreOnglet[EGenreOnglet["GeneralAccueil"] = -1] = "GeneralAccueil";
            EGenreOnglet[EGenreOnglet["GeneralRacine"] = 0] = "GeneralRacine";
            EGenreOnglet[EGenreOnglet["GeneralVieEtablissement"] = 2] = "GeneralVieEtablissement";
            EGenreOnglet[EGenreOnglet["GeneralNotes"] = 3] = "GeneralNotes";
            EGenreOnglet[EGenreOnglet["GeneralBulletins"] = 4] = "GeneralBulletins";
            EGenreOnglet[EGenreOnglet["GeneralVieScolaire"] = 5] = "GeneralVieScolaire";
            EGenreOnglet[EGenreOnglet["GeneralCompte"] = 6] = "GeneralCompte";
            EGenreOnglet[EGenreOnglet["Accueil"] = 7] = "Accueil";
            EGenreOnglet[EGenreOnglet["Informations"] = 8] = "Informations";
            EGenreOnglet[EGenreOnglet["Agenda"] = 9] = "Agenda";
            EGenreOnglet[EGenreOnglet["Menus"] = 10] = "Menus";
            EGenreOnglet[EGenreOnglet["Vacances"] = 11] = "Vacances";
            EGenreOnglet[EGenreOnglet["Releve"] = 12] = "Releve";
            EGenreOnglet[EGenreOnglet["Bulletins"] = 13] = "Bulletins";
            EGenreOnglet[EGenreOnglet["Orientation"] = 14] = "Orientation";
            EGenreOnglet[EGenreOnglet["SaisieOrientation"] = 15] = "SaisieOrientation";
            EGenreOnglet[EGenreOnglet["EmploiDuTemps"] = 16] = "EmploiDuTemps";
            EGenreOnglet[EGenreOnglet["CahierDeTexte"] = 17] = "CahierDeTexte";
            EGenreOnglet[EGenreOnglet["Remplacements"] = 18] = "Remplacements";
            EGenreOnglet[EGenreOnglet["VieScolaire_Recapitulatif"] = 19] = "VieScolaire_Recapitulatif";
            EGenreOnglet[EGenreOnglet["Dossiers"] = 20] = "Dossiers";
            EGenreOnglet[EGenreOnglet["Compte"] = 21] = "Compte";
            EGenreOnglet[EGenreOnglet["CompteEleve"] = 22] = "CompteEleve";
            EGenreOnglet[EGenreOnglet["SaisieNotes"] = 23] = "SaisieNotes";
            EGenreOnglet[EGenreOnglet["DEV_AppelEtSuivi"] = 24] = "DEV_AppelEtSuivi";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsBulletin"] = 25] = "SaisieAppreciationsBulletin";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsBulletinGroupe"] = 26] = "SaisieAppreciationsBulletinGroupe";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsGenerales"] = 27] = "SaisieAppreciationsGenerales";
            EGenreOnglet[EGenreOnglet["SaisieCahierDeTextes"] = 28] = "SaisieCahierDeTextes";
            EGenreOnglet[EGenreOnglet["SaisieAbsences"] = 29] = "SaisieAbsences";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsReleve"] = 30] = "SaisieAppreciationsReleve";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsReleve_Gpe"] = 31] = "SaisieAppreciationsReleve_Gpe";
            EGenreOnglet[EGenreOnglet["FicheBrevet"] = 34] = "FicheBrevet";
            EGenreOnglet[EGenreOnglet["CompteGadget"] = 35] = "CompteGadget";
            EGenreOnglet[EGenreOnglet["InfoMedicale"] = 36] = "InfoMedicale";
            EGenreOnglet[EGenreOnglet["EquipePedagogique"] = 37] = "EquipePedagogique";
            EGenreOnglet[EGenreOnglet["Graphique"] = 38] = "Graphique";
            EGenreOnglet[EGenreOnglet["GeneralResultats"] = 39] = "GeneralResultats";
            EGenreOnglet[EGenreOnglet["GeneralOrientations"] = 40] = "GeneralOrientations";
            EGenreOnglet[EGenreOnglet["ConseilDeClasse"] = 41] = "ConseilDeClasse";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationDeFinDeStage"] = 42] = "SaisieAppreciationDeFinDeStage";
            EGenreOnglet[EGenreOnglet["GeneralDansLaClasse"] = 43] = "GeneralDansLaClasse";
            EGenreOnglet[EGenreOnglet["SuiviPluriannuel"] = 44] = "SuiviPluriannuel";
            EGenreOnglet[EGenreOnglet["BilanParDomaine"] = 45] = "BilanParDomaine";
            EGenreOnglet[EGenreOnglet["CahierDeTextes_Contenu"] = 47] = "CahierDeTextes_Contenu";
            EGenreOnglet[EGenreOnglet["CahierDeTextes_TravailAFaire"] = 48] = "CahierDeTextes_TravailAFaire";
            EGenreOnglet[EGenreOnglet["InfosPerso"] = 49] = "InfosPerso";
            EGenreOnglet[EGenreOnglet["GeneralStage"] = 52] = "GeneralStage";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsFicheBrevet"] = 53] = "SaisieAppreciationsFicheBrevet";
            EGenreOnglet[EGenreOnglet["GeneralCompetence"] = 55] = "GeneralCompetence";
            EGenreOnglet[EGenreOnglet["Evaluation"] = 56] = "Evaluation";
            EGenreOnglet[EGenreOnglet["GeneralBrevet"] = 57] = "GeneralBrevet";
            EGenreOnglet[EGenreOnglet["GeneralEquipePedagogique"] = 58] = "GeneralEquipePedagogique";
            EGenreOnglet[EGenreOnglet["GeneralMesClasses"] = 59] = "GeneralMesClasses";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsClasse"] = 60] = "EmploiDuTempsClasse";
            EGenreOnglet[EGenreOnglet["General_CahierDeTextes"] = 61] = "General_CahierDeTextes";
            EGenreOnglet[EGenreOnglet["CahierDeTextesClasse"] = 62] = "CahierDeTextesClasse";
            EGenreOnglet[EGenreOnglet["ResultatsClasses"] = 64] = "ResultatsClasses";
            EGenreOnglet[EGenreOnglet["ListeEvaluation"] = 65] = "ListeEvaluation";
            EGenreOnglet[EGenreOnglet["ListeEvaluationHistorique"] = 67] = "ListeEvaluationHistorique";
            EGenreOnglet[EGenreOnglet["Punitions"] = 68] = "Punitions";
            EGenreOnglet[EGenreOnglet["Entreprise"] = 69] = "Entreprise";
            EGenreOnglet[EGenreOnglet["CahierDeTexte_Progression"] = 71] = "CahierDeTexte_Progression";
            EGenreOnglet[EGenreOnglet["Dispenses"] = 72] = "Dispenses";
            EGenreOnglet[EGenreOnglet["AbsencesEtRetards"] = 73] = "AbsencesEtRetards";
            EGenreOnglet[EGenreOnglet["SuivisAbsenceRetard"] = 74] = "SuivisAbsenceRetard";
            EGenreOnglet[EGenreOnglet["Affectation_Progression"] = 75] = "Affectation_Progression";
            EGenreOnglet[EGenreOnglet["RecapitulatifAbsences"] = 76] = "RecapitulatifAbsences";
            EGenreOnglet[EGenreOnglet["TrombinoscopeClasse"] = 77] = "TrombinoscopeClasse";
            EGenreOnglet[EGenreOnglet["Saisie_CarnetCorrespondance"] = 78] = "Saisie_CarnetCorrespondance";
            EGenreOnglet[EGenreOnglet["IManuels"] = 79] = "IManuels";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsSalle"] = 81] = "EmploiDuTempsSalle";
            EGenreOnglet[EGenreOnglet["Trombinoscope"] = 82] = "Trombinoscope";
            EGenreOnglet[EGenreOnglet["LivretScolaire_Fiche"] = 83] = "LivretScolaire_Fiche";
            EGenreOnglet[EGenreOnglet["QCM"] = 84] = "QCM";
            EGenreOnglet[EGenreOnglet["QCM_Saisie"] = 85] = "QCM_Saisie";
            EGenreOnglet[EGenreOnglet["QCM_Bibliotheque"] = 86] = "QCM_Bibliotheque";
            EGenreOnglet[EGenreOnglet["QCM_Reponse"] = 87] = "QCM_Reponse";
            EGenreOnglet[EGenreOnglet["CDT_TAF"] = 88] = "CDT_TAF";
            EGenreOnglet[EGenreOnglet["CDT_Contenu"] = 89] = "CDT_Contenu";
            EGenreOnglet[EGenreOnglet["Rencontre"] = 90] = "Rencontre";
            EGenreOnglet[EGenreOnglet["Rencontre_Indisponibilites"] = 91] = "Rencontre_Indisponibilites";
            EGenreOnglet[EGenreOnglet["Rencontre_Desideratas"] = 92] = "Rencontre_Desideratas";
            EGenreOnglet[EGenreOnglet["CreneauxLibres"] = 93] = "CreneauxLibres";
            EGenreOnglet[EGenreOnglet["General_Rencontre_Planning"] = 94] = "General_Rencontre_Planning";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsProfesseur"] = 97] = "EmploiDuTempsProfesseur";
            EGenreOnglet[EGenreOnglet["SaisieOffresStage"] = 98] = "SaisieOffresStage";
            EGenreOnglet[EGenreOnglet["RessourcePedagogique"] = 99] = "RessourcePedagogique";
            EGenreOnglet[EGenreOnglet["BulletinCompetences"] = 100] = "BulletinCompetences";
            EGenreOnglet[EGenreOnglet["OffresStage"] = 101] = "OffresStage";
            EGenreOnglet[EGenreOnglet["Casier"] = 102] = "Casier";
            EGenreOnglet[EGenreOnglet["Casier_Documents"] = 103] = "Casier_Documents";
            EGenreOnglet[EGenreOnglet["Casier_MonCasier"] = 104] = "Casier_MonCasier";
            EGenreOnglet[EGenreOnglet["ListeEleves"] = 105] = "ListeEleves";
            EGenreOnglet[EGenreOnglet["Genral_Classes"] = 106] = "Genral_Classes";
            EGenreOnglet[EGenreOnglet["General_Salles"] = 107] = "General_Salles";
            EGenreOnglet[EGenreOnglet["LivretScolaire"] = 108] = "LivretScolaire";
            EGenreOnglet[EGenreOnglet["LivretScolaire_Appreciations"] = 109] = "LivretScolaire_Appreciations";
            EGenreOnglet[EGenreOnglet["LivretScolaire_Competences"] = 110] = "LivretScolaire_Competences";
            EGenreOnglet[EGenreOnglet["Graphique_Profil"] = 111] = "Graphique_Profil";
            EGenreOnglet[EGenreOnglet["Graphique_Evolution"] = 112] = "Graphique_Evolution";
            EGenreOnglet[EGenreOnglet["SaisieAbsences_AppelEtSuivi"] = 113] = "SaisieAbsences_AppelEtSuivi";
            EGenreOnglet[EGenreOnglet["SaisieAbsences_Appel"] = 114] = "SaisieAbsences_Appel";
            EGenreOnglet[EGenreOnglet["Remplacements_Grille"] = 118] = "Remplacements_Grille";
            EGenreOnglet[EGenreOnglet["Remplacements_Tableau"] = 119] = "Remplacements_Tableau";
            EGenreOnglet[EGenreOnglet["Rencontre_Planning_Liste"] = 120] = "Rencontre_Planning_Liste";
            EGenreOnglet[EGenreOnglet["Rencontre_Planning_Grille"] = 121] = "Rencontre_Planning_Grille";
            EGenreOnglet[EGenreOnglet["GeneralReleveDeNotes"] = 122] = "GeneralReleveDeNotes";
            EGenreOnglet[EGenreOnglet["ListeProfesseurs"] = 123] = "ListeProfesseurs";
            EGenreOnglet[EGenreOnglet["ListeClasses"] = 124] = "ListeClasses";
            EGenreOnglet[EGenreOnglet["ListeGroupes"] = 125] = "ListeGroupes";
            EGenreOnglet[EGenreOnglet["ListeResponsables"] = 126] = "ListeResponsables";
            EGenreOnglet[EGenreOnglet["ListePersonnels"] = 127] = "ListePersonnels";
            EGenreOnglet[EGenreOnglet["Genral_Eleves"] = 128] = "Genral_Eleves";
            EGenreOnglet[EGenreOnglet["General_Professeurs"] = 129] = "General_Professeurs";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsEleve"] = 130] = "EmploiDuTempsEleve";
            EGenreOnglet[EGenreOnglet["Messagerie"] = 131] = "Messagerie";
            EGenreOnglet[EGenreOnglet["General_Messagerie"] = 132] = "General_Messagerie";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsPersonnelEtablissement"] = 134] = "EmploiDuTempsPersonnelEtablissement";
            EGenreOnglet[EGenreOnglet["Incidents"] = 135] = "Incidents";
            EGenreOnglet[EGenreOnglet["SaisieAbsences_Appel_Professeur"] = 136] = "SaisieAbsences_Appel_Professeur";
            EGenreOnglet[EGenreOnglet["AutorisationSortie"] = 137] = "AutorisationSortie";
            EGenreOnglet[EGenreOnglet["RecapAbsences"] = 138] = "RecapAbsences";
            EGenreOnglet[EGenreOnglet["RecapFeuilleAppel"] = 139] = "RecapFeuilleAppel";
            EGenreOnglet[EGenreOnglet["RecapPunitions"] = 140] = "RecapPunitions";
            EGenreOnglet[EGenreOnglet["ProgrammesBO"] = 141] = "ProgrammesBO";
            EGenreOnglet[EGenreOnglet["Trombinoscope_Professeur"] = 142] = "Trombinoscope_Professeur";
            EGenreOnglet[EGenreOnglet["Trombinoscope_Personnel"] = 143] = "Trombinoscope_Personnel";
            EGenreOnglet[EGenreOnglet["ParametresUtilisateur"] = 144] = "ParametresUtilisateur";
            EGenreOnglet[EGenreOnglet["ListeStagiaires"] = 145] = "ListeStagiaires";
            EGenreOnglet[EGenreOnglet["CoursNonAssures"] = 146] = "CoursNonAssures";
            EGenreOnglet[EGenreOnglet["General_Personnels"] = 147] = "General_Personnels";
            EGenreOnglet[EGenreOnglet["DocumentsATelecharger"] = 148] = "DocumentsATelecharger";
            EGenreOnglet[EGenreOnglet["General_Progression"] = 149] = "General_Progression";
            EGenreOnglet[EGenreOnglet["BibliothequeProgression"] = 150] = "BibliothequeProgression";
            EGenreOnglet[EGenreOnglet["General_CahierDeTextes_Saisie"] = 151] = "General_CahierDeTextes_Saisie";
            EGenreOnglet[EGenreOnglet["General_CahierDeTextes_Consultation"] = 152] = "General_CahierDeTextes_Consultation";
            EGenreOnglet[EGenreOnglet["General_Documentation"] = 153] = "General_Documentation";
            EGenreOnglet[EGenreOnglet["ListeDevoirSurTable"] = 154] = "ListeDevoirSurTable";
            EGenreOnglet[EGenreOnglet["AbsencesGrille"] = 155] = "AbsencesGrille";
            EGenreOnglet[EGenreOnglet["General_Materiels"] = 156] = "General_Materiels";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsMateriel"] = 157] = "EmploiDuTempsMateriel";
            EGenreOnglet[EGenreOnglet["ListeDiffusion"] = 158] = "ListeDiffusion";
            EGenreOnglet[EGenreOnglet["RecapitulatifScolarite"] = 161] = "RecapitulatifScolarite";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine"] = 162] = "PlanningParSemaine";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Professeur"] = 163] = "PlanningParSemaine_Professeur";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Eleve"] = 164] = "PlanningParSemaine_Eleve";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Classe"] = 165] = "PlanningParSemaine_Classe";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Salle"] = 166] = "PlanningParSemaine_Salle";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_PersonnelEtablissement"] = 167] = "PlanningParSemaine_PersonnelEtablissement";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Materiel"] = 168] = "PlanningParSemaine_Materiel";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Professeur"] = 169] = "PlanningParRessource_Professeur";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Eleve"] = 170] = "PlanningParRessource_Eleve";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Classe"] = 171] = "PlanningParRessource_Classe";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Salle"] = 172] = "PlanningParRessource_Salle";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_PersonnelEtablissement"] = 173] = "PlanningParRessource_PersonnelEtablissement";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Materiel"] = 174] = "PlanningParRessource_Materiel";
            EGenreOnglet[EGenreOnglet["General_Intendance"] = 175] = "General_Intendance";
            EGenreOnglet[EGenreOnglet["Intendance_SaisieDemandesTravaux"] = 176] = "Intendance_SaisieDemandesTravaux";
            EGenreOnglet[EGenreOnglet["RessourcePedagogique_Partage"] = 177] = "RessourcePedagogique_Partage";
            EGenreOnglet[EGenreOnglet["BilanFinDeCycle"] = 178] = "BilanFinDeCycle";
            EGenreOnglet[EGenreOnglet["Trombinoscope_EquipePedagogique"] = 179] = "Trombinoscope_EquipePedagogique";
            EGenreOnglet[EGenreOnglet["ParcoursEducatif_Bulletin"] = 180] = "ParcoursEducatif_Bulletin";
            EGenreOnglet[EGenreOnglet["ParcoursEducatif_BullCompetence"] = 181] = "ParcoursEducatif_BullCompetence";
            EGenreOnglet[EGenreOnglet["General_Competences_NouveauSocleCommun"] = 182] = "General_Competences_NouveauSocleCommun";
            EGenreOnglet[EGenreOnglet["Saisie_Punitions"] = 192] = "Saisie_Punitions";
            EGenreOnglet[EGenreOnglet["Saisie_Dispenses"] = 193] = "Saisie_Dispenses";
            EGenreOnglet[EGenreOnglet["EvaluationAccueilStage"] = 195] = "EvaluationAccueilStage";
            EGenreOnglet[EGenreOnglet["ListeServices"] = 196] = "ListeServices";
            EGenreOnglet[EGenreOnglet["RecapitulatifExportLSU"] = 197] = "RecapitulatifExportLSU";
            EGenreOnglet[EGenreOnglet["DernieresNotes"] = 198] = "DernieresNotes";
            EGenreOnglet[EGenreOnglet["Competences_GrillesParDomaine"] = 199] = "Competences_GrillesParDomaine";
            EGenreOnglet[EGenreOnglet["Competences_GrillesParMatiere"] = 200] = "Competences_GrillesParMatiere";
            EGenreOnglet[EGenreOnglet["DernieresEvaluations"] = 201] = "DernieresEvaluations";
            EGenreOnglet[EGenreOnglet["ReleveEvaluationsParService"] = 202] = "ReleveEvaluationsParService";
            EGenreOnglet[EGenreOnglet["General_Competences_Grilles"] = 203] = "General_Competences_Grilles";
            EGenreOnglet[EGenreOnglet["General_Competences_Evaluation"] = 204] = "General_Competences_Evaluation";
            EGenreOnglet[EGenreOnglet["General_Competences_BilanPeriodique"] = 205] = "General_Competences_BilanPeriodique";
            EGenreOnglet[EGenreOnglet["General_Competences_BilanFinDeCycle"] = 206] = "General_Competences_BilanFinDeCycle";
            EGenreOnglet[EGenreOnglet["General_MonEmploiDuTemps"] = 207] = "General_MonEmploiDuTemps";
            EGenreOnglet[EGenreOnglet["General_MesEleves"] = 208] = "General_MesEleves";
            EGenreOnglet[EGenreOnglet["General_MesCollegues"] = 209] = "General_MesCollegues";
            EGenreOnglet[EGenreOnglet["General_OutilsPedagogiques"] = 210] = "General_OutilsPedagogiques";
            EGenreOnglet[EGenreOnglet["General_CDT"] = 211] = "General_CDT";
            EGenreOnglet[EGenreOnglet["General_VieScolaire_Recapitulatif"] = 212] = "General_VieScolaire_Recapitulatif";
            EGenreOnglet[EGenreOnglet["General_RessourcesPedagogiques"] = 214] = "General_RessourcesPedagogiques";
            EGenreOnglet[EGenreOnglet["ReleveEvaluationsParClasse"] = 215] = "ReleveEvaluationsParClasse";
            EGenreOnglet[EGenreOnglet["NiveauxDeMaitriseParMatiere"] = 216] = "NiveauxDeMaitriseParMatiere";
            EGenreOnglet[EGenreOnglet["General_BulletinsEleveClasse"] = 217] = "General_BulletinsEleveClasse";
            EGenreOnglet[EGenreOnglet["General_BulletinCompetencesEleveClasse"] = 218] = "General_BulletinCompetencesEleveClasse";
            EGenreOnglet[EGenreOnglet["BulletinCompetencesClasse"] = 219] = "BulletinCompetencesClasse";
            EGenreOnglet[EGenreOnglet["General_MesColleguesPersonnels"] = 220] = "General_MesColleguesPersonnels";
            EGenreOnglet[EGenreOnglet["General_ProceduresDisciplinaires"] = 221] = "General_ProceduresDisciplinaires";
            EGenreOnglet[EGenreOnglet["General_Dispenses"] = 222] = "General_Dispenses";
            EGenreOnglet[EGenreOnglet["General_Competences_BilanDomaine"] = 223] = "General_Competences_BilanDomaine";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsGenerales_Competences"] = 224] = "SaisieAppreciationsGenerales_Competences";
            EGenreOnglet[EGenreOnglet["General_Appreciations"] = 225] = "General_Appreciations";
            EGenreOnglet[EGenreOnglet["General_Appreciations_Competences"] = 226] = "General_Appreciations_Competences";
            EGenreOnglet[EGenreOnglet["BulletinAnneesPrec_Note"] = 227] = "BulletinAnneesPrec_Note";
            EGenreOnglet[EGenreOnglet["BulletinAnneesPrec_Competence"] = 228] = "BulletinAnneesPrec_Competence";
            EGenreOnglet[EGenreOnglet["ListeMatieres"] = 229] = "ListeMatieres";
            EGenreOnglet[EGenreOnglet["ReleveDeCompetences"] = 230] = "ReleveDeCompetences";
            EGenreOnglet[EGenreOnglet["TableauDeBord"] = 231] = "TableauDeBord";
            EGenreOnglet[EGenreOnglet["ServicesPeriscolaires"] = 232] = "ServicesPeriscolaires";
            EGenreOnglet[EGenreOnglet["Inscriptions"] = 233] = "Inscriptions";
            EGenreOnglet[EGenreOnglet["EmploiDuTemps_Annuel_Classe"] = 234] = "EmploiDuTemps_Annuel_Classe";
            EGenreOnglet[EGenreOnglet["InfosEnfant_Prim"] = 235] = "InfosEnfant_Prim";
            EGenreOnglet[EGenreOnglet["General_BilanParDomaine"] = 237] = "General_BilanParDomaine";
            EGenreOnglet[EGenreOnglet["General_CahierJournal"] = 238] = "General_CahierJournal";
            EGenreOnglet[EGenreOnglet["General_PyramideDesAges"] = 240] = "General_PyramideDesAges";
            EGenreOnglet[EGenreOnglet["PyramideDesAges_Histogramme"] = 241] = "PyramideDesAges_Histogramme";
            EGenreOnglet[EGenreOnglet["PyramideDesAges_Repartition"] = 242] = "PyramideDesAges_Repartition";
            EGenreOnglet[EGenreOnglet["General_CahierDeTextes_Planification"] = 243] = "General_CahierDeTextes_Planification";
            EGenreOnglet[EGenreOnglet["CDT_Planning"] = 244] = "CDT_Planning";
            EGenreOnglet[EGenreOnglet["QCM_Collaboratif"] = 245] = "QCM_Collaboratif";
            EGenreOnglet[EGenreOnglet["AppreciationsBulletinParEleve"] = 246] = "AppreciationsBulletinParEleve";
            EGenreOnglet[EGenreOnglet["Intendance_SaisieSecretariat"] = 247] = "Intendance_SaisieSecretariat";
            EGenreOnglet[EGenreOnglet["Competences_GrillesCompetencesNumeriques"] = 248] = "Competences_GrillesCompetencesNumeriques";
            EGenreOnglet[EGenreOnglet["CompetencesNumeriques"] = 249] = "CompetencesNumeriques";
            EGenreOnglet[EGenreOnglet["ManuelsNumeriques"] = 250] = "ManuelsNumeriques";
            EGenreOnglet[EGenreOnglet["General_Blog"] = 251] = "General_Blog";
            EGenreOnglet[EGenreOnglet["Blog_FilActu"] = 253] = "Blog_FilActu";
            EGenreOnglet[EGenreOnglet["Blog_Mediatheque"] = 254] = "Blog_Mediatheque";
            EGenreOnglet[EGenreOnglet["SaisieTravailAFaire"] = 255] = "SaisieTravailAFaire";
            EGenreOnglet[EGenreOnglet["General_InscriptionsEtablissement"] = 256] = "General_InscriptionsEtablissement";
            EGenreOnglet[EGenreOnglet["InscriptionsEtablissement"] = 257] = "InscriptionsEtablissement";
            EGenreOnglet[EGenreOnglet["SaisieAbsences_AppelEtSuiviProfesseur"] = 259] = "SaisieAbsences_AppelEtSuiviProfesseur";
            EGenreOnglet[EGenreOnglet["SaisieAvisProfesseur"] = 260] = "SaisieAvisProfesseur";
            EGenreOnglet[EGenreOnglet["SuiviElevesTutores"] = 261] = "SuiviElevesTutores";
            EGenreOnglet[EGenreOnglet["Onglet_General_Suivi"] = 262] = "Onglet_General_Suivi";
            EGenreOnglet[EGenreOnglet["SuiviJustificationsAbsencesRetards"] = 263] = "SuiviJustificationsAbsencesRetards";
            EGenreOnglet[EGenreOnglet["Intendance_SaisieDemandesInformatique"] = 264] = "Intendance_SaisieDemandesInformatique";
            EGenreOnglet[EGenreOnglet["Intendance_SaisieCommandes"] = 265] = "Intendance_SaisieCommandes";
            EGenreOnglet[EGenreOnglet["SaisieCahierJournal"] = 266] = "SaisieCahierJournal";
            EGenreOnglet[EGenreOnglet["Onglet_General_Apprentissages"] = 267] = "Onglet_General_Apprentissages";
            EGenreOnglet[EGenreOnglet["ListeApprentissages"] = 268] = "ListeApprentissages";
            EGenreOnglet[EGenreOnglet["CarnetDeSuivi"] = 269] = "CarnetDeSuivi";
            EGenreOnglet[EGenreOnglet["SyntheseAcquis"] = 270] = "SyntheseAcquis";
            EGenreOnglet[EGenreOnglet["DocumentsParents"] = 271] = "DocumentsParents";
            EGenreOnglet[EGenreOnglet["RecapDevoirRendu"] = 272] = "RecapDevoirRendu";
            EGenreOnglet[EGenreOnglet["SaisieAvisParcoursup"] = 273] = "SaisieAvisParcoursup";
            EGenreOnglet[EGenreOnglet["SaisieAppelPeriScolaire"] = 274] = "SaisieAppelPeriScolaire";
            EGenreOnglet[EGenreOnglet["ForumPedagogique"] = 275] = "ForumPedagogique";
            EGenreOnglet[EGenreOnglet["General_Competences_SuiviCompetences"] = 276] = "General_Competences_SuiviCompetences";
            EGenreOnglet[EGenreOnglet["SuiviResultatsCompetences"] = 277] = "SuiviResultatsCompetences";
            EGenreOnglet[EGenreOnglet["BilanCompetencesParMatiere"] = 278] = "BilanCompetencesParMatiere";
            EGenreOnglet[EGenreOnglet["SaisieApprGeneralesReleve"] = 279] = "SaisieApprGeneralesReleve";
            EGenreOnglet[EGenreOnglet["Onglet_General_Pedagogie"] = 280] = "Onglet_General_Pedagogie";
            EGenreOnglet[EGenreOnglet["BilanAnnuelApprentissage"] = 281] = "BilanAnnuelApprentissage";
            EGenreOnglet[EGenreOnglet["General_SuiviApprentissages"] = 282] = "General_SuiviApprentissages";
            EGenreOnglet[EGenreOnglet["Commissions"] = 283] = "Commissions";
            EGenreOnglet[EGenreOnglet["RDV"] = 284] = "RDV";
            EGenreOnglet[EGenreOnglet["RemplacementsEnseignants"] = 285] = "RemplacementsEnseignants";
            EGenreOnglet[EGenreOnglet["SaisieAppelInternat"] = 286] = "SaisieAppelInternat";
            EGenreOnglet[EGenreOnglet["General_RemplacementsEnseignants"] = 287] = "General_RemplacementsEnseignants";
            EGenreOnglet[EGenreOnglet["RechercheDeStage"] = 288] = "RechercheDeStage";
            EGenreOnglet[EGenreOnglet["MediaCentre"] = 289] = "MediaCentre";
        }
        )(EGenreOnglet || (exports.EGenreOnglet = EGenreOnglet = {}));
    },
    fn: 'enumere_onglet.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeHttpNotificationDonnes = void 0;
        var TypeHttpNotificationDonnes;
        (function(TypeHttpNotificationDonnes) {
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeDocJointEtablissement"] = 0] = "THND_ListeDocJointEtablissement";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeClasse"] = 1] = "THND_ListeClasse";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeClasseNiveau"] = 2] = "THND_ListeClasseNiveau";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeGroupe"] = 3] = "THND_ListeGroupe";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeProfesseur"] = 4] = "THND_ListeProfesseur";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_AutorisationProfesseur"] = 5] = "THND_AutorisationProfesseur";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_AutorisationPersonnel"] = 6] = "THND_AutorisationPersonnel";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_NombreDepotDocumentCasierNonLus"] = 7] = "THND_NombreDepotDocumentCasierNonLus";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_NombreMessagesNonLus"] = 8] = "THND_NombreMessagesNonLus";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_NombreActualitesNonLues"] = 9] = "THND_NombreActualitesNonLues";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_Kiosque"] = 10] = "THND_Kiosque";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_NombreForumsNonLus"] = 11] = "THND_NombreForumsNonLus";
        }
        )(TypeHttpNotificationDonnes || (exports.TypeHttpNotificationDonnes = TypeHttpNotificationDonnes = {}));
    },
    fn: 'typehttpnotificationdonnes.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteCloudAttente = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetRequeteCloudAttente extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        exports.ObjetRequeteCloudAttente = ObjetRequeteCloudAttente;
        CollectionRequetes_1.Requetes.inscrire('CloudAttente', ObjetRequeteCloudAttente);
    },
    fn: 'objetrequetecloudattente.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireOAuth2 = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const Invocateur_1 = require("Invocateur");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const AccessApp_1 = require("AccessApp");
        const UtilitaireOAuth2 = {
            revocation(aIdOAuth2, aCallback) {
                new ObjetRequeteOAuth2Attente().lancerRequete({
                    idOAuth2: aIdOAuth2,
                    revocation: true
                }).then( (aJSON) => {
                    if (!!aJSON) {
                        GEtatUtilisateur.listeCloud.parcourir( (aCloud) => {
                            if (!!aCloud.idOAuth2 && aCloud.idOAuth2 === aIdOAuth2) {
                                delete aCloud.idOAuth2;
                            }
                        }
                        );
                        GEtatUtilisateur.listeCloudDepotServeur.parcourir( (aCloud) => {
                            if (!!aCloud.idOAuth2 && aCloud.idOAuth2 === aIdOAuth2) {
                                delete aCloud.idOAuth2;
                            }
                        }
                        );
                        aCallback.call(this);
                    }
                }
                );
            },
            authentificationPromise(aIdOAuth2) {
                const lIdentAbonnement = ObjetRequeteJSON_1.utils.getIdentNotification('tokenOAuth2');
                return new ObjetRequeteOAuth2Attente({}).lancerRequete({
                    idOAuth2: aIdOAuth2
                }).then( (aJSON) => {
                    if (aJSON.urlAuthorize) {
                        window.open(aJSON.urlAuthorize);
                        let lAvecInterruption = true;
                        const lPromiseMessage = (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('UtilitaireOAuth2.message', [IE.jsx.str("a", {
                                href: aJSON.urlAuthorize,
                                target: "_blank"
                            }, ObjetTraduction_1.GTraductions.getValeur('UtilitaireOAuth2.lien'))]).replaceRCToHTML()
                        }).then( () => {
                            if (lAvecInterruption) {
                                return new ObjetRequeteOAuth2Attente({}).lancerRequete({
                                    interruption: true
                                });
                            }
                        }
                        ).then( () => {
                            return Promise.reject({
                                sansMessage: true
                            });
                        }
                        );
                        const lPromiseNotif = new Promise( (aResolve, aReject) => {
                            Invocateur_1.Invocateur.abonnerUnique(lIdentAbonnement, (aNotif) => {
                                lAvecInterruption = false;
                                if (aNotif && aNotif.ok) {
                                    aResolve();
                                } else {
                                    aReject(aNotif.message);
                                }
                            }
                            );
                        }
                        );
                        return Promise.race([lPromiseMessage, lPromiseNotif]).finally( () => {
                            (0,
                            AccessApp_1.getApp)().getMessage().fermer();
                            Invocateur_1.Invocateur.desabonner(lIdentAbonnement);
                        }
                        );
                    }
                    if (!aJSON.ok) {
                        return Promise.reject(aJSON.message);
                    }
                }
                ).catch( (aError) => {
                    if (aError && aError.sansMessage) {
                        return Promise.reject();
                    }
                    return (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        message: aError || ObjetTraduction_1.GTraductions.getValeur('UtilitaireOAuth2.echec')
                    }).then( () => {
                        return Promise.reject();
                    }
                    );
                }
                );
            }
        };
        exports.UtilitaireOAuth2 = UtilitaireOAuth2;
        class ObjetRequeteOAuth2Attente extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        CollectionRequetes_1.Requetes.inscrire('OAuth2Attente', ObjetRequeteOAuth2Attente);
    },
    fn: 'utilitaireoauth2.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeFormatPublication = exports.TTypeElementCloud = void 0;
        var TTypeElementCloud;
        (function(TTypeElementCloud) {
            TTypeElementCloud[TTypeElementCloud["tec_Fichier"] = 0] = "tec_Fichier";
            TTypeElementCloud[TTypeElementCloud["tec_Dossier"] = 1] = "tec_Dossier";
        }
        )(TTypeElementCloud || (exports.TTypeElementCloud = TTypeElementCloud = {}));
        var TypeFormatPublication;
        (function(TypeFormatPublication) {
            TypeFormatPublication[TypeFormatPublication["FP_NonPublie"] = 0] = "FP_NonPublie";
            TypeFormatPublication[TypeFormatPublication["FP_Natif"] = 1] = "FP_Natif";
            TypeFormatPublication[TypeFormatPublication["FP_Pdf"] = 2] = "FP_Pdf";
        }
        )(TypeFormatPublication || (exports.TypeFormatPublication = TypeFormatPublication = {}));
    },
    fn: 'ttypeelementcloud.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeStatutInterrogationCloud = void 0;
        var TypeStatutInterrogationCloud;
        (function(TypeStatutInterrogationCloud) {
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_Inconnu"] = 0] = "sic_Inconnu";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_OK"] = 1] = "sic_OK";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_TokenInvalide"] = 2] = "sic_TokenInvalide";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_Timeout"] = 3] = "sic_Timeout";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_ArretApplication"] = 4] = "sic_ArretApplication";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_DossierTropGros"] = 5] = "sic_DossierTropGros";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_DossierInconnu"] = 6] = "sic_DossierInconnu";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_RacineInconnue"] = 7] = "sic_RacineInconnue";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_ImpossibleDePartagerLeFichier"] = 8] = "sic_ImpossibleDePartagerLeFichier";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_AdresseMailNonVerifiee"] = 9] = "sic_AdresseMailNonVerifiee";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_ImpossibleDePartagerUnDossier"] = 10] = "sic_ImpossibleDePartagerUnDossier";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_FichierDejaExistant"] = 11] = "sic_FichierDejaExistant";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_FichierTropGros"] = 12] = "sic_FichierTropGros";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_PlusDEspace"] = 13] = "sic_PlusDEspace";
        }
        )(TypeStatutInterrogationCloud || (exports.TypeStatutInterrogationCloud = TypeStatutInterrogationCloud = {}));
    },
    fn: 'typestatutinterrogationcloud.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireRequetesCloud = void 0;
        const ObjetRequeteCloudAttente_1 = require("ObjetRequeteCloudAttente");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_DocumentJoint_1 = require("Enumere_DocumentJoint");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const UtilitaireOAuth2_1 = require("UtilitaireOAuth2");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const TTypeElementCloud_1 = require("TTypeElementCloud");
        const TypeStatutInterrogationCloud_1 = require("TypeStatutInterrogationCloud");
        const c_TailleMaxUpload_cloud = 52428800;
        const UtilitaireRequetesCloud = {
            c_TailleMaxUpload_cloud: c_TailleMaxUpload_cloud,
            requetePartageListeFichiers(aListePJs) {
                const lListeATraiter = aListePJs.getListeElements( (aEle) => {
                    return aEle.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.Cloud && aEle.existe() && aEle.service !== undefined && !aEle.traite;
                }
                );
                if (lListeATraiter.count() > 0) {
                    const lElement = lListeATraiter.get(0);
                    lElement.partageFichier = true;
                    return new ObjetRequeteCloudAttente_1.ObjetRequeteCloudAttente().lancerRequete({
                        service: lElement.service,
                        idPartage: lElement.idPartage,
                        partageFichier: lElement.partageFichier,
                        publiPdf: lElement.publiPdf
                    }).then( (aJSON) => {
                        if (aJSON.status === TypeStatutInterrogationCloud_1.TypeStatutInterrogationCloud.sic_OK) {
                            lElement.url = aJSON.urlPartage;
                            lElement.traite = true;
                            return;
                        }
                        if (aJSON.status === TypeStatutInterrogationCloud_1.TypeStatutInterrogationCloud.sic_TokenInvalide) {
                            if (lElement.avecTokenInvalide) {
                                return Promise.reject();
                            }
                            lElement.avecTokenInvalide = true;
                            if (aJSON.idOAuth2) {
                                return UtilitaireOAuth2_1.UtilitaireOAuth2.authentificationPromise(aJSON.idOAuth2);
                            }
                            return Promise.reject();
                        }
                        lElement.setEtat(Enumere_Etat_1.EGenreEtat.Suppression);
                        lElement.traite = true;
                        return GApplication.getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                            message: ObjetTraduction_1.GTraductions.getValeur('requete.erreur') + ' : ' + (aJSON.message || '') + ' (' + aJSON.status + ')'
                        });
                    }
                    ).then( () => {
                        return UtilitaireRequetesCloud.requetePartageListeFichiers(aListePJs);
                    }
                    ).catch( (aError) => {}
                    );
                }
                return Promise.resolve();
            },
            requeteUploadVersCloudListFichiers(aParams) {
                const lParams = Object.assign({
                    idPartageDossier: null,
                    service: null,
                    listeFichiersATraiter: null,
                    listeFichiersResultat: null
                }, aParams);
                if (!MethodesObjet_1.MethodesObjet.isNumber(lParams.service) || (!lParams.idPartageDossier && lParams.idPartageDossier !== '') || !lParams.listeFichiersATraiter || !lParams.listeFichiersATraiter.count || !lParams.listeFichiersResultat) {
                    return Promise.reject();
                }
                if (lParams.listeFichiersATraiter.count() === 0) {
                    return Promise.resolve(true);
                }
                const lIndiceFichierATraiter = 0;
                const lFichier = lParams.listeFichiersATraiter.get(lIndiceFichierATraiter);
                return Promise.resolve().then( () => {
                    if (lFichier) {
                        const lIdFichierBackup = lFichier.idFichier;
                        return new ObjetRequeteCloudAttente_1.ObjetRequeteCloudAttente().addUpload({
                            listeFichiers: new ObjetListeElements_1.ObjetListeElements().add(lFichier),
                            annulerSurAbortUpload: true,
                            annulerSurErreurUpload: true
                        }).lancerRequete({
                            upload: true,
                            service: lParams.service,
                            idDossier: lParams.idPartageDossier,
                            nomFichier: lFichier.getLibelle(),
                            idFichier: lFichier.idFichier
                        }).then( (aJSON) => {
                            if (aJSON.upload && aJSON.fichier) {
                                const lElementCloud = ObjetElement_1.ObjetElement.create({
                                    Libelle: aJSON.fichier.getLibelle(),
                                    Genre: Enumere_DocumentJoint_1.EGenreDocumentJoint.Cloud,
                                    service: lParams.service,
                                    idPartage: aJSON.fichier.idPartage,
                                    publiPdf: aJSON.fichier.pubPdf ? aJSON.fichier.formatPub : TTypeElementCloud_1.TypeFormatPublication.FP_Natif,
                                    url: aJSON.fichier.url
                                });
                                lElementCloud.setEtat(Enumere_Etat_1.EGenreEtat.Creation);
                                lParams.listeFichiersResultat.add(lElementCloud);
                                return;
                            }
                            if (aJSON.status === TypeStatutInterrogationCloud_1.TypeStatutInterrogationCloud.sic_TokenInvalide) {
                                if (lParams.avecTokenInvalide) {
                                    return Promise.reject();
                                }
                                lParams.avecTokenInvalide = true;
                                if (aJSON.idOAuth2) {
                                    return UtilitaireOAuth2_1.UtilitaireOAuth2.authentificationPromise(aJSON.idOAuth2).then( () => {
                                        if (lIdFichierBackup) {
                                            lFichier.idFichier = lIdFichierBackup;
                                        }
                                        return {
                                            refaireUpload: true
                                        };
                                    }
                                    );
                                }
                            }
                            if (aJSON.erreurCommunication) {
                                return null;
                            }
                            return GApplication.getMessage().afficher({
                                type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                                message: ObjetTraduction_1.GTraductions.getValeur('requete.erreur') + ' : ' + (aJSON.message || '') + ' (' + aJSON.status + ')'
                            }).then( () => null);
                        }
                        );
                    }
                }
                ).then( (aParams) => {
                    if (!aParams || !aParams.refaireUpload) {
                        lParams.listeFichiersATraiter.remove(lIndiceFichierATraiter);
                    }
                    return UtilitaireRequetesCloud.requeteUploadVersCloudListFichiers(lParams);
                }
                );
            }
        };
        exports.UtilitaireRequetesCloud = UtilitaireRequetesCloud;
    },
    fn: 'utilitairerequetescloud.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const TypeHttpNotificationDonnes_1 = require("TypeHttpNotificationDonnes");
        const UtilitaireRequetesCloud_1 = require("UtilitaireRequetesCloud");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        ObjetRequeteJSON_1.ObjetRequeteJSON.declarerModules({
            initialiser: function(aFuncInitSignature) {
                if (global.GEtatUtilisateur && GEtatUtilisateur.Identification) {
                    const lSignature = {};
                    if (GEtatUtilisateur.estEspaceAvecMembre()) {
                        const lMembre = GEtatUtilisateur.getMembre();
                        if (lMembre) {
                            lSignature.membre = new ObjetElement_1.ObjetElement('',lMembre.getNumero(),lMembre.getGenre());
                        }
                    }
                    lSignature.onglet = GEtatUtilisateur.getGenreOnglet() >= 0 && MethodesObjet_1.MethodesObjet.isNumber(GEtatUtilisateur.getGenreOnglet()) ? GEtatUtilisateur.getGenreOnglet() : Enumere_Onglet_1.EGenreOnglet.GeneralRacine;
                    aFuncInitSignature(lSignature);
                }
            },
            deserialiserSignature: function(aJSONSignature) {
                _deserialisationSignatureRequeteConsultSaisie(aJSONSignature);
            },
            factoryModuleUploadCloud: function() {
                return _getModuleUploadCloud();
            },
            deserialiserPolling: function(aJSONSignature, aJSONRacine) {
                Object.assign(aJSONSignature, aJSONRacine[TypesRequeteJSON_1.ConstantesJSON.Donnees]);
                _deserialisationSignature(aJSONSignature);
            }
        });
        function _deserialisationSignatureRequeteConsultSaisie(aJSON) {
            if (aJSON) {
                if (aJSON.ModeExclusif === true || aJSON.ModeExclusif === false) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modificationModeExclusif, aJSON.ModeExclusif);
                }
                _deserialisationSignature(aJSON);
            }
        }
        function _deserialisationSignature(aJSON) {
            if (GApplication.droits) {
                GApplication.droits.chargerJSON(aJSON);
            }
            if (aJSON.notificationsCommunication) {
                Invocateur_1.Invocateur.evenement('notification_communication', aJSON.notificationsCommunication);
            }
            if (aJSON.actualisationMessage) {
                Invocateur_1.Invocateur.evenement('notification_actualisationMessage');
            }
            if (aJSON.notificationsChatVS) {
                Invocateur_1.Invocateur.evenement('notification_chatVS', aJSON.notificationsChatVS);
                Invocateur_1.Invocateur.evenement('notification_actualisationMessage', true);
            }
            if (aJSON.notificationsKiosque) {
                Invocateur_1.Invocateur.evenement('notification_Kiosque');
            }
            if (aJSON.notifications) {
                Object.keys(aJSON.notifications).forEach( (aCle) => {
                    Invocateur_1.Invocateur.evenement(ObjetRequeteJSON_1.utils.getIdentNotification(aCle), aJSON.notifications[aCle]);
                }
                );
            }
            if (aJSON.listeDonnees) {
                const lEtatUtil = GEtatUtilisateur;
                if (!lEtatUtil.listeDonnees) {
                    lEtatUtil.listeDonnees = {};
                }
                const lDonnees = {}
                  , lJSON = aJSON.listeDonnees;
                if (lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeClasseNiveau]) {
                    lDonnees[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeClasseNiveau] = lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeClasseNiveau];
                }
                if (lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeGroupe]) {
                    lDonnees[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeGroupe] = lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeGroupe];
                }
                if (lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeProfesseur]) {
                    lDonnees[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeProfesseur] = lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeProfesseur];
                }
                if (lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeDocJointEtablissement]) {
                    lDonnees[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeDocJointEtablissement] = lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeDocJointEtablissement];
                }
                Object.assign(lEtatUtil.listeDonnees, lDonnees);
            }
        }
        function _getModuleUploadCloud() {
            return {
                setListePJs: function(aListe) {
                    this.listePJs = aListe;
                },
                actif: function() {
                    return this.listePJs && this.listePJs.count && this.listePJs.count() > 0;
                },
                lancer: function() {
                    const lListePJs = this.listePJs;
                    this.listePJs = null;
                    return UtilitaireRequetesCloud_1.UtilitaireRequetesCloud.requetePartageListeFichiers(lListePJs);
                }
            };
        }
    },
    fn: 'declarationobjetrequetepn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplicationSco = void 0;
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const ObjetRequeteFonctionParametres_1 = require("ObjetRequeteFonctionParametres");
        const Parametres_1 = require("Parametres");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ObjetCycles_1 = require("ObjetCycles");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const ObjetAccesPN_1 = require("ObjetAccesPN");
        const ObjetOptionsEspaceLocalPN_1 = require("ObjetOptionsEspaceLocalPN");
        const TypeModeGrillesEDT_1 = require("TypeModeGrillesEDT");
        const ObjetApplicationProduit_1 = require("ObjetApplicationProduit");
        const UtilitaireMAJServeur_1 = require("UtilitaireMAJServeur");
        const ObjetDonneesCentraleNotificationsSco_1 = require("ObjetDonneesCentraleNotificationsSco");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        const ObjetParametresUtilisateur_1 = require("ObjetParametresUtilisateur");
        const AccessApp_1 = require("AccessApp");
        require('DeclarationObjetRequetePN.js');
        class ObjetApplicationSco extends ObjetApplicationProduit_1.ObjetApplicationProduit {
            constructor() {
                super();
                this.nomProduit = 'PRONOTE';
                this.donneesCentraleNotifications = new ObjetDonneesCentraleNotificationsSco_1.ObjetDonneesCentraleNotificationsSco();
                if (this.chargeEniFrame) {
                    window.parent.postMessage('OK', '*');
                }
            }
            getEtatUtilisateur() {
                return GEtatUtilisateur;
            }
            getObjetParametres() {
                return GParametres;
            }
            getCouleur() {
                return GCouleur;
            }
            lancer(aParam) {
                this.setDemo(!!aParam.d);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.initChiffrement, aParam);
                const lParametres = {
                    genreEspace: aParam.a,
                    numeroJeton: aParam.e ? aParam.e : -1,
                    cleJeton: aParam.f ? aParam.f : '',
                    genreAcces: aParam.g ? aParam.g : 0,
                    numeroSession: aParam.h,
                    forcerInscription: aParam.fi,
                    page: aParam.p
                };
                this.acces = new ObjetAccesPN_1.ObjetAccesPN(lParametres.genreAcces,lParametres.genreEspace,0,0,lParametres.numeroJeton,0);
                if (this.acces.estConnexionCAS() || this.acces.estConnexionCookie()) {
                    this.acces.setIdentification(lParametres.numeroJeton, lParametres.cleJeton);
                }
                ;this.droits = new ObjetDroitsPN_1.ObjetDroitsPN();
                this.parametresUtilisateur = new ObjetParametresUtilisateur_1.ObjetParametresUtilisateur();
                this.optionsEspaceLocal = new ObjetOptionsEspaceLocalPN_1.ObjetOptionsEspaceLocalPN({
                    nomProduit: this.nomProduit,
                    espace: lParametres.genreEspace
                });
                DeferLoadingScript_1.deferLoadingScript.setOptions({
                    done() {},
                    fail(aNom) {
                        (0,
                        AccessApp_1.getApp)().getCommunication().sendLogClient(`erreur chargement script defer : ${aNom}`);
                        UtilitaireDeconnexion_1.UtilitaireDeconnexion.deconnexionEchecChargement();
                    },
                    messageChargement: ObjetTraduction_1.GTraductions.getValeur('connexion.Chargement')
                });
                this.initialisation(lParametres);
                this.lancerRequeteParametres(lParametres);
                UtilitaireMAJServeur_1.UtilitaireMAJServeur.initialiser({
                    afficherMessageDelaiLong: !this.getEtatUtilisateur().estEspacePourEleve(),
                    afficherMessageImminentEleve: this.getEtatUtilisateur().estEspacePourEleve(),
                    cssImage: this.getEtatUtilisateur().pourPrimaire() ? 'Image_AlerteMiseAJourPRM' : 'Image_AlerteMiseAJourPRN'
                });
                if (aParam.fi) {
                    this.getEtatUtilisateur().forcerOngletInscription = true;
                }
                if (this.optionsEspaceLocal) {
                    if (this.optionsEspaceLocal.getAvecCodeCompetences) {
                        this.getEtatUtilisateur().setAvecCodeCompetences(this.optionsEspaceLocal.getAvecCodeCompetences());
                    }
                }
            }
            initialisation(aParametres) {}
            lancerRequeteParametres(aParametres) {
                new ObjetRequeteFonctionParametres_1.ObjetRequeteFonctionParametres(this).lancerRequete({
                    uuidRSA: this.getCommunication().serialiserIVAESPourSeveur()
                }).then( (aJSON) => {
                    try {
                        GParametres = new Parametres_1.ObjetParametres(aJSON);
                        this.initialisationApresParametres(aParametres);
                    } catch (e) {
                        alert('Erreur : ' + e.message);
                    }
                }
                );
                this.getCommunication().setIvAES();
            }
            initialisationApresParametres(aParametres) {
                function _surUnload() {
                    this.getCommunication().desactiverPolling();
                }
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.surRechargementPage, _surUnload.bind(this));
                const lGParametres = GParametres;
                ObjetDate_1.GDate.setDonnees(lGParametres.PremierLundi, lGParametres.PremiereDate, lGParametres.DerniereDate, lGParametres.PlacesParJour, lGParametres.PlacesParHeure, lGParametres.DureeSequence, lGParametres.PremiereHeure, lGParametres.LibellesHeures, lGParametres.LibellesHeuresFin, lGParametres.JoursOuvres);
                let lJourFerie;
                let lIndiceJour;
                lGParametres.ensembleJoursFeries = new TypeEnsembleNombre_1.TypeEnsembleNombre();
                for (let I = 0, lNb = lGParametres.listeJoursFeries.count(); I < lNb; I++) {
                    lJourFerie = lGParametres.listeJoursFeries.get(I);
                    for (lIndiceJour = ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(lGParametres.dateDebutPremierCycle, lJourFerie.dateDebut); lIndiceJour <= ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(lGParametres.dateDebutPremierCycle, lJourFerie.dateFin); lIndiceJour++) {
                        lGParametres.ensembleJoursFeries.add(lIndiceJour + 1);
                    }
                }
                IE.Cycles = new ObjetCycles_1.ObjetCycles();
                IE.Cycles.init({
                    premiereDate: lGParametres.PremiereDate,
                    derniereDate: lGParametres.DerniereDate,
                    dateDebutPremierCycle: lGParametres.dateDebutPremierCycle,
                    joursOuvresParCycle: lGParametres.joursOuvresParCycle,
                    premierJourSemaine: lGParametres.premierJourSemaine,
                    joursOuvres: lGParametres.setOfJoursCycleOuvre,
                    cyclesSansFeries: lGParametres.grillesEDTEnCycle === TypeModeGrillesEDT_1.TypeModeGrillesEDT.TMG_CycleSansFeries,
                    cyclesHebdomadaire: lGParametres.grillesEDTEnCycle === TypeModeGrillesEDT_1.TypeModeGrillesEDT.TMG_CycleHebdomadaire,
                    joursFeries: lGParametres.ensembleJoursFeries
                });
            }
            initAuthentification(aParam) {
                this.parametresUtilisateurBase = aParam.parametresUtilisateurBase;
                if (aParam.parametresUtilisateur) {
                    this.parametresUtilisateur.chargerJSON(aParam.parametresUtilisateur);
                }
                this.droits.chargerJSON(aParam);
            }
            destructionInterface() {
                if (window.GInterface && GInterface.free) {
                    GInterface.free();
                }
            }
            getJeton(aFrames) {
                let lJeton;
                for (let i = 0; i < aFrames.length && (!lJeton); i++) {
                    try {
                        lJeton = aFrames[i].frames[0].GJeton;
                    } catch (e) {}
                    try {
                        if (!lJeton && aFrames[i].frames.length > 0) {
                            lJeton = this.getJeton(aFrames[i].frames);
                        }
                    } catch (e) {}
                }
                return lJeton;
            }
            avecGestionModeExclusif() {
                return this.getEtatUtilisateur().Identification;
            }
            entreeModeExclusif() {
                if (!this.avecGestionModeExclusif()) {
                    return;
                }
                super.entreeModeExclusif();
                const lEtatUtilisateur = this.getEtatUtilisateur();
                const lEstEspaceParentEleve = lEtatUtilisateur.estEspaceEleve() || lEtatUtilisateur.estEspaceParent();
                const lTitreModeExclusif = lEstEspaceParentEleve ? ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.TitreEntrerModeExclusifParentEleve') : ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.UsageExclusif');
                const lMessageModeExclusif = lEstEspaceParentEleve ? ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.EntrerModeExclusifParentEleve') : ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.EntrerModeExclusif');
                this.getMessage().afficher({
                    type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                    titre: lTitreModeExclusif,
                    message: lMessageModeExclusif,
                    delaiFermeture: true
                });
            }
            sortieModeExclusif() {
                if (!this.avecGestionModeExclusif()) {
                    return;
                }
                super.sortieModeExclusif();
                const lEtatUtilisateur = this.getEtatUtilisateur();
                const lEstEspaceParentEleve = lEtatUtilisateur.estEspaceEleve() || lEtatUtilisateur.estEspaceParent();
                const lTitreModeExclusif = lEstEspaceParentEleve ? ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.TitreSortieModeExclusifParentEleve') : ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.UsageExclusif');
                const lMessageModeExclusif = lEstEspaceParentEleve ? ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.SortieModeExclusifParentEleve') : ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.SortieModeExclusif');
                this.getMessage().afficher({
                    type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                    titre: lTitreModeExclusif,
                    message: lMessageModeExclusif,
                    delaiFermeture: true
                });
            }
            finSession(aParametres) {
                this.getCommunication().desactiverPolling();
                this.destructionInterface();
                super.finSession(aParametres);
                global.GInterface = null;
            }
            construireEnTetePageFinSession(aParametres) {
                const T = [];
                const lGParametres = GParametres;
                if (window.GParametres && (lGParametres.NomEspace || lGParametres.NomEtablissementConnexion)) {
                    T.push('<header>');
                    if (lGParametres.NomEspace) {
                        T.push('<h1>', lGParametres.NomEspace, '</h1>');
                    }
                    if (lGParametres.NomEtablissementConnexion) {
                        T.push('<h2>', lGParametres.NomEtablissementConnexion, '</h2>');
                    }
                    T.push('</header>');
                }
                return T.join('');
            }
        }
        exports.ObjetApplicationSco = ObjetApplicationSco;
    },
    fn: 'objetapplicationsco.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("forge.min.js");
    },
    fn: 'declarationforge.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreCryptage = void 0;
        var EGenreCryptage;
        (function(EGenreCryptage) {
            EGenreCryptage[EGenreCryptage["Aucun"] = 0] = "Aucun";
            EGenreCryptage[EGenreCryptage["Unicode"] = 1] = "Unicode";
            EGenreCryptage[EGenreCryptage["AES"] = 2] = "AES";
            EGenreCryptage[EGenreCryptage["RSA1024"] = 3] = "RSA1024";
            EGenreCryptage[EGenreCryptage["RSA2048"] = 4] = "RSA2048";
        }
        )(EGenreCryptage || (exports.EGenreCryptage = EGenreCryptage = {}));
    },
    fn: 'enumere_cryptage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("pako.min");
        require("pako");
    },
    fn: 'declarationpako.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCryptageAES = void 0;
        require("DeclarationForge");
        class ObjetCryptageAES {
            decrypter(aChaine, aCle, aIv) {
                try {
                    aCle = forge.md.md5.create().update(aCle.bytes()).digest();
                    aIv = aIv.length() ? forge.md.md5.create().update(aIv.bytes()).digest() : new forge.util.ByteBuffer('\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0');
                    aChaine = new forge.util.ByteBuffer(forge.util.hexToBytes(aChaine));
                    const lChiffreur = forge.cipher.createDecipher('AES-CBC', aCle);
                    lChiffreur.start({
                        iv: aIv
                    });
                    lChiffreur.update(aChaine);
                    return lChiffreur.finish() && lChiffreur.output.bytes();
                } catch (e) {
                    return false;
                }
            }
            encrypter(aChaine, aCle, aIv) {
                try {
                    aCle = forge.md.md5.create().update(aCle.bytes()).digest();
                    aIv = aIv.length() ? forge.md.md5.create().update(aIv.bytes()).digest() : new forge.util.ByteBuffer('\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0');
                    aChaine = new forge.util.ByteBuffer(aChaine);
                    const lChiffreur = forge.cipher.createCipher('AES-CBC', aCle);
                    lChiffreur.start({
                        iv: aIv
                    });
                    lChiffreur.update(aChaine);
                    return lChiffreur.finish() && lChiffreur.output.toHex();
                } catch (e) {
                    return false;
                }
            }
        }
        exports.ObjetCryptageAES = ObjetCryptageAES;
    },
    fn: 'objetcryptageaes.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCryptageRSA = void 0;
        require("DeclarationForge.js");
        const c_rsaPub_modulo_2048 = '83261A50C8778C33B533BF8324A433A536DD5E9F4F08DDBC3EA6F918C3A9B17A37E5B3B1535301ADCFE4ECA4E0A5AC6000195F75C38F55CA2D1F14470EE5CB5DCDAE5750610EBA1BB0C747DC8B85A83003F9B91969704F44D2B7098039AE35A5E67BF854CD94EB1CA888AAA2EB9F5EFC8016E70DEB4E3ADB9D57621139D08918BD63F90C899703E1879A30FCAF92AC9ADDEFCAE432911D05822FDB333FC75C6D3307E4AE7FF6982E54F9F47AD6E421239F287EE110053335FFA55E25C11AA4EE6D0DA2DB90489906BE029D0AF2CBB3227802E2E19577DDA7E149D6D6DE7BFDC447AB0AE7779AC7916FC3C67A72EEFE75C4C3A5A4B694D9B44B25CF43D6075D0D';
        const c_rsaPub_exposant_2048 = '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010001';
        const c_rsaPub_modulo_1024 = 'B99B77A3D72D3A29B4271FC7B7300E2F791EB8948174BE7B8024667E915446D4EEA0C2424B8D1EBF7E2DDFF94691C6E994E839225C627D140A8F1146D1B0B5F18A09BBD3D8F421CA1E3E4796B301EEBCCF80D81A32A1580121B8294433C38377083C5517D5921E8A078CDC019B15775292EFDA2C30251B1CCABE812386C893E5';
        const c_rsaPub_exposant_1024 = '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010001';
        class ObjetCryptageRSA {
            encrypter1024(aChaine) {
                return this._encrypter(c_rsaPub_modulo_1024, c_rsaPub_exposant_1024, aChaine);
            }
            encrypter2048(aChaine) {
                return this._encrypter(c_rsaPub_modulo_2048, c_rsaPub_exposant_2048, aChaine);
            }
            _encrypter(aModulo, aExposant, aChaine) {
                const lRSA = forge.pki.rsa.setPublicKey(new forge.jsbn.BigInteger(aModulo,16), new forge.jsbn.BigInteger(aExposant,16));
                const lResult = forge.util.encode64(lRSA.encrypt(aChaine.bytes()), 64);
                return lResult;
            }
        }
        exports.ObjetCryptageRSA = ObjetCryptageRSA;
    },
    fn: 'objetcryptagersa.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GCryptage = void 0;
        require("DeclarationForge");
        require("DeclarationPako");
        const Enumere_Cryptage_1 = require("Enumere_Cryptage");
        const ObjetCryptageAES_1 = require("ObjetCryptageAES");
        const ObjetCryptageRSA_1 = require("ObjetCryptageRSA");
        class ObjetCryptage {
            constructor() {
                this.Minuscules = 'abcdefghijklmnopkrstuvwxyz';
                this.Majuscules = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                this.Nombres = '0123456789';
                this.Caracteres = '&#|^@$?!%~()[]{}+-*/=.,;';
                this.cryptageAES = new ObjetCryptageAES_1.ObjetCryptageAES();
                this.cryptageRSA = new ObjetCryptageRSA_1.ObjetCryptageRSA();
            }
            getCryptageAES() {
                return this.cryptageAES;
            }
            getCryptageRSA() {
                return this.cryptageRSA;
            }
            genererTexteAleatoire(ALongueur) {
                const LListeCaracteres = this.Minuscules + this.Majuscules + this.Nombres;
                const N = LListeCaracteres.length;
                let LChaine = '';
                while (LChaine.length < ALongueur) {
                    LChaine += LListeCaracteres.charAt(Math.floor(N * Math.random()));
                }
                return LChaine;
            }
            getBuffer(aChaine) {
                return new forge.util.ByteBuffer(forge.util.encodeUtf8(aChaine));
            }
            encrypter(aOptions) {
                const lDefault = {
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.Aucun,
                    chaine: '',
                    cle: '',
                    iv: '',
                    avecAlea: false,
                    avecCompression: false
                };
                const lOptions = {};
                $.extend(lOptions, lDefault, aOptions);
                lOptions.chaine = '' + lOptions.chaine;
                lOptions.chaine = forge.util.encodeUtf8(lOptions.chaine);
                if (lOptions.avecAlea) {
                    lOptions.chaine = this.ajouterAlea(lOptions.chaine);
                }
                if (lOptions.avecCompression) {
                    lOptions.chaine = new forge.util.ByteBuffer(lOptions.chaine).toHex();
                    const lUint = window.pako.deflateRaw(lOptions.chaine, {
                        level: 6,
                        to: 'string'
                    });
                    if (typeof lUint === 'string') {
                        lOptions.chaine = lUint;
                    } else {
                        lOptions.chaine = this.uint8ArrayToStrRaw(lUint);
                    }
                }
                let lChaineEncrypte = '';
                switch (lOptions.genreCryptage) {
                case Enumere_Cryptage_1.EGenreCryptage.Aucun:
                    lChaineEncrypte = lOptions.chaine;
                    break;
                case Enumere_Cryptage_1.EGenreCryptage.Unicode:
                    lChaineEncrypte = lOptions.chaine;
                    break;
                case Enumere_Cryptage_1.EGenreCryptage.AES:
                    lChaineEncrypte = this.cryptageAES.encrypter(lOptions.chaine, lOptions.cle, lOptions.iv);
                    break;
                default:
                    ;break;
                }
                return lChaineEncrypte;
            }
            decrypter(aOptions) {
                const lDefault = {
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.Aucun,
                    chaine: '',
                    cle: '',
                    iv: '',
                    avecAlea: false,
                    enBytes: false,
                    avecCompression: false
                };
                const lOptions = {};
                $.extend(lOptions, lDefault, aOptions);
                let lChaineEncrypte = lOptions.chaine;
                let lChaineDecrypte = '';
                switch (lOptions.genreCryptage) {
                case Enumere_Cryptage_1.EGenreCryptage.Aucun:
                    lChaineDecrypte = lChaineEncrypte;
                    break;
                case Enumere_Cryptage_1.EGenreCryptage.Unicode:
                    lChaineDecrypte = lChaineEncrypte;
                    break;
                case Enumere_Cryptage_1.EGenreCryptage.AES:
                    lChaineDecrypte = this.cryptageAES.decrypter(lChaineEncrypte, lOptions.cle, lOptions.iv);
                    break;
                default:
                    ;break;
                }
                if (lChaineDecrypte !== '' && lOptions.avecCompression) {
                    const lUint = this.strRawToUint8Array(lChaineDecrypte);
                    lChaineDecrypte = window.pako.inflateRaw(lUint, {
                        to: 'string'
                    });
                }
                if (lChaineDecrypte !== '') {
                    try {
                        lChaineDecrypte = forge.util.decodeUtf8(lChaineDecrypte);
                    } catch (e) {
                        lChaineDecrypte = '';
                    }
                }
                if (lChaineDecrypte !== '' && lOptions.avecAlea) {
                    lChaineDecrypte = this.enleverAlea(lChaineDecrypte);
                }
                if (lOptions.enBytes) {
                    const lBuff = new forge.util.ByteBuffer();
                    const lArrInt = lChaineDecrypte.split(',');
                    for (let i = 0; i < lArrInt.length; i++) {
                        lBuff.putInt(parseInt(lArrInt[i]), 8);
                    }
                    lChaineDecrypte = lBuff;
                }
                return lChaineDecrypte;
            }
            ajouterAlea(AChaine) {
                const N = AChaine.length;
                const LTableauAvecAlea = [];
                const LListeCaracteres = this.Minuscules + this.Majuscules + this.Nombres;
                const C = LListeCaracteres.length;
                for (let I = 0; I < N; I++) {
                    LTableauAvecAlea.push(LListeCaracteres.charAt(Math.floor(C * Math.random())));
                    LTableauAvecAlea.push(String(AChaine).charAt(I));
                }
                return LTableauAvecAlea.join('');
            }
            enleverAlea(AChaine) {
                const N = AChaine.length;
                const LTableauSansAlea = new Array(N);
                for (let I = 0; I < N; I += 1) {
                    if (I % 2 === 0) {
                        LTableauSansAlea.push(AChaine.charAt(I));
                    }
                }
                return LTableauSansAlea.join('');
            }
            chiffrementUrl(LChemin, LNomFichier, ACle, ANumeroSession) {
                const LUrlChiffree = this.encrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: LChemin,
                    cle: ACle
                });
                return 'cheminsecurise' + LUrlChiffree + '/' + LNomFichier + '?Session=' + ANumeroSession;
            }
            strRawToUint8Array(aStr) {
                return Uint8Array.from([...aStr].map(aChar => aChar.charCodeAt(0)));
            }
            uint8ArrayToStrRaw(aUint) {
                const cCHUNK_SZ = 0x8000;
                const lArray = [];
                for (let i = 0; i < aUint.length; i += cCHUNK_SZ) {
                    lArray.push(String.fromCharCode.apply(null, Array.from(aUint.subarray(i, i + cCHUNK_SZ))));
                }
                return lArray.join('');
            }
        }
        const GCryptage = new ObjetCryptage();
        exports.GCryptage = GCryptage;
    },
    fn: 'objetcryptage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.getXmlHttp = getXmlHttp;
        try {
            global.Document.prototype.loadXML = function(S) {
                const LDocument = (new DOMParser()).parseFromString(S, 'text/xml');
                while (this.hasChildNodes()) {
                    this.removeChild(this.lastChild);
                }
                for (let I = 0; I < LDocument.childNodes.length; I++) {
                    this.appendChild(this.importNode(LDocument.childNodes[I], true));
                }
            }
            ;
        } catch (e) {}
        try {
            global.Document.prototype.__defineGetter__('xml', function() {
                return (new XMLSerializer()).serializeToString(this);
            });
        } catch (e) {}
        function getXmlHttp() {
            try {
                if (global.XMLHttpRequest) {
                    return new XMLHttpRequest();
                }
                const lActiveX = global.ActiveXObject;
                if (lActiveX) {
                    try {
                        return new lActiveX('Msxml2.XMLHTTP');
                    } catch (e) {
                        return new lActiveX('Microsoft.XMLHTTP');
                    }
                }
            } catch (e) {
                throw new Error('XmlHttp> ' + e);
            }
        }
    },
    fn: 'xmlhttp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeEtatRequeteAjax = void 0;
        var TypeEtatRequeteAjax;
        (function(TypeEtatRequeteAjax) {
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["initial"] = 0] = "initial";
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["preparationEnvoi"] = 1] = "preparationEnvoi";
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["envoye"] = 2] = "envoye";
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["recu"] = 3] = "recu";
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["termine"] = 4] = "termine";
        }
        )(TypeEtatRequeteAjax || (exports.TypeEtatRequeteAjax = TypeEtatRequeteAjax = {}));
    },
    fn: 'typeetatrequeteajax.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequete = void 0;
        const XmlHttp_1 = require("XmlHttp");
        const TypeEtatRequeteAjax_1 = require("TypeEtatRequeteAjax");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        class ObjetRequete {
            constructor(aParametres) {
                this.Parametres = {
                    numeroSession: 0,
                    asynchrone: true,
                    post: true,
                    nomRequete: '',
                    genreEspace: 0,
                    sansBlocageInterface: false,
                    nomDeFonction: '',
                    parametres: '',
                    jsonNonSecurise: null,
                    callBackReadyStateChange: null,
                    pereReponse: null,
                    evenementReponse: null,
                    messageDetail: '',
                    jsonOrigine: null,
                    echecReseau: false,
                    estBackup: false,
                    dataPOST: null,
                    log: {},
                    numeroRequete: 0
                };
                $.extend(this.Parametres, aParametres);
                this.estUneRequete = true;
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.initial;
            }
            getXmlRequest() {
                return this.Requete;
            }
            enAttente() {
                return this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.preparationEnvoi || this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye || this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.recu;
            }
            envoieRequete(aParametres) {
                const lParametres = $.extend({
                    numeroOrdre: 0,
                    numeroOrdreChiffre: ''
                }, aParametres);
                const lCheminSecurise = this.Parametres.nomRequete + '/' + (this.Parametres.genreEspace || 0).toString() + '/' + this.Parametres.numeroSession + '/' + lParametres.numeroOrdreChiffre;
                this.Requete = (0,
                XmlHttp_1.getXmlHttp)();
                this.Requete.open(this.Parametres.post ? 'Post' : 'Get', lCheminSecurise, this.Parametres.asynchrone);
                this.Requete.onreadystatechange = this.onReadyStateChange.bind(this);
                this.Requete.setRequestHeader('Content-Type', 'application/json');
                let lDataPost = null;
                if (this.Parametres.post) {
                    lDataPost = this.Parametres.estBackup ? this.Parametres.dataPOST : this._getData(lParametres.numeroOrdreChiffre);
                }
                this.backupDataJSON = lDataPost;
                this.Requete.send(lDataPost);
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye;
                try {
                    if (IE.log.getActifRequete()) {
                        let lEstAttente = false;
                        IE.log.addRequete({
                            nomRequete: this.Parametres.nomDeFonction,
                            numeroRequete: this.Parametres.numeroRequete,
                            numeroOrdre: lParametres.numeroOrdre,
                            chrono: {
                                xml: '',
                                traitement: this.Parametres.log.tempsChiffre
                            },
                            estReponse: false,
                            estBackup: this.Parametres.estBackup,
                            lgcontenu: this.Parametres.log.tailleDonnees,
                            estPolling: this.Parametres.estPolling,
                            estAttente: lEstAttente
                        });
                    }
                } catch (e) {}
            }
            toString() {
                return this.Parametres.nomDeFonction;
            }
            _getData(aNumeroOrdreChiffre) {
                const lJSON = {};
                lJSON[TypesRequeteJSON_1.ConstantesJSON.numeroSession] = this.Parametres.numeroSession;
                lJSON[TypesRequeteJSON_1.ConstantesJSON.numeroOrdre] = aNumeroOrdreChiffre;
                lJSON[TypesRequeteJSON_1.ConstantesJSON.idRequete] = this.Parametres.nomDeFonction;
                lJSON[TypesRequeteJSON_1.ConstantesJSON.donneesSecurisee] = this.Parametres.parametres;
                if (this.Parametres.jsonNonSecurise) {
                    lJSON[TypesRequeteJSON_1.ConstantesJSON.donneesNonSecurisee] = this.Parametres.jsonNonSecurise;
                }
                if (this.Parametres.echecReseau) {
                    lJSON[TypesRequeteJSON_1.ConstantesJSON.echecReseau] = true;
                }
                return JSON.stringify(lJSON);
            }
            onReadyStateChange() {
                if (this.Requete.readyState === 4) {
                    this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.recu;
                    if (this.Parametres.callBackReadyStateChange) {
                        const lRequeteXmlHttp = this.Requete;
                        delete this.Requete;
                        this.Parametres.callBackReadyStateChange(this, lRequeteXmlHttp.responseText, lRequeteXmlHttp.status);
                        lRequeteXmlHttp.onreadystatechange = null;
                    }
                }
            }
        }
        exports.ObjetRequete = ObjetRequete;
    },
    fn: 'objetrequete.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeEtatUpload = void 0;
        var TypeEtatUpload;
        (function(TypeEtatUpload) {
            TypeEtatUpload[TypeEtatUpload["TEU_Inconnu"] = 0] = "TEU_Inconnu";
            TypeEtatUpload[TypeEtatUpload["TEU_Reussi"] = 1] = "TEU_Reussi";
            TypeEtatUpload[TypeEtatUpload["TEU_Erreur"] = 2] = "TEU_Erreur";
            TypeEtatUpload[TypeEtatUpload["TEU_EnCours"] = 3] = "TEU_EnCours";
        }
        )(TypeEtatUpload || (exports.TypeEtatUpload = TypeEtatUpload = {}));
    },
    fn: 'typeetatupload.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UploadFileAjax = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const XmlHttp_1 = require("XmlHttp");
        const Invocateur_1 = require("Invocateur");
        const u_blobSlice = global.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice);
        class UploadFileAjax {
            static sendPromise(aParams) {
                const lParams = Object.assign({
                    url: '',
                    file: null,
                    remplisseurFormData: null,
                    remplisseurHeaders: null,
                    responseType: 'json',
                    maxChunkSize: 100 * 1024,
                    fournisseurAbort: null,
                    callbackProgress: null
                }, aParams);
                if (!lParams.url || !lParams.file) {
                    return Promise.reject();
                }
                Object.assign(lParams, {
                    _fileSize: lParams.file.size,
                    funcAbort: () => {}
                });
                if (lParams.fournisseurAbort) {
                    lParams.fournisseurAbort( () => {
                        return lParams.funcAbort();
                    }
                    );
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
                }
                return this._sendChunk(lParams, 0).finally( () => {
                    if (lParams.fournisseurAbort) {
                        lParams.fournisseurAbort(null);
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
                    }
                }
                );
            }
            static _sendChunk(aParams, aIndexStart) {
                let lIndexStartSuivant = aIndexStart;
                return new Promise( (aResolve, aReject) => {
                    if (aParams._aborted) {
                        aReject({
                            fail: true,
                            isAborted: true,
                            estReponseRequete: false,
                            statut: 0,
                            response: null
                        });
                        return;
                    }
                    const lRequete = (0,
                    XmlHttp_1.getXmlHttp)();
                    if (aParams.responseType) {
                        lRequete.responseType = aParams.responseType;
                    }
                    lRequete.open('POST', aParams.url);
                    let lFile = null;
                    if (aParams._fileSize > aParams.maxChunkSize && aParams.maxChunkSize > 0 && u_blobSlice) {
                        const lIndexEnd = Math.min(aIndexStart + aParams.maxChunkSize, aParams._fileSize);
                        lFile = u_blobSlice.call(aParams.file, aIndexStart, lIndexEnd, aParams.file.type);
                        lRequete.setRequestHeader('content-range', `bytes ${aIndexStart}-${lIndexEnd - 1}/${aParams._fileSize}`);
                        lIndexStartSuivant += aParams.maxChunkSize;
                    } else {
                        lFile = aParams.file;
                        lIndexStartSuivant += aParams._fileSize;
                    }
                    if (aParams.file.name) {
                        lRequete.setRequestHeader('content-disposition', `attachment; filename="${encodeURI(aParams.file.name)}"`);
                    }
                    let lBody = null;
                    if (MethodesObjet_1.MethodesObjet.isFunction(aParams.remplisseurFormData)) {
                        lBody = new FormData();
                        aParams.remplisseurFormData(lBody, lFile);
                    } else {
                        lBody = lFile;
                    }
                    if (MethodesObjet_1.MethodesObjet.isFunction(aParams.remplisseurHeaders)) {
                        aParams.remplisseurHeaders(lRequete);
                    }
                    lRequete.onreadystatechange = () => {
                        if (lRequete.readyState === 4) {
                            aParams.funcAbort = () => {
                                aParams._aborted = true;
                            }
                            ;
                            if (aParams.callbackProgress) {
                                aParams.callbackProgress({
                                    pourcent: Math.min(aIndexStart + aParams.maxChunkSize, aParams._fileSize) * 100 / aParams._fileSize
                                });
                            }
                            const lResult = {
                                estReponseRequete: true,
                                statut: lRequete.status,
                                response: lRequete.response
                            };
                            if (lRequete.status >= 200 && lRequete.status < 300) {
                                aResolve(Object.assign(lResult, {
                                    done: true
                                }));
                            } else {
                                aReject(Object.assign(lResult, {
                                    fail: true,
                                    isAborted: !!lRequete._aborted && lRequete.status === 0
                                }));
                            }
                        }
                    }
                    ;
                    aParams.funcAbort = () => {
                        lRequete._aborted = true;
                        lRequete.abort();
                    }
                    ;
                    lRequete.send(lBody);
                }
                ).then( (aResult) => {
                    if (lIndexStartSuivant < aParams._fileSize) {
                        return this._sendChunk(aParams, lIndexStartSuivant);
                    }
                    return aResult;
                }
                );
            }
        }
        exports.UploadFileAjax = UploadFileAjax;
    },
    fn: 'uploadfileajax.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteUploadFile = void 0;
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeEtatUpload_1 = require("TypeEtatUpload");
        const TypeEtatRequeteAjax_1 = require("TypeEtatRequeteAjax");
        const MethodesObjet_1 = require("MethodesObjet");
        const UploadFileAjax_1 = require("UploadFileAjax");
        const AccessApp_1 = require("AccessApp");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        let uIdFichier = 0;
        class ObjetRequeteUploadFile {
            constructor(aParametres) {
                this.estUneRequete = false;
                this.estUploadFile = true;
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.initial;
                this.donnees = Object.assign({
                    listeFichiers: null,
                    maxChunkSize: 100 * 1024,
                    messageEchec: ObjetTraduction_1.GTraductions.getValeur('inputFile.echecEnvoi'),
                    callbackDone: null,
                    callback: null,
                    callbackEach: null,
                    getFormData: null,
                    getUrl: null,
                    callbackInterrupt: null,
                    moduleMD5: null
                }, aParametres);
                this.progression = {
                    requete: this,
                    listeFichiersEnAttente: this.donnees.listeFichiers.getListeElements(),
                    nbReussi: 0,
                    error: null
                };
            }
            estVide() {
                return !this.donnees || !this.donnees.listeFichiers || !this.donnees.listeFichiers.count || this.donnees.listeFichiers.count() === 0;
            }
            envoiRequete(aParams) {
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye;
                Object.assign(this.donnees, aParams);
                const lSelf = this;
                let lParams = null;
                if (this.donnees.callbackInterrupt) {
                    lParams = {
                        htmlPied: '<ie-bouton ie-model="btnInterrupt">' + ObjetTraduction_1.GTraductions.getValeur('inputFile.AnnulerLEnvoi') + '</ie-bouton>',
                        controleur: {
                            btnInterrupt: {
                                event: function() {
                                    if (lSelf.progression.funcAbortRequete) {
                                        lSelf.progression.funcAbortRequete();
                                    }
                                },
                                getDisabled: function() {
                                    return !lSelf.progression.funcAbortRequete;
                                }
                            }
                        }
                    };
                }
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                    emission: true,
                    upload: true,
                    nombreFichiers: this.donnees.listeFichiers.getNbrElementsExistes(),
                    init: true,
                    params: lParams
                });
                this._sendNextFile();
            }
            enAttente() {
                return this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.preparationEnvoi || this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye || this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.recu;
            }
            _eventAjaxIOProgression(aParams) {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                    emission: true,
                    upload: true,
                    message: aParams.message || ObjetTraduction_1.GTraductions.getValeur('requete.transfertPJ'),
                    nombreFichiers: this.donnees.listeFichiers.getNbrElementsExistes(),
                    ignorerBlocageClavier: true,
                    progress: {
                        personnalise: true,
                        actualFile: this.progression.nbReussi + 1,
                        percent: aParams.pourcent || 0,
                        md5: aParams.md5 || false
                    }
                });
            }
            _send(aFichier, aMD5) {
                return new Promise( (aResolve) => {
                    this._eventAjaxIOProgression({});
                    if (!aFichier.idFichier) {
                        uIdFichier += 1;
                        aFichier.idFichier = 'reqUpl_' + uIdFichier + '_' + Date.now();
                    }
                    this.progression.json = null;
                    const lFormData = this.donnees.getFormData(aFichier) || {};
                    if (aMD5) {
                        lFormData[TypesRequeteJSON_1.ConstantesUploadFile.md5] = aMD5;
                    }
                    return UploadFileAjax_1.UploadFileAjax.sendPromise({
                        url: this.donnees.getUrl(),
                        file: aFichier.file,
                        remplisseurFormData: (aFormData, aFile) => {
                            Object.keys(lFormData).forEach( (aKeys) => {
                                aFormData.append(aKeys, lFormData[aKeys]);
                            }
                            );
                            aFormData.append('files[]', aFile, aFichier.file.name);
                        }
                        ,
                        maxChunkSize: this.donnees.maxChunkSize,
                        fournisseurAbort: (aAbortRequete) => {
                            this.progression.funcAbortRequete = aAbortRequete;
                        }
                        ,
                        callbackProgress: (aParams) => {
                            const lProgressBar = Math.round(aParams.pourcent);
                            this._eventAjaxIOProgression({
                                pourcent: lProgressBar
                            });
                        }
                    }).then( (aResult) => {
                        if (aResult.response && MethodesObjet_1.MethodesObjet.isNumber(aResult.response.etat)) {
                            this.progression.json = aResult.response;
                            if (aResult.response.etat === TypeEtatUpload_1.TypeEtatUpload.TEU_Reussi) {
                                this.progression.nbReussi += 1;
                            } else {
                                this.progression.error = {
                                    message: aResult.response.message
                                };
                            }
                        } else {
                            this.progression.error = {};
                        }
                    }
                    , (aError) => {
                        if (aError) {
                            if (aError.isAborted) {
                                this.progression.error = {
                                    abort: true,
                                    message: ObjetTraduction_1.GTraductions.getValeur('inputFile.msgEnvoiFichierAnnule')
                                };
                            } else {
                                this.progression.error = {
                                    fail: true
                                };
                            }
                            if (aError.response) {
                                this.progression.json = aError.response;
                                if (this.progression.json && this.progression.json.message) {
                                    this.progression.error.message = this.progression.json.message;
                                }
                            }
                        } else {
                            IE.log.addLog(`echec fichier ${aError}`);
                            this.progression.error = {
                                fail: true
                            };
                        }
                    }
                    ).finally( () => {
                        IEHtml.refresh(true);
                        aResolve(aFichier);
                    }
                    );
                }
                );
            }
            _debloquerPatience() {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                    emission: false,
                    upload: true,
                    debloquerForcer: true
                });
            }
            _doneFile(aFichier) {
                this.progression.funcAbortRequete = null;
                IEHtml.refresh(true);
                let lErreurSession = null;
                const lSurAnnulationUpload = this.progression.error && this.progression.error.abort;
                if (!lSurAnnulationUpload && this.donnees.callbackEach && this.progression.json) {
                    lErreurSession = this.donnees.callbackEach(this.progression.json);
                }
                if (lErreurSession) {
                    this.progression.error = {};
                }
                if (this.progression.error) {
                    this.progression.listeFichiersEnAttente = new ObjetListeElements_1.ObjetListeElements();
                    this._debloquerPatience();
                    if (lSurAnnulationUpload && !lErreurSession && this.donnees.callbackInterrupt) {
                        this.donnees.callbackInterrupt();
                    }
                    Promise.resolve().then( () => {
                        if (!lErreurSession) {
                            return (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                titre: this.progression.error.titre || '',
                                message: this.progression.error.message || this.donnees.messageEchec
                            });
                        }
                    }
                    ).then( () => {
                        this._doneAll(lErreurSession);
                    }
                    );
                } else {
                    this._sendNextFile();
                }
            }
            _doneAll(aErreurSession) {
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.recu;
                this._debloquerPatience();
                let lErreurSession = aErreurSession;
                if (this.progression && this.progression.error && this.progression.json && this.progression.json.Erreur) {
                    lErreurSession = this.progression.json.Erreur;
                }
                if (this.donnees.callbackDone) {
                    this.donnees.callbackDone({
                        requete: this,
                        progression: this.progression,
                        erreurSession: lErreurSession,
                        callback: this.donnees.callback
                    });
                }
                if (this.donnees.callback) {
                    this.donnees.callback(this.progression);
                }
                IEHtml.refresh(true);
            }
            _sendNextFile() {
                if (this.progression.listeFichiersEnAttente.count() > 0) {
                    const lFichier = this.progression.listeFichiersEnAttente.get(0);
                    this.progression.listeFichiersEnAttente.remove(0);
                    let lPromise = null;
                    if (this.donnees.moduleMD5 && this.donnees.moduleMD5.calculMD5) {
                        lPromise = this.donnees.moduleMD5.calculMD5({
                            instance: this,
                            fichier: lFichier,
                            eventAjaxIOProgression: this._eventAjaxIOProgression
                        });
                    }
                    return Promise.resolve(lPromise).then( (aMD5) => {
                        return this._send(lFichier, aMD5);
                    }
                    , () => {
                        IE.log.addLog('Echec calcul md5 (erreur ou fichier trop gros)');
                        return this._send(lFichier, '');
                    }
                    ).catch( (aErreur) => {
                        this.progression.error = {
                            abort: true,
                            message: ObjetTraduction_1.GTraductions.getValeur('inputFile.msgEnvoiFichierAnnule')
                        };
                    }
                    ).then( () => {
                        return this._doneFile(lFichier);
                    }
                    );
                } else {
                    this._doneAll();
                }
            }
        }
        exports.ObjetRequeteUploadFile = ObjetRequeteUploadFile;
    },
    fn: 'objetrequeteuploadfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ModuleMD5_RequeteUploadFile = void 0;
        require("DeclarationForge");
        const ObjetTraduction_1 = require("ObjetTraduction");
        function _toBinaryString(aParams) {
            return new Promise( (aResolve) => {
                const lChunk = 100 * 1024;
                if (aParams.start >= aParams.bytes.length) {
                    aParams.done = true;
                } else {
                    aParams.tabResult.push(String.fromCharCode.apply(null, aParams.bytes.slice(aParams.start, aParams.start + lChunk)));
                }
                aParams.eventAjaxIOProgression.call(aParams.instance, {
                    message: ObjetTraduction_1.GTraductions.getValeur('inputFile.msgPreparationFichier'),
                    pourcent: Math.round((aParams.compteur * lChunk) / (aParams.bytes.length * 100 * 1024)),
                    md5: true
                });
                aParams.start += lChunk;
                aParams.compteur += 1;
                setTimeout( () => {
                    aResolve(aParams);
                }
                , 0);
            }
            );
        }
        function _toBinaryStringPromise(aParams) {
            return _toBinaryString(aParams).then( () => {
                if (!aParams.done) {
                    return _toBinaryStringPromise(aParams);
                }
            }
            );
        }
        exports.ModuleMD5_RequeteUploadFile = {
            calculMD5(aParams) {
                const lParams = Object.assign({
                    instance: null,
                    fichier: null,
                    eventAjaxIOProgression: null,
                    maxSizePourMD5: 30 * 1024 * 1024
                }, aParams);
                return new Promise( (aResolve, aReject) => {
                    if (!window.FileReader || !window.Uint8Array) {
                        IE.log.addLog('FileReader ou Uint8Array non support => pas de controle de MD5');
                        aReject();
                        return;
                    }
                    if (lParams.fichier.file.size > lParams.maxSizePourMD5) {
                        IE.log.addLog('Fichier trop gros pur calculer le MD5');
                        aReject();
                        return;
                    }
                    try {
                        lParams.eventAjaxIOProgression.call(lParams.instance, {
                            message: ObjetTraduction_1.GTraductions.getValeur('inputFile.msgPreparationFichier')
                        });
                        const lReader = new FileReader();
                        lReader.onload = function() {
                            try {
                                const lParamsReader = Object.assign({
                                    bytes: new Uint8Array(lReader.result),
                                    tabResult: [],
                                    start: 0,
                                    compteur: 0
                                }, lParams);
                                if (!lParamsReader.bytes.slice) {
                                    lParamsReader.bytes = Array.from(lParamsReader.bytes);
                                }
                                _toBinaryStringPromise(lParamsReader).then( () => {
                                    let lMd5 = '';
                                    if (lParamsReader.done) {
                                        lMd5 = forge.md.md5.create().update(lParamsReader.tabResult.join('')).digest().toHex();
                                    }
                                    aResolve(lMd5);
                                }
                                , () => {
                                    aReject();
                                }
                                );
                            } catch (e) {}
                        }
                        .bind(lParams.instance);
                        lReader.onerror = function() {
                            aReject();
                        }
                        .bind(lParams.instance);
                        lReader.readAsArrayBuffer(lParams.fichier.file);
                    } catch (e) {
                        aReject();
                    }
                }
                );
            }
        };
    },
    fn: 'modulemd5_requeteuploadfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.CommunicationProduit = void 0;
        require("Divers");
        require("DeclarationForge");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const Enumere_Cryptage_1 = require("Enumere_Cryptage");
        const ObjetCryptage_1 = require("ObjetCryptage");
        const ObjetRequete_1 = require("ObjetRequete");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetJSON_1 = require("ObjetJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetRequeteUploadFile_1 = require("ObjetRequeteUploadFile");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const TypeEtatRequeteAjax_1 = require("TypeEtatRequeteAjax");
        const ModuleMD5_RequeteUploadFile_1 = require("ModuleMD5_RequeteUploadFile");
        const AccessApp_1 = require("AccessApp");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        class CommunicationProduit {
            constructor(AGenreEspace, aNumeroSession) {
                this.nom = 'GCommunication';
                this._pileTimerEnAttente = {};
                this._attenteEnCours = false;
                this.FDureeEnCours = 1000 * 0.5;
                this.GenreEspace = AGenreEspace;
                this.NomRequete = 'appelfonction';
                this.pileRequetes = [];
                this.compteurRequete = 0;
                this.NumeroDeSession = MethodesObjet_1.MethodesObjet.isNumber(aNumeroSession) ? aNumeroSession : 0;
                this.NumeroOrdreCommunication = 1;
                this.cleAES = new forge.util.ByteBuffer();
                this.ivAES = new forge.util.ByteBuffer();
                this.ivAESTemp = new forge.util.ByteBuffer(forge.random.generate(16));
                this.backupAjax = {
                    nbBackupEchec: 20,
                    delaiTimeoutEchecReseau: 30 * 60 * 1000,
                    delaiRepetitionEchecReseau: 3 * 1000
                };
                this.polling = {
                    nbRequetes: 0,
                    numeroOrdre: -1,
                    nbRepetitionEchecReseau: 15,
                    delaiRepetitionEchecReseau: 3000,
                    delaiTimeoutEchecReseau: 30 * 60 * 1000,
                    delaiTimeoutRequete: 10 * 60 * 1000
                };
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.modificationPresenceUtilisateur, this._modificationPresenceUtilisateur.bind(this));
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.interruption_Requete, this._eventInterruptionRequete.bind(this));
                window.addEventListener('pagehide', this._requeteBeaconDeconnexion.bind(this));
            }
            getNom() {
                return this.nom;
            }
            setNom(aNom) {
                this.nom = aNom;
            }
            arreter() {
                if (this.estArrete) {
                    return;
                }
                this._requeteBeaconDeconnexion();
                clearTimeout(this._timeoutRequeteBackup);
                this.estArrete = true;
                this.desactiverPolling();
                delete this.ivAES;
                delete this.cleAES;
                delete this.NumeroOrdreCommunication;
            }
            getIvAES() {
                return this.ivAES;
            }
            setIvAES() {
                this.ivAES = this.ivAESTemp;
                delete (this.ivAESTemp);
            }
            setCleAES(aCleAES) {
                this.cleAES = aCleAES;
            }
            appelFonctionAsynchroneXML(aParametres) {
                if (this.estArrete) {
                    return;
                }
                const lParametresAppel = {
                    nom: '',
                    json: {},
                    callbackPere: null,
                    callbackEvenement: null,
                    requetePrioritaire: false,
                    sansBlocageInterface: false,
                    messageDetail: '',
                    estBackup: false,
                    backupDataJSON: null
                };
                $.extend(lParametresAppel, aParametres);
                let lRequeteUpload = null;
                const lParamsRequete = {
                    numeroSession: this.NumeroDeSession,
                    numeroRequete: this.compteurRequete,
                    nomRequete: this.NomRequete,
                    genreEspace: this.GenreEspace,
                    sansBlocageInterface: lParametresAppel.sansBlocageInterface === true,
                    nomDeFonction: lParametresAppel.nom,
                    callBackReadyStateChange: this._evenementSurReponseRequete.bind(this, lParametresAppel),
                    pereReponse: lParametresAppel.callbackPere,
                    evenementReponse: lParametresAppel.callbackEvenement,
                    messageDetail: lParametresAppel.messageDetail,
                    log: {
                        tailleDonnees: '',
                        tempsChiffre: ''
                    }
                };
                if (!lParametresAppel.estBackup) {
                    const lJSONCollection = {};
                    lParametresAppel.json = ObjetJSON_1.ObjetJSON.preparerJSON(lParametresAppel.json, {
                        JSONCollection: lJSONCollection
                    });
                    if (lParametresAppel.paramsUpload && lParametresAppel.paramsUpload.listeFichiers) {
                        lRequeteUpload = this._factoryRequeteUploadFile(Object.assign({
                            nomRequete: lParametresAppel.nom
                        }, lParametresAppel.paramsUpload));
                        if (!lRequeteUpload.estVide()) {
                            this.pileRequetes.push(lRequeteUpload);
                            this._envoieRequete();
                        } else {
                            lRequeteUpload = null;
                        }
                    }
                    const lResultJSON = this._traiterJSONEnvoi(lParametresAppel.json);
                    Object.assign(lParamsRequete, {
                        parametres: lResultJSON.JSON,
                        jsonOrigine: lParametresAppel.json,
                        jsonNonSecurise: $.isEmptyObject(lJSONCollection) ? null : lJSONCollection,
                        log: {
                            tailleDonnees: lResultJSON.JSONStr_clair.length,
                            tempsChiffre: lResultJSON.chronoStr
                        }
                    });
                } else {
                    Object.assign(lParamsRequete, {
                        estBackup: true,
                        dataPOST: lParametresAppel.backupDataJSON
                    });
                }
                const lRequete = new ObjetRequete_1.ObjetRequete(lParamsRequete);
                if (lParametresAppel.estBackup) {
                    this.pileRequetes.splice(0, 0, lRequete);
                } else if (lParametresAppel.requetePrioritaire && !lRequeteUpload) {
                    this.pileRequetes.splice(1, 0, lRequete);
                } else {
                    this.pileRequetes.push(lRequete);
                }
                this.compteurRequete += 1;
                if (lRequeteUpload) {
                    lRequeteUpload.requeteSaisieApresUpload = lRequete;
                }
                this._envoieRequete();
                return lRequete;
            }
            requeteEnCours() {
                return (this.pileRequetes[0] && this.pileRequetes[0].enAttente()) || this._attenteEnCours;
            }
            composeUrlFichier(aPrefix, aNomFichier, aParam) {
                let lResult = '';
                if (aPrefix !== '') {
                    lResult += aPrefix + '/';
                }
                lResult += this.getChaineChiffreeAES(JSON.stringify(aParam && aParam.toJSONAll ? aParam.toJSONAll() : aParam));
                lResult += '/' + aNomFichier;
                lResult += '?Session=' + this.NumeroDeSession;
                if ((aParam.miniature !== null) && (aParam.miniature !== undefined)) {
                    lResult += '&miniature=' + aParam.miniature;
                }
                return lResult;
            }
            composeUrlFichierExterne(aNomFichier, aParam) {
                return this.composeUrlFichier('FichiersExternes', ObjetChaine_1.GChaine.enleverEntites(aNomFichier), aParam);
            }
            getChaineChiffreeAES(aChaine) {
                return ObjetCryptage_1.GCryptage.encrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: aChaine,
                    cle: this.cleAES,
                    iv: this.ivAES
                });
            }
            getChaineDechiffreeAES(aChaine) {
                return ObjetCryptage_1.GCryptage.decrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: aChaine,
                    cle: this.cleAES,
                    iv: this.ivAES
                });
            }
            serialiserIVAESPourSeveur() {
                if (CommunicationProduit.optionsSecurite.http) {
                    return ObjetCryptage_1.GCryptage.getCryptageRSA().encrypter1024(this.ivAESTemp);
                }
                return forge.util.encode64(this.ivAESTemp.bytes(), 64);
            }
            sendLogClient(aMessage) {
                if (aMessage && navigator && navigator.sendBeacon) {
                    try {
                        navigator.sendBeacon('LogClientLeger', ObjetJSON_1.ObjetJSON.toJSON({
                            ns: this.NumeroDeSession,
                            msg: aMessage
                        }));
                    } catch (e) {}
                }
            }
            activerPolling() {
                this._pollingActif = true;
                this._envoiRequetePolling();
            }
            desactiverPolling() {
                this._pollingActif = false;
            }
            _traiterJSONEnvoi(aJSON) {
                const lResult = {
                    JSON: aJSON,
                    JSONStr_clair: '',
                    chronoStr: ''
                };
                if (!aJSON) {
                    return lResult;
                }
                const lSecurise = !!CommunicationProduit.optionsSecurite.avecCryptageAES;
                let lChrono;
                if (lSecurise) {
                    if (IE.log && IE.log.getActifRequete && IE.log.getActifRequete() && Chronometre_1.Chronometre) {
                        lChrono = new Chronometre_1.Chronometre();
                    }
                    lResult.JSONStr_clair = JSON.stringify(lResult.JSON) || '';
                    lResult.JSON = ObjetCryptage_1.GCryptage.encrypter({
                        genreCryptage: lSecurise ? Enumere_Cryptage_1.EGenreCryptage.AES : Enumere_Cryptage_1.EGenreCryptage.Unicode,
                        chaine: lResult.JSONStr_clair,
                        cle: this.cleAES,
                        iv: lSecurise ? this.ivAES : null,
                        avecCompression: lSecurise && !!CommunicationProduit.optionsSecurite.avecCompressionAES
                    });
                    if (lChrono) {
                        lResult.chronoStr = lChrono.toString();
                    }
                } else {}
                return lResult;
            }
            _factoryRequeteUploadFile(aDonnees) {
                const lDonnees = Object.assign({
                    listeFichiers: null,
                    moduleMD5: ModuleMD5_RequeteUploadFile_1.ModuleMD5_RequeteUploadFile,
                    filtreFichiers: function(D) {
                        return !!D && ((D.getEtat() === Enumere_Etat_1.EGenreEtat.Creation) || (D.getEtat() === Enumere_Etat_1.EGenreEtat.Modification)) && D.existe() && D.idFichier !== CommunicationProduit.c_IdFichierAIgnorer && D.idFichier !== undefined && !!D.file;
                    },
                    getFormData: (aFichier) => {
                        return {
                            [TypesRequeteJSON_1.ConstantesUploadFile.numeroOrdre]: this.getChaineChiffreeAES(this.NumeroOrdreCommunication),
                            [TypesRequeteJSON_1.ConstantesUploadFile.numeroSession]: this.NumeroDeSession,
                            [TypesRequeteJSON_1.ConstantesUploadFile.idRequete]: lDonnees.nomRequete,
                            [TypesRequeteJSON_1.ConstantesUploadFile.idFichier]: aFichier.idFichier
                        };
                    }
                    ,
                    getUrl: () => {
                        return ObjetChaine_1.GChaine.format('%s/%s/%s', ['uploadfilesession', this.GenreEspace, this.NumeroDeSession]);
                    }
                    ,
                    callbackInterrupt: function() {
                        new ObjetRequeteAnnulation().setOptions({
                            requetePrioritaire: true
                        }).lancerRequete({
                            annulationUpload: true
                        });
                    },
                    callbackEach: (aJSON) => {
                        let lNumeroOrdre = null;
                        try {
                            if (aJSON && aJSON.numeroOrdre) {
                                lNumeroOrdre = parseInt(ObjetCryptage_1.GCryptage.decrypter({
                                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                                    chaine: aJSON.numeroOrdre,
                                    cle: this.cleAES,
                                    iv: this.ivAES
                                }), 10);
                            }
                        } catch (e) {}
                        if (lNumeroOrdre !== this.NumeroOrdreCommunication + 1) {
                            return this._getErreurConnexionInterrompue();
                        } else {
                            this.NumeroOrdreCommunication += 2;
                        }
                        return null;
                    }
                    ,
                    callbackDone: (aParams) => {
                        if (aParams.erreurSession) {
                            this._composePageErreur(aParams.erreurSession);
                            return;
                        }
                        if (aParams.requete && aParams.requete.requeteSaisieApresUpload && aParams.requete.requeteSaisieApresUpload.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.initial && aParams.progression.error && (aParams.requete.donnees.annulerSurErreurUpload || (aParams.progression.error.abort && aParams.requete.donnees.annulerSurAbortUpload))) {
                            aParams.requete.requeteSaisieApresUpload.estRequeteAnnulee = true;
                        }
                        if (aParams.requete.estUploadFile && aParams.requete.enAttente()) {
                            this._setRequeteEtatTermine(aParams.requete);
                        } else {}
                        this._envoieRequete();
                    }
                }, aDonnees);
                const lListe = new ObjetListeElements_1.ObjetListeElements();
                if (lDonnees.listeFichiers && lDonnees.listeFichiers.parcourir) {
                    lDonnees.listeFichiers.parcourir( (D) => {
                        if (lDonnees.filtreFichiers && lDonnees.filtreFichiers(D)) {
                            const lElement = MethodesObjet_1.MethodesObjet.dupliquer(D);
                            lElement.file = D.file;
                            lListe.addElement(lElement);
                            D.idFichier = CommunicationProduit.c_IdFichierAIgnorer;
                        }
                    }
                    );
                }
                lDonnees.listeFichiers = lListe;
                return new ObjetRequeteUploadFile_1.ObjetRequeteUploadFile(lDonnees);
            }
            _envoieRequete() {
                clearTimeout(this._timeoutRequeteBackup);
                const lRequete = this.pileRequetes[0];
                if (!lRequete) {
                    return;
                }
                const lEstRequeteAjax = lRequete instanceof ObjetRequete_1.ObjetRequete;
                const lEstRequeteUpload = lRequete instanceof ObjetRequeteUploadFile_1.ObjetRequeteUploadFile;
                if (lRequete.estRequeteAnnulee && !lRequete.enAttente() && lEstRequeteAjax) {
                    this._surReception(lRequete, null, {
                        annulationRequete: true
                    });
                    return;
                }
                if (!lRequete.enAttente()) {
                    lRequete.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.preparationEnvoi;
                    if (!this._attenteEnCours && (lEstRequeteUpload || (lEstRequeteAjax && (!lRequete.Parametres || !lRequete.Parametres.sansBlocageInterface)))) {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                            emission: true,
                            upload: !lRequete.estUneRequete,
                            message: lEstRequeteAjax ? lRequete.Parametres.messageDetail : null,
                            delai: this.pileRequetes.length > 1 || (lEstRequeteAjax && lRequete.Parametres && lRequete.Parametres.estBackup) ? 0 : null
                        });
                    }
                    if (lRequete.estUneRequete && lEstRequeteAjax) {
                        lRequete.envoieRequete({
                            numeroOrdre: this.NumeroOrdreCommunication,
                            numeroOrdreChiffre: this.getChaineChiffreeAES(this.NumeroOrdreCommunication)
                        });
                    } else if (lRequete.estUploadFile && lEstRequeteUpload) {
                        lRequete.envoiRequete();
                    } else {}
                } else {
                    if (lRequete && lEstRequeteAjax && lRequete.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye && !this._attenteEnCours && lRequete.Parametres && lRequete.Parametres.sansBlocageInterface) {
                        let lAvecBlocageEnAttente = false;
                        this.pileRequetes.every( (aRequete, aIndex) => {
                            if (aRequete && (aRequete instanceof ObjetRequeteUploadFile_1.ObjetRequeteUploadFile || (aRequete instanceof ObjetRequete_1.ObjetRequete && (!aRequete.Parametres || !aRequete.Parametres.sansBlocageInterface)))) {
                                lAvecBlocageEnAttente = true;
                                this.pileRequetes.every( (aRequete, aIndex2) => {
                                    if (aRequete && aRequete instanceof ObjetRequete_1.ObjetRequete && aRequete.Parametres && aRequete.Parametres.sansBlocageInterface) {
                                        aRequete.Parametres.sansBlocageInterface = false;
                                    }
                                    return aIndex2 < aIndex;
                                }
                                );
                                return false;
                            }
                            return true;
                        }
                        );
                        if (lAvecBlocageEnAttente) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                emission: true,
                                upload: false,
                                delai: 0
                            });
                        }
                    }
                }
            }
            _getErreurConnexionInterrompue() {
                return {
                    Titre: '',
                    Message: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurConnexionInterrompue')
                };
            }
            _getXmlReponseStatut200(ARequete, AReponse, aJSON, aSurPolling) {
                if (this.estArrete) {
                    return;
                }
                const lNumeroSession = aJSON[TypesRequeteJSON_1.ConstantesJSON.numeroSession];
                const lNumeroOrdre = aJSON[TypesRequeteJSON_1.ConstantesJSON.numeroOrdre];
                const lDonneesSecurisees = aJSON[TypesRequeteJSON_1.ConstantesJSON.donneesSecurisee];
                const lSecurise = !!CommunicationProduit.optionsSecurite.avecCryptageAES;
                let lNomRequete = aJSON[TypesRequeteJSON_1.ConstantesJSON.idRequete] + 'Reponse';
                const lErreur = this._getErreurConnexionInterrompue();
                if (aSurPolling) {
                    lNomRequete = 'pollingReponse';
                }
                if (this.NumeroDeSession !== lNumeroSession && lNumeroSession !== 0) {
                    if (!aJSON.Erreur) {
                        aJSON.Erreur = lErreur;
                    }
                    return null;
                }
                const lNumOrdreServeur = parseInt(ObjetCryptage_1.GCryptage.decrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: lNumeroOrdre,
                    cle: this.cleAES,
                    iv: this.ivAES
                }), 10);
                let lEstErreurNumeroOrdre = false;
                if (aSurPolling) {
                    lEstErreurNumeroOrdre = lNumOrdreServeur !== this.polling.numeroOrdre + 1;
                } else {
                    lEstErreurNumeroOrdre = lNumOrdreServeur !== this.NumeroOrdreCommunication + 1;
                }
                if (lEstErreurNumeroOrdre) {
                    if (!aJSON.Erreur) {
                        aJSON.Erreur = lErreur;
                    }
                    return null;
                }
                if (!aSurPolling) {
                    this.NumeroOrdreCommunication += 2;
                }
                let lChrono;
                let lChronoTrait = '';
                if (lSecurise) {
                    if (IE.log && IE.log.getActifRequete && IE.log.getActifRequete() && Chronometre_1.Chronometre) {
                        lChrono = new Chronometre_1.Chronometre();
                    }
                    const lReponse = ObjetCryptage_1.GCryptage.decrypter({
                        genreCryptage: CommunicationProduit.optionsSecurite.avecCryptageAES ? Enumere_Cryptage_1.EGenreCryptage.AES : Enumere_Cryptage_1.EGenreCryptage.Unicode,
                        chaine: lDonneesSecurisees,
                        cle: this.cleAES,
                        iv: this.ivAES,
                        avecCompression: !!CommunicationProduit.optionsSecurite.avecCompressionAES
                    });
                    aJSON.donnees = ObjetJSON_1.ObjetJSON.parseJSON(lReponse);
                    if (lChrono && IE.log.getActifRequete()) {
                        lChronoTrait = lChrono.toString();
                    }
                } else {
                    aJSON.donnees = lDonneesSecurisees;
                }
                delete aJSON[TypesRequeteJSON_1.ConstantesJSON.donneesSecurisee];
                if (!aJSON.donnees) {
                    aJSON.Erreur = lErreur;
                    return null;
                }
                aJSON.donnees = ObjetJSON_1.ObjetJSON.parseVariables(aJSON.donnees, {
                    JSONCollection: aJSON[TypesRequeteJSON_1.ConstantesJSON.donneesNonSecurisee]
                });
                try {
                    if (IE.log.getActifRequete()) {
                        let lChronoServeur = null;
                        let lChronoSaisieMs;
                        let lEstAttente = false;
                        IE.log.addRequete({
                            nomRequete: lNomRequete,
                            numeroRequete: ARequete.Parametres.numeroRequete,
                            numeroOrdre: aSurPolling ? this.polling.numeroOrdre : this.NumeroOrdreCommunication - 1,
                            chrono: {
                                requeteServeurtickMs: lChronoServeur,
                                traitement: lChronoTrait,
                                saisieMS: lChronoSaisieMs
                            },
                            estReponse: true,
                            lgcontenu: AReponse.length,
                            estPolling: ARequete.Parametres.estPolling,
                            estAttente: lEstAttente
                        });
                    }
                } catch (e) {}
            }
            _evenementSurReponseRequete(aParametresAppel, ARequete, AReponse, AStatut) {
                this._traiterPileAttenteSurReponseRequete(ARequete);
                clearTimeout(this._timeoutRequeteBackup);
                const lStatut = typeof AStatut === 'number' ? AStatut : parseInt(AStatut, 10);
                switch (lStatut) {
                case 200:
                    {
                        if (aParametresAppel.estRequeteDeconnexion) {
                            this._requeteDeconnexionEnvoyee = true;
                        }
                        const lJSONReseau = ObjetJSON_1.ObjetJSON.parseJSON(AReponse);
                        if (!lJSONReseau) {
                            this._composePageErreur(this._getErreurConnexionInterrompue());
                            return;
                        } else {
                            this._getXmlReponseStatut200(ARequete, AReponse, lJSONReseau);
                        }
                        if (lJSONReseau.Erreur || (lJSONReseau.donnees && lJSONReseau.donnees.Erreur)) {
                            this._composePageErreur((lJSONReseau.Erreur ? lJSONReseau.Erreur : lJSONReseau.donnees.Erreur));
                        } else {
                            const lJSONAttente = lJSONReseau.donnees[TypesRequeteJSON_1.ConstantesJSON.SignatureAttente];
                            const lParametresAttente = lJSONAttente ? this._recupererParametresAttente(lJSONAttente[TypesRequeteJSON_1.ConstantesJSON.SignatureAttenteParametres]) : {};
                            if (lJSONAttente) {
                                if (!lParametresAttente.sansBlocageInterface) {
                                    this._attenteEnCours = !!lJSONAttente;
                                }
                            } else {
                                this._attenteEnCours = false;
                            }
                            if (this._attenteEnCours) {
                                if (ARequete.Parametres.sansBlocageInterface) {
                                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                        emission: true,
                                        upload: false,
                                        message: ARequete.Parametres.messageDetail
                                    });
                                    delete ARequete.Parametres.sansBlocageInterface;
                                }
                                this._declencherAttente({
                                    JSONAttente: lJSONAttente,
                                    requeteModele: ARequete,
                                    parametresAttente: lParametresAttente
                                });
                            } else {
                                if (!ARequete.Parametres.sansBlocageInterface) {
                                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                        emission: false
                                    });
                                }
                                if (lJSONAttente && lParametresAttente.sansBlocageInterface) {
                                    this._declencherAttente({
                                        JSONAttente: lJSONAttente,
                                        requeteModele: ARequete,
                                        parametresAttente: lParametresAttente
                                    });
                                    if (lParametresAttente.deserialisation) {
                                        this._surReception(ARequete, lJSONReseau);
                                    } else {
                                        this._setRequeteEtatTermine(ARequete);
                                        this._envoieRequete();
                                    }
                                } else {
                                    this._surReception(ARequete, lJSONReseau);
                                }
                            }
                        }
                        break;
                    }
                default:
                    {
                        IE.log.addLog('chec requte ajax. requte = ' + ARequete + '. statut = ' + AStatut);
                        if (this._renvoyerRequeteSurErreur(ARequete, lStatut)) {
                            return;
                        }
                        if (!(0,
                        AccessApp_1.getApp)() || !(0,
                        AccessApp_1.getApp)().unloadEnCours) {
                            let lMessage = `erreur ajax - requete : ${ARequete} - statut : ${AStatut}`;
                            if (ARequete.Parametres && ARequete.Parametres.estBackup) {
                                lMessage += ' (backup)';
                            }
                            this.sendLogClient(lMessage);
                        }
                        this._composePageErreur(null, AStatut);
                        break;
                    }
                }
            }
            _renvoyerRequeteSurErreur(aRequete, aStatut) {
                clearTimeout(this._timeoutRequeteBackup);
                if (this.estArrete || !aRequete || !aRequete.backupDataJSON || !aRequete.Parametres) {
                    return false;
                }
                if (aStatut !== 0 && !aRequete.Parametres.DEBUG_decoSimule) {
                    return false;
                }
                if (aRequete.nbBackup > this.backupAjax.nbBackupEchec) {
                    return false;
                }
                if (aRequete.nbBackup >= 4 && aRequete.timeDebutBackup && (Date.now() - aRequete.timeDebutBackup) > this.backupAjax.delaiTimeoutEchecReseau) {
                    return false;
                }
                this._timeoutRequeteBackup = setTimeout( () => {
                    if (!aRequete.Parametres.sansBlocageInterface) {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                            emission: false
                        });
                    }
                    if (this.estArrete) {
                        return;
                    }
                    this._setRequeteEtatTermine(aRequete);
                    const lRequeteBackup = this.appelFonctionAsynchroneXML({
                        estBackup: true,
                        backupDataJSON: aRequete.backupDataJSON,
                        json: null,
                        nom: aRequete.Parametres.nomDeFonction,
                        callbackPere: aRequete.Parametres.pereReponse,
                        callbackEvenement: aRequete.Parametres.evenementReponse,
                        messageDetail: aRequete.nbBackup > 3 ? ObjetTraduction_1.GTraductions.getValeur('requete.ConnexionPerdue') : aRequete.Parametres.messageDetail,
                        sansBlocageInterface: false
                    });
                    if (!aRequete.timeDebutBackup) {
                        lRequeteBackup.nbBackup = 1;
                        lRequeteBackup.timeDebutBackup = Date.now();
                    } else {
                        lRequeteBackup.nbBackup = aRequete.nbBackup + 1;
                        lRequeteBackup.timeDebutBackup = aRequete.timeDebutBackup;
                    }
                }
                , this.backupAjax.delaiRepetitionEchecReseau);
                return true;
            }
            _declencherAttente(aParametres) {
                const lParametres = {
                    JSONAttente: null,
                    requeteModele: null,
                    parametresAttente: {}
                };
                $.extend(lParametres, aParametres);
                if (!lParametres.parametresAttente.sansBlocageInterface) {
                    window.clearTimeout(this.Timer);
                    this.Timer = setTimeout(this._repeterRequeteAttente.bind(this, lParametres), lParametres.parametresAttente.delai);
                } else {
                    const lNomFunction = lParametres.requeteModele.Parametres.nomDeFonction;
                    if (this._pileTimerEnAttente[lNomFunction]) {
                        if (this._pileTimerEnAttente[lNomFunction].timer) {
                            clearTimeout(this._pileTimerEnAttente[lNomFunction].timer);
                        }
                        delete this._pileTimerEnAttente[lNomFunction];
                    }
                    if (lParametres.requeteModele.__interruptionReponse) {
                        delete lParametres.requeteModele.__interruptionReponse;
                        return;
                    }
                    const lTimer = setTimeout(this._repeterRequeteAttente.bind(this, lParametres), lParametres.parametresAttente.delai);
                    this._pileTimerEnAttente[lNomFunction] = {
                        timer: lTimer
                    };
                }
            }
            _repeterRequeteAttente(aParametres) {
                let lJSON;
                const lNomRequete = aParametres.requeteModele.Parametres.nomDeFonction;
                if (aParametres.parametresAttente.repeterRequete) {
                    lJSON = aParametres.requeteModele.Parametres.jsonOrigine;
                    if (!(lJSON && lJSON[TypesRequeteJSON_1.ConstantesJSON.SignatureAttente]) && aParametres.JSONAttente) {
                        lJSON[TypesRequeteJSON_1.ConstantesJSON.SignatureAttente] = MethodesObjet_1.MethodesObjet.dupliquer(aParametres.JSONAttente);
                    }
                } else {
                    lJSON = {};
                    if (aParametres.JSONAttente) {
                        lJSON[TypesRequeteJSON_1.ConstantesJSON.SignatureAttente] = MethodesObjet_1.MethodesObjet.dupliquer(aParametres.JSONAttente);
                    }
                }
                ;this._setRequeteEtatTermine(aParametres.requeteModele);
                const lRequete = this.appelFonctionAsynchroneXML({
                    nom: lNomRequete,
                    json: lJSON,
                    callbackPere: aParametres.requeteModele.Parametres.pereReponse,
                    callbackEvenement: aParametres.requeteModele.Parametres.evenementReponse,
                    requetePrioritaire: !aParametres.parametresAttente.sansBlocageInterface,
                    sansBlocageInterface: aParametres.parametresAttente.sansBlocageInterface
                });
                if (aParametres.parametresAttente.sansBlocageInterface) {
                    lRequete.__estUneAttenteNonBloquante = true;
                    this._pileTimerEnAttente[lRequete.Parametres.nomDeFonction].requete = lRequete;
                }
            }
            _traiterPileAttenteSurReponseRequete(aRequete) {
                if (aRequete && aRequete.__estUneAttenteNonBloquante) {
                    const lNomRequete = aRequete.Parametres.nomDeFonction;
                    if (this._pileTimerEnAttente[lNomRequete]) {
                        if (this._pileTimerEnAttente[lNomRequete].timer) {
                            clearTimeout(this._pileTimerEnAttente[lNomRequete].timer);
                        }
                        delete this._pileTimerEnAttente[lNomRequete];
                    }
                    delete aRequete.__estUneAttenteNonBloquante;
                }
            }
            _eventInterruptionRequete(aParametres) {
                if (this.estArrete) {
                    return;
                }
                const lParametres = {
                    nomRequete: ''
                };
                $.extend(lParametres, aParametres);
                if (lParametres.nomRequete && this._pileTimerEnAttente[lParametres.nomRequete]) {
                    if (this._pileTimerEnAttente[lParametres.nomRequete].timer) {
                        clearTimeout(this._pileTimerEnAttente[lParametres.nomRequete].timer);
                        delete this._pileTimerEnAttente[lParametres.nomRequete].timer;
                    }
                    if (this._pileTimerEnAttente[lParametres.nomRequete].requete) {
                        this._pileTimerEnAttente[lParametres.nomRequete].requete.__interruptionReponse = true;
                    } else {
                        delete this._pileTimerEnAttente[lParametres.nomRequete];
                    }
                    IE.log.addLog('requete en attente : [' + lParametres.nomRequete + '] interrompu');
                }
            }
            _recupererParametresAttente(aParametres) {
                const lParametres = {
                    sansBlocageInterface: false,
                    delai: this.FDureeEnCours,
                    repeterRequete: false,
                    deserialisation: false,
                    date: null
                };
                if (aParametres) {
                    if (aParametres.sansBlocageInterface) {
                        lParametres.sansBlocageInterface = true;
                    }
                    if (aParametres.delai && aParametres.delai > 0) {
                        lParametres.delai = aParametres.delai * 1000;
                    }
                    if (aParametres.repeterRequete) {
                        lParametres.repeterRequete = true;
                    }
                    if (aParametres.date) {
                        lParametres.date = aParametres.date;
                    }
                    if (aParametres.deserialisation) {
                        lParametres.deserialisation = aParametres.deserialisation;
                    }
                }
                return lParametres;
            }
            _setRequeteEtatTermine(aRequete) {
                if (aRequete) {
                    aRequete.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.termine;
                    this.pileRequetes = this.pileRequetes.filter( (aRequete, aIndex) => {
                        return !!aRequete && aRequete.etat !== TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.termine;
                    }
                    );
                }
            }
            _surReception(aRequete, aJSON, aDonneesEchec) {
                this._setRequeteEtatTermine(aRequete);
                this._envoieRequete();
                if (aRequete.Parametres.pereReponse && aRequete.Parametres.evenementReponse) {
                    aRequete.Parametres.evenementReponse.call(aRequete.Parametres.pereReponse, aJSON ? aJSON.donnees : {}, aDonneesEchec);
                }
            }
            _composePageErreur(aJSONErreur, aStatut) {
                const lParametres = {
                    constructionPage: true,
                    statut: aStatut,
                    jsonErreur: aJSONErreur
                };
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.erreurCommunication, lParametres);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.fermerFenetres, true);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.nettoyerJSX);
            }
            _requeteBeaconDeconnexion() {
                if (navigator && navigator.sendBeacon && !this.estArrete && this.NumeroOrdreCommunication > 0 && !this._requeteDeconnexionEnvoyee) {
                    this._requeteDeconnexionEnvoyee = true;
                    const lNumeroOrdre = this.getChaineChiffreeAES(this.NumeroOrdreCommunication);
                    if (lNumeroOrdre) {
                        try {
                            navigator.sendBeacon('appeldeconnexion/' + lNumeroOrdre + '/' + new Date().getTime(), ObjetJSON_1.ObjetJSON.toJSON({
                                ns: this.NumeroDeSession,
                                no: lNumeroOrdre
                            }));
                        } catch (e) {}
                    }
                }
            }
            _modificationPresenceUtilisateur(aPresenceUtilisateur) {
                if (this.estArrete) {
                    return;
                }
                let lNomRequete;
                if (aPresenceUtilisateur) {
                    delete this._utilisateurInacif;
                    this._envoiRequetePolling({
                        presence: true
                    });
                } else {
                    this._utilisateurInacif = true;
                    for (lNomRequete in this._pileTimerEnAttente) {
                        if (this._pileTimerEnAttente[lNomRequete]) {
                            this._eventInterruptionRequete({
                                nomRequete: lNomRequete
                            });
                        }
                    }
                }
            }
            _arretTimeoutsPolling() {
                if (this.polling.timeoutEchec) {
                    clearTimeout(this.polling.timeoutEchec);
                    this.polling.timeoutEchec = null;
                }
                if (this.polling.timeoutExpirationRequete) {
                    clearTimeout(this.polling.timeoutExpirationRequete);
                    this.polling.timeoutExpirationRequete = null;
                }
            }
            _envoiRequetePolling(aParams) {
                if (this.estArrete) {
                    return;
                }
                const lParams = Object.assign({
                    presence: false
                }, aParams);
                this._arretTimeoutsPolling();
                if (this.polling.requeteEnCours) {
                    if (!lParams.presence) {
                        IE.log.addLog('Double envoi Polling');
                    }
                    return;
                }
                if (!this.polling.echecReseau && (this._utilisateurInacif || !this._pollingActif)) {
                    if (this.polling.messageDecoEnCours) {
                        this.polling.messageDecoEnCours = false;
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                            blocageDeconnexion: false
                        });
                    }
                    return;
                }
                let lJSONEnvoi = {};
                lJSONEnvoi = ObjetJSON_1.ObjetJSON.preparerJSON(lJSONEnvoi, {
                    JSONCollection: {}
                });
                const lResultJSON = this._traiterJSONEnvoi(lJSONEnvoi);
                this.polling.requeteEnCours = new ObjetRequete_1.ObjetRequete({
                    numeroSession: this.NumeroDeSession,
                    numeroRequete: this.polling.nbRequetes,
                    nomRequete: 'appelpolling',
                    genreEspace: this.GenreEspace,
                    nomDeFonction: 'polling',
                    estPolling: true,
                    parametres: lResultJSON.JSON,
                    echecReseau: this.polling.echecReseau,
                    callBackReadyStateChange: (aRequete, aReponse, aStatut) => {
                        this.polling.requeteEnCours = null;
                        this._arretTimeoutsPolling();
                        if (this.estArrete) {
                            return;
                        }
                        this.polling.nbRequetes += 1;
                        const lStatut = typeof aStatut === 'number' ? aStatut : parseInt(aStatut, 10);
                        switch (lStatut) {
                        case 200:
                            {
                                this.polling.numeroOrdre -= 1;
                                delete this.polling.echecReseau;
                                if (this.polling.messageDecoEnCours) {
                                    this.polling.messageDecoEnCours = false;
                                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                        blocageDeconnexion: false
                                    });
                                }
                                const lJSONReseau = aReponse ? ObjetJSON_1.ObjetJSON.parseJSON(aReponse) : null;
                                if (lJSONReseau) {
                                    this._getXmlReponseStatut200(aRequete, aReponse, lJSONReseau, true);
                                    if (lJSONReseau.Erreur || (lJSONReseau.donnees && lJSONReseau.donnees.Erreur)) {
                                        this._composePageErreur((lJSONReseau.Erreur ? lJSONReseau.Erreur : lJSONReseau.donnees.Erreur));
                                        return;
                                    }
                                    if (lJSONReseau.donnees) {
                                        Invocateur_1.Invocateur.evenement('deserialisation_notificationsPolling', lJSONReseau.donnees);
                                    }
                                }
                                this._envoiRequetePolling();
                                break;
                            }
                        default:
                            {
                                if (!this.polling.echecReseau) {
                                    this.polling.echecReseau = {
                                        nb: 0,
                                        timeDebut: Date.now(),
                                        log: ''
                                    };
                                }
                                this.polling.echecReseau.nb += 1;
                                if (this.polling.echecReseau.nb >= this.polling.nbRepetitionEchecReseau || (this.polling.echecReseau.timeDebut && this.polling.echecReseau.nb > 2 && ((Date.now() - this.polling.echecReseau.timeDebut) > this.polling.delaiTimeoutEchecReseau))) {
                                    if (!(0,
                                    AccessApp_1.getApp)() || !(0,
                                    AccessApp_1.getApp)().unloadEnCours) {
                                        this.sendLogClient(`erreur polling - statut : ${aStatut}`);
                                    }
                                    IE.log.addLog('FIN SESSION : Echec requte polling. statut = ' + aStatut);
                                    this._composePageErreur(null, aStatut);
                                    return;
                                }
                                const lDateEchec = new Date();
                                this.polling.echecReseau.log += (this.polling.echecReseau.log ? ' / ' : '') + lDateEchec.getHours() + ':' + lDateEchec.getMinutes() + ':' + lDateEchec.getSeconds() + ':' + lDateEchec.getMilliseconds() + ' -statut:' + aStatut;
                                if (!this.polling.messageDecoEnCours && (this.polling.echecReseau.nb === 3 || lParams.presence)) {
                                    this.polling.messageDecoEnCours = true;
                                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                        blocageDeconnexion: true,
                                        message: ObjetTraduction_1.GTraductions.getValeur('requete.ConnexionPerdue')
                                    });
                                }
                                IE.log.addLog('Echec polling => rejeu requte polling. Statut = ' + aStatut + ' - nb:' + this.polling.echecReseau.nb);
                                this.polling.timeoutEchec = setTimeout( () => {
                                    this._envoiRequetePolling();
                                }
                                , this.polling.delaiRepetitionEchecReseau);
                            }
                        }
                    }
                    ,
                    log: {
                        tailleDonnees: lResultJSON.JSONStr_clair.length,
                        tempsChiffre: ''
                    }
                });
                this.polling.requeteEnCours.envoieRequete({
                    numeroOrdre: this.polling.numeroOrdre,
                    numeroOrdreChiffre: this.getChaineChiffreeAES(this.polling.numeroOrdre)
                });
                this.polling.timeoutExpirationRequete = setTimeout( () => {
                    this.polling.timeoutExpirationRequete = null;
                    IE.log.addLog('Timeout Polling');
                    if (this.polling.requeteEnCours && this.polling.requeteEnCours.getXmlRequest() && this.polling.requeteEnCours.getXmlRequest().abort) {
                        return this.polling.requeteEnCours.getXmlRequest().abort();
                    }
                }
                , this.polling.delaiTimeoutRequete);
            }
        }
        exports.CommunicationProduit = CommunicationProduit;
        CommunicationProduit.optionsSecurite = {};
        CommunicationProduit.cDureeTimerPresenceMAJServeurEnCours = 20 * 1000;
        CommunicationProduit.c_IdFichierAIgnorer = '__idFichierAIgnorer__';
        class ObjetRequeteAnnulation extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        CollectionRequetes_1.Requetes.inscrire('annulation', ObjetRequeteAnnulation);
        Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.initChiffrement, (aParam) => {
            const lOptionsSecurite = {};
            if (aParam.http) {
                lOptionsSecurite.http = true;
            }
            if (aParam.CrA) {
                lOptionsSecurite.avecCryptageAES = true;
            }
            if (aParam.CoA) {
                lOptionsSecurite.avecCompressionAES = true;
            }
            CommunicationProduit.optionsSecurite = lOptionsSecurite;
        }
        );
    },
    fn: 'communicationproduit.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesTinyIndex = void 0;
        require("TinyIndex.css");
        exports.StylesTinyIndex = {
            tox: 'tox',
            toxDialog: 'tox-dialog'
        };
    },
    fn: 'tinyindex.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TinyInit = exports.ObjetTinyInit = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetChaine_1 = require("ObjetChaine");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        require("TinyIndex.css");
        const AccessApp_1 = require("AccessApp");
        class ObjetTinyInit {
            constructor() {
                this.optionsInitTiny = {
                    avecMessageNettoyageHtml: true,
                    optionsDOMPurify: null
                };
                this.plugins = ['autolink', 'charmap', 'directionality', 'fullscreen', 'hr', 'insertdatetime', 'link', 'lists', 'media', 'noneditable', 'nonbreaking', 'pagebreak', 'paste', 'preview', 'print', 'save', 'searchreplace', 'template', 'visualchars'];
                this.toolbar_std_1 = ['bold', 'italic', 'underline', '|', 'alignleft', 'aligncenter', 'alignright', 'alignjustify', '|', 'fontselect', 'fontsizeselect', '|', 'cut', 'copy', 'paste', 'pastetext'];
                this.toolbar_std_2 = ['hr', 'removeformat', '|', 'bullist', 'numlist', '|', 'indent', 'outdent', '|', 'undo', 'redo', '|', 'forecolor', 'backcolor', '|', 'subscript', 'superscript', '|', 'charmap', '|', 'link', 'unlink'];
                this.toolbar_qcm_1 = ['bold', 'italic', 'underline', '|', 'alignleft', 'aligncenter', 'alignright', 'alignjustify', '|', 'fontselect', 'fontsizeselect', '|', 'forecolor', 'backcolor', '|', 'subscript', 'superscript', '|', 'charmap', '|', 'bullist', 'numlist'];
                this.toolbar_mail_1 = ['bold', 'italic', 'underline', '|', 'alignleft', 'aligncenter', 'alignright', 'alignjustify', '|', 'fontselect', 'fontsizeselect', '|', 'forecolor', 'backcolor', '|', 'link', 'unlink', '|', 'removeformat'];
                this.fontFamily = 'Arial';
                this.fontSize = 13;
                this.fontSizeQCM = 13;
                this.genreMessage = {
                    imageInterdite: 0
                };
                this.globaleTinymce = null;
            }
            setOptionsInitTiny(aOptions) {
                Object.assign(this.optionsInitTiny, aOptions);
                return this;
            }
            async init(aParam) {
                await this._loadTiny();
                if (!aParam.id) {
                    throw new Error();
                }
                const lGlobaleTinymce = this.globaleTinymce;
                if (!lGlobaleTinymce) {
                    throw new Error();
                }
                let lJDOM = $('#' + aParam.id.escapeJQ());
                if (lJDOM.length === 0) {
                    throw new Error();
                }
                lJDOM.on('destroyed', {
                    instance: this
                }, (aEvent) => {
                    aEvent.data.instance._detruireInstanceTiny(lGlobaleTinymce, aParam.id);
                }
                );
                this._detruireInstanceTiny(lGlobaleTinymce, aParam.id);
                let lParamDef = this.getParametresInitParDefaut(aParam);
                if (aParam.toolbar === undefined) {
                    delete aParam.toolbar;
                }
                if (aParam.plugins) {
                    delete aParam.plugins;
                }
                let lParam = Object.assign(lParamDef, aParam);
                lParam.selector = '#' + lParam.id.escapeJQ();
                lParam.setup = (aEditor) => {
                    if (aParam.setup && MethodesObjet_1.MethodesObjet.isFunction(aParam.setup)) {
                        aParam.setup(aEditor);
                    }
                    if (aEditor && (!aEditor.settings || !aEditor.settings.avecImageDataUri)) {
                        aEditor.on('GetContent', this.supprimerImageEtVide.bind(this, true));
                        aEditor.on('BeforeSetContent', this.supprimerImageEtVide.bind(this, false));
                    }
                    if (this.optionsInitTiny.setupParDefaut) {
                        this.optionsInitTiny.setupParDefaut(aEditor);
                    }
                }
                ;
                if (lParam.clientLourd) {
                    lGlobaleTinymce.Env.clientLourd = true;
                }
                if (lParam.filePickerOpener && lParam.filePickerTypes) {
                    lParam.file_picker_types = lParam.filePickerTypes;
                    lParam.file_picker_callback = function(aCallback, aValue, aMeta) {
                        $('.tox-tinymce-aux').hide();
                        this.callbackFilePicker = aCallback;
                        lParam.filePickerOpener({
                            value: aValue,
                            meta: aMeta
                        });
                    }
                    ;
                    lParam.filePickerReturn = function(aUrl) {
                        const lEditor = lGlobaleTinymce.get(this.id);
                        if (aUrl && lEditor.callbackFilePicker && MethodesObjet_1.MethodesObjet.isFunction(lEditor.callbackFilePicker)) {
                            lEditor.callbackFilePicker(aUrl);
                        }
                        lEditor.callbackFilePicker = null;
                        $('.tox-tinymce-aux').show();
                    }
                    ;
                }
                await lGlobaleTinymce.init(lParam);
                if (lParam.ariaLabel) {
                    $(`#${lParam.id.escapeJQ()}`).siblings('.tox-tinymce').find('iframe.tox-edit-area__iframe').attr('title', lParam.ariaLabel).attr('aria-label', lParam.ariaLabel);
                }
                return lGlobaleTinymce.get(lParam.id);
            }
            get(aId) {
                if (aId && this.globaleTinymce && this.globaleTinymce.get) {
                    return this.globaleTinymce.get(aId);
                }
                return null;
            }
            getParametresInitParDefaut(aParam) {
                var _a;
                const lDarkMode = (_a = ThemesCouleurs_1.ThemesCouleurs === null || ThemesCouleurs_1.ThemesCouleurs === void 0 ? void 0 : ThemesCouleurs_1.ThemesCouleurs.getDarkMode) === null || _a === void 0 ? void 0 : _a.call(ThemesCouleurs_1.ThemesCouleurs);
                let lOptions = {
                    cache_suffix: '?v=5.10.9.index1',
                    toolbar_mode: 'wrap',
                    mobile: {
                        toolbar_mode: 'sliding'
                    },
                    clientLourd: false,
                    editeurEquation: false,
                    ariaLabel: ObjetTraduction_1.GTraductions.getValeur('Tiny.WAITitre'),
                    plugins: this.getPlugins(aParam),
                    branding: false,
                    elementpath: false,
                    height: 100,
                    min_height: 100,
                    max_height: 100,
                    skin_url: lDarkMode ? 'skins/ui/oxide-dark' : 'skins/ui/oxide',
                    content_css: lDarkMode ? 'dark' : null,
                    theme_url: 'themes/silver/theme.min.js',
                    menubar: false,
                    resize: false,
                    statusbar: false,
                    toolbar: this.getToolbar(aParam),
                    contextmenu: !aParam.clientLourd || aParam.toolbar === false ? '' : 'spellchecker | cut copy paste | link',
                    content_style: `html {\n  height:100%;\n  ${lDarkMode ? `` : `background-color: white;\n  color: black;`}\n}\nbody {min-height:calc(100% - 10px);}\n.mce-content-body {\n  margin:0px;\n  padding: 5px !important;\n}` + '.mce-content-body[data-mce-placeholder]::before {' + `color: ${lDarkMode ? '#f6f6f6' : '#6b6e77'} !important;` + 'opacity: 0.9;' + 'font-style: italic;' + 'font-weight: 500;' + 'content: attr(data-mce-placeholder);' + 'position: absolute;' + 'left:5px !important;' + `font-size:${IE.estMobile ? 14 : 13}px;` + '}',
                    force_hex_style_colors: true,
                    forced_root_block: 'div',
                    forced_root_block_attrs: {
                        'style': 'font-family:' + (aParam.fontFamily ? aParam.fontFamily : this.fontFamily) + ';font-size:' + (aParam.fontSize ? aParam.fontSize : aParam.modeQCM ? this.fontSizeQCM : this.fontSize) + 'px;'
                    },
                    font_formats: 'Andale Mono=andale mono,times;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,avant garde;' + 'Book Antiqua=book antiqua,palatino;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier;' + 'Georgia=georgia,palatino;' + 'Helvetica=helvetica;' + 'Impact=impact,chicago;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco;' + 'Times New Roman=times new roman,times;' + 'Trebuchet MS=trebuchet ms,geneva;' + 'Verdana=verdana,geneva;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats',
                    fontsize_formats: '5px 6px 7px 8px 9px 10px 11px 12px 13px 14px 16px 18px 20px 24px',
                    browser_spellcheck: !aParam.clientLourd,
                    language: this._getLanguage(aParam.langueIndex),
                    paste_data_image: false,
                    paste_as_text: false,
                    paste_enable_default_filters: true,
                    paste_filter_drop: true,
                    paste_preprocess: function(plugin, args) {
                        args.content = args.content.replace(/<\/?pre[^>]*>/gi, '');
                    },
                    paste_retain_style_properties: 'padding,margin,margin-left,font-size,font-weight,font-family,font-style,font-variant,border-width,border-style,border,border-color,color,background,background-color,text-align,align,textformat,text-decoration,mso-border-alt,mso-highlight,b,u,i,ul,ol,li',
                    spellchecker_languages: 'anglais=en_US,franais=fr_FR,italien=it,espagnol=es',
                    spellchecker_rpc_url: 'index_action:DictionnaireIndex',
                    spellchecker_wordchar_pattern: /[^\s!"#$%&()*+,-.\/:;<=>?@[\]^_{|}`']+/g,
                    assumeExternalTargets: true,
                    default_link_target: '_blank',
                    target_list: false,
                    anchor_bottom: '',
                    anchor_top: ''
                };
                if (aParam.placeholder) {
                    lOptions.placeholder = aParam.placeholder;
                }
                if (!aParam.clientLourd && !IE.estMobile) {
                    lOptions.help_tabs = ['shortcuts'];
                }
                if (IE.DOMPurifyDisabled) {
                    lOptions.valid_elements = '@[id|class|style|title|dir<ltr?rtl|lang|xml::lang],' + 'a[rel|rev|charset|hreflang|tabindex|accesskey|type|' + 'name|href|target|title|class],strong/b,em/i,strike,u,' + '#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|' + 'src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,' + '-blockquote,-table[border=0|cellspacing|cellpadding|width|frame|rules|' + 'height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|' + 'height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,' + '#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor' + '|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,#div,' + '-span,-code,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face' + '|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],' + 'object[classid|width|height|codebase|*],param[name|value|_value],embed[type|width' + '|height|src|*],map[name],area[shape|coords|href|alt|target],bdo,' + 'button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|' + 'valign|width],dfn,fieldset,kbd,label[for],legend,noscript,q[cite],samp,small,tt,var,big';
                }
                return lOptions;
            }
            async onLoadEnd(aIdTiny) {
                let lId;
                let lTiny = null;
                if (typeof aIdTiny === 'string') {
                    lTiny = this.get(aIdTiny);
                    lId = aIdTiny;
                } else if (aIdTiny && aIdTiny.id) {
                    lId = aIdTiny.id;
                    lTiny = aIdTiny;
                }
                const lParams = {
                    avecConteneurTiny: false,
                    timeout: null,
                    nb: 0
                };
                const _onLoadTiny = async () => {
                    lParams.timeout = null;
                    if (!lParams.avecConteneurTiny) {
                        const lJConteneurTiny = $(`#${lId.escapeJQ()}`);
                        if (lJConteneurTiny.length > 1) {
                            return {
                                ok: false
                            };
                        }
                        if (lJConteneurTiny.length === 1) {
                            lParams.avecConteneurTiny = true;
                            lJConteneurTiny.on('destroyed.onload', () => {
                                if (lParams.timeout) {
                                    clearTimeout(lParams.timeout);
                                }
                            }
                            );
                        }
                    }
                    if (!lTiny) {
                        lTiny = this.get(lId);
                    }
                    if (lTiny && lTiny.initialized) {
                        return {
                            ok: true,
                            tiny: lTiny
                        };
                    }
                    if (lParams.nb > 1000) {
                        throw new Error();
                    }
                    await new Promise( (aResolve) => {
                        lParams.timeout = setTimeout( () => {
                            lParams.nb += 1;
                            aResolve();
                        }
                        , 10);
                    }
                    );
                    return await _onLoadTiny();
                }
                ;
                return await _onLoadTiny();
            }
            async setReadonly(aIdTiny, aReadonly) {
                const lResult = await this.onLoadEnd(aIdTiny);
                if (lResult.tiny) {
                    lResult.tiny.mode.set(aReadonly ? 'readonly' : 'design');
                }
            }
            getPlugins(aParam) {
                return this.plugins.concat(aParam && aParam.plugins && aParam.plugins.length ? aParam.plugins : [], aParam && aParam.editeurEquation === true ? ['iEMathquill'] : [], aParam && !!aParam.filePickerOpener && aParam.filePickerTypes.indexOf('image') > -1 ? ['image'] : [], aParam && aParam.clientLourd === true ? ['spellchecker'] : [], aParam && aParam.clientLourd !== true && !IE.estMobile ? ['help'] : []).join(' ');
            }
            getToolbar(aParam) {
                let lToolBar = [];
                if (aParam.toolbar === false) {
                    return false;
                }
                if (aParam.buttons && aParam.buttons.length) {
                    lToolBar = aParam.buttons.concat(lToolBar);
                }
                if (aParam.modeQCM) {
                    lToolBar = lToolBar.concat(this.toolbar_qcm_1);
                } else if (aParam.modeMail) {
                    lToolBar = lToolBar.concat(this.toolbar_mail_1);
                } else {
                    lToolBar = lToolBar.concat(this.toolbar_std_1);
                    lToolBar = lToolBar.concat('|', this.toolbar_std_2);
                }
                if (aParam.editeurEquation === true) {
                    lToolBar.push('|ieMathquill');
                }
                if (!!aParam.filePickerOpener && aParam.filePickerTypes) {
                    if (aParam.filePickerTypes.indexOf('image') > -1) {
                        lToolBar.push('|image');
                    }
                }
                if (aParam.clientLourd === true) {
                    lToolBar.push('|spellchecker');
                } else if (!IE.estMobile) {
                    lToolBar.push('|help');
                }
                return lToolBar.join(' ');
            }
            setHeight(aEditorID, aHeight, aNbrToolbars) {
                ObjetPosition_1.GPosition.setHeight(aEditorID + '_ifr', aHeight - (aNbrToolbars * 28));
                ObjetPosition_1.GPosition.setHeight(aEditorID + '_tbl', aHeight);
            }
            estContenuVide(aHtml) {
                function _estNoeudBR(aNode) {
                    return ObjetHtml_1.GHtml.estElement(aNode) && ObjetHtml_1.GHtml.estNoeudDeType(aNode, 'br') && (!aNode.childNodes || (aNode.childNodes.length === 0));
                }
                function _estNoeudTexteVide(aNode) {
                    return ObjetHtml_1.GHtml.estTextNode(aNode) && aNode.nodeValue && aNode.nodeValue.trim && (aNode.nodeValue.trim() === '');
                }
                if (!aHtml) {
                    return true;
                }
                let lDOM = ObjetHtml_1.GHtml.htmlToDOM(aHtml);
                let lChaines = [];
                if (!MethodesObjet_1.MethodesObjet.isArray(lDOM)) {
                    lChaines = ObjetHtml_1.GHtml.getTextesDeNode(lDOM);
                } else {
                    for (let i = 0; i < lDOM.length; i++) {
                        lChaines = lChaines.concat(ObjetHtml_1.GHtml.getTextesDeNode(lDOM[i]));
                    }
                }
                if (lChaines.join('').trim() !== '') {
                    return false;
                }
                if (_estNoeudBR(lDOM)) {
                    return true;
                }
                if (_estNoeudTexteVide(lDOM)) {
                    return true;
                }
                if (lDOM && ObjetHtml_1.GHtml.estElement(lDOM) && ObjetHtml_1.GHtml.estNoeudDeType(lDOM, 'div') && lDOM.childNodes && (lDOM.childNodes.length === 1)) {
                    let lFils = lDOM.childNodes[0];
                    if (_estNoeudBR(lFils)) {
                        return true;
                    }
                    if (_estNoeudTexteVide(lFils)) {
                        return true;
                    }
                }
                return false;
            }
            supprimerImageEtVide(aSurGetContent, ed) {
                const lContent = $('<div>' + ed.content + '</div>');
                const lAvecNettoyage = ObjetHtml_1.GHtml.nettoyerEditeurRiche(lContent, ed.target.settings.editeurEquationMaxFileSize);
                if (!aSurGetContent && lAvecNettoyage && this.optionsInitTiny.avecMessageNettoyageHtml) {
                    this.optionsInitTiny.afficherMessage(this.genreMessage.imageInterdite);
                }
                ed.content = lContent.html();
                if (!ed.selection) {
                    if (lContent.text().trim() === '' && lContent.find('img').length === 0) {
                        ed.content = '';
                    }
                }
                const lUnSafeHtml = ed.content;
                if (lUnSafeHtml) {
                    if (!aSurGetContent && lContent.find('#mce_marker[data-mce-type="bookmark"]').length > 0) {
                        return;
                    }
                    const lSafeHtml = ObjetChaine_1.GChaine.htmlDOMPurify(lUnSafeHtml, this.optionsInitTiny.optionsDOMPurify);
                    if (lUnSafeHtml !== lSafeHtml) {
                        ed.content = lSafeHtml;
                    }
                }
            }
            async _loadTiny() {
                if (this.globaleTinymce || global.tinymce) {
                    this._setupTinymce();
                    return;
                }
                await DeferLoadingScript_1.deferLoadingScript.loadAsync(['tiny']);
                if (!global.tinymce) {
                    throw new Error();
                }
                this._setupTinymce();
            }
            _setupTinymce() {
                if (!this.globaleTinymce) {
                    this.globaleTinymce = global.tinymce;
                    if (this.globaleTinymce) {
                        this.globaleTinymce.suffix = '.min';
                    }
                }
            }
            _detruireInstanceTiny(aTinymce, aID) {
                const lInstanceTiny = aTinymce.get(aID);
                if (lInstanceTiny) {
                    if (!lInstanceTiny.initialized) {
                        IE.log.addLog('tiny id ' + aID + ' doit etre detruit, mais n\'est pas initialized');
                    }
                    try {
                        lInstanceTiny._enCoursDestruction = true;
                        $('#' + aID.escapeJQ()).focus();
                        try {
                            aTinymce.get(aID).destroy();
                        } catch (e) {}
                        $('#' + aID.escapeJQ()).focus();
                    } finally {
                        delete lInstanceTiny._enCoursDestruction;
                    }
                }
            }
            _getLanguage(aLangueIndex) {
                var _a, _b, _c;
                const lLangue = aLangueIndex || ((_c = (_b = (_a = (0,
                AccessApp_1.getApp)()) === null || _a === void 0 ? void 0 : _a.getObjetParametres) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c.langue) || 'fr';
                switch (lLangue) {
                case 'en':
                case 'it':
                case 'nl':
                case 'es':
                    return lLangue;
                }
                return 'fr_FR';
            }
        }
        exports.ObjetTinyInit = ObjetTinyInit;
        exports.TinyInit = new ObjetTinyInit();
    },
    fn: 'tinyinit.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const TinyInit_1 = require("TinyInit");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Invocateur_1 = require("Invocateur");
        const ToucheClavier_1 = require("ToucheClavier");
        const AccessApp_1 = require("AccessApp");
        TinyInit_1.TinyInit.setOptionsInitTiny({
            setupParDefaut(editor) {
                editor.on('keydown', (aEvent) => {
                    if (aEvent.which === ToucheClavier_1.ToucheClavier._0 && aEvent.altKey && !aEvent.shiftKey && !aEvent.ctrlKey) {
                        aEvent.stopPropagation();
                        return;
                    }
                    Invocateur_1.Invocateur.evenement('controleTouche', $.Event(aEvent));
                }
                );
                editor.on('MouseDown', () => {
                    $(document).trigger('mousedown');
                }
                );
            },
            afficherMessage() {
                (0,
                AccessApp_1.getApp)().getMessage().afficher({
                    message: ObjetTraduction_1.GTraductions.getValeur('CahierDeTexte.MessageSuppressionImage')
                });
            }
        });
    },
    fn: 'tinyinitespaces.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationTinyComplet.js");
        require("TinyInitEspaces.js");
    },
    fn: 'declarationtinyinitespacesdefer.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreConnexion = void 0;
        var EGenreConnexion;
        (function(EGenreConnexion) {
            EGenreConnexion[EGenreConnexion["Normale"] = 0] = "Normale";
            EGenreConnexion[EGenreConnexion["Allegee"] = 1] = "Allegee";
        }
        )(EGenreConnexion || (exports.EGenreConnexion = EGenreConnexion = {}));
    },
    fn: 'enumere_connexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreErreurAcces = void 0;
        var EGenreErreurAcces;
        (function(EGenreErreurAcces) {
            EGenreErreurAcces[EGenreErreurAcces["Aucune"] = 0] = "Aucune";
            EGenreErreurAcces[EGenreErreurAcces["Identification"] = 1] = "Identification";
            EGenreErreurAcces[EGenreErreurAcces["Autorisation"] = 2] = "Autorisation";
            EGenreErreurAcces[EGenreErreurAcces["ConnexionClasse"] = 3] = "ConnexionClasse";
            EGenreErreurAcces[EGenreErreurAcces["AucuneRessource"] = 4] = "AucuneRessource";
            EGenreErreurAcces[EGenreErreurAcces["Connexion"] = 5] = "Connexion";
            EGenreErreurAcces[EGenreErreurAcces["BloqueeEleve"] = 6] = "BloqueeEleve";
            EGenreErreurAcces[EGenreErreurAcces["FonctionAccompagnant"] = 7] = "FonctionAccompagnant";
            EGenreErreurAcces[EGenreErreurAcces["AccompagnantAucunEleve"] = 8] = "AccompagnantAucunEleve";
            EGenreErreurAcces[EGenreErreurAcces["Message"] = 9] = "Message";
            EGenreErreurAcces[EGenreErreurAcces["CompteDesactive"] = 10] = "CompteDesactive";
        }
        )(EGenreErreurAcces || (exports.EGenreErreurAcces = EGenreErreurAcces = {}));
    },
    fn: 'enumere_erreuracces.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreSourceConnexionUtil = exports.TypeModeGestionDoubleAuthentificationUtil = exports.C_LibelleAppareilMaxLength = exports.C_PinFixeLength = exports.C_MinPinLength = exports.C_MaxPinRetry = exports.TypeGenreSourceConnexion = exports.TypeModeGestionDoubleAuthentification = exports.TypeActionIHMSecurisationCompte = exports.TypeCommandeSecurisationCompteHttp = void 0;
        var TypeCommandeSecurisationCompteHttp;
        (function(TypeCommandeSecurisationCompteHttp) {
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_VerifierPIN"] = 0] = "csch_VerifierPIN";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_VerifierMotDePassePersonnalise"] = 1] = "csch_VerifierMotDePassePersonnalise";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_LibellesSourceConnexionDejaConnus"] = 2] = "csch_LibellesSourceConnexionDejaConnus";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_EnregistrerChoixUtilisateur"] = 3] = "csch_EnregistrerChoixUtilisateur";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_AffecterModeDoubleAuthentification"] = 4] = "csch_AffecterModeDoubleAuthentification";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_AffecterCodePIN"] = 5] = "csch_AffecterCodePIN";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_RenommerSourceConnexionConnue"] = 6] = "csch_RenommerSourceConnexionConnue";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_SupprimerSourceConnexionConnue"] = 7] = "csch_SupprimerSourceConnexionConnue";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_AffecterMotDePassePersonnalise"] = 8] = "csch_AffecterMotDePassePersonnalise";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_ModifierLogin"] = 9] = "csch_ModifierLogin";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_DemandeReinitialisationPIN"] = 10] = "csch_DemandeReinitialisationPIN";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_VerifierCodeReinitialisationPIN"] = 11] = "csch_VerifierCodeReinitialisationPIN";
        }
        )(TypeCommandeSecurisationCompteHttp || (exports.TypeCommandeSecurisationCompteHttp = TypeCommandeSecurisationCompteHttp = {}));
        var TypeActionIHMSecurisationCompte;
        (function(TypeActionIHMSecurisationCompte) {
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_PersonnalisationMotDePasse"] = 0] = "AIHMSC_PersonnalisationMotDePasse";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_ChoixStrategie"] = 1] = "AIHMSC_ChoixStrategie";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_ChoixCodePINetSource"] = 2] = "AIHMSC_ChoixCodePINetSource";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_SaisieCodePINetSource"] = 3] = "AIHMSC_SaisieCodePINetSource";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_ReinitCodePINetSource"] = 4] = "AIHMSC_ReinitCodePINetSource";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_SaisieSourcePourNotifSeulement"] = 5] = "AIHMSC_SaisieSourcePourNotifSeulement";
        }
        )(TypeActionIHMSecurisationCompte || (exports.TypeActionIHMSecurisationCompte = TypeActionIHMSecurisationCompte = {}));
        var TypeModeGestionDoubleAuthentification;
        (function(TypeModeGestionDoubleAuthentification) {
            TypeModeGestionDoubleAuthentification[TypeModeGestionDoubleAuthentification["MGDA_PasEncoreChoisi"] = 0] = "MGDA_PasEncoreChoisi";
            TypeModeGestionDoubleAuthentification[TypeModeGestionDoubleAuthentification["MGDA_Inactive"] = 1] = "MGDA_Inactive";
            TypeModeGestionDoubleAuthentification[TypeModeGestionDoubleAuthentification["MGDA_NotificationSeulement"] = 2] = "MGDA_NotificationSeulement";
            TypeModeGestionDoubleAuthentification[TypeModeGestionDoubleAuthentification["MGDA_SaisieCodePIN"] = 3] = "MGDA_SaisieCodePIN";
        }
        )(TypeModeGestionDoubleAuthentification || (exports.TypeModeGestionDoubleAuthentification = TypeModeGestionDoubleAuthentification = {}));
        var TypeGenreSourceConnexion;
        (function(TypeGenreSourceConnexion) {
            TypeGenreSourceConnexion[TypeGenreSourceConnexion["GSC_ClientLourd"] = 0] = "GSC_ClientLourd";
            TypeGenreSourceConnexion[TypeGenreSourceConnexion["GSC_ApplicationMobile"] = 1] = "GSC_ApplicationMobile";
            TypeGenreSourceConnexion[TypeGenreSourceConnexion["GSC_Navigateur"] = 2] = "GSC_Navigateur";
        }
        )(TypeGenreSourceConnexion || (exports.TypeGenreSourceConnexion = TypeGenreSourceConnexion = {}));
        exports.C_MaxPinRetry = 3;
        exports.C_MinPinLength = 4;
        exports.C_PinFixeLength = 4;
        exports.C_LibelleAppareilMaxLength = 30;
        exports.TypeModeGestionDoubleAuthentificationUtil = {
            getOrdreModeDoubleAuth(aModeParDefaut) {
                let lTabOrdre = [TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN, TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement, TypeModeGestionDoubleAuthentification.MGDA_Inactive];
                if (aModeParDefaut === TypeModeGestionDoubleAuthentification.MGDA_Inactive) {
                    lTabOrdre = lTabOrdre.reverse();
                }
                return lTabOrdre;
            }
        };
        exports.TypeGenreSourceConnexionUtil = {
            getIcone(aGenreSourceConnexion) {
                let lNomIcone = '';
                switch (aGenreSourceConnexion) {
                case TypeGenreSourceConnexion.GSC_ClientLourd:
                    lNomIcone = 'icon_laptop';
                    break;
                case TypeGenreSourceConnexion.GSC_ApplicationMobile:
                    lNomIcone = 'icon_mobile_phone';
                    break;
                case TypeGenreSourceConnexion.GSC_Navigateur:
                    lNomIcone = 'icon_globe';
                    break;
                default:
                    ;
                }
                return lNomIcone;
            }
        };
    },
    fn: 'typesecurisationcompte.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteSecurisationComptePreference = exports.ObjetRequeteSecurisationCompteDoubleAuth = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const AccessApp_1 = require("AccessApp");
        class ObjetRequeteSecurisationCompteDoubleAuth extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            lancerRequete(aParams) {
                this.JSON.action = aParams.action;
                const lComm = this.communication;
                switch (this.JSON.action) {
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierMotDePassePersonnalise:
                    this.JSON.nouveauMDP = lComm.getChaineChiffreeAES(aParams.nouveauMDP);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierPIN:
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierCodeReinitialisationPIN:
                    this.JSON.codePin = lComm.getChaineChiffreeAES(aParams.codePin);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_LibellesSourceConnexionDejaConnus:
                    this.JSON.libelle = aParams.libelle;
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_EnregistrerChoixUtilisateur:
                    this.JSON.mode = aParams.mode;
                    if (aParams.nouveauMDP) {
                        this.JSON.nouveauMDP = lComm.getChaineChiffreeAES(aParams.nouveauMDP);
                    }
                    if (aParams.codePin) {
                        this.JSON.codePin = lComm.getChaineChiffreeAES(aParams.codePin);
                    }
                    if (aParams.reinitPIN_OK) {
                        this.JSON.reinitPIN_OK = true;
                        this.JSON.codePINVerifReinit = lComm.getChaineChiffreeAES(aParams.codePINVerifReinit);
                    }
                    this.JSON.avecIdentification = aParams.avecIdentification;
                    this.JSON.strIdentification = aParams.strIdentification;
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_DemandeReinitialisationPIN:
                    break;
                default:
                    ;
                }
                return this.appelAsynchrone();
            }
            actionApresRequete() {
                if ((0,
                AccessApp_1.getApp)().estAppliMobile && this.JSONReponse.jetonConnexionAppliMobile) {
                    window.messageData.push({
                        action: 'surAuth',
                        data: this.JSONReponse.jetonConnexionAppliMobile
                    });
                }
                this.callbackReussite.appel(this.JSONReponse);
            }
        }
        exports.ObjetRequeteSecurisationCompteDoubleAuth = ObjetRequeteSecurisationCompteDoubleAuth;
        CollectionRequetes_1.Requetes.inscrire('SecurisationCompteDoubleAuth', ObjetRequeteSecurisationCompteDoubleAuth);
        class ObjetRequeteSecurisationComptePreference extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            lancerRequete(aParams) {
                this.JSON.action = aParams.action;
                const lComm = this.communication;
                switch (this.JSON.action) {
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_AffecterMotDePassePersonnalise:
                    this.JSON.ancienMDP = lComm.getChaineChiffreeAES(aParams.ancienMDP);
                    this.JSON.nouveauMDP = lComm.getChaineChiffreeAES(aParams.nouveauMDP);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_ModifierLogin:
                    this.JSON.ancienMDP = lComm.getChaineChiffreeAES(aParams.ancienMDP);
                    this.JSON.identifiant = lComm.getChaineChiffreeAES(aParams.nouveauMDP);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierPIN:
                    this.JSON.codePin = lComm.getChaineChiffreeAES(aParams.codePin);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_AffecterModeDoubleAuthentification:
                    this.JSON.mode = aParams.mode;
                    if (aParams.ancienCodePin) {
                        this.JSON.ancienCodePin = lComm.getChaineChiffreeAES(aParams.ancienCodePin);
                    }
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_AffecterCodePIN:
                    this.JSON.codePin = lComm.getChaineChiffreeAES(aParams.codePin);
                    if (aParams.ancienCodePin) {
                        this.JSON.ancienCodePin = lComm.getChaineChiffreeAES(aParams.ancienCodePin);
                    }
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_SupprimerSourceConnexionConnue:
                    this.JSON.identifiantSysteme = aParams.identifiantSysteme;
                    this.JSON.genreSource = aParams.genreSource;
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_RenommerSourceConnexionConnue:
                    this.JSON.identifiantSysteme = aParams.identifiantSysteme;
                    this.JSON.genreSource = aParams.genreSource;
                    this.JSON.libelleSaisi = aParams.libelleSaisi;
                    break;
                default:
                    ;
                }
                return this.appelAsynchrone();
            }
            actionApresRequete() {
                if ((0,
                AccessApp_1.getApp)().estAppliMobile && this.JSONReponse.jetonConnexionAppliMobile) {
                    window.messageData.push({
                        action: 'surAuth',
                        data: this.JSONReponse.jetonConnexionAppliMobile
                    });
                }
                this.callbackReussite.appel(this.JSONReponse);
            }
        }
        exports.ObjetRequeteSecurisationComptePreference = ObjetRequeteSecurisationComptePreference;
        CollectionRequetes_1.Requetes.inscrire('SecurisationComptePreference', ObjetRequeteSecurisationComptePreference);
    },
    fn: 'objetrequetesecurisationcompte.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeOptionGenerationMotDePasse = void 0;
        var TypeOptionGenerationMotDePasse;
        (function(TypeOptionGenerationMotDePasse) {
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecAuMoinsUneLettre"] = 0] = "OGMDP_AvecAuMoinsUneLettre";
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecAuMoinsUnChiffre"] = 1] = "OGMDP_AvecAuMoinsUnChiffre";
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecAuMoinsUnCaractereSpecial"] = 2] = "OGMDP_AvecAuMoinsUnCaractereSpecial";
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecMelangeMinusculeMajuscule"] = 3] = "OGMDP_AvecMelangeMinusculeMajuscule";
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecControleIdentifiantDifferent"] = 4] = "OGMDP_AvecControleIdentifiantDifferent";
        }
        )(TypeOptionGenerationMotDePasse || (exports.TypeOptionGenerationMotDePasse = TypeOptionGenerationMotDePasse = {}));
    },
    fn: 'typeoptiongenerationmotdepasse.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ValidationMotDePasse = exports.TradValidationMotDePasse = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const TypeOptionGenerationMotDePasse_1 = require("TypeOptionGenerationMotDePasse");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TradValidationMotDePasse = ObjetTraduction_1.TraductionsModule.getModule('ValidationMotDePasse', {
            titre: '',
            longueurMDPMinMax: '',
            longueurMDPMin: '',
            chiffre: '',
            lettre: '',
            special: '',
            MajMin: '',
            login: '',
            mdpDifferent: '',
            RegleValide: '',
            RegleInvalide: ''
        });
        exports.TradValidationMotDePasse = TradValidationMotDePasse;
        exports.ValidationMotDePasse = {
            leMotDePasseRespecteReglesSecurite(aMDP, aReglesSaisieMotDePasse) {
                if (!aMDP || !aReglesSaisieMotDePasse || !aReglesSaisieMotDePasse.regles || !aReglesSaisieMotDePasse.regles.contains || !MethodesObjet_1.MethodesObjet.isString(aMDP)) {
                    return false;
                }
                if (aMDP.length < aReglesSaisieMotDePasse.min || (aReglesSaisieMotDePasse.max > 0 && aMDP.length > aReglesSaisieMotDePasse.max)) {
                    return false;
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUneLettre)) {
                    if (!aMDP.match(/[a-z]/gi)) {
                        return false;
                    }
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnChiffre)) {
                    if (!aMDP.match(/[0-9]/g)) {
                        return false;
                    }
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecMelangeMinusculeMajuscule)) {
                    if (!(aMDP.match(/[a-z]/g) && aMDP.match(/[A-Z]/g))) {
                        return false;
                    }
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnCaractereSpecial)) {
                    if (aMDP.replace(/[a-z0-9]/gi, '').length === 0) {
                        return false;
                    }
                }
                return true;
            },
            construire(aReglesSaisieMotDePasse, aErreursMDP, aOptions) {
                const H = [];
                let lErreursMDP;
                const lOptions = {
                    avecEspace: true,
                    avecMdpDifferent: false,
                    avecMDPDifferentLogin: true
                };
                $.extend(lOptions, aOptions);
                if (aErreursMDP) {
                    lErreursMDP = {
                        erreurTailleMDP: false,
                        reglesNonRespectes: new TypeEnsembleNombre_1.TypeEnsembleNombre()
                    };
                    $.extend(lErreursMDP, aErreursMDP);
                }
                H.push('<ul>');
                H.push('<li class="', lOptions.avecEspace ? 'm-bottom' : '', ' Gras">', TradValidationMotDePasse.titre + ' :', '</li>');
                H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.erreurTailleMDP : undefined, MethodesObjet_1.MethodesObjet.isNumber(aReglesSaisieMotDePasse.max) ? ObjetChaine_1.GChaine.format(TradValidationMotDePasse.longueurMDPMinMax, [aReglesSaisieMotDePasse.min, aReglesSaisieMotDePasse.max]) : ObjetChaine_1.GChaine.format(TradValidationMotDePasse.longueurMDPMin, [aReglesSaisieMotDePasse.min]), lOptions));
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnChiffre)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnChiffre) : undefined, TradValidationMotDePasse.chiffre, lOptions));
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUneLettre)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUneLettre) : undefined, TradValidationMotDePasse.lettre, lOptions));
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnCaractereSpecial)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnCaractereSpecial) : undefined, TradValidationMotDePasse.special, lOptions));
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecMelangeMinusculeMajuscule)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecMelangeMinusculeMajuscule) : undefined, TradValidationMotDePasse.MajMin, lOptions));
                }
                if (lOptions.avecMDPDifferentLogin || aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecControleIdentifiantDifferent)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecControleIdentifiantDifferent) : undefined, TradValidationMotDePasse.login, lOptions));
                }
                if (lOptions.avecMdpDifferent) {
                    H.push(_construireLigneValidateur(lErreursMDP ? !!lErreursMDP.MDPIdentique : undefined, TradValidationMotDePasse.mdpDifferent, lOptions));
                }
                H.push('</ul>');
                return H.join('');
            }
        };
        function _construireLigneValidateur(aEchec, aTraduction, aOptions) {
            return (IE.jsx.str("li", {
                class: ['flex-contain flex-center flex-gap p-bottom', aEchec === undefined ? ' p-left-xl' : '']
            }, aEchec !== undefined ? IE.jsx.str("i", {
                role: "img",
                class: ['m-top-s ', (!aEchec ? 'icon_ok ico-green' : 'icon_remove ico-red')],
                "aria-label": aEchec ? TradValidationMotDePasse.RegleInvalide : TradValidationMotDePasse.RegleValide
            }) : '', IE.jsx.str("p", null, aTraduction)));
        }
    },
    fn: 'validationmotdepasse.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetMoteurConnexion = exports.EtatMoteurConnexion = void 0;
        const LocalStorage_1 = require("LocalStorage");
        const ObjetElement_1 = require("ObjetElement");
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_Cryptage_1 = require("Enumere_Cryptage");
        const ObjetCryptage_1 = require("ObjetCryptage");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_ErreurAcces_1 = require("Enumere_ErreurAcces");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        const ObjetRequeteSecurisationCompte_1 = require("ObjetRequeteSecurisationCompte");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const ValidationMotDePasse_1 = require("ValidationMotDePasse");
        const AccessApp_1 = require("AccessApp");
        var EtatMoteurConnexion;
        (function(EtatMoteurConnexion) {
            EtatMoteurConnexion[EtatMoteurConnexion["aucun"] = 0] = "aucun";
            EtatMoteurConnexion[EtatMoteurConnexion["malInitialise"] = 1] = "malInitialise";
            EtatMoteurConnexion[EtatMoteurConnexion["autoInitialise"] = 8] = "autoInitialise";
            EtatMoteurConnexion[EtatMoteurConnexion["enIdentification"] = 2] = "enIdentification";
            EtatMoteurConnexion[EtatMoteurConnexion["identifie"] = 3] = "identifie";
            EtatMoteurConnexion[EtatMoteurConnexion["nonIdentifie"] = 4] = "nonIdentifie";
            EtatMoteurConnexion[EtatMoteurConnexion["enAuthentification"] = 5] = "enAuthentification";
            EtatMoteurConnexion[EtatMoteurConnexion["authentifie"] = 6] = "authentifie";
            EtatMoteurConnexion[EtatMoteurConnexion["nonAuthentifie"] = 7] = "nonAuthentifie";
            EtatMoteurConnexion[EtatMoteurConnexion["erreur"] = 9] = "erreur";
        }
        )(EtatMoteurConnexion || (exports.EtatMoteurConnexion = EtatMoteurConnexion = {}));
        class ObjetMoteurConnexion {
            constructor() {
                this.avecControleReglesMDP = false;
                this.application = (0,
                AccessApp_1.getApp)();
                this.const = {
                    Cookie_Identification: (0,
                    AccessApp_1.getApp)().nomProduit + '_Identification',
                    Cookie_Authentification: (0,
                    AccessApp_1.getApp)().nomProduit + '_Authentification',
                    Cookie_Espace: (0,
                    AccessApp_1.getApp)().nomProduit + '_Espace',
                    Cookie_estCAS: (0,
                    AccessApp_1.getApp)().nomProduit + '_EstCas'
                };
                this.reset(true);
            }
            reset(aFull=false) {
                this.stockageMDPActif = LocalStorage_1.IELocalStorage.actif && !(0,
                AccessApp_1.getApp)().getDemo();
                this.avecStockageMDP = false;
                this.estAppliMobile = (0,
                AccessApp_1.getApp)().estAppliMobile;
                this.modeValidationAppliMobile = MethodesObjet_1.MethodesObjet.isFunction(GParametres.getCookieValidationAppli) && GParametres.getCookieValidationAppli() && document.cookie.indexOf(GParametres.getCookieValidationAppli() + '=') > -1;
                this.modeValidationAppliMobileJeton = false;
                this.nomRessource = '';
                this.ressourceInternet = new ObjetElement_1.ObjetElement();
                this.genreConnexion = 0;
                this.login = new ObjetElement_1.ObjetElement();
                this.motDePasse = new ObjetElement_1.ObjetElement();
                this.alea = '';
                this.pourENT = false;
                this.demandeConnexionAuto = false;
                this.enConnexionAuto = false;
                this.demandeConnexionAppliMobile = false;
                this.demandeConnexionAppliMobileJeton = false;
                this.enConnexionAppliMobile = false;
                this.uuidAppliMobile = '';
                this.loginTokenSAV = '';
                this.tokenSAV = '';
                this.erreurCode = Enumere_ErreurAcces_1.EGenreErreurAcces.Aucune;
                this.erreur = {
                    erreurTitre: null,
                    erreurMessage: null
                };
                this.informationsAppareil = null;
                if (aFull) {
                    this.stockageMDPActive = false;
                    this.genreEspace = null;
                    this.callback = null;
                    this.requetes = {
                        parametres: null,
                        listeRessources: null,
                        getRequeteIdent: null,
                        getRequeteAuth: null
                    };
                }
                this.etat = EtatMoteurConnexion.aucun;
            }
            init(aParam) {
                this.callback = aParam.callback;
                this.requetes.listeRessources = aParam.requetes.listeRessources || null;
                this.requetes.getRequeteIdent = aParam.requetes.getRequeteIdent || null;
                this.requetes.getRequeteAuth = aParam.requetes.getRequeteAuth || null;
                this.stockageMDPActive = aParam.stockageMDPActive || false;
                this.etat = EtatMoteurConnexion.aucun;
                this.genreEspace = GEtatUtilisateur.getNumeroGenreEspace();
                if (this.stockageMDPActif && this.stockageMDPActive) {
                    this.login = new ObjetElement_1.ObjetElement(LocalStorage_1.IELocalStorage.getItem(this.const.Cookie_Identification));
                    this.motDePasse = new ObjetElement_1.ObjetElement(LocalStorage_1.IELocalStorage.getItem(this.const.Cookie_Authentification));
                    this.avecStockageMDP = !!this.getLogin() && !!this.getMotDePasse() && (parseInt(LocalStorage_1.IELocalStorage.getItem(this.const.Cookie_Espace)) === this.genreEspace);
                    if (!this.avecStockageMDP) {
                        this.setStockageMdp(false);
                    } else {
                        this.etat = EtatMoteurConnexion.autoInitialise;
                        this.callback();
                    }
                }
                if (window && window.opener) {
                    window.addEventListener('message', this.messageTokenSAV.bind(this), false);
                    window.opener.postMessage(JSON.stringify({
                        loaded: true
                    }), '*');
                }
            }
            setSecurisationCompte(aSecurisationCompte) {
                this.securisationCompte = aSecurisationCompte;
            }
            setLogin(aLogin) {
                if (this.login) {
                    this.login.setLibelle(aLogin);
                }
            }
            getLogin(aPourVisu=false) {
                const lLoginBrut = this.login.getLibelle();
                let lLogin = lLoginBrut;
                if (lLogin && !this.pourENT && this.login.getGenre() && (parseInt(this.login.getGenre().toString()) > 0)) {
                    lLogin = lLogin.toLowerCase().trim();
                }
                return aPourVisu ? lLoginBrut : lLogin;
            }
            setMotDePasse(aMdp) {
                if (this.motDePasse) {
                    this.motDePasse.setLibelle(aMdp);
                }
            }
            getMotDePasseBrut() {
                return this.motDePasse.getLibelle() || '';
            }
            getMotDePasse(aPourVisu=false) {
                let lMotDePasse = this.getMotDePasseBrut();
                if (lMotDePasse && !this.pourENT && this.motDePasse.getGenre() && (parseInt(this.motDePasse.getGenre().toString()) > 0)) {
                    lMotDePasse = lMotDePasse.toLowerCase();
                }
                return aPourVisu && this.avecStockageMDP && !!lMotDePasse ? '********' : aPourVisu && !!lMotDePasse ? lMotDePasse : !!lMotDePasse && lMotDePasse.trim ? forge.md.sha256.create().update(this.alea).update(forge.util.encodeUtf8(lMotDePasse.trim())).digest().toHex().toUpperCase() : '';
            }
            setGenreConnexion(aGenre) {
                if (GEtatUtilisateur.setGenreConnexion) {
                    GEtatUtilisateur.setGenreConnexion(aGenre);
                }
                this.genreConnexion = aGenre;
            }
            getGenreConnexion() {
                return this.genreConnexion;
            }
            aMotDePasseStocke() {
                return !!LocalStorage_1.IELocalStorage.getItem(this.const.Cookie_Authentification);
            }
            getCle() {
                return (this.tokenSAV ? this.tokenSAV : (this.pourENT ? '' : this.getLogin()) + this.getMotDePasse());
            }
            setStockageMdp(aActif) {
                if (this.stockageMDPActif && this.stockageMDPActive && this.avecStockageMDP === true && aActif === false) {
                    this.avecStockageMDP = false;
                    this.reset();
                    this.viderStockageMDP();
                } else if (this.stockageMDPActif && this.stockageMDPActive) {
                    this.avecStockageMDP = aActif;
                }
            }
            setTokenSAV(aToken) {
                let lMsg = forge.random.generate(Math.max(2, Math.floor(Math.random() * 100) % 10));
                let lTotal = 0;
                for (let i = 0; i < lMsg.length; i++) {
                    lTotal += lMsg.charCodeAt(i);
                }
                if (lTotal % 255 !== 0) {
                    lMsg += String.fromCharCode(255 - (lTotal % 255));
                }
                this.tokenSAV = aToken;
                this.stockageMDPActive = false;
                this.demandeConnexionAuto = false;
                this.enConnexionAuto = false;
                this.demandeConnexionAppliMobile = false;
                this.demandeConnexionAppliMobileJeton = false;
                this.enConnexionAppliMobile = false;
                this.modeValidationAppliMobile = false;
                this.loginTokenSAV = ObjetCryptage_1.GCryptage.encrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: lMsg,
                    cle: ObjetCryptage_1.GCryptage.getBuffer(this.tokenSAV),
                    iv: this.getObjetCommunication().getIvAES()
                });
            }
            viderStockageMDP() {
                LocalStorage_1.IELocalStorage.removeItem(this.const.Cookie_Identification);
                LocalStorage_1.IELocalStorage.removeItem(this.const.Cookie_Authentification);
                LocalStorage_1.IELocalStorage.removeItem(this.const.Cookie_Espace);
                LocalStorage_1.IELocalStorage.removeItem(this.const.Cookie_estCAS);
            }
            getObjetCommunication() {
                return this.application.getCommunication();
            }
            getNouveauChallenge(aChallenge) {
                const lChallenge = ObjetCryptage_1.GCryptage.decrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: aChallenge,
                    cle: ObjetCryptage_1.GCryptage.getBuffer(this.getCle()),
                    iv: this.getObjetCommunication().getIvAES(),
                    avecAlea: true
                });
                return ObjetCryptage_1.GCryptage.encrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: lChallenge,
                    cle: ObjetCryptage_1.GCryptage.getBuffer(this.getCle()),
                    iv: this.getObjetCommunication().getIvAES()
                });
            }
            validationLoginMdp() {
                this.demandeConnexionAuto = !this.modeValidationAppliMobile && !this.estAppliMobile && !this.aMotDePasseStocke() && this.avecStockageMDP;
                this.enConnexionAuto = !this.modeValidationAppliMobile && !this.estAppliMobile && this.aMotDePasseStocke() && this.avecStockageMDP;
                this.demandeConnexionAppliMobile = this.modeValidationAppliMobile;
                this.demandeConnexionAppliMobileJeton = this.modeValidationAppliMobile && this.modeValidationAppliMobileJeton;
                this.enConnexionAppliMobile = this.application.estAppliMobile;
                return !!(MethodesObjet_1.MethodesObjet.isFunction(this.callback) && ((!!this.getLogin() && !!this.getMotDePasse() && (!this.estAppliMobile || !!this.uuidAppliMobile)) || (this.tokenSAV && this.loginTokenSAV)));
            }
            async identification(aIdentificationManuelle=false) {
                this.avecControleReglesMDP = false;
                if (this.validationLoginMdp()) {
                    if (this.etat === EtatMoteurConnexion.authentifie) {
                        return;
                    }
                    this.avecControleReglesMDP = aIdentificationManuelle;
                    this.etat = EtatMoteurConnexion.enIdentification;
                    const lReponse = await this.requetes.getRequeteIdent(this).lancerRequete({
                        genreConnexion: this.genreConnexion,
                        genreEspace: this.genreEspace,
                        identifiant: this.getLogin(),
                        pourENT: this.pourENT,
                        enConnexionAuto: this.enConnexionAuto,
                        demandeConnexionAuto: this.demandeConnexionAuto,
                        enConnexionAppliMobile: this.enConnexionAppliMobile,
                        demandeConnexionAppliMobile: this.demandeConnexionAppliMobile,
                        demandeConnexionAppliMobileJeton: this.demandeConnexionAppliMobileJeton,
                        uuidAppliMobile: this.uuidAppliMobile,
                        loginTokenSAV: this.loginTokenSAV,
                        informationsAppareil: this.informationsAppareil
                    });
                    this.apresIdentification(lReponse);
                } else {
                    this.etat = EtatMoteurConnexion.malInitialise;
                    this.callback();
                }
            }
            apresIdentification(aParam) {
                this.etat = EtatMoteurConnexion.identifie;
                if (this.demandeConnexionAppliMobile && aParam.login) {
                    this.login = new ObjetElement_1.ObjetElement(aParam.login);
                }
                this.ressourceInternet = aParam.utilisateur || new ObjetElement_1.ObjetElement('');
                this.login.Genre = aParam.modeCompLog || 0;
                this.motDePasse.Genre = aParam.modeCompMdp || 0;
                this.alea = aParam.alea || '';
                if (this.getMotDePasse() || (this.tokenSAV && this.loginTokenSAV)) {
                    const lNouveauChallenge = this.getNouveauChallenge(aParam.challenge);
                    this.authentification(lNouveauChallenge);
                }
            }
            async authentification(aNouveauChallenge) {
                this.etat = EtatMoteurConnexion.enAuthentification;
                const lReponse = await this.requetes.getRequeteAuth(this).lancerRequete({
                    genreConnexion: this.genreConnexion,
                    identifiant: this.getLogin(),
                    pourENT: this.pourENT,
                    ressourceInternet: this.ressourceInternet,
                    nomRessource: this.nomRessource,
                    genreRecherche: this.genreRecherche,
                    enConnexionAuto: this.enConnexionAuto,
                    demandeConnexionAuto: this.demandeConnexionAuto,
                    enConnexionAppliMobile: this.enConnexionAppliMobile,
                    demandeConnexionAppliMobile: this.demandeConnexionAppliMobile,
                    demandeConnexionAppliMobileJeton: this.demandeConnexionAppliMobileJeton,
                    uuidAppliMobile: this.uuidAppliMobile,
                    loginTokenSAV: this.loginTokenSAV,
                    challenge: aNouveauChallenge
                });
                this.apresAuthentification(lReponse);
            }
            apresAuthentification(aParam) {
                var _a, _b, _c;
                if (MethodesObjet_1.MethodesObjet.isNumeric(aParam.Acces)) {
                    this.etat = EtatMoteurConnexion.erreur;
                    this.setMessageErreur(aParam.Acces, aParam.AccesMessage);
                    if (window && window.opener && this.tokenSAV) {
                        window.removeEventListener('message', this.messageTokenSAV.bind(this), false);
                        window.opener.postMessage(JSON.stringify({
                            result: aParam.Acces,
                            erreur: this.erreur
                        }), '*');
                    }
                    if (window.messageData) {
                        window.messageData.push({
                            action: 'erreurAuth',
                            message: this.erreur.erreurMessage
                        });
                    } else if ((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.cordova_iab) === null || _c === void 0 ? void 0 : _c.postMessage) {
                        window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({
                            action: 'erreurAuthAjout',
                            message: this.erreur.erreurMessage
                        }));
                    }
                    this.callback(aParam);
                } else if (aParam.cle) {
                    if (aParam.codePINFixe) {
                        GEtatUtilisateur.setCodePINFixe(aParam.codePINFixe);
                    }
                    GEtatUtilisateur.setReglesSaisieMotDePasse(aParam);
                    const lObjCommunication = this.getObjetCommunication();
                    lObjCommunication.setCleAES(ObjetCryptage_1.GCryptage.decrypter({
                        genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                        chaine: aParam.cle,
                        cle: ObjetCryptage_1.GCryptage.getBuffer(this.getCle()),
                        iv: lObjCommunication.getIvAES(),
                        enBytes: true
                    }));
                    this._apresAuthentificationReussie(aParam);
                } else {
                    this.etat = EtatMoteurConnexion.nonAuthentifie;
                    if (window && window.opener && this.tokenSAV) {
                        window.removeEventListener('message', this.messageTokenSAV.bind(this), false);
                        window.opener.postMessage(JSON.stringify({
                            result: -1
                        }), '*');
                    }
                    this.callback(aParam);
                }
            }
            setMessageErreur(AGenreErreur, aMessage) {
                this.erreur = {
                    erreurTitre: null,
                    erreurMessage: null
                };
                this.erreurCode = AGenreErreur;
                switch (AGenreErreur) {
                case Enumere_ErreurAcces_1.EGenreErreurAcces.Identification:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurIdentification'),
                        avecCallback: true
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.Autorisation:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurAutorisation', [GParametres.getNomEspace()]),
                        erreurTitre: ObjetTraduction_1.GTraductions.getValeur('connexion.AccesRefuse')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.ConnexionClasse:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurConnexionClasse')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.AucuneRessource:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurAucuneRessource', [GParametres.getNomEspace()]),
                        erreurTitre: ObjetTraduction_1.GTraductions.getValeur('connexion.AccesRefuse')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.Connexion:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurConnexion')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.BloqueeEleve:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurBloqueeEleve')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.FonctionAccompagnant:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurFonctionAccompagnant', [GParametres.getNomEspace()])
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.AccompagnantAucunEleve:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurAccompagnantAucunEleve', [GParametres.getNomEspace()])
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.CompteDesactive:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.CompteDesactive_S', [GParametres.getNomEspace()])
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.Message:
                    this.erreur = {
                        erreurMessage: aMessage ? aMessage.message || '' : '',
                        erreurTitre: aMessage ? aMessage.titre || '' : ''
                    };
                    break;
                default:
                    break;
                }
            }
            _authentificationTokenSAV() {
                this.setTokenSAV(this.tokenSAV);
                this.identification();
            }
            messageTokenSAV(aEvent) {
                if (aEvent && aEvent.data) {
                    const lData = JSON.parse(aEvent.data);
                    if (lData && lData.tokenSAV) {
                        this.tokenSAV = lData.tokenSAV;
                        this._authentificationTokenSAV();
                    }
                }
            }
            _avecSecurisationDoubleAuth(aParam) {
                return aParam && aParam.actionsDoubleAuth && aParam.actionsDoubleAuth.contains && (aParam.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie) || aParam.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieCodePINetSource) || aParam.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieSourcePourNotifSeulement));
            }
            _avecPersonnalisationMDP(aParam) {
                return aParam && aParam.actionsDoubleAuth && aParam.actionsDoubleAuth.contains && aParam.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_PersonnalisationMotDePasse);
            }
            _requeteSecurisationCompteEnregistrementPromise(aParams) {
                const lParams = Object.assign({
                    action: TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_EnregistrerChoixUtilisateur
                }, aParams.valeursSecurisationCompte);
                return new ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth(this).lancerRequete(lParams).catch( (aReponse) => {
                    return Promise.resolve().then( () => {
                        if (aReponse && aReponse.promiseMessage) {
                            return aReponse.promiseMessage;
                        }
                    }
                    ).then( () => {
                        return Promise.reject();
                    }
                    );
                }
                );
            }
            _securisationComptePromise(aParam) {
                this.securisationCompte.callbackInitSecurisationCompte();
                aParam.valeursSecurisationCompte = {};
                return Promise.resolve().then( () => {
                    if (this._avecPersonnalisationMDP(aParam)) {
                        this.avecControleReglesMDP = false;
                        return this.securisationCompte.callbackPersonnalisationMDPPromise(aParam).then( (aResult) => {
                            if (aResult.reussite && aResult.paramForcerMDP) {
                                if (aResult.paramForcerMDP.nouveauMDP) {
                                    aParam.valeursSecurisationCompte.nouveauMDP = aResult.paramForcerMDP.nouveauMDP;
                                }
                                Object.assign(aParam, aResult.paramForcerMDP);
                            } else {
                                return Promise.reject();
                            }
                        }
                        );
                    }
                }
                ).then( () => {
                    if (this._avecSecurisationDoubleAuth(aParam)) {
                        return this.securisationCompte.callbackSecurisationDoubleAuthPromise(aParam).then( (aResult) => {
                            if (aResult && aResult.suivant && aResult.donnees) {
                                Object.assign(aParam.valeursSecurisationCompte, aResult.donnees);
                            } else {
                                return Promise.reject();
                            }
                        }
                        );
                    }
                }
                ).then( () => {
                    if (this._avecSecurisationDoubleAuth(aParam) || this._avecPersonnalisationMDP(aParam) || aParam.changementStrategieImpose) {
                        return this._requeteSecurisationCompteEnregistrementPromise(aParam);
                    }
                }
                );
            }
            _apresAuthentificationReussie(aParam) {
                if (aParam.login) {
                    this.login.Libelle = aParam.login;
                }
                const lJetonConnexionAppliMobile = aParam.jetonConnexionAppliMobile;
                const lJetonConnexionAuto = aParam.jetonConnexionAuto;
                if (lJetonConnexionAuto) {
                    LocalStorage_1.IELocalStorage.setItem(this.const.Cookie_Authentification, lJetonConnexionAuto);
                    LocalStorage_1.IELocalStorage.setItem(this.const.Cookie_Identification, this.getLogin());
                    LocalStorage_1.IELocalStorage.setItem(this.const.Cookie_Espace, (this.genreEspace !== undefined) && (this.genreEspace !== null) ? this.genreEspace.toString() : '');
                }
                if (window && window.opener && this.tokenSAV) {
                    window.removeEventListener('message', this.messageTokenSAV.bind(this), false);
                    window.opener.postMessage(JSON.stringify({
                        result: 0
                    }), '*');
                }
                if (this.modeValidationAppliMobile || document.cookie.indexOf('validationAppliMobile=') > -1) {
                    window.loginState = {
                        status: 0,
                        libelle: aParam.libelleUtil,
                        login: this.getLogin(true),
                        mdp: lJetonConnexionAppliMobile
                    };
                    if (document.cookie.indexOf('validationAppliMobile=') > -1) {
                        document.cookie = 'validationAppliMobile=;expires=' + new Date(0).toUTCString();
                        document.cookie = 'appliMobile=1;expires=' + new Date(new Date().getTime() + (365 * 24 * 60 * 60 * 1000)).toUTCString();
                    }
                    return;
                }
                if (this.application.estAppliMobile) {
                    window.messageData.push({
                        action: 'surAuth',
                        data: lJetonConnexionAppliMobile
                    });
                }
                Promise.resolve().then( () => {
                    if (aParam.actionsDoubleAuth) {
                        return this._securisationComptePromise(aParam);
                    }
                }
                ).then( () => {
                    this._authentifieTotalement(aParam);
                }
                , (aArg) => {
                    if (aArg) {}
                    UtilitaireDeconnexion_1.UtilitaireDeconnexion.deconnexion().then( () => {
                        window.location.reload();
                    }
                    );
                }
                );
            }
            _authentifieTotalement(aParam) {
                var _a;
                this.etat = EtatMoteurConnexion.authentifie;
                if (this.avecControleReglesMDP && !this.pourENT && !this.tokenSAV) {
                    const lEtatUtil = this.application.getEtatUtilisateur();
                    if (lEtatUtil.reglesSaisieMotDePasse && lEtatUtil.reglesSaisieMotDePasse.init) {
                        if (!ValidationMotDePasse_1.ValidationMotDePasse.leMotDePasseRespecteReglesSecurite((_a = this.getMotDePasseBrut()) === null || _a === void 0 ? void 0 : _a.trim(), lEtatUtil.reglesSaisieMotDePasse)) {
                            aParam.motDePasseInvalide = true;
                        }
                    } else {}
                }
                this.callback(aParam);
            }
        }
        exports.ObjetMoteurConnexion = ObjetMoteurConnexion;
        (function(ObjetMoteurConnexion) {
            class ObjetRequeteIdentificationCP extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            }
            ObjetMoteurConnexion.ObjetRequeteIdentificationCP = ObjetRequeteIdentificationCP;
            class ObjetRequeteAuthentificationCP extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            }
            ObjetMoteurConnexion.ObjetRequeteAuthentificationCP = ObjetRequeteAuthentificationCP;
        }
        )(ObjetMoteurConnexion || (exports.ObjetMoteurConnexion = ObjetMoteurConnexion = {}));
    },
    fn: 'objetmoteurconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireRedirection = void 0;
        class UtilitaireRedirection {
            constructor() {
                this.parametresAConserver = ['login', 'fd', 'redirect', 'redirect_sauthm'];
                this.parametres = [];
                const lSearches = window.location.search.replace(/^\?/, '').split('&');
                for (const i in lSearches) {
                    const lItems = lSearches[i].split('=');
                    if (lItems.length === 2) {
                        this.parametres.push({
                            parametre: lItems[0],
                            valeur: lItems[1]
                        });
                    }
                }
            }
            getParametresUrl(aObjet) {
                let lParamUrl = '';
                const lParametres = [];
                let lParametre;
                if (aObjet && aObjet.parametresAConserver) {
                    this.parametresAConserver = aObjet.parametresAConserver;
                }
                for (const i in this.parametres) {
                    lParametre = this.parametres[i];
                    const lRegExpParametre = new RegExp(lParametre.parametre,'i');
                    if (lRegExpParametre.test(this.parametresAConserver.join(' ')) && (!aObjet || !aObjet.parametresASupprimer || !lRegExpParametre.test(aObjet.parametresASupprimer.join(' ')))) {
                        lParametres.push(lParametre);
                    }
                }
                if (aObjet && aObjet.parametres) {
                    for (const i in aObjet.parametres) {
                        lParametre = aObjet.parametres[i];
                        if (!this.existParametre(lParametre.parametre)) {
                            lParametres.push(lParametre);
                        }
                    }
                }
                for (const i in lParametres) {
                    lParametre = lParametres[i];
                    lParamUrl += (lParamUrl ? '&' : '') + lParametre.parametre + '=' + lParametre.valeur;
                }
                return (lParamUrl ? '?' : '') + lParamUrl;
            }
            existParametre(aParametre) {
                const obj = this.parametres.filter( (aItem) => {
                    return aItem.parametre === aParametre;
                }
                );
                return (obj !== undefined) && (obj.length > 0);
            }
        }
        exports.UtilitaireRedirection = UtilitaireRedirection;
    },
    fn: 'utilitaireredirection.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports._InterfaceConnexion = void 0;
        const ObjetChaine_1 = require("ObjetChaine");
        const Enumere_StructureAffichage_1 = require("Enumere_StructureAffichage");
        const ObjetInterface_1 = require("ObjetInterface");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetMoteurConnexion_1 = require("ObjetMoteurConnexion");
        const GUID_1 = require("GUID");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ToucheClavier_1 = require("ToucheClavier");
        const Enumere_ErreurAcces_1 = require("Enumere_ErreurAcces");
        const UtilitaireRedirection_1 = require("UtilitaireRedirection");
        const AccessApp_1 = require("AccessApp");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const GlossaireCP_1 = require("GlossaireCP");
        class _InterfaceConnexion extends ObjetInterface_1.ObjetInterface {
            constructor(...aParams) {
                super(...aParams);
                this.applicationProduit = (0,
                AccessApp_1.getApp)();
                this.moteurConnexion = null;
                this.avecErreurSurClickConnecterPrecedent = false;
                this.id = {
                    bandeau: GUID_1.GUID.getId(),
                    btnConnexion: GUID_1.GUID.getId(),
                    checkBox: GUID_1.GUID.getId(),
                    choixLangue: GUID_1.GUID.getId(),
                    connect: GUID_1.GUID.getId(),
                    inscription: GUID_1.GUID.getId(),
                    image: GUID_1.GUID.getId(),
                    imageSuite: GUID_1.GUID.getId(),
                    thisNom: this.Nom,
                    msgErreur: GUID_1.GUID.getId(),
                    wrapper: GUID_1.GUID.getId(),
                    wrapperConnect: GUID_1.GUID.getId(),
                    nameRadio: GUID_1.GUID.getId(),
                    identification: GUID_1.GUID.getId(),
                    motDePasse: GUID_1.GUID.getId(),
                    checkSouvenir: GUID_1.GUID.getId(),
                    pageConnexionAuto: GUID_1.GUID.getId(),
                    waiIdentifiant: GUID_1.GUID.getId(),
                    waiMotDePasse: GUID_1.GUID.getId(),
                    waiRecupIdMdp: GUID_1.GUID.getId()
                };
                this.options = {
                    avecAnimation: true,
                    genreImageConnexion: 0,
                    urlImageConnexion: '',
                    avecChoixConnexion: false,
                    avecRetourEspace: false,
                    stockageMDPActive: false,
                    avecRecupIdMdp: false,
                    pourInscription: false,
                    requetes: {
                        getRequeteIdent: null,
                        getRequeteAuth: null
                    }
                };
            }
            setParametresGeneraux() {
                this.GenreStructure = Enumere_StructureAffichage_1.EStructureAffichage.Autre;
            }
            setOptions(aOptions) {
                Object.assign(this.options, aOptions);
                if (window.location.search.search('redirect=1') > 0 && GParametres.URLEspace) {
                    this.options.avecRetourEspace = true;
                } else {
                    this.options.avecRetourEspace = false;
                }
                return this;
            }
            construireStructureAffichageAutre() {
                if (this.estConnexionSansInterface()) {
                    return '<div class="GrandEspaceHaut GrandEspaceGauche Gras" id="' + this.id.pageConnexionAuto + '">' + ObjetTraduction_1.GTraductions.getValeur('connexion.ConnexionCAS') + '</div>';
                } else {
                    return this.construirePage();
                }
            }
            recupererDonnees() {
                this.moteurConnexion = new ObjetMoteurConnexion_1.ObjetMoteurConnexion();
                this.moteurConnexion.init({
                    callback: this.callbackMoteur.bind(this),
                    requetes: {
                        getRequeteIdent: this.options.requetes.getRequeteIdent,
                        getRequeteAuth: this.options.requetes.getRequeteAuth
                    },
                    stockageMDPActive: this.options.stockageMDPActive
                });
                if (this.callbackInitSecurisationCompte) {
                    this.moteurConnexion.setSecurisationCompte({
                        callbackInitSecurisationCompte: this.callbackInitSecurisationCompte.bind(this),
                        callbackPersonnalisationMDPPromise: this.callbackPersonnalisationMDPPromise.bind(this),
                        callbackSecurisationDoubleAuthPromise: this.callbackSecurisationDoubleAuthPromise.bind(this)
                    });
                }
                if ((0,
                AccessApp_1.getApp)().getDemo()) {
                    this.moteurConnexion.setLogin(ObjetTraduction_1.GTraductions.getValeur('Demo.Identifiant'));
                    this.moteurConnexion.setMotDePasse(ObjetTraduction_1.GTraductions.getValeur('Demo.MotDePasse'));
                    $('#' + this.id.identification).attr('readonly', 'true');
                    $('#' + this.id.motDePasse).attr('readonly', 'true');
                    this.preremplir();
                } else {
                    if (!ObjetNavigateur_1.Navigateur.isIpad) {
                        $('#' + this.id.identification).focus();
                    }
                }
                if (window.hookAccesDepuisAppli) {
                    window.hookAccesDepuisAppli.call(this);
                } else if (this.applicationProduit.smartAppBanner) {
                    this.applicationProduit.smartAppBanner.show();
                }
                GParametres.setDocumentTitle(GlossaireCP_1.TradGlossaireCP.PageConnexion);
            }
            free() {
                super.free();
            }
            callbackMoteur(aParams) {
                switch (this.moteurConnexion.etat) {
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.aucun:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.malInitialise:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.autoInitialise:
                    this.preremplir();
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.enIdentification:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.identifie:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.nonIdentifie:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.enAuthentification:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.authentifie:
                    this._reussiteAuthentification(aParams);
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.nonAuthentifie:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.erreur:
                    {
                        let lAction;
                        if (this.moteurConnexion.erreurCode === Enumere_ErreurAcces_1.EGenreErreurAcces.Identification) {
                            lAction = ( () => {
                                this.moteurConnexion.setMotDePasse('');
                                this.moteurConnexion.setStockageMdp(false);
                            }
                            );
                        } else {
                            lAction = ( () => {
                                this.moteurConnexion.setLogin('');
                                this.moteurConnexion.setMotDePasse('');
                                this.moteurConnexion.setStockageMdp(false);
                            }
                            );
                        }
                        this.avecErreurSurClickConnecterPrecedent = true;
                        this.signalerErreur(this.moteurConnexion.erreur.erreurMessage);
                        this.$refresh();
                        (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                            titre: this.moteurConnexion.erreur.erreurTitre,
                            message: this.moteurConnexion.erreur.erreurMessage,
                            callback: lAction
                        });
                        this._echecAuthentification(aParams);
                        break;
                    }
                default:
                    ;break;
                }
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getModel: {
                        event(aMessage) {
                            let lMessage = '';
                            switch (aMessage) {
                            case 'texteExplicatifModeConnexion':
                                lMessage = '<strong>' + ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionTitre') + '</strong><br />' + ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionMessage');
                                break;
                            case 'texteExplicatifRecupIdMdp':
                                lMessage = ObjetTraduction_1.GTraductions.getValeur('connexion.RecuperationMDP.titre');
                                break;
                            default:
                                break;
                            }
                            if (lMessage) {
                                (0,
                                AccessApp_1.getApp)().getMessage().afficher({
                                    message: lMessage
                                });
                            }
                        },
                        getTitle() {
                            return ObjetTraduction_1.GTraductions.getValeur('connexion.btnInterrogationTitle');
                        }
                    },
                    choixConnexion: {
                        getValue: function(aMode) {
                            return aInstance.moteurConnexion ? aMode === aInstance.moteurConnexion.genreConnexion : false;
                        },
                        setValue: function(aValue) {
                            if (!!aInstance.moteurConnexion) {
                                aInstance.moteurConnexion.setGenreConnexion(aValue);
                            }
                        }
                    },
                    login: {
                        getValue: function() {
                            return !!aInstance.moteurConnexion ? aInstance.moteurConnexion.getLogin(true) : '';
                        },
                        setValue: function(aValue) {
                            if (!!aInstance.moteurConnexion) {
                                aInstance.moteurConnexion.setLogin(aValue);
                            }
                        }
                    },
                    getAttrLogin() {
                        var _a, _b;
                        return {
                            'aria-invalid': aInstance.avecErreurSurClickConnecterPrecedent && !(((_b = (_a = aInstance.moteurConnexion) === null || _a === void 0 ? void 0 : _a.getLogin(true)) === null || _b === void 0 ? void 0 : _b.length) > 0)
                        };
                    },
                    motDePasse: {
                        getValue: function() {
                            return !!aInstance.moteurConnexion ? aInstance.moteurConnexion.getMotDePasse(true) : '';
                        },
                        setValue: function(aValue) {
                            if (!!aInstance.moteurConnexion) {
                                aInstance.moteurConnexion.setMotDePasse(aValue);
                            }
                        },
                        interrompreEvent: function(aEvent) {
                            if (aEvent.type === 'keyup' && aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                if (!!aInstance.moteurConnexion && !aInstance.applicationProduit.getCommunication().requeteEnCours()) {
                                    aInstance.moteurConnexion.identification(true);
                                }
                                return true;
                            }
                        }
                    },
                    getAttrMDP() {
                        var _a, _b;
                        return {
                            'aria-invalid': aInstance.avecErreurSurClickConnecterPrecedent && !(((_b = (_a = aInstance.moteurConnexion) === null || _a === void 0 ? void 0 : _a.getMotDePasse(true)) === null || _b === void 0 ? void 0 : _b.length) > 0)
                        };
                    },
                    montrerMasquerMotDePasse: {
                        event: function() {
                            let lTrigger = $('.as-input.as-password').find('.btnImage');
                            let lTarget = $('.as-input.as-password').find('input');
                            lTrigger.toggleClass('icon_eye_close icon_eye_open');
                            lTarget.attr('type') === 'password' ? lTarget.attr('type', 'text') : lTarget.attr('type', 'password');
                        },
                        getTitle: function() {
                            return $('.as-input.as-password').find('.btnImage').hasClass('icon_eye_open') ? ObjetTraduction_1.GTraductions.getValeur('connexion.VoirMDP') : ObjetTraduction_1.GTraductions.getValeur('connexion.masquerMDP');
                        }
                    },
                    stockageMDP: {
                        getValue: function() {
                            return !!aInstance.moteurConnexion ? aInstance.moteurConnexion.avecStockageMDP : false;
                        },
                        setValue: function(aValue) {
                            if (!!aInstance.moteurConnexion) {
                                aInstance.moteurConnexion.setStockageMdp(aValue);
                            }
                        }
                    },
                    boutonRedirigerParent: {
                        getDisabled: function() {
                            return false;
                        },
                        event: function() {
                            if (GParametres && GParametres.infosInscription && GParametres.infosInscription.espace && GParametres.infosInscription.espace.url) {
                                const lUrl = window.location.href.split('/');
                                lUrl.pop();
                                lUrl.push(GParametres.infosInscription.espace.url);
                                window.location.href = lUrl.join('/');
                            }
                        }
                    },
                    boutonCreation: {
                        getDisabled: function() {
                            return false;
                        },
                        event: function() {
                            aInstance.eventCreation();
                        }
                    },
                    btnConnexionInscription: {
                        getDisabled: function() {
                            return false;
                        },
                        event: function() {
                            aInstance.options.pourInscription = false;
                        }
                    },
                    boutonValidation: {
                        getDisabled: function() {
                            return !aInstance.moteurConnexion || !aInstance.moteurConnexion.getLogin() || !aInstance.moteurConnexion.getMotDePasse();
                        },
                        event: function() {
                            if (!!aInstance.moteurConnexion && !aInstance.applicationProduit.getCommunication().requeteEnCours()) {
                                aInstance.moteurConnexion.identification(true);
                            }
                        }
                    },
                    boutonRecupMDP: {
                        event: function() {
                            if (!!aInstance.moteurConnexion && !aInstance.applicationProduit.getCommunication().requeteEnCours()) {
                                aInstance.evenementRecupIdMDP();
                            }
                        }
                    },
                    choixLangue: function() {
                        return aInstance.options.utilitaireChangementLangue.construire(aInstance.controleur);
                    },
                    visibiliteChangementLangue: function() {
                        return aInstance.options.utilitaireChangementLangue.avecChoixLangues();
                    },
                    visibiliteModeConnexion: function() {
                        return aInstance.options.avecChoixConnexion;
                    },
                    visibiliteRecupIdMdp: function() {
                        return aInstance.options.avecRecupIdMdp;
                    },
                    visibiliteConnexion: function() {
                        return !aInstance.options.pourInscription;
                    },
                    visibiliteInscription: function() {
                        return aInstance.options.pourInscription;
                    },
                    visibiliteRedirigerParent: function() {
                        return aInstance.options.pourInscription && GParametres && GParametres.infosInscription && GParametres.infosInscription.espace;
                    },
                    visibiliteRetourEspace: function() {
                        return aInstance.options.avecRetourEspace;
                    }
                });
            }
            eventCreation() {}
            evenementRecupIdMDP() {}
            retourEspaceBureau() {
                window.location.assign(GParametres.URLEspace + new UtilitaireRedirection_1.UtilitaireRedirection().getParametresUrl({
                    parametres: [{
                        parametre: 'fd',
                        valeur: '1'
                    }],
                    parametresASupprimer: ['redirect']
                }));
            }
            signalerErreur(aMessageErreur) {
                $('#' + this.id.msgErreur).html(ObjetChaine_1.GChaine.replaceRCToHTML(aMessageErreur));
                $('#' + this.id.msgErreur).attr('aria-hidden', 'false');
                $('#' + this.id.msgErreur).show();
            }
            preremplir() {}
            traiterEvenementValidation(aLogin, aMotDePasse, aPourENT, aUuidAppliMobile) {
                this.moteurConnexion.genreEspace = GEtatUtilisateur.GenreEspace;
                if (!!aLogin) {
                    this.moteurConnexion.login.Libelle = aLogin;
                }
                if (!!aMotDePasse) {
                    this.moteurConnexion.motDePasse.Libelle = aMotDePasse;
                }
                this.moteurConnexion.pourENT = aPourENT ? aPourENT : false;
                this.moteurConnexion.avecStockageMDP = false;
                this.moteurConnexion.uuidAppliMobile = this.uuidAppliMobile || aUuidAppliMobile;
                this.moteurConnexion.identification();
            }
            estConnexionSansInterface() {
                return this.applicationProduit.acces && (this.applicationProduit.acces.estConnexionCAS() || this.applicationProduit.acces.estConnexionCookie());
            }
            _echecAuthentification(aParams) {}
        }
        exports._InterfaceConnexion = _InterfaceConnexion;
    },
    fn: '_interfaceconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeArrierePlanAuthentification = void 0;
        var TypeArrierePlanAuthentification;
        (function(TypeArrierePlanAuthentification) {
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["Photo"] = 0] = "Photo";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["_Rebus"] = 1] = "_Rebus";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["Neutre"] = 2] = "Neutre";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["PersonnaliseURL"] = 3] = "PersonnaliseURL";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["Louvre"] = 4] = "Louvre";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["Arbre"] = 5] = "Arbre";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["PersonnaliseFichier"] = 6] = "PersonnaliseFichier";
        }
        )(TypeArrierePlanAuthentification || (exports.TypeArrierePlanAuthentification = TypeArrierePlanAuthentification = {}));
    },
    fn: 'typearriereplanauthentification.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        const TypeArrierePlanAuthentification_1 = require("TypeArrierePlanAuthentification");
        const ObjetDate_1 = require("ObjetDate");
        class ObjetImageConnexion {
            constructor() {
                this.definitionImages = [];
                this.definitionImagesExtra = {};
            }
            getClassImage() {
                return '';
            }
            getObjetImagePronote(aGenreImageConnexion) {
                let lDate = new Date();
                if (location && location.search && location.search.search(/dateCnx=[0-9]{4}-[0-9]{2}-[0-9]{2}/) > -1) {
                    const lDateMatch = location.search.match(/dateCnx=([0-9]{4}-[0-9]{2}-[0-9]{2})/);
                    lDate = new Date(lDateMatch[1]);
                }
                let lResult = {};
                try {
                    switch (aGenreImageConnexion) {
                    case TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Photo:
                        lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Photo][lDate.getMonth() % this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Photo].length];
                        break;
                    case TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre:
                        if (this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre].length === 12) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre][(lDate.getMonth()) % this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre].length];
                        } else if (this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre].length === 53) {
                            const lDatePourSemaine = new Date(lDate.getTime());
                            lDatePourSemaine.setHours(0, 0, 0, 0);
                            lDatePourSemaine.setDate(lDatePourSemaine.getDate() + 3 - (lDatePourSemaine.getDay() + 6) % 7);
                            const lWeek1 = new Date(lDatePourSemaine.getFullYear(),0,4);
                            const lSemaine = 1 + Math.round(((lDatePourSemaine.getTime() - lWeek1.getTime()) / 86400000 - 3 + (lWeek1.getDay() + 6) % 7) / 7);
                            lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre][(lSemaine - 1) % this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre].length];
                        } else {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre][ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(new Date(lDate.getFullYear(),0,1), lDate) % this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre].length];
                        }
                        if (this.definitionImagesExtra[lDate.getMonth() + '-' + lDate.getDate()]) {
                            lResult = this.definitionImagesExtra[lDate.getMonth() + '-' + lDate.getDate()];
                            if (lResult.suiviLogo1) {
                                lResult.suiviLien = lResult.suiviLogo1;
                            }
                        }
                        if (new Date() >= lResult.dateMaxLien) {
                            lResult.lien = '';
                            lResult.lienSuite = '';
                        }
                        break;
                    case TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre:
                        lDate.setFullYear(1900);
                        if (lDate < new Date(1900,2,20)) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre][0];
                        } else if (lDate < new Date(1900,5,21)) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre][1];
                        } else if (lDate < new Date(1900,8,23)) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre][2];
                        } else if (lDate < new Date(1900,11,21)) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre][3];
                        } else {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre][0];
                        }
                        break;
                    default:
                        lResult = {};
                        break;
                    }
                } catch (e) {
                    lResult = {};
                }
                return lResult;
            }
            getClassFond() {
                return 'Image_Connexion_Fond Repeat';
            }
            setDefinitionImages(aArray) {
                this.definitionImages = aArray;
            }
            setDefinitionImagesExtra(aObjet) {
                this.definitionImagesExtra = aObjet;
            }
        }
        const GImageConnexion = new ObjetImageConnexion();
        module.exports = GImageConnexion;
    },
    fn: 'objetimageconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesChangementLangue = void 0;
        require("ChangementLangue.css");
        exports.StylesChangementLangue = {
            Image_flagBE: 'Image_flagBE',
            Image_flagCA: 'Image_flagCA',
            Image_flagCH: 'Image_flagCH',
            Image_flagDE: 'Image_flagDE',
            Image_flagFR: 'Image_flagFR',
            Image_flagGB: 'Image_flagGB',
            Image_flagIT: 'Image_flagIT',
            Image_flagUS: 'Image_flagUS',
            Image_flagNL: 'Image_flagNL',
            Image_flagMA: 'Image_flagMA',
            Image_flagES: 'Image_flagES',
            flagConteneur: 'flag-conteneur',
            inputWrapper: 'input-wrapper',
            asInput: 'as-input',
            asSelect: 'as-select',
            asLi: 'as-li',
            flagImg: 'flag-img',
            flagLabel: 'flag-label'
        };
    },
    fn: 'changementlangue.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireChangementLangueProduit = void 0;
        require("ChangementLangue.css");
        const uNomCookieLangue = 'ielang';
        exports.UtilitaireChangementLangueProduit = {
            affecterLangue(aIdLang) {
                const lDate = new Date();
                lDate.setDate(lDate.getDate() + 365);
                document.cookie = uNomCookieLangue + '=' + aIdLang + '; expires=' + lDate.toUTCString() + '; path=/;';
                window.location.reload();
            },
            getImageCss(aLangId) {
                switch (aLangId) {
                case 12:
                case 1036:
                    return 'Image_flagFR';
                case 1033:
                    return 'Image_flagGB';
                case 1031:
                    return 'Image_flagDE';
                case 9:
                case 2057:
                    return 'Image_flagGB';
                case 2060:
                    return 'Image_flagBE';
                case 3084:
                    return 'Image_flagCA';
                case 4108:
                    return 'Image_flagCH';
                case 16:
                case 1040:
                    return 'Image_flagIT';
                case 2067:
                    return 'Image_flagNL';
                case 6145:
                    return 'Image_flagMA';
                case 10:
                case 3082:
                    return 'Image_flagES';
                default:
                    ;return 'Image_flagFR';
                }
            },
            getCodeLangueIso639(aLangId) {
                switch (aLangId) {
                case 12:
                case 1036:
                    return 'fr';
                case 1033:
                    return 'en';
                case 1031:
                    return 'de';
                case 9:
                case 2057:
                    return 'en';
                case 2060:
                    return 'fr';
                case 3084:
                    return 'ca';
                case 4108:
                    return 'ch';
                case 16:
                case 1040:
                    return 'it';
                case 2067:
                    return 'nl';
                case 6145:
                    return 'ar';
                case 10:
                case 3082:
                    return 'es';
                default:
                    ;return 'fr';
                }
            },
            getCodeLangueIetf(aLangId) {
                switch (aLangId) {
                case 12:
                case 1036:
                    return 'fr-FR';
                case 1033:
                    return 'en-US';
                case 1031:
                    return 'de-DE';
                case 9:
                case 2057:
                    return 'en-GB';
                case 2060:
                    return 'fr-BE';
                case 3084:
                    return 'fr-CA';
                case 4108:
                    return 'fr-CH';
                case 16:
                case 1040:
                    return 'it-IT';
                case 2067:
                    return 'nl-BE';
                case 6145:
                    return 'ar-MA';
                case 10:
                case 3082:
                    return 'es-ES';
                default:
                    ;return 'fr-FR';
                }
            }
        };
    },
    fn: 'utilitairechangementlangueproduit.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireChangementLangue = void 0;
        require("ChangementLangue.css");
        const LocalStorage_1 = require("LocalStorage");
        const MethodesObjet_1 = require("MethodesObjet");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const Enumere_Action_1 = require("Enumere_Action");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_EvenementObjetSaisie_1 = require("Enumere_EvenementObjetSaisie");
        const UtilitaireChangementLangueProduit_1 = require("UtilitaireChangementLangueProduit");
        const AccessApp_1 = require("AccessApp");
        exports.UtilitaireChangementLangue = Object.assign({
            avecChoixLangues: function() {
                return !(0,
                AccessApp_1.getApp)().estAppliMobile && GParametres.listeLangues && GParametres.listeLangues.count() > 1;
            },
            getListeLangues: function() {
                const lListe = MethodesObjet_1.MethodesObjet.dupliquer(GParametres.listeLangues);
                lListe.parcourir( (D) => {
                    D.Libelle = D.description;
                    const lImage = exports.UtilitaireChangementLangue.getImageCss(D.langID);
                    D.imageDrapeau = lImage ? IE.jsx.str("div", {
                        class: exports.UtilitaireChangementLangue.getImageCss(D.langID),
                        role: "img",
                        "aria-label": D.Libelle
                    }) : '';
                    D.libelleHtml = lImage ? IE.jsx.str("div", {
                        class: "flag-img"
                    }, IE.jsx.str("div", {
                        "aria-hidden": "true"
                    }, D.imageDrapeau), IE.jsx.str("div", {
                        class: "flag-label",
                        "ie-ellipsis": true,
                        lang: exports.UtilitaireChangementLangue.getCodeLangueIso639(D.langID)
                    }, D.Libelle)) : D.Libelle;
                }
                );
                lListe.trier();
                return lListe;
            },
            modifierLangue: function(aLangue) {
                if (!LocalStorage_1.IELocalStorage.actif) {
                    (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        titre: ObjetTraduction_1.GTraductions.getValeur('ChangementLangue.ChangerLangueImpossible'),
                        message: ObjetTraduction_1.GTraductions.getValeur('ChangementLangue.ChangerLangueImpossibleDetail')
                    });
                    return;
                }
                if (!aLangue || !aLangue.langID) {
                    return;
                }
                (0,
                ControleSaisieEvenement_1.ControleSaisieEvenement)( () => {
                    (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                        message: ObjetTraduction_1.GTraductions.getValeur('ChangementLangue.MessageConfirmationChangerLangue'),
                        callback: function(aGenre) {
                            if (aGenre === Enumere_Action_1.EGenreAction.Valider) {
                                exports.UtilitaireChangementLangue.affecterLangue(aLangue.langID);
                            }
                        }
                    });
                }
                );
            },
            construire: function(aControleur, aOptions) {
                if (!aControleur) {
                    return '';
                }
                if (!this.avecChoixLangues()) {
                    return '';
                }
                let lIndiceSelection = -1;
                const lListe = exports.UtilitaireChangementLangue.getListeLangues();
                aControleur.comboChangementLangue = {
                    init: function(aInstance) {
                        aInstance.setOptionsObjetSaisie({
                            iconeGauche: '',
                            longueur: 22,
                            largeurListe: 180,
                            avecBouton: false,
                            avecEventSurFermetureListe: !!aOptions && !!aOptions.avecEventFermeture,
                            getContenuCellule: function() {
                                const lElement = lListe.get(lIndiceSelection);
                                if (lElement) {
                                    return {
                                        libelleHtml: lElement.imageDrapeau
                                    };
                                }
                            },
                            optionsBouton: {
                                avecBordures: false,
                                avecFocusVisibleTexte: false,
                                titleForce: ObjetTraduction_1.GTraductions.getValeur('ChangementLangue.ChangerLaLangue'),
                                classeZone: ''
                            }
                        });
                        aInstance.setDonnees(lListe, lIndiceSelection);
                    },
                    event: function(aParametres, aCombo) {
                        if (aParametres.genreEvenement === Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection && aCombo.InteractionUtilisateur && aParametres.indice !== lIndiceSelection) {
                            exports.UtilitaireChangementLangue.modifierLangue(aParametres.element);
                        }
                    },
                    getDisabled: function() {
                        return lListe.count() < 2;
                    }
                };
                lListe.parcourir( (aElement, aIndex) => {
                    if (aElement.langID === GParametres.langID) {
                        lIndiceSelection = aIndex;
                        return false;
                    }
                }
                );
                if (lIndiceSelection < 0) {
                    lIndiceSelection = 0;
                }
                return '<ie-combo class="flag-conteneur" ie-model="comboChangementLangue"></ie-combo>';
            }
        }, UtilitaireChangementLangueProduit_1.UtilitaireChangementLangueProduit);
    },
    fn: 'utilitairechangementlangue.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetBandeauEspace = void 0;
        require("ObjetBandeauEspace.css");
        exports.StylesObjetBandeauEspace = {
            ObjetBandeauEspace: 'ObjetBandeauEspace',
            colorFoncee: 'colorFoncee',
            ibe_gauche: 'ibe_gauche',
            ibe_image_dep: 'ibe_image_dep',
            ibe_image_etab: 'ibe_image_etab',
            ibe_centre: 'ibe_centre',
            ibe_util_photo: 'ibe_util_photo',
            ibe_util_photo_i: 'ibe_util_photo_i',
            ibe_actif: 'ibe_actif',
            ibe_etab_util: 'ibe_etab_util',
            ibe_etab_cont: 'ibe_etab_cont',
            ibe_etab: 'ibe_etab',
            ibe_util: 'ibe_util',
            ibe_util_texte: 'ibe_util_texte',
            ibe_droite: 'ibe_droite',
            ibe_notification: 'ibe_notification',
            ibe_logo: 'ibe_logo',
            Image_Logo_EDTBarreHaut: 'Image_Logo_EDTBarreHaut',
            ibe_logo_image: 'ibe_logo_image',
            ibe_langue: 'ibe_langue',
            ibe_grosBoutonRond: 'ibe_grosBoutonRond',
            icon_carnet_liaison: 'icon_carnet_liaison',
            mixIcon_plus: 'mix-icon_plus',
            ibe_iconebtn: 'ibe_iconebtn',
            ibe_droite_fixe: 'ibe_droite_fixe'
        };
    },
    fn: 'objetbandeauespace.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetBandeauEspace = void 0;
        const ObjetIdentite_1 = require("ObjetIdentite");
        const UtilitaireChangementLangue_1 = require("UtilitaireChangementLangue");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetWAI_1 = require("ObjetWAI");
        const ObjetPosition_1 = require("ObjetPosition");
        const Invocateur_1 = require("Invocateur");
        require("ObjetBandeauEspace.css");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const Tooltip_1 = require("Tooltip");
        const Divers_css_1 = require("Divers.css");
        const GUID_1 = require("GUID");
        class ObjetBandeauEspace extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.params = {
                    labelConteneur: '',
                    urlLogoEtab: GParametres.urlLogo,
                    nomEtab: GParametres.NomEtablissementConnexion ? GParametres.NomEtablissementConnexion : GParametres.NomEtablissement,
                    getNomUtil: null,
                    attrUtil: '',
                    ariaLabelUtil: '',
                    classUtil: '',
                    photo: null,
                    avecLogoProduitCss: true,
                    logoProduitCss: GParametres.logoProduitCss || '',
                    logoProduitUrl: GParametres.urlSiteIndexEducation || 'https://www.index-education.com',
                    labelLienProduit: GParametres.labelLienProduit || '',
                    logoDepartementImage: '',
                    logoDepartementLien: '',
                    mention: GParametres.lienMentions,
                    avecLangue: true,
                    getObjetSelecteurMembre: null,
                    htmlBoutonFicheEleve: null,
                    htmlBoutonsAvantNotif: null,
                    getObjetNotification: null,
                    getObjetAide: null,
                    htmlBoutons: '',
                    iconesADroite: false,
                    clickUtilisateur: null,
                    clickDeconnexion: null,
                    clickAccesMobile: null,
                    clickEtablissement: null,
                    isEDT: false,
                    controleur: null,
                    avecFicheEtablissement: false,
                    avecLiensEvitement: false,
                    liensEvitement: {
                        menuOnglet: false,
                        urlDeclarationAccessibilite: null,
                        clickPlanSite: null
                    },
                    avecImageCollectivite: true
                };
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getNodeRacine: function() {
                        $(window).on('resize.ObjetBandeauEspace', () => {
                            aInstance._resize();
                        }
                        );
                        $(this.node).on('destroyed', () => {
                            $(window).off('resize.ObjetBandeauEspace');
                        }
                        );
                    },
                    getNodeCentre: function() {},
                    getNodeNomEtab: function() {
                        if (aInstance.params.clickEtab) {
                            $(this.node).on('click keyup', (aEvent) => {
                                if (aEvent.type === 'keyup' && !(aEvent.which === ToucheClavier_1.ToucheClavier.Espace || aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot)) {
                                    return;
                                }
                                aEvent.originalEvent.__clickZone__ = true;
                                aInstance.params.clickEtab();
                            }
                            );
                            return;
                        }
                    },
                    nodeEtablissement: function() {
                        if (aInstance.params.clickEtablissement) {
                            $(this.node).eventValidation( (aEvent) => {
                                aInstance.params.clickEtablissement();
                                aEvent.stopPropagation();
                            }
                            );
                        }
                    },
                    util: {
                        avecUtil: function() {
                            return aInstance.params.getNomUtil ? !!aInstance.params.getNomUtil() : false;
                        },
                        getNodeUtil: function() {
                            $(this.node).on('click keyup', function(aEvent) {
                                if (aEvent.type === 'keyup' && !(aEvent.which === ToucheClavier_1.ToucheClavier.Espace || aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot)) {
                                    return;
                                }
                                aEvent.originalEvent.__clickZone__ = true;
                                aInstance.params.clickUtilisateur(aEvent, this);
                            });
                        },
                        getHtmlUtil: function() {
                            return aInstance.params.getNomUtil ? aInstance.params.getNomUtil() : '';
                        },
                        avecPhoto: function() {
                            return aInstance.params.photo.getUrlPhoto ? aInstance.params.photo.getUrlPhoto() !== '' : false;
                        },
                        getNodeImgPhoto: function() {
                            $(this.node).on('error', function() {
                                $(this).parent().find('.ibe_util_photo_i').show();
                                $(this).remove();
                            });
                        },
                        getHtmlPhoto: function() {
                            const lUrl = aInstance.params.photo.getUrlPhoto ? aInstance.params.photo.getUrlPhoto() : '';
                            if (lUrl) {
                                return [IE.jsx.str("img", {
                                    src: lUrl,
                                    style: 'width:100%;',
                                    "ie-node": 'util.getNodeImgPhoto',
                                    alt: aInstance.params.getNomUtil ? ObjetTraduction_1.GTraductions.getValeur('PhotoDe_S', [aInstance.params.getNomUtil()]) : ''
                                }), '<div class="ibe_util_photo_i"', (lUrl ? ' style="display:none"' : ''), '>', '<i class="icon_utilisateur"></i>', '</div>'].join('');
                            }
                            return '';
                        },
                        getAttrUtil: function() {
                            const lNom = aInstance.params.getNomUtil ? aInstance.params.getNomUtil() : '';
                            const lLabelUtil = aInstance.params.ariaLabelUtil;
                            const lLibelle = (lNom ? lNom + (lLabelUtil ? ' - ' : '') : '') + (lLabelUtil ? lLabelUtil : '');
                            return {
                                'aria-label': lLibelle
                            };
                        }
                    },
                    getNodeNotif: function() {
                        $(this.node).eventValidation( (aEvent) => {
                            aEvent.originalEvent.__clickZone__ = true;
                        }
                        );
                    },
                    getObjetSelecteurMembre: function() {
                        return aInstance.params.getObjetSelecteurMembre;
                    },
                    getObjetNotification: function() {
                        return aInstance.params.getObjetNotification;
                    },
                    getObjetAide: function() {
                        return aInstance.params.getObjetAide;
                    },
                    getAttrBanner() {
                        return {
                            tabindex: aInstance.params.avecLiensEvitement ? -1 : 0
                        };
                    },
                    nodeContenu() {
                        $(this.node).eventValidation( () => {
                            if (global.GInterface && GInterface.setFocusPremierObjet) {
                                GInterface.setFocusPremierObjet();
                            } else {
                                ObjetHtml_1.GHtml.setFocus($('#breadcrumbBandeau').get(0));
                            }
                        }
                        );
                    },
                    nodeMenu() {
                        $(this.node).eventValidation( () => {
                            Invocateur_1.Invocateur.evenement('focus.menu_navigation');
                        }
                        );
                    },
                    nodePlanSite() {
                        $(this.node).eventValidation( () => {
                            aInstance.params.liensEvitement.clickPlanSite();
                        }
                        );
                    }
                });
            }
            setParametres(aParams) {
                Object.assign(this.params, aParams);
                if (this.params.controleur) {
                    Object.assign(this.controleur, this.params.controleur);
                }
            }
            construireAffichage() {
                const lParams = Object.assign({}, this.params);
                if (lParams.getNomUtil) {
                    lParams.labelConteneur = ObjetChaine_1.GChaine.enleverEntites(lParams.getNomUtil()) + ' ' + lParams.labelConteneur;
                }
                const H = [];
                H.push('<div class="ObjetBandeauEspace" ie-node="getNodeRacine" ie-attr="getAttrBanner" role="banner" aria-label="', ObjetChaine_1.GChaine.toTitle(lParams.labelConteneur), '">');
                if (lParams.avecLiensEvitement) {
                    H.push(lParams.liensEvitement.menuOnglet ? `<a class="evitement" tabindex="0" ie-node="nodeMenu">${ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.LiensEvitement.Menu')}</a>` : '', `<a class="evitement" tabindex="0" ie-node="nodeContenu">${ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.LiensEvitement.Contenu')}</a>`, lParams.liensEvitement.urlDeclarationAccessibilite ? `<a class="evitement" tabindex="0" href="${lParams.liensEvitement.urlDeclarationAccessibilite}">${ObjetTraduction_1.GTraductions.getValeur('PiedPage.declarationAccessibilite')}</a>` : '', lParams.liensEvitement.clickPlanSite ? `<a class="evitement" tabindex="0" ie-node="nodePlanSite">${ObjetTraduction_1.GTraductions.getValeur('PiedPage.planSite')}</a>` : '');
                }
                H.push('<div class="ibe_gauche">');
                const lImageCollectiviteDepartement = lParams.logoCollectiviteImage || lParams.logoDepartementImage;
                if (!!lImageCollectiviteDepartement && lParams.avecImageCollectivite) {
                    let lLienCollectiviteDepartement = lParams.logoDepartementLien;
                    if (lParams.logoCollectiviteLien && lParams.logoCollectiviteImage) {
                        lLienCollectiviteDepartement = lParams.logoCollectiviteLien;
                    }
                    const lgetNodeImage = (aNode) => {
                        $(aNode).on({
                            load: () => {
                                this._resize();
                            }
                            ,
                            error: () => {
                                $(aNode).parent().remove();
                            }
                        });
                    }
                    ;
                    const lId = GUID_1.GUID.getId();
                    H.push(IE.jsx.str("a", {
                        href: lLienCollectiviteDepartement || false,
                        target: "_blank",
                        class: "ibe_image_dep",
                        "data-tooltip": lParams.logoDepartementLien ? Tooltip_1.Tooltip.Type.default : false,
                        "data-tooltip-id": lParams.logoDepartementLien ? lId : false
                    }, IE.jsx.str("img", {
                        src: lImageCollectiviteDepartement,
                        alt: ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.LogoDepartement'),
                        "ie-node": lgetNodeImage
                    }), lParams.logoDepartementLien ? IE.jsx.str("span", {
                        class: Divers_css_1.StylesDivers.srOnly,
                        id: lId
                    }, ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.AccederSiteDepartement')) : ''));
                }
                if (lParams.urlLogoEtab) {
                    const lgetNodeImage = (aNode) => {
                        $(aNode).on({
                            load: () => {
                                this._resize();
                            }
                            ,
                            error: () => {
                                $(aNode).remove();
                            }
                        });
                    }
                    ;
                    H.push(IE.jsx.str("div", {
                        "ie-node": "getNodeNomEtab",
                        class: ['ibe_image_etab', lParams.clickEtab ? 'ibe_actif' : ''],
                        role: "presentation"
                    }, IE.jsx.str("img", {
                        src: lParams.urlLogoEtab,
                        alt: ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.LogoEtablissement'),
                        "ie-node": lgetNodeImage
                    })));
                }
                H.push('</div>');
                H.push('<div class="ibe_centre" ie-node="getNodeCentre"', (lParams.getObjetSelecteurMembre || (lParams.getObjetNotification && !lParams.iconesADroite) ? '' : ' style="overflow:hidden;"'), '>');
                if (lParams.photo) {
                    H.push('<div class="ibe_util_photo', (lParams.clickUtilisateur ? ' ibe_actif' : ''), '" ie-if="util.avecPhoto" ie-html="util.getHtmlPhoto" ie-node="util.getNodeUtil" ', lParams.attrUtil, lParams.ariaLabelUtil ? ObjetWAI_1.GObjetWAI.composeAttribut({
                        genre: ObjetWAI_1.EGenreAttribut.label,
                        valeur: lParams.ariaLabelUtil
                    }) : '', ' aria-hidden="true"></div>');
                }
                H.push('<div class="ibe_etab_util">', lParams.nomEtab || lParams.avecFicheEtablissement ? ['<div class="AvecMain ibe_etab_cont" ie-node="nodeEtablissement">', '<div ', (lParams.nomEtab ? 'ie-node="getNodeNomEtab" class="ibe_etab' + (lParams.clickEtab ? ' ibe_actif' : '') + '"' : ''), '>', (lParams.avecFicheEtablissement ? IE.jsx.str("ie-btnimage", {
                    class: "icon_uniF2C3 btnImageIcon InlineBlock EspaceDroit AvecMain",
                    "ie-tooltiplabel": ObjetTraduction_1.GTraductions.getValeur('FicheEtablissement.ContacterEtablissement'),
                    "aria-haspopup": "dialog"
                }) : ''), lParams.nomEtab, '</div>', '</div>'].join('') : '', '<div class="ibe_util" ie-if="util.avecUtil">', '<div class="ibe_util_texte', (lParams.clickUtilisateur && !lParams.isEDT ? ' ibe_actif' : ''), '" ie-html="util.getHtmlUtil" ie-node="util.getNodeUtil" tabindex="0" ie-attr="util.getAttrUtil" ', lParams.attrUtil, '></div>', lParams.iconesADroite ? '' : _construireIcones.call(this, lParams), '</div>', '</div>');
                if (lParams.getObjetSelecteurMembre) {
                    H.push('<div ie-identite="getObjetSelecteurMembre"></div>');
                }
                if (lParams.htmlBoutonFicheEleve) {
                    H.push('<div class="m-left-l">', lParams.htmlBoutonFicheEleve, '</div>');
                }
                H.push('</div>');
                H.push('<div class="ibe_droite', lParams.iconesADroite ? ' ibe_droite_fixe' : '', '">');
                if (lParams.iconesADroite) {
                    H.push(_construireIcones.call(this, lParams));
                }
                if (lParams.avecLangue && UtilitaireChangementLangue_1.UtilitaireChangementLangue.avecChoixLangues()) {
                    H.push(IE.jsx.str("div", {
                        class: "ibe_langue"
                    }, UtilitaireChangementLangue_1.UtilitaireChangementLangue.construire(this.controleur, {
                        avecEventFermeture: true
                    })));
                }
                if (lParams.logoProduitCss && lParams.avecLogoProduitCss) {
                    H.push(IE.jsx.str("div", {
                        class: "ibe_logo"
                    }, IE.jsx.str("a", {
                        href: lParams.logoProduitUrl,
                        target: "_blank",
                        class: ['ibe_logo_image', lParams.logoProduitCss],
                        "aria-label": lParams.labelLienProduit,
                        "data-tooltip": Tooltip_1.Tooltip.Type.default
                    })));
                }
                H.push('</div>', '</div>');
                return H.join('');
            }
            focusSurPremierElement() {
                ObjetHtml_1.GHtml.setFocus($('#' + this.Nom.escapeJQ() + ' .ObjetBandeauEspace').get(0));
                clearTimeout(this._timeoutResize);
                this._timeoutResize = setTimeout( () => {
                    this._resize();
                }
                , 100);
            }
            _resize() {
                const lSelec = '#' + this.Nom.escapeJQ();
                const lMaxWidthImage = Math.min(250, Math.round(ObjetNavigateur_1.Navigateur.clientL * 20 / 100));
                $(lSelec + ' .ibe_image_dep img,' + lSelec + ' .ibe_image_etab img').css('max-width', lMaxWidthImage);
                const lJCentre = $(lSelec + ' .ibe_centre');
                const lRectDroit = ObjetPosition_1.GPosition.getClientRect($(lSelec + ' .ibe_droite').get(0));
                const lWidthGauche = Math.round($(lSelec + ' .ibe_gauche').width() + 5);
                const lWidthDroit = Math.round(lRectDroit.width + 5);
                const lMax = Math.max(IE.estMobile ? 100 : 250, (ObjetNavigateur_1.Navigateur.clientL - lWidthGauche - lWidthDroit));
                lJCentre.parent().css('justify-content', 'center');
                lJCentre.css({
                    'max-width': lMax + 'px',
                    'margin-left': ''
                });
                const lElement = lJCentre.get(0);
                if (lElement) {
                    const lRectCentre = ObjetPosition_1.GPosition.getClientRect(lElement);
                    if (lRectCentre.left < lWidthGauche || lRectCentre.right > lRectDroit.left) {
                        lJCentre.parent().css('justify-content', 'flex-start');
                        lJCentre.css({
                            'margin-left': lWidthGauche
                        });
                    }
                }
            }
        }
        exports.ObjetBandeauEspace = ObjetBandeauEspace;
        function _construireIcones(aParams) {
            const H = [];
            if (aParams.htmlBoutonsAvantNotif) {
                H.push(aParams.htmlBoutonsAvantNotif);
            }
            if (aParams.getObjetNotification) {
                H.push(IE.jsx.str("div", {
                    "ie-identite": "getObjetNotification",
                    class: "ibe_notification",
                    "ie-node": "getNodeNotif"
                }));
            }
            if (aParams.getObjetAide) {
                H.push(IE.jsx.str("div", {
                    "ie-identite": "getObjetAide",
                    class: "ibe_notification",
                    "ie-node": "getNodeNotif"
                }));
            }
            if (aParams.htmlBoutons) {
                H.push(aParams.htmlBoutons);
            }
            if (aParams.clickAccesMobile) {
                const lgetNodeAccesMobile = (aNode) => {
                    $(aNode).eventValidation( (aEvent) => {
                        aEvent.originalEvent.__clickZone__ = true;
                        aParams.clickAccesMobile();
                    }
                    );
                }
                ;
                H.push(IE.jsx.str("div", {
                    class: "ibe_iconebtn ibe_actif",
                    tabindex: "0",
                    role: "button",
                    "ie-node": lgetNodeAccesMobile,
                    "aria-label": ObjetTraduction_1.GTraductions.getValeur('Commande.QRCode.Actif'),
                    "data-tooltip": Tooltip_1.Tooltip.Type.default,
                    "aria-haspopup": "dialog"
                }, IE.jsx.str("i", {
                    class: "icon_qr_code colorFoncee",
                    "aria-hidden": "true"
                })));
            }
            if (aParams.clickDeconnexion && !aParams.isEDT) {
                const lgetNodeDeconnexion = (aNode) => {
                    $(aNode).eventValidation( (aEvent) => {
                        aEvent.originalEvent.__clickZone__ = true;
                        aParams.clickDeconnexion();
                    }
                    );
                }
                ;
                H.push(IE.jsx.str("div", {
                    class: "ibe_iconebtn ibe_actif",
                    tabindex: "0",
                    role: "button",
                    "ie-node": lgetNodeDeconnexion,
                    "aria-label": ObjetTraduction_1.GTraductions.getValeur('connexion.SeDeconnecter'),
                    "data-tooltip": Tooltip_1.Tooltip.Type.default,
                    "aria-haspopup": "dialog"
                }, IE.jsx.str("i", {
                    class: "icon_off colorFoncee",
                    "aria-hidden": "true"
                })));
            }
            return H.join('');
        }
    },
    fn: 'objetbandeauespace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_MentionsLegales = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetHtml_1 = require("ObjetHtml");
        class ObjetFenetre_MentionsLegales extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.idContenu = this.getNom() + '_Contenu';
                this.setOptionsFenetre({
                    largeur: 450,
                    hauteur: 320,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')]
                });
            }
            composerContenu(aParametres) {
                const H = [];
                H.push(IE.jsx.str("p", {
                    class: "ie-titre-petit PetitEspaceBas"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.adresseEtablissement')));
                H.push(aParametres.adresseEtablissement && IE.jsx.str("p", null, aParametres.adresseEtablissement));
                H.push(IE.jsx.str("p", {
                    class: "GrandEspaceHaut ie-titre-petit PetitEspaceBas"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.formeJuridique')));
                H.push(aParametres.formeJuridique && IE.jsx.str("p", null, aParametres.formeJuridique));
                H.push(IE.jsx.str("p", {
                    class: "GrandEspaceHaut ie-titre-petit PetitEspaceBas"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.hebergeur')));
                H.push(aParametres.hebergeur && IE.jsx.str("p", null, aParametres.hebergeur));
                H.push(IE.jsx.str("p", {
                    class: "GrandEspaceHaut ie-titre-petit PetitEspaceBas"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.responsablePublication')));
                H.push(aParametres.responsablePublication && IE.jsx.str("p", null, aParametres.responsablePublication));
                if (!!aParametres.informationsComplementaires) {
                    H.push(IE.jsx.str("p", {
                        class: "GrandEspaceHaut ie-titre-petit PetitEspaceBas"
                    }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.informationsComplementaires')));
                    H.push(aParametres.informationsComplementaires);
                }
                return H.join('');
            }
            setDonnees(aParam) {
                ObjetHtml_1.GHtml.setHtml(this.idContenu, this.composerContenu(aParam));
                this.afficher();
            }
            composeContenu() {
                return IE.jsx.str("div", {
                    id: this.idContenu
                });
            }
            surValidation() {
                this.fermer();
            }
        }
        exports.ObjetFenetre_MentionsLegales = ObjetFenetre_MentionsLegales;
    },
    fn: 'objetfenetre_mentionslegales.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteMentionsLegales = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetRequeteMentionsLegales extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        exports.ObjetRequeteMentionsLegales = ObjetRequeteMentionsLegales;
        CollectionRequetes_1.Requetes.inscrire('MentionsLegales', ObjetRequeteMentionsLegales);
    },
    fn: 'objetrequetementionslegales.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_PlanSite = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const jsx_1 = require("jsx");
        class ObjetFenetre_PlanSite extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    largeur: 450,
                    hauteur: 320,
                    hauteurMaxContenu: 720,
                    avecScroll: true,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')]
                });
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    naviguerVers(aGenreOnglet) {
                        $(this.node).eventValidation( () => {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.navigationOnglet, aGenreOnglet);
                        }
                        );
                    }
                });
            }
            setDonnees() {
                this.afficher();
            }
            composeContenu() {
                return IE.jsx.str("ul", {
                    class: "browser-default"
                }, (H) => {
                    const lTabOnglet = this.getTabOngletsVisibles();
                    lTabOnglet.parcourir(aOnglet => {
                        H.push(this._ajouterLigne(aOnglet, (aOnglet.sousOnglets && aOnglet.sousOnglets.count() === 0)));
                    }
                    );
                }
                );
            }
            getTabOngletsVisibles() {
                const lListeOnglet = new ObjetListeElements_1.ObjetListeElements();
                GEtatUtilisateur.listeOnglets.parcourir(aOnglet => {
                    const lOnglet = MethodesObjet_1.MethodesObjet.dupliquer(aOnglet);
                    if (lOnglet.Actif && (lOnglet.estUnOnglet || lOnglet.profondeur === 0)) {
                        lOnglet.sousOnglets = new ObjetListeElements_1.ObjetListeElements();
                        lOnglet.sousOnglets = GEtatUtilisateur.listeOnglets.getListeElements(aElement => {
                            if (aElement.Actif && aElement.onglet) {
                                return lOnglet.getGenre() === aElement.onglet.getGenre();
                            }
                            return false;
                        }
                        );
                        lOnglet.sousOnglets.parcourir(aSousOnglet => {
                            if (aSousOnglet.avecSousOnglet) {
                                aSousOnglet.sousOnglets = new ObjetListeElements_1.ObjetListeElements();
                                aSousOnglet.sousOnglets = GEtatUtilisateur.listeOnglets.getListeElements(aSousElement => {
                                    if (aSousElement.Actif && aSousElement.onglet) {
                                        return aSousOnglet.getGenre() === aSousElement.onglet.getGenre();
                                    }
                                    return false;
                                }
                                );
                            }
                        }
                        );
                        lListeOnglet.add(lOnglet);
                    }
                }
                );
                return lListeOnglet;
            }
            surValidation() {
                this.fermer();
            }
            _ajouterPere(aOnglet) {
                if (aOnglet.sousOnglets && aOnglet.sousOnglets.count() > 0) {
                    return IE.jsx.str("ul", {
                        class: "browser-default"
                    }, (aTab) => {
                        aOnglet.sousOnglets.parcourir( (aSousOnglet) => {
                            aTab.push(this._ajouterLigne(aSousOnglet, (!aSousOnglet.sousOnglets || aSousOnglet.sousOnglets.count() === 0)));
                        }
                        );
                    }
                    );
                }
                return '';
            }
            _ajouterLigne(aOnglet, aAvecLien) {
                if (aAvecLien) {
                    return (IE.jsx.str("li", null, IE.jsx.str("a", {
                        class: "AvecMain",
                        tabindex: "0",
                        "ie-node": (0,
                        jsx_1.jsxFuncAttr)('naviguerVers', aOnglet.getGenre())
                    }, aOnglet.getLibelle()), this._ajouterPere(aOnglet)));
                }
                return (IE.jsx.str("li", null, aOnglet.getLibelle().replace('<br>', ' '), this._ajouterPere(aOnglet)));
            }
        }
        exports.ObjetFenetre_PlanSite = ObjetFenetre_PlanSite;
    },
    fn: 'objetfenetre_plansite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetBandeauPied = void 0;
        require("ObjetBandeauPied.css");
        exports.StylesObjetBandeauPied = {
            footerWrapper: 'footer-wrapper',
            opened: 'opened',
            closed: 'closed',
            ObjetBandeauPied: 'ObjetBandeauPied',
            knowledgeContainer: 'knowledge-container',
            footerToggler: 'footer-toggler',
            ibpBlocLeft: 'ibp-bloc-left',
            ibpLogoConteneur: 'ibp-logo-conteneur',
            ibpLogo: 'ibp-logo',
            ibpPill: 'ibp-pill',
            ibpCommand: 'ibp-command',
            hostFranceContainer: 'host-france-container',
            logoIndexInverse: 'logo-index-inverse',
            hostText: 'host-text',
            certif27001: 'certif-27001',
            asTitle: 'as-title',
            cookiesDisclaimer: 'cookies-disclaimer',
            asLink: 'as-link',
            ThemePronote: 'ThemePronote',
            ieBouton: 'ieBouton',
            bppCanope: 'bpp-canope',
            icon_ecole: 'icon_ecole',
            helpText: 'help-text',
            icon_question: 'icon_question',
            icon_light_bulb: 'icon_light_bulb',
            kbConteneur: 'kb-conteneur',
            legalNotice: 'legal-notice',
            accessibilite: 'accessibilite',
            siteMap: 'site-map',
            partenaireCanope: 'partenaire-canope',
            Image_Partenaire_Canope_2022: 'Image_Partenaire_Canope_2022',
            icon_twitter: 'icon_twitter',
            confidentialite: 'confidentialite',
            footerMobile: 'footer-mobile',
            blocUnique: 'bloc-unique'
        };
    },
    fn: 'objetbandeaupied.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports._ObjetAffichageBandeauPied = void 0;
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const LocalStorage_1 = require("LocalStorage");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetFenetre_MentionsLegales_1 = require("ObjetFenetre_MentionsLegales");
        const ObjetRequeteMentionsLegales_1 = require("ObjetRequeteMentionsLegales");
        const ObjetFenetre_PlanSite_1 = require("ObjetFenetre_PlanSite");
        const ObjetHtml_1 = require("ObjetHtml");
        require("ObjetBandeauPied.css");
        const AccessApp_1 = require("AccessApp");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const IEHtml_1 = require("IEHtml");
        const lCleLocalStorage = 'etatAffichageFooter';
        const lCookieLocalStorage = 'etatAffichageCookiesInfo';
        class _ObjetAffichageBandeauPied extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.etatUtilisateur = global.GEtatUtilisateur;
                this.hauteur = 20;
                this.genreCommande = {
                    twitter: 'twitter',
                    forum: 'forum',
                    videos: 'videos',
                    profil: 'pageprofil'
                };
                this.options = {
                    mention: '',
                    urlConfidentialite: '',
                    siteIndex: 'https://www.index-education.com',
                    urlInfosHebergement: '',
                    logoProduitCss: '',
                    estHebergeEnFrance: '',
                    avecBoutonMasquer: true,
                    urlDeclarationAccessibilite: ''
                };
            }
            actionSurMentionsLegales(aParams) {
                let lFenetreMentionsLegales = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_MentionsLegales_1.ObjetFenetre_MentionsLegales, {
                    pere: this,
                    initialiser: function() {}
                });
                lFenetreMentionsLegales.setOptionsFenetre({
                    titre: ObjetTraduction_1.GTraductions.getValeur('PiedPage.mentionsLegales')
                });
                lFenetreMentionsLegales.setDonnees(aParams);
            }
            actionSurPlanSite() {
                let lFenetrePlanSite = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_PlanSite_1.ObjetFenetre_PlanSite, {
                    pere: this,
                    initialiser: function(aInstance) {
                        aInstance.setOptionsFenetre({
                            titre: ObjetTraduction_1.GTraductions.getValeur('PiedPage.planSite')
                        });
                    }
                });
                lFenetrePlanSite.setDonnees();
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    btnPied: {
                        event: function(aGenre) {
                            aInstance.evenementBouton({
                                genreCmd: aGenre
                            });
                        }
                    },
                    btnMention: function() {
                        $(this.node).eventValidation( () => {
                            let lRequete = new ObjetRequeteMentionsLegales_1.ObjetRequeteMentionsLegales(aInstance,aInstance.actionSurMentionsLegales);
                            lRequete.lancerRequete();
                        }
                        );
                    },
                    getAttrFooter() {
                        return {
                            'aria-expanded': $('.footer-wrapper').hasClass('opened')
                        };
                    }
                });
            }
            jsxNodePied(aGenre, aNode) {
                $(aNode).eventValidation( () => {
                    this.evenementBouton({
                        genreCmd: aGenre
                    });
                }
                );
            }
            avecTwitter() {
                return false;
            }
            avecPlanSite() {
                return false;
            }
            avecBoutonAccesProfil() {
                return false;
            }
            avecBoutonPersonnaliseProduit() {
                return false;
            }
            avecBoutonPageEtablissement() {
                return false;
            }
            espacesISO27001() {
                return false;
            }
            composeCookiesInfo() {
                const lbtnFermer = () => {
                    return {
                        event: (aEvent, aNode) => {
                            let lGenreEspace = this.etatUtilisateur ? '_' + this.etatUtilisateur.GenreEspace : '';
                            LocalStorage_1.IELocalStorage.setItem(lCookieLocalStorage + lGenreEspace, String(false));
                            $(aNode).parent().hide();
                        }
                    };
                }
                ;
                return (IE.jsx.str("div", {
                    class: "cookies-disclaimer"
                }, IE.jsx.str("p", null, `${ObjetTraduction_1.GTraductions.getValeur('PiedPage.CookieInfo_Message_1')} ${ObjetTraduction_1.GTraductions.getValeur('PiedPage.CookieInfo_Message_2', [IE.jsx.str("a", {
                    href: this.options.urlConfidentialite,
                    class: "as-link"
                }, ObjetTraduction_1.GTraductions.getValeur('PiedPage.PolitiqueConfidentialite'))])} `), IE.jsx.str("ie-bouton", {
                    "ie-model": lbtnFermer
                }, ObjetTraduction_1.GTraductions.getValeur('Fermer'))));
            }
            evenementBouton(aParam, aGenreBouton) {
                if (aGenreBouton !== 1) {
                    this.callback.appel(aParam);
                }
            }
            setDonnees(aParam) {
                if (!!aParam) {
                    this.setOptions(aParam);
                }
                this.afficher(this.composePage());
                if (this.masquerFooter) {
                    this.majTabIndexFocusables();
                }
            }
            composePage() {
                const H = [];
                this.masquerFooter = this.masquerBandeauPied();
                if (this.afficherCookieInfo() && !(0,
                AccessApp_1.getApp)().getDemo()) {
                    H.push(this.composeCookiesInfo());
                }
                H.push(this._composeAffichage());
                return H.join('');
            }
            showHideFooter(aNode, aMasquerPied) {
                const lParentContainer = $(aNode).closest('.interface_affV');
                const lFooterWrapper = lParentContainer.find('.footer-wrapper');
                aNode.setAttribute('aria-expanded', aMasquerPied ? 'false' : 'true');
                if (aMasquerPied) {
                    lFooterWrapper.toggleClass('opened closed');
                    lParentContainer.removeClass('with-footer').addClass('no-footer');
                } else {
                    lFooterWrapper.toggleClass('closed opened');
                    lParentContainer.removeClass('no-footer').addClass('with-footer');
                }
                this.majTabIndexFocusables();
                $(window).resize();
            }
            majTabIndexFocusables() {
                ObjetHtml_1.GHtml.getElementsFocusablesDElement(ObjetHtml_1.GHtml.getElement(this.Nom)).forEach( (aNode, aIndex) => {
                    if (aIndex > 0) {
                        $(aNode).attr('tabindex', this.masquerFooter ? -1 : 0);
                    }
                }
                );
            }
            masquerBandeauPied() {
                return this.options.avecBoutonMasquer ? (LocalStorage_1.IELocalStorage.getItem(lCleLocalStorage + '_' + this.etatUtilisateur.GenreEspace) === 'true') : false;
            }
            afficherCookieInfo() {
                let lGenreEspace = this.etatUtilisateur !== undefined ? '_' + this.etatUtilisateur.GenreEspace : '';
                LocalStorage_1.IELocalStorage.getItem(lCookieLocalStorage + lGenreEspace) === null ? LocalStorage_1.IELocalStorage.setItem(lCookieLocalStorage + lGenreEspace, String(true)) : LocalStorage_1.IELocalStorage.getItem(lCookieLocalStorage + lGenreEspace);
                return LocalStorage_1.IELocalStorage.getItem(lCookieLocalStorage + lGenreEspace) === 'true';
            }
            _composeAffichage() {
                const H = [];
                H.push('<footer role="contentinfo" id="', this.Nom, '_footer" class="ObjetBandeauPied disable-dark-mode focusVisibleContrasted ' + (this.avecBoutonPersonnaliseProduit() ? ' bpp-canope' : '') + '"  ie-attr="getAttrFooter">');
                if (this.options.avecBoutonMasquer) {
                    const lshowPied = (aNode) => {
                        $(aNode).eventValidation( () => {
                            if (this.options.avecBoutonMasquer) {
                                this.masquerFooter = !this.masquerFooter;
                                LocalStorage_1.IELocalStorage.setItem(lCleLocalStorage + '_' + this.etatUtilisateur.GenreEspace, String(this.masquerFooter));
                                this.showHideFooter(aNode, this.masquerFooter);
                                IEHtml_1.default.refresh();
                            }
                        }
                        );
                    }
                    ;
                    const lTooltip = () => {
                        return $('.footer-wrapper').hasClass('opened') ? ObjetTraduction_1.GTraductions.getValeur('PiedPage.btnMasquer') : ObjetTraduction_1.GTraductions.getValeur('PiedPage.btnAfficher');
                    }
                    ;
                    H.push(IE.jsx.str("div", {
                        tabindex: "0",
                        role: "button",
                        class: "footer-toggler icon_angle_down",
                        "ie-node": lshowPied,
                        "ie-tooltiplabel": lTooltip,
                        "aria-controls": this.Nom,
                        "aria-expanded": this.masquerFooter ? 'false' : 'true'
                    }));
                }
                const lAvecLibelleHeberge = this.options.siteIndex && this.options.estHebergeEnFrance;
                H.push('<div class="ibp-bloc-left' + (!lAvecLibelleHeberge ? ' bloc-unique' : '') + '">');
                if (this.avecTwitter()) {
                    const lBtn = () => {
                        return {
                            event: () => {
                                this.evenementBouton({
                                    genreCmd: this.getCommande(this.genreCommande.twitter)
                                });
                            }
                        };
                    }
                    ;
                    H.push(IE.jsx.str("ie-btnimage", {
                        role: "link",
                        "ie-model": lBtn,
                        class: "icon_twitter btnImageIcon ibp-command",
                        title: ObjetTraduction_1.GTraductions.getValeur('Commande.SuivrePronoteTwitter.Actif')
                    }), '<hr />');
                }
                if (this.options.mention) {
                    H.push(IE.jsx.str("div", {
                        role: "button",
                        tabindex: "0",
                        class: "ibp-command legal-notice",
                        "ie-node": "btnMention",
                        "aria-haspopup": "dialog"
                    }, ObjetTraduction_1.GTraductions.getValeur('PiedPage.mentionsLegales')));
                    H.push('<hr />');
                }
                if (this.options.urlConfidentialite) {
                    H.push(IE.jsx.str("a", {
                        class: "ibp-command confidentialite",
                        href: this.options.urlConfidentialite
                    }, ObjetTraduction_1.GTraductions.getValeur('PiedPage.Confidentialite')));
                    H.push('<hr />');
                }
                if (this.options.urlDeclarationAccessibilite) {
                    H.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("a", {
                        class: "accessibilite",
                        href: this.options.urlDeclarationAccessibilite
                    }, ObjetTraduction_1.GTraductions.getValeur(this.options.accessibiliteNonConforme ? 'PiedPage.AccessibiliteNonConformite' : 'PiedPage.AccessibiliteConformite')), IE.jsx.str("hr", null)));
                }
                const lGetNodeSite = (aNode) => {
                    $(aNode).eventValidation( () => {
                        window.open(this.options.urlInfosHebergement);
                    }
                    );
                }
                ;
                if (this.avecPlanSite()) {
                    const lbtnPlanSite = (aNode) => {
                        $(aNode).eventValidation( () => {
                            this.actionSurPlanSite();
                        }
                        );
                    }
                    ;
                    H.push(IE.jsx.str("div", {
                        role: "button",
                        tabindex: "0",
                        class: "ibp-command site-map",
                        "ie-node": lbtnPlanSite,
                        "aria-haspopup": "dialog"
                    }, ObjetTraduction_1.GTraductions.getValeur('PiedPage.planSite')), IE.jsx.str("hr", null));
                }
                if (lAvecLibelleHeberge) {
                    H.push(IE.jsx.str("div", {
                        role: "link",
                        tabindex: "0",
                        class: "host-france-container ibp-command",
                        "ie-node": ObjetNavigateur_1.Navigateur.isIOS ? false : lGetNodeSite
                    }, this.espacesISO27001() ? '<span class="certif-27001">' + ObjetTraduction_1.GTraductions.getValeur('PiedPage.SecNumCloud') + '</span>' : '', IE.jsx.str("span", {
                        class: "host-text"
                    }, ObjetTraduction_1.GTraductions.getValeur('PiedPage.hebergementDonneesFrance'))));
                }
                H.push('</div>');
                H.push(IE.jsx.str("div", {
                    role: "link",
                    tabindex: "0",
                    class: "host-france-container ibp-command",
                    "ie-node": ObjetNavigateur_1.Navigateur.isIOS ? false : lGetNodeSite
                }, IE.jsx.str("span", {
                    class: "logo-index-inverse",
                    "aria-label": ObjetTraduction_1.GTraductions.getValeur('PiedPage.IndexEducation')
                })));
                H.push('<div class="knowledge-container">');
                if (this.avecBoutonPersonnaliseProduit()) {
                    H.push(this.composeBoutonPersonnaliseProduit());
                }
                if (this.avecBoutonAccesProfil()) {
                    H.push(this.composeBoutonAccesProfil());
                }
                if (this.avecBoutonPageEtablissement()) {
                    H.push(this.composeBoutonPageEtablissement());
                }
                H.push('</div>');
                H.push('</footer>');
                return H.join('');
            }
        }
        exports._ObjetAffichageBandeauPied = _ObjetAffichageBandeauPied;
    },
    fn: '_interfacebandeaupied.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.InterfaceBandeauPiedCommune = void 0;
        const _InterfaceBandeauPied_1 = require("_InterfaceBandeauPied");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireRedirection_1 = require("UtilitaireRedirection");
        const Tooltip_1 = require("Tooltip");
        class InterfaceBandeauPiedCommune extends _InterfaceBandeauPied_1._ObjetAffichageBandeauPied {
            constructor(...aParams) {
                super(...aParams);
                const lGParametres = GParametres;
                this.options = {
                    mention: lGParametres.publierMentions,
                    urlConfidentialite: lGParametres.urlConfidentialite,
                    siteIndex: lGParametres.urlSiteIndexEducation || 'https://www.index-education.com',
                    urlInfosHebergement: lGParametres.urlInfosHebergement,
                    logoProduitCss: lGParametres.logoProduitCss || '',
                    estHebergeEnFrance: lGParametres.estHebergeEnFrance,
                    avecBoutonMasquer: false,
                    pageEtablissement: lGParametres.PageEtablissement || '',
                    urlDeclarationAccessibilite: lGParametres.urlDeclarationAccessibilite,
                    accessibiliteNonConforme: lGParametres.accessibiliteNonConforme
                };
            }
            construireAffichage() {
                return this.composePage();
            }
            getCommande() {
                return false;
            }
            evenementBouton(aParam, aGenreBouton) {
                return super.evenementBouton(aParam, aGenreBouton);
            }
            avecTwitter() {
                return false;
            }
            avecBoutonAideContextuelle() {
                return false;
            }
            avecBoutonAccesProfil() {
                return false;
            }
            composeBoutonAccesProfil() {
                const H = [];
                return H.join('');
            }
            avecBoutonPersonnaliseProduit() {
                return false;
            }
            composeBoutonPersonnaliseProduit() {
                const H = [];
                return H.join('');
            }
            avecBoutonPageEtablissement() {
                return !!this.options.pageEtablissement;
            }
            jsxNodePageEtab(aNode) {
                $(aNode).eventValidation( () => {
                    let lUrl = window.location.href.split('/');
                    lUrl.pop();
                    lUrl = lUrl.join('/') + '/';
                    window.open(lUrl + this.options.pageEtablissement + new UtilitaireRedirection_1.UtilitaireRedirection().getParametresUrl());
                }
                );
            }
            composeBoutonPageEtablissement() {
                return (IE.jsx.str("div", {
                    tabindex: "0",
                    role: "link",
                    class: "ibp-pill icon_ecole",
                    "aria-label": ObjetTraduction_1.GTraductions.getValeur('PiedPage.PageEtablissement'),
                    "ie-node": this.jsxNodePageEtab.bind(this),
                    "data-tooltip": Tooltip_1.Tooltip.Type.default
                }, IE.jsx.str("p", {
                    class: "help-text"
                }, " ", ObjetTraduction_1.GTraductions.getValeur('PiedPage.PageEtablissement'))));
            }
            espacesISO27001() {
                return true;
            }
        }
        exports.InterfaceBandeauPiedCommune = InterfaceBandeauPiedCommune;
    },
    fn: 'interfacebandeaupiedcommune.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetChoixStrategieSecurisation = void 0;
        require("ObjetChoixStrategieSecurisation.css");
        exports.StylesObjetChoixStrategieSecurisation = {
            ObjetChoixStrategieSecurisation: 'ObjetChoixStrategieSecurisation',
            css_Choix: 'css_Choix',
            choix: 'choix',
            choixInt: 'choix-int',
            css_titreCodePIN: 'css_titreCodePIN',
            cssRegles: 'css-regles',
            css_btnPin: 'css_btnPin',
            cssAffichagePref: 'css-affichage-pref',
            ObjetFenetre_Enregistrement_racine: 'ObjetFenetre_Enregistrement_racine',
            scCompteurInput: 'sc-compteurInput'
        };
    },
    fn: 'objetchoixstrategiesecurisation.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TradDoubleAuth = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TradDoubleAuth = ObjetTraduction_1.TraductionsModule.getModule('DoubleAuth', {
            Retour: '',
            TitreValiderCodePIN: '',
            RenforcerSecurite: '',
            EnSavoirPlus: '',
            EnSavoirPlusTitle: '',
            LegendeStrategie: '',
            LegendeStrategieCompte: '',
            StrategieFort: '',
            StrategieMoyen: '',
            StrategieAucun: '',
            LegendeChoixStratTitre: '',
            LegendeChoixStratPIN: '',
            LegendeChoixStratNotif: '',
            MonCodePIN: '',
            PremierPIN: '',
            ConfirmPIN: '',
            CodeRecuPIN: '',
            NouveauCodePIN: '',
            MessageCreationCodePIN: '',
            EnregistrerSousNom: '',
            NbCaracteresMax_D: '',
            WAI_SaisiePINEtValider_D: '',
            WAI_SaisiePIN_D: '',
            WAI_ConfirmPINEtValider: '',
            WAI_ConfirmPIN: '',
            WAI_CodeReinitValide: '',
            WAI_MonCodeValide: '',
            Effacer: '',
            InfoSaisiePIN: '',
            Suivant: '',
            Annuler: '',
            PersonnesConfiance: '',
            NouvelAppareilRenseignerPIN: '',
            ProcedureReInitialisationCodePIN_S: '',
            WAI_ProcedureReInitialisationCodePIN_DS: '',
            WAI_ControleCodePINCourant: '',
            WAI_ControleCodePINCourantFixe: '',
            TitreReInitialisationCodePIN: '',
            ReinitialiserMonCodePIN: '',
            HintReinitialiserMonCodePIN: '',
            EMailReinitialisationPIN_S: '',
            NouvelAppareilOubliPIN: '',
            NouvelAppareilTentatives: '',
            ValiderTitreInconnu: '',
            ValiderInfoPIN: '',
            ValiderCodeValide: '',
            ValiderCodePinInvalide: '',
            Details: '',
            Client: '',
            Mobile: '',
            Navigateur: '',
            EnregistrerAppareilTitre: '',
            EnregistrerAppareilInfoIdentification: '',
            EnregistrerAppareilRappelNotif: '',
            EnregistrerAppareilSuggestions: '',
            EnregistrerAppareilNommerAppareil: '',
            EnregistrerAppareilResterInconnu: '',
            EnregistrerAppareilNomDejaUtilise: '',
            LibelleAppareilDejaUtilise: '',
            EnregistrerAppareilNomInvalide: '',
            Message_SourceConnexion_1: '',
            Message_SourceConnexion_2: '',
            Message_SourceConnexion_3_S: '',
            Message_SourceConnexion_4: '',
            FAQEnregistrement: '',
            LienFAQPIN: '',
            LienFAQEnregistrement: '',
            TitreFiche: '',
            PinInsuffisant: '',
            PinNonConfirme: '',
            PrefListeLibelle: '',
            PrefListeAppareil: '',
            PrefListeDate: '',
            PrefListeIcone: '',
            PrefChoisirDEnregistrer: '',
            PrefPensezASupprimer: '',
            PrefConfirmerSupprimer: '',
            AucunAppareilEnregistre: '',
            RenforcerSecuTitre: '',
            RenforcerSecuDefinirPIN: '',
            RenforcerSecuInfoPIN: '',
            RenforcerButtonModifier: '',
            AppareilsIdentifies: '',
            SecuriteRenforcee: ''
        });
        exports.TradDoubleAuth = TradDoubleAuth;
    },
    fn: 'traductionsdoubleauth.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetChoixStrategieSecurisation = void 0;
        require("ObjetChoixStrategieSecurisation.css");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const jsx_1 = require("jsx");
        const TraductionsDoubleAuth_1 = require("TraductionsDoubleAuth");
        class ObjetChoixStrategieSecurisation extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.options = {
                    modeAffichage: ObjetChoixStrategieSecurisation.typeAffichage.prefUtilisateur,
                    modesPossibles: new TypeEnsembleNombre_1.TypeEnsembleNombre(),
                    modeSecurisationParDefaut: TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN,
                    callbackChoix: null
                };
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    rbChoixStrat: {
                        getValue: function(aGenre) {
                            if (aInstance.donnees.mode === aGenre) {
                                return true;
                            }
                            const lModesPossibles = aInstance.options.modesPossibles;
                            switch (aGenre) {
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN:
                                return (aInstance.donnees.mode === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_PasEncoreChoisi || (!lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement) && !lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive)));
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement:
                                return ((!lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN) && [TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN, TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_PasEncoreChoisi].indexOf(aInstance.donnees.mode) >= 0) || (!lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive) && aInstance.donnees.mode === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive));
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive:
                                return !lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN) && !lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement);
                            }
                            return false;
                        },
                        setValue: function(aGenre) {
                            aInstance.options.callbackChoix(aGenre);
                        },
                        getDisabled: aInstance._getDisabled.bind(aInstance)
                    },
                    btnPIN: {
                        event: function() {
                            aInstance.options.callbackChoix(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN, true);
                        },
                        getDisabled: function() {
                            return aInstance.donnees.mode !== TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN || aInstance._getDisabled();
                        }
                    },
                    getAttrRegles(aGenre) {
                        return {
                            class: aInstance.donnees.mode !== aGenre ? 'sr-only' : null,
                            'aria-hidden': aInstance.donnees.mode !== aGenre ? 'true' : null
                        };
                    }
                });
            }
            setDonnees(aDonnees) {
                this.donnees = aDonnees;
                this.afficher(this._construire());
            }
            _getDisabled() {
                var _a, _b;
                return !!this.donnees.nonEditable || ((_b = (_a = this.options).getDisabled) === null || _b === void 0 ? void 0 : _b.call(_a));
            }
            _construire() {
                const lIdDescrFort = `${this.Nom}_descr_f`;
                const lIdDescrMoyen = `${this.Nom}_descr_m`;
                return (IE.jsx.str("div", {
                    class: ['ObjetChoixStrategieSecurisation', this.options.modeAffichage === ObjetChoixStrategieSecurisation.typeAffichage.prefUtilisateur ? 'css-affichage-pref' : '']
                }, IE.jsx.str("fieldset", {
                    class: "m-bottom-l"
                }, IE.jsx.str("legend", null, this.options.modeAffichage === ObjetChoixStrategieSecurisation.typeAffichage.prefUtilisateur ? TraductionsDoubleAuth_1.TradDoubleAuth.LegendeStrategieCompte : TraductionsDoubleAuth_1.TradDoubleAuth.LegendeStrategie), IE.jsx.str("div", {
                    class: "css_Choix"
                }, (H) => {
                    TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentificationUtil.getOrdreModeDoubleAuth(this.options.modeSecurisationParDefaut).forEach( (aMode) => {
                        switch (aMode) {
                        case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN:
                            if (this.options.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN)) {
                                H.push(IE.jsx.str("div", {
                                    class: "choix"
                                }, IE.jsx.str("ie-radio", {
                                    class: "css_rbMode as-chips",
                                    "ie-model": (0,
                                    jsx_1.jsxFuncAttr)('rbChoixStrat', [TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN]),
                                    "aria-describedby": lIdDescrFort
                                }, IE.jsx.str("span", {
                                    class: "choix-int"
                                }, IE.jsx.str("i", {
                                    class: "icon_star",
                                    role: "presentation"
                                }), IE.jsx.str("i", {
                                    class: "icon_star",
                                    role: "presentation"
                                }), IE.jsx.str("span", null, TraductionsDoubleAuth_1.TradDoubleAuth.StrategieFort)))));
                            }
                            break;
                        case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement:
                            if (this.options.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement)) {
                                H.push(IE.jsx.str("div", {
                                    class: "choix"
                                }, IE.jsx.str("ie-radio", {
                                    class: "css_rbMode as-chips",
                                    "ie-model": (0,
                                    jsx_1.jsxFuncAttr)('rbChoixStrat', [TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement]),
                                    "aria-describedby": lIdDescrMoyen
                                }, IE.jsx.str("span", {
                                    class: "choix-int"
                                }, IE.jsx.str("i", {
                                    class: "icon_star",
                                    role: "presentation"
                                }), IE.jsx.str("span", null, TraductionsDoubleAuth_1.TradDoubleAuth.StrategieMoyen)))));
                            }
                            break;
                        case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive:
                            if (this.options.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive)) {
                                H.push(IE.jsx.str("div", {
                                    class: "choix"
                                }, IE.jsx.str("ie-radio", {
                                    class: "css_rbMode as-chips",
                                    "ie-model": (0,
                                    jsx_1.jsxFuncAttr)('rbChoixStrat', [TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive])
                                }, IE.jsx.str("span", {
                                    class: "choix-int"
                                }, TraductionsDoubleAuth_1.TradDoubleAuth.StrategieAucun))));
                            }
                            break;
                        default:
                            ;
                        }
                    }
                    );
                }
                )), IE.jsx.str("div", {
                    class: "css-regles"
                }, this.construireRegles(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN, lIdDescrFort), this.construireRegles(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement, lIdDescrMoyen)), this.options.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN) && this.options.modeAffichage === ObjetChoixStrategieSecurisation.typeAffichage.prefUtilisateur ? (IE.jsx.str("div", {
                    class: "css_btnPin"
                }, IE.jsx.str("ie-bouton", {
                    "ie-model": "btnPIN",
                    "aria-haspopup": "dialog"
                }, TraductionsDoubleAuth_1.TradDoubleAuth.RenforcerButtonModifier))) : '', IE.jsx.str("ie-chips", {
                    href: GParametres.urlTutoVideoSecurite,
                    target: "_blank",
                    class: "css_lienVideo iconic icon_question_sign",
                    "ie-tooltiplabel": TraductionsDoubleAuth_1.TradDoubleAuth.EnSavoirPlusTitle
                }, TraductionsDoubleAuth_1.TradDoubleAuth.EnSavoirPlus)));
            }
            construireRegles(aMode, aId) {
                return (IE.jsx.str("div", {
                    id: aId,
                    "ie-attr": (0,
                    jsx_1.jsxFuncAttr)('getAttrRegles', aMode)
                }, IE.jsx.str("span", null, TraductionsDoubleAuth_1.TradDoubleAuth.LegendeChoixStratTitre, " :"), IE.jsx.str("ul", null, aMode !== TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN ? '' : IE.jsx.str("li", null, IE.jsx.str("i", {
                    class: "icon_ok ico-green m-right",
                    role: "presentation"
                }), TraductionsDoubleAuth_1.TradDoubleAuth.LegendeChoixStratPIN), IE.jsx.str("li", null, IE.jsx.str("i", {
                    class: "icon_ok ico-green m-right",
                    role: "presentation"
                }), TraductionsDoubleAuth_1.TradDoubleAuth.LegendeChoixStratNotif))));
            }
        }
        exports.ObjetChoixStrategieSecurisation = ObjetChoixStrategieSecurisation;
        ObjetChoixStrategieSecurisation.typeAffichage = {
            prefUtilisateur: 'prefUtilisateur',
            securisation: 'securisation'
        };
    },
    fn: 'objetchoixstrategiesecurisation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetSaisieCodePIN = void 0;
        require("ObjetSaisieCodePIN.css");
        exports.StylesObjetSaisieCodePIN = {
            ObjetSaisieCodePIN: 'ObjetSaisieCodePIN',
            scp_zone: 'scp_zone',
            scpEtape: 'scp-etape',
            scp_inputActif: 'scp_inputActif',
            textPin: 'text-pin',
            scp_ecarteur_flex: 'scp_ecarteur_flex',
            scp_messagePin: 'scp_messagePin',
            icon_ok: 'icon_ok',
            icon_remove: 'icon_remove',
            btPinOublie: 'bt-pin-oublie',
            scpVisuPin: 'scp-visu-pin',
            disabled: 'disabled',
            scpVisuPinLabel: 'scp-visu-pin-label',
            scpVisuPinImage: 'scp-visu-pin-image',
            scpBlocsPin: 'scp-blocs-pin',
            scpPIN: 'scp-PIN',
            active: 'active',
            scp_boutons: 'scp_boutons',
            scpValider: 'scp-valider',
            scp_btnclear: 'scp_btnclear',
            scp_btnvalider: 'scp_btnvalider',
            scpReinitPIN: 'scp-reinitPIN',
            scpLinkPied: 'scp-link-pied'
        };
    },
    fn: 'objetsaisiecodepin.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetSaisieCodePIN = void 0;
        require("ObjetSaisieCodePIN.css");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const SecurisationCompte = require("TypeSecurisationCompte");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const ObjetRequeteSecurisationCompte_1 = require("ObjetRequeteSecurisationCompte");
        const jsx_1 = require("jsx");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ToucheClavier_1 = require("ToucheClavier");
        const TraductionsDoubleAuth_1 = require("TraductionsDoubleAuth");
        const AccessApp_1 = require("AccessApp");
        var TypeEtape;
        (function(TypeEtape) {
            TypeEtape["val"] = "val";
            TypeEtape["confirm"] = "confirm";
            TypeEtape["controlePINOuReinit"] = "controlePINOuReinit";
            TypeEtape["finValidation"] = "finValidation";
        }
        )(TypeEtape || (TypeEtape = {}));
        const C_ReinitPINLength = 6;
        class ObjetSaisieCodePIN extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.options = {
                    classeRequete: null,
                    modePIN: ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN,
                    avecReinitPIN: false,
                    emailOcculte: ''
                };
                this.codePin = {};
                this._init();
                this.Actif = true;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    avecBoutons(aEtape) {
                        return aInstance.codePin.etapeConfirmation === aEtape;
                    },
                    btnVal: {
                        event(aVal, aEtape) {
                            switch (aEtape) {
                            case TypeEtape.val:
                                aInstance.codePin.val += aVal;
                                break;
                            case TypeEtape.confirm:
                                aInstance.codePin.confirm += aVal;
                                break;
                            case TypeEtape.controlePINOuReinit:
                                {
                                    aInstance.codePin.valControlePIN += aVal;
                                    break;
                                }
                            default:
                                ;
                            }
                            const lNb = aInstance.getNbPIN(aEtape);
                            if (lNb > 0 && aInstance.getCodePINDEtape(aEtape).length >= lNb) {
                                if (aInstance._getDisabled(aEtape)) {
                                    return;
                                }
                                aInstance._surValider();
                            }
                        },
                        node(aVal, aEtape) {
                            $(this.node).on('keyup', function(aEvent) {
                                if (aEvent.which === ToucheClavier_1.ToucheClavier.Backspace) {
                                    aInstance.clearBtn(aEtape);
                                    aInstance.$refreshSelf();
                                }
                            });
                        },
                        getDisabled(aVal, aEtape) {
                            return aInstance._getDisabled(aEtape);
                        }
                    },
                    btnClear: {
                        event(aEtape) {
                            aInstance.clearBtn(aEtape);
                        },
                        getDisabled(aEtape) {
                            return aInstance._getDisabled(aEtape, true);
                        }
                    },
                    btnValider: {
                        event(aEtape) {
                            aInstance._surValider();
                        },
                        getDisabled(aEtape) {
                            if (aInstance._getDisabled(aEtape)) {
                                return true;
                            }
                            if (aInstance.getCodePINDEtape(aEtape).length < SecurisationCompte.C_MinPinLength) {
                                return true;
                            }
                            return false;
                        }
                    },
                    btnPINOubli: {
                        async event() {
                            const lJSONReponse = await new (aInstance.options.classeRequete)(aInstance).lancerRequete({
                                action: TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_DemandeReinitialisationPIN
                            });
                            if (!lJSONReponse.ok) {
                                return;
                            }
                            await (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: TraductionsDoubleAuth_1.TradDoubleAuth.EMailReinitialisationPIN_S.format([aInstance.options.emailOcculte])
                            });
                            const lResultFenetre = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_ReinitPIN, {
                                pere: this
                            }).afficher(aInstance.options.emailOcculte);
                            if (lResultFenetre && lResultFenetre.resultReinitPIN) {
                                if (lResultFenetre.resultReinitPIN.reinitPIN_OK) {
                                    aInstance.callback.appel(lResultFenetre.resultReinitPIN);
                                }
                            }
                        }
                    },
                    getHtmlMessagePin: function() {
                        return aInstance._construireMessagePINVerification();
                    },
                    getClassContVisuPIN(aEtape) {
                        return aInstance.codePin.etapeConfirmation !== aEtape ? 'disabled' : '';
                    },
                    getClassVisuPIN(aEtape) {
                        return aInstance.codePin.etapeConfirmation === aEtape ? 'active' : '';
                    },
                    getHtmlVisuPIN(aEtape, aNbPIN) {
                        let lNbSaisie = aInstance.getCodePINDEtape(aEtape).length;
                        if (aNbPIN > 0) {
                            let lResult = '';
                            for (let lNb = 0; lNb < aNbPIN; lNb++) {
                                lResult += (IE.jsx.str("span", {
                                    class: "scp-PIN"
                                }, IE.jsx.str("i", {
                                    class: ['icon_rond', lNb >= lNbSaisie ? 'hide' : ''],
                                    role: "presentation"
                                })));
                            }
                            return lResult;
                        } else {
                            if (lNbSaisie > 0) {
                                let lResult = '';
                                for (let lNb = 0; lNb < lNbSaisie; lNb++) {
                                    lResult += IE.jsx.str("i", {
                                        class: "icon_rond",
                                        role: "presentation"
                                    });
                                }
                                return lResult;
                            }
                            return IE.jsx.str("i", {
                                class: "icon_rond hide",
                                role: "presentation"
                            });
                        }
                    },
                    getHtmlAlertControleInitialPIN() {
                        if (aInstance.codePin.saisiePinVerifie) {
                            switch (aInstance.options.modePIN) {
                            case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN:
                                return TraductionsDoubleAuth_1.TradDoubleAuth.WAI_CodeReinitValide;
                            case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN:
                                return TraductionsDoubleAuth_1.TradDoubleAuth.WAI_MonCodeValide;
                            default:
                                ;
                            }
                        }
                        return '';
                    }
                });
            }
            setDonnees(aDonnees) {
                this.donnees = aDonnees;
                this._init();
                this.codePin.valControlePIN = '';
                if (this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN || this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN) {
                    this.codePin.etapeConfirmation = TypeEtape.controlePINOuReinit;
                }
                this.afficher(this._construire());
            }
            surValider() {
                this._surValider(true);
            }
            clearBtn(aEtape) {
                if (aEtape === TypeEtape.controlePINOuReinit) {
                    this._init(true);
                } else {
                    const lEtape = this.codePin.etapeConfirmation;
                    this._init();
                    if (this.codePin.etapeConfirmation !== lEtape) {
                        this.focusSurClavierVisible();
                    }
                }
            }
            _init(aInitPourReinit=false) {
                if (aInitPourReinit) {
                    Object.assign(this.codePin, {
                        valControlePIN: '',
                        etapeConfirmation: TypeEtape.controlePINOuReinit,
                        saisiePinVerifie: false
                    });
                } else {
                    Object.assign(this.codePin, {
                        val: '',
                        confirm: '',
                        etapeConfirmation: TypeEtape.val,
                        saisiePinVerifie: false
                    });
                    this.callback.appel(null);
                }
            }
            getCodePINDEtape(aEtape) {
                switch (aEtape) {
                case TypeEtape.val:
                    return this.codePin.val;
                case TypeEtape.confirm:
                    return this.codePin.confirm;
                case TypeEtape.controlePINOuReinit:
                    return this.codePin.valControlePIN;
                }
                ;return '';
            }
            _construireMessagePINVerification() {
                if (this.codePin.saisiePinVerifie) {
                    return [IE.jsx.str("i", {
                        class: "icon_ok",
                        role: "presentation"
                    }), TraductionsDoubleAuth_1.TradDoubleAuth.ValiderCodeValide].join('');
                }
                if (this.codePin.nbEchecVerifie > 0) {
                    const H = [];
                    if (this.codePin.nbEchecVerifie >= SecurisationCompte.C_MaxPinRetry) {
                        H.push(TraductionsDoubleAuth_1.TradDoubleAuth.ValiderCodePinInvalide);
                    } else {
                        H.push(IE.jsx.str("i", {
                            class: "icon_remove",
                            role: "presentation"
                        }), TraductionsDoubleAuth_1.TradDoubleAuth.NouvelAppareilTentatives.format([SecurisationCompte.C_MaxPinRetry - this.codePin.nbEchecVerifie]));
                    }
                    return H.join('');
                }
            }
            async _surValider(aAppelValiderExterne) {
                const lEstControleReInitPIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN && this.codePin.etapeConfirmation === TypeEtape.controlePINOuReinit;
                const lEstControleAncienPIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN && this.codePin.etapeConfirmation === TypeEtape.controlePINOuReinit;
                if (this.options.modePIN !== ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN && !lEstControleReInitPIN && !lEstControleAncienPIN) {
                    if (this.codePin.etapeConfirmation === TypeEtape.val) {
                        if (this.getNbPIN(TypeEtape.val) === 0 && this.codePin.val.length < SecurisationCompte.C_MinPinLength) {
                            await (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: TraductionsDoubleAuth_1.TradDoubleAuth.PinInsuffisant.format([SecurisationCompte.C_MinPinLength])
                            });
                            return;
                        }
                        this.codePin.etapeConfirmation = TypeEtape.confirm;
                        await this.focusSurClavierVisible();
                        return;
                    }
                    if (this.codePin.etapeConfirmation === TypeEtape.confirm) {
                        if (this.codePin.val !== this.codePin.confirm) {
                            this.codePin.confirm = '';
                            await (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: TraductionsDoubleAuth_1.TradDoubleAuth.PinNonConfirme
                            });
                            return;
                        }
                        this.codePin.etapeConfirmation = TypeEtape.finValidation;
                    }
                }
                if (this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN || lEstControleReInitPIN || lEstControleAncienPIN) {
                    const lValPIN = lEstControleReInitPIN || lEstControleAncienPIN ? this.codePin.valControlePIN : this.codePin.val;
                    if (aAppelValiderExterne && !lValPIN) {
                        await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            message: TraductionsDoubleAuth_1.TradDoubleAuth.InfoSaisiePIN
                        });
                        return;
                    }
                    const lReponseJSON = await new (this.options.classeRequete)(this).lancerRequete({
                        action: lEstControleReInitPIN ? TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierCodeReinitialisationPIN : TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierPIN,
                        codePin: lValPIN
                    });
                    try {
                        if (lReponseJSON && lReponseJSON.result) {
                            this.codePin.saisiePinVerifie = true;
                            if (lEstControleReInitPIN || lEstControleAncienPIN) {
                                this.callback.appel({
                                    codePINVerifReinit: lValPIN
                                });
                                this.codePin.etapeConfirmation = TypeEtape.val;
                                await this.focusSurClavierVisible();
                                return;
                            } else {
                                this.callback.appel({
                                    codePin: lValPIN
                                }, aAppelValiderExterne);
                            }
                        } else {
                            throw new Error('echec securisation');
                        }
                    } catch (e) {
                        this._init(lEstControleReInitPIN || lEstControleAncienPIN);
                        this.codePin.nbEchecVerifie = this.codePin.nbEchecVerifie || 0;
                        this.codePin.nbEchecVerifie += 1;
                        const lAvecDeco = this.codePin.nbEchecVerifie >= SecurisationCompte.C_MaxPinRetry;
                        await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            message: TraductionsDoubleAuth_1.TradDoubleAuth.ValiderCodePinInvalide + (lAvecDeco ? '' : '<br>' + TraductionsDoubleAuth_1.TradDoubleAuth.NouvelAppareilTentatives.format([SecurisationCompte.C_MaxPinRetry - this.codePin.nbEchecVerifie]))
                        });
                        await this.focusSurClavierVisible();
                        if (lAvecDeco) {
                            return UtilitaireDeconnexion_1.UtilitaireDeconnexion.deconnexion();
                        }
                    }
                } else {
                    this.callback.appel({
                        codePin: this.codePin.val
                    });
                }
            }
            async focusSurClavierVisible() {
                await this.$refreshSelf();
                $(`#${this.Nom.escapeJQ()} .scp_boutons button`).first().trigger('focus');
            }
            _getDisabled(aEtape, aEstBtnClear) {
                if (!this.Actif) {
                    return true;
                }
                let lDisabled = this.donnees.mode !== TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN;
                if (lDisabled) {
                    this._init();
                    this.$refreshSelf();
                }
                if (this.donnees.mode === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN && this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN && (this.codePin.saisiePinVerifie || this.codePin.nbEchecVerifie >= SecurisationCompte.C_MaxPinRetry)) {
                    lDisabled = true;
                }
                if (aEstBtnClear !== true && this.donnees.mode === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN && this.codePin.etapeConfirmation === TypeEtape.finValidation) {
                    lDisabled = true;
                }
                return lDisabled;
            }
            _construire() {
                const lControlePIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN;
                const lControlerModifierPIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN;
                const lReinitPIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN;
                const lIdTitre = `${this.Nom}_titre`;
                let lTitre = '';
                switch (this.options.modePIN) {
                case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN:
                case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN:
                    {
                        lTitre = this.options.estAffCompte || lControlerModifierPIN ? TraductionsDoubleAuth_1.TradDoubleAuth.NouvelAppareilRenseignerPIN : TraductionsDoubleAuth_1.TradDoubleAuth.ValiderInfoPIN;
                        break;
                    }
                case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN:
                    lTitre = TraductionsDoubleAuth_1.TradDoubleAuth.ProcedureReInitialisationCodePIN_S.format(this.options.emailOcculte);
                    break;
                case ObjetSaisieCodePIN.ModeSaisieValiderPIN.DefinirPIN:
                    lTitre = TraductionsDoubleAuth_1.TradDoubleAuth.MessageCreationCodePIN;
                    break;
                default:
                    ;
                }
                const lNbPIN_val = this.getNbPIN(TypeEtape.val);
                const lAriaLabelVal = this.getlabelCodePINDEtape(TypeEtape.val) + ' : ' + (lNbPIN_val === 0 ? TraductionsDoubleAuth_1.TradDoubleAuth.WAI_SaisiePINEtValider_D.format([SecurisationCompte.C_MinPinLength]) : TraductionsDoubleAuth_1.TradDoubleAuth.WAI_SaisiePIN_D.format([lNbPIN_val]));
                return (IE.jsx.str("div", {
                    class: "ObjetSaisieCodePIN"
                }, lTitre ? IE.jsx.str("span", {
                    id: lIdTitre
                }, lTitre) : '', IE.jsx.str("div", {
                    class: "scp_zone",
                    role: lTitre ? 'group' : false,
                    "aria-labelledby": lTitre ? lIdTitre : false
                }, () => {
                    if (lReinitPIN || lControlerModifierPIN) {
                        const lAriaLabel = lReinitPIN ? TraductionsDoubleAuth_1.TradDoubleAuth.WAI_ProcedureReInitialisationCodePIN_DS.format([C_ReinitPINLength, this.options.emailOcculte]) : lNbPIN_val === 0 ? TraductionsDoubleAuth_1.TradDoubleAuth.WAI_ControleCodePINCourant : TraductionsDoubleAuth_1.TradDoubleAuth.WAI_ControleCodePINCourantFixe;
                        return (IE.jsx.str("div", {
                            class: "scp-etape",
                            role: "group",
                            "aria-label": lAriaLabel
                        }, this.construireVisuCode(TypeEtape.controlePINOuReinit), this.construireClavier(TypeEtape.controlePINOuReinit), IE.jsx.str("span", {
                            class: "sr-only",
                            role: "alert",
                            "ie-html": "getHtmlAlertControleInitialPIN"
                        })));
                    }
                    return '';
                }
                , IE.jsx.str("div", {
                    class: "scp-etape",
                    role: "group",
                    "aria-label": lAriaLabelVal.trim()
                }, this.construireVisuCode(TypeEtape.val), this.construireClavier(TypeEtape.val), lControlePIN ? IE.jsx.str("div", {
                    "ie-html": "getHtmlMessagePin",
                    class: "scp_messagePin"
                }) : ''), !lControlePIN ? (IE.jsx.str("div", {
                    class: "scp-etape",
                    role: "group",
                    "aria-label": this.getNbPIN(TypeEtape.confirm) === 0 ? TraductionsDoubleAuth_1.TradDoubleAuth.WAI_ConfirmPINEtValider : TraductionsDoubleAuth_1.TradDoubleAuth.WAI_ConfirmPIN
                }, this.construireVisuCode(TypeEtape.confirm), this.construireClavier(TypeEtape.confirm))) : ''), () => {
                    if (!this.options.avecReinitPIN && lControlePIN) {
                        return IE.jsx.str("p", null, TraductionsDoubleAuth_1.TradDoubleAuth.NouvelAppareilOubliPIN);
                    }
                }
                , () => {
                    if (GParametres.urlFAQEnregistrementDoubleAuth && !this.options.estAffCompte && (lControlePIN || this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.DefinirPIN)) {
                        return IE.jsx.str("ie-chips", {
                            class: "scp-link-pied iconic icon_question_sign",
                            href: GParametres.urlFAQEnregistrementDoubleAuth
                        }, TraductionsDoubleAuth_1.TradDoubleAuth.LienFAQPIN);
                    }
                }
                ));
            }
            getNbPIN(aEtape) {
                if (aEtape === TypeEtape.controlePINOuReinit && this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN) {
                    return C_ReinitPINLength;
                }
                return GEtatUtilisateur.getCodePINFixe() ? SecurisationCompte.C_PinFixeLength : 0;
            }
            getlabelCodePINDEtape(aEtape) {
                switch (aEtape) {
                case TypeEtape.val:
                    {
                        switch (this.options.modePIN) {
                        case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN:
                        case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN:
                            return TraductionsDoubleAuth_1.TradDoubleAuth.NouveauCodePIN;
                        case ObjetSaisieCodePIN.ModeSaisieValiderPIN.DefinirPIN:
                            return TraductionsDoubleAuth_1.TradDoubleAuth.PremierPIN;
                        default:
                            return TraductionsDoubleAuth_1.TradDoubleAuth.MonCodePIN;
                        }
                    }
                case TypeEtape.confirm:
                    {
                        return TraductionsDoubleAuth_1.TradDoubleAuth.ConfirmPIN;
                    }
                case TypeEtape.controlePINOuReinit:
                    {
                        return this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN ? TraductionsDoubleAuth_1.TradDoubleAuth.CodeRecuPIN : TraductionsDoubleAuth_1.TradDoubleAuth.MonCodePIN;
                    }
                }
                ;return '';
            }
            construireVisuCode(aEtape) {
                const lTitre = this.getlabelCodePINDEtape(aEtape);
                const lNbPIN = this.getNbPIN(aEtape);
                return (IE.jsx.str("div", {
                    class: "scp-visu-pin",
                    "aria-hidden": "true",
                    "ie-class": (0,
                    jsx_1.jsxFuncAttr)('getClassContVisuPIN', aEtape)
                }, IE.jsx.str("span", {
                    class: "scp-visu-pin-label"
                }, lTitre, " :"), IE.jsx.str("span", {
                    class: ['scp-visu-pin-image', lNbPIN > 0 ? 'scp-blocs-pin' : '']
                }, IE.jsx.str("span", {
                    "ie-html": (0,
                    jsx_1.jsxFuncAttr)('getHtmlVisuPIN', [aEtape, lNbPIN]),
                    "ie-class": (0,
                    jsx_1.jsxFuncAttr)('getClassVisuPIN', aEtape)
                }))));
            }
            construireClavier(aEtape) {
                const lNbPIN = this.getNbPIN(aEtape);
                return (IE.jsx.str("ul", {
                    class: ['scp_boutons', lNbPIN === 0 ? 'scp-valider' : ''],
                    "ie-if": (0,
                    jsx_1.jsxFuncAttr)('avecBoutons', aEtape)
                }, (aTab) => {
                    const lTab = [];
                    for (let i = 0; i < 10; i++) {
                        lTab.push(i);
                    }
                    while (lTab.length > 0) {
                        const lIndice = Math.floor(Math.random() * lTab.length);
                        const lVal = lTab[lIndice];
                        lTab.splice(lIndice, 1);
                        aTab.push(IE.jsx.str("li", null, IE.jsx.str("ie-bouton", {
                            class: "themeBoutonNeutre",
                            "ie-model": (0,
                            jsx_1.jsxFuncAttr)('btnVal', [lVal, aEtape])
                        }, lVal)));
                    }
                    aTab.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("li", {
                        class: "scp_btnclear"
                    }, IE.jsx.str("ie-bouton", {
                        class: "themeBoutonNeutre",
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnClear', aEtape),
                        title: TraductionsDoubleAuth_1.TradDoubleAuth.Effacer,
                        "aria-label": TraductionsDoubleAuth_1.TradDoubleAuth.Effacer
                    }, IE.jsx.str("i", {
                        class: "icon_delete_clavier_mobile",
                        role: "presentation"
                    }))), lNbPIN === 0 ? IE.jsx.str("li", {
                        class: "scp_btnvalider"
                    }, IE.jsx.str("ie-bouton", {
                        class: "themeBoutonPrimaire",
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnValider', aEtape)
                    }, ObjetTraduction_1.GTraductions.getValeur('Valider'))) : ''));
                    if (aEtape === TypeEtape.val && this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN && this.options.avecReinitPIN) {
                        aTab.push(IE.jsx.str("li", {
                            class: "scp-reinitPIN"
                        }, IE.jsx.str("ie-bouton", {
                            class: "themeBoutonNeutre small-bt",
                            "ie-model": 'btnPINOubli',
                            title: TraductionsDoubleAuth_1.TradDoubleAuth.HintReinitialiserMonCodePIN,
                            "aria-haspopup": "dialog"
                        }, TraductionsDoubleAuth_1.TradDoubleAuth.ReinitialiserMonCodePIN)));
                    }
                }
                ));
            }
        }
        exports.ObjetSaisieCodePIN = ObjetSaisieCodePIN;
        (function(ObjetSaisieCodePIN) {
            let ModeSaisieValiderPIN;
            (function(ModeSaisieValiderPIN) {
                ModeSaisieValiderPIN["ControlePIN"] = "ControlePIN";
                ModeSaisieValiderPIN["ControlerModifierPIN"] = "ControlerModifierPIN";
                ModeSaisieValiderPIN["DefinirPIN"] = "DefinirPIN";
                ModeSaisieValiderPIN["ReInitPIN"] = "ReInitPIN";
            }
            )(ModeSaisieValiderPIN = ObjetSaisieCodePIN.ModeSaisieValiderPIN || (ObjetSaisieCodePIN.ModeSaisieValiderPIN = {}));
        }
        )(ObjetSaisieCodePIN || (exports.ObjetSaisieCodePIN = ObjetSaisieCodePIN = {}));
        class ObjetFenetre_ReinitPIN extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.resultReinitPIN = {};
                this.setOptionsFenetre({
                    titre: TraductionsDoubleAuth_1.TradDoubleAuth.TitreReInitialisationCodePIN,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler')],
                    addParametresValidation: () => {
                        return {
                            resultReinitPIN: this.resultReinitPIN
                        };
                    }
                });
            }
            construireInstances() {
                this.identPIN = this.add(ObjetSaisieCodePIN, (aParams) => {
                    if (aParams && aParams.codePINVerifReinit) {
                        this.resultReinitPIN.codePINVerifReinit = aParams.codePINVerifReinit;
                    } else if (aParams) {
                        this.resultReinitPIN.codePin = aParams.codePin;
                        this.resultReinitPIN.reinitPIN_OK = true;
                        this.surValidation(undefined);
                    }
                }
                );
            }
            composeContenu() {
                return IE.jsx.str("div", {
                    id: this.getNomInstance(this.identPIN)
                });
            }
            afficher(aEmailOcculte) {
                this.getInstance(this.identPIN).setOptions({
                    classeRequete: ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth,
                    modePIN: ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN,
                    emailOcculte: aEmailOcculte
                }).setDonnees({
                    mode: TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN
                });
                return super.afficher();
            }
        }
    },
    fn: 'objetsaisiecodepin.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetSaisieMotDePasseCP = void 0;
        require("ObjetSaisieMotDePasseCP.css");
        exports.StylesObjetSaisieMotDePasseCP = {
            ObjetSaisieMotDePasseCP: 'ObjetSaisieMotDePasseCP',
            BlocMessageEnTete: 'BlocMessageEnTete',
            btnImage: 'btnImage',
            BlocContenu: 'BlocContenu',
            BlocMDP: 'BlocMDP',
            asInput: 'as-input',
            isDirty: 'is-dirty',
            confirmWrapper: 'confirm-wrapper',
            isDisabled: 'is-disabled',
            BlocValidation: 'BlocValidation',
            messageInvalide: 'message-invalide',
            linkIcon: 'link-icon'
        };
    },
    fn: 'objetsaisiemotdepassecp.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TLienPolitiqueMotDePasse = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        exports.TLienPolitiqueMotDePasse = {
            getLien: function() {
                return (IE.jsx.str("a", {
                    href: ObjetTraduction_1.GTraductions.getValeur('LienPolitiqueMotDePasse.UrlFAQMotDePasse'),
                    target: "_blank"
                }, ObjetTraduction_1.GTraductions.getValeur('LienPolitiqueMotDePasse.ConsulterNotrePolitiqueSecuriteMDP')));
            }
        };
    },
    fn: 'lienpolitiquemotdepasse.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetSaisieMotDePasseCP = void 0;
        require("ObjetSaisieMotDePasseCP.css");
        const IEHtml_1 = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const LienPolitiqueMotDePasse_1 = require("LienPolitiqueMotDePasse");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ToucheClavier_1 = require("ToucheClavier");
        const ValidationMotDePasse_1 = require("ValidationMotDePasse");
        const GUID_1 = require("GUID");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const AccessApp_1 = require("AccessApp");
        const C_TailleMaxMotDePasse = 32;
        const C_TailleMinLogin = 2;
        const C_TailleMaxLogin = 128;
        class ObjetSaisieMotDePasseCP extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.avecErreurMDPActuel = false;
                this.avecErreurMDPNouveau = false;
                this.options = {
                    classRequeteSaisie: null,
                    donneesReglesMdp: null,
                    callbackApresValidation: null,
                    callbackFocusValidation: null,
                    setReglesMDP: null,
                    forcerModificationMdp: false,
                    avecMDPActuel: true,
                    avecReglesMDP: true,
                    avecMdpNouveauDifferentDeActuel: true,
                    pourMobile: false,
                    attrInputActuel: 'type="password" autocomplete="new-password" aria-required="true"',
                    attrInputNouveau: 'type="password" autocomplete="new-password" aria-required="true"',
                    messageExplication: '',
                    libelleMDPActuel: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.MotDePasseActuel'),
                    libelleNewMDP: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.NewMotDePasse'),
                    libelleConfirmNewMDP: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.Confirmation'),
                    libelleEchecModification: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.EchecModification'),
                    libelleReussiteModification: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.ReussiteModification'),
                    libelleMDPActuelIncorrect: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.MotActuelIncorrect'),
                    libelleConfirmationIncorrecte: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.ConfirmationIncorrecte')
                };
                this.mdp = {
                    actuel: '',
                    nouveau: '',
                    confirmation: ''
                };
                const lId = GUID_1.GUID.getId();
                this.ids = {
                    input1: lId + '_in1',
                    input2: lId + '_in2',
                    input3: lId + '_in3',
                    validateur: lId + '_validateur',
                    validateurMDPActuel: lId + '_valMDPActuel',
                    validateurDiffConfirm: lId + '_DiffConfirm'
                };
            }
            setDonnees() {
                this.afficher(this._construireHtml());
                if (this.options.avecReglesMDP) {
                    $('#' + this.ids.validateur.escapeJQ()).ieHtml(ValidationMotDePasse_1.ValidationMotDePasse.construire(this.options.donneesReglesMdp, null, this._getOptionsValidationMdp()));
                }
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    mdp: {
                        actuel: {
                            getValue: function() {
                                return aInstance.mdp.actuel;
                            },
                            setValue: function(aValue) {
                                aInstance.mdp.actuel = aValue;
                            },
                            node: function() {
                                $(this.node).on('keyup', (event) => {
                                    if (event.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                        ObjetHtml_1.GHtml.setFocus(aInstance.ids.input2);
                                    }
                                }
                                );
                            }
                        },
                        nouveau: {
                            getValue: function() {
                                return aInstance.mdp.nouveau;
                            },
                            setValue: function(aValue) {
                                aInstance.mdp.nouveau = aValue;
                            },
                            getDisabled: function() {
                                return aInstance.getDisabledNouveauMDP();
                            },
                            node: function() {
                                $(this.node).on('keyup', (event) => {
                                    if (event.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                        ObjetHtml_1.GHtml.setFocus(aInstance.ids.input3);
                                    }
                                }
                                );
                            }
                        },
                        confirmation: {
                            getValue: function() {
                                return aInstance.mdp.confirmation;
                            },
                            setValue: function(aValue) {
                                aInstance.mdp.confirmation = aValue;
                            },
                            getDisabled: function() {
                                return aInstance.getDisabledConfirmationMDP();
                            },
                            node: function() {
                                $(this.node).on('keyup', (event) => {
                                    if (event.which === ToucheClavier_1.ToucheClavier.RetourChariot && aInstance.options.callbackFocusValidation) {
                                        aInstance.options.callbackFocusValidation();
                                    }
                                }
                                );
                            }
                        }
                    },
                    montrerMasquerMotDePasse: {
                        getModel: {
                            event: function(aId) {
                                const lTarget = $('#' + aId);
                                lTarget.attr('type') === 'password' ? lTarget.attr('type', 'text') : lTarget.attr('type', 'password');
                            },
                            getTitle(aId) {
                                return $('#' + aId).attr('type') === 'password' ? ObjetTraduction_1.GTraductions.getValeur('connexion.VoirMDP') : ObjetTraduction_1.GTraductions.getValeur('connexion.masquerMDP');
                            },
                            getDisabled(aId) {
                                switch (aId) {
                                case aInstance.ids.input1:
                                    return false;
                                case aInstance.ids.input2:
                                    return aInstance.getDisabledNouveauMDP();
                                case aInstance.ids.input3:
                                    return aInstance.getDisabledConfirmationMDP();
                                }
                                return true;
                            }
                        },
                        getClass(aId) {
                            return $('#' + aId).attr('type') === 'password' ? 'icon_eye_open' : 'icon_eye_close';
                        }
                    },
                    getClassMDPActuel() {
                        return aInstance.avecErreurMDPActuel ? 'is-dirty' : '';
                    },
                    getClassNewMDP(aEstNouveauMDP) {
                        if (aInstance.avecErreurMDPNouveau) {
                            return 'is-dirty';
                        }
                        switch (aInstance._getEtatNewPassword(aEstNouveauMDP)) {
                        case 'disabled':
                            return 'is-disabled';
                        }
                        return '';
                    },
                    getAttrMDPActuel() {
                        return {
                            'aria-invalid': aInstance.avecErreurMDPActuel ? 'true' : 'false'
                        };
                    },
                    getAttrNewMDP(aEstConfirmation) {
                        return {
                            'aria-invalid': aInstance.avecErreurMDPNouveau ? 'true' : 'false'
                        };
                    }
                });
            }
            avecValidationPossible() {
                return (this.mdp.actuel.length > 0 || !this._avecMDPActuel()) && this.mdp.confirmation.length > 0;
            }
            valider() {
                if (!this._controleAvantValidation()) {
                    return;
                }
                if (this._requeteSaisieEnCours) {
                    return;
                }
                this._requeteSaisieEnCours = true;
                if (this.options.classRequeteSecurisation) {
                    return new (this.options.classRequeteSecurisation)(this).setOptions({
                        gererMessageErreur: function() {}
                        .bind(this)
                    }).lancerRequete({
                        action: this.options.actionRequeteSecurisation,
                        ancienMDP: this.mdp.actuel,
                        nouveauMDP: this.mdp.confirmation
                    }).finally( () => {
                        this._requeteSaisieEnCours = false;
                    }
                    ).then( (aJSON) => {
                        this._surReponseSaisie({
                            JSON: aJSON,
                            avecErreur: false,
                            nouveauMDP: this.mdp.confirmation
                        });
                    }
                    , (aParams) => {
                        return (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            titre: this.options.libelleEchecModification,
                            message: aParams ? aParams.message || '' : ''
                        }).then( () => {
                            this.options.callbackApresValidation({
                                avecErreur: true
                            });
                        }
                        );
                    }
                    );
                }
                return new (this.options.classRequeteSaisie)(this).lancerRequete({
                    ancienMDP: this.mdp.actuel,
                    nouveauMDP: this.mdp.confirmation,
                    forcerModification: this.options.forcerModificationMdp
                }).then( (aParams) => {
                    this._requeteSaisieEnCours = false;
                    this._surReponseSaisie(aParams);
                }
                , () => {
                    this._requeteSaisieEnCours = false;
                    return (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        message: this.options.libelleEchecModification
                    }).then( () => {
                        this.options.callbackApresValidation({
                            avecErreur: true
                        });
                    }
                    );
                }
                );
            }
            _avecMDPActuel() {
                return this.options.avecMDPActuel && !this.options.forcerModificationMdp;
            }
            _getOptionsValidationMdp() {
                return {
                    avecMdpDifferent: this.options.avecMdpNouveauDifferentDeActuel
                };
            }
            _construireHtml() {
                const H = [];
                H.push('<div class="ObjetSaisieMotDePasseCP">');
                if (this.options.messageExplication) {
                    H.push('<div class="BlocMessageEnTete">', this.options.messageExplication, '</div>');
                }
                H.push('<div class="BlocContenu">');
                H.push('<div class="BlocMDP">');
                H.push(IE.jsx.str("p", {
                    class: "p-bottom-l"
                }, ObjetTraduction_1.GTraductions.getValeur('connexion.champsObligatoires')));
                if (this._avecMDPActuel()) {
                    H.push('   <label class="m-bottom" for="', this.ids.input1, '">', this.options.libelleMDPActuel, ' *</label>', '   <div class="as-input as-password" ie-class="getClassMDPActuel">', '       <input ie-model="mdp.actuel" id="', this.ids.input1, '" ', this.options.attrInputActuel, ' ie-attr="getAttrMDPActuel"/>', '       <ie-btnicon ie-class="montrerMasquerMotDePasse.getClass(\'', this.ids.input1, '\')" ie-model="montrerMasquerMotDePasse.getModel(\'', this.ids.input1, '\')"></ie-btnicon>', '   </div>');
                    H.push(IE.jsx.str("p", {
                        class: "p-top p-bottom message-invalide",
                        id: this.ids.validateurMDPActuel
                    }));
                }
                H.push('   <label class="m-bottom" for="', this.ids.input2, '">', this.options.libelleNewMDP, ' *</label>', '   <div class="as-input as-password confirm-wrapper" ie-class="getClassNewMDP(true)">', '       <input ie-model="mdp.nouveau" class="full-width" id="', this.ids.input2, '" ', this.options.attrInputNouveau, ' ie-attr="getAttrNewMDP(false)" />', '       <ie-btnicon ie-class="montrerMasquerMotDePasse.getClass(\'', this.ids.input2, '\')" ie-model="montrerMasquerMotDePasse.getModel(\'', this.ids.input2, '\')"></ie-btnicon>', '   </div>');
                H.push('   <label class="m-bottom" for="', this.ids.input3, '">', this.options.libelleConfirmNewMDP, ' *</label>', '   <div class="as-input as-password confirm-wrapper" ie-class="getClassNewMDP(false)">', '       <input ie-model="mdp.confirmation" class="full-width" id="', this.ids.input3, '" ', this.options.attrInputNouveau, ' ie-attr="getAttrNewMDP(true)"/>', '       <ie-btnicon ie-class="montrerMasquerMotDePasse.getClass(\'', this.ids.input3, '\')" ie-model="montrerMasquerMotDePasse.getModel(\'', this.ids.input3, '\')"></ie-btnicon>', '   </div>');
                H.push(IE.jsx.str("p", {
                    class: "p-top p-bottom message-invalide",
                    id: this.ids.validateurDiffConfirm
                }));
                H.push('</div>');
                if (this.options.avecReglesMDP) {
                    H.push(IE.jsx.str("div", {
                        class: "BlocValidation"
                    }, IE.jsx.str("div", {
                        class: "validateur",
                        id: this.ids.validateur
                    })));
                }
                H.push('</div>');
                if (this.options.avecReglesMDP) {
                    H.push(IE.jsx.str("div", {
                        class: "link-icon"
                    }, LienPolitiqueMotDePasse_1.TLienPolitiqueMotDePasse.getLien()));
                }
                H.push(IE.jsx.str("div", {
                    style: "display:none"
                }, IE.jsx.str("input", {
                    type: "password",
                    class: IEHtml_1.default.Styles.debugWAIInputIgnoreAssert
                })));
                H.push(IE.jsx.str("div", {
                    style: "display:none"
                }, IE.jsx.str("input", {
                    type: "password",
                    class: IEHtml_1.default.Styles.debugWAIInputIgnoreAssert
                })));
                H.push(IE.jsx.str("div", {
                    style: "display:none"
                }, IE.jsx.str("input", {
                    type: "password",
                    class: IEHtml_1.default.Styles.debugWAIInputIgnoreAssert
                })));
                H.push('</div>');
                return H.join('');
            }
            _surReponseSaisie(aParams) {
                const lParams = Object.assign({
                    avecErreur: true,
                    JSON: null,
                    messageDejaAffiche: false,
                    messageErreur: ''
                }, aParams);
                if (lParams.JSON && (lParams.JSON.erreurMDP || lParams.JSON.messageErreur)) {
                    if (this.options.avecReglesMDP) {
                        this.options.donneesReglesMdp = lParams.JSON.reglesSaisieMDP;
                        if (this.options.setReglesMDP && lParams.JSON.reglesSaisieMDP) {
                            this.options.setReglesMDP(lParams.JSON);
                        }
                    }
                    const lErreursMDP = lParams.JSON.erreurMDP;
                    let lErreursMDPPourValidation = lErreursMDP;
                    let lMessage = '';
                    if (lParams.JSON.messageErreur) {
                        lMessage += lParams.JSON.messageErreur;
                    } else if (lErreursMDP && lErreursMDP.erreurAncienMDP) {
                        lMessage += this.options.libelleMDPActuelIncorrect + '<br><br>';
                        lErreursMDPPourValidation = null;
                    }
                    if (this.options.avecReglesMDP && lErreursMDPPourValidation) {
                        lMessage += ValidationMotDePasse_1.ValidationMotDePasse.construire(this.options.donneesReglesMdp, lErreursMDPPourValidation, this._getOptionsValidationMdp());
                    }
                    let lIdFocus = '';
                    this.mdp.nouveau = '';
                    this.mdp.confirmation = '';
                    if (lParams.JSON.messageErreur || (lErreursMDP && lErreursMDP.erreurAncienMDP)) {
                        this.avecErreurMDPActuel = true;
                        this.mdp.actuel = '';
                        lIdFocus = this.ids.input1;
                        $(`#${this.ids.validateurMDPActuel.escapeJQ()}`).html(lMessage);
                        $(`#${this.ids.input1.escapeJQ()}`).attr('aria-describedby', this.ids.validateurMDPActuel);
                    } else {
                        lIdFocus = this.ids.input2;
                    }
                    if (this.options.avecReglesMDP) {
                        $('#' + this.ids.validateur.escapeJQ()).ieHtml(ValidationMotDePasse_1.ValidationMotDePasse.construire(this.options.donneesReglesMdp, lErreursMDPPourValidation, this._getOptionsValidationMdp()));
                        if (!this.avecErreurMDPActuel) {
                            $(`#${this.ids.input2.escapeJQ()}, #${this.ids.input3.escapeJQ()}`).attr('aria-describedby', this.ids.validateur);
                        }
                    }
                    return (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        titre: this.options.libelleEchecModification,
                        message: lMessage
                    }).then( () => {
                        ObjetHtml_1.GHtml.setFocus(lIdFocus);
                        IEHtml_1.default.refresh(true);
                    }
                    );
                } else {
                    if (lParams.avecErreur) {
                        this.mdp.nouveau = '';
                        this.mdp.confirmation = '';
                    }
                    let lPromise = Promise.resolve();
                    if (!lParams.messageDejaAffiche) {
                        if (lParams.avecErreur) {
                            lPromise = (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: this.options.libelleEchecModification + (lParams.messageErreur ? '<br><br>' + lParams.messageErreur : '')
                            });
                        } else if (this.options.avecMessageReussiteModif) {
                            lPromise = (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: this.options.libelleReussiteModification
                            });
                        }
                    }
                    lPromise.then( () => {
                        this.options.callbackApresValidation(lParams);
                    }
                    );
                }
            }
            _controleAvantValidation() {
                this.avecErreurMDPActuel = false;
                this.avecErreurMDPNouveau = false;
                $(`#${this.ids.validateurDiffConfirm.escapeJQ()}`).empty();
                $(`#${this.ids.validateurMDPActuel.escapeJQ()}`).empty();
                $(`#${this.ids.input1.escapeJQ()}, #${this.ids.input2.escapeJQ()}, #${this.ids.input3.escapeJQ()}`).attr('aria-describedby', null);
                if (this.mdp.confirmation && this.mdp.confirmation !== this.mdp.nouveau && this.options.libelleConfirmationIncorrecte) {
                    this.mdp.nouveau = '';
                    this.mdp.confirmation = '';
                    (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        message: this.options.libelleConfirmationIncorrecte
                    }).then( () => {
                        $(`#${this.ids.validateurDiffConfirm.escapeJQ()}`).html(this.options.libelleConfirmationIncorrecte);
                        $(`#${this.ids.input2.escapeJQ()}, #${this.ids.input3.escapeJQ()}`).attr('aria-describedby', this.ids.validateurDiffConfirm);
                        this.avecErreurMDPNouveau = true;
                        if (this.options.avecReglesMDP) {
                            $('#' + this.ids.validateur.escapeJQ()).ieHtml(ValidationMotDePasse_1.ValidationMotDePasse.construire(this.options.donneesReglesMdp, null, this._getOptionsValidationMdp()));
                        }
                        ObjetHtml_1.GHtml.setFocus(this.ids.input2);
                        IEHtml_1.default.refresh(true);
                    }
                    );
                    return false;
                }
                return true;
            }
            getDisabledNouveauMDP() {
                return this.mdp.actuel.length === 0 && this._avecMDPActuel();
            }
            getDisabledConfirmationMDP() {
                return ((this.mdp.actuel.length === 0 && this._avecMDPActuel()) || this.mdp.nouveau.length === 0);
            }
            _getEtatNewPassword(aEstNouveauMDP) {
                if (aEstNouveauMDP && this.getDisabledNouveauMDP()) {
                    return 'disabled';
                }
                if (!aEstNouveauMDP && this.getDisabledConfirmationMDP()) {
                    return 'disabled';
                }
                return this.mdp.confirmation.length === 0 || this.mdp.confirmation === this.mdp.nouveau ? 'valid' : 'invalid';
            }
        }
        exports.ObjetSaisieMotDePasseCP = ObjetSaisieMotDePasseCP;
        ObjetSaisieMotDePasseCP.C_TailleMaxMotDePasse = C_TailleMaxMotDePasse;
        ObjetSaisieMotDePasseCP.C_TailleMinLogin = C_TailleMinLogin;
        ObjetSaisieMotDePasseCP.C_TailleMaxLogin = C_TailleMaxLogin;
    },
    fn: 'objetsaisiemotdepassecp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_SaisieMdpCP = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetSaisieMotDePasseCP_1 = require("ObjetSaisieMotDePasseCP");
        const ObjetChaine_1 = require("ObjetChaine");
        class ObjetFenetre_SaisieMdpCP extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    titre: ObjetChaine_1.GChaine.insecable(ObjetTraduction_1.GTraductions.getValeur('saisieMDP.TitreFenetre')),
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler'), {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }],
                    avecTailleSelonContenu: true,
                    largeur: 300,
                    optionsMDP: {
                        forcerModificationMdp: false
                    }
                });
            }
            construireInstances() {
                this.identMDP = this.add(ObjetSaisieMotDePasseCP_1.ObjetSaisieMotDePasseCP);
            }
            composeContenu() {
                return ['<div id="', this.getInstance(this.identMDP).getNom(), '"></div>'].join('');
            }
            setDonnees(aDonneesReglesMdp) {
                this.afficher();
                this.getInstance(this.identMDP).setOptions(Object.assign(this.optionsFenetre.optionsMDP || {}, {
                    donneesReglesMdp: aDonneesReglesMdp,
                    callbackFocusValidation: () => {
                        this.setBoutonFocus({
                            valider: true
                        });
                    }
                    ,
                    callbackApresValidation: (aParams) => {
                        if (aParams) {
                            this.fermer();
                            this.callback.appel(!aParams.avecErreur, aParams);
                        }
                    }
                })).setDonnees();
                this.positionnerFenetre();
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    fenetreBtn: {
                        getDisabled: function(aBoutonRepeat) {
                            return aBoutonRepeat.element.valider ? !aInstance.getInstance(aInstance.identMDP).avecValidationPossible() : false;
                        }
                    }
                });
            }
            surValidation(ANumeroBouton) {
                const lBouton = this.getBoutonNumero(ANumeroBouton);
                if (lBouton && lBouton.valider) {
                    this.getInstance(this.identMDP).valider();
                } else {
                    this.fermer();
                    this.callback.appel(false);
                }
            }
        }
        exports.ObjetFenetre_SaisieMdpCP = ObjetFenetre_SaisieMdpCP;
    },
    fn: 'objetfenetre_saisiemdpcp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireSecurisationCompte = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetChoixStrategieSecurisation_1 = require("ObjetChoixStrategieSecurisation");
        const ObjetSaisieCodePIN_1 = require("ObjetSaisieCodePIN");
        const ObjetRequeteSecurisationCompte_1 = require("ObjetRequeteSecurisationCompte");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const MethodesObjet_1 = require("MethodesObjet");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetFenetre_SaisieMdpCP_1 = require("ObjetFenetre_SaisieMdpCP");
        const ObjetChaine_1 = require("ObjetChaine");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const Enumere_Action_1 = require("Enumere_Action");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const TraductionsDoubleAuth_1 = require("TraductionsDoubleAuth");
        const AccessApp_1 = require("AccessApp");
        var Etape;
        (function(Etape) {
            Etape[Etape["choixStrat"] = 0] = "choixStrat";
            Etape[Etape["PIN"] = 1] = "PIN";
            Etape[Etape["enregistrement"] = 2] = "enregistrement";
        }
        )(Etape || (Etape = {}));
        class ChaineEtape {
            constructor(aEtape) {
                this.etape = aEtape;
            }
            add(aEtape) {
                const lEtape = new ChaineEtape(aEtape);
                lEtape.precedent = this;
                this.suivant = lEtape;
                return lEtape;
            }
        }
        class UtilitaireSecurisationCompte {
            static async demarrerPersonnalisationMDP(aParam) {
                return await new Promise( (aResolve) => {
                    ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_SaisieMdpCP_1.ObjetFenetre_SaisieMdpCP, {
                        pere: this,
                        evenement(aReussite, aParamForcerMDP) {
                            aResolve({
                                reussite: aReussite,
                                paramForcerMDP: aParamForcerMDP
                            });
                        }
                    }, {
                        titre: ObjetChaine_1.GChaine.insecable(ObjetTraduction_1.GTraductions.getValeur('saisieMDP.TitreFenetre')),
                        optionsMDP: {
                            forcerModificationMdp: true,
                            classRequeteSecurisation: ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth,
                            actionRequeteSecurisation: TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierMotDePassePersonnalise,
                            messageExplication: aParam.messageForcerModificationMdp,
                            setReglesMDP(aJSON) {
                                GEtatUtilisateur.setReglesSaisieMotDePasse(aJSON);
                            }
                        }
                    }).setDonnees(aParam.reglesSaisieMDP);
                }
                );
            }
            static async demarrerDoubleAut(aDonnees) {
                const lResultAnnuler = {
                    annuler: true
                };
                const lDonneesSecu = {};
                const lEstChoixStrategie = aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie);
                let lChaineEtape = null;
                const lChoixUnique = aDonnees.modesPossibles.count() === 1;
                if (lEstChoixStrategie) {
                    lDonneesSecu.mode = this.initVerifierMode(aDonnees);
                }
                if (lEstChoixStrategie && !lChoixUnique) {
                    lChaineEtape = new ChaineEtape(Etape.choixStrat);
                    return await UtilitaireSecurisationCompte.suivant(aDonnees, lDonneesSecu, lChaineEtape);
                }
                if (aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieCodePINetSource) || (lChoixUnique && aDonnees.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN))) {
                    lChaineEtape = new ChaineEtape(Etape.PIN);
                    lChaineEtape.add(Etape.enregistrement);
                    return await UtilitaireSecurisationCompte.suivant(aDonnees, lDonneesSecu, lChaineEtape);
                }
                if (aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieSourcePourNotifSeulement) || (lChoixUnique && aDonnees.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement))) {
                    lChaineEtape = new ChaineEtape(Etape.enregistrement);
                    return await UtilitaireSecurisationCompte.suivant(aDonnees, lDonneesSecu, lChaineEtape);
                }
                return lResultAnnuler;
            }
            static async suivant(aDonnees, aResultSecu, aChaineEtape) {
                const lPere = {};
                const lResultAnnuler = {
                    annuler: true
                };
                if (!aChaineEtape) {
                    return lResultAnnuler;
                }
                switch (aChaineEtape.etape) {
                case Etape.choixStrat:
                    {
                        const lResultFenetre = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_ChoixStrategie, {
                            pere: lPere
                        }).setDonnees(aDonnees, aResultSecu);
                        if (lResultFenetre.bouton && lResultFenetre.bouton.valider) {
                            switch (aResultSecu.mode) {
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN:
                                {
                                    aChaineEtape.add(Etape.PIN).add(Etape.enregistrement);
                                    return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.suivant);
                                }
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement:
                                {
                                    aChaineEtape.add(Etape.enregistrement);
                                    return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.suivant);
                                }
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive:
                                {
                                    return {
                                        suivant: true,
                                        donnees: aResultSecu
                                    };
                                }
                            default:
                                {
                                    throw new Error('Choix strategie inconnue');
                                }
                            }
                        }
                        break;
                    }
                case Etape.PIN:
                    {
                        let lModePIN = ObjetSaisieCodePIN_1.ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN;
                        let lAvecReinitPIN = aDonnees.avecReinitPIN;
                        let lTitre = TraductionsDoubleAuth_1.TradDoubleAuth.TitreValiderCodePIN;
                        let lLibelleBouton = ObjetTraduction_1.GTraductions.getValeur('Annuler');
                        if (aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie)) {
                            lModePIN = ObjetSaisieCodePIN_1.ObjetSaisieCodePIN.ModeSaisieValiderPIN.DefinirPIN;
                            lAvecReinitPIN = false;
                            lTitre = TraductionsDoubleAuth_1.TradDoubleAuth.RenforcerSecuDefinirPIN;
                            if (aChaineEtape.precedent) {
                                lLibelleBouton = TraductionsDoubleAuth_1.TradDoubleAuth.Retour;
                            }
                        }
                        const lResultFenetrePIN = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_PIN, {
                            pere: lPere
                        }, {
                            titre: lTitre,
                            listeBoutons: [lLibelleBouton]
                        }).setDonnees({
                            modePIN: lModePIN,
                            avecReinitPIN: lAvecReinitPIN,
                            emailOcculte: aDonnees.emailOcculte
                        });
                        if (lResultFenetrePIN.paramsPIN) {
                            Object.assign(aResultSecu, lResultFenetrePIN.paramsPIN);
                            return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.suivant);
                        }
                        if (aChaineEtape.precedent) {
                            return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.precedent);
                        }
                        break;
                    }
                case Etape.enregistrement:
                    {
                        let lAvecRetour = false;
                        if (aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie) && aChaineEtape.precedent) {
                            lAvecRetour = true;
                        }
                        const lResultFenetreEnregistrement = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_Enregistrement, {
                            pere: lPere
                        }).setDonnees(aDonnees, lAvecRetour);
                        if (lResultFenetreEnregistrement.enregistrement) {
                            Object.assign(aResultSecu, lResultFenetreEnregistrement.enregistrement);
                            return {
                                suivant: true,
                                donnees: aResultSecu
                            };
                        }
                        if (aChaineEtape.precedent && aChaineEtape.precedent.etape === Etape.choixStrat) {
                            return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.precedent);
                        }
                        break;
                    }
                default:
                    {
                        return lResultAnnuler;
                    }
                }
                return lResultAnnuler;
            }
            static initVerifierMode(aDonnees) {
                let lResult;
                if (MethodesObjet_1.MethodesObjet.isNumber(aDonnees.modeSecurisationParDefaut)) {
                    lResult = aDonnees.modeSecurisationParDefaut;
                }
                const lModesPossibles = aDonnees.modesPossibles;
                if (lResult === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_PasEncoreChoisi || !lModesPossibles.contains(lResult)) {
                    TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentificationUtil.getOrdreModeDoubleAuth(aDonnees.modeSecurisationParDefaut).every( (aMode) => {
                        if (aMode !== lResult && lModesPossibles.contains(aMode)) {
                            lResult = aMode;
                            return false;
                        }
                        return true;
                    }
                    );
                }
                return lResult;
            }
        }
        exports.UtilitaireSecurisationCompte = UtilitaireSecurisationCompte;
        const cLargeurFenetre = 450;
        class ObjetFenetre_ChoixStrategie extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    titre: TraductionsDoubleAuth_1.TradDoubleAuth.RenforcerSecurite,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler'), {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }],
                    largeur: cLargeurFenetre
                });
            }
            construireInstances() {
                this.identChoixStrategie = this.add(ObjetChoixStrategieSecurisation_1.ObjetChoixStrategieSecurisation);
            }
            async setDonnees(aDonnees, aResultSecu) {
                const lParamsStrat = {
                    mode: aResultSecu.mode
                };
                const lResultPromise = super.afficher(IE.jsx.str("div", {
                    id: this.getNomInstance(this.identChoixStrategie)
                }));
                this.getInstance(this.identChoixStrategie).setOptions({
                    modeAffichage: ObjetChoixStrategieSecurisation_1.ObjetChoixStrategieSecurisation.typeAffichage.securisation,
                    modesPossibles: aDonnees.modesPossibles,
                    modeSecurisationParDefaut: aDonnees.modeSecurisationParDefaut,
                    callbackChoix: (aGenre) => {
                        lParamsStrat.mode = aGenre;
                    }
                }).setDonnees(lParamsStrat);
                const lResult = await lResultPromise;
                if (lResult.bouton && lResult.bouton.valider) {
                    aResultSecu.mode = lParamsStrat.mode;
                }
                return lResult;
            }
        }
        class ObjetFenetre_PIN extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    addParametresValidation: () => {
                        return {
                            paramsPIN: this.paramsPIN
                        };
                    }
                });
            }
            construireInstances() {
                this.identPIN = this.add(ObjetSaisieCodePIN_1.ObjetSaisieCodePIN, (aParams) => {
                    if (aParams) {
                        this.paramsPIN = aParams;
                        this.surValidation(undefined);
                    }
                }
                );
            }
            composeContenu() {
                return IE.jsx.str("div", {
                    id: this.getNomInstance(this.identPIN)
                });
            }
            setDonnees(aOptions) {
                this.getInstance(this.identPIN).setOptions(Object.assign({
                    classeRequete: ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth
                }, aOptions)).setDonnees({
                    mode: TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN
                });
                return super.afficher();
            }
        }
        class ObjetFenetre_Enregistrement extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.cbIdentification = true;
                this.strIdentification = '';
                this.avecWarningIdentification = true;
                this.idInput = `${this.Nom}_inp`;
                this.setOptionsFenetre({
                    listeBoutons: [TraductionsDoubleAuth_1.TradDoubleAuth.Annuler, {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }],
                    largeur: cLargeurFenetre
                });
            }
            jsxModeleCheckboxIdentification() {
                return {
                    getValue: () => {
                        return this.cbIdentification;
                    }
                    ,
                    setValue: (aValue) => {
                        this.cbIdentification = aValue;
                        if (this.avecWarningIdentification && !this.cbIdentification) {
                            this.avecWarningIdentification = false;
                            (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerAppareilResterInconnu + '<br>' + TraductionsDoubleAuth_1.TradDoubleAuth.PersonnesConfiance
                            });
                        }
                    }
                };
            }
            jsxModeleInputIdentification() {
                return {
                    getValue: () => {
                        return this.strIdentification;
                    }
                    ,
                    setValue: (aValue) => {
                        this.strIdentification = aValue;
                    }
                    ,
                    getDisabled: () => {
                        return !this.cbIdentification;
                    }
                    ,
                    node: (aNode) => {
                        $(aNode).on('keyup', (aEvent) => {
                            if (aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                for (let lNumeroBouton = 0; lNumeroBouton < this.optionsFenetre.listeBoutons.length; lNumeroBouton++) {
                                    const lBouton = this.optionsFenetre.listeBoutons[lNumeroBouton];
                                    if (typeof lBouton === 'string') {} else if (lBouton.valider) {
                                        this.surValidation(lNumeroBouton);
                                        return;
                                    }
                                }
                            }
                        }
                        );
                    }
                };
            }
            jsxGetHtmlCompteurInput() {
                return this.strIdentification.length > 0 ? this.strIdentification.length + '/' + TypeSecurisationCompte_1.C_LibelleAppareilMaxLength : '&nbsp;';
            }
            compose() {
                if (!this.donnees) {
                    return '';
                }
                const lIdLegende = `${this.Nom}_legendeCB`;
                const lIdCompteur = `${this.Nom}_compteurInput`;
                const lIdCB = `${this.Nom}_ccb`;
                const lAvecChoixStrategie = this.donnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie);
                const lAvecChoixCodePIN = this.donnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieCodePINetSource);
                return (IE.jsx.str("div", null, IE.jsx.str("p", {
                    class: "m-bottom-xl",
                    id: lIdLegende
                }, !lAvecChoixStrategie && !lAvecChoixCodePIN ? TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerAppareilRappelNotif + '<br>' : '', TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerAppareilInfoIdentification), IE.jsx.str("ie-checkbox", {
                    id: lIdCB,
                    "ie-model": this.jsxModeleCheckboxIdentification.bind(this),
                    class: "m-bottom-xl"
                }, TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerAppareilNommerAppareil), IE.jsx.str("div", {
                    class: false
                }, IE.jsx.str("label", {
                    for: this.idInput,
                    class: "m-bottom-l"
                }, TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerSousNom, " :"), IE.jsx.str("input", {
                    type: "text",
                    id: this.idInput,
                    "ie-model": this.jsxModeleInputIdentification.bind(this),
                    class: "full-width",
                    maxlength: TypeSecurisationCompte_1.C_LibelleAppareilMaxLength,
                    "ie-trim": true,
                    autocomplete: "new-password",
                    placeholder: TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerAppareilSuggestions,
                    "aria-describedby": [lIdCompteur, lIdLegende, lIdCB].join(' ')
                }), IE.jsx.str("div", {
                    "ie-html": this.jsxGetHtmlCompteurInput.bind(this),
                    class: "sc-compteurInput"
                }), IE.jsx.str("span", {
                    class: "sr-only",
                    id: lIdCompteur
                }, TraductionsDoubleAuth_1.TradDoubleAuth.NbCaracteresMax_D.format(TypeSecurisationCompte_1.C_LibelleAppareilMaxLength)), GParametres.urlTutoEnregistrerAppareils ? IE.jsx.str("ie-chips", {
                    class: "iconic icon_question_sign",
                    href: GParametres.urlTutoEnregistrerAppareils
                }, TraductionsDoubleAuth_1.TradDoubleAuth.LienFAQEnregistrement) : '')));
            }
            async setDonnees(aDonnees, aAvecRetour) {
                this.donnees = aDonnees;
                this.setOptionsFenetre({
                    listeBoutons: [aAvecRetour ? TraductionsDoubleAuth_1.TradDoubleAuth.Retour : TraductionsDoubleAuth_1.TradDoubleAuth.Annuler, {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }]
                });
                if (this.donnees.libelleSaisieExistant && this.donnees.changementStrategieImpose) {
                    this.strIdentification = this.donnees.libelleSaisieExistant;
                }
                const lAvecChoixStrategie = this.donnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie);
                const lAvecChoixCodePIN = this.donnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieCodePINetSource);
                this.setOptionsFenetre({
                    titre: !lAvecChoixStrategie && !lAvecChoixCodePIN ? TraductionsDoubleAuth_1.TradDoubleAuth.ValiderTitreInconnu : TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerAppareilTitre
                });
                const lPromise = super.afficher(this.compose());
                $(`#${this.idInput.escapeJQ()}`).trigger('focus');
                const lResult = await lPromise;
                if (lResult.bouton && lResult.bouton.valider) {
                    lResult.enregistrement = {
                        avecIdentification: this.cbIdentification,
                        strIdentification: this.strIdentification
                    };
                }
                return lResult;
            }
            async surValidation(ANumeroBouton) {
                const lParams = this.getParametresValidation(ANumeroBouton);
                if (lParams.bouton && lParams.bouton.valider) {
                    if (this.cbIdentification && !this.strIdentification) {
                        await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            message: TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerAppareilNomInvalide
                        });
                        this._focusInputIndentification();
                        return;
                    }
                    if (await this._controleNomUniquePromise() !== true) {
                        this._focusInputIndentification();
                        return;
                    }
                }
                super.surValidation(ANumeroBouton);
            }
            _focusInputIndentification() {
                $(`#${this.idInput.escapeJQ()}`).trigger('focus');
            }
            async _controleNomUniquePromise() {
                if (this.cbIdentification && this.strIdentification) {
                    if (this.donnees.changementStrategieImpose && this.strIdentification === this.donnees.libelleSaisieExistant) {
                        return true;
                    }
                    const lJSON = await new ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth(this).lancerRequete({
                        action: TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_LibellesSourceConnexionDejaConnus,
                        libelle: this.strIdentification
                    });
                    if (lJSON && lJSON.dejaConnu) {
                        if (this.donnees.changementStrategieImpose) {
                            await (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: TraductionsDoubleAuth_1.TradDoubleAuth.LibelleAppareilDejaUtilise
                            });
                            return false;
                        }
                        let lMessage = '';
                        if ((0,
                        AccessApp_1.getApp)().estAppliMobile || !GParametres.urlFAQEnregistrementDoubleAuth) {
                            lMessage = TraductionsDoubleAuth_1.TradDoubleAuth.EnregistrerAppareilNomDejaUtilise;
                        } else {
                            lMessage = IE.jsx.str(IE.jsx.fragment, null, TraductionsDoubleAuth_1.TradDoubleAuth.Message_SourceConnexion_1, IE.jsx.str("br", null), IE.jsx.str("br", null), IE.jsx.str("ul", {
                                class: "browser-default"
                            }, IE.jsx.str("li", null, TraductionsDoubleAuth_1.TradDoubleAuth.Message_SourceConnexion_2, IE.jsx.str("div", {
                                style: "font-style: italic; padding:.3rem 0 .5rem 0;"
                            }, TraductionsDoubleAuth_1.TradDoubleAuth.Message_SourceConnexion_3_S.format(['<a href="' + GParametres.urlFAQEnregistrementDoubleAuth + '">' + TraductionsDoubleAuth_1.TradDoubleAuth.FAQEnregistrement + '</a>']))), IE.jsx.str("li", null, TraductionsDoubleAuth_1.TradDoubleAuth.Message_SourceConnexion_4)));
                        }
                        const lGenreAction = await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                            message: lMessage,
                            listeBoutons: [{
                                libelle: ObjetTraduction_1.GTraductions.getValeur('Annuler'),
                                theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire
                            }, {
                                libelle: ObjetTraduction_1.GTraductions.getValeur('Valider'),
                                theme: Type_ThemeBouton_1.TypeThemeBouton.primaire,
                                genreAction: Enumere_Action_1.EGenreAction.Valider
                            }]
                        });
                        if (lGenreAction !== Enumere_Action_1.EGenreAction.Valider) {
                            return false;
                        }
                    }
                }
                return true;
            }
        }
    },
    fn: 'utilitairesecurisationcompte.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.getHtml = void 0;
        const Divers_css_1 = require("Divers.css");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const getHtml = (aParams) => {
            const getHtmlSrcFondImage = () => {
                const lAvecLiens = aParams.options.avecLien && aParams.options.lien && aParams.options.texteLien && aParams.options.suiviLien;
                const getHtmlImg = () => IE.jsx.str("img", {
                    id: aParams.id.image,
                    onclick: aParams.options.urlImageSuite && `$('#${aParams.id.imageSuite}').toggle();event.stopImmediatePropagation();return false;`,
                    class: aParams.options.urlImageSuite && 'AvecMain',
                    src: aParams.options.srcFondImage,
                    alt: aParams.traductions.altImageDeFond,
                    style: "height:100%",
                    "aria-hidden": "true"
                });
                return (IE.jsx.str("div", {
                    style: "position:absolute;left: 0px; bottom: 0px;top:50px;height:80%;z-index:1;"
                }, lAvecLiens ? (IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("a", {
                    href: aParams.options.lien,
                    class: "Texte12 LienLouvre",
                    onclick: `$.get('${aParams.options.suiviLien}');`
                }, getHtmlImg(), IE.jsx.str("div", {
                    style: `position: absolute;bottom:${aParams.options.bottomLien};left:${aParams.options.leftLien};color:${aParams.options.couleurLien};font-size:${aParams.options.tailleLien};`
                }, aParams.options.texteLien)))) : (IE.jsx.str(IE.jsx.fragment, null, getHtmlImg()))));
            }
            ;
            const lBtnTooltipModeConnex = () => {
                return {
                    getTooltip: () => {
                        return '<strong>' + ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionTitre') + '</strong><br />' + ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionMessage');
                    }
                };
            }
            ;
            const lJsxNodeRecupMdp = (aNode) => {
                $(aNode).eventValidation( () => {
                    aParams.instance.evenementRecupIdMDP();
                }
                );
            }
            ;
            return (IE.jsx.str(IE.jsx.fragment, null, aParams.options.avecFichierFond && (IE.jsx.str("div", {
                class: ['ImageFond', aParams.options.classImageFond, 'full-size'],
                style: `background-color:${aParams.options.couleurFondBg};background-image:url('${aParams.options.dataImageFond}');position:absolute;z-index:-15;`
            })), aParams.options.sansFichierFond && (IE.jsx.str("div", {
                class: ['ImageFond', aParams.options.classImageFond],
                style: `background-color:${aParams.options.couleurFondBg};${aParams.options.urlImageFond ? `background-image:url('${aParams.options.urlImageFond}');` : ''} position:absolute;z-index:-15;width:100%;height:100%;`
            })), IE.jsx.str("div", {
                id: aParams.id.wrapper,
                class: "full-size",
                style: `box-sizing:border-box;text-align:center;position:absolute;min-height:520px; ${aParams.options.urlImageSuite ? 'min-width:520px;' : ''}`
            }, aParams.options.modeDemo && (IE.jsx.str("div", {
                class: "Texte16 Gras",
                style: "position: absolute;width:650px;left:50px;background-color:rgba(255,255,255,0.9);top:100px;padding:20px;z-index:9999;border-radius:7px;"
            }, aParams.traductions.AvertissementDemo)), IE.jsx.str("div", {
                "ie-identite": "getIdentiteBandeau",
                style: "position:absolute; top:0; left:0; right:0; z-index:101;"
            }), IE.jsx.str("div", {
                class: "InlineBlock AlignementMilieuVertical",
                style: "height:100%;"
            }), aParams.options.srcFondImage && getHtmlSrcFondImage(), IE.jsx.str("div", {
                id: aParams.id.wrapperConnect,
                class: [aParams.options.applicationNom, 'wrapper-connect-conteneur']
            }, IE.jsx.str("div", {
                class: "logo-espace-edt bloc-elem"
            }), IE.jsx.str("div", {
                class: "illustration-container bloc-elem"
            }, IE.jsx.str("div", {
                class: "illus-rond"
            }), IE.jsx.str("div", {
                class: "logo-pronote-primaire"
            })), IE.jsx.str("div", {
                id: aParams.id.inscription,
                "ie-if": "visibiliteInscription",
                class: "bloc-elem",
                style: `width:440px;position:relative;margin-top:40px;${aParams.options.decalageLogin ? 'margin-left: 50%;' : ''} box-shadow:5px 5px 10px -8px black;z-index:1;`
            }, IE.jsx.str("div", {
                class: "InlineBlock",
                style: `position:absolute;top:0;left:0;right:0;bottom:0;background-color:${aParams.options.couleurConnexion};opacity: 0.7;z-index: -1;`
            }, "\u00A0"), IE.jsx.str("div", {
                class: "Texte14 Gras",
                style: "text-align:center;padding: 20px 0px;"
            }, aParams.traductions.inscriptions.titre), IE.jsx.str("div", {
                "ie-display": "visibiliteRedirigerParent"
            }, IE.jsx.str("ie-bouton", {
                "ie-model": "boutonRedirigerParent",
                class: "Texte12 AvecMain themeBoutonNeutre height-auto",
                style: "width:calc(100% - 20px);min-height:105px;text-align: left;border-radius:0;padding:20px;margin:0 10px 10px 10px;"
            }, IE.jsx.str("div", {
                style: "display:flex;"
            }, IE.jsx.str("div", {
                class: [aParams.options.insriptions.classImageParent, 'img-inscription'],
                style: "align-self: center;"
            }), IE.jsx.str("div", {
                style: "align-self: center;"
            }, IE.jsx.str("div", {
                class: "Texte14 Gras"
            }, aParams.traductions.inscriptions.boutonEspaceParent.titre), IE.jsx.str("div", {
                style: "padding-top:10px;"
            }, aParams.traductions.inscriptions.boutonEspaceParent.info))))), IE.jsx.str("div", null, IE.jsx.str("ie-bouton", {
                "ie-model": "boutonCreation",
                class: "Texte12 AvecMain themeBoutonNeutre height-auto",
                style: "width:calc(100% - 20px);min-height:105px;text-align: left;border-radius:0;padding:20px;margin:0px 10px 10px 10px;"
            }, IE.jsx.str("div", {
                style: "display:flex;"
            }, IE.jsx.str("div", {
                class: [aParams.options.insriptions.classImageCreation, 'img-inscription'],
                style: "align-self: center;"
            }), IE.jsx.str("div", {
                style: "align-self: center;"
            }, IE.jsx.str("div", {
                class: "Texte14 Gras"
            }, aParams.traductions.inscriptions.boutonCreation.titre), IE.jsx.str("div", {
                style: "padding-top:10px;"
            }, aParams.traductions.inscriptions.boutonCreation.info))))), IE.jsx.str("div", null, IE.jsx.str("ie-bouton", {
                "ie-model": "btnConnexionInscription",
                class: "Texte12 AvecMain themeBoutonNeutre height-auto",
                style: "width:calc(100% - 20px);min-height:105px;text-align: left;border-radius:0;padding:20px;margin:0px 10px 10px 10px;"
            }, IE.jsx.str("div", {
                style: "display:flex;"
            }, IE.jsx.str("div", {
                class: [aParams.options.insriptions.classImageInscription, 'img-inscription'],
                style: "align-self: center;"
            }), IE.jsx.str("div", {
                style: "align-self: center;"
            }, IE.jsx.str("div", {
                class: "Texte14 Gras"
            }, aParams.traductions.inscriptions.boutonEspaceInscription.titre), IE.jsx.str("div", {
                style: "padding-top:10px;"
            }, aParams.traductions.inscriptions.boutonEspaceInscription.info)))))), " ", IE.jsx.str("article", {
                id: aParams.id.connect,
                "ie-if": "visibiliteConnexion",
                role: "main",
                class: "bloc-elem bloc-connexion-wrapper",
                style: aParams.options.decalageLogin && 'margin-left: 50%;'
            }, IE.jsx.str("header", null, IE.jsx.str("h1", {
                tabindex: "0"
            }, aParams.options.nomEspace), IE.jsx.str("div", {
                "aria-hidden": "true",
                class: aParams.options.classImageEspace
            })), IE.jsx.str("div", {
                class: "loginBox",
                role: "form"
            }, IE.jsx.str("fieldset", {
                "ie-if": "visibiliteModeConnexion",
                class: "connexion-wrapper field-contain"
            }, IE.jsx.str("legend", {
                class: "sr-only"
            }, aParams.traductions.ariaDescrModeConnexion), IE.jsx.str("label", null, aParams.traductions.texteModeConnexion), IE.jsx.str("ie-radio", {
                "ie-model": "choixConnexion(0)"
            }, aParams.traductions.modeConnexion1), IE.jsx.str("ie-radio", {
                "ie-model": "choixConnexion(1)"
            }, aParams.traductions.modeConnexion2), IE.jsx.str("ie-btntooltip", {
                "ie-model": lBtnTooltipModeConnex,
                class: [Divers_css_1.StylesDivers.mLeft]
            })), IE.jsx.str("p", {
                class: "text-end"
            }, aParams.traductions.texteChampsObligatoires), IE.jsx.str("div", {
                class: "form-wrapper"
            }, aParams.options.urlLogo && (IE.jsx.str("div", {
                class: "img-contain"
            }, IE.jsx.str("img", {
                src: aParams.options.urlLogo,
                alt: "",
                "aria-hidden": "true",
                style: "max-width:100px;max-height:100px;",
                onerror: "$(this).remove();"
            }))), IE.jsx.str("div", {
                class: "fields-contain flex-end",
                style: `color:${aParams.couleur.themeNeutre.sombre};`
            }, IE.jsx.str("div", {
                class: "input-field label-up"
            }, IE.jsx.str("label", {
                class: "champ-requis",
                for: aParams.id.identification
            }, aParams.traductions.texteIdentifiant), IE.jsx.str("div", {
                class: "flex-contain full-width"
            }, IE.jsx.str("input", {
                id: aParams.id.identification,
                "ie-model": "login",
                "ie-textbrut": true,
                type: "text",
                title: aParams.traductions.texteTitleIdentifiant,
                class: "fluid-bloc",
                tabindex: "0",
                placeholder: aParams.traductions.textePlaceholderIdentifiant,
                "aria-describedby": [aParams.id.waiIdentifiant, aParams.id.msgErreur].join(' '),
                "aria-required": "true",
                "aria-label": aParams.traductions.textePlaceholderIdentifiant,
                "ie-attr": "getAttrLogin"
            }), IE.jsx.str("p", {
                id: aParams.id.waiIdentifiant,
                tabindex: "-1",
                "aria-hidden": "true",
                style: "display:none;"
            }, aParams.traductions.ariaDescrIdentifiant))), IE.jsx.str("div", {
                class: "input-field label-up"
            }, IE.jsx.str("label", {
                class: "champ-requis",
                for: aParams.id.motDePasse
            }, aParams.traductions.texteMotdepasse), IE.jsx.str("div", {
                class: "flex-contain full-width"
            }, IE.jsx.str("div", {
                class: "as-input as-password"
            }, IE.jsx.str("input", {
                id: aParams.id.motDePasse,
                "ie-model": "motDePasse",
                type: "password",
                title: aParams.traductions.texteTitleMotdepasse,
                tabindex: "0",
                placeholder: aParams.traductions.textePlaceholderMotdepasse,
                "aria-describedby": [aParams.id.waiMotDePasse, aParams.id.msgErreur].join(' '),
                "aria-required": "true",
                "aria-label": aParams.traductions.textePlaceholderMotdepasse,
                "ie-attr": "getAttrMDP"
            }), IE.jsx.str("p", {
                id: aParams.id.waiMotDePasse,
                tabindex: "-1",
                "aria-hidden": "true",
                style: "display:none;"
            }, aParams.traductions.ariaDescrMotdepasse), IE.jsx.str("ie-btnicon", {
                class: "icon_eye_open",
                "ie-model": "montrerMasquerMotDePasse()"
            }))))), " "), " ", IE.jsx.str("p", {
                id: aParams.id.msgErreur,
                class: "message-erreur",
                "aria-hidden": "true"
            }), IE.jsx.str("ie-bouton", {
                id: aParams.id.btnConnexion,
                title: aParams.traductions.titreBouton,
                "ie-model": "boutonValidation",
                class: "themeBoutonPrimaire",
                style: "width:100%",
                tabindex: "0"
            }, aParams.traductions.texteBouton), IE.jsx.str("div", {
                "ie-display": "visibiliteRecupIdMdp",
                class: "recup-mdp"
            }, IE.jsx.str("button", {
                class: "libelle",
                style: `color:${aParams.couleur.texte}`,
                "ie-node": lJsxNodeRecupMdp,
                "aria-haspopup": "dialog",
                "ie-tooltipdescribe": aParams.traductions.ariaDescrRecupIdMdp
            }, aParams.traductions.texteRecupIdMdp))), " "), " ", aParams.options.mentionsPagesPubliques && aParams.options.mentionsPagesPubliques.lien && IE.jsx.str("div", {
                style: "position:absolute; bottom:1rem; z-index:101; left:50%;"
            }, aParams.options.mentionsPagesPubliques.lien)), " ", IE.jsx.str("div", {
                "ie-identite": "getIdentiteFooter",
                style: "position:fixed; bottom:0; left:0; right:0; z-index:101;"
            }), aParams.options.urlImageFond && aParams.options.heightImageSuite && aParams.options.widthImageSuite && aParams.options.urlImageSuite && (IE.jsx.str("div", {
                id: aParams.id.imageSuite,
                onclick: `$('#${aParams.id.imageSuite}').toggle();`,
                class: "AvecMain full-width",
                style: `display: none;position:absolute;height:calc(100% - 50px);min-height:${aParams.options.heightImageSuite}px;padding-bottom:50px;max-width:100vw;background-image: url(${aParams.options.urlImageFond});top:30px;left:0;right:0;z-index:1;`
            }, IE.jsx.str("div", {
                class: "full-size",
                style: `max-height:calc(100% - 47px); background-position:center center;background-repeat: no-repeat;background-image: url(${aParams.options.urlImageSuite});background-size: contain;`
            }), IE.jsx.str("div", {
                class: "flex-contain flex-center p-right-xl",
                style: "position:absolute;right:30px;max-width:100rem"
            }, aParams.options.avecLienSuite && aParams.options.lienSuite && aParams.options.texteLienSuite && aParams.options.suiviLienSuite && (IE.jsx.str("a", {
                href: aParams.options.lienSuite,
                class: "Texte12 LienLouvre fluid-bloc m-right-l text-right",
                onclick: `$.get('${aParams.options.suiviLienSuite}');`
            }, aParams.options.texteLienSuite)), aParams.options.lienLogo && aParams.options.styleLogo && aParams.options.suiviLogo && (IE.jsx.str("a", {
                href: aParams.options.lienLogo,
                class: "fix-bloc m-right-big",
                style: aParams.options.styleLogo,
                onclick: `$.get('${aParams.options.suiviLogo}');`,
                "aria-label": aParams.traductions.ariaDescrLienPartenaire
            })))))), " "));
        }
        ;
        exports.getHtml = getHtml;
    },
    fn: 'interfaceconnexion.tsxmodele.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetFenetreRecupIdMdp = void 0;
        require("ObjetFenetreRecupIdMdp.css");
        exports.StylesObjetFenetreRecupIdMdp = {
            ObjetRecupIdMdp: 'ObjetRecupIdMdp',
            isDisabled: 'is-disabled',
            message: 'message',
            RecupIDMdp_Global_wrapper: 'RecupIDMdp_Global_wrapper',
            etape_main: 'etape_main',
            etape_wrapper: 'etape_wrapper',
            etape_btn: 'etape_btn',
            etape: 'etape',
            inputField: 'input-field',
            coordonnees: 'coordonnees',
            mdp: 'mdp',
            asPassword: 'as-password',
            btnImage: 'btnImage',
            fluid: 'fluid',
            btContain: 'bt-contain',
            lienConteneur: 'lien-conteneur',
            validationMdp: 'validationMdp',
            ObjetFenetre_Mobile: 'ObjetFenetre_Mobile',
            asInput: 'as-input'
        };
    },
    fn: 'objetfenetrerecupidmdp.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireRecupMDP = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetTraduction_1 = require("ObjetTraduction");
        exports.UtilitaireRecupMDP = {
            getTraductions: function(aEstCreation, aAvecResetParParent) {
                return {
                    texteHeader: aEstCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.headerCreation') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.header'),
                    texteStage1: aEstCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage1Creation') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage1'),
                    texteStage1_bis: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage1_bis'),
                    texteStage2: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2'),
                    texteStage3: aEstCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3Creation') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3'),
                    texteStage: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage'),
                    texteStage2_ok: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ok'),
                    texteStage2_ko_titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_titre'),
                    texteStage2_ko_multi: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_multi'),
                    texteStage2_ko_multi2: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_multi2'),
                    texteStage2_ko_zero: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_zero'),
                    texteStage2_ko_zero2: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_zero2'),
                    texteStage2_ko_parent: aAvecResetParParent ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_parent') : '',
                    texteStage2_ko_creation: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_creation'),
                    texteStage2_ko_creation2: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_creation2'),
                    texteStage2_ko_creation3: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_creation3'),
                    texteStage3_ok: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3_ok'),
                    texteStage3_ok_creation: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3_ok_creation'),
                    texteStage3_ok_creationbis: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3_ok_creationbis'),
                    texteStage3_ko: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3_ko'),
                    texteMailOk: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.mailOk'),
                    texteMdp: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.motdepasse'),
                    texteConfirmation: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.confirmation'),
                    texteTerminer: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.terminer'),
                    texteNom: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.nom'),
                    textePrenom: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.prenom'),
                    texteEMail: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.email'),
                    texteEMailValide: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.emailValide')
                };
            },
            estCodeValide: function(aCode) {
                let lIsOkCode = false;
                if (aCode && RegExp('[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}').test(aCode)) {
                    const lTabAlpha = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                    let lTotal = 0;
                    for (const lChar of aCode) {
                        if (lChar !== '-' && !MethodesObjet_1.MethodesObjet.isFunction(lChar)) {
                            lTotal += lTabAlpha.indexOf(lChar) + 1;
                        }
                    }
                    if (lTotal % 62 === 0) {
                        lIsOkCode = true;
                    }
                }
                return lIsOkCode;
            }
        };
    },
    fn: 'utilitairerecupmdp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteRecupIdMDP = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetCryptage_1 = require("ObjetCryptage");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        class ObjetRequeteRecupIdMDP extends ObjetRequeteJSON_1.ObjetRequeteSaisie {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    afficherMessageErreur: false,
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('EnregistrementEnCours'),
                    messageEchecModeExclusif: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.RecupModeConsultation')
                });
            }
            lancerRequete(aObjet) {
                const lEtape = aObjet.etape;
                const lEstCreation = aObjet.estCreation;
                const lCourriel = aObjet.courriel;
                const lNom = aObjet.nom;
                const lPrenom = aObjet.prenom;
                delete (aObjet.etape);
                delete (aObjet.nom);
                delete (aObjet.prenom);
                this.JSON.etape = lEtape;
                if (lEstCreation) {
                    this.JSON.estCreation = lEstCreation;
                    if (lEtape === 3) {
                        this.JSON.courriel = lCourriel;
                        delete (aObjet.courriel);
                    }
                    this.JSON.nom = lNom;
                    this.JSON.prenom = lPrenom;
                }
                this.JSON.donnee = lEtape === 3 ? ObjetCryptage_1.GCryptage.cryptageRSA.encrypter2048(new forge.util.ByteBuffer(JSON.stringify(aObjet))) : JSON.stringify(aObjet);
                return this.appelAsynchrone();
            }
            traiterReponseSaisieMessage(aMessagesErreurRapportSaisie, aReponse, aTitre) {
                super.traiterReponseSaisieMessage(aMessagesErreurRapportSaisie, aReponse, aTitre);
                if (this.messageErreur) {
                    this.messageErreur.titre = aTitre;
                }
            }
            actionApresRequete(aGenreReponse) {
                const lResult = Object.assign({
                    requeteReussite: aGenreReponse === ObjetRequeteJSON_1.EGenreReponseSaisie.succes,
                    JSONSignature: this.JSONSignature,
                    messageErreur: this.messageErreur
                }, this.JSONReponse);
                lResult.estEchec = this.JSONReponse.estEchec !== false;
                GEtatUtilisateur.setReglesSaisieMotDePasse(this.JSONReponse);
                this.callbackReussite.appel(lResult);
            }
        }
        exports.ObjetRequeteRecupIdMDP = ObjetRequeteRecupIdMDP;
        CollectionRequetes_1.Requetes.inscrire(TypesRequeteJSON_1.ConstantesIdRequetesAjaxCP.recupererInfosConnexion, ObjetRequeteRecupIdMDP);
    },
    fn: 'objetrequeterecupidmdp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetreRecupIdMDP = void 0;
        require("ObjetFenetreRecupIdMdp.css");
        const Invocateur_1 = require("Invocateur");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const LienPolitiqueMotDePasse_1 = require("LienPolitiqueMotDePasse");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ToucheClavier_1 = require("ToucheClavier");
        const ValidationMotDePasse_1 = require("ValidationMotDePasse");
        const UtilitaireEmail_1 = require("UtilitaireEmail");
        const UtilitaireRecupMDP_1 = require("UtilitaireRecupMDP");
        const ObjetRequeteRecupIdMDP_1 = require("ObjetRequeteRecupIdMDP");
        const ObjetHtml_1 = require("ObjetHtml");
        const AccessApp_1 = require("AccessApp");
        class ObjetFenetreRecupIdMDP extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.idStage = this.Nom + '_stage';
                this.idNom = this.Nom + '_nom';
                this.idPrenom = this.Nom + '_prenom';
                this.idCourriel = this.Nom + '_courriel';
                this.idCode = this.Nom + '_codesec';
                this.idMdp = this.Nom + '_mdp';
                this.idMdpbis = this.Nom + '_mdpbis';
                this.idValidationMdp = this.Nom + '_validMdp';
                this.stage = 1;
                this.courriel = '';
                this._nom = '';
                this._prenom = '';
                this.code = '';
                this.options = {
                    avecRecupParParent: false
                };
                this.setOptionsFenetre({
                    titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.titre'),
                    largeur: 675,
                    hauteur: 330,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('principal.annuler')],
                    largeurMin: 550,
                    hauteurMin: 323,
                    avecCroixFermeture: false,
                    fermerFenetreSurClicHorsFenetre: false,
                    estCreation: false
                });
            }
            free() {
                super.free();
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
            }
            jsxGetClassEtape(aNumeroEtape) {
                const lClass = ['etape', 'fluid-bloc'];
                if (aNumeroEtape !== this.stage) {
                    lClass.push('is-disabled');
                }
                return lClass.join(' ');
            }
            jsxGetStyleSaisieEmail() {
                return {
                    color: this.courriel && !UtilitaireEmail_1.TUtilitaireEmail.estValide(this.courriel.trim()) ? 'red' : ''
                };
            }
            jsxModeleInputMail() {
                return {
                    getValue: () => {
                        return this.courriel;
                    }
                    ,
                    setValue: (aValue) => {
                        this.courriel = aValue;
                    }
                    ,
                    keyupEnter: () => {
                        if (UtilitaireEmail_1.TUtilitaireEmail.estValide(this.courriel.trim())) {
                            this.evenementBouton();
                        }
                    }
                    ,
                    getDisabled: () => {
                        return this.stage !== 1;
                    }
                };
            }
            jsxModeleInputNom() {
                return {
                    getValue: () => {
                        return this._nom;
                    }
                    ,
                    setValue: (aValue) => {
                        this._nom = aValue;
                    }
                    ,
                    getDisabled: () => {
                        return this.stage !== 1;
                    }
                };
            }
            jsxModeleInputPrenom() {
                return {
                    getValue: () => {
                        return this._prenom;
                    }
                    ,
                    setValue: (aValue) => {
                        this._prenom = aValue;
                    }
                    ,
                    getDisabled: () => {
                        return this.stage !== 1;
                    }
                };
            }
            jsxModeleInputCode() {
                return {
                    getValue: () => {
                        return this.code;
                    }
                    ,
                    setValue: (aValue) => {
                        this.code = aValue;
                    }
                    ,
                    keyupEnter: () => {
                        this.evenementBouton();
                    }
                    ,
                    getDisabled: () => {
                        return this.stage !== 2;
                    }
                };
            }
            jsxModeleInputMDP(aNumeroMDP) {
                return {
                    getValue: () => {
                        if (!!this.mds) {
                            return this.mds[aNumeroMDP] || '';
                        }
                        return '';
                    }
                    ,
                    setValue: (aValue) => {
                        if (!this.mds) {
                            this.mds = {};
                        }
                        this.mds[aNumeroMDP] = aValue;
                    }
                    ,
                    getDisabled: () => {
                        return this.stage !== 3;
                    }
                };
            }
            jsxDisplayBoutonValider(aNumeroEtape) {
                return this.stage === aNumeroEtape;
            }
            jsxModeleBoutonValider(aNumeroEtape) {
                return {
                    event: () => {
                        this.evenementBouton();
                    }
                    ,
                    getDisabled: () => {
                        if (aNumeroEtape === 1) {
                            return !UtilitaireEmail_1.TUtilitaireEmail.estValide(this.courriel.trim()) && !this.optionsFenetre.estCreation;
                        } else if (aNumeroEtape === 2) {
                            return this.code.trim() === '';
                        } else if (aNumeroEtape === 3) {
                            return ($('#' + this.idMdp.escapeJQ()).val() === '');
                        }
                    }
                };
            }
            jsxModeleBoutonMontrerMasquerMDP(aId) {
                return {
                    event: () => {
                        const lTarget = ObjetHtml_1.GHtml.getElement(aId);
                        lTarget.type = lTarget.type === 'password' ? 'text' : 'password';
                        this.$refresh();
                    }
                    ,
                    getTitle: () => {
                        const lTarget = ObjetHtml_1.GHtml.getElement(aId);
                        return (lTarget === null || lTarget === void 0 ? void 0 : lTarget.type) === 'password' ? ObjetTraduction_1.GTraductions.getValeur('connexion.VoirMDP') : ObjetTraduction_1.GTraductions.getValeur('connexion.masquerMDP');
                    }
                };
            }
            jsxGetClassMontrerMasquerMDP(aId) {
                const lTarget = ObjetHtml_1.GHtml.getElement(aId);
                return (lTarget === null || lTarget === void 0 ? void 0 : lTarget.type) === 'password' ? 'icon_eye_open' : 'icon_eye_close';
            }
            composeContenu() {
                const lTraductionsRecupMDP = UtilitaireRecupMDP_1.UtilitaireRecupMDP.getTraductions(this.optionsFenetre.estCreation, this.options.avecRecupParParent);
                return (IE.jsx.str("div", {
                    class: "ObjetRecupIdMdp"
                }, IE.jsx.str("p", {
                    class: "message"
                }, lTraductionsRecupMDP.texteHeader), IE.jsx.str("div", {
                    class: "RecupIDMdp_Global_wrapper"
                }, this.composeEtape1(lTraductionsRecupMDP), this.composeEtape2(lTraductionsRecupMDP), this.composeEtape3(lTraductionsRecupMDP), IE.jsx.str("div", {
                    class: "lien-conteneur"
                }, LienPolitiqueMotDePasse_1.TLienPolitiqueMotDePasse.getLien()))));
            }
            composeEtape1(aTraductions) {
                const lLabel = `${aTraductions.texteStage} 1 : ${aTraductions.texteStage1} ${(!this.optionsFenetre.estCreation) ? `<span>${aTraductions.texteStage1_bis}</span>` : ''}`;
                const lBtn = (IE.jsx.str("ie-btnicon", {
                    class: "icon_envoyer bt-activable bt-big",
                    "ie-model": this.jsxModeleBoutonValider.bind(this, 1),
                    "ie-display": this.jsxDisplayBoutonValider.bind(this, 1),
                    title: ObjetTraduction_1.GTraductions.getValeur('Valider')
                }));
                return (IE.jsx.str("div", {
                    class: "flex-contain cols etape_main"
                }, IE.jsx.str("label", {
                    for: this.idCourriel
                }, lLabel), IE.jsx.str("div", {
                    class: "etape_wrapper"
                }, IE.jsx.str("div", {
                    "ie-class": this.jsxGetClassEtape.bind(this, 1)
                }, this.composeCoordonnees(aTraductions)), IE.jsx.str("div", {
                    class: "etape_btn fix-bloc self-end"
                }, lBtn))));
            }
            composeCoordonnees(aTraductions) {
                if (this.optionsFenetre.estCreation) {
                    return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                        class: "input-field"
                    }, IE.jsx.str("label", {
                        for: this.idNom
                    }, aTraductions.texteNom), IE.jsx.str("input", {
                        id: this.idNom,
                        type: "text",
                        name: "nom",
                        "aria-required": "true",
                        "ie-model": this.jsxModeleInputNom.bind(this),
                        tabindex: "0"
                    })), IE.jsx.str("div", {
                        class: "input-field"
                    }, IE.jsx.str("label", {
                        for: this.idPrenom
                    }, aTraductions.textePrenom), IE.jsx.str("input", {
                        id: this.idPrenom,
                        type: "text",
                        name: "prenom",
                        "aria-required": "true",
                        "ie-model": this.jsxModeleInputPrenom.bind(this),
                        tabindex: "0"
                    })), IE.jsx.str("div", {
                        class: "input-field"
                    }, IE.jsx.str("label", {
                        for: this.idCourriel
                    }, aTraductions.texteEMail), IE.jsx.str("input", {
                        id: this.idCourriel,
                        type: "email",
                        name: "courriel",
                        "aria-required": "true",
                        "ie-model": this.jsxModeleInputMail.bind(this),
                        "aria-label": aTraductions.texteEMail,
                        "ie-style": this.jsxGetStyleSaisieEmail.bind(this),
                        tabindex: "0"
                    })));
                } else {
                    return (IE.jsx.str("div", {
                        class: "input-field"
                    }, IE.jsx.str("input", {
                        type: "email",
                        id: this.idCourriel,
                        name: "courriel",
                        "aria-required": "true",
                        "ie-model": this.jsxModeleInputMail.bind(this),
                        "ie-style": this.jsxGetStyleSaisieEmail.bind(this),
                        tabindex: "0"
                    })));
                }
            }
            composeEtape2(aTraductions) {
                const lLabel = `${aTraductions.texteStage} 2 : ${aTraductions.texteStage2}`;
                const lBtn = (IE.jsx.str("ie-btnicon", {
                    class: "icon_envoyer bt-activable bt-big",
                    "ie-model": this.jsxModeleBoutonValider.bind(this, 2),
                    "ie-display": this.jsxDisplayBoutonValider.bind(this, 2),
                    title: ObjetTraduction_1.GTraductions.getValeur('Valider')
                }));
                return (IE.jsx.str("div", {
                    class: "flex-contain cols etape_main"
                }, IE.jsx.str("label", {
                    for: this.idCode
                }, lLabel), IE.jsx.str("div", {
                    class: "etape_wrapper"
                }, IE.jsx.str("div", {
                    "ie-class": this.jsxGetClassEtape.bind(this, 2)
                }, IE.jsx.str("div", {
                    class: "input-field"
                }, IE.jsx.str("input", {
                    type: "text",
                    id: this.idCode,
                    "ie-model": this.jsxModeleInputCode.bind(this),
                    disabled: "disabled",
                    tabindex: "0",
                    "aria-required": "true"
                }))), IE.jsx.str("div", {
                    class: "etape_btn fix-bloc self-end"
                }, lBtn))));
            }
            composeEtape3(aTraductions) {
                const lIdLabel = this.Nom + '_group_mdp';
                const lLabel = `${aTraductions.texteStage} 3 : ${aTraductions.texteStage3}`;
                const lBtn = (IE.jsx.str("ie-btnicon", {
                    class: "icon_disquette_pleine bt-activable bt-big",
                    "ie-model": this.jsxModeleBoutonValider.bind(this, 3),
                    "ie-display": this.jsxDisplayBoutonValider.bind(this, 3),
                    title: ObjetTraduction_1.GTraductions.getValeur('Valider')
                }));
                return (IE.jsx.str("div", {
                    class: "flex-contain cols etape_main"
                }, IE.jsx.str("label", {
                    id: lIdLabel
                }, lLabel), IE.jsx.str("div", {
                    class: "etape_wrapper"
                }, IE.jsx.str("div", {
                    "ie-class": this.jsxGetClassEtape.bind(this, 3),
                    role: "group",
                    "aria-labelledby": lIdLabel
                }, IE.jsx.str("div", {
                    class: "input-field mdp"
                }, IE.jsx.str("label", {
                    for: this.idMdp
                }, aTraductions.texteMdp), IE.jsx.str("div", {
                    class: "as-input as-password"
                }, IE.jsx.str("input", {
                    type: "password",
                    id: this.idMdp,
                    "ie-model": this.jsxModeleInputMDP.bind(this, 1),
                    disabled: "disabled",
                    tabindex: "0",
                    "aria-required": "true",
                    autocomplete: "new-password"
                }), IE.jsx.str("ie-btnicon", {
                    class: "icon_eye_open",
                    "ie-model": this.jsxModeleBoutonMontrerMasquerMDP.bind(this, this.idMdp),
                    "ie-class": this.jsxGetClassMontrerMasquerMDP.bind(this, this.idMdp)
                }))), IE.jsx.str("div", {
                    class: "input-field mdp"
                }, IE.jsx.str("label", {
                    for: this.idMdpbis
                }, aTraductions.texteConfirmation), IE.jsx.str("div", {
                    class: "as-input as-password"
                }, IE.jsx.str("input", {
                    type: "password",
                    id: this.idMdpbis,
                    "ie-model": this.jsxModeleInputMDP.bind(this, 2),
                    disabled: "disabled",
                    tabindex: "0",
                    "aria-required": "true",
                    autocomplete: "new-password"
                }), IE.jsx.str("ie-btnicon", {
                    class: "icon_eye_open",
                    "ie-model": this.jsxModeleBoutonMontrerMasquerMDP.bind(this, this.idMdpbis),
                    "ie-class": this.jsxGetClassMontrerMasquerMDP.bind(this, this.idMdpbis)
                })))), IE.jsx.str("div", {
                    class: "etape_btn fix-bloc self-end"
                }, lBtn)), IE.jsx.str("div", {
                    id: this.idValidationMdp,
                    class: "validationMdp"
                })));
            }
            evenementBouton() {
                if (this.optionsFenetre.estCreation && ((this._nom.trim() === '') || (this._prenom.trim() === '') || !UtilitaireEmail_1.TUtilitaireEmail.estValide(this.courriel.trim()))) {
                    const lMessage = [ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecInfosManquantes'), '<br />'];
                    lMessage.push('<ul>');
                    if (this._nom.trim() === '') {
                        lMessage.push('<li>', ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.nom'), '</li>');
                    }
                    if (this._prenom.trim() === '') {
                        lMessage.push('<li>', ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.prenom'), '</li>');
                    }
                    if (!UtilitaireEmail_1.TUtilitaireEmail.estValide(this.courriel.trim())) {
                        lMessage.push('<li>', ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.emailValide'), '</li>');
                    }
                    lMessage.push('</ul>');
                    (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecValidation'),
                        message: lMessage.join('')
                    });
                } else {
                    this.evenementBoutonApresVerification();
                }
            }
            async evenementBoutonApresVerification() {
                const lData = {
                    etape: this.stage
                };
                let lEnvoyer = false;
                if (this.optionsFenetre.estCreation) {
                    lData.estCreation = this.optionsFenetre.estCreation;
                }
                if (this.stage === 1) {
                    lData.courriel = this.courriel.trim();
                    lData.nom = this._nom.trim();
                    lData.prenom = this._prenom.trim();
                    lEnvoyer = true;
                    const lTraduction = this.optionsFenetre.estCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.headerCreation') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.header');
                    Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                    Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage, (aData) => {
                        alert(lTraduction);
                        aData.message = lTraduction;
                    }
                    );
                } else if (this.stage === 2) {
                    if (!UtilitaireRecupMDP_1.UtilitaireRecupMDP.estCodeValide(this.code)) {
                        await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.CodeInvalide')
                        });
                        $(`#${this.idCode.escapeJQ()}`).focus();
                        return;
                    } else {
                        this.actionSurRecupererDonnees();
                    }
                } else if (this.stage === 3) {
                    const lMdp = $('#' + this.idMdp.escapeJQ()).val();
                    const lMdpBis = $('#' + this.idMdpbis.escapeJQ()).val();
                    if (!lMdp || lMdp !== lMdpBis) {
                        (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.ConfirmationIncorrecte')
                        });
                        $('#' + this.idMdpbis.escapeJQ()).val('').focus();
                        return;
                    }
                    lData.codeSecurite = this.code;
                    lData.mdp = forge.util.encodeUtf8(lMdp.trim());
                    if (this.optionsFenetre.estCreation) {
                        lData.courriel = this.courriel.trim();
                        lData.nom = this._nom.trim();
                        lData.prenom = this._prenom.trim();
                    }
                    lEnvoyer = true;
                } else {
                    location.reload();
                }
                if (lEnvoyer) {
                    this.actionSurRecupererDonnees(await new ObjetRequeteRecupIdMDP_1.ObjetRequeteRecupIdMDP(this).lancerRequete(lData));
                }
            }
            surValidation() {
                if (this.stage === 1) {
                    this.fermer();
                } else {
                    location.reload();
                }
            }
            async actionSurRecupererDonnees(aResult) {
                if (aResult && !aResult.requeteReussite && (!aResult.JSONSignature || !aResult.JSONSignature.Erreur)) {
                    Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                    await (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        titre: aResult.messageErreur ? aResult.messageErreur.titre : '',
                        message: aResult.messageErreur && aResult.messageErreur.message ? aResult.messageErreur.message : (this.optionsFenetre.estCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecCreationCompte') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecRecuperation'))
                    });
                    location.reload();
                    return;
                }
                this.erreurSMTP = aResult && aResult.erreurSMTP;
                const lTraductionsRecupMDP = UtilitaireRecupMDP_1.UtilitaireRecupMDP.getTraductions(this.optionsFenetre.estCreation, this.options.avecRecupParParent);
                if (this.stage === 1) {
                    if (aResult.mailEnvoye) {
                        this.setBoutonActif(0, false);
                        this.stage = 2;
                        const lThis = this;
                        await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                            message: lTraductionsRecupMDP.texteMailOk
                        });
                        $('#' + lThis.idCode.escapeJQ()).focus();
                    } else if (aResult.nbrUtilisateurs >= 0) {
                        if (this.optionsFenetre.estCreation) {
                            let lMessage = lTraductionsRecupMDP.texteStage2_ko_multi;
                            if (aResult.nbrUtilisateurs === 1) {
                                lMessage = '<span class="Gras">' + lTraductionsRecupMDP.texteStage2_ko_creation + '</span><br />' + lTraductionsRecupMDP.texteStage2_ko_creation2 + '<br />' + lTraductionsRecupMDP.texteStage2_ko_creation3;
                            }
                            await (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecCreation'),
                                message: lMessage
                            });
                            this.fermer();
                        } else if ((aResult.nbrUtilisateurs === 0) || (aResult.nbrUtilisateurs > 1)) {
                            let lMessage = `<span class="Gras">${lTraductionsRecupMDP.texteStage2_ko_titre}</span><br /><br />`;
                            if (aResult.nbrUtilisateurs === 0) {
                                lMessage += `${lTraductionsRecupMDP.texteStage2_ko_zero}<br />`;
                                if (this.options.avecRecupParParent) {
                                    lMessage += lTraductionsRecupMDP.texteStage2_ko_parent;
                                } else {
                                    lMessage += lTraductionsRecupMDP.texteStage2_ko_zero2;
                                }
                            } else {
                                lMessage += `${lTraductionsRecupMDP.texteStage2_ko_multi}<br />`;
                                if (this.options.avecRecupParParent) {
                                    lMessage += lTraductionsRecupMDP.texteStage2_ko_parent;
                                } else {
                                    lMessage += lTraductionsRecupMDP.texteStage2_ko_multi2;
                                }
                            }
                            await (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                message: lMessage
                            });
                            $('#' + this.idCourriel.escapeJQ()).focus();
                        }
                    } else {
                        await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            titre: aResult.messageErreur ? aResult.messageErreur.titre : '',
                            message: aResult.messageErreur ? aResult.messageErreur.message : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.erreurSMTP')
                        });
                        Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                        this.fermer();
                    }
                } else if (this.stage === 2) {
                    this.stage = 3;
                    if (GEtatUtilisateur.reglesSaisieMotDePasse.init) {
                        $('#' + this.idValidationMdp.escapeJQ()).html(ValidationMotDePasse_1.ValidationMotDePasse.construire(GEtatUtilisateur.reglesSaisieMotDePasse, null, {
                            avecEspace: false
                        }));
                    }
                    setTimeout( () => {
                        $('#' + this.idMdp.escapeJQ()).focus();
                    }
                    , 400);
                } else if (this.stage === 3) {
                    if (aResult.erreurMDP) {
                        const lJMdp = $('#' + this.idMdp.escapeJQ());
                        await (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            titre: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.EchecModification'),
                            message: ValidationMotDePasse_1.ValidationMotDePasse.construire(GEtatUtilisateur.reglesSaisieMotDePasse, aResult.erreurMDP)
                        });
                        lJMdp.focus();
                        $('#' + this.idValidationMdp.escapeJQ()).html(ValidationMotDePasse_1.ValidationMotDePasse.construire(GEtatUtilisateur.reglesSaisieMotDePasse, aResult.erreurMDP, {
                            avecEspace: false
                        }));
                        $('#' + this.idMdp.escapeJQ()).val('');
                        $('#' + this.idMdpbis.escapeJQ()).val('');
                    } else {
                        this.stage = -1;
                        if (!aResult.estEchec) {
                            this.setOptionsFenetre({
                                listeBoutons: [lTraductionsRecupMDP.texteTerminer]
                            });
                            this.setBoutonActif(0, true);
                            Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                            if (this.optionsFenetre.estCreation) {
                                await (0,
                                AccessApp_1.getApp)().getMessage().afficher({
                                    titre: lTraductionsRecupMDP.texteStage3_ok_creation,
                                    message: lTraductionsRecupMDP.texteStage3_ok_creationbis
                                });
                                this.fermer();
                                this.callback.appel(this.stage, {
                                    identifiant: this.courriel.trim()
                                });
                            } else {
                                await (0,
                                AccessApp_1.getApp)().getMessage().afficher({
                                    message: lTraductionsRecupMDP.texteStage3_ok
                                });
                                location.reload();
                            }
                        } else {
                            Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                            await (0,
                            AccessApp_1.getApp)().getMessage().afficher({
                                titre: aResult.messageErreur ? aResult.messageErreur.titre : '',
                                message: aResult.messageErreur && aResult.messageErreur.message ? aResult.messageErreur.message : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecRecuperation')
                            });
                            location.reload();
                        }
                    }
                }
            }
            recupererDonnees() {
                super.recupererDonnees();
                $('#' + this.idCourriel.escapeJQ()).focus();
                $('#' + this.idMdp.escapeJQ() + ', #' + this.idMdpbis.escapeJQ()).on('keyup blur', {
                    aObjet: this
                }, this.estMdpValide);
            }
            async afficher() {
                if (this.erreurSMTP) {
                    (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                        message: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.erreurSMTP')
                    });
                    Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                    this.fermer();
                } else {
                    super.afficher();
                }
            }
            estMdpValide(event) {
                const lMdp = $('#' + event.data.aObjet.idMdp.escapeJQ()).val();
                const lIsOkMdp = lMdp.trim().length > 0;
                if (lIsOkMdp && event.type === 'keyup' && event.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                    event.data.aObjet.evenementBouton();
                }
            }
        }
        exports.ObjetFenetreRecupIdMDP = ObjetFenetreRecupIdMDP;
    },
    fn: 'objetfenetre_recupidmdp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteParametresUtilisateur = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetRequeteParametresUtilisateur extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        exports.ObjetRequeteParametresUtilisateur = ObjetRequeteParametresUtilisateur;
        CollectionRequetes_1.Requetes.inscrire('ParametresUtilisateur', ObjetRequeteParametresUtilisateur);
    },
    fn: 'objetrequeteparametresutilisateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesConnexion = void 0;
        require("Connexion.css");
        exports.StylesConnexion = {
            ImageLogo_Louvre: 'ImageLogo_Louvre',
            LienLouvre: 'LienLouvre',
            Image_Logo_PronoteBarreHaut: 'Image_Logo_PronoteBarreHaut'
        };
    },
    fn: 'connexion.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesPages_connexion = void 0;
        require("pages_connexion.css");
        exports.StylesPages_connexion = {
            ImageFond: 'ImageFond',
            BottomLeft: 'BottomLeft',
            Repeat: 'Repeat',
            Cover: 'Cover',
            Image_Connexion_Fond: 'Image_Connexion_Fond',
            Icone_EspaceEnseignant: 'Icone_EspaceEnseignant',
            Icone_EspacePrimEnseignant: 'Icone_EspacePrimEnseignant',
            Icone_EspaceAdministratif: 'Icone_EspaceAdministratif',
            Icone_EspacePrimAdministratif: 'Icone_EspacePrimAdministratif',
            Icone_EspaceEtudiant: 'Icone_EspaceEtudiant',
            Icone_EspacePrimEtudiant: 'Icone_EspacePrimEtudiant',
            Icone_EspaceSecretariat: 'Icone_EspaceSecretariat',
            Icone_EspaceParent: 'Icone_EspaceParent',
            Icone_EspacePrimParent: 'Icone_EspacePrimParent',
            Icone_EspaceAcademie: 'Icone_EspaceAcademie',
            Icone_EspaceEntreprise: 'Icone_EspaceEntreprise',
            Icone_EspaceAccompagnant: 'Icone_EspaceAccompagnant',
            Icone_EspacePrimAccompagnant: 'Icone_EspacePrimAccompagnant',
            Icone_EspaceAppariteur: 'Icone_EspaceAppariteur',
            Icone_EspaceTuteur: 'Icone_EspaceTuteur',
            Icone_EspacePeriscolaire: 'Icone_EspacePeriscolaire',
            Icone_EspaceMairie: 'Icone_EspaceMairie',
            Icone_EspaceInscription: 'Icone_EspaceInscription',
            Icone_EspacePrimInscription: 'Icone_EspacePrimInscription',
            Icone_EspaceInvite: 'Icone_EspaceInvite',
            Icone_EspaceAdministrationConsole: 'Icone_EspaceAdministrationConsole',
            btnConnexion: 'btn-connexion',
            imgBtnBg: 'img-btn-bg',
            imgBtn: 'img-btn',
            libelle: 'libelle',
            listeWrapper: 'liste-wrapper',
            retourEspace: 'retour-espace',
            titreDescriptif: 'titre-descriptif',
            mainWrapper: 'main-wrapper',
            wrapperConnectConteneur: 'wrapper-connect-conteneur',
            choixProfilContain: 'choix-profil-contain',
            iccp_lienDesktop: 'iccp_lienDesktop',
            libelleContain: 'libelle-contain',
            avecDescriptif: 'avec-descriptif',
            btnWrapper: 'btn-wrapper',
            descriptif: 'descriptif',
            imageAside: 'image-aside',
            blocElem: 'bloc-elem',
            footer: 'footer',
            blocConnexionWrapper: 'bloc-connexion-wrapper',
            loginBox: 'loginBox',
            connexionWrapper: 'connexion-wrapper',
            formWrapper: 'form-wrapper',
            inputField: 'input-field',
            recupMdp: 'recup-mdp',
            messageErreur: 'message-erreur',
            imgContain: 'img-contain',
            fieldsContain: 'fields-contain',
            asInput: 'as-input',
            asPassword: 'as-password',
            btnImage: 'btnImage',
            labelUp: 'label-up',
            imgInscription: 'img-inscription',
            pageDeconnexion: 'page-deconnexion',
            decoContent: 'deco-content',
            decoTitrePronote: 'deco-titre-pronote',
            decoTitrePrimaire: 'deco-titre-primaire',
            decoTitreEdt: 'deco-titre-edt',
            decoTitreHyperplanning: 'deco-titre-hyperplanning',
            pageDeconnexion_titre: 'pageDeconnexion_titre',
            message: 'message',
            bgEspaceEdt: 'bg-espace-edt',
            bgEspacePronote: 'bg-espace-pronote',
            bgEspacePrimaire: 'bg-espace-primaire'
        };
    },
    fn: 'pages_connexion.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteIdentification = void 0;
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetMoteurConnexion_1 = require("ObjetMoteurConnexion");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        class ObjetRequeteIdentification extends ObjetMoteurConnexion_1.ObjetMoteurConnexion.ObjetRequeteIdentificationCP {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('Identification')
                });
            }
            lancerRequete(aParam) {
                Object.assign(this.JSON, aParam);
                return this.appelAsynchrone();
            }
        }
        exports.ObjetRequeteIdentification = ObjetRequeteIdentification;
        CollectionRequetes_1.Requetes.inscrire(TypesRequeteJSON_1.ConstantesIdRequetesAjaxCP.identification, ObjetRequeteIdentification);
    },
    fn: 'objetrequeteidentification.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteAuthentificationPN = void 0;
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetMoteurConnexion_1 = require("ObjetMoteurConnexion");
        const TypesRequeteJSON_1 = require("TypesRequeteJSON");
        class ObjetRequeteAuthentificationPN extends ObjetMoteurConnexion_1.ObjetMoteurConnexion.ObjetRequeteAuthentificationCP {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('Authentification')
                });
            }
            lancerRequete(aParam) {
                this.JSON.connexion = aParam.genreConnexion;
                this.JSON.challenge = aParam.challenge;
                this.JSON.espace = GEtatUtilisateur.GenreEspace;
                return this.appelAsynchrone();
            }
        }
        exports.ObjetRequeteAuthentificationPN = ObjetRequeteAuthentificationPN;
        CollectionRequetes_1.Requetes.inscrire(TypesRequeteJSON_1.ConstantesIdRequetesAjaxCP.authentification, ObjetRequeteAuthentificationPN);
    },
    fn: 'objetrequeteauthentificationpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.InterfaceConnexionEspace = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_Connexion_1 = require("Enumere_Connexion");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const _InterfaceConnexion_1 = require("_InterfaceConnexion");
        const GImageConnexion = require("ObjetImageConnexion");
        const ObjetChaine_1 = require("ObjetChaine");
        const TypeArrierePlanAuthentification_1 = require("TypeArrierePlanAuthentification");
        const UtilitaireChangementLangue_1 = require("UtilitaireChangementLangue");
        const ObjetBandeauEspace_1 = require("ObjetBandeauEspace");
        const InterfaceBandeauPiedCommune_1 = require("InterfaceBandeauPiedCommune");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const UtilitaireSecurisationCompte_1 = require("UtilitaireSecurisationCompte");
        const ObjetHtml_1 = require("ObjetHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        const ModeleInterfaceConnexion = require("InterfaceConnexion.tsxModele");
        const MultiObjetFenetreRecupIdMDP = require("ObjetFenetre_RecupIdMDP");
        const ObjetRequeteParametresUtilisateur_1 = require("ObjetRequeteParametresUtilisateur");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        require("Connexion.css");
        require("pages_connexion.css");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const ObjetRequeteIdentification_1 = require("ObjetRequeteIdentification");
        const ObjetRequeteAuthentificationPN_1 = require("ObjetRequeteAuthentificationPN");
        class InterfaceConnexionEspace extends _InterfaceConnexion_1._InterfaceConnexion {
            constructor(...aParams) {
                super(...aParams);
                this.parametresSco = GParametres;
                this.applicationSco = GApplication;
                this.etatUtilisateurSco = this.applicationSco.getEtatUtilisateur();
                this.setOptions({
                    genreImageConnexion: this.parametresSco.genreImageConnexion,
                    urlImageConnexion: this.parametresSco.urlImageConnexion,
                    avecChoixConnexion: this.parametresSco.avecChoixConnexion,
                    avecRecupIdMdp: this.parametresSco.avecRecuperationInfosConnexion,
                    parentAutoriseChangerMDP: this.parametresSco.parentAutoriseChangerMDP,
                    pourInscription: [Enumere_Espace_1.EGenreEspace.Inscription].includes(this.etatUtilisateurSco.GenreEspace),
                    requetes: {
                        getRequeteIdent: (aPere) => new ObjetRequeteIdentification_1.ObjetRequeteIdentification(aPere),
                        getRequeteAuth: (aPere) => new ObjetRequeteAuthentificationPN_1.ObjetRequeteAuthentificationPN(aPere)
                    },
                    utilitaireChangementLangue: UtilitaireChangementLangue_1.UtilitaireChangementLangue
                });
            }
            construireInstances() {
                super.construireInstances();
                if (MultiObjetFenetreRecupIdMDP && MultiObjetFenetreRecupIdMDP.ObjetFenetreRecupIdMDP) {
                    this.identFenetreRecupIdMDP = this.addFenetre(MultiObjetFenetreRecupIdMDP.ObjetFenetreRecupIdMDP, null, this.initialiserRecupIdMDP);
                }
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getIdentiteBandeau: function() {
                        return {
                            class: ObjetBandeauEspace_1.ObjetBandeauEspace,
                            pere: {},
                            init: function(aBandeau) {
                                var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
                                const lEstDarkMode = ThemesCouleurs_1.ThemesCouleurs.getDarkMode();
                                let lLogoCollectiviteImage = null;
                                let lLogoCollectiviteLien = null;
                                if ((_a = aInstance.parametresSco) === null || _a === void 0 ? void 0 : _a.collectivite) {
                                    lLogoCollectiviteImage = lEstDarkMode && ((_e = (_d = (_c = (_b = aInstance.parametresSco) === null || _b === void 0 ? void 0 : _b.collectivite) === null || _c === void 0 ? void 0 : _c.logo) === null || _d === void 0 ? void 0 : _d.siteDesktop) === null || _e === void 0 ? void 0 : _e.sombre) ? (_j = (_h = (_g = (_f = aInstance.parametresSco) === null || _f === void 0 ? void 0 : _f.collectivite) === null || _g === void 0 ? void 0 : _g.logo) === null || _h === void 0 ? void 0 : _h.siteDesktop) === null || _j === void 0 ? void 0 : _j.sombre : (_o = (_m = (_l = (_k = aInstance.parametresSco) === null || _k === void 0 ? void 0 : _k.collectivite) === null || _l === void 0 ? void 0 : _l.logo) === null || _m === void 0 ? void 0 : _m.siteDesktop) === null || _o === void 0 ? void 0 : _o.clair;
                                    if ((_q = (_p = aInstance.parametresSco) === null || _p === void 0 ? void 0 : _p.collectivite) === null || _q === void 0 ? void 0 : _q.urlCollectivite) {
                                        lLogoCollectiviteLien = (_s = (_r = aInstance.parametresSco) === null || _r === void 0 ? void 0 : _r.collectivite) === null || _s === void 0 ? void 0 : _s.urlCollectivite;
                                    }
                                }
                                aBandeau.setParametres({
                                    logoDepartementImage: aInstance.parametresSco.logoDepartementImage,
                                    logoDepartementLien: aInstance.parametresSco.logoDepartementLien,
                                    logoCollectiviteImage: lLogoCollectiviteImage,
                                    logoCollectiviteLien: lLogoCollectiviteLien
                                });
                            }
                        };
                    },
                    getIdentiteFooter: function() {
                        return {
                            class: InterfaceBandeauPiedCommune_1.InterfaceBandeauPiedCommune,
                            pere: {}
                        };
                    }
                });
            }
            initialiserRecupIdMDP(aInstance) {
                aInstance.setOptions({
                    avecRecupParParent: this.options.parentAutoriseChangerMDP
                });
            }
            eventCreation() {
                if (this.applicationSco.getModeExclusif()) {
                    return this.applicationSco.getMessage().afficher({
                        message: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.RecupModeConsultation')
                    });
                }
                const lInstance = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(MultiObjetFenetreRecupIdMDP.ObjetFenetreRecupIdMDP, {
                    pere: this,
                    initialiser: function(aInstance) {
                        aInstance.setOptionsFenetre({
                            titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.titreCreation'),
                            estCreation: true
                        });
                    },
                    evenement: function(aStage) {
                        if (aStage === -1) {
                            this.options.pourInscription = false;
                        }
                    }
                });
                lInstance.afficher();
            }
            evenementRecupIdMDP() {
                if (this.applicationSco.getModeExclusif()) {
                    return this.applicationSco.getMessage().afficher({
                        message: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.RecupModeConsultation')
                    });
                }
                this.getInstance(this.identFenetreRecupIdMDP).afficher();
            }
            construirePage() {
                const lFctHtml = ModeleInterfaceConnexion.getHtml;
                let lGenreImageConnexion = this.options.genreImageConnexion;
                const lObjetImage = GImageConnexion.getObjetImagePronote(lGenreImageConnexion);
                lObjetImage.avecFichierFond = false;
                if (lGenreImageConnexion === TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre) {
                    if (this.applicationSco.estEDT) {
                        lObjetImage.classImageFond = 'bg-espace-edt ';
                        lObjetImage.applicationNom = 'espace-edt ';
                    } else {
                        lObjetImage.lienLogo = lObjetImage.lienLogo || 'https://www.louvre.fr';
                        lObjetImage.styleLogo = lObjetImage.styleLogo || 'background-image: url(images/Connexion/Louvre/logo-louvre.png);width: 110px;height: 33px;';
                        lObjetImage.avecLienSuite = true;
                        lObjetImage.texteLienSuite = lObjetImage.texteLienSuite || ObjetTraduction_1.GTraductions.getValeur('Louvre.Lien', ['<b><em>' + lObjetImage.nomExpo + '</em></b>']);
                        lObjetImage.lienSuite = lObjetImage.lienSuite || lObjetImage.lien;
                    }
                }
                if (lGenreImageConnexion === TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre) {
                    if (this.applicationSco.estPrimaire) {
                        lObjetImage.classImageFond = 'bg-espace-primaire ';
                        lObjetImage.applicationNom = 'espace-primaire ';
                    }
                }
                if (([TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Neutre, TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.PersonnaliseFichier, TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.PersonnaliseURL].indexOf(lGenreImageConnexion) === -1) && !lObjetImage.urlImageFond) {
                    lGenreImageConnexion = TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Neutre;
                }
                if (lGenreImageConnexion === TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.PersonnaliseURL) {
                    lObjetImage.classImageFond = 'Cover';
                }
                if (lGenreImageConnexion === TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.PersonnaliseFichier) {
                    lObjetImage.classImageFond = 'Cover';
                    lObjetImage.avecFichierFond = true;
                    lObjetImage.dataImageFond = this.parametresSco.urlFondEcran || '';
                }
                let lImageEspace = 'Icone_EspaceInvite';
                switch (this.etatUtilisateurSco.GenreEspace) {
                case Enumere_Espace_1.EGenreEspace.Professeur:
                    lImageEspace = 'Icone_EspaceEnseignant';
                    break;
                case Enumere_Espace_1.EGenreEspace.Eleve:
                    lImageEspace = 'Icone_EspaceEtudiant';
                    break;
                case Enumere_Espace_1.EGenreEspace.Etablissement:
                    lImageEspace = 'Icone_EspaceSecretariat';
                    break;
                case Enumere_Espace_1.EGenreEspace.Parent:
                    lImageEspace = 'Icone_EspaceParent';
                    break;
                case Enumere_Espace_1.EGenreEspace.Entreprise:
                    lImageEspace = 'Icone_EspaceEntreprise';
                    break;
                case Enumere_Espace_1.EGenreEspace.Academie:
                    lImageEspace = 'Icone_EspaceAcademie';
                    break;
                case Enumere_Espace_1.EGenreEspace.Administrateur:
                    lImageEspace = 'Icone_EspaceAdministratif';
                    break;
                case Enumere_Espace_1.EGenreEspace.Inscription:
                    lImageEspace = 'Icone_EspaceInscription';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimProfesseur:
                    lImageEspace = 'Icone_EspacePrimEnseignant';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimParent:
                    lImageEspace = 'Icone_EspacPrimeParent';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimEleve:
                    lImageEspace = 'Icone_EspacePrimEtudiant';
                    break;
                case Enumere_Espace_1.EGenreEspace.Accompagnant:
                    lImageEspace = 'Icone_EspaceAccompagnant';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimAccompagnant:
                    lImageEspace = 'Icone_EspacePrimAccompagnant';
                    break;
                case Enumere_Espace_1.EGenreEspace.Tuteur:
                    lImageEspace = 'Icone_EspaceTuteur';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimPeriscolaire:
                    lImageEspace = 'Icone_EspacePeriscolaire';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimMairie:
                    lImageEspace = 'Icone_EspaceMairie';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimDirection:
                    lImageEspace = 'Icone_EspaceAdministratif';
                    break;
                }
                let lCleIdentifiant;
                let lCleMotDePasse;
                let lCleIdentifiantTitre;
                let lCleMdpTitre;
                let lCleMdpMessage;
                let lCleIdentifiantMsg;
                if (this.applicationSco.getDemo()) {
                    lCleIdentifiant = 'connexion.identifiantInfoDemo';
                    lCleMotDePasse = 'connexion.motDePasseInfoDemo';
                    lCleIdentifiantTitre = 'connexion.identifiantTitreDemo';
                    lCleMdpTitre = 'connexion.motDePasseTitreDemo';
                    lCleMdpMessage = 'connexion.motDePasseMessageDemo';
                } else {
                    lCleIdentifiant = 'connexion.identifiantInfo';
                    lCleMotDePasse = 'connexion.motDePasseInfo';
                    lCleIdentifiantTitre = 'connexion.identifiantTitre';
                    lCleMdpTitre = 'connexion.motDePasseTitre';
                    if (this.etatUtilisateurSco.GenreEspace === Enumere_Espace_1.EGenreEspace.Inscription) {
                        lCleMdpMessage = 'connexion.motDePasseMsgInscription';
                        lCleIdentifiantMsg = 'connexion.identifiantMsgInscription';
                    } else {
                        lCleIdentifiantMsg = 'connexion.identifiantMessage';
                        lCleMdpMessage = 'connexion.motDePasseMessage';
                    }
                }
                const lParamHtml = {
                    instance: this,
                    id: this.id,
                    couleur: {
                        texte: GCouleur.texte,
                        themeNeutre: {
                            sombre: GCouleur.themeNeutre.sombre
                        }
                    },
                    traductions: {
                        altImageDeFond: ObjetTraduction_1.GTraductions.getValeur('connexion.altImageDeFond'),
                        texteBouton: ObjetTraduction_1.GTraductions.getValeur('connexion.seConnecter'),
                        titreBouton: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur('connexion.seConnecterTitre')),
                        texteModeConnexion: this.options.avecChoixConnexion ? ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexion') : '',
                        texteChampsObligatoires: ObjetTraduction_1.GTraductions.getValeur('connexion.champsObligatoires'),
                        texteIdentifiant: ObjetTraduction_1.GTraductions.getValeur('connexion.identifiant'),
                        ariaDescrModeConnexion: this.options.avecChoixConnexion ? ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionTitre') + ' ' + ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionMessage') : '',
                        ariaDescrIdentifiant: ObjetTraduction_1.GTraductions.getValeur('connexion.identifiantMessage'),
                        texteTitleIdentifiant: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleIdentifiantTitre) + (lCleIdentifiantMsg ? ' ' + ObjetTraduction_1.GTraductions.getValeur(lCleIdentifiantMsg) : '')),
                        textePlaceholderIdentifiant: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleIdentifiant)),
                        texteTitleMotdepasse: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleMdpTitre, [this.parametresSco.getNomEspace()]) + ' ' + ObjetTraduction_1.GTraductions.getValeur(lCleMdpMessage, [ObjetTraduction_1.GTraductions.getValeur('Onglet.Libelle')[Enumere_Onglet_1.EGenreOnglet.InfosPerso]])),
                        textePlaceholderMotdepasse: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleMotDePasse)),
                        texteMotdepasse: ObjetTraduction_1.GTraductions.getValeur('connexion.motDePasse'),
                        ariaDescrMotdepasse: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleMdpMessage, [ObjetTraduction_1.GTraductions.getValeur('Onglet.Libelle')[Enumere_Onglet_1.EGenreOnglet.InfosPerso]])),
                        texteRecupIdMdp: this.options.avecRecupIdMdp ? (this.options.pourInscription ? ObjetTraduction_1.GTraductions.getValeur('connexion.RecuperationMDP.texteBis') : ObjetTraduction_1.GTraductions.getValeur('connexion.RecuperationMDP.texte')) : '',
                        ariaDescrRecupIdMdp: this.options.avecRecupIdMdp ? ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur('connexion.RecuperationMDP.titre')) : '',
                        ariaDescrLienPartenaire: ObjetTraduction_1.GTraductions.getValeur('connexion.lienPartenaire'),
                        modeConnexion1: ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexion1'),
                        modeConnexion2: ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexion2'),
                        inscriptions: {
                            titre: ObjetTraduction_1.GTraductions.getValeur('inscription.titre'),
                            boutonEspaceParent: {
                                titre: ObjetTraduction_1.GTraductions.getValeur('inscription.parent.titre'),
                                info: ObjetTraduction_1.GTraductions.getValeur('inscription.parent.info')
                            },
                            boutonCreation: {
                                titre: ObjetTraduction_1.GTraductions.getValeur('inscription.creation.titre'),
                                info: ObjetTraduction_1.GTraductions.getValeur('inscription.creation.info')
                            },
                            boutonEspaceInscription: {
                                titre: ObjetTraduction_1.GTraductions.getValeur('inscription.espace.titre'),
                                info: ObjetTraduction_1.GTraductions.getValeur('inscription.espace.info')
                            }
                        },
                        AvertissementDemo: ObjetChaine_1.GChaine.replaceRCToHTML(ObjetTraduction_1.GTraductions.getValeur('AvertissementDemo'))
                    },
                    options: {
                        applicationNom: lObjetImage.applicationNom ? lObjetImage.applicationNom : '',
                        decalageLogin: ([TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre, TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre]).indexOf(lGenreImageConnexion) > -1,
                        classImageEspace: lImageEspace,
                        srcFondImage: lObjetImage.srcImage,
                        urlImageSuite: lObjetImage.urlImageSuite,
                        widthImageSuite: ObjetNavigateur_1.Navigateur.clientL > lObjetImage.widthImageSuite ? lObjetImage.widthImageSuite : '1230',
                        heightImageSuite: lObjetImage.heightImageSuite,
                        urlImageFond: lObjetImage.urlImageFond || this.options.urlImageConnexion,
                        classImageFond: lObjetImage.classImageFond || (lObjetImage.urlImageFond ? '' : GImageConnexion.getClassFond()),
                        couleurFondBg: lObjetImage.couleurFond || 'white',
                        couleurConnexion: lObjetImage.couleurConnexion || 'white',
                        avecLien: lObjetImage.avecLien || false,
                        avecLienSuite: lObjetImage.avecLienSuite || false,
                        lien: lObjetImage.lien,
                        lienSuite: lObjetImage.lienSuite,
                        lienLogo: lObjetImage.lienLogo,
                        styleLogo: lObjetImage.styleLogo,
                        texteLien: lObjetImage.texteLien,
                        texteLienSuite: lObjetImage.texteLienSuite,
                        suiviLogo: lObjetImage.suiviLogo || lObjetImage.suiviLogo1,
                        suiviLien: lObjetImage.suiviLien,
                        suiviLienSuite: lObjetImage.suiviLienSuite || lObjetImage.suiviLogo2,
                        couleurLien: lObjetImage.couleurLien || 'inherit',
                        bottomLien: lObjetImage.bottomLien || '0',
                        leftLien: lObjetImage.leftLien || '0',
                        tailleLien: lObjetImage.tailleLien || '100%',
                        nomEspace: this.parametresSco.getNomEspace(),
                        modeDemo: this.applicationSco.getDemo(),
                        urlLogo: this.parametresSco.urlLogo,
                        dataImageFond: lObjetImage.dataImageFond,
                        avecFichierFond: lObjetImage.avecFichierFond,
                        sansFichierFond: !lObjetImage.avecFichierFond,
                        insriptions: {
                            classImageParent: 'Icone_EspaceParent',
                            classImageCreation: 'Icone_EspaceInscription',
                            classImageInscription: 'Icone_EspaceInscription'
                        },
                        mentionsPagesPubliques: this.parametresSco.mentionsPagesPubliques
                    }
                };
                return lFctHtml(lParamHtml);
            }
            callbackInitSecurisationCompte() {
                if (this.estConnexionSansInterface()) {
                    const lJPage = $('#' + this.id.pageConnexionAuto.escapeJQ());
                    const lJParent = lJPage.parent();
                    lJPage.remove();
                    lJParent.ieHtmlAppend(this.construirePage(), {
                        controleur: this.controleur
                    });
                }
                ObjetHtml_1.GHtml.setDisplay(this.id.wrapperConnect, false);
            }
            callbackPersonnalisationMDPPromise(aParam) {
                return UtilitaireSecurisationCompte_1.UtilitaireSecurisationCompte.demarrerPersonnalisationMDP(aParam);
            }
            callbackSecurisationDoubleAuthPromise(aParam) {
                return UtilitaireSecurisationCompte_1.UtilitaireSecurisationCompte.demarrerDoubleAut(aParam);
            }
            async _reussiteAuthentification(aParamsAuthentification) {
                const lReponse = await new ObjetRequeteParametresUtilisateur_1.ObjetRequeteParametresUtilisateur(this).lancerRequete({
                    motDePasseInvalide: aParamsAuthentification.motDePasseInvalide || undefined
                });
                const lParams = Object.assign(aParamsAuthentification, lReponse);
                this.applicationSco.initAuthentification(lParams);
                this.etatUtilisateurSco.initAuthentification(lParams);
                this.parametresSco.initAuthentification(lParams);
                for (let I = 0; I < this.etatUtilisateurSco.listeOngletsOriginal.count(); I++) {
                    const lOnglet = this.etatUtilisateurSco.listeOngletsOriginal.get(I);
                    lOnglet.Actif = lOnglet.Actif !== false;
                    lOnglet.Visible = (lOnglet.Genre !== Enumere_Onglet_1.EGenreOnglet.Accueil);
                    lOnglet.estUnOnglet = lOnglet.onglet === null || lOnglet.onglet === undefined;
                    if (!lOnglet.estUnOnglet && lOnglet.Actif) {
                        lOnglet.onglet.avecSousOnglet = true;
                    }
                }
                const lOnglet = this._getOngletDemarrage();
                if (lOnglet !== null) {
                    this.etatUtilisateurSco.setGenreOnglet(lOnglet);
                }
                const lParametres = {
                    libelle: this.etatUtilisateurSco.Identification.ressource.getLibelle(),
                    listeRessource: this.etatUtilisateurSco.Identification.ListeRessources
                };
                if (lParams.messageAucuneEleve) {
                    lParametres.message = lParams.messageAucuneEleve;
                }
                this.applicationSco.afficherEspaceApresAuthentification(lParametres);
            }
            _getOngletDemarrage() {
                if (this.etatUtilisateurSco.forcerOngletInscription) {
                    return Enumere_Onglet_1.EGenreOnglet.InscriptionsEtablissement;
                }
                if (MethodesObjet_1.MethodesObjet.isNumeric(this.etatUtilisateurSco.getGenreOnglet())) {
                    return null;
                }
                let lOnglet = null;
                if (this.applicationSco.parametresUtilisateur.has('onglet') && this.etatUtilisateurSco.estOngletAutorise(this.applicationSco.parametresUtilisateur.get('onglet')) && (this.etatUtilisateurSco.GenreEspace !== Enumere_Espace_1.EGenreEspace.Professeur || this.etatUtilisateurSco.genreConnexion === Enumere_Connexion_1.EGenreConnexion.Normale)) {
                    lOnglet = this.applicationSco.parametresUtilisateur.get('onglet');
                }
                if (this.etatUtilisateurSco.avecPageAccueil() && this.etatUtilisateurSco.estOngletAutorise(Enumere_Onglet_1.EGenreOnglet.Accueil) && ((this.applicationSco.parametresUtilisateur.has('demarrerSurPageAccueil') && this.applicationSco.parametresUtilisateur.get('demarrerSurPageAccueil')) || lOnglet === null)) {
                    lOnglet = Enumere_Onglet_1.EGenreOnglet.Accueil;
                }
                return lOnglet;
            }
        }
        exports.InterfaceConnexionEspace = InterfaceConnexionEspace;
    },
    fn: 'interfaceconnexionespace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreImpression = void 0;
        var EGenreImpression;
        (function(EGenreImpression) {
            EGenreImpression[EGenreImpression["Aucune"] = 0] = "Aucune";
            EGenreImpression[EGenreImpression["Normale"] = 1] = "Normale";
            EGenreImpression[EGenreImpression["Format"] = 2] = "Format";
            EGenreImpression[EGenreImpression["Proportion"] = 3] = "Proportion";
            EGenreImpression[EGenreImpression["ProportionTempSaisieNotes"] = 4] = "ProportionTempSaisieNotes";
            EGenreImpression[EGenreImpression["GenerationPDF"] = 5] = "GenerationPDF";
        }
        )(EGenreImpression || (exports.EGenreImpression = EGenreImpression = {}));
    },
    fn: 'enumere_genreimpression.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeClientRest = void 0;
        var TypeClientRest;
        (function(TypeClientRest) {
            TypeClientRest[TypeClientRest["crSupprime01"] = 0] = "crSupprime01";
            TypeClientRest[TypeClientRest["crDropBox"] = 1] = "crDropBox";
            TypeClientRest[TypeClientRest["crGoogleDrive"] = 2] = "crGoogleDrive";
            TypeClientRest[TypeClientRest["crOneDrive"] = 3] = "crOneDrive";
            TypeClientRest[TypeClientRest["crSupprime02"] = 4] = "crSupprime02";
            TypeClientRest[TypeClientRest["crDigiposte"] = 5] = "crDigiposte";
            TypeClientRest[TypeClientRest["crOneNote"] = 6] = "crOneNote";
            TypeClientRest[TypeClientRest["crPentila"] = 7] = "crPentila";
            TypeClientRest[TypeClientRest["crCloudIndex"] = 8] = "crCloudIndex";
            TypeClientRest[TypeClientRest["crDigiposteCertifie"] = 9] = "crDigiposteCertifie";
            TypeClientRest[TypeClientRest["crClientNextCloud"] = 10] = "crClientNextCloud";
            TypeClientRest[TypeClientRest["crENEJ"] = 11] = "crENEJ";
            TypeClientRest[TypeClientRest["crENEJGAR"] = 12] = "crENEJGAR";
        }
        )(TypeClientRest || (exports.TypeClientRest = TypeClientRest = {}));
    },
    fn: 'typeclientrest.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetEtatUtilisateurCP = void 0;
        const Invocateur_1 = require("Invocateur");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const TypeClientRest_1 = require("TypeClientRest");
        const AccessApp_1 = require("AccessApp");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        global.GEtatUtilisateur = null;
        class ObjetEtatUtilisateurCP {
            constructor() {
                this.EtatSaisie = false;
                this.codePINFixe = false;
                this.IdCourant = '';
                this.reglesSaisieMotDePasse = {
                    min: 0,
                    max: 0,
                    regles: new TypeEnsembleNombre_1.TypeEnsembleNombre(),
                    init: false
                };
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.etatSaisie, this.setEtatSaisie.bind(this));
            }
            get listeOnglets() {
                return this._listeOnglets;
            }
            set listeOnglets(aValeur) {
                this._listeOnglets = aValeur;
            }
            setEtatSaisie(aEtat) {
                this.EtatSaisie = aEtat;
            }
            estEspaceEleve() {
                return false;
            }
            estEspaceParent() {
                return false;
            }
            estEspacePourEleve() {
                return false;
            }
            estEspacePourProf() {
                return false;
            }
            avecImports() {
                return false;
            }
            avecFicheEtablissement() {
                return false;
            }
            getUtilisateur() {
                return null;
            }
            estEspaceAvecMembre() {
                return false;
            }
            avecPlusieursMembres() {
                return false;
            }
            getMembre() {
                return null;
            }
            setNumeroEleve(aNumeroMembre) {
                return null;
            }
            avecPageAccueil() {
                return false;
            }
            getNumeroGenreEspace() {
                return this.GenreEspace;
            }
            getGenreOnglet() {
                return null;
            }
            getLibelleLongOnglet() {
                return '';
            }
            setTriListe(aParams) {
                const lParams = Object.assign({
                    liste: null,
                    tri: undefined,
                    colonnesTriables: true,
                    identifiant: 'id',
                    onglet: ''
                }, aParams);
                if (!lParams.liste || !lParams.liste.setOptionsListe || !lParams.identifiant || !lParams.colonnesTriables) {
                    return;
                }
                if (!this._trisListe_) {
                    this._trisListe_ = {};
                }
                const lCle = lParams.onglet + '|' + lParams.identifiant;
                if (!this._trisListe_[lCle]) {
                    this._trisListe_[lCle] = lParams.tri;
                }
                aParams.liste.setOptionsListe({
                    colonnesTriables: lParams.colonnesTriables,
                    numeroColonneTriDefaut: () => {
                        return this._trisListe_[lCle];
                    }
                    ,
                    evenementSurTri: (aColonnesTris) => {
                        this._trisListe_[lCle] = aColonnesTris;
                    }
                });
                return this;
            }
            setCodePINFixe(aVal) {
                this.codePINFixe = !!aVal;
            }
            getCodePINFixe() {
                return this.codePINFixe;
            }
            setReglesSaisieMotDePasse(aJSON) {
                if (aJSON && aJSON.reglesSaisieMDP) {
                    $.extend(this.reglesSaisieMotDePasse, aJSON.reglesSaisieMDP);
                    this.reglesSaisieMotDePasse.init = true;
                }
            }
            espacesAvecBoutonsTimeLine() {
                return true;
            }
            getUniquementNonLues() {
                if ((this.uniquementNonLues !== null) && (this.uniquementNonLues !== undefined)) {
                    return this.uniquementNonLues;
                } else {
                    return false;
                }
            }
            setUniquementNonLues(aBoolean) {
                this.uniquementNonLues = aBoolean;
            }
            avecCloudDisponibles() {
                return this.listeCloud && this.listeCloud.count() > 0;
            }
            avecCloudENEJDisponible() {
                return this.avecCloudDisponibles() && !!this.getCloudENEJ();
            }
            getCloudENEJ() {
                return GEtatUtilisateur.listeCloud.getElementParFiltre(aCloud => [TypeClientRest_1.TypeClientRest.crENEJ].includes(aCloud.typeClientRest));
            }
            avecGestionAppareilPhoto() {
                return IE.estMobile && !(ObjetNavigateur_1.Navigateur.isAndroid && (0,
                AccessApp_1.getApp)().estAppliMobile);
            }
            getPageCourante() {
                return this.pageCourante;
            }
            setPageCourante(aInstancePage) {
                this.pageCourante = aInstancePage;
            }
            estAvecCodeCompetences() {
                return false;
            }
            getCategorie() {
                return null;
            }
            setCategorie(aCategorie) {}
            getInfoSond() {
                return null;
            }
            setInfoSond(aInfosSond) {}
            estEspaceExecutionQCM() {
                return false;
            }
        }
        exports.ObjetEtatUtilisateurCP = ObjetEtatUtilisateurCP;
    },
    fn: 'objetetatutilisateurcp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetIdentification = void 0;
        class ObjetIdentification {
            constructor(aRessource, aListeRessources) {
                this.ressource = aRessource;
                this.setListeRessources(aListeRessources);
            }
            getMembre() {
                return this.NumeroEleve ? this.ListeRessources.getElementParNumero(this.NumeroEleve) : this.ressource;
            }
            setListeRessources(AListeRessources) {
                this.ListeRessources = AListeRessources;
                this.NumeroEleve = null;
                for (let I = 0; (I < this.ListeRessources.count()) && (this.NumeroEleve === null || this.NumeroEleve === undefined); I++) {
                    if (this.ListeRessources.get(I).AvecSelection !== false) {
                        this.NumeroEleve = this.ListeRessources.getNumero(I);
                    }
                }
            }
            getLibelleClasse() {
                const LEleve = this.getMembre();
                return (LEleve && LEleve.Classe) ? LEleve.Classe.getLibelle() : '';
            }
            getNumeroClasse() {
                const LEleve = this.getMembre();
                return (LEleve && LEleve.Classe) ? LEleve.Classe.getNumero() : '';
            }
            getLibelleGroupes() {
                const LEleve = this.getMembre();
                if (LEleve) {
                    const LListeGroupes = LEleve.ListeGroupes;
                    const N = !!LListeGroupes ? LListeGroupes.count() : 0;
                    const H = [];
                    for (let I = 0; I < N; I++) {
                        H.push(LListeGroupes.getLibelle(I));
                    }
                    return H.join(', ');
                }
                return '';
            }
        }
        exports.ObjetIdentification = ObjetIdentification;
    },
    fn: 'objetidentification.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetNavigation = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        class ObjetNavigation {
            constructor() {
                this.TableauxRessources = {};
                this.Classe = null;
                this.Groupe = null;
                this.Periode = null;
                this.Eleve = null;
                this.Service = null;
                this.Appreciation = null;
                this.avecCoursAnnule = true;
                this.Niveau = -1;
                this.NumeroMatiereCahierDeTextes = 0;
                this.triDevoirs = false;
            }
            setRessource(AGenreRessource, AParametre, ANumero, AGenre) {
                if (AParametre instanceof ObjetListeElements_1.ObjetListeElements) {
                    this.TableauxRessources[AGenreRessource] = MethodesObjet_1.MethodesObjet.dupliquer(AParametre);
                } else if (MethodesObjet_1.MethodesObjet.isObject(AParametre)) {
                    this.TableauxRessources[AGenreRessource] = new ObjetListeElements_1.ObjetListeElements().addElement(MethodesObjet_1.MethodesObjet.dupliquer(AParametre));
                } else {
                    this.TableauxRessources[AGenreRessource] = new ObjetListeElements_1.ObjetListeElements().addElement(new ObjetElement_1.ObjetElement(AParametre,ANumero,AGenre));
                }
            }
            getRessource(AGenreRessource) {
                return this.TableauxRessources[AGenreRessource] ? this.TableauxRessources[AGenreRessource].get(0) : null;
            }
            getRessources(AGenreRessource) {
                return this.TableauxRessources[AGenreRessource];
            }
            getNumeroRessource(AGenreRessource) {
                return this.getRessource(AGenreRessource) ? this.getRessource(AGenreRessource).getNumero() : null;
            }
            getGenreRessource(AGenreRessource) {
                return this.getRessource(AGenreRessource) ? this.getRessource(AGenreRessource).getGenre() : null;
            }
            getLibelleRessource(AGenreRessource) {
                return this.getRessource(AGenreRessource) ? this.getRessource(AGenreRessource).getLibelle() : null;
            }
        }
        exports.ObjetNavigation = ObjetNavigation;
    },
    fn: 'objetnavigation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireUrl = void 0;
        const ObjetChaine_1 = require("ObjetChaine");
        exports.UtilitaireUrl = {
            construireListeUrls(aListe, aParams) {
                const lParams = Object.assign({
                    genreFiltre: null,
                    genreRessource: exports.UtilitaireUrl.genreRessourceDefault,
                    separateur: ' ',
                    IEModelChips: '',
                    argsIEModelChips: null,
                    maxWidth: 0,
                    class: ''
                }, aParams);
                if (!aListe || !aListe.parcourir) {
                    return '';
                }
                const T = [];
                aListe.parcourir( (aElement, aIndex) => {
                    if (aElement.existe()) {
                        if (lParams.genreFiltre === null || lParams.genreFiltre === undefined || (aElement.getGenre() === lParams.genreFiltre)) {
                            let lArgsIEModel = null;
                            if (!!lParams.IEModelChips) {
                                lArgsIEModel = [aIndex];
                                if (!!lParams.argsIEModelChips && Array.isArray(lParams.argsIEModelChips)) {
                                    lArgsIEModel = lArgsIEModel.concat(lParams.argsIEModelChips);
                                }
                            }
                            const lIeChips = ObjetChaine_1.GChaine.composerUrlLienExterne({
                                documentJoint: aElement,
                                genreRessource: lParams.genreRessource,
                                maxWidth: lParams.maxWidth,
                                ieModelChips: lParams.IEModelChips,
                                argsIEModel: lArgsIEModel,
                                class: lParams.class
                            });
                            T.push(IE.jsx.str("div", null, lIeChips));
                        }
                    }
                }
                );
                let lResult = T.join(lParams.separateur);
                if (T.length > 0) {
                    lResult = IE.jsx.str("div", {
                        class: 'liste-url-chips'
                    }, lResult);
                }
                return lResult;
            },
            genreRessourceDefault: null
        };
    },
    fn: 'utilitaireurl.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreObservationVS = void 0;
        var TypeGenreObservationVS;
        (function(TypeGenreObservationVS) {
            TypeGenreObservationVS[TypeGenreObservationVS["OVS_DefautCarnet"] = 0] = "OVS_DefautCarnet";
            TypeGenreObservationVS[TypeGenreObservationVS["OVS_ObservationParent"] = 1] = "OVS_ObservationParent";
            TypeGenreObservationVS[TypeGenreObservationVS["OVS_Encouragement"] = 2] = "OVS_Encouragement";
            TypeGenreObservationVS[TypeGenreObservationVS["OVS_Autres"] = 3] = "OVS_Autres";
        }
        )(TypeGenreObservationVS || (exports.TypeGenreObservationVS = TypeGenreObservationVS = {}));
    },
    fn: 'typegenreobservationvs.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenrePunition = void 0;
        var TypeGenrePunition;
        (function(TypeGenrePunition) {
            TypeGenrePunition[TypeGenrePunition["GP_ExclusionCours"] = 0] = "GP_ExclusionCours";
            TypeGenrePunition[TypeGenrePunition["GP_Retenues"] = 1] = "GP_Retenues";
            TypeGenrePunition[TypeGenrePunition["GP_Devoir"] = 2] = "GP_Devoir";
            TypeGenrePunition[TypeGenrePunition["GP_Autre"] = 3] = "GP_Autre";
        }
        )(TypeGenrePunition || (exports.TypeGenrePunition = TypeGenrePunition = {}));
    },
    fn: 'typegenrepunition.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreRessourceUtil = exports.EGenreRessource = void 0;
        var EGenreRessource;
        (function(EGenreRessource) {
            EGenreRessource[EGenreRessource["Aucune"] = 0] = "Aucune";
            EGenreRessource[EGenreRessource["Classe"] = 1] = "Classe";
            EGenreRessource[EGenreRessource["Groupe"] = 2] = "Groupe";
            EGenreRessource[EGenreRessource["Enseignant"] = 3] = "Enseignant";
            EGenreRessource[EGenreRessource["Eleve"] = 4] = "Eleve";
            EGenreRessource[EGenreRessource["Responsable"] = 5] = "Responsable";
            EGenreRessource[EGenreRessource["Niveau"] = 6] = "Niveau";
            EGenreRessource[EGenreRessource["Orientation"] = 7] = "Orientation";
            EGenreRessource[EGenreRessource["Specialite"] = 8] = "Specialite";
            EGenreRessource[EGenreRessource["OptionSpecialite"] = 9] = "OptionSpecialite";
            EGenreRessource[EGenreRessource["Etablissement"] = 10] = "Etablissement";
            EGenreRessource[EGenreRessource["Periode"] = 11] = "Periode";
            EGenreRessource[EGenreRessource["Service"] = 12] = "Service";
            EGenreRessource[EGenreRessource["Absence"] = 13] = "Absence";
            EGenreRessource[EGenreRessource["Retard"] = 14] = "Retard";
            EGenreRessource[EGenreRessource["Exclusion"] = 15] = "Exclusion";
            EGenreRessource[EGenreRessource["Matiere"] = 16] = "Matiere";
            EGenreRessource[EGenreRessource["Salle"] = 17] = "Salle";
            EGenreRessource[EGenreRessource["CoEnseignant"] = 18] = "CoEnseignant";
            EGenreRessource[EGenreRessource["Suivis"] = 19] = "Suivis";
            EGenreRessource[EGenreRessource["Cours"] = 20] = "Cours";
            EGenreRessource[EGenreRessource["Infirmerie"] = 21] = "Infirmerie";
            EGenreRessource[EGenreRessource["AbsenceRepas"] = 22] = "AbsenceRepas";
            EGenreRessource[EGenreRessource["Pilier"] = 23] = "Pilier";
            EGenreRessource[EGenreRessource["ElementPilier"] = 24] = "ElementPilier";
            EGenreRessource[EGenreRessource["Competence"] = 25] = "Competence";
            EGenreRessource[EGenreRessource["_DisciplineBrevet"] = 26] = "_DisciplineBrevet";
            EGenreRessource[EGenreRessource["Palier"] = 27] = "Palier";
            EGenreRessource[EGenreRessource["SousItem"] = 28] = "SousItem";
            EGenreRessource[EGenreRessource["Evaluation"] = 29] = "Evaluation";
            EGenreRessource[EGenreRessource["Stage"] = 30] = "Stage";
            EGenreRessource[EGenreRessource["SousMatiere"] = 31] = "SousMatiere";
            EGenreRessource[EGenreRessource["MaitreDeStage"] = 32] = "MaitreDeStage";
            EGenreRessource[EGenreRessource["InspecteurPedagogique"] = 33] = "InspecteurPedagogique";
            EGenreRessource[EGenreRessource["Personnel"] = 34] = "Personnel";
            EGenreRessource[EGenreRessource["EvaluationHistorique"] = 35] = "EvaluationHistorique";
            EGenreRessource[EGenreRessource["DossierProgression"] = 36] = "DossierProgression";
            EGenreRessource[EGenreRessource["ContenuDeCours"] = 37] = "ContenuDeCours";
            EGenreRessource[EGenreRessource["TravailAFaire"] = 38] = "TravailAFaire";
            EGenreRessource[EGenreRessource["Progression"] = 39] = "Progression";
            EGenreRessource[EGenreRessource["Dispense"] = 40] = "Dispense";
            EGenreRessource[EGenreRessource["Punition"] = 41] = "Punition";
            EGenreRessource[EGenreRessource["Sanction"] = 42] = "Sanction";
            EGenreRessource[EGenreRessource["Communication"] = 43] = "Communication";
            EGenreRessource[EGenreRessource["AbsenceInternat"] = 44] = "AbsenceInternat";
            EGenreRessource[EGenreRessource["Observation"] = 45] = "Observation";
            EGenreRessource[EGenreRessource["ObservationProfesseurEleve"] = 46] = "ObservationProfesseurEleve";
            EGenreRessource[EGenreRessource["ConvocationVS"] = 47] = "ConvocationVS";
            EGenreRessource[EGenreRessource["DocumentJoint"] = 48] = "DocumentJoint";
            EGenreRessource[EGenreRessource["InternetCategorie"] = 49] = "InternetCategorie";
            EGenreRessource[EGenreRessource["DocJointEtablissement"] = 50] = "DocJointEtablissement";
            EGenreRessource[EGenreRessource["Option"] = 51] = "Option";
            EGenreRessource[EGenreRessource["ProgrammationPunition"] = 52] = "ProgrammationPunition";
            EGenreRessource[EGenreRessource["ReportPunition"] = 53] = "ReportPunition";
            EGenreRessource[EGenreRessource["DisciplineLivretScolaire"] = 54] = "DisciplineLivretScolaire";
            EGenreRessource[EGenreRessource["QCM"] = 55] = "QCM";
            EGenreRessource[EGenreRessource["ExecutionQCM"] = 56] = "ExecutionQCM";
            EGenreRessource[EGenreRessource["PartieDeClasse"] = 57] = "PartieDeClasse";
            EGenreRessource[EGenreRessource["DocJointEleve"] = 58] = "DocJointEleve";
            EGenreRessource[EGenreRessource["Devoir"] = 59] = "Devoir";
            EGenreRessource[EGenreRessource["InternetEnumere"] = 60] = "InternetEnumere";
            EGenreRessource[EGenreRessource["AppreciationBulletinCompetence"] = 61] = "AppreciationBulletinCompetence";
            EGenreRessource[EGenreRessource["Entreprise"] = 62] = "Entreprise";
            EGenreRessource[EGenreRessource["DomaineProfessionnel"] = 63] = "DomaineProfessionnel";
            EGenreRessource[EGenreRessource["OffreDeStage"] = 64] = "OffreDeStage";
            EGenreRessource[EGenreRessource["SujetDeStage"] = 65] = "SujetDeStage";
            EGenreRessource[EGenreRessource["DocumentCasier"] = 66] = "DocumentCasier";
            EGenreRessource[EGenreRessource["Message"] = 67] = "Message";
            EGenreRessource[EGenreRessource["PossessionMessage"] = 68] = "PossessionMessage";
            EGenreRessource[EGenreRessource["RelationMessageDocJointEtablissement"] = 69] = "RelationMessageDocJointEtablissement";
            EGenreRessource[EGenreRessource["Engagement"] = 70] = "Engagement";
            EGenreRessource[EGenreRessource["MesureConservatoire"] = 71] = "MesureConservatoire";
            EGenreRessource[EGenreRessource["SousCategorieObjetDossier"] = 72] = "SousCategorieObjetDossier";
            EGenreRessource[EGenreRessource["Incident"] = 73] = "Incident";
            EGenreRessource[EGenreRessource["ProtagonisteIncident"] = 74] = "ProtagonisteIncident";
            EGenreRessource[EGenreRessource["RelationIncidentFichierExterne"] = 75] = "RelationIncidentFichierExterne";
            EGenreRessource[EGenreRessource["RegimeEleve"] = 76] = "RegimeEleve";
            EGenreRessource[EGenreRessource["RepasAPreparer"] = 77] = "RepasAPreparer";
            EGenreRessource[EGenreRessource["SessionDeStage"] = 78] = "SessionDeStage";
            EGenreRessource[EGenreRessource["Materiel"] = 79] = "Materiel";
            EGenreRessource[EGenreRessource["Bourse"] = 80] = "Bourse";
            EGenreRessource[EGenreRessource["RelationTravailAFaireEleve"] = 81] = "RelationTravailAFaireEleve";
            EGenreRessource[EGenreRessource["LieuDossier"] = 82] = "LieuDossier";
            EGenreRessource[EGenreRessource["ElementProgramme"] = 83] = "ElementProgramme";
            EGenreRessource[EGenreRessource["ChapitreEltPgm"] = 84] = "ChapitreEltPgm";
            EGenreRessource[EGenreRessource["EltPgmTravailleCDT"] = 85] = "EltPgmTravailleCDT";
            EGenreRessource[EGenreRessource["Appreciation"] = 86] = "Appreciation";
            EGenreRessource[EGenreRessource["ExecutionDevoirKiosque"] = 87] = "ExecutionDevoirKiosque";
            EGenreRessource[EGenreRessource["PanierRessourceKiosque"] = 88] = "PanierRessourceKiosque";
            EGenreRessource[EGenreRessource["RessourceNumeriqueKiosque"] = 89] = "RessourceNumeriqueKiosque";
            EGenreRessource[EGenreRessource["MetaMatiere"] = 90] = "MetaMatiere";
            EGenreRessource[EGenreRessource["EvaluationSujet"] = 91] = "EvaluationSujet";
            EGenreRessource[EGenreRessource["EvaluationCorrige"] = 92] = "EvaluationCorrige";
            EGenreRessource[EGenreRessource["LibelleCours"] = 93] = "LibelleCours";
            EGenreRessource[EGenreRessource["Site"] = 94] = "Site";
            EGenreRessource[EGenreRessource["QuestionQCM"] = 95] = "QuestionQCM";
            EGenreRessource[EGenreRessource["RelationElevePilierDeCompetence"] = 96] = "RelationElevePilierDeCompetence";
            EGenreRessource[EGenreRessource["QuestionCopieQCM"] = 97] = "QuestionCopieQCM";
            EGenreRessource[EGenreRessource["Coordonnees"] = 98] = "Coordonnees";
            EGenreRessource[EGenreRessource["ResponsablePostulant"] = 99] = "ResponsablePostulant";
            EGenreRessource[EGenreRessource["ExecutionQCMEleve"] = 100] = "ExecutionQCMEleve";
            EGenreRessource[EGenreRessource["DocJointInscription"] = 101] = "DocJointInscription";
            EGenreRessource[EGenreRessource["CategorieDossier"] = 102] = "CategorieDossier";
            EGenreRessource[EGenreRessource["MEFGEP"] = 103] = "MEFGEP";
            EGenreRessource[EGenreRessource["AutreOrientation"] = 104] = "AutreOrientation";
            EGenreRessource[EGenreRessource["Commission"] = 105] = "Commission";
            EGenreRessource[EGenreRessource["ReponseEducative"] = 106] = "ReponseEducative";
            EGenreRessource[EGenreRessource["SuiviReponseEducative"] = 107] = "SuiviReponseEducative";
            EGenreRessource[EGenreRessource["NatureDocumentEleve"] = 108] = "NatureDocumentEleve";
            EGenreRessource[EGenreRessource["RelationCommissionFichierExterne"] = 109] = "RelationCommissionFichierExterne";
            EGenreRessource[EGenreRessource["Signataire"] = 110] = "Signataire";
            EGenreRessource[EGenreRessource["DocumentSignature"] = 111] = "DocumentSignature";
            EGenreRessource[EGenreRessource["PersonnelHistorique"] = 112] = "PersonnelHistorique";
            EGenreRessource[EGenreRessource["EnseignantHistorique"] = 113] = "EnseignantHistorique";
            EGenreRessource[EGenreRessource["DemandeDispense"] = 114] = "DemandeDispense";
            EGenreRessource[EGenreRessource["DocJointPriseDeRDV"] = 115] = "DocJointPriseDeRDV";
            EGenreRessource[EGenreRessource["Mediatheque"] = 116] = "Mediatheque";
            EGenreRessource[EGenreRessource["DossierMediatheque"] = 117] = "DossierMediatheque";
            EGenreRessource[EGenreRessource["Dortoir"] = 118] = "Dortoir";
            EGenreRessource[EGenreRessource["Chambre"] = 119] = "Chambre";
            EGenreRessource[EGenreRessource["DocJointAbsenceRessource"] = 120] = "DocJointAbsenceRessource";
            EGenreRessource[EGenreRessource["RetardInternat"] = 121] = "RetardInternat";
        }
        )(EGenreRessource || (exports.EGenreRessource = EGenreRessource = {}));
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireUrl_1 = require("UtilitaireUrl");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const TypeGenreObservationVS_1 = require("TypeGenreObservationVS");
        const TypeGenrePunition_1 = require("TypeGenrePunition");
        const EGenreRessourceUtil = {
            correspondAuGenreUtilisateurEspaceCourant(aGenre) {
                switch (GApplication.getEtatUtilisateur().GenreEspace) {
                case Enumere_Espace_1.EGenreEspace.Academie:
                    return (aGenre === EGenreRessource.InspecteurPedagogique);
                case Enumere_Espace_1.EGenreEspace.Eleve:
                case Enumere_Espace_1.EGenreEspace.Mobile_Eleve:
                case Enumere_Espace_1.EGenreEspace.PrimEleve:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve:
                    return (aGenre === EGenreRessource.Eleve);
                case Enumere_Espace_1.EGenreEspace.Entreprise:
                case Enumere_Espace_1.EGenreEspace.Mobile_Entreprise:
                    return (aGenre === EGenreRessource.MaitreDeStage);
                case Enumere_Espace_1.EGenreEspace.Etablissement:
                    return (aGenre === EGenreRessource.Personnel);
                case Enumere_Espace_1.EGenreEspace.Parent:
                case Enumere_Espace_1.EGenreEspace.Mobile_Parent:
                case Enumere_Espace_1.EGenreEspace.PrimParent:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimParent:
                    return (aGenre === EGenreRessource.Responsable);
                case Enumere_Espace_1.EGenreEspace.Tuteur:
                case Enumere_Espace_1.EGenreEspace.Mobile_Tuteur:
                case Enumere_Espace_1.EGenreEspace.Accompagnant:
                case Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant:
                case Enumere_Espace_1.EGenreEspace.PrimAccompagnant:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant:
                case Enumere_Espace_1.EGenreEspace.PrimPeriscolaire:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimPeriscolaire:
                case Enumere_Espace_1.EGenreEspace.PrimMairie:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie:
                    return (aGenre === EGenreRessource.Personnel);
                case Enumere_Espace_1.EGenreEspace.Professeur:
                case Enumere_Espace_1.EGenreEspace.Mobile_Professeur:
                case Enumere_Espace_1.EGenreEspace.PrimProfesseur:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur:
                    return (aGenre === EGenreRessource.Enseignant);
                case Enumere_Espace_1.EGenreEspace.PrimDirection:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection:
                case Enumere_Espace_1.EGenreEspace.Administrateur:
                case Enumere_Espace_1.EGenreEspace.Mobile_Administrateur:
                    return (aGenre === EGenreRessource.Personnel);
                default:
                    return false;
                }
            },
            getGenrePereCompetence(aGenre, aGenrePourEvaluation) {
                switch (aGenre) {
                case EGenreRessource.ElementPilier:
                    return null;
                case EGenreRessource.Competence:
                    return EGenreRessource.ElementPilier;
                case EGenreRessource.SousItem:
                    return EGenreRessource.Competence;
                case EGenreRessource.Evaluation:
                    return aGenrePourEvaluation;
                }
            },
            getNomImageAbsence(aGenreRessource, aObjet={}) {
                switch (aGenreRessource) {
                case EGenreRessource.ObservationProfesseurEleve:
                    switch (aObjet.genreObservation) {
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_DefautCarnet:
                        return 'Color_RecapVS_Lue icon_Defaut_de_carnet';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Autres:
                        if (aObjet.estLue === false) {
                            return 'Color_RecapVS_NonLue icon_asterisk';
                        }
                        return 'Color_RecapVS_Lue icon_asterisk';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_ObservationParent:
                        if (aObjet.estLue === false) {
                            return 'Color_RecapVS_NonLue icon_observation';
                        }
                        return 'Color_RecapVS_Lue icon_observation';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Encouragement:
                        if (aObjet.estLue === false) {
                            return 'Color_RecapVS_NonLue icon_smile';
                        }
                        return 'Color_RecapVS_Lue icon_smile';
                    default:
                        return '';
                    }
                case EGenreRessource.Absence:
                    if (aObjet.estUneCreationParent === true || (aObjet.confirmee === true && aObjet.justifie === true)) {
                        if (aObjet.refusee === true) {
                            return 'Color_RecapVS_NonLue iconVSDetail icon_exclamation';
                        } else if (aObjet.justifie === true) {
                            return 'Color_RecapVS_Lue iconVSDetail icon_absences';
                        } else {
                            return 'Color_RecapVS_Lue iconVSDetail icon_absences_prevue';
                        }
                    } else if (aObjet.justifie === false) {
                        return 'Color_RecapVS_NonLue icon_absences';
                    }
                    return 'Color_RecapVS_Lue icon_absences';
                case EGenreRessource.AbsenceRepas:
                    return 'Color_RecapVS_Lue icon_food';
                case EGenreRessource.AbsenceInternat:
                    return 'Color_RecapVS_Lue icon_internat';
                case EGenreRessource.Retard:
                    if (aObjet.justifie === false) {
                        return 'Color_RecapVS_NonLue icon_retard';
                    }
                    return 'Color_RecapVS_Lue icon_retard';
                case EGenreRessource.RetardInternat:
                    return 'Color_RecapVS_Lue icon_internat mix-icon_time';
                case EGenreRessource.Infirmerie:
                    return 'Color_RecapVS_Lue icon_f0fe';
                case EGenreRessource.Incident:
                    return 'Color_RecapVS_Lue icon_bolt';
                case EGenreRessource.Exclusion:
                    return 'Color_RecapVS_Lue icon_punition_exclusion';
                case EGenreRessource.Punition:
                    if (aObjet.estProgrammation) {
                        return 'Color_RecapVS_Lue icon_recap_vs_programmation';
                    }
                    switch (aObjet.genreNature) {
                    case TypeGenrePunition_1.TypeGenrePunition.GP_ExclusionCours:
                        return 'Color_RecapVS_Lue icon_punition_exclusion';
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Retenues:
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Devoir:
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Autre:
                        return 'Color_RecapVS_Lue icon_punition';
                    default:
                        return 'Color_RecapVS_Lue icon_punition';
                    }
                case EGenreRessource.Sanction:
                    if (aObjet.avecSursis === true) {
                        return 'Color_RecapVS_Lue icon_legal';
                    }
                    return 'Color_RecapVS_Lue icon_legal';
                case EGenreRessource.MesureConservatoire:
                    return 'Color_RecapVS_Lue icon_mesure_conservatoire';
                case EGenreRessource.Commission:
                    return 'Color_RecapVS_Lue icon_mode_conseil_classe';
                case EGenreRessource.Dispense:
                    return 'Color_RecapVS_Lue icon_dispense';
                }
                return '';
            },
            getIconAbsence(aGenreRessource, aObjet) {
                switch (aGenreRessource) {
                case EGenreRessource.Observation:
                case EGenreRessource.ObservationProfesseurEleve:
                    switch (aObjet.genreObservation) {
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_DefautCarnet:
                        return 'icon_Defaut_de_carnet';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Autres:
                        return 'icon_asterisk';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_ObservationParent:
                        return 'icon_observation';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Encouragement:
                        return 'icon_smile';
                    default:
                        return '';
                    }
                case EGenreRessource.Absence:
                    return 'icon_absences';
                case EGenreRessource.AbsenceRepas:
                case EGenreRessource.RepasAPreparer:
                    return 'icon_food';
                case EGenreRessource.AbsenceInternat:
                    return 'icon_internat';
                case EGenreRessource.Retard:
                    return 'icon_retard';
                case EGenreRessource.Infirmerie:
                    return 'icon_medkit';
                case EGenreRessource.Dispense:
                    return 'icon_dispense';
                case EGenreRessource.Incident:
                    return 'icon_bolt';
                case EGenreRessource.Exclusion:
                    return 'icon_punition_exclusion';
                case EGenreRessource.Punition:
                    switch (aObjet.genreNature) {
                    case TypeGenrePunition_1.TypeGenrePunition.GP_ExclusionCours:
                        return 'icon_punition_exclusion';
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Retenues:
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Devoir:
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Autre:
                        return 'icon_punition';
                    default:
                        return 'icon_punition';
                    }
                case EGenreRessource.Sanction:
                    return 'icon_legal';
                case EGenreRessource.MesureConservatoire:
                    return 'icon_mesure_conservatoire';
                }
                return '';
            },
            getPositionAbsence(aGenreRessource, aObjet={
                genreObservation: null
            }) {
                let lResult = 0;
                switch (aGenreRessource) {
                case EGenreRessource.ObservationProfesseurEleve:
                    switch (aObjet.genreObservation) {
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_ObservationParent:
                        lResult = 0;
                        break;
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Encouragement:
                        lResult = 1;
                        break;
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_DefautCarnet:
                        lResult = 2;
                        break;
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Autres:
                        lResult = 60;
                        break;
                    default:
                        ;lResult = 60;
                        break;
                    }
                    break;
                case EGenreRessource.Absence:
                    lResult = 10;
                    break;
                case EGenreRessource.AbsenceRepas:
                    lResult = 12;
                    break;
                case EGenreRessource.AbsenceInternat:
                    lResult = 13;
                    break;
                case EGenreRessource.Retard:
                    lResult = 21;
                    break;
                case EGenreRessource.Dispense:
                    lResult = 22;
                    break;
                case EGenreRessource.Infirmerie:
                    lResult = 20;
                    break;
                case EGenreRessource.Incident:
                    lResult = 25;
                    break;
                case EGenreRessource.Exclusion:
                    ;lResult = 30;
                    break;
                case EGenreRessource.Punition:
                    lResult = 30;
                    break;
                case EGenreRessource.MesureConservatoire:
                    lResult = 40;
                    break;
                case EGenreRessource.Sanction:
                    lResult = 50;
                    break;
                case EGenreRessource.Commission:
                    lResult = 55;
                    break;
                default:
                    lResult = 9999;
                    break;
                }
                return lResult;
            },
            getTitreFenetreSelectionRessource(aGenre, aSingulier=false) {
                switch (aGenre) {
                case EGenreRessource.Eleve:
                    return aSingulier ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerEleve') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerEleves');
                case EGenreRessource.Enseignant:
                    return aSingulier ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerProfesseur') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerProfesseurs');
                case EGenreRessource.Responsable:
                    return aSingulier ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerResponsable') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerResponsables');
                case EGenreRessource.Personnel:
                    return aSingulier ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerPersonnel') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerPersonnels');
                case EGenreRessource.MaitreDeStage:
                    return aSingulier ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerMaitreDeStage') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerMaitresDeStage');
                case EGenreRessource.InspecteurPedagogique:
                    return aSingulier ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerInspecteur') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerInspecteurs');
                case EGenreRessource.Periode:
                    return aSingulier ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerPeriode') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerPeriodes');
                case EGenreRessource.Classe:
                    return aSingulier ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerClasse') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.SelectionnerClasses');
                }
                return '';
            }
        };
        exports.EGenreRessourceUtil = EGenreRessourceUtil;
        UtilitaireUrl_1.UtilitaireUrl.genreRessourceDefault = EGenreRessource.DocumentJoint;
    },
    fn: 'enumere_ressource.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetEtatUtilisateur = void 0;
        const ObjetEtatUtilisateurCP_1 = require("ObjetEtatUtilisateurCP");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetIdentification_1 = require("ObjetIdentification");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetNavigation_1 = require("ObjetNavigation");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const Enumere_Connexion_1 = require("Enumere_Connexion");
        const ObjetDate_1 = require("ObjetDate");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        class ObjetEtatUtilisateur extends ObjetEtatUtilisateurCP_1.ObjetEtatUtilisateurCP {
            constructor(aGenreEspace) {
                super();
                this.applicationSco = GApplication;
                this.derniereDate = null;
                this.existeGenreOnglet = (aGenreOnglet) => {
                    const lGenreOnglet = this.listeOnglets.getElementParGenre(aGenreOnglet);
                    return lGenreOnglet && lGenreOnglet.Actif;
                }
                ;
                this.GenreEspace = aGenreEspace;
                this.Navigation = new ObjetNavigation_1.ObjetNavigation();
                this.genreOnglet = null;
                this.accessibilite = {
                    avecCodeCompetences: false
                };
            }
            get listeOngletsOriginal() {
                return super.listeOnglets;
            }
            get listeOnglets() {
                return this.getListeOngletsSelonContexte();
            }
            set listeOnglets(aValeur) {
                super.listeOnglets = aValeur;
            }
            initAuthentification(aParam) {
                var _a, _b;
                this.avecRessourcesGranulaire = aParam.avecRessourcesGranulaire;
                this.avecRessourcesRenduTAF = aParam.avecRessourcesRenduTAF;
                this.avecRessourcesEnvoiNote = aParam.avecRessourcesEnvoiNote;
                this.activerKiosqueRenduTAF = aParam.activerKiosqueRenduTAF;
                this.activerKiosqueEnvoiNote = aParam.activerKiosqueEnvoiNote && !this.pourPrimaire();
                if (aParam.messagesDyn && this.genreConnexion !== Enumere_Connexion_1.EGenreConnexion.Allegee) {
                    this.applicationSco.donneesCentraleNotifications.addMessagesDynamiques(aParam.messagesDyn);
                }
                this.listeRessourcesRecherche = aParam.listeRessourcesRecherche;
                this.modeSecurisationParDefaut = aParam.modeSecurisationParDefaut;
                if (aParam.messagerieSignature) {
                    this.messagerieSignature = aParam.messagerieSignature;
                }
                if (((_b = (_a = aParam === null || aParam === void 0 ? void 0 : aParam.listeAppareilsMobile_VisibleDebug) === null || _a === void 0 ? void 0 : _a.listeConnexionMobile) === null || _b === void 0 ? void 0 : _b.length) > 0) {
                    this.setListeAppareilsMobile(aParam.listeAppareilsMobile_VisibleDebug.listeConnexionMobile);
                }
                this.deserialiserOnglets(aParam);
                this.deserialiserRessources(aParam);
                this.deserialiserInfosSupp(aParam);
                this.deserialiserPage(aParam);
            }
            deserialiserOnglets(aParam) {
                this.listeOngletsInvisibles = aParam.listeOngletsInvisibles;
                this.listeGenreOngletsNotification = aParam.listeOngletsNotification;
                if (aParam.listeOnglets) {
                    this.listeOnglets = new ObjetListeElements_1.ObjetListeElements();
                    this.listeOngletsNotification = new ObjetListeElements_1.ObjetListeElements();
                    for (let i = 0; i < aParam.listeOnglets.length; i++) {
                        this._ajouterOnglet(aParam.listeOnglets[i], 0, null);
                    }
                }
            }
            deserialiserRessources(aJSON) {
                const lRessource = new ObjetElement_1.ObjetElement().fromJSON(aJSON.ressource);
                lRessource.libelleLong = lRessource.getLibelle();
                if (!!aJSON && !!aJSON.ressource) {
                    lRessource.estDelegue = aJSON.ressource.estDelegue;
                    lRessource.estMembreCA = aJSON.ressource.estMembreCA;
                    lRessource.avecDiscussionResponsables = aJSON.ressource.avecDiscussionResponsables;
                    lRessource.listeClassesDelegue = aJSON.ressource.listeClassesDelegue;
                    lRessource.nbMaxJoursDeclarationAbsence = aJSON.ressource.nbMaxJoursDeclarationAbsence;
                    lRessource.nbMaxJoursDeclarationDispCD = aJSON.ressource.nbMaxJoursDeclarationDispCD;
                    lRessource.nbMaxJoursDeclarationDispLD = aJSON.ressource.nbMaxJoursDeclarationDispLD;
                    if (aJSON.ressource.listeNumerosUtiles) {
                        this.listeNumerosUtiles = aJSON.ressource.listeNumerosUtiles;
                    }
                    if (aJSON.ressource.destinatairePersonnelsMairie) {
                        lRessource.destinatairePersonnelsMairie = aJSON.ressource.destinatairePersonnelsMairie;
                    }
                    lRessource.photoBase64 = aJSON.ressource.photoBase64;
                }
                let lMembreJSON, lMembre;
                const lListeRessources = new ObjetListeElements_1.ObjetListeElements();
                if (!!aJSON && !!aJSON.ressource && !!aJSON.ressource.listeRessources) {
                    for (let i = 0; i < aJSON.ressource.listeRessources.length; i++) {
                        lMembreJSON = aJSON.ressource.listeRessources[i];
                        lMembre = new ObjetElement_1.ObjetElement().fromJSON(lMembreJSON);
                        this._traiterUtilisateur(lMembre, lMembreJSON, aJSON);
                        lListeRessources.addElement(lMembre);
                    }
                } else if (!!aJSON && !!aJSON.ressource && !!aJSON.ressource.listeDisciplines) {
                    for (let i = 0; i < aJSON.ressource.listeDisciplines.length; i++) {
                        const lDisciplineJSON = aJSON.ressource.listeDisciplines[i];
                        const lDiscipline = new ObjetElement_1.ObjetElement().fromJSON(lDisciplineJSON);
                        lListeRessources.addElement(lDiscipline);
                        lDiscipline.ClassAffichage = 'Gras';
                        lDiscipline.AvecSelection = false;
                        lDiscipline.estGroupeDeRessource = true;
                        lDiscipline.Numero = 0;
                        if (!!lDisciplineJSON.listeRessources) {
                            for (let j = 0; j < lDisciplineJSON.listeRessources.length; j++) {
                                lMembreJSON = lDisciplineJSON.listeRessources[j];
                                lMembre = new ObjetElement_1.ObjetElement().fromJSON(lMembreJSON);
                                this._traiterUtilisateur(lMembre, lMembreJSON, aJSON);
                                lListeRessources.addElement(lMembre);
                                lMembre.pere = lDiscipline;
                                lMembre.ClassAffichage = 'GrandEspaceGauche';
                            }
                        }
                    }
                } else {
                    this._traiterUtilisateur(lRessource, aJSON.ressource, aJSON);
                }
                lListeRessources.setTri([ObjetTri_1.ObjetTri.init( (D) => {
                    return !((D.Genre === Enumere_Ressource_1.EGenreRessource.Eleve) && D.Classe && D.Classe.existeNumero());
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return D.pere ? D.pere.getLibelle() : D.Position > 0 ? D.Position : D.getLibelle();
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return !D.estGroupeDeRessource;
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return D.Position > 0 ? D.Position : D.getLibelle();
                }
                )]);
                lListeRessources.trier();
                this.setIdentification(lRessource, lListeRessources);
            }
            _traiterUtilisateur(aUtilisateur, aUtilisateurJSON, aJSONReponse) {
                if (aUtilisateurJSON.destinatairesCarnetLiaison) {
                    aUtilisateur.destinatairesCarnetLiaison = aUtilisateurJSON.destinatairesCarnetLiaison;
                    aUtilisateur.destinatairesCarnetLiaison.setTri([ObjetTri_1.ObjetTri.init('Genre'), ObjetTri_1.ObjetTri.init('Libelle')]).trier();
                }
                if (!!aUtilisateurJSON.listeProfesseurs && !!aJSONReponse.listeClasses) {
                    aUtilisateur.listeProfesseurs = aUtilisateurJSON.listeProfesseurs;
                    aUtilisateur.listeProfesseurs.parcourir(this._traiterListeProfesseurs.bind(this, aJSONReponse.listeClasses));
                    aUtilisateur.listeProfesseurs.trier();
                }
                if (aUtilisateurJSON.Etablissement !== undefined) {
                    aUtilisateur.Etablissement = aUtilisateurJSON.Etablissement;
                }
                if (aUtilisateurJSON.notificationsPush !== undefined) {
                    aUtilisateur.notificationsPush = aUtilisateurJSON.notificationsPush;
                }
                if (aUtilisateurJSON.estEnseignant !== undefined) {
                    aUtilisateur.estEnseignant = aUtilisateurJSON.estEnseignant;
                    if (aUtilisateur.estEnseignant === true) {
                        aUtilisateur.ressourceEnseignant = aUtilisateurJSON.ressourceEnseignant;
                    }
                }
                if (aUtilisateurJSON.estDirecteur !== undefined) {
                    aUtilisateur.estDirecteur = aUtilisateurJSON.estDirecteur;
                }
                if (aUtilisateurJSON.autoriserImage !== undefined) {
                    aUtilisateur.autoriserImage = aUtilisateurJSON.autoriserImage;
                }
                aUtilisateur.avecPhoto = !!aUtilisateurJSON.avecPhoto;
                if (aUtilisateurJSON.photoBase64) {
                    aUtilisateur.photoBase64 = aUtilisateurJSON.photoBase64;
                }
                if (aUtilisateurJSON.listeDestProfsDiscussionPrimEleve) {
                    aUtilisateur.listeDestProfsDiscussionPrimEleve = aUtilisateurJSON.listeDestProfsDiscussionPrimEleve;
                }
                if (aUtilisateurJSON.passeLeBrevet) {
                    aUtilisateur.passeLeBrevet = aUtilisateurJSON.passeLeBrevet;
                }
                if (aUtilisateurJSON.listeMatieresDeclarationDispense) {
                    aUtilisateur.listeMatieresDeclarationDispense = aUtilisateurJSON.listeMatieresDeclarationDispense;
                }
                if (aUtilisateurJSON.passeLeCFG) {
                    aUtilisateur.passeLeCFG = aUtilisateurJSON.passeLeCFG;
                }
                if (this.estEspacePourEleve()) {
                    aUtilisateur.Classe = new ObjetElement_1.ObjetElement().fromJSON(aUtilisateurJSON.classeDEleve);
                    aUtilisateur.libelleLong = aUtilisateur.getLibelle();
                    let lTestClasseCourant = false;
                    if (aUtilisateurJSON.listeClassesHistoriques !== undefined) {
                        aUtilisateur.listeClasseHistorique = aUtilisateurJSON.listeClassesHistoriques;
                        if (!aUtilisateurJSON.estClasseRattachementduJour) {
                            aUtilisateur.listeClasseHistorique.parcourir( (aClasse) => {
                                if (aClasse.courant) {
                                    lTestClasseCourant = true;
                                    aUtilisateur.libelleLong += ' (' + aClasse.getLibelle() + ')';
                                    return false;
                                }
                            }
                            );
                        }
                    }
                    if (!lTestClasseCourant && !!aUtilisateur.Classe && aUtilisateur.Classe.getLibelle()) {
                        aUtilisateur.libelleLong += ' (' + aUtilisateur.Classe.getLibelle() + ')';
                    }
                    if (aUtilisateurJSON.listeGroupes !== undefined) {
                        aUtilisateur.ListeGroupes = aUtilisateurJSON.listeGroupes;
                    }
                    if (aUtilisateurJSON.autoriserImage !== undefined) {
                        aUtilisateur.autoriserImage = aUtilisateurJSON.autoriserImage;
                    }
                    aUtilisateur.tableauOnglets = [];
                    if (!!aUtilisateurJSON.listeOngletsPourPeriodes) {
                        aUtilisateurJSON.listeOngletsPourPeriodes.parcourir( (aOnglet) => {
                            aUtilisateur.tableauOnglets[aOnglet.getGenre()] = aOnglet;
                        }
                        );
                    }
                    if (!!aUtilisateurJSON.listeOngletsPourPiliers) {
                        aUtilisateurJSON.listeOngletsPourPiliers.parcourir( (aOnglet) => {
                            aUtilisateur.tableauOnglets[aOnglet.getGenre()] = aOnglet;
                        }
                        );
                    }
                }
                if (!!aUtilisateurJSON.acces) {
                    aUtilisateur.acces = aUtilisateurJSON.acces;
                }
            }
            deserialiserInfosSupp(aParam) {
                this.infosSupp = {};
                this.urlInstallClient = aParam.UrlInstallClient;
                this.urlParamClient = aParam.UrlParamClient;
                this.designationClient = aParam.designationClient;
                this.listeMotifsAbsences = aParam.listeMotifsAbsences;
                this.listeMotifsRetards = aParam.listeMotifsRetards;
                this.autorisationKiosque = !!aParam.autorisationKiosque;
                this.autorisationCloud = !!aParam.autorisationCloud;
                this.derniereConnexion = aParam.derniereConnexion;
                this.cloudIndexActif = !!aParam.cloudIndexActif;
                this.avecCloudIndex = !!aParam.avecCloudIndex;
                this.listeCloud = aParam.listeCloud || new ObjetListeElements_1.ObjetListeElements();
                this.listeCloudDepotServeur = aParam.listeCloudDepotServeur || new ObjetListeElements_1.ObjetListeElements();
                this.listeClasses = aParam.listeClasses;
                this.listeMatieres = aParam.listeMatieres;
                this.listeNiveaux = aParam.listeNiveaux;
                this.existeCDTsDetaches = aParam.existeCDTsDetaches;
                this.tabEtablissementsModeleGrille = aParam.tabEtablissementsModeleGrille;
                this.listeInformationsEtablissements = aParam.listeInformationsEtablissements;
                this.joursOuvresServices = aParam.joursOuvresServices;
            }
            deserialiserPage(aParam) {
                const lPage = aParam.page;
                if (lPage && this.existeGenreOnglet) {
                    if (this.existeGenreOnglet(lPage.Onglet)) {
                        if (lPage.membre) {
                            GEtatUtilisateur.setNumeroEleve(lPage.membre.getNumero());
                        }
                        if (lPage.cours || lPage.absenceRessource) {
                            const lCours = lPage.cours || lPage.absenceRessource;
                            this.setNavigationCours(lCours);
                        }
                        if (lPage.Date) {
                            const lDate = ObjetDate_1.GDate.getDateJour(lPage.Date);
                            this.setNavigationDate(lDate);
                        }
                        if (lPage.service) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Service, lPage.service.getLibelle(), lPage.service.getNumero(), lPage.service.getGenre());
                        }
                        if (lPage.palier) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Palier, lPage.palier.getLibelle(), lPage.palier.getNumero(), lPage.palier.getGenre());
                        }
                        if (lPage.competence) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Pilier, lPage.competence.getLibelle(), lPage.competence.getNumero(), lPage.competence.getGenre());
                        }
                        if (lPage.periode) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Periode, lPage.periode.getLibelle(), lPage.periode.getNumero(), lPage.periode.getGenre());
                        }
                        if (lPage.classe) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Classe, lPage.classe.getLibelle(), lPage.classe.getNumero(), lPage.classe.getGenre());
                        }
                        this.setPage(lPage);
                    }
                }
            }
            setIdentification(aRessource, aListeRessources) {
                this.Identification = new ObjetIdentification_1.ObjetIdentification(aRessource,aListeRessources);
                this.Identification.indiceEleve = 0;
                if (this.page && this.page.membre) {
                    this.setNumeroEleve(this.page.membre.getNumero());
                }
            }
            getUtilisateur() {
                return this.Identification.ressource;
            }
            getMembre() {
                return this.Identification.getMembre();
            }
            avecPlusieursMembres() {
                return (this.Identification && this.Identification.ListeRessources && this.Identification.ListeRessources.count() > 1);
            }
            setNumeroEleve(aNumeroEleve) {
                let lIndice = false;
                for (let I = 0; I < this.Identification.ListeRessources.count(); I++) {
                    const lEleve = this.Identification.ListeRessources.get(I);
                    if (lEleve.getNumero() === aNumeroEleve) {
                        lIndice = I;
                    }
                }
                if (lIndice === false) {
                    return;
                }
                this.Identification.indiceEleve = lIndice;
                this.Identification.NumeroEleve = aNumeroEleve;
                this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Eleve, this.getMembre().getLibelle(), aNumeroEleve);
                this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Classe, this.Identification.getLibelleClasse(), this.Identification.getNumeroClasse(), Enumere_Ressource_1.EGenreRessource.Classe);
            }
            getClasse() {
                return this.listeClasses.getElementParNumeroEtGenre(this.Navigation.getNumeroRessource(Enumere_Ressource_1.EGenreRessource.Classe), this.Navigation.getGenreRessource(Enumere_Ressource_1.EGenreRessource.Classe));
            }
            setClasse(aClasse) {
                this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Classe, aClasse);
            }
            getPage() {
                return this.page;
            }
            resetPage() {
                this.page = null;
            }
            setPage(aPage) {
                this.page = aPage;
                if (this.page && this.page.Onglet > 0) {
                    this.setGenreOnglet(this.page.Onglet);
                }
                if (this.page && this.page.ressource !== null && this.page.ressource !== undefined) {
                    this.setGenreRessource(this.page.ressource);
                }
            }
            setGenreRessource(aGenreRessource) {}
            getGenreOnglet() {
                return this.genreOnglet;
            }
            setGenreOnglet(aGenreOnglet) {
                this.genreOnglet = aGenreOnglet;
            }
            getInfosSupp(aNomStockage) {
                if (!this.infosSupp) {
                    return null;
                }
                if (!this.infosSupp[aNomStockage]) {
                    this.infosSupp[aNomStockage] = {};
                }
                return this.infosSupp[aNomStockage];
            }
            getOngletSelectionne() {
                let lOngletSelectionne = null;
                if (this.listeOnglets) {
                    let lGenreOngletActif = this.genreOnglet;
                    if (lGenreOngletActif) {
                        this.listeOnglets.parcourir( (aOnglet) => {
                            if (aOnglet.getGenre() === lGenreOngletActif) {
                                lOngletSelectionne = aOnglet;
                                return false;
                            }
                        }
                        );
                    }
                }
                return lOngletSelectionne;
            }
            getLibelleLongOnglet() {
                const lOnglet = this.getOngletSelectionne();
                return (lOnglet === null || lOnglet === void 0 ? void 0 : lOnglet.libelleLong) || (lOnglet === null || lOnglet === void 0 ? void 0 : lOnglet.getLibelle()) || '';
            }
            estOngletAutorise(aGenreOnglet) {
                let lOK = false;
                this.listeOnglets.parcourir( (aOnglet) => {
                    if (aOnglet.getGenre() === aGenreOnglet && aOnglet.Actif) {
                        lOK = true;
                        return false;
                    }
                }
                );
                return lOK;
            }
            estAvecCodeCompetences() {
                return this.accessibilite.avecCodeCompetences;
            }
            setAvecCodeCompetences(aActif) {
                this.accessibilite.avecCodeCompetences = aActif;
                if (this.applicationSco.getOptionsEspaceLocal()) {
                    this.applicationSco.getOptionsEspaceLocal().setAvecCodeCompetences(aActif);
                }
            }
            getDerniereDate() {
                if (this.derniereDate === null || this.derniereDate === undefined) {
                    return ObjetDate_1.GDate.getDateCourante();
                } else {
                    return this.derniereDate;
                }
            }
            setDerniereDate(aDate) {
                this.derniereDate = aDate;
            }
            getNavigationDate() {
                return null;
            }
            setNavigationDate(aDate) {}
            getNavigationCours() {
                return null;
            }
            setNavigationCours(aCours) {}
            getEtablissement() {
                if ([Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Mobile_Tuteur, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.Mobile_Entreprise, Enumere_Espace_1.EGenreEspace.Academie].includes(this.GenreEspace)) {
                    return !!this.getMembre().Etablissement ? this.listeInformationsEtablissements.getElementParNumero(this.getMembre().Etablissement.getNumero()) : null;
                } else {
                    return !!this.getUtilisateur().Etablissement ? this.listeInformationsEtablissements.getElementParNumero(this.getUtilisateur().Etablissement.getNumero()) : null;
                }
            }
            ongletEstVisible(aGenreOnglet) {
                return false;
            }
            desactiverPageAccueil() {
                this.sansPageAccueil = true;
            }
            avecPageAccueil() {
                if (this.sansPageAccueil) {
                    return false;
                }
                const lOnglet = this.listeOnglets.getElementParGenre(Enumere_Onglet_1.EGenreOnglet.Accueil);
                return [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Mobile_Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Mobile_Administrateur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Mobile_Tuteur, Enumere_Espace_1.EGenreEspace.PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.Mobile_PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.PrimMairie, Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie, Enumere_Espace_1.EGenreEspace.PrimDirection, Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.Mobile_Entreprise].includes(this.GenreEspace) && lOnglet && lOnglet.Actif;
            }
            estOngletActif(aGenreOnglet) {
                const lOnglet = this.listeOnglets.getElementParGenre(aGenreOnglet);
                return lOnglet ? lOnglet.Actif : false;
            }
            espacesAvecBoutonsTimeLine() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(this.GenreEspace);
            }
            estEspacePourEleve() {
                return [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.Mobile_Entreprise, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Mobile_Tuteur].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspaceEleve() {
                return [Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspaceParent() {
                return [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspacePourProf() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.Academie].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspaceMobile() {
                return [Enumere_Espace_1.EGenreEspace.Mobile_Administrateur, Enumere_Espace_1.EGenreEspace.Mobile_Commun, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Etablissement, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie, Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection, Enumere_Espace_1.EGenreEspace.Mobile_Entreprise].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspaceAvecMembre() {
                return GParametres.avecMembre;
            }
            pourPrimaire() {
                return [Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.Mobile_PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.PrimMairie, Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie, Enumere_Espace_1.EGenreEspace.PrimDirection, Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection].includes(this.GenreEspace);
            }
            pourThemePrimaire() {
                return [Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant].includes(this.GenreEspace);
            }
            estEspaceExecutionQCM() {
                return this.estEspaceEleve() || [Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent].includes(GEtatUtilisateur.GenreEspace);
            }
            getListeOngletsSelonContexte() {
                if (!this.Identification) {
                    return super.listeOnglets;
                }
                const lListeOnglet = MethodesObjet_1.MethodesObjet.dupliquer(super.listeOnglets);
                for (const lOnglet of lListeOnglet) {
                    if (!lOnglet.Actif) {
                        continue;
                    }
                    switch (lOnglet.Genre) {
                    case Enumere_Onglet_1.EGenreOnglet.FicheBrevet:
                        {
                            const lRessource = this.estEspaceAvecMembre() ? this.getMembre() : this.getUtilisateur();
                            if (lRessource === null || lRessource === void 0 ? void 0 : lRessource.passeLeBrevet) {
                                lOnglet.libelleLong = ObjetTraduction_1.GTraductions.getValeur('FicheBrevet.onglet.libelleLongBrevet');
                                lOnglet.setLibelle(ObjetTraduction_1.GTraductions.getValeur('FicheBrevet.onglet.titreOngletBrevet'));
                                break;
                            }
                            if (lRessource === null || lRessource === void 0 ? void 0 : lRessource.passeLeCFG) {
                                lOnglet.libelleLong = ObjetTraduction_1.GTraductions.getValeur('FicheBrevet.onglet.libelleLongCFG');
                                lOnglet.setLibelle(ObjetTraduction_1.GTraductions.getValeur('FicheBrevet.onglet.titreOngletCFG'));
                                break;
                            }
                            break;
                        }
                    default:
                        break;
                    }
                }
                return lListeOnglet;
            }
            getListeClasses(aParams) {
                if (this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.eleves.voirTousLesEleves) && !this.applicationSco.parametresUtilisateur.get('masquerDonneesAutresProfesseurs')) {
                    aParams.uniquementClasseEnseignee = false;
                }
                const lListeClasses = new ObjetListeElements_1.ObjetListeElements();
                let lRecupererClasse = false;
                if (aParams.avecToutes) {
                    lListeClasses.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('toutes'),0));
                }
                for (let I = 0; I < this.listeClasses.count(); I++) {
                    const lClasse = this.listeClasses.get(I);
                    if ((aParams.avecClasse && ((lClasse.getGenre() === Enumere_Ressource_1.EGenreRessource.Classe) || (lClasse.estClasseMN && aParams.avecClasseMultiNiveau))) || (aParams.avecGroupe && (lClasse.getGenre() === Enumere_Ressource_1.EGenreRessource.Groupe) && !lClasse.estClasseMN)) {
                        lRecupererClasse = true;
                        if (aParams.uniquementClassePrincipal) {
                            lRecupererClasse = lClasse.estPrincipal;
                        } else if (aParams.uniquementClasseEnseignee) {
                            lRecupererClasse = lClasse.estResponsable || lClasse.enseigne;
                        }
                        if (aParams.sansClasseDeRegroupement && lClasse.dansRegroupement) {
                            lRecupererClasse = false;
                        }
                        if (aParams.uniquementClasseStagiaire) {
                            lRecupererClasse = lClasse.getGenre() === Enumere_Ressource_1.EGenreRessource.Classe ? lClasse.estClasseDeMonStagiaire : lClasse.estGroupeDeMonStagiaire;
                        }
                        if (lRecupererClasse) {
                            let lClasseExistant = lListeClasses.getElementParElement(lClasse);
                            if (!lClasseExistant) {
                                lListeClasses.addElement(lClasse);
                            }
                            if (!aParams.sansClasseDeRegroupement && lClasse.listeComposantes && lClasse.estClasseMN) {
                                for (let j = 0; j < lClasse.listeComposantes.count(); j++) {
                                    let lComposante = lClasse.listeComposantes.get(j);
                                    const lClasseDeComposante = this.listeClasses.getElementParElement(lComposante);
                                    lClasseExistant = lListeClasses.getElementParElement(lClasseDeComposante);
                                    if (!lClasseExistant && !!lClasseDeComposante) {
                                        lClasseDeComposante.pere = lClasse;
                                        lListeClasses.addElement(lClasseDeComposante);
                                    }
                                }
                            }
                        }
                    }
                }
                return lListeClasses;
            }
            getCategorie() {
                return this.Navigation.categorie;
            }
            setCategorie(aCategorie) {
                this.Navigation.categorie = aCategorie;
            }
            getContexteBilletBlog() {
                return this.Navigation.contexteBillet;
            }
            setContexteBilletBlog(aBillet, aFenetreCommentairesOuverte=false) {
                if (!this.Navigation.contexteBillet) {
                    this.Navigation.contexteBillet = {
                        billet: null,
                        fenetreCommentairesOuverte: false
                    };
                }
                this.Navigation.contexteBillet.billet = aBillet;
                this.Navigation.contexteBillet.fenetreCommentairesOuverte = aFenetreCommentairesOuverte;
            }
            getInfoSond() {
                return this.Navigation.infoSond;
            }
            setInfoSond(aInfoSond) {
                this.Navigation.infoSond = aInfoSond;
            }
            getContexteTAF() {
                return this.Navigation.contexteTAF;
            }
            setContexteTAF(aContexteTAF) {
                this.Navigation.contexteTAF = aContexteTAF;
            }
            getContexteCDT() {
                return this.Navigation.contexteCDT;
            }
            setContexteCDT(aContexteCDT) {
                this.Navigation.contexteCDT = aContexteCDT;
            }
            getGenreAffichageCompteSelectionne() {
                return this.Navigation.GenreAffichageCompteSelectionne;
            }
            setGenreAffichageCompteSelectionne(aGenreAffichageCompte) {
                this.Navigation.GenreAffichageCompteSelectionne = aGenreAffichageCompte;
            }
            getContexteRemplacementsEnseignant() {
                return this.Navigation.contexteRemplacementsEnseignant;
            }
            setContexteRemplacementsEnseignant(contexteRemplacementsEnseignant) {
                this.Navigation.contexteRemplacementsEnseignant = contexteRemplacementsEnseignant;
            }
            estOngletAccessible(aGenreOnglet) {
                let lEstOngletAccessible = false;
                if (this.listeOnglets) {
                    const lEstOngletPresent = !!this.listeOnglets.getElementParGenre(aGenreOnglet);
                    if (lEstOngletPresent) {
                        lEstOngletAccessible = true;
                        if (this.listeOngletsInvisibles) {
                            let lEstInvisible = this.listeOngletsInvisibles.includes(aGenreOnglet);
                            if (lEstInvisible) {
                                lEstOngletAccessible = false;
                            }
                        }
                    }
                }
                return lEstOngletAccessible;
            }
            _ajouterOnglet(aJSON, aProfondeur, aOngletPere) {
                const lOnglet = new ObjetElement_1.ObjetElement().fromJSON(aJSON);
                if (this.listeOngletsInvisibles && this.listeOngletsInvisibles.includes(lOnglet.getGenre())) {
                    lOnglet.Actif = false;
                }
                lOnglet.Libelle = ObjetChaine_1.GChaine.replaceRCToHTML(ObjetTraduction_1.GTraductions.getValeur('Onglet.Libelle')[lOnglet.getGenre()]);
                lOnglet.libelleLong = ObjetTraduction_1.GTraductions.getValeur('Onglet.LibelleLong')[lOnglet.getGenre()] !== ' ' ? ObjetTraduction_1.GTraductions.getValeur('Onglet.LibelleLong')[lOnglet.getGenre()] : lOnglet.Libelle;
                if (lOnglet.Actif !== false && this.listeGenreOngletsNotification && this.listeGenreOngletsNotification.includes(lOnglet.getGenre())) {
                    const lElementNotification = MethodesObjet_1.MethodesObjet.dupliquer(lOnglet);
                    lElementNotification.profondeur = 0;
                    lElementNotification.avecClic = true;
                    this.listeOngletsNotification.addElement(lElementNotification);
                }
                lOnglet.profondeur = aProfondeur;
                if (aOngletPere) {
                    lOnglet.onglet = aOngletPere;
                }
                this.listeOnglets.addElement(lOnglet);
                let lAvecFilsActifs = false;
                if (aJSON.Onglet) {
                    for (let i = 0; i < aJSON.Onglet.length; i++) {
                        lAvecFilsActifs = this._ajouterOnglet(aJSON.Onglet[i], aProfondeur + 1, lOnglet) || lAvecFilsActifs;
                    }
                    if (!lAvecFilsActifs) {
                        lOnglet.Actif = false;
                    }
                }
                return lOnglet.Actif;
            }
            _traiterListeProfesseurs(aListeClasses, aProfesseur) {
                const lArrayClasse = aProfesseur.listeClasses;
                aProfesseur.listeClasses = new ObjetListeElements_1.ObjetListeElements();
                if (aProfesseur.getGenre() === 0) {
                    aProfesseur.Position = 0;
                }
                if (lArrayClasse) {
                    for (let i = 0; i < lArrayClasse.length; i++) {
                        let lClasse = aListeClasses.get(lArrayClasse[i]);
                        if (lClasse) {
                            let lClasseCopie = new ObjetElement_1.ObjetElement(lClasse.getLibelle(),lClasse.getNumero(),lClasse.getGenre());
                            lClasseCopie.estResponsable = lClasse.estResponsable;
                            aProfesseur.listeClasses.addElement(lClasseCopie);
                        }
                    }
                }
            }
            setListeAppareilsMobile(aListe) {
                const lListe = new ObjetListeElements_1.ObjetListeElements();
                for (let lIndex = 0; lIndex < aListe.length; lIndex++) {
                    lListe.add(ObjetElement_1.ObjetElement.create(Object.assign({
                        Genre: TypeSecurisationCompte_1.TypeGenreSourceConnexion.GSC_ApplicationMobile
                    }, aListe[lIndex])));
                }
                this.listeAppareilsMobile = lListe;
            }
            inverserEtatAssistantSaisie() {}
        }
        exports.ObjetEtatUtilisateur = ObjetEtatUtilisateur;
    },
    fn: 'objetetatutilisateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetFenetre_DepotDocument = void 0;
        require("ObjetFenetre_DepotDocument.css");
        exports.StylesObjetFenetre_DepotDocument = {
            ObjetFenetre_DepotDocument_racine: 'ObjetFenetre_DepotDocument_racine',
            ctnDate: 'ctn-date'
        };
    },
    fn: 'objetfenetre_depotdocument.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreInternetIndividu = void 0;
        var TypeGenreInternetIndividu;
        (function(TypeGenreInternetIndividu) {
            TypeGenreInternetIndividu[TypeGenreInternetIndividu["InternetIndividu_Professeur"] = 0] = "InternetIndividu_Professeur";
            TypeGenreInternetIndividu[TypeGenreInternetIndividu["InternetIndividu_Personnel"] = 1] = "InternetIndividu_Personnel";
            TypeGenreInternetIndividu[TypeGenreInternetIndividu["InternetIndividu_Parent"] = 2] = "InternetIndividu_Parent";
            TypeGenreInternetIndividu[TypeGenreInternetIndividu["InternetIndividu_ParentEleve"] = 3] = "InternetIndividu_ParentEleve";
            TypeGenreInternetIndividu[TypeGenreInternetIndividu["InternetIndividu_Eleve"] = 4] = "InternetIndividu_Eleve";
            TypeGenreInternetIndividu[TypeGenreInternetIndividu["InternetIndividu_MaitreDeStage"] = 5] = "InternetIndividu_MaitreDeStage";
            TypeGenreInternetIndividu[TypeGenreInternetIndividu["InternetIndividu_MaitreDeStageEleve"] = 6] = "InternetIndividu_MaitreDeStageEleve";
            TypeGenreInternetIndividu[TypeGenreInternetIndividu["InternetIndividu_Inspecteur"] = 7] = "InternetIndividu_Inspecteur";
        }
        )(TypeGenreInternetIndividu || (exports.TypeGenreInternetIndividu = TypeGenreInternetIndividu = {}));
    },
    fn: 'typegenreinternetindividu.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports._Cache = void 0;
        const AccessApp_1 = require("AccessApp");
        class _Cache {
            constructor() {
                this._actif = true;
                this._donnees = {};
            }
            setActif(aActif) {
                this._actif = aActif;
            }
            getActif() {
                const lApp = (0,
                AccessApp_1.getApp)();
                if (lApp.getOptionsDebug() && lApp.getOptionsDebug().desactiver_Cache) {
                    return false;
                }
                return this._actif;
            }
            getCle(aTableauElements) {
                let lCle = '';
                for (let i = 0; i < aTableauElements.length; i++) {
                    lCle += aTableauElements[i].getCle();
                }
                return lCle;
            }
            vider(aCle) {
                if (aCle) {
                    if (this.existeDonnee(aCle)) {
                        this.effacer(aCle);
                    }
                } else {
                    this._donnees = {};
                }
            }
            effacer(aCle) {
                const tmpArray = {};
                for (const x in this._donnees) {
                    if (x !== aCle) {
                        tmpArray[x] = this._donnees[x];
                    }
                }
                this._donnees = tmpArray;
            }
            existeDonnee(aCle) {
                const lApp = (0,
                AccessApp_1.getApp)();
                if (lApp.getOptionsDebug() && lApp.getOptionsDebug().desactiver_Cache) {
                    return false;
                }
                if (!this.getActif()) {
                    return false;
                }
                return (this._donnees[aCle] !== undefined);
            }
            getDonnee(aCle) {
                return this._donnees[aCle];
            }
            setDonnee(aCle, aObjetDonnee) {
                this._donnees[aCle] = aObjetDonnee;
            }
        }
        exports._Cache = _Cache;
    },
    fn: '_cache.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GCache = void 0;
        const _Cache_1 = require("_Cache");
        class Cache extends _Cache_1._Cache {
            constructor() {
                super();
                this._init();
            }
            _init() {
                this.general = new _Cache_1._Cache();
                this.ficheScolaire = new _Cache_1._Cache();
                this.dossierVS = new _Cache_1._Cache();
                this.agenda = new _Cache_1._Cache();
                this.livretScolaire = new _Cache_1._Cache();
                this.creneauxLibres = new _Cache_1._Cache();
            }
            reset() {
                this._init();
            }
        }
        exports.GCache = new Cache();
    },
    fn: 'cache.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreNiveauResponsabiliteUtil = exports.TypeGenreNiveauResponsabilite = void 0;
        var TypeGenreNiveauResponsabilite;
        (function(TypeGenreNiveauResponsabilite) {
            TypeGenreNiveauResponsabilite[TypeGenreNiveauResponsabilite["gnrAucun"] = 0] = "gnrAucun";
            TypeGenreNiveauResponsabilite[TypeGenreNiveauResponsabilite["gnrLegal"] = 1] = "gnrLegal";
            TypeGenreNiveauResponsabilite[TypeGenreNiveauResponsabilite["gnrEnCharge"] = 2] = "gnrEnCharge";
            TypeGenreNiveauResponsabilite[TypeGenreNiveauResponsabilite["gnrContact"] = 3] = "gnrContact";
        }
        )(TypeGenreNiveauResponsabilite || (exports.TypeGenreNiveauResponsabilite = TypeGenreNiveauResponsabilite = {}));
        const C_GenreNiveauResponsabiliteLegauxEnCharge = [TypeGenreNiveauResponsabilite.gnrLegal, TypeGenreNiveauResponsabilite.gnrEnCharge];
        exports.TypeGenreNiveauResponsabiliteUtil = {
            estFiltreParDefautActif(aTypeFonction) {
                return C_GenreNiveauResponsabiliteLegauxEnCharge.includes(aTypeFonction);
            }
        };
    },
    fn: 'typegenreniveauresponsabilite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteListePublics = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const Cache_1 = require("Cache");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetElement_1 = require("ObjetElement");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const TypeGenreNiveauResponsabilite_1 = require("TypeGenreNiveauResponsabilite");
        const MethodesObjet_1 = require("MethodesObjet");
        class ObjetRequeteListePublics extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            lancerRequete(aParam) {
                this.genres = aParam.genres;
                this.sansFiltreSurEleve = aParam.sansFiltreSurEleve || false;
                this.entreResponsables = aParam.entreResponsables;
                this.pourMessagerie = aParam.pourMessagerie;
                this.avecEmail = aParam.avecEmail;
                this.avecUniquementEmail = aParam.avecUniquementEmail;
                this.JSON = {
                    genres: new TypeEnsembleNombre_1.TypeEnsembleNombre().add(aParam.genres),
                    pourMessagerie: aParam.pourMessagerie,
                    sansFiltreSurEleve: this.sansFiltreSurEleve,
                    avecFonctionPersonnel: aParam.avecFonctionPersonnel || false,
                    avecEmail: aParam.avecEmail,
                    avecUniquementEmail: aParam.avecUniquementEmail,
                    avecFiltreDelegues: aParam.avecFiltreDelegues,
                    classe: aParam.classe,
                    eleve: aParam.eleve,
                    avecInfoRencontresSepareesDesResponsables: !!aParam.avecInfoRencontresSepareesDesResponsables,
                    avecInfoResponsablePreferentiel: !!aParam.avecInfoResponsablePreferentiel,
                    avecUniquementResponsableDelegue: !!aParam.avecUniquementResponsableDelegue,
                    estCtxModeleActualite: !!aParam.estCtxModeleActualite
                };
                const lCleCache = this._getCle();
                if (this.pourMessagerie && Cache_1.GCache && Cache_1.GCache.general._jetonViderCacheMessagerie && Cache_1.GCache.general.existeDonnee(lCleCache)) {
                    delete Cache_1.GCache.general._jetonViderCacheMessagerie;
                    Cache_1.GCache.general.vider(lCleCache);
                }
                if (Cache_1.GCache && Cache_1.GCache.general._jetonViderCacheListePublics && Cache_1.GCache.general.existeDonnee(lCleCache)) {
                    delete Cache_1.GCache.general._jetonViderCacheListePublics;
                    Cache_1.GCache.general.vider(lCleCache);
                }
                if (Cache_1.GCache && Cache_1.GCache.general.existeDonnee(lCleCache)) {
                    return new Promise( (aResolve, aReject) => {
                        this.reussitePromesse = aResolve;
                        this.echecPromesse = aReject;
                        this.executerCallbackReussite(aParam.genres, Cache_1.GCache.general.getDonnee(lCleCache));
                    }
                    );
                } else {
                    return this.appelAsynchrone();
                }
            }
            _getCle() {
                return `listePublic_${this.genres.sort().join('_')}${this.sansFiltreSurEleve}_${this.entreResponsables}_${!!this.pourMessagerie}_${this.avecEmail}_${this.avecUniquementEmail}`;
            }
            actionApresRequete() {
                if (Cache_1.GCache) {
                    Cache_1.GCache.general.setDonnee(this._getCle(), this.JSONReponse);
                }
                this.executerCallbackReussite(this.genres, this.JSONReponse);
            }
            executerCallbackReussite(aGenres, aDonneesJSON) {
                if (aDonneesJSON.listeFamilles) {
                    if (aDonneesJSON.listePublics) {
                        aDonneesJSON.listePublics.parcourir( (aPublic) => {
                            if (aPublic.listeNumerosSousFamille && aPublic.listeNumerosSousFamille.length > 0) {
                                for (let i = 0; i < aPublic.listeNumerosSousFamille.length; i++) {
                                    const lNumeroSousFamilleRecherche = aPublic.listeNumerosSousFamille[i].N;
                                    const lGenreSousFamilleRecherche = aPublic.listeNumerosSousFamille[i].G;
                                    const lObjFamilleSousFamilleTrouve = this._getFamilleEtSousFamille(aDonneesJSON.listeFamilles, lNumeroSousFamilleRecherche, lGenreSousFamilleRecherche);
                                    if (lObjFamilleSousFamilleTrouve && lObjFamilleSousFamilleTrouve.famille) {
                                        if (!aPublic.listeFamilles) {
                                            aPublic.listeFamilles = new ObjetListeElements_1.ObjetListeElements();
                                        }
                                        let lFamilleDePublic = aPublic.listeFamilles.getElementParElement(lObjFamilleSousFamilleTrouve.famille);
                                        if (!lFamilleDePublic) {
                                            lFamilleDePublic = new ObjetElement_1.ObjetElement(lObjFamilleSousFamilleTrouve.famille.getLibelle(),lObjFamilleSousFamilleTrouve.famille.getNumero(),lObjFamilleSousFamilleTrouve.famille.getGenre());
                                            aPublic.listeFamilles.add(lFamilleDePublic);
                                        }
                                        if (lObjFamilleSousFamilleTrouve.sousFamille) {
                                            if (!lFamilleDePublic.listeSousFamilles) {
                                                lFamilleDePublic.listeSousFamilles = new ObjetListeElements_1.ObjetListeElements();
                                            }
                                            let lSousFamilleDePublic = lFamilleDePublic.listeSousFamilles.getElementParElement(lObjFamilleSousFamilleTrouve.sousFamille);
                                            if (!lSousFamilleDePublic) {
                                                lSousFamilleDePublic = new ObjetElement_1.ObjetElement(lObjFamilleSousFamilleTrouve.sousFamille.getLibelle(),lObjFamilleSousFamilleTrouve.sousFamille.getNumero(),lObjFamilleSousFamilleTrouve.sousFamille.getGenre());
                                                lFamilleDePublic.listeSousFamilles.add(lSousFamilleDePublic);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        );
                    }
                }
                if (aDonneesJSON.niveauResponsabilite) {
                    if (aDonneesJSON.listePublics) {
                        const lNiveauLegal = aDonneesJSON.niveauResponsabilite.getElementParGenre(TypeGenreNiveauResponsabilite_1.TypeGenreNiveauResponsabilite.gnrLegal);
                        aDonneesJSON.listePublics.parcourir( (aPublic) => {
                            if ((aPublic.getGenre() === Enumere_Ressource_1.EGenreRessource.Responsable) && aPublic.eleves) {
                                let lNiveauResponsable;
                                aPublic.eleves.parcourir( (aEleve) => {
                                    if (aEleve.nr === undefined) {
                                        aEleve.niveauResponsabilite = lNiveauLegal;
                                        if (!lNiveauResponsable || (lNiveauResponsable.getGenre() > lNiveauLegal.getGenre()) || (lNiveauResponsable.getGenre() === TypeGenreNiveauResponsabilite_1.TypeGenreNiveauResponsabilite.gnrAucun)) {
                                            lNiveauResponsable = lNiveauLegal;
                                        }
                                    } else {
                                        const lNiveau = aDonneesJSON.niveauResponsabilite.getElementParGenre(aEleve.nr);
                                        if (!!lNiveau) {
                                            aEleve.niveauResponsabilite = lNiveau;
                                        }
                                        if (!lNiveauResponsable || (lNiveauResponsable.getGenre() > lNiveau.getGenre()) || (lNiveauResponsable.getGenre() === TypeGenreNiveauResponsabilite_1.TypeGenreNiveauResponsabilite.gnrAucun)) {
                                            lNiveauResponsable = lNiveau;
                                        }
                                    }
                                }
                                );
                                if (lNiveauResponsable) {
                                    aPublic.niveauResponsabilite = lNiveauResponsable;
                                }
                            }
                        }
                        );
                    }
                    aDonneesJSON.niveauResponsabilite.parcourir( (aNiveauResponsabilite) => {
                        aNiveauResponsabilite.actif = TypeGenreNiveauResponsabilite_1.TypeGenreNiveauResponsabiliteUtil.estFiltreParDefautActif(aNiveauResponsabilite.getGenre());
                    }
                    );
                }
                if (aDonneesJSON.listePublics) {
                    aDonneesJSON.listePublics.parcourir( (aPublic) => {
                        if (aPublic.eleves) {
                            const lListeClasses = new ObjetListeElements_1.ObjetListeElements();
                            const lListeGroupes = new ObjetListeElements_1.ObjetListeElements();
                            const lListeElevesResponsablePreferentiel = [];
                            aPublic.eleves.parcourir(aEleve => {
                                var _a;
                                if (aEleve.classe) {
                                    const lMaClasse = lListeClasses.getElementParElement(aEleve.classe);
                                    if (!lMaClasse) {
                                        lListeClasses.add(MethodesObjet_1.MethodesObjet.dupliquer(aEleve.classe));
                                    } else if (aEleve.classe.estClasseMN && ((_a = aEleve.classe.classesNiv) === null || _a === void 0 ? void 0 : _a.count())) {
                                        for (const lMaClasseNiv of aEleve.classe.classesNiv) {
                                            if (!lMaClasse.classesNiv.getTableauNumeros().includes(lMaClasseNiv.getNumero())) {
                                                lMaClasse.classesNiv.add(lMaClasseNiv);
                                            }
                                        }
                                    }
                                }
                                if (aEleve.groupes) {
                                    aEleve.groupes.parcourir(aGroupe => {
                                        if (!lListeGroupes.getElementParElement(aGroupe)) {
                                            lListeGroupes.add(aGroupe);
                                        }
                                    }
                                    );
                                }
                                if (aEleve.estPreferentiel) {
                                    lListeElevesResponsablePreferentiel.push(aEleve.getNumero());
                                    delete aEleve.estPreferentiel;
                                }
                            }
                            );
                            aPublic.classes = lListeClasses;
                            aPublic.groupes = lListeGroupes;
                            if (lListeElevesResponsablePreferentiel.length > 0) {
                                aPublic.listeNumElevesResponsablePreferentiel = lListeElevesResponsablePreferentiel;
                            }
                        }
                    }
                    );
                }
                this.callbackReussite.appel({
                    genres: aGenres,
                    listePublic: aDonneesJSON.listePublics,
                    listeFamilles: aDonneesJSON.listeFamilles,
                    listeServicesPeriscolaire: aDonneesJSON.listeServicesPeriscolaire,
                    listeProjetsAcc: aDonneesJSON.listeProjetsAcc,
                    listeNiveauxResponsabilite: aDonneesJSON.niveauResponsabilite
                });
            }
            _getFamilleEtSousFamille(aListeFamilles, aNumeroSousFamille, aGenreSousFamille) {
                const lResult = {
                    famille: null,
                    sousFamille: null
                };
                if (aListeFamilles) {
                    aListeFamilles.parcourir( (aFamille) => {
                        if (aFamille.listeSousFamilles) {
                            aFamille.listeSousFamilles.parcourir( (aSousFamille) => {
                                if (aSousFamille.egalParNumeroEtGenre(aNumeroSousFamille, aGenreSousFamille)) {
                                    lResult.sousFamille = aSousFamille;
                                    return false;
                                }
                            }
                            );
                            if (lResult.sousFamille) {
                                lResult.famille = aFamille;
                                return false;
                            }
                        }
                    }
                    );
                }
                return lResult;
            }
        }
        exports.ObjetRequeteListePublics = ObjetRequeteListePublics;
        CollectionRequetes_1.Requetes.inscrire('ListePublics', ObjetRequeteListePublics);
    },
    fn: 'objetrequetelistepublics.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreEvenementListe = void 0;
        var EGenreEvenementListe;
        (function(EGenreEvenementListe) {
            EGenreEvenementListe[EGenreEvenementListe["Selection"] = 0] = "Selection";
            EGenreEvenementListe[EGenreEvenementListe["Creation"] = 1] = "Creation";
            EGenreEvenementListe[EGenreEvenementListe["Edition"] = 2] = "Edition";
            EGenreEvenementListe[EGenreEvenementListe["Suppression"] = 3] = "Suppression";
            EGenreEvenementListe[EGenreEvenementListe["Deploiement"] = 4] = "Deploiement";
            EGenreEvenementListe[EGenreEvenementListe["ApresCreation"] = 5] = "ApresCreation";
            EGenreEvenementListe[EGenreEvenementListe["ApresEdition"] = 6] = "ApresEdition";
            EGenreEvenementListe[EGenreEvenementListe["ApresSuppression"] = 7] = "ApresSuppression";
            EGenreEvenementListe[EGenreEvenementListe["SelectionClick"] = 8] = "SelectionClick";
            EGenreEvenementListe[EGenreEvenementListe["ApresErreurCreation"] = 9] = "ApresErreurCreation";
            EGenreEvenementListe[EGenreEvenementListe["SelectionDblClick"] = 10] = "SelectionDblClick";
            EGenreEvenementListe[EGenreEvenementListe["KeyPressListe"] = 11] = "KeyPressListe";
            EGenreEvenementListe[EGenreEvenementListe["KeyUpListe"] = 12] = "KeyUpListe";
            EGenreEvenementListe[EGenreEvenementListe["SelectionClickTotal"] = 13] = "SelectionClickTotal";
            EGenreEvenementListe[EGenreEvenementListe["ModificationCBLigne"] = 14] = "ModificationCBLigne";
            EGenreEvenementListe[EGenreEvenementListe["ModificationSelection"] = 15] = "ModificationSelection";
        }
        )(EGenreEvenementListe || (exports.EGenreEvenementListe = EGenreEvenementListe = {}));
    },
    fn: 'enumere_evenementliste.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetListeEspaceMobile = void 0;
        require("ObjetListeEspaceMobile.css");
        exports.StylesObjetListeEspaceMobile = {
            ObjetListe: 'ObjetListe',
            hauteurAuto: 'hauteur-auto',
            backgroundSelec: 'background-selec',
            liste_celluleGrid: 'liste_celluleGrid',
            voileBleuCellule: 'voileBleuCellule',
            selected: 'selected',
            iconesConteneur: 'icones-conteneur',
            liste_btnentete: 'liste_btnentete',
            enteteOmbree: 'entete-ombree',
            btnDeploiementEntete: 'btn-deploiement-entete',
            iecb: 'iecb',
            liste_btnentete_droite: 'liste_btnentete_droite',
            avecFond: 'avecFond',
            ObjetSaisie: 'ObjetSaisie',
            ieCombo: 'ie-combo',
            liste_contbtnRechercheEntete: 'liste_contbtnRechercheEntete',
            liste_rechercheTexte: 'liste_rechercheTexte',
            ombreScroll: 'ombre-scroll',
            hide: 'hide',
            liste_conteneurCadreSelection: 'liste_conteneurCadreSelection',
            liste_ligneSelection: 'liste_ligneSelection',
            liste_ligneSelection_g: 'liste_ligneSelection_g',
            liste_ligneSelection_d: 'liste_ligneSelection_d',
            liste_ligneSelection_h: 'liste_ligneSelection_h',
            liste_ligneSelection_b: 'liste_ligneSelection_b',
            liste_surligneur_edition: 'liste_surligneur_edition',
            liste_textarea: 'liste_textarea',
            liste_messageVide: 'liste_messageVide',
            piedListe: 'pied-liste',
            listeFiltres: 'liste-filtres',
            fieldContain: 'field-contain',
            asInput: 'as-input',
            filtreFooter: 'filtre-footer',
            donneeslisteIcon: 'donneesliste-icon',
            asContent: 'as-content',
            asTitle: 'as-title'
        };
    },
    fn: 'objetlisteespacemobile.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeFusionTitreListe = void 0;
        var TypeFusionTitreListe;
        (function(TypeFusionTitreListe) {
            TypeFusionTitreListe[TypeFusionTitreListe["FusionGauche"] = 1] = "FusionGauche";
            TypeFusionTitreListe[TypeFusionTitreListe["FusionHaute"] = 2] = "FusionHaute";
        }
        )(TypeFusionTitreListe || (exports.TypeFusionTitreListe = TypeFusionTitreListe = {}));
    },
    fn: 'typefusiontitreliste.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilsInputNoteGetMinMax = UtilsInputNoteGetMinMax;
        exports.UtilsInputNoteInitOptions = UtilsInputNoteInitOptions;
        const TypeNote_1 = require("TypeNote");
        const MethodesObjet_1 = require("MethodesObjet");
        function UtilsInputNoteGetMinMax(aMinMax) {
            let lValeurMin;
            if (MethodesObjet_1.MethodesObjet.isFunction(aMinMax)) {
                lValeurMin = aMinMax();
            } else {
                lValeurMin = aMinMax;
            }
            return lValeurMin;
        }
        function UtilsInputNoteInitOptions() {
            return {
                avecVirgule: true,
                afficherAvecVirgule: true,
                avecAnnotation: true,
                listeAnnotations: null,
                sansNotePossible: true,
                min: 0,
                max: 100,
                selectionSurFocus: true,
                textAlign: 'right',
                hintSurErreur: false,
                titreMessageMinMax: '',
                messageMinMax: TypeNote_1.TradTypeNote.InputNote.MinMax,
                maxLength: 15,
                avecSigneMoins: false,
                htmlContexte: ''
            };
        }
    },
    fn: 'utilsinputnote_espacemobile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml_1 = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetHint_1 = require("ObjetHint");
        const TypeNote_1 = require("TypeNote");
        const UtilsInputNote_EspaceMobile_1 = require("UtilsInputNote_EspaceMobile");
        const AccessApp_1 = require("AccessApp");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        IEHtml_1.default.addBalise('ie-inputnote', (aContexteCourant, aOutils) => {
            let lJInput, lRacine, lEnFocus = false, lNomModele = aOutils.getModel(aContexteCourant), lOptions = (0,
            UtilsInputNote_EspaceMobile_1.UtilsInputNoteInitOptions)(), lValueInput = null;
            let lModeleInputInterne;
            if (lNomModele) {
                const lGetNote = aOutils.getAccesParametresModel('getNote', aContexteCourant);
                const lSetNote = aOutils.getAccesParametresModel('setNote', aContexteCourant);
                const lGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                let lDeclencherExitChange = false;
                if (lGetNote.estFonction && lSetNote.estFonction) {
                    lModeleInputInterne = () => {
                        return {
                            getValue() {
                                let lNote, lValueTemp = lValueInput;
                                if (lValueTemp === null) {
                                    lNote = lGetNote.callback([aContexteCourant.node]);
                                    if (lNote) {
                                        const lValeurMin = (0,
                                        UtilsInputNote_EspaceMobile_1.UtilsInputNoteGetMinMax)(lOptions.min);
                                        const lValeurMax = (0,
                                        UtilsInputNote_EspaceMobile_1.UtilsInputNoteGetMinMax)(lOptions.max);
                                        if (!lNote.estUneNoteValide || !lNote.estUneNoteValide(new TypeNote_1.TypeNote(lValeurMin), new TypeNote_1.TypeNote(lValeurMax), true, true)) {
                                            lValueTemp = '';
                                        } else {
                                            lValueTemp = lNote.getNote();
                                        }
                                    }
                                }
                                if (lValueTemp && (!lOptions.avecVirgule || (!lOptions.afficherAvecVirgule && !lEnFocus))) {
                                    lNote = new TypeNote_1.TypeNote(lValueTemp);
                                    return lNote.getNoteSansDecimaleForcee();
                                }
                                return lValueTemp === null ? '' : lValueTemp;
                            },
                            interrompreEvent(aEvent, aNode) {
                                if (aEvent.type === 'keypress') {
                                    let lValeurMin = (0,
                                    UtilsInputNote_EspaceMobile_1.UtilsInputNoteGetMinMax)(lOptions.min);
                                    const lAnnotations = lOptions.listeAnnotations ? new TypeNote_1.TypeNote().getCaractereAnnotation(lOptions.listeAnnotations) : undefined;
                                    if (!TypeNote_1.TypeNote.estCaractereNote(String.fromCharCode(aEvent.which), lOptions.avecAnnotation, lOptions.avecVirgule, lValeurMin < 0, lAnnotations)) {
                                        return true;
                                    }
                                    if (lOptions.avecAnnotation) {
                                        const lChaineAnnotation = new TypeNote_1.TypeNote().getChaineAnnotationDeCaractere(ObjetNavigateur_1.Navigateur.CaractereTouche);
                                        if (lChaineAnnotation) {
                                            const lEstAutorisee = TypeNote_1.TypeNote.estAnnotationPermise(TypeNote_1.TypeNote.getGenreAnnotationDeRaccourci(ObjetNavigateur_1.Navigateur.CaractereTouche));
                                            if (lEstAutorisee) {
                                                aNode.value = lChaineAnnotation;
                                            }
                                            return true;
                                        }
                                    }
                                }
                            },
                            setValue(aValue, aParametres) {
                                lDeclencherExitChange = true;
                                if (lOptions.maxLength > 0 && aValue && aValue.substring) {
                                    aValue = aValue.substring(0, lOptions.maxLength - 1);
                                }
                                if (lOptions.avecAnnotation && aValue.length === 1) {
                                    const lChaineAnnotation = new TypeNote_1.TypeNote().getChaineAnnotationDeCaractere(aValue[0]);
                                    if (lChaineAnnotation) {
                                        lValueInput = lChaineAnnotation;
                                        aParametres.selectionTexte = true;
                                        return;
                                    }
                                }
                                const lNote = TypeNote_1.TypeNote.formatStrToNote(aValue, lOptions);
                                if (lNote || aValue === '') {
                                    lValueInput = aValue;
                                    if (lNote && lNote.getGenre() > 0) {
                                        aParametres.selectionTexte = true;
                                    }
                                }
                            },
                            exitChange(aValue, aForceExit) {
                                if (!lDeclencherExitChange) {
                                    return;
                                }
                                lDeclencherExitChange = false;
                                lValueInput = null;
                                const lResultValidation = TypeNote_1.TypeNote.validerNote(aValue, lOptions);
                                if (aForceExit) {
                                    aForceExit.resultValidation = lResultValidation;
                                }
                                if (!lResultValidation.estValide) {
                                    if (lOptions.hintSurErreur) {
                                        ObjetHint_1.ObjetHint.start(lResultValidation.message, {
                                            sansDelai: true,
                                            position: {
                                                x: ObjetPosition_1.GPosition.getLeft(aForceExit.node) + ObjetPosition_1.GPosition.getWidth(aForceExit.node) + 10,
                                                y: ObjetPosition_1.GPosition.getTop(aForceExit.node)
                                            }
                                        });
                                    } else {
                                        lResultValidation.promiseMessageErreur = new Promise( (aResolve) => {
                                            setTimeout(async () => {
                                                await (0,
                                                AccessApp_1.getApp)().getMessage().afficher({
                                                    titre: lOptions.titreMessageMinMax,
                                                    message: lResultValidation.message
                                                });
                                                if ($(document).find(aForceExit.node).length > 0) {
                                                    ObjetHtml_1.GHtml.setFocus(aForceExit.node);
                                                    aForceExit.node.select();
                                                }
                                                aResolve();
                                            }
                                            , 200);
                                        }
                                        );
                                    }
                                } else {
                                    lSetNote.callback([lResultValidation.note, aContexteCourant.node]);
                                }
                                IEHtml_1.default.refresh();
                            },
                            getDisabled() {
                                return lGetDisabled.estFonction ? lGetDisabled.callback([aContexteCourant.node]) : false;
                            },
                            node(aNode) {
                                $(aNode).on({
                                    focus: function() {
                                        lEnFocus = true;
                                        lValueInput = null;
                                        IEHtml_1.default.refresh(true);
                                        if (lOptions.selectionSurFocus) {
                                            this.select();
                                        }
                                    },
                                    focusout: function() {
                                        lEnFocus = false;
                                        lValueInput = null;
                                        if (!lOptions.afficherAvecVirgule) {
                                            IEHtml_1.default.refresh();
                                        }
                                    }
                                });
                            }
                        };
                    }
                    ;
                } else {}
            }
            lJInput = $(IE.jsx.str("input", {
                type: "text",
                "ie-model": lModeleInputInterne || false
            }));
            lRacine = lJInput.get(0);
            lJInput.ieData(aContexteCourant.data);
            aOutils.copyAttributs(aContexteCourant.node, lRacine, (aName) => {
                return aName !== 'type';
            }
            );
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aOutils.addCommentaireDebug(lRacine, 'ie-inputnote');
            if (lNomModele) {
                aOutils.surNodeEtNodeAfter(aContexteCourant);
                aContexteCourant.node = lRacine;
                const lGetOptions = aOutils.getAccesParametresModel('getOptionsNote', aContexteCourant);
                if (lGetOptions.estFonction) {
                    Object.assign(lOptions, lGetOptions.callback([aContexteCourant.node]));
                }
                if (!lOptions.avecVirgule) {
                    lOptions.afficherAvecVirgule = false;
                }
                if (lOptions.textAlign) {
                    $(lRacine).css('text-align', lOptions.textAlign);
                }
                aOutils.gererInputText(aContexteCourant, 'text');
            } else {}
            return {
                node: aContexteCourant.node,
                ignorerInputText: true
            };
        }
        );
    },
    fn: 'iehtml.inputnote_espace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        if (IE.estMobile) {
            require('IEHtml.InputNote_Mobile.js');
        } else {
            require('IEHtml.InputNote_Espace.js');
        }
    },
    fn: 'iehtml.inputnote.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetIndexsUnique = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        class ObjetIndexsUnique {
            constructor() {
                this._indexsUnique = [];
            }
            ajouterIndex(aChamps) {
                if (!MethodesObjet_1.MethodesObjet.isArray(aChamps) && !MethodesObjet_1.MethodesObjet.isString(aChamps)) {
                    return this;
                }
                if (!this._indexsUnique) {
                    this._indexsUnique = [];
                }
                const lChamps = [];
                let lChampIndexCalcul;
                if (!Array.isArray(aChamps)) {
                    aChamps = [aChamps];
                }
                for (let i = 0; i < aChamps.length; i++) {
                    const lChampIndex = aChamps[i];
                    if (typeof lChampIndex === 'string' || typeof lChampIndex === 'function') {
                        lChampIndexCalcul = ObjetIndexsUnique.ajouterChamp(lChampIndex);
                    } else {
                        lChampIndexCalcul = lChampIndex;
                    }
                    lChamps.push(lChampIndexCalcul);
                }
                this._indexsUnique.push(lChamps);
                return this;
            }
            estDoublon(a, b) {
                for (let i = 0; i < this._indexsUnique.length; i++) {
                    if (this._estDoublonComparaisonET(this._indexsUnique[i], a, b)) {
                        return true;
                    }
                }
                return false;
            }
            estDoublonDansTableau(aElement, aTableau) {
                for (const i in aTableau) {
                    if (this.estDoublon(aElement, aTableau[i])) {
                        return true;
                    }
                }
                return false;
            }
            existeIndex() {
                return this._indexsUnique.length > 0;
            }
            _estDoublonComparaisonET(aIndexUnique, a, b) {
                let lResult = false;
                for (let i = 0; i < aIndexUnique.length; i++) {
                    if (aIndexUnique[i]) {
                        if (this._comparateurChampIndex(aIndexUnique[i], a, b)) {
                            lResult = true;
                        } else {
                            return false;
                        }
                    }
                }
                return lResult;
            }
            _comparateurChampIndex(aChampIndex, a, b) {
                if (!aChampIndex || !aChampIndex.valeur) {
                    return false;
                }
                if (!a || !b) {
                    return false;
                }
                let lValeurA;
                let lValeurB;
                if (aChampIndex.estFonction) {
                    lValeurA = aChampIndex.valeur(a);
                    lValeurB = aChampIndex.valeur(b);
                } else if (aChampIndex.estAccesseurChaine) {
                    lValeurA = MethodesObjet_1.MethodesObjet.get(a, aChampIndex.valeur);
                    lValeurB = MethodesObjet_1.MethodesObjet.get(b, aChampIndex.valeur);
                } else {
                    lValeurA = a[aChampIndex.valeur];
                    lValeurB = b[aChampIndex.valeur];
                }
                if (lValeurA && lValeurA.getTime) {
                    lValeurA = lValeurA.getTime();
                }
                if (lValeurB && lValeurB.getTime) {
                    lValeurB = lValeurB.getTime();
                }
                if (aChampIndex.sensibleCasse !== true) {
                    if (lValeurA && lValeurA.toLowerCase) {
                        lValeurA = lValeurA.toLowerCase();
                    }
                    if (lValeurB && lValeurB.toLowerCase) {
                        lValeurB = lValeurB.toLowerCase();
                    }
                }
                if (lValeurA === lValeurB && (lValeurA === '' || lValeurA === undefined || lValeurA === null)) {
                    return !!aChampIndex.videEstDoublon;
                } else {
                    return lValeurA === lValeurB;
                }
            }
            static ajouterChamp(aValeur, aVideEstDoublon, aSensibleCasse) {
                return {
                    valeur: aValeur,
                    videEstDoublon: !!aVideEstDoublon,
                    sensibleCasse: !!aSensibleCasse,
                    estFonction: MethodesObjet_1.MethodesObjet.isFunction(aValeur),
                    estAccesseurChaine: MethodesObjet_1.MethodesObjet.isString(aValeur) && aValeur.indexOf('.') >= 0
                };
            }
        }
        exports.ObjetIndexsUnique = ObjetIndexsUnique;
    },
    fn: 'objetindexsunique.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreCommandeMenu = void 0;
        var EGenreCommandeMenu;
        (function(EGenreCommandeMenu) {
            EGenreCommandeMenu["Creation"] = "cmdMenu_creation";
            EGenreCommandeMenu["Edition"] = "cmdMenu_edition";
            EGenreCommandeMenu["Suppression"] = "cmdMenu_suppression";
        }
        )(EGenreCommandeMenu || (exports.EGenreCommandeMenu = EGenreCommandeMenu = {}));
    },
    fn: 'enumere_commandemenu.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDonneesListeBase = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const Enumere_CommandeMenu_1 = require("Enumere_CommandeMenu");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetHtml_1 = require("ObjetHtml");
        const AccessApp_1 = require("AccessApp");
        class ObjetDonneesListeBase {
            constructor(aDonnees) {
                this.estFlatDesign = false;
                this.mapPereFils = null;
                this.Donnees = !aDonnees ? new ObjetListeElements_1.ObjetListeElements() : aDonnees;
                this.enImpression = false;
                this.enConstruction_cacheRechercheTexte = false;
                this.options = {
                    avecSelection: true,
                    avecEvnt_Selection: false,
                    avecEvnt_ModificationSelection: false,
                    avecEvnt_SelectionClick: false,
                    avecEvnt_SelectionDblClick: false,
                    avecEvnt_Creation: false,
                    avecEvnt_ApresCreation: false,
                    avecEvnt_KeyPressListe: false,
                    avecTimeoutEvent_KeyPressListe: true,
                    avecEvnt_KeyUpListe: false,
                    avecEvnt_Deploiement: false,
                    avecMultiSelection: false,
                    avecMultiSelectionSurCtrl: true,
                    avecMultiSelectionSurShift: true,
                    avecSelectionSurNavigationClavier: false,
                    avecRechercheSelectionMiroir: false,
                    avecDeselectionSurNonSelectionnable: true,
                    avecDeselectionMonoSelectionClick: false,
                    avecDeselectionMonoSelectionClickCtrl: false,
                    avecTri: true,
                    avecDeploiement: false,
                    avecDeploiementSurColonne: true,
                    avecImageSurColonneDeploiement: false,
                    avecEventDeploiementSurCellule: true,
                    indentationCelluleEnfant: 12,
                    hauteurMinCellule: ObjetDonneesListeBase.hauteurMinCellule,
                    hauteurMinContenuCellule: 0,
                    avecLigneDraggable: false,
                    avecLigneDroppable: false,
                    dragNDropLigneInsertion: true,
                    avecHtmlDetailsDraggableOver: true,
                    getValeur: null,
                    nonEditable: false,
                    avecPereVisibleSurRechercheTexte: true,
                    ignorerDeploiementSurRechercheTexte: true,
                    racineCss: MethodesObjet_1.MethodesObjet.getObjectClass(this)
                };
                this.paramsListe = {
                    liste: null,
                    idWAILigneLue: '',
                    versionMobile: false,
                    getIdsColonnes: null,
                    getParams: null,
                    avecRechercheTexteEnCours: false,
                    ouvrirMenuContextuel: null,
                    jsxNodeDeploiementLigne: null,
                    jsxGetModelCBLigneFlatDesign: null,
                    jsxGetAttrCBLigneFlatDesign: null
                };
            }
            setOptions(aOptions) {
                $.extend(this.options, aOptions);
                return this;
            }
            getControleur(aDonneeListe, aListe) {
                return null;
            }
            avecSelection(aParams) {
                return this.options.avecSelection;
            }
            avecDeselection(aParams) {
                return this.avecMultiSelection() ? true : (this.options.avecDeselectionMonoSelectionClickCtrl || this.options.avecDeselectionMonoSelectionClick);
            }
            avecEdition(aParams) {
                return false;
            }
            avecTri() {
                return this.options.avecTri;
            }
            avecMenuContextuel(aParams) {
                return aParams.article && aParams.ligne >= 0 ? this.options.avecContextMenuSansSelection || this.avecSelection(aParams) : false;
            }
            avecDeploiement() {
                return this.options.avecDeploiement;
            }
            avecDeploiementSurColonne(aParams) {
                return this.options.avecDeploiementSurColonne;
            }
            avecImageSurColonneDeploiement(aParams) {
                return this.options.avecImageSurColonneDeploiement;
            }
            avecEventDeploiementSurCellule(aParams) {
                return this.options.avecEventDeploiementSurCellule;
            }
            surDeploiement(I, J, D) {
                D.estDeploye = !D.estDeploye;
            }
            avecEvenementSelection(aParams) {
                return this.options.avecEvnt_Selection;
            }
            avecEvenementSelectionClick(aParams) {
                return this.options.avecEvnt_SelectionClick;
            }
            avecEvenementSelectionDblClick(aParams) {
                return this.options.avecEvnt_SelectionDblClick;
            }
            avecEvenementCreation() {
                return this.options.avecEvnt_Creation;
            }
            avecEvenementDeploiement(aParams) {
                return this.options.avecEvnt_Deploiement;
            }
            avecEvenementApresCreation() {
                return this.options.avecEvnt_ApresCreation;
            }
            avecEvenementApresErreurCreation() {
                return false;
            }
            surSelectionLigne(aLigne, aDonnee, aSelectionner) {}
            surSelection(aColonne, aDonnee, aLigne, aSelectionner) {}
            avecSelecFile(aParams) {
                return false;
            }
            getOptionsSelecFile(aParams) {
                return null;
            }
            evenementSurSelecFile(aParams, aParamsSelecFile) {}
            avecLigneDraggable(aParams) {
                return this.options.avecLigneDraggable;
            }
            getLibelleDraggable(aParams) {
                return '';
            }
            getHtmlDetailsDraggableOver(aParams, aDataDrag) {
                if (!this.options.avecHtmlDetailsDraggableOver) {
                    return '';
                }
                return '<div class="draggable_details_Deplacer"></div><label>' + (this.options.dragNDropLigneInsertion ? ObjetTraduction_1.GTraductions.getValeur('liste.ChangerRang') : ObjetTraduction_1.GTraductions.getValeur('liste.EchangerRang')) + '</label>';
            }
            avecLigneDroppable(aParams) {
                return this.options.avecLigneDroppable;
            }
            autoriserDeplacementElementSurLigne(aParamsLigneDestination, aParamsSource) {
                return aParamsSource.instance && aParamsLigneDestination.instance && aParamsSource.instance.getNom() === aParamsLigneDestination.instance.getNom() && aParamsLigneDestination.article && aParamsSource.article && aParamsLigneDestination.ligne !== aParamsSource.ligne;
            }
            surDeplacementElementSurLigne(aParamsLigneDestination, aParamsSource) {
                return false;
            }
            getTri(aColonneDeTri, aGenreTri) {
                return null;
            }
            getVisible(aDonnee) {
                return true;
            }
            getValeur(aParams) {
                if (MethodesObjet_1.MethodesObjet.isFunction(this.options.getValeur)) {
                    return this.options.getValeur(aParams);
                }
                return aParams.article ? aParams.article.getLibelle() : '';
            }
            getValeurPourTri(aColonne, aArticle) {
                return this.getValeur(this.paramsListe.getParams(aColonne, -1, {
                    surTri: true,
                    article: aArticle
                }));
            }
            getValeurPourAffichage(aParams) {
                return this.getValeur(aParams);
            }
            getTooltip(aParams) {
                return '';
            }
            getTypeValeur(aParams) {
                return ObjetDonneesListeBase.ETypeCellule.Texte;
            }
            getClassCelluleConteneur(aParams) {
                return '';
            }
            getClass(aParams) {
                return '';
            }
            getStyle(aParams) {
                return '';
            }
            getAriaHasPopup(aParams) {
                return false;
            }
            getAriaLabel(aParams) {
                return '';
            }
            avecMultiSelection() {
                return this.options.avecMultiSelection;
            }
            avecMultiSelectionSurCtrl() {
                return this.options.avecMultiSelectionSurCtrl;
            }
            avecMultiSelectionSurShift() {
                return this.options.avecMultiSelectionSurShift;
            }
            estSelectionCibleMiroirDeSelectionSource(aParamsCelluleSource, aParamsCelluleCible) {
                return !!aParamsCelluleSource.article.getNumero() && aParamsCelluleSource.article.getNumero() === aParamsCelluleCible.article.getNumero();
            }
            remplirMenuContextuel(aParametres) {
                if (!aParametres.menuContextuel) {
                    return false;
                }
                if (aParametres.surFondListe) {
                    return false;
                }
                let lAvecCommandeActive = false;
                let lCommande;
                if (aParametres.avecCreation) {
                    lCommande = aParametres.menuContextuel.addCommande(Enumere_CommandeMenu_1.EGenreCommandeMenu.Creation, ObjetTraduction_1.GTraductions.getValeur('liste.creer'), !aParametres.nonEditable);
                    if (lCommande.actif) {
                        lAvecCommandeActive = true;
                    }
                }
                lCommande = aParametres.menuContextuel.addCommande(Enumere_CommandeMenu_1.EGenreCommandeMenu.Edition, ObjetTraduction_1.GTraductions.getValeur('liste.modifier'), !aParametres.nonEditable && (!aParametres.listeSelection || aParametres.listeSelection.count() <= 1) && this.avecEdition(aParametres));
                if (lCommande.actif) {
                    lAvecCommandeActive = true;
                }
                lCommande = aParametres.menuContextuel.addCommande(Enumere_CommandeMenu_1.EGenreCommandeMenu.Suppression, ObjetTraduction_1.GTraductions.getValeur('liste.supprimer'), !aParametres.nonEditable && aParametres && aParametres.avecSuppression && this._avecSuppression(aParametres));
                if (lCommande.actif) {
                    lAvecCommandeActive = true;
                }
                return lAvecCommandeActive;
            }
            initialisationObjetContextuel(aParametres) {
                if (!aParametres.menuContextuel) {
                    return;
                }
                const lAvecCommandeActive = this.remplirMenuContextuel(aParametres);
                if (lAvecCommandeActive !== false) {
                    aParametres.menuContextuel.setDonnees(aParametres.id);
                }
            }
            evenementMenuContextuel(aParametres) {
                return false;
            }
            _avecSelection(aParams) {
                return this.avecSelection(aParams);
            }
            _avecDeselection(aParams) {
                return this.avecDeselection(aParams);
            }
            _avecSuppression(aParams) {
                return false;
            }
            _getVisible(aDonnee, aParams) {
                return this.getVisible(aDonnee);
            }
            _surSelectionLigne(aLigne, aSelectionner) {
                return this.surSelectionLigne(aLigne, this.Donnees.get(aLigne), aSelectionner);
            }
            _surSelection(aColonne, aLigne, aSelectionner) {
                return this.surSelection(aColonne, this.Donnees.get(aLigne), aColonne, aSelectionner);
            }
            estUnDeploiement(aParams) {
                return aParams && aParams.article && aParams.article.estUnDeploiement;
            }
            estUnDeploiementValide(aParams) {
                return this.estUnDeploiement(aParams) && this.avecFilsVisibleDePere(aParams.article);
            }
            _estDeploye(aLigne) {
                return this._articleDeploye(this.Donnees.get(aLigne));
            }
            getIndice(aDonnee) {
                for (let J = 0; J < this.getNbrLignes(); J++) {
                    if (this.Donnees.get(J) === aDonnee) {
                        return J;
                    }
                }
                return -1;
            }
            _getContenuAffichage(aParams) {
                const lVal = this._getValeur(aParams);
                const lContenu = {
                    valeur: '',
                    tooltip: ''
                };
                if (MethodesObjet_1.MethodesObjet.isString(lVal)) {
                    lContenu.valeur = lVal;
                } else if (lVal && MethodesObjet_1.MethodesObjet.isObject(lVal) && 'libelle'in lVal) {
                    const lValFD = lVal;
                    lContenu.valeur = lValFD.libelle;
                    lContenu.idsLabel = lValFD.idsLabel;
                } else {
                    lContenu.valeur = lVal;
                }
                if (!this.enImpression && !this.enConstruction_cacheRechercheTexte) {
                    lContenu.tooltip = this.getTooltip(aParams) || '';
                }
                if (aParams.avecContenuTronque) {
                    switch (aParams.typeValeur) {
                    case ObjetDonneesListeBase.ETypeCellule.Texte:
                    case ObjetDonneesListeBase.ETypeCellule.ZoneTexte:
                        {
                            const lChaineAffichage = this.getValeurPourAffichage(aParams);
                            lContenu.valeur = lChaineAffichage;
                            if (!this.enImpression && !lContenu.tooltip) {
                                lContenu.attrOverflow = 'ie-ellipsis';
                            }
                        }
                    }
                }
                lContenu.valeur = ObjetChaine_1.GChaine.avecEspaceSiVide(lContenu.valeur + '');
                if (aParams.typeValeur !== ObjetDonneesListeBase.ETypeCellule.Html) {
                    lContenu.valeur = lContenu.valeur.replace(/\r\n/g, '<br>').replace(/\n/g, '<br>');
                }
                return lContenu;
            }
            getValeurPourParsing(aParams) {
                return this._getValeur(aParams);
            }
            getChaineDeDate(aDate, aParams) {
                return (MethodesObjet_1.MethodesObjet.isDate(aDate)) ? ObjetDate_1.GDate.formatDate(aDate, '%JJ/%MM/%AA') : '';
            }
            estVisible(aLigne, aParams) {
                return this._estDonneesVisible(this.Donnees.get(aLigne), aParams);
            }
            trier() {
                if (this.avecTri() && this.Donnees) {
                    const lTri = this.getTri(null, null);
                    if (lTri) {
                        this.Donnees.setTri(lTri);
                    }
                    this.Donnees.trier();
                }
            }
            getNbrLignes() {
                return this.Donnees ? this.Donnees.count() : 0;
            }
            calculCacheListeFilsDirectsDePere() {
                this.mapPereFils = new Map();
                this.Donnees.parcourir( (aArticle, aIndex) => {
                    if (aArticle) {
                        if (!this.mapPereFils.has(aArticle)) {
                            this.mapPereFils.set(aArticle, []);
                        }
                        if (aArticle.pere) {
                            if (!this.mapPereFils.has(aArticle.pere)) {
                                this.mapPereFils.set(aArticle.pere, []);
                            }
                            let lParamsFils = this.mapPereFils.get(aArticle.pere);
                            lParamsFils.push({
                                ligne: aIndex,
                                article: aArticle
                            });
                        }
                    }
                }
                );
            }
            avecFilsVisibleDePere(aArticlePere) {
                return this._getArrayFilsVisiblesDePere(aArticlePere, true).length > 0;
            }
            getArrayFilsVisiblesDePere(aArticlePere) {
                return this._getArrayFilsVisiblesDePere(aArticlePere, false);
            }
            _getArrayFilsVisiblesDePere(aArticlePere, aArretSurPremierFils) {
                let lResult;
                if (aArticlePere) {
                    if (!this.mapPereFils) {
                        this.calculCacheListeFilsDirectsDePere();
                    }
                    const lResultTous = this.mapPereFils.get(aArticlePere);
                    if (lResultTous) {
                        lResult = [];
                        lResultTous.every( (aFils) => {
                            if (this._getVisible(aFils.article)) {
                                lResult.push(aFils);
                                if (aArretSurPremierFils) {
                                    return false;
                                }
                            }
                            return true;
                        }
                        );
                        return lResult;
                    }
                }
                lResult = [];
                this.Donnees.parcourir( (aArticle, aIndex) => {
                    if (((!aArticlePere && !aArticle.pere) || aArticle.pere === aArticlePere) && this._getVisible(aArticle)) {
                        lResult.push({
                            article: this.Donnees.get(aIndex),
                            ligne: aIndex
                        });
                        if (aArretSurPremierFils) {
                            return false;
                        }
                    }
                }
                );
                return lResult;
            }
            _getEtatCocheSimple(aParams) {
                return this._getValeur(aParams);
            }
            getEtatCocheSelonFils(aElementPere, aParams, aMethodeAvecEdition, aPourCocheTout) {
                if (aElementPere && (!aElementPere.estUnDeploiement || !this.estCocheSelonFilsSurLigneDeploiement(aElementPere))) {
                    return this._getEtatCocheSimple(aParams);
                }
                let lEtat = ObjetDonneesListeBase.EGenreCoche.Aucune
                  , lInit = false;
                let lArrayParcours = [];
                if (aPourCocheTout) {
                    this.Donnees.parcourir( (aArticle, aIndex) => {
                        if (this._getVisible(aArticle)) {
                            lArrayParcours.push({
                                article: aArticle,
                                ligne: aIndex
                            });
                        }
                    }
                    );
                } else {
                    lArrayParcours = this.getArrayFilsVisiblesDePere(aElementPere);
                }
                lArrayParcours.every( (aElementParcours) => {
                    const lParams = Object.assign({}, aParams, aElementParcours, {
                        pourCocheTout: !!aPourCocheTout
                    });
                    if ((aMethodeAvecEdition && MethodesObjet_1.MethodesObjet.isFunction(aMethodeAvecEdition) && aMethodeAvecEdition(lParams)) || this.avecEdition(lParams)) {
                        if (this.estCocheSelonFilsSurLigneDeploiement(lParams.article)) {
                            const lEtatFils = this.getEtatCocheSelonFils(lParams.article, lParams, aMethodeAvecEdition);
                            if (lEtatFils === ObjetDonneesListeBase.EGenreCoche.Verte && lEtat === ObjetDonneesListeBase.EGenreCoche.Aucune) {
                                lEtat = lInit ? ObjetDonneesListeBase.EGenreCoche.Grise : ObjetDonneesListeBase.EGenreCoche.Verte;
                            } else if (lEtatFils === ObjetDonneesListeBase.EGenreCoche.Grise) {
                                lEtat = ObjetDonneesListeBase.EGenreCoche.Grise;
                            } else if (lEtatFils === ObjetDonneesListeBase.EGenreCoche.Aucune && lEtat === ObjetDonneesListeBase.EGenreCoche.Verte) {
                                lEtat = ObjetDonneesListeBase.EGenreCoche.Grise;
                            }
                        } else {
                            const lValeur = this._getEtatCocheSimple(lParams);
                            if ((!lValeur || lValeur === ObjetDonneesListeBase.EGenreCoche.Aucune) && lEtat === ObjetDonneesListeBase.EGenreCoche.Verte) {
                                lEtat = ObjetDonneesListeBase.EGenreCoche.Grise;
                            }
                            if ((lValeur === true || lValeur === ObjetDonneesListeBase.EGenreCoche.Verte) && lEtat === ObjetDonneesListeBase.EGenreCoche.Aucune) {
                                lEtat = lInit ? ObjetDonneesListeBase.EGenreCoche.Grise : ObjetDonneesListeBase.EGenreCoche.Verte;
                            }
                        }
                        if (lEtat === ObjetDonneesListeBase.EGenreCoche.Grise) {
                            return false;
                        }
                        lInit = true;
                    }
                    return true;
                }
                );
                return lEtat;
            }
            estCocheSelonFilsSurLigneDeploiement(aArticle) {
                return true;
            }
            rechercheTexteForcerLignePrecSuivVisible(aParamsLigneVisible, aParamsLignePrecSuivCachee) {
                return false;
            }
            getId(aNumeroColonne) {
                return this.paramsListe.getIdsColonnes()[aNumeroColonne];
            }
            getNumeroColonneDId(aId) {
                return this.paramsListe.getIdsColonnes().indexOf(aId);
            }
            avecSurvolCelluleVisible(aParams) {
                return this._avecSelection(aParams);
            }
            estConcerneParSurvolCelluleVisible(aParams, aParamsCelluleHover) {
                if (aParams.ligne >= 0 && aParams.ligne === aParamsCelluleHover.ligne) {
                    return true;
                }
                return false;
            }
            avecDessinHover(aParams) {
                return false;
            }
            estConcerneParDessinHover(aParams, aParamsCelluleHover) {
                return false;
            }
            construireHtmlHover(aParams) {
                if (!aParams.node) {
                    return '';
                }
                const H = [];
                const lHeight = 22;
                const lWidthCorpsFleche = 10;
                const lWidthPointeFleche = 11;
                const lHeightCorpsFleche = 10;
                const lWidth = lWidthCorpsFleche + lWidthPointeFleche;
                const lCouleurBord = 'white';
                const lCouleur = (0,
                AccessApp_1.getApp)().getCouleur().selection.fond;
                let lStyle = '';
                switch (aParams.direction) {
                case ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.droite:
                case ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.gauche:
                    lStyle += 'top:' + Math.round(($(aParams.node).height() / 2 - lHeight / 2)) + 'px;';
                    break;
                case ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.haut:
                    lStyle += 'top:0px;';
                    break;
                case ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.bas:
                    lStyle += 'bottom:0px;';
                    break;
                }
                switch (aParams.direction) {
                case ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.droite:
                    lStyle += 'left: -' + (lWidth + 1) + 'px;';
                    break;
                case ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.gauche:
                    lStyle += 'right: -' + (lWidth + 1) + 'px;';
                    break;
                case ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.haut:
                case ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.bas:
                    lStyle += 'left:' + Math.round(($(aParams.node).width() / 2 - lWidth / 2)) + 'px;';
                    break;
                }
                H.push('<div class="', aParams.classHover, ' dessinHoverListe_', aParams.direction, '" style="', lStyle, '">');
                H.push('<svg xmlns="http://www.w3.org/2000/svg" width="', lWidth + 1, '" height="', lHeight + 1, '">', ObjetChaine_1.GChaine.format('<line x1="0" y1="%0:s" x2="%1:s" y2="%0:s" stroke="%3:s" stroke-width="%2:s" />', [lHeight / 2, lWidthCorpsFleche, lHeightCorpsFleche, lCouleurBord]), ObjetChaine_1.GChaine.format('<polygon points="%2:s 0, %3:s %1:s, %2:s %0:s" fill="%4:s" stroke-width="1" stroke="%5:s"/>', [lHeight, lHeight / 2, lWidthCorpsFleche, lWidth, lCouleur, lCouleurBord]), ObjetChaine_1.GChaine.format('<line x1="1" y1="%0:s" x2="%1:s" y2="%0:s" stroke="%3:s" stroke-width="%2:s" />', [lHeight / 2, lWidthCorpsFleche + 1, lHeightCorpsFleche - 2, lCouleur]), '</svg>');
                H.push('</div>');
                if (aParams.direction === ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.droite || aParams.direction === ObjetDonneesListeBase.TypeDirectionElementSurvolCellule.gauche) {
                    H.push('<div class="' + aParams.classHover + ' dessinHoverListe_cadre"></div>');
                }
                return H.join('');
            }
            estCelluleCopie(aParams) {
                return false;
            }
            surCopier(aParams) {
                return false;
            }
            surColler(aParams) {
                return false;
            }
            getHauteurMinCellule(aParams) {
                return this.options.hauteurMinCellule;
            }
            getHauteurMinContenuCellule(aParams) {
                return this.options.hauteurMinContenuCellule;
            }
            _getClassCelluleConteneur(aParams) {
                return this.getClassCelluleConteneur(aParams);
            }
            _setParamsListe(aParams) {
                Object.assign(this.paramsListe, aParams);
                return this;
            }
            actualiserListe(aParamsActualiser) {
                this.paramsListe.actualiserListe(aParamsActualiser);
            }
            _estDonneesVisible(aDonnees, aParams) {
                if (!aDonnees) {
                    return false;
                }
                if (aDonnees.pere && this.avecDeploiement() && (this._articleDeploye(aDonnees.pere) === false || !this._estDonneesVisible(aDonnees.pere))) {
                    return false;
                }
                if (aDonnees.getEtat() === Enumere_Etat_1.EGenreEtat.Suppression || !this._getVisible(aDonnees, aParams)) {
                    return false;
                }
                return true;
            }
            _articleDeploye(aArticle) {
                if (this.options.ignorerDeploiementSurRechercheTexte && (this.enConstruction_cacheRechercheTexte || this.paramsListe.avecRechercheTexteEnCours)) {
                    return true;
                }
                return !!(aArticle && aArticle.estDeploye !== false);
            }
        }
        exports.ObjetDonneesListeBase = ObjetDonneesListeBase;
        ObjetDonneesListeBase.hauteurMinCellule = 40;
        ObjetDonneesListeBase.EGenreCoche = {
            Verte: true,
            Grise: null,
            Aucune: false
        };
        (function(ObjetDonneesListeBase) {
            let TypeDirectionElementSurvolCellule;
            (function(TypeDirectionElementSurvolCellule) {
                TypeDirectionElementSurvolCellule["haut"] = "haut";
                TypeDirectionElementSurvolCellule["bas"] = "bas";
                TypeDirectionElementSurvolCellule["gauche"] = "gauche";
                TypeDirectionElementSurvolCellule["droite"] = "droite";
            }
            )(TypeDirectionElementSurvolCellule = ObjetDonneesListeBase.TypeDirectionElementSurvolCellule || (ObjetDonneesListeBase.TypeDirectionElementSurvolCellule = {}));
            let ETypeCellule;
            (function(ETypeCellule) {
                ETypeCellule[ETypeCellule["Texte"] = 0] = "Texte";
                ETypeCellule[ETypeCellule["ZoneTexte"] = 1] = "ZoneTexte";
                ETypeCellule[ETypeCellule["Html"] = 2] = "Html";
                ETypeCellule[ETypeCellule["Date"] = 3] = "Date";
                ETypeCellule[ETypeCellule["Note"] = 4] = "Note";
                ETypeCellule[ETypeCellule["Coche"] = 5] = "Coche";
                ETypeCellule[ETypeCellule["CocheDeploiement"] = 6] = "CocheDeploiement";
                ETypeCellule[ETypeCellule["Image"] = 7] = "Image";
                ETypeCellule[ETypeCellule["Icon"] = 8] = "Icon";
                ETypeCellule[ETypeCellule["DateCalendrier"] = 9] = "DateCalendrier";
                ETypeCellule[ETypeCellule["HeureMinute"] = 10] = "HeureMinute";
            }
            )(ETypeCellule = ObjetDonneesListeBase.ETypeCellule || (ObjetDonneesListeBase.ETypeCellule = {}));
        }
        )(ObjetDonneesListeBase || (exports.ObjetDonneesListeBase = ObjetDonneesListeBase = {}));
    },
    fn: 'objetdonneeslistebase.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDonneesListe = void 0;
        const ObjetStyle_1 = require("ObjetStyle");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetIndexsUnique_1 = require("ObjetIndexsUnique");
        const ObjetDonneesListeBase_1 = require("ObjetDonneesListeBase");
        const ObjetChaine_1 = require("ObjetChaine");
        const MethodesObjet_1 = require("MethodesObjet");
        const UtilitaireDuree_1 = require("UtilitaireDuree");
        const TypeNote_1 = require("TypeNote");
        const AccessApp_1 = require("AccessApp");
        class ObjetDonneesListe extends ObjetDonneesListeBase_1.ObjetDonneesListeBase {
            constructor(aDonnees) {
                super(aDonnees);
                this.triCourant = null;
                this.setOptions({
                    selectionParCellule: false,
                    avecEdition: true,
                    avecSuppression: true,
                    editionApresSelection: true,
                    editionSurSelectionApresFinEdition: false,
                    avecEvnt_Edition: false,
                    avecEvnt_ApresEdition: false,
                    avecEvnt_ApresEditionValidationSansModification: false,
                    avecEvnt_Suppression: false,
                    avecEvnt_ApresSuppression: false,
                    avecMultiSelectionSurLigneFusion: true,
                    avecCelluleSuivanteSurFinEdition: false,
                    avecEtatSaisie: true,
                    avecInterruptionSuppression: false,
                    avecTrimSurEdition: false,
                    avecNavigationClavierFlechesEnEdition: false,
                    avecContenuTronque: false,
                    indentationCelluleEnfant: 12,
                    hauteurMinCellule: ObjetDonneesListe.hauteurMinCellule,
                    hauteurMinContenuCellule: 0,
                    alignVCenter: false,
                    avecLigneDraggable: false,
                    avecLigneDroppable: false,
                    dragNDropLigneInsertion: true,
                    avecHtmlDetailsDraggableOver: true,
                    getValeur: null,
                    nonEditable: false,
                    avecPereVisibleSurRechercheTexte: true,
                    ignorerDeploiementSurRechercheTexte: true,
                    racineCss: MethodesObjet_1.MethodesObjet.getObjectClass(this)
                });
            }
            selectionParCellule(aColonne, aArticle) {
                return this.options.selectionParCellule;
            }
            avecEdition(aParams) {
                return this.options.avecEdition;
            }
            avecEditionApresSelection(aParams) {
                if (aParams.typeValeur === ObjetDonneesListe.ETypeCellule.Coche) {
                    return false;
                }
                return this.options.editionApresSelection;
            }
            getColonneTransfertEdition(aParams) {
                return null;
            }
            avecSuppression(aParams) {
                return this.options.avecSuppression;
            }
            avecEtatSaisie(aParams) {
                return this.options.avecEtatSaisie;
            }
            creerIndexUnique(aChamps) {
                if (!this._indexsUnique) {
                    this._indexsUnique = new ObjetIndexsUnique_1.ObjetIndexsUnique();
                }
                this._indexsUnique.ajouterIndex(aChamps);
            }
            getTableauLignesModifieesCocheTitre(aColonne, aValeur) {
                const T = [];
                const lNb = this.Donnees.count();
                for (let i = 0; i < lNb; i++) {
                    if (this._getVisible(this.Donnees.get(i))) {
                        T.push(i);
                    }
                }
                return T;
            }
            surEditionCocheTitre(aListeParamsCellule, aValeur) {
                if (!!aListeParamsCellule) {
                    for (let i = 0; i < aListeParamsCellule.length; i++) {
                        const lErreur = this.surEdition(aListeParamsCellule[i], aValeur);
                        if (lErreur === null || lErreur === undefined) {
                            if (this.enModification(aListeParamsCellule[i])) {
                                aListeParamsCellule[i].article.setEtat(this.getEtatSurEdition(aListeParamsCellule[i]));
                            }
                        }
                    }
                }
                return null;
            }
            estConcerneParSurvolCelluleVisible(aParams, aParamsCelluleHover) {
                if (aParams.ligne < 0) {
                    return false;
                }
                if (this.selectionParCellule(aParamsCelluleHover.colonne, aParamsCelluleHover.article)) {
                    return aParamsCelluleHover.ligne === aParams.ligne && aParamsCelluleHover.colonne === aParams.colonne;
                }
                if (aParams.ligne >= 0 && aParams.ligne === aParamsCelluleHover.ligne) {
                    return true;
                }
                if (this.options.avecMultiSelectionSurLigneFusion && aParams.ligne >= 0 && aParamsCelluleHover.ligne >= 0 && aParams.ligne !== aParamsCelluleHover.ligne) {
                    const lFusionHover = this.lignesFusionParColonne[aParamsCelluleHover.colonne + '_' + aParamsCelluleHover.ligne];
                    if (lFusionHover && lFusionHover.lignesCumuls && lFusionHover.lignesCumuls[aParams.ligne]) {
                        return true;
                    }
                    const lFusionCourant = this.lignesFusionParColonne[aParams.colonne + '_' + aParams.ligne];
                    if (lFusionCourant && lFusionCourant.lignesCumuls && lFusionCourant.lignesCumuls[aParamsCelluleHover.ligne]) {
                        return true;
                    }
                }
                return false;
            }
            avecContenuTronque(aParams) {
                return this.options.avecContenuTronque;
            }
            avecAlternanceCouleurLigne(aParamsCellule) {
                if (this.estUnDeploiement(aParamsCellule) || (aParamsCellule.celluleLignePrecedente && this.estUnDeploiement(aParamsCellule.celluleLignePrecedente))) {
                    return 0;
                }
                return true;
            }
            avecEvenementEdition(aParams) {
                return this.options.avecEvnt_Edition;
            }
            avecEvenementSuppression(aParams) {
                return this.options.avecEvnt_Suppression;
            }
            avecEvenementApresEdition(aParams) {
                return this.options.avecEvnt_ApresEdition;
            }
            avecEvenementApresSuppression() {
                return this.options.avecEvnt_ApresSuppression;
            }
            avecInterruptionSuppression() {
                return this.options.avecInterruptionSuppression;
            }
            surCreation(D, V, J) {
                return;
            }
            avecCreationElementsDynamique(aListeValeurs, aLigneCreation) {
                return false;
            }
            surEdition(aParams, V) {}
            forcerActualisationListeSurEdition(aParams) {
                return true;
            }
            surSuppression(aArticle) {
                aArticle.setEtat(Enumere_Etat_1.EGenreEtat.Suppression);
            }
            getEtatSurEdition(aParams) {
                return Enumere_Etat_1.EGenreEtat.Modification;
            }
            editionConfirmation(aParams) {
                return false;
            }
            suppressionImpossible(D, aListeSelections) {
                return false;
            }
            suppressionConfirmation(D, aListeSelections) {
                return true;
            }
            estCelluleWAIRowHeader(aParams) {
                return false;
            }
            getWAIInputEdition(aParams) {
                return '';
            }
            avecTrimSurEdition(aParams) {
                return this.options.avecTrimSurEdition;
            }
            autoriserChaineVideSurEdition(aParams) {
                return false;
            }
            alignVCenter(aParams) {
                return this.options.alignVCenter;
            }
            getPadding(aParams) {
                return false;
            }
            getNiveauDeploiement(aParams) {
                return 1;
            }
            getColonneDeFusion(aParamsCellule) {
                return null;
            }
            fusionCelluleAvecColonnePrecedente(aParams) {
                return false;
            }
            fusionCelluleAvecLignePrecedente(aParamsCellule) {
                return false;
            }
            avecBordureDroite(aParams) {
                return true;
            }
            avecBordureBas(aParams) {
                return true;
            }
            avecBordureHaut(aParams) {
                return false;
            }
            getIndentationCelluleSelonParente(aParams) {
                if (!aParams) {
                    return 0;
                }
                let lIndent = 0
                  , lArticle = aParams.article;
                while (lArticle && lArticle.pere) {
                    lIndent += this.options.indentationCelluleEnfant || 0;
                    lArticle = lArticle.pere;
                }
                return lIndent;
            }
            getIndentationCellule(aParams) {
                return 0;
            }
            initialiserObjetGraphique(aParams, aInstance) {
                return null;
            }
            setDonneesObjetGraphique(aParams, aInstance) {
                return null;
            }
            getCouleurCellule(aParams, aCouleurCellule) {
                return undefined;
            }
            getListeLignesTotal() {
                return null;
            }
            getContenuTotal(aParams) {
                return '';
            }
            getTypeCelluleTotal(aParams) {
                return ObjetDonneesListe.typeCelluleTotal.defaut;
            }
            _getStyleTotal(aParams) {
                const lCoul = (0,
                AccessApp_1.getApp)().getCouleur();
                switch (aParams.typeCellule) {
                case ObjetDonneesListe.typeCelluleTotal.defaut:
                    return ObjetStyle_1.GStyle.composeCouleurFond(lCoul.liste.total.fond) + ObjetStyle_1.GStyle.composeCouleurTexte(lCoul.liste.total.texte);
                case ObjetDonneesListe.typeCelluleTotal.fond:
                    return '';
                case ObjetDonneesListe.typeCelluleTotal.editable:
                    return ObjetStyle_1.GStyle.composeCouleurFond(lCoul.liste.editable.fond);
                case ObjetDonneesListe.typeCelluleTotal.alterne:
                    return ObjetStyle_1.GStyle.composeCouleurFond(lCoul.liste.moyenneAlternee2.fond) + ObjetStyle_1.GStyle.composeCouleurTexte(lCoul.noir);
                default:
                    ;
                }
                return '';
            }
            getClassTotal(aParams) {
                return '';
            }
            avecBordureTotalVisible(aParams) {
                return aParams.typeCellule !== ObjetDonneesListe.typeCelluleTotal.fond;
            }
            getColonneDeFusionTotal(aParams) {
                return null;
            }
            avecEvenementSelectionClickTotal(aParams) {
                return false;
            }
            getMessageDoublon(aElement) {
                return aElement && aElement.getLibelle() ? ObjetTraduction_1.GTraductions.getValeur('liste.doublonNom', [aElement.getLibelle()]) : ObjetTraduction_1.GTraductions.getValeur('liste.doublon');
            }
            getMessageCreationImpossible(aErreur) {
                return ObjetTraduction_1.GTraductions.getValeur('liste.creationImpossible');
            }
            getMessageEditionImpossible(aParams, aErreur) {
                return ObjetTraduction_1.GTraductions.getValeur('liste.editionImpossible');
            }
            getMessageEditionConfirmation(aParams) {
                return '';
            }
            getMessageSuppressionImpossible(aDonnee, aListeSelections) {
                return ObjetTraduction_1.GTraductions.getValeur('liste.suppressionImpossible');
            }
            getMessageSuppressionConfirmation(aDonnee, aListeSelections) {
                return ObjetTraduction_1.GTraductions.getValeur('liste.suppressionSelection');
            }
            getMessageTailleMaximaleSaisie() {
                return ObjetTraduction_1.GTraductions.getValeur('liste.tailleMaxSaisie');
            }
            editionRefusee(aParams) {
                const lMessageRefus = this.getMessageEditionRefusee(aParams);
                if (lMessageRefus) {
                    const lEstString = typeof lMessageRefus === 'string';
                    (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        titre: lEstString ? '' : lMessageRefus.titre || '',
                        message: lEstString ? lMessageRefus : lMessageRefus.message
                    });
                    return true;
                }
                return false;
            }
            getMessageEditionRefusee(aParams) {
                return '';
            }
            getListeSupprimables(aListeSelections, aParamsCellule) {
                const lListe = new ObjetListeElements_1.ObjetListeElements();
                aListeSelections.parcourir( (aElement) => {
                    if (this.avecSuppression(aParamsCellule)) {
                        lListe.addElement(aElement);
                    }
                }
                );
                return lListe;
            }
            enModification(aParams) {
                return true;
            }
            getControleCaracteresInput(aParams) {
                return null;
            }
            _avecSuppression(aParams) {
                if (aParams.listeSelection && aParams.listeSelection.count() > 0) {
                    let lAvecSuppression = false;
                    aParams.listeSelection.parcourir( (aElement) => {
                        if (this.avecSuppression(aParams)) {
                            lAvecSuppression = true;
                            return false;
                        }
                    }
                    );
                    return lAvecSuppression;
                }
                return this.avecSuppression(aParams);
            }
            getTailleTexteMax(aParams) {
                return 0;
            }
            _getTailleTexteMax(aParams) {
                switch (this.getTypeValeur(aParams)) {
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Texte:
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.ZoneTexte:
                    return this.getTailleTexteMax(aParams);
                default:
                    return 0;
                }
            }
            _initialiserObjetGraphique(aParams, aInstance) {
                return this.initialiserObjetGraphique(aParams, aInstance);
            }
            _setDonneesObjetGraphique(aParams, aInstance) {
                return this.setDonneesObjetGraphique(aParams, aInstance);
            }
            getMessage() {
                return this.Message;
            }
            trier() {
                if (this.avecTri() && this.Donnees) {
                    const lColonne = this.triCourant ? this.triCourant.colonne.length === 1 ? this.triCourant.colonne[0] : this.triCourant.colonne : null;
                    const lGenre = this.triCourant ? this.triCourant.genre.length === 1 ? this.triCourant.genre[0] : this.triCourant.genre : null;
                    const lTri = this.getTri(lColonne, lGenre);
                    if (lTri) {
                        this.Donnees.setTri(lTri);
                    }
                    this.Donnees.trier();
                }
            }
            setTriCourantDeListe(aTri) {
                this.triCourant = aTri;
            }
            setValeur(aParams) {
                switch (this.getTypeValeur(aParams)) {
                case ObjetDonneesListe.ETypeCellule.Texte:
                case ObjetDonneesListe.ETypeCellule.ZoneTexte:
                case ObjetDonneesListe.ETypeCellule.Html:
                    return aParams.valeur;
                case ObjetDonneesListe.ETypeCellule.Date:
                case ObjetDonneesListe.ETypeCellule.DateCalendrier:
                    {
                        if (aParams.valeur === null || aParams.valeur === undefined) {
                            return '';
                        }
                        const lValeur = aParams.valeur.split('/');
                        if (lValeur[2].length === 2) {
                            lValeur[2] = '20' + lValeur[2];
                        }
                        const lDate = new Date(parseInt(lValeur[2]),parseInt(lValeur[1]) - 1,parseInt(lValeur[0]));
                        if (!isNaN(lDate) && (lValeur[0].charAt(0) === '0')) {
                            lValeur[0] = lValeur[0].charAt(1);
                        }
                        return isNaN(lDate) || !((lDate.getFullYear() === parseInt(lValeur[2])) && (lDate.getMonth() === (parseInt(lValeur[1]) - 1)) && (lDate.getDate() === parseInt(lValeur[0]))) ? null : lDate;
                    }
                case ObjetDonneesListe.ETypeCellule.Coche:
                    {
                        const lValeur = this.getValeur(aParams);
                        if (lValeur === ObjetDonneesListe.EGenreCoche.Verte) {
                            return ObjetDonneesListe.EGenreCoche.Aucune;
                        }
                        if (lValeur === ObjetDonneesListe.EGenreCoche.Grise) {
                            return ObjetDonneesListe.EGenreCoche.Verte;
                        }
                        if (lValeur === ObjetDonneesListe.EGenreCoche.Aucune || lValeur === undefined) {
                            return ObjetDonneesListe.EGenreCoche.Verte;
                        }
                        return ObjetDonneesListe.EGenreCoche.Aucune;
                    }
                case ObjetDonneesListe.ETypeCellule.HeureMinute:
                    {
                        const lHeureMinute = ObjetDate_1.GDate.parseHeureMinute(aParams.valeur);
                        return lHeureMinute && lHeureMinute.ok ? lHeureMinute : null;
                    }
                }
                return aParams.valeur;
            }
            estUnDoublon(aDonnee) {
                if (this._indexsUnique && this._indexsUnique.existeIndex()) {
                    const lNb = this.getNbrLignes();
                    for (let J = 0; J < lNb; J++) {
                        const lDonnee = this.Donnees.get(J);
                        if ((lDonnee !== aDonnee) && (lDonnee.getEtat() !== Enumere_Etat_1.EGenreEtat.Suppression)) {
                            if (this._indexsUnique.estDoublon(aDonnee, lDonnee)) {
                                return true;
                            }
                        }
                    }
                }
                return false;
            }
            getMessageFormat(aParams) {
                switch (this.getTypeValeur(aParams)) {
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Date:
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.DateCalendrier:
                    return ObjetTraduction_1.GTraductions.getValeur('liste.erreurDate');
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.HeureMinute:
                    {
                        const lBorneDebut = '0' + ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure') + '00'
                          , lBorneFin = '24' + ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure') + '00';
                        return ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('liste.erreurHeureMinute'), [lBorneDebut, lBorneFin]);
                    }
                }
                return null;
            }
            getValeurParDefaut(aParams) {
                return '';
            }
            getOptionsNote(aParams) {
                return {
                    afficherAvecVirgule: true,
                    hintSurErreur: false
                };
            }
            _getValeur(aParams) {
                const lValeur = aParams.ligne === null || aParams.ligne === undefined ? this.getValeurParDefaut(aParams) : this.getValeur(aParams);
                switch (this.getTypeValeur(aParams)) {
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Texte:
                    return lValeur;
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.ZoneTexte:
                    return lValeur;
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Html:
                    return lValeur;
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Date:
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.DateCalendrier:
                    return this.getChaineDeDate(lValeur, aParams);
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Coche:
                    return lValeur;
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.CocheDeploiement:
                    return '';
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Icon:
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Image:
                    return lValeur;
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.HeureMinute:
                    if (MethodesObjet_1.MethodesObjet.isDate(lValeur)) {
                        return ObjetDate_1.GDate.formatDate(lValeur, '%hh%sh%mm');
                    } else if (MethodesObjet_1.MethodesObjet.isNumber(lValeur)) {
                        return UtilitaireDuree_1.TUtilitaireDuree.dureeEnHeuresMinutes(lValeur).toString('%hh%sh%mm');
                    }
                    ;return '';
                case ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Note:
                    {
                        const lOptionsNote = this.getOptionsNote(aParams);
                        if (!lValeur) {
                            return aParams.surEdition ? null : lOptionsNote && lOptionsNote.texteSiVide ? lOptionsNote.texteSiVide : '';
                        }
                        if (lValeur instanceof TypeNote_1.TypeNote) {
                            if (aParams.surEdition) {
                                return lValeur;
                            }
                            let lLibelle = lOptionsNote && !lOptionsNote.afficherAvecVirgule ? lValeur.getNoteSansDecimaleForcee() : lValeur.getNote();
                            if (lOptionsNote && lOptionsNote.avecParenthese) {
                                lLibelle = '(' + lLibelle + ')';
                            }
                            if (lOptionsNote && !!lOptionsNote.suffixe) {
                                lLibelle = lLibelle + lOptionsNote.suffixe;
                            }
                            if (lOptionsNote && lOptionsNote.avecTiret) {
                                lLibelle = '-';
                            }
                            return lLibelle;
                        }
                        ;
                    }
                }
                return lValeur;
            }
            _surCreation(aListeValeurs, aLigneCreation, aParams) {
                function _creerElement() {
                    const lDonnee = new ObjetElement_1.ObjetElement();
                    lDonnee.Numero = ObjetElement_1.ObjetElement.getNumeroCreation();
                    return lDonnee;
                }
                function _ajouterElement(aElement, aLigne) {
                    if (!this.estUnDoublon(aElement)) {
                        aElement.setEtat(Enumere_Etat_1.EGenreEtat.Creation);
                        this.Donnees.addElement(aElement);
                        this.trier();
                        aLigne = this.getIndice(aElement);
                    } else {
                        this.Message = this.getMessageDoublon(aElement);
                    }
                    return aLigne;
                }
                this.Message = null;
                let lResult = -1;
                let lErreur_Format = -1;
                const lListeValeurs = [];
                let lParams;
                lListeValeurs[-1] = aListeValeurs[-1];
                lListeValeurs.data = aListeValeurs.data;
                for (let I = 0; I < aListeValeurs.length; I++) {
                    if ((aListeValeurs[I] !== null && aListeValeurs[I] !== undefined)) {
                        lParams = Object.assign(aParams, {
                            colonne: I,
                            ligne: -1,
                            valeur: aListeValeurs[I]
                        });
                        lListeValeurs[I] = this.setValeur(lParams);
                        if (lListeValeurs[I] === null || lListeValeurs[I] === undefined) {
                            lErreur_Format = I;
                        }
                    }
                }
                if (lErreur_Format === -1) {
                    const lAvecCreationDynamique = this.avecCreationElementsDynamique(lListeValeurs, aLigneCreation);
                    let lDonneeCreation;
                    if (lAvecCreationDynamique) {
                        lDonneeCreation = new ObjetListeElements_1.ObjetListeElements();
                    } else {
                        lDonneeCreation = _creerElement();
                    }
                    const lErreur = this.surCreation(lDonneeCreation, lListeValeurs, aLigneCreation);
                    if (lErreur === null || lErreur === undefined) {
                        if (lAvecCreationDynamique && lDonneeCreation instanceof ObjetListeElements_1.ObjetListeElements) {
                            if (lDonneeCreation.count() === 0) {
                                this.Message = this.getMessageCreationImpossible(lErreur);
                            } else {
                                lDonneeCreation.parcourir( (aElement) => {
                                    lResult = _ajouterElement.call(this, aElement, lResult);
                                }
                                );
                            }
                        } else {
                            lResult = _ajouterElement.call(this, lDonneeCreation, lResult);
                        }
                    } else {
                        this.Message = this.getMessageCreationImpossible(lErreur);
                    }
                } else {
                    lParams = this.paramsListe.getParams(lErreur_Format, lResult);
                    this.Message = this.getMessageFormat(Object.assign(aParams, lParams));
                }
                return lResult;
            }
            _surEdition(aParams) {
                this.Message = null;
                const lValeur = this.setValeur(aParams);
                if ((lValeur !== null && lValeur !== undefined)) {
                    const lValeurPrecedente = this.getValeur(aParams);
                    const lErreur = this.surEdition(aParams, lValeur);
                    const lSurEdition_after = (aParams, aError) => {
                        if (aError === null || aError === undefined) {
                            if (!this.estUnDoublon(aParams.article)) {
                                if (this.enModification(aParams)) {
                                    aParams.article.setEtat(this.getEtatSurEdition(aParams));
                                }
                                if (!aParams.sansTriDonnees) {
                                    this.trier();
                                }
                                aParams.ligne = this.getIndice(aParams.article);
                            } else {
                                this.Message = this.getMessageDoublon(aParams.article);
                                aParams.valeur = lValeurPrecedente;
                                this.surEdition(aParams, lValeurPrecedente);
                            }
                        } else {
                            this.Message = this.getMessageEditionImpossible(aParams, aError);
                            aParams.valeur = lValeurPrecedente;
                            this.surEdition(aParams, lValeurPrecedente);
                        }
                    }
                    ;
                    if (lErreur && lErreur instanceof Promise) {
                        return lErreur.then( (aError) => {
                            if (aError && aError.annulerEdition) {
                                aParams.valeur = lValeurPrecedente;
                                return aError;
                            }
                            lSurEdition_after(aParams, aError);
                        }
                        );
                    } else {
                        lSurEdition_after(aParams, lErreur);
                    }
                } else {
                    this.Message = this.getMessageFormat(aParams);
                }
            }
            _editionConfirmation(aParams) {
                this.Message = null;
                if (this.editionConfirmation(aParams)) {
                    this.Message = this.getMessageEditionConfirmation(aParams);
                    return true;
                }
            }
            _surSuppression(aLigne, aListeSuppressions) {
                if (aListeSuppressions && aListeSuppressions.parcourir) {
                    aListeSuppressions.parcourir( (aElement) => {
                        this.surSuppression(aElement);
                    }
                    );
                } else {
                    const lDonnee = this.Donnees.get(aLigne);
                    this.surSuppression(lDonnee);
                }
                this.trier();
                return -1;
            }
            _suppressionImpossible(aLigne, aListeSelections) {
                this.Message = null;
                const lDonnee = this.Donnees.get(aLigne);
                if (this.suppressionImpossible(lDonnee, aListeSelections)) {
                    this.Message = this.getMessageSuppressionImpossible(lDonnee, aListeSelections);
                    return true;
                }
            }
            _suppressionConfirmation(aLigne, aListeSelections) {
                this.Message = null;
                const lDonnee = this.Donnees.get(aLigne);
                if (this.suppressionConfirmation(lDonnee, aListeSelections)) {
                    this.Message = this.getMessageSuppressionConfirmation(lDonnee, aListeSelections);
                    return !!this.Message;
                }
            }
            getParametresSelectionnerCelluleSuivanteFinEdition(aParams) {
                return {
                    orientationVerticale: true,
                    avecCelluleEditable: true,
                    entrerEdition: true,
                    avecSelection: true
                };
            }
        }
        exports.ObjetDonneesListe = ObjetDonneesListe;
        (function(ObjetDonneesListe) {
            let ECouleurCellule;
            (function(ECouleurCellule) {
                ECouleurCellule[ECouleurCellule["Blanc"] = 0] = "Blanc";
                ECouleurCellule[ECouleurCellule["Gris"] = 1] = "Gris";
                ECouleurCellule[ECouleurCellule["Deploiement"] = 2] = "Deploiement";
                ECouleurCellule[ECouleurCellule["Fixe"] = 3] = "Fixe";
                ECouleurCellule[ECouleurCellule["Total"] = 4] = "Total";
            }
            )(ECouleurCellule = ObjetDonneesListe.ECouleurCellule || (ObjetDonneesListe.ECouleurCellule = {}));
            let typeCelluleTotal;
            (function(typeCelluleTotal) {
                typeCelluleTotal["defaut"] = "defaut";
                typeCelluleTotal["fond"] = "fond";
                typeCelluleTotal["editable"] = "editable";
                typeCelluleTotal["alterne"] = "alterne";
            }
            )(typeCelluleTotal = ObjetDonneesListe.typeCelluleTotal || (ObjetDonneesListe.typeCelluleTotal = {}));
        }
        )(ObjetDonneesListe || (exports.ObjetDonneesListe = ObjetDonneesListe = {}));
    },
    fn: 'objetdonneesliste.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GImage = void 0;
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        const UtilitaireCss_1 = require("UtilitaireCss");
        const GImage = {
            compose(aClass, aLargeur) {
                return '<div' + (aClass ? ' class="' + aClass + '"' : '') + ' style="margin-left:auto; margin-right:auto; width:' + (aLargeur ? aLargeur + 'px' : '100%;') + '">&nbsp;</div>';
            },
            composeImage(aClass, aLargeur, aPourImpression=false) {
                if (!aClass) {
                    IE.log.addLog('ObjetImage.composeImage : aClass non definie');
                    return '';
                }
                if (aPourImpression) {
                    const lRegleCss = '.' + aClass;
                    const lUrl = UtilitaireCss_1.UtilitaireCss.extraireUrlReglesCss(lRegleCss);
                    if (!lUrl) {
                        IE.log.addLog('ObjetImage.composeImage : lUrl non trouv dans la regle Css : ' + aClass);
                        return '';
                    }
                    let lPosition = UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss(lRegleCss, 'position');
                    const lHeight = UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss(lRegleCss, 'height');
                    if (!lPosition) {
                        lPosition = 'relative';
                    }
                    let lLargeur = aLargeur;
                    if (!lLargeur) {
                        lLargeur = parseInt(UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss(lRegleCss, 'width'));
                    }
                    let lLeft, lTop = '0';
                    const lBackGroundPosition = UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss(lRegleCss, 'backgroundPosition');
                    if (lBackGroundPosition) {
                        const lTab = lBackGroundPosition.split(' ');
                        if (lTab.length === 2) {
                            lLeft = lTab[0];
                            lTop = lTab[1];
                        }
                    } else {
                        lLeft = UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss(lRegleCss, 'left');
                        lTop = UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss(lRegleCss, 'top');
                    }
                    let lStyle = '';
                    if (lPosition) {
                        lStyle += 'position:' + lPosition + ';';
                    }
                    if (lHeight) {
                        lStyle += 'height:' + lHeight + ';';
                    }
                    if (lLeft) {
                        lStyle += 'left:' + lLeft + ';';
                    }
                    if (lTop) {
                        lStyle += 'top:' + lTop + ';';
                    }
                    return '<div style="' + ObjetStyle_1.GStyle.composeWidth(lLargeur) + 'margin-left:auto; margin-right:auto; overflow: hidden">' + '<img src="' + lUrl + '" style="' + lStyle + '" /></div>';
                } else {
                    return '<div class="' + aClass + '" style="' + (aLargeur ? ObjetStyle_1.GStyle.composeWidth(aLargeur) : '') + 'margin-left:auto; margin-right:auto;">&nbsp;</div>';
                }
            },
            setImage(aId, aClass) {
                ObjetHtml_1.GHtml.setHtml(aId, this.compose(aClass));
            }
        };
        exports.GImage = GImage;
    },
    fn: 'objetimage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ETypeAffEnModeMixte = void 0;
        var ETypeAffEnModeMixte;
        (function(ETypeAffEnModeMixte) {
            ETypeAffEnModeMixte[ETypeAffEnModeMixte["ellipsis"] = 1] = "ellipsis";
            ETypeAffEnModeMixte[ETypeAffEnModeMixte["icon"] = 2] = "icon";
            ETypeAffEnModeMixte[ETypeAffEnModeMixte["bouton"] = 3] = "bouton";
        }
        )(ETypeAffEnModeMixte || (exports.ETypeAffEnModeMixte = ETypeAffEnModeMixte = {}));
    },
    fn: 'enumere_menuctxmodemixte.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetMenuContextuel = void 0;
        require("ObjetMenuContextuel.css");
        exports.StylesObjetMenuContextuel = {
            ObjetMenuContexutel: 'ObjetMenuContexutel',
            separateur: 'separateur',
            titre: 'titre',
            iconic: 'iconic',
            imgContain: 'img-contain',
            iconeLarge: 'icone-large',
            mcIconContain: 'mc-icon-contain',
            iconText: 'icon-text',
            libelleContain: 'libelle-contain',
            BordureNavigationInactive: 'BordureNavigationInactive',
            libelle: 'libelle',
            btnDeploiement: 'btn-deploiement',
            activeColor: 'active-color',
            onFocus: 'on-focus',
            inactiveColor: 'inactive-color'
        };
    },
    fn: 'objetmenucontextuel.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetMenuContextuel = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetStyle_1 = require("ObjetStyle");
        const Enumere_Direction_1 = require("Enumere_Direction");
        const Enumere_Event_1 = require("Enumere_Event");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetImage_1 = require("ObjetImage");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const ToucheClavier_1 = require("ToucheClavier");
        const Enumere_MenuCtxModeMixte_1 = require("Enumere_MenuCtxModeMixte");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const AccessApp_1 = require("AccessApp");
        const ObjetMenuContextuel_css_1 = require("ObjetMenuContextuel.css");
        const IEHtml_1 = require("IEHtml");
        const EGenreLigneMenu = {
            Separateur: 0,
            Commande: 1,
            Deploiement: 2,
            Titre: 3
        };
        const c_delaiFermetureSousMenu = 300;
        const c_delaiOuvertureSousMenu = 200;
        class ObjetMenuContextuel extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.ListeLignes = new ObjetListeElements_1.ObjetListeElements();
                this._callbacksAfficherLignes = [];
                this.IdNomMenuContextuel = this.Nom + '_MenuContextuel';
                this.IdPremierElement = this.IdNomMenuContextuel;
                this.IdPrecedent = '';
                this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurPreResize, this.fermer);
                this.options = {
                    largeurMin: null,
                    largeurMaxLibelle: 400,
                    largeurColonneGauche: 25,
                    couleurFond: (0,
                    AccessApp_1.getApp)().getCouleur().blanc,
                    couleurBordureDroiteImage: (0,
                    AccessApp_1.getApp)().getCouleur().bordure,
                    heightLigne: 16,
                    preventScrollSurRestaurationFocus: false,
                    estModeMixte: false
                };
            }
            static afficher(aParametres) {
                const lParametres = Object.assign({
                    pere: null,
                    evenement: null,
                    initCommandes: null,
                    affichageSurInitCommandes: false,
                    id: null,
                    options: null
                }, aParametres);
                if (!lParametres.pere) {
                    return null;
                }
                if (!lParametres.initCommandes) {
                    return null;
                }
                const lInstance = new ObjetMenuContextuel({
                    pere: lParametres.pere,
                    evenement: lParametres.evenement
                });
                lInstance.destructionSurFermeture = true;
                lInstance.setOptions(lParametres.options);
                IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(lInstance.getNom());
                $('#' + lInstance.getNom().escapeJQ()).on('destroyed', () => {
                    if (lParametres.destroy) {
                        lParametres.destroy();
                        IEHtml_1.default.refresh();
                    }
                    lInstance.free();
                }
                );
                lParametres.initCommandes.call(lParametres.pere, lInstance);
                if (!lInstance.contientAuMoinsUneLigne()) {
                    return;
                }
                lInstance.surKeyUp = lParametres.surKeyUp;
                lInstance.surKeyPress = lParametres.surKeyPress;
                if (!lParametres.affichageSurInitCommandes) {
                    lInstance.setDonnees(lParametres.id);
                }
                return lInstance;
            }
            add(aLibelle, aActif, aCallback, aExtend) {
                const lElement = this.addCommande(0, aLibelle, aActif);
                lElement.setCallback(aCallback);
                if (aExtend) {
                    $.extend(lElement, aExtend);
                }
                return this;
            }
            addTitre(aLibelle) {
                const lElement = new ObjetElement_1.ObjetElement(aLibelle,null,EGenreLigneMenu.Titre);
                this._addElement(lElement);
                return lElement;
            }
            addSousMenu(aLibelle, aInitialisationSousMenu, aParametres) {
                const lElement = new ObjetElement_1.ObjetElement(aLibelle,null,EGenreLigneMenu.Deploiement);
                lElement._initSousMenu = aInitialisationSousMenu;
                lElement.parametresSousMenu = $.extend({
                    callback: null,
                    options: null
                }, aParametres);
                this._addElement(lElement);
                return lElement;
            }
            addCommande(ANumeroCommande, ALibelle, AActif, aData, aCallbackAfficher) {
                const LElement = new ObjetElement_1.ObjetElement(ALibelle,ANumeroCommande,EGenreLigneMenu.Commande);
                LElement.actif = ((AActif !== null && AActif !== undefined) ? AActif : true);
                LElement.data = aData;
                LElement.callbackAfficher = aCallbackAfficher;
                LElement.callbackValidation = null;
                LElement.setCallback = function(aCallback) {
                    this.callbackValidation = aCallback;
                    return this;
                }
                ;
                this._addElement(LElement);
                return LElement;
            }
            addSelecFile(aLibelle, aExtend, aActif) {
                if (!aExtend || !aExtend.getOptionsSelecFile || !aExtend.addFiles) {}
                return this.add(aLibelle, aActif !== false, null, $.extend({
                    estSelecFile: true
                }, aExtend));
            }
            addSeparateur() {
                delete this._prochaineCommandeAvecSeparateur;
                if (this.ListeLignes.count() > 0) {
                    this.ListeLignes.addElement(new ObjetElement_1.ObjetElement('',-1,EGenreLigneMenu.Separateur));
                }
            }
            getListeLignes() {
                return this.ListeLignes;
            }
            free() {
                if (!this.isDestroyed()) {
                    super.free();
                    this.fermer();
                }
            }
            jsxNodeMenuContextuel(aNode) {
                const lInstance = this;
                $(aNode).on({
                    'mouseout': function() {
                        if (lInstance.ligne) {
                            lInstance.selectionnerLigne(false, lInstance.ligne);
                        }
                    },
                    'keydown': function(aEvent) {
                        if (aEvent.which === ToucheClavier_1.ToucheClavier.Tab) {
                            aEvent.preventDefault();
                            lInstance.fermer(true);
                        }
                    },
                    'keypress': function(aEvent) {
                        if (lInstance.surKeyPress && lInstance.surKeyPress(aEvent) === true) {
                            lInstance.fermer(true);
                        }
                    },
                    'keyup': function(aEvent) {
                        const lEstToucheFleche = ToucheClavier_1.ToucheClavierUtil.estToucheFleche(aEvent.which);
                        const lEstToucheEchap = aEvent.which === ToucheClavier_1.ToucheClavier.Echap;
                        if (lEstToucheFleche || lEstToucheEchap) {
                            if (lInstance.estSousMenu && lInstance._pereMenu && (lEstToucheEchap || aEvent.which === ToucheClavier_1.ToucheClavier.FlecheGauche)) {
                                lInstance._pereMenu._stopperTimeoutsSousMenus();
                                lInstance.fermer();
                                delete lInstance._pereMenu._instanceSousMenu;
                            } else {
                                if (lEstToucheEchap) {
                                    lInstance.fermer(true);
                                    lInstance.callback.appel();
                                }
                                if (lEstToucheFleche) {
                                    lInstance.navigationClavier(this.id);
                                }
                            }
                            ObjetNavigateur_1.Navigateur.stopperEvenement(aEvent.originalEvent);
                        } else if (lInstance.surKeyUp) {
                            if (lInstance.surKeyUp(aEvent) === true) {
                                lInstance.fermer(true);
                            }
                        }
                    }
                });
            }
            jsxMenuEventOut() {
                const lNodesExclus = [];
                let lCpt = 0;
                let lSousMenu = this._instanceSousMenu;
                while (lSousMenu && lCpt < 20) {
                    lNodesExclus.push(ObjetHtml_1.GHtml.getElement(lSousMenu.Nom));
                    lSousMenu = lSousMenu._instanceSousMenu;
                    lCpt += 1;
                }
                lCpt = 0;
                let lPereMenu = this._pereMenu;
                while (lPereMenu && lCpt < 20) {
                    lNodesExclus.push(ObjetHtml_1.GHtml.getElement(lPereMenu.Nom));
                    lPereMenu = lPereMenu._pereMenu;
                    lCpt += 1;
                }
                return {
                    nodesExclus: lNodesExclus,
                    callback: () => {
                        this.fermer();
                    }
                };
            }
            construireAffichage() {
                this._callbacksAfficherLignes = [];
                const lInfosMenu = {
                    nbColonnesTexte: 1,
                    nbColonnes: 1,
                    avecDeploiement: false
                };
                this.ListeLignes.parcourir( (D) => {
                    if (D.getGenre() !== EGenreLigneMenu.Separateur) {
                        const lLibelle = D.getLibelle();
                        if (Array.isArray(lLibelle)) {
                            lInfosMenu.nbColonnesTexte = Math.max(lInfosMenu.nbColonnesTexte, lLibelle.length);
                        }
                    }
                    if (D.getGenre() === EGenreLigneMenu.Deploiement) {
                        lInfosMenu.avecDeploiement = true;
                    }
                    if (this.options.estModeMixte === true) {
                        if (D.getGenre() === EGenreLigneMenu.Commande && D.typeAffEnModeMixte === Enumere_MenuCtxModeMixte_1.ETypeAffEnModeMixte.bouton) {
                            D.afficher = null;
                        }
                    }
                }
                );
                lInfosMenu.nbColonnes = lInfosMenu.nbColonnesTexte + (lInfosMenu.avecDeploiement ? 1 : 0);
                return (IE.jsx.str("div", {
                    id: this.IdNomMenuContextuel,
                    role: "menu",
                    "ie-node": this.jsxNodeMenuContextuel.bind(this),
                    "ie-eventout": this.jsxMenuEventOut.bind(this),
                    class: ObjetMenuContextuel_css_1.StylesObjetMenuContextuel.ObjetMenuContexutel,
                    tabindex: "-1"
                }, IE.jsx.str("ul", {
                    role: "presentation"
                }, (H) => {
                    this.ListeLignes.parcourir( (aLigne, aIndex) => {
                        if (aLigne && aLigne.afficher !== null) {
                            H.push(this._composeLigne(aLigne, aIndex, lInfosMenu));
                        }
                    }
                    );
                }
                )));
            }
            getIdCelluleTexteParCommande(aGenreCommande) {
                const lIndice = this.ListeLignes.getIndiceParNumeroEtGenre(aGenreCommande, EGenreLigneMenu.Commande);
                return lIndice >= 0 ? this._getIdCelluleTexte(lIndice) : false;
            }
            recupererDonnees() {
                ObjetStyle_1.GStyle.setDisplay(this.Nom, false);
            }
            setParametres(aMinLargeur, aAfficherAbbreviation) {
                this.setOptions({
                    largeurMin: aMinLargeur,
                    largeurColonneGauche: aAfficherAbbreviation ? 30 : undefined
                });
            }
            setDonnees(aID, aListeElements, aGenre, aAfficher) {
                if (aAfficher !== false) {
                    this.afficher(aID);
                }
            }
            contientAuMoinsUneLigne() {
                return (!!this.ListeLignes && this.ListeLignes.count() > 0);
            }
            vider() {
                this.ListeLignes = new ObjetListeElements_1.ObjetListeElements();
                delete this._prochaineCommandeAvecSeparateur;
                if (this.EstAffiche) {
                    this.fermer();
                }
            }
            getEstAfficher() {
                return this.EstAffiche;
            }
            avecSeparateurSurSuivant(aAnnuler) {
                if (aAnnuler === true) {
                    delete this._prochaineCommandeAvecSeparateur;
                } else {
                    this._prochaineCommandeAvecSeparateur = true;
                }
                return this;
            }
            activerCommande(ANumeroCommande, AActiver) {
                const LElement = this.ListeLignes.getElementParNumeroEtGenre(ANumeroCommande, EGenreLigneMenu.Commande);
                if (LElement) {
                    LElement.actif = AActiver;
                    ObjetHtml_1.GHtml.setHtml(this.Nom, this.construireAffichage(), {
                        controleur: this.controleur
                    });
                }
            }
            setLibelleCommande(ANumeroCommande, ALibelle) {
                const LElement = this.ListeLignes.getElementParNumeroEtGenre(ANumeroCommande, EGenreLigneMenu.Commande);
                if (LElement) {
                    LElement.Libelle = ALibelle;
                    ObjetHtml_1.GHtml.setHtml(this.Nom, this.construireAffichage(), {
                        controleur: this.controleur
                    });
                }
            }
            afficher(AId, aEstUnSousMenu) {
                if (!this.EstAffiche) {
                    this.ligne = null;
                    if (!this.contientAuMoinsUneLigne()) {
                        IE.log.addLog('Afficher : aucun lment  afficher');
                        return;
                    }
                    ObjetHtml_1.GHtml.setHtml(this.Nom, this.construireAffichage(), {
                        controleur: this.controleur
                    });
                    ObjetStyle_1.GStyle.setDisplay(this.Nom, true);
                    if (AId) {
                        if (typeof AId === 'string' || ObjetHtml_1.GHtml.estElement(AId)) {
                            if (aEstUnSousMenu) {
                                ObjetPosition_1.GPosition.placerFiche(this.Nom, AId, null, {
                                    x: 0,
                                    y: 0
                                });
                            } else {
                                ObjetPosition_1.GPosition.placerFiche(this.Nom, AId);
                            }
                        } else if ('type'in AId && 'timeStamp'in AId) {
                            if (!AId.pageX && !AId.pageY) {
                                if (ObjetHtml_1.GHtml.estElement(AId.target)) {
                                    ObjetPosition_1.GPosition.placerFiche(this.Nom, AId.target);
                                } else {
                                    ObjetPosition_1.GPosition.placer(this.Nom, ObjetNavigateur_1.Navigateur.pointerX + 5, ObjetNavigateur_1.Navigateur.pointerY + 5);
                                }
                            } else {
                                ObjetPosition_1.GPosition.placer(this.Nom, AId.pageX + 5, AId.pageY + 5);
                            }
                        } else if (MethodesObjet_1.MethodesObjet.isNumber(AId.x) && MethodesObjet_1.MethodesObjet.isNumber(AId.y)) {
                            ObjetPosition_1.GPosition.placer(this.Nom, AId.x, AId.y);
                        }
                    } else {
                        ObjetPosition_1.GPosition.placer(this.Nom, ObjetNavigateur_1.Navigateur.pointerX + 5, ObjetNavigateur_1.Navigateur.pointerY + 5);
                    }
                    this.EstAffiche = true;
                    GestionnaireModale_1.GestionnaireModale.abonnementPremierPlan(true, this.Nom);
                    GestionnaireModale_1.GestionnaireModale.enPremierPlan(this.Nom);
                    GestionnaireModale_1.GestionnaireModale.abonnementBlocageInterface(true, this.Nom);
                    this._focusPrecedent = document.activeElement;
                    this.focusSurPremierElement();
                    if (this._callbacksAfficherLignes) {
                        this._callbacksAfficherLignes.forEach( (aCallback) => {
                            if (aCallback) {
                                aCallback();
                            }
                        }
                        );
                    }
                }
            }
            fermer(aToutFermer) {
                if (this.EstAffiche) {
                    this.EstAffiche = false;
                    this._stopperTimeoutsSousMenus();
                    if (this._instanceSousMenu) {
                        this._instanceSousMenu.fermer();
                        delete this._instanceSousMenu;
                    }
                    try {
                        if (this._focusPrecedent && this._focusPrecedent.focus && $(this._focusPrecedent).length === 1) {
                            this._focusPrecedent.focus({
                                preventScroll: this.options.preventScrollSurRestaurationFocus
                            });
                            this._focusPrecedent = null;
                        }
                    } catch (e) {}
                    ObjetStyle_1.GStyle.setDisplay(this.Nom, false);
                    this.effacer();
                    this.resetTableauxNavigation();
                    this.IdPrecedent = '';
                    GestionnaireModale_1.GestionnaireModale.abonnementPremierPlan(false, this.Nom);
                    GestionnaireModale_1.GestionnaireModale.abonnementBlocageInterface(false, this.Nom);
                    if (this.destructionSurFermeture) {
                        this.free();
                    }
                    if (aToutFermer && this._pereMenu) {
                        this._pereMenu.fermer(true);
                    }
                    IEHtml_1.default.refresh();
                }
            }
            surSelection(aId, aActif, aPositionLigne) {
                if (this.ligne) {
                    this.selectionnerLigne(false, this.ligne);
                }
                this.ligne = this.ListeLignes.get(aPositionLigne);
                this.ligne.id = aId;
                this.ligne.actif = aActif;
                this.selectionnerLigne(true, this.ligne);
            }
            selectionnerLigne(aSelectionner, aLigne) {
                if (!aLigne) {
                    return;
                }
                ObjetHtml_1.GHtml.modifierClass(aLigne.id, aSelectionner ? 'no-focus' : 'on-focus', aSelectionner ? 'on-focus' : 'no-focus');
            }
            selectionnerLigneParPosition(aId, aSelectionner, aPosition) {
                const lLigne = this.ListeLignes.get(aPosition);
                lLigne.id = aId;
                lLigne.actif = true;
                this.selectionnerLigne(aSelectionner, lLigne);
            }
            getZIndex() {
                return 1200;
            }
            surValidation(aPositionLigne) {
                this.ligne = this.ListeLignes.get(aPositionLigne);
                this.ligne.id = this._getIdCelluleTexte(aPositionLigne);
                if (this.ligne.getGenre() !== EGenreLigneMenu.Deploiement) {
                    this.fermer(true);
                    if (this.ligne && MethodesObjet_1.MethodesObjet.isFunction(this.ligne.callbackValidation)) {
                        this.ligne.callbackValidation.call(this.Pere || this, this.ligne);
                    } else {
                        this.callback.appel(this.ligne);
                    }
                }
            }
            estObjetGraphiqueFenetre() {
                return true;
            }
            _ouvertureSousMenu(aElement, aAvecDelai) {
                if (aElement && this._instanceSousMenu) {
                    clearTimeout(this._instanceSousMenu._timeoutFermetureSousMenu);
                    this._instanceSousMenu.fermer();
                    delete this._instanceSousMenu;
                }
                this._stopperTimeoutsSousMenus();
                if (this._avecSousMenu(aElement)) {
                    this._timeoutOuvertureSousMenu = setTimeout( () => {
                        this._afficherSousMenu(aElement);
                    }
                    , aAvecDelai ? c_delaiOuvertureSousMenu : 0);
                }
            }
            _stopperTimeoutsSousMenus() {
                if (this._timeoutFermetureSousMenu) {
                    clearTimeout(this._timeoutFermetureSousMenu);
                }
                if (this._timeoutOuvertureSousMenu) {
                    clearTimeout(this._timeoutOuvertureSousMenu);
                }
                this._timeoutFermetureSousMenu = null;
                this._timeoutOuvertureSousMenu = null;
                if (this._pereMenu) {
                    this._pereMenu._stopperTimeoutsSousMenus();
                }
            }
            _avecSousMenu(aElement) {
                return aElement && aElement.getGenre() === EGenreLigneMenu.Deploiement && !!aElement._initSousMenu;
            }
            _afficherSousMenu(aElementSousMenu) {
                const lThis = this;
                this._instanceSousMenu = ObjetMenuContextuel.afficher({
                    pere: this,
                    evenement: function(aLigne) {
                        if (MethodesObjet_1.MethodesObjet.isFunction(aElementSousMenu.parametresSousMenu.callback)) {
                            aElementSousMenu.parametresSousMenu.callback.call(this.Pere || this, aLigne);
                        } else {
                            lThis.callback.appel(aLigne);
                        }
                    },
                    initCommandes: aElementSousMenu._initSousMenu,
                    affichageSurInitCommandes: true,
                    options: aElementSousMenu.parametresSousMenu.options || this.options,
                    surKeyUp: this.surKeyUp,
                    surKeyPress: this.surKeyPress
                });
                if (this._instanceSousMenu) {
                    this._instanceSousMenu._pereMenu = this;
                    this._instanceSousMenu.estSousMenu = true;
                    this._instanceSousMenu.afficher(aElementSousMenu.id, true);
                }
            }
            _composeLigne(aLigne, aPositionLigne, aInfosMenu) {
                switch (aLigne.getGenre()) {
                case EGenreLigneMenu.Separateur:
                    return this._composeSeparateur();
                case EGenreLigneMenu.Commande:
                case EGenreLigneMenu.Deploiement:
                    return this._composeTexte(aLigne, aPositionLigne, aInfosMenu);
                case EGenreLigneMenu.Titre:
                    return this._composeTitre(aLigne);
                }
            }
            _getIdCelluleTexte(aPositionLigne) {
                return this.Nom + '_' + aPositionLigne;
            }
            _composeTitre(aLigne) {
                const H = [];
                H.push('<li class="titre" role="presentation">', '<h5>', aLigne.getLibelle(), '</h5>', '</li>');
                return H.join('');
            }
            _composeSeparateur() {
                const H = [];
                H.push(IE.jsx.str("li", {
                    class: "separateur",
                    role: "separator"
                }));
                return H.join('');
            }
            jsxNodeLigne(aLigne, aPositionLigne, aActif, aNode) {
                const lInstance = this;
                $(aNode).on({
                    focus() {
                        lInstance.selectionnerLigneParPosition(this.id, true, aPositionLigne);
                    },
                    blur() {
                        lInstance.selectionnerLigneParPosition(this.id, false, aPositionLigne);
                    },
                    'mousedown': function(aEvent) {
                        if (aLigne.getGenre() === EGenreLigneMenu.Deploiement) {
                            aEvent.stopPropagation();
                            return false;
                        }
                    },
                    'pointerdown'(aEvent) {
                        if (aEvent.pointerType === 'touch') {
                            lInstance.surSelection(this.id, aActif, aPositionLigne);
                        }
                        if (lInstance._avecSousMenu(aLigne)) {
                            lInstance.surSelection(this.id, aActif, aPositionLigne);
                            lInstance._ouvertureSousMenu(aLigne, false);
                            aEvent.stopPropagation();
                            return false;
                        }
                    },
                    'mouseenter': function() {
                        lInstance._ouvertureSousMenu(aLigne, true);
                    },
                    'mouseover': function() {
                        if (lInstance.estSousMenu) {
                            if (lInstance._timeoutFermetureSousMenu) {
                                clearTimeout(lInstance._timeoutFermetureSousMenu);
                            }
                            lInstance._timeoutFermetureSousMenu = null;
                        }
                    },
                    'mouseleave': function() {
                        lInstance._stopperTimeoutsSousMenus();
                        if (lInstance._instanceSousMenu) {
                            lInstance._instanceSousMenu._timeoutFermetureSousMenu = setTimeout( () => {
                                lInstance._instanceSousMenu.fermer();
                                delete lInstance._instanceSousMenu;
                            }
                            , c_delaiFermetureSousMenu);
                        }
                        if (lInstance.estSousMenu) {
                            lInstance._timeoutFermetureSousMenu = setTimeout( () => {
                                let lRacineSousMenu = lInstance;
                                let i = 0;
                                while (lRacineSousMenu._pereMenu && lRacineSousMenu._pereMenu.estSousMenu && i < 100) {
                                    lRacineSousMenu = lRacineSousMenu._pereMenu;
                                    i++;
                                }
                                lRacineSousMenu.fermer();
                            }
                            , c_delaiFermetureSousMenu);
                        }
                    },
                    mousemove() {
                        lInstance.surSelection(this.id, aActif, aPositionLigne);
                    },
                    click: function() {
                        if (aActif && aLigne.getGenre() !== EGenreLigneMenu.Deploiement) {
                            if (aLigne.surValidationElement) {
                                aLigne.surValidationElement();
                            } else {
                                lInstance.surValidation(aPositionLigne);
                            }
                        }
                    },
                    keyup: function(aEvent) {
                        lInstance.navigationClavier(this.id);
                        if (ToucheClavier_1.ToucheClavierUtil.estToucheFleche(aEvent.which)) {
                            aEvent.stopPropagation();
                            return;
                        }
                        const lPourSousMenu = lInstance._avecSousMenu(aLigne) && !lInstance._instanceSousMenu;
                        if (ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent) || ToucheClavier_1.ToucheClavierUtil.estEventEspace(aEvent)) {
                            if (lPourSousMenu) {
                                lInstance._ouvertureSousMenu(aLigne, false);
                            } else if (aActif) {
                                if (aLigne.surValidationElement) {
                                    aLigne.surValidationElement();
                                } else {
                                    lInstance.surValidation(aPositionLigne);
                                }
                            }
                        } else if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheDroite) {
                            if (lPourSousMenu) {
                                lInstance._ouvertureSousMenu(aLigne, false);
                            }
                        } else if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheGauche) {
                            lInstance._pereMenu._stopperTimeoutsSousMenus();
                            lInstance.fermer();
                            delete lInstance._pereMenu._instanceSousMenu;
                        }
                    }
                });
            }
            jsxModeleSelecFile(aLigne, aPositionLigne, aActif) {
                const lInstance = this;
                return {
                    getOptionsSelecFile(aGetSelecFile) {
                        aLigne.surValidationElement = aGetSelecFile();
                        return Object.assign({
                            surOuvertureSelecteur: function() {
                                lInstance._stopperTimeoutsSousMenus();
                                setTimeout( () => {
                                    lInstance._stopperTimeoutsSousMenus();
                                }
                                , c_delaiFermetureSousMenu);
                            }
                        }, aLigne.getOptionsSelecFile());
                    },
                    addFiles(aParams) {
                        const lResult = aLigne && aActif ? aLigne.addFiles(aParams, aLigne, aPositionLigne) : false;
                        lInstance.surValidation(aPositionLigne);
                        return lResult;
                    },
                    getDisabled() {
                        return !aActif;
                    }
                };
            }
            _composeTexte(aLigne, aPositionLigne, aInfosMenu) {
                const lId = this._getIdCelluleTexte(aPositionLigne);
                const lEstDeploiement = aLigne.getGenre() === EGenreLigneMenu.Deploiement;
                const lLibelles = Array.isArray(aLigne.getLibelle()) ? aLigne.getLibelle() : [aLigne.getLibelle()];
                const lNbColonnes = Math.max(lLibelles.length, aInfosMenu.nbColonnesTexte);
                let lNumeroColonne;
                let lInfoLibelle;
                let lActif = aLigne.actif;
                if (lActif === null || lActif === undefined) {
                    lActif = true;
                }
                lActif = !!lActif;
                if (aLigne.callbackAfficher) {
                    this._callbacksAfficherLignes.push( () => {
                        aLigne.callbackAfficher.call(this.Pere || this, lId, lActif, aLigne);
                    }
                    );
                }
                const lHtml = (IE.jsx.str("li", {
                    id: lId,
                    "ie-node": this.jsxNodeLigne.bind(this, aLigne, aPositionLigne, lActif),
                    role: "menuitem",
                    tabindex: "-1",
                    "aria-disabled": lActif === true ? false : 'true',
                    "aria-haspopup": aInfosMenu.avecDeploiement && lEstDeploiement ? 'true' : aLigne.ariaHasPopup || false,
                    class: [(lActif && !aLigne.visuInactif ? 'active-color' : ' inactive-color')],
                    title: aLigne.title || false,
                    "ie-model": aLigne.estSelecFile && lActif ? this.jsxModeleSelecFile.bind(this, aLigne, aPositionLigne, lActif) : false,
                    "ie-selecfile": aLigne.estSelecFile && lActif
                }, (H) => {
                    H.push((aLigne.imageFormate ? '<div class="img-contain" aria-hidden="true">' + (aLigne.image ? aLigne.image : '') + '</div>' : '<div class="mc-icon-contain" aria-hidden="true">' + (aLigne.icon ? '<i class="' + aLigne.icon + '">' + (aLigne.libelleIcone || '') + '</i>' : '' + (aLigne.image ? ObjetImage_1.GImage.compose(aLigne.image, aLigne.largeurImage ? aLigne.largeurImage : 16) : '')) + '</div>'));
                    for (lNumeroColonne = 0; lNumeroColonne < lNbColonnes; lNumeroColonne++) {
                        lInfoLibelle = [];
                        if (lNumeroColonne < lLibelles.length) {
                            lInfoLibelle = ['<div style="', (this.options.largeurMaxLibelle ? 'max-width: ' + this.options.largeurMaxLibelle + 'px;' : '') + '" class="libelle" ' + (this.options.largeurMaxLibelle && !IE.estMobile ? ' ie-ellipsis' : '') + '>' + lLibelles[lNumeroColonne] + '</div>'];
                        }
                        H.push('<div class="libelle-contain">');
                        if (lNumeroColonne === 0) {
                            H.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                                id: lId + '_',
                                class: "libelle"
                            }, lInfoLibelle.join(''))));
                        } else {
                            H.push(lInfoLibelle.join(''));
                        }
                        if (aInfosMenu.avecDeploiement) {
                            H.push(lEstDeploiement ? '<i id="' + lId + '_flechedroite" class="btn-deploiement icon_fleche_num" aria-hidden="true"></i>' : '');
                        }
                        H.push('</div>');
                    }
                }
                ));
                if (this.IdPrecedent === '') {
                    this.ajouterAuTableaux(this.IdPremierElement, lId, null, Enumere_Direction_1.EGenreDirection.SensNormal);
                } else {
                    this.ajouterAuTableaux(this.IdPrecedent, lId, null, Enumere_Direction_1.EGenreDirection.DeuxSenses);
                }
                this.IdPrecedent = lId;
                return lHtml;
            }
            _addElement(aElement) {
                if (this._prochaineCommandeAvecSeparateur) {
                    this.addSeparateur();
                }
                this.ListeLignes.addElement(aElement);
            }
        }
        exports.ObjetMenuContextuel = ObjetMenuContextuel;
    },
    fn: 'objetmenucontextuel.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.RechercheTexte = void 0;
        const ComparateurChaines_1 = require("ComparateurChaines");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetPosition_1 = require("ObjetPosition");
        class RechercheTexte {
            static getTabRechercheTexteNormalize(aStrSearch) {
                let lRecherche = aStrSearch && aStrSearch.trim ? aStrSearch.trim().replace(/\s\s/g, '').replace(/[-[\]/{}()*+?.\\^$|']/g, '\\$&') : '';
                const lTabRecherches = [];
                ComparateurChaines_1.ComparateurChaines.normalize(lRecherche).split(' ').forEach( (aVal) => {
                    if (aVal && aVal.trim && aVal.trim() && !lTabRecherches.includes(aVal)) {
                        lTabRecherches.push(aVal.trim());
                    }
                }
                );
                return lTabRecherches;
            }
            static trouverRechercheTabTexteNormalize(aParams) {
                const lParams = Object.assign({
                    str: '',
                    str_avecEntites: true,
                    tabSearch: null,
                    strSearch: null,
                    strSearch_avecEntites: true
                }, aParams);
                if (!lParams.str || !lParams.str.trim) {
                    return false;
                }
                if (lParams.str_avecEntites) {
                    lParams.str = ObjetChaine_1.GChaine.enleverEntites(lParams.str);
                }
                if (!lParams.tabSearch && lParams.strSearch) {
                    lParams.tabSearch = RechercheTexte.getTabRechercheTexteNormalize(lParams.strSearch);
                }
                if (!lParams.tabSearch || !lParams.tabSearch.every) {
                    return true;
                }
                return lParams.tabSearch.every( (aSearch) => {
                    const lSearch = lParams.strSearch_avecEntites ? ObjetChaine_1.GChaine.enleverEntites(aSearch) : aSearch;
                    return new RegExp(lSearch,'i').test(ComparateurChaines_1.ComparateurChaines.normalize(lParams.str));
                }
                );
            }
            static surlignage(aTabDOM, aStrSearch) {
                if (!aTabDOM || !aTabDOM.every) {
                    return false;
                }
                try {
                    const lTabRanges = [];
                    const lTabRecherches = RechercheTexte.getTabRechercheTexteNormalize(aStrSearch);
                    const lDOMSuppression = [];
                    aTabDOM.forEach( (aElementDOM) => {
                        if (aElementDOM.classList.contains(RechercheTexte.cssSurlignageConteneur)) {
                            lDOMSuppression.push(aElementDOM);
                        }
                        lTabRecherches.forEach( (aStrSearch) => {
                            const lRegEx = new RegExp(aStrSearch,'ig');
                            let lRange = null;
                            const lRectConteneur = ObjetPosition_1.GPosition.getClientRect(aElementDOM);
                            let lMatch = lRegEx.exec(ComparateurChaines_1.ComparateurChaines.normalize(aElementDOM.textContent));
                            while (lMatch) {
                                let lStrSearch = lMatch[0];
                                let lCurrentIndex = 0;
                                _iterateNodeText(aElementDOM, (aNodeText) => {
                                    if (lMatch.index >= lCurrentIndex && aNodeText.nodeValue && lMatch.index < lCurrentIndex + aNodeText.nodeValue.length) {
                                        lRange = new Range();
                                        lRange.setStart(aNodeText, lMatch.index - lCurrentIndex);
                                    }
                                    if (lRange && lMatch.index + lStrSearch.length >= lCurrentIndex && lMatch.index + lStrSearch.length <= lCurrentIndex + aNodeText.nodeValue.length) {
                                        lRange.setEnd(aNodeText, lMatch.index + lStrSearch.length - lCurrentIndex);
                                        lTabRanges.push({
                                            node: aElementDOM,
                                            rects: lRange.getClientRects(),
                                            rectCellule: lRectConteneur
                                        });
                                        lRange = null;
                                    }
                                    lCurrentIndex += aNodeText.nodeValue.length;
                                }
                                );
                                lMatch = lRegEx.exec(aElementDOM.textContent);
                            }
                        }
                        );
                    }
                    );
                    lDOMSuppression.forEach( (aElementDOM) => {
                        $(aElementDOM).removeClass(RechercheTexte.cssSurlignageConteneur).find(`.${RechercheTexte.cssSurlignage}`).remove();
                    }
                    );
                    lTabRanges.forEach( (aInfos) => {
                        const lRectCellule = aInfos.rectCellule;
                        for (let i = 0; i < aInfos.rects.length; i++) {
                            const lRect = aInfos.rects[i];
                            if (lRect.width > 0 && lRect.height > 0) {
                                if (i > 0) {
                                    const lRectPrec = aInfos.rects[i - 1];
                                    if (lRectPrec.x === lRect.x && lRectPrec.y === lRect.y && lRectPrec.width === lRect.width && lRectPrec.height === lRect.height) {
                                        continue;
                                    }
                                }
                                $(aInfos.node).addClass(RechercheTexte.cssSurlignageConteneur).append(IE.jsx.str("div", {
                                    class: RechercheTexte.cssSurlignage,
                                    style: `top:${lRect.y - lRectCellule.y}px; left:${lRect.x - lRectCellule.x}px; width:${lRect.width}px; height:${lRect.height}px;"`
                                }));
                            }
                        }
                    }
                    );
                    return true;
                } catch (e) {
                    return false;
                }
            }
            static removeSurlignage(aJElement) {
                if (aJElement.hasClass(RechercheTexte.cssSurlignageConteneur)) {
                    aJElement.removeClass(RechercheTexte.cssSurlignageConteneur).find(`.${RechercheTexte.cssSurlignage}`).remove();
                } else {
                    aJElement.find(`.${RechercheTexte.cssSurlignageConteneur}`).removeClass(RechercheTexte.cssSurlignageConteneur).find(`.${RechercheTexte.cssSurlignage}`).remove();
                }
            }
        }
        exports.RechercheTexte = RechercheTexte;
        RechercheTexte.cssSurlignageConteneur = 'surlignage-conteneur';
        RechercheTexte.cssSurlignage = 'surlignage-recherche-texte';
        function _iterateNodeText(aNode, aFunc) {
            if (aNode && aNode.childNodes) {
                for (let i = 0; i < aNode.childNodes.length; i++) {
                    const lNode = aNode.childNodes[i];
                    if (lNode.nodeType === Node.TEXT_NODE) {
                        aFunc(lNode);
                    } else {
                        _iterateNodeText(lNode, aFunc);
                    }
                }
            }
        }
    },
    fn: 'recherchetexte.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetDonneesListeFlatDesign = void 0;
        require("ObjetDonneesListeFlatDesign.css");
        exports.StylesObjetDonneesListeFlatDesign = {
            ObjetListe: 'ObjetListe',
            skin_flatDesign: 'skin_flatDesign',
            fdDesignMinimal: 'fd-design-minimal',
            indentationFils1: 'indentation-fils-1',
            indentationFils2: 'indentation-fils-2',
            indentationFils3: 'indentation-fils-3',
            indentationFils4: 'indentation-fils-4',
            ombreDroite: 'ombre-droite',
            ombreScroll: 'ombre-scroll',
            top: 'top',
            bottom: 'bottom',
            enteteOmbree: 'entete-ombree',
            fd_ligne: 'fd_ligne',
            fdPerefilsFusion: 'fd-perefils-fusion',
            withSelect: 'with-select',
            selected: 'selected',
            btnImage: 'btnImage',
            btnImageIcon: 'btnImageIcon',
            colorNeutre: 'color-neutre',
            btnImageDisable: 'btnImageDisable',
            btActivable: 'bt-activable',
            liste_contenu_ligne: 'liste_contenu_ligne',
            zoneMessageLarge: 'zone-message-large',
            zoneDeploiement: 'zone-deploiement',
            btnDeploiement: 'btn-deploiement',
            zoneGauche: 'zone-gauche',
            iecb: 'iecb',
            agenda: 'agenda',
            traitCouleur: 'trait-couleur',
            zoneCentrale: 'zone-centrale',
            zoneContenuFormat: 'zone-contenu-format',
            alignCenter: 'align-center',
            icon: 'icon',
            zonePrincipale: 'zone-principale',
            titrePrincipal: 'titre-principal',
            infosSupp: 'infos-supp',
            ieSousTitre: 'ie-sous-titre',
            ieChips: 'ie-chips',
            text: 'text',
            noEllipsis: 'no-ellipsis',
            zoneComplementaire: 'zone-complementaire',
            time: 'time',
            compteur: 'compteur',
            btnConteneur: 'btn-conteneur',
            infoDuree: 'info-duree',
            iconesConteneur: 'icones-conteneur',
            carreIcone: 'carre-icone',
            tiny: 'tiny',
            bloc4: 'bloc-4',
            bloc6: 'bloc-6',
            long: 'long',
            zoneMessage: 'zone-message',
            likeLink: 'like-link',
            colorThemeFoncee: 'color-theme-foncee',
            alertColor: 'alert-color',
            off: 'off',
            zoneDroite: 'zone-droite',
            btnSurvol: 'btn-survol',
            liste_celluleGrid: 'liste_celluleGrid',
            fd_intertitre: 'fd_intertitre',
            fdIntertitreIndent: 'fd-intertitre-indent',
            liste_sepligne: 'liste_sepligne',
            fdStyleIntertitre: 'fd-style-intertitre',
            h3: 'h3',
            h4: 'h4',
            h5: 'h5',
            collection: 'collection',
            collectionItem: 'collection-item',
            liste_btnentete: 'liste_btnentete',
            listeTotaleFd: 'liste-totale-fd',
            listeHeader: 'liste-header',
            listeFooter: 'liste-footer',
            listeHeaderFooterInScroll: 'listeHeaderFooterInScroll',
            footer: 'footer',
            selectable: 'selectable',
            totalEtiquSep: 'total-etiqu-sep',
            aSavoirMessage: 'a-savoir-message',
            totalEtiqu: 'total-etiqu',
            totalContent: 'total-content'
        };
    },
    fn: 'objetdonneeslisteflatdesign.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDonneesListeFlatDesign = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetDonneesListeBase_1 = require("ObjetDonneesListeBase");
        const ObjetDonneesListeFlatDesign_css_1 = require("ObjetDonneesListeFlatDesign.css");
        const ObjetListeEspaceMobile_css_1 = require("ObjetListeEspaceMobile.css");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        class ObjetDonneesListeFlatDesign extends ObjetDonneesListeBase_1.ObjetDonneesListeBase {
            constructor(aDonnees) {
                super(aDonnees);
                this.estFlatDesign = true;
                this.setOptions({
                    avecBoutonActionLigne: true,
                    avecEvnt_Creation: true,
                    avecCB: false,
                    avecEvnt_CB: true,
                    avecCocheCBSurLigne: false,
                    avecDeselectionSurNonSelectionnable: false,
                    avecDeploiement: true,
                    avecEventDeploiementSurCellule: false,
                    flatDesignMinimal: false,
                    avecEllipsis: false,
                    avecContextMenuSansSelection: true,
                    avecIndentationSousInterTitre: false,
                    avecFusionLignePereFils: false
                });
            }
            getZoneGauche(aParams) {
                return '';
            }
            avecCB(aParams) {
                return this.options.avecCB;
            }
            getIconeGaucheContenuFormate(aParams) {
                return '';
            }
            getHintIconeGaucheContenuFormate(aParams) {
                return '';
            }
            getTitreZonePrincipale(aParams) {
                return aParams.article.getLibelle();
            }
            getInfosSuppZonePrincipale(aParams) {
                return '';
            }
            getZoneComplementaire(aParams) {
                return '';
            }
            getZoneMessage(aParams) {
                return '';
            }
            getZoneMessageLarge(aParams) {
                return '';
            }
            getAriaLabelZoneCellule(aParams, aZone) {
                return '';
            }
            getOrdreAriaLabelZoneCellule(aParams) {
                return [ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.lu, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.checkbox, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.zoneGauche, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.iconeGaucheContenuFormate, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.titre, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.infosSuppZonePrincipale, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.message, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.messageLarge, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.zoneComplementaire];
            }
            estLigneOff(aParams) {
                if (this.avecCB(aParams)) {
                    return this.getDisabledCB(aParams);
                }
                return false;
            }
            avecBoutonActionLigne(aParams) {
                return this.options.avecBoutonActionLigne && !this.estInterTitre(aParams.article);
            }
            estInterTitre(aArticle) {
                return !!aArticle.estInterTitre;
            }
            avecSeparateurLigneHautFlatdesign(aParamsCellule, aParamsCellulePrec) {
                return aParamsCellule.article && aParamsCellulePrec.article && !this.estInterTitre(aParamsCellule.article) && !this.estInterTitre(aParamsCellulePrec.article) && !(this.options.avecFusionLignePereFils && aParamsCellule.article.pere && aParamsCellule.article.pere.estUnDeploiement);
            }
            desactiverIndentationParente() {
                return false;
            }
            getValueCB(aParams) {
                return aParams.article ? aParams.article.estCoche : false;
            }
            setValueCB(aParams, aValue) {
                aParams.article.estCoche = aValue;
            }
            getDisabledCB(aParams) {
                return false;
            }
            getTotal(aEstHeader) {
                return null;
            }
            getLigneTotaleSelectionnable(aParamsCellule) {
                return null;
            }
            estLigneTotaleSelectionnable(aArticle) {
                return !!(aArticle && aArticle.estLigneTotale);
            }
            construireFiltres() {
                return '';
            }
            reinitFiltres() {}
            estFiltresParDefaut() {
                return false;
            }
            getLibelleDraggable(aParams) {
                const lTitre = this.getTitreZonePrincipale(aParams);
                const lInfosSupp = this.getInfosSuppZonePrincipale(aParams);
                return IE.jsx.str(IE.jsx.fragment, null, lTitre, lInfosSupp ? IE.jsx.str("br", null) + lInfosSupp : '');
            }
            _getValeur(aParams) {
                const lAvecEllipsis = this.options.avecEllipsis;
                if (this.estInterTitre(aParams.article)) {
                    let lNiveau = aParams.article.estInterTitre;
                    if (lNiveau !== ObjetDonneesListeFlatDesign.typeInterTitre.h4 && lNiveau !== ObjetDonneesListeFlatDesign.typeInterTitre.h5) {
                        lNiveau = ObjetDonneesListeFlatDesign.typeInterTitre.h3;
                    }
                    return {
                        libelle: IE.jsx.str("div", {
                            class: [ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.fdStyleIntertitre, lNiveau],
                            "ie-ellipsis": lAvecEllipsis
                        }, aParams.article.getLibelle())
                    };
                }
                const lDonneesListe = this;
                const H = [];
                let lIdsLabelOrd = [];
                const lWAICellule = this.getOrdreAriaLabelZoneCellule(aParams);
                const lHashIdsWAI = {};
                if (Array.isArray(lWAICellule)) {
                    for (const lVal of lWAICellule) {
                        if (lVal !== ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.lu) {
                            let lId = this.getIdZone(aParams, lVal);
                            lHashIdsWAI[lId] = UtilisationZoneLabelWAI.declared;
                            lIdsLabelOrd.push(lId);
                        }
                    }
                }
                const lFuncGetAttrWAI = (aZone) => {
                    const lWAI = this.getAriaLabelZoneCellule(aParams, aZone);
                    const lId = this.getIdZone(aParams, aZone);
                    if (lHashIdsWAI[lId] && lWAI !== false) {
                        lHashIdsWAI[lId] = UtilisationZoneLabelWAI.used;
                    }
                    return {
                        id: lId,
                        role: lWAI === false ? 'presentation' : false,
                        'aria-label': !lWAI ? false : lWAI
                    };
                }
                ;
                const lEstUnDeploiement = !this.enConstruction_cacheRechercheTexte && !aParams.enImpression && this.estUnDeploiement(aParams);
                const lZoneGauche = this.getZoneGauche(aParams);
                const lNiveauParente = this.desactiverIndentationParente() ? 0 : this._getNiveauParente(aParams);
                if (lEstUnDeploiement || lNiveauParente > 0) {
                    H.push(IE.jsx.str("div", {
                        class: [ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zoneDeploiement, lNiveauParente > 0 ? `indentation-fils-${lNiveauParente}` : '']
                    }, () => {
                        if (lEstUnDeploiement) {
                            const lAvecFils = this.avecFilsVisibleDePere(aParams.article);
                            const lDeploye = this._estDeploye(aParams.ligne) && lAvecFils;
                            const lDeploiementDisable = !lAvecFils || (this.options.ignorerDeploiementSurRechercheTexte && this.paramsListe.avecRechercheTexteEnCours);
                            return (IE.jsx.str("ie-btnicon", {
                                class: [ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.btnDeploiement, lDeploye ? 'icon_fleche_num_bas' : 'icon_fleche_num'],
                                "ie-node": this.enImpression || lDeploiementDisable ? false : this.paramsListe.jsxNodeDeploiementLigne.bind(this, aParams),
                                title: ObjetTraduction_1.GTraductions.getValeur('liste.HintBoutonDeploiement'),
                                disabled: !!lDeploiementDisable,
                                tabindex: "-1"
                            }));
                        }
                        return '';
                    }
                    ));
                }
                let lCheckBox = '';
                if (!this.enConstruction_cacheRechercheTexte && !aParams.enImpression && this.avecCB(aParams)) {
                    const lId = this.getIdZone(aParams, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.checkbox);
                    if (!this.options.avecCocheCBSurLigne && lHashIdsWAI[lId]) {
                        lHashIdsWAI[lId] = UtilisationZoneLabelWAI.used;
                    }
                    lCheckBox = IE.jsx.str("ie-checkbox", {
                        "ie-model": this.paramsListe.jsxGetModelCBLigneFlatDesign.bind(this, aParams.ligne),
                        "ie-attr": this.options.avecCocheCBSurLigne ? false : this.paramsListe.jsxGetAttrCBLigneFlatDesign.bind(this, aParams.ligne),
                        id: lId,
                        inert: !!this.options.avecCocheCBSurLigne,
                        tabindex: this.options.avecCocheCBSurLigne ? '-1' : false,
                        "aria-hidden": this.options.avecCocheCBSurLigne ? 'true' : false
                    });
                }
                if (lZoneGauche || lCheckBox) {
                    const lId = this.getIdZone(aParams, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.zoneGauche);
                    if (lHashIdsWAI[lId]) {
                        lHashIdsWAI[lId] = UtilisationZoneLabelWAI.used;
                    }
                    H.push(IE.jsx.str("div", {
                        class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zoneGauche,
                        id: lId
                    }, (aTab) => {
                        if (lCheckBox) {
                            aTab.push(lCheckBox);
                        }
                        if (lZoneGauche) {
                            aTab.push(lZoneGauche);
                        }
                    }
                    ));
                }
                H.push(IE.jsx.str("div", {
                    class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zoneCentrale
                }, (aTabCentrale) => {
                    const lTitre = lDonneesListe.getTitreZonePrincipale(aParams);
                    const lInfosSupp = lDonneesListe.getInfosSuppZonePrincipale(aParams);
                    const lCompl = lDonneesListe.getZoneComplementaire(aParams);
                    const lIconeGauche = lDonneesListe.getIconeGaucheContenuFormate(aParams);
                    if (lTitre || lInfosSupp || lCompl || lIconeGauche) {
                        aTabCentrale.push(IE.jsx.str("div", {
                            class: [ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zoneContenuFormat, lIconeGauche && lTitre && !lInfosSupp ? 'align-center' : '']
                        }, (aTabContenuFormat) => {
                            if (lIconeGauche) {
                                const lHint = lDonneesListe.getHintIconeGaucheContenuFormate(aParams);
                                let lTooltipLabel = false;
                                if (lHint) {
                                    if (MethodesObjet_1.MethodesObjet.isString(lHint)) {
                                        lTooltipLabel = lHint;
                                    } else if (lHint.html) {
                                        lTooltipLabel = () => lHint.html;
                                    }
                                }
                                const lId = this.getIdZone(aParams, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.iconeGaucheContenuFormate);
                                if (lHint && lHashIdsWAI[lId]) {
                                    lHashIdsWAI[lId] = UtilisationZoneLabelWAI.used;
                                }
                                aTabContenuFormat.push(IE.jsx.str("i", {
                                    class: ['icon', MethodesObjet_1.MethodesObjet.isString(lIconeGauche) ? lIconeGauche : lIconeGauche.css],
                                    role: lHint ? 'img' : 'presentation',
                                    id: lId,
                                    "ie-tooltiplabel": lTooltipLabel
                                }, !MethodesObjet_1.MethodesObjet.isString(lIconeGauche) ? lIconeGauche.html || '' : ''));
                            }
                            aTabContenuFormat.push(IE.jsx.str("div", {
                                class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zonePrincipale
                            }, () => {
                                const lTab = [];
                                if (lTitre) {
                                    const lAttrWAI = lFuncGetAttrWAI(ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.titre);
                                    lTab.push(IE.jsx.str("div", Object.assign({
                                        class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.titrePrincipal,
                                        "ie-ellipsis": lAvecEllipsis
                                    }, lAttrWAI), lTitre));
                                }
                                if (lInfosSupp) {
                                    const lAttrWAI = lFuncGetAttrWAI(ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.infosSuppZonePrincipale);
                                    lTab.push(IE.jsx.str("div", Object.assign({
                                        class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.infosSupp,
                                        "ie-ellipsis": lAvecEllipsis
                                    }, lAttrWAI), lInfosSupp));
                                }
                                return lTab.join('');
                            }
                            ));
                            if (lCompl) {
                                const lAttrWAI = lFuncGetAttrWAI(ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.zoneComplementaire);
                                aTabContenuFormat.push(IE.jsx.str("div", Object.assign({
                                    class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zoneComplementaire
                                }, lAttrWAI), lCompl));
                            }
                        }
                        ));
                    }
                    const lMessage = lDonneesListe.getZoneMessage(aParams);
                    if (lMessage) {
                        const lAttrWAI = lFuncGetAttrWAI(ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.message);
                        aTabCentrale.push(IE.jsx.str("div", Object.assign({
                            class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zoneMessage
                        }, lAttrWAI), lMessage));
                    }
                }
                ));
                if (!this.enConstruction_cacheRechercheTexte && !aParams.enImpression && this.avecBoutonActionLigne(aParams)) {
                    const lId = this.getIdZone(aParams, ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.boutonAction);
                    if (lHashIdsWAI[lId]) {
                        lHashIdsWAI[lId] = UtilisationZoneLabelWAI.used;
                    }
                    H.push(IE.jsx.str("div", {
                        class: [ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zoneDroite, (this.paramsListe.versionMobile || ObjetNavigateur_1.Navigateur.isTactile) ? '' : ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.btnSurvol],
                        id: lId
                    }, this._construireBtnAction(aParams)));
                }
                const lMessageLarge = this.getZoneMessageLarge(aParams);
                if (lMessageLarge) {
                    const lAttrWAI = lFuncGetAttrWAI(ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.messageLarge);
                    H.push(IE.jsx.str("div", Object.assign({
                        class: [ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.zoneMessageLarge, lNiveauParente > 0 ? `indentation-fils-${lNiveauParente}` : '']
                    }, lAttrWAI), lMessageLarge));
                }
                const lIds = [];
                if (this.paramsListe.idWAILigneLue && Array.isArray(lWAICellule) && lWAICellule.includes(ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign.lu) && this.estLigneOff(aParams)) {
                    lIds.push(this.paramsListe.idWAILigneLue);
                }
                lIdsLabelOrd.forEach( (aId) => {
                    if (lHashIdsWAI[aId] === UtilisationZoneLabelWAI.used) {
                        lIds.push(aId);
                    }
                }
                );
                return {
                    libelle: H.join(''),
                    idsLabel: lIds.join(' ')
                };
            }
            _avecSelection(aParams) {
                return !this.estInterTitre(aParams.article) && this.avecSelection(aParams);
            }
            getTypeValeur(aParams) {
                return ObjetDonneesListeBase_1.ObjetDonneesListeBase.ETypeCellule.Html;
            }
            _getClassCelluleConteneur(aParams) {
                const lEstInterTitre = this.estInterTitre(aParams.article);
                const lClasses = [lEstInterTitre ? ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.fd_intertitre : ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.fd_ligne];
                if (this.options.flatDesignMinimal) {
                    lClasses.push('fd-design-minimal');
                }
                if (this.estLigneOff(aParams)) {
                    lClasses.push(ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.off);
                }
                if (lEstInterTitre && this.options.avecIndentationSousInterTitre) {
                    lClasses.push(ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.fdIntertitreIndent);
                }
                if (!lEstInterTitre) {
                    if (this.avecSelection(aParams) || (this.options.avecCocheCBSurLigne && this.avecCB(aParams))) {
                        lClasses.push(ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.withSelect);
                    }
                }
                if (this.options.avecFusionLignePereFils && aParams.article.pere && aParams.article.pere && aParams.article.pere.estUnDeploiement) {
                    lClasses.push(ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.fdPerefilsFusion);
                }
                const lClass = this.getClassCelluleConteneur(aParams);
                if (lClass) {
                    lClasses.push(lClass);
                }
                return lClasses.join(' ');
            }
            _getEtatCocheSimple(aParams) {
                return !!this.getValueCB(aParams);
            }
            avecMenuContextuel(aParams) {
                return super.avecMenuContextuel(aParams) && this.avecBoutonActionLigne(aParams);
            }
            _getVisible(aArticle, aParams) {
                if (this.estLigneTotaleSelectionnable(aArticle)) {
                    return !!(aParams && aParams.contexteSelection);
                }
                if (!this.getVisible(aArticle)) {
                    return false;
                }
                return true;
            }
            getHauteurMinCellule(aParams) {
                return this.options.flatDesignMinimal ? 28 : this.options.hauteurMinCellule;
            }
            _getLigneTotaleSelectionnableFd(aLigne) {
                const lArticle = this.Donnees.get(aLigne);
                if (this.estLigneTotaleSelectionnable(lArticle)) {
                    const lParams = this.paramsListe.getParams(0, aLigne);
                    return Object.assign({
                        getHtml: () => lArticle.getLibelle(),
                        wai: '',
                        header: false,
                        avecSelection: true,
                        avecEtiquette: true,
                        estVisible: true,
                        totalDansScroll: false
                    }, lParams, this.getLigneTotaleSelectionnable(lParams));
                }
                return null;
            }
            _construireFiltres() {
                const lHtml = this.construireFiltres();
                if (lHtml) {
                    const lModelBtnReinitFiltres = () => {
                        const lModele = {
                            event: () => {
                                this.reinitFiltres();
                            }
                        };
                        return lModele;
                    }
                    ;
                    return lHtml + (IE.jsx.str("div", {
                        class: ObjetListeEspaceMobile_css_1.StylesObjetListeEspaceMobile.filtreFooter
                    }, IE.jsx.str("ie-bouton", {
                        "ie-model": lModelBtnReinitFiltres,
                        class: "small-bt"
                    }, ObjetTraduction_1.GTraductions.getValeur('liste.ReinitialiserFiltre'))));
                }
                return '';
            }
            _construireBtnAction(aParams) {
                return IE.jsx.str("ie-btnicon", {
                    class: "icon_ellipsis_vertical",
                    tabindex: "-1",
                    "ie-model": this.jsxBtnEllipsisLigne.bind(this, aParams),
                    title: ObjetTraduction_1.GTraductions.getValeur('liste.BtnAction'),
                    "aria-haspopup": "menu"
                });
            }
            jsxBtnEllipsisLigne(aParams) {
                return {
                    event: (eEvent, aNode) => {
                        if (this.avecMenuContextuel(aParams)) {
                            const lParams = this.paramsListe.getParams(aParams.colonne, aParams.ligne, {
                                node: aNode
                            });
                            this.paramsListe.ouvrirMenuContextuel(lParams);
                        }
                    }
                };
            }
            _getNiveauParente(aParams) {
                let lNiveau = 0;
                let lArticle = aParams ? aParams.article : null;
                while (lArticle && lArticle.pere) {
                    lNiveau += 1;
                    lArticle = lArticle.pere;
                    if (lNiveau >= 10) {
                        break;
                    }
                }
                return lNiveau;
            }
            getIdZone(aParams, aZone) {
                return `${this.paramsListe.liste.getNom()}_${aParams.ligne}_${aParams.colonne}_fdz_${aZone}`;
            }
        }
        exports.ObjetDonneesListeFlatDesign = ObjetDonneesListeFlatDesign;
        var UtilisationZoneLabelWAI;
        (function(UtilisationZoneLabelWAI) {
            UtilisationZoneLabelWAI["declared"] = "declared";
            UtilisationZoneLabelWAI["used"] = "used";
        }
        )(UtilisationZoneLabelWAI || (UtilisationZoneLabelWAI = {}));
        (function(ObjetDonneesListeFlatDesign) {
            let typeInterTitre;
            (function(typeInterTitre) {
                typeInterTitre["h3"] = "h3";
                typeInterTitre["h4"] = "h4";
                typeInterTitre["h5"] = "h5";
            }
            )(typeInterTitre = ObjetDonneesListeFlatDesign.typeInterTitre || (ObjetDonneesListeFlatDesign.typeInterTitre = {}));
            let ZoneCelluleFlatDesign;
            (function(ZoneCelluleFlatDesign) {
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["lu"] = 0] = "lu";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["checkbox"] = 1] = "checkbox";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["zoneGauche"] = 2] = "zoneGauche";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["iconeGaucheContenuFormate"] = 3] = "iconeGaucheContenuFormate";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["titre"] = 4] = "titre";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["infosSuppZonePrincipale"] = 5] = "infosSuppZonePrincipale";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["zoneComplementaire"] = 6] = "zoneComplementaire";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["message"] = 7] = "message";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["messageLarge"] = 8] = "messageLarge";
                ZoneCelluleFlatDesign[ZoneCelluleFlatDesign["boutonAction"] = 9] = "boutonAction";
            }
            )(ZoneCelluleFlatDesign = ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign || (ObjetDonneesListeFlatDesign.ZoneCelluleFlatDesign = {}));
        }
        )(ObjetDonneesListeFlatDesign || (exports.ObjetDonneesListeFlatDesign = ObjetDonneesListeFlatDesign = {}));
    },
    fn: 'objetdonneeslisteflatdesign.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TradGlossaireListe = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TradGlossaireListe = ObjetTraduction_1.TraductionsModule.getModule('GlossaireListe', {
            wai: {
                treegrid: '',
                tree: '',
                toolbar: ''
            }
        });
        exports.TradGlossaireListe = TradGlossaireListe;
    },
    fn: 'glossaireliste.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.NSListe = exports.ObjetListe = void 0;
        const ObjetListeEspaceMobile_css_1 = require("ObjetListeEspaceMobile.css");
        require("DeclarationJQuery");
        const TypeFusionTitreListe_1 = require("TypeFusionTitreListe");
        const IEHtml = require("IEHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const MethodesObjet_1 = require("MethodesObjet");
        const _ObjetCouleur_1 = require("_ObjetCouleur");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        const Enumere_Action_1 = require("Enumere_Action");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const Enumere_EvenementListe_1 = require("Enumere_EvenementListe");
        const Enumere_TriElement_1 = require("Enumere_TriElement");
        require("IEHtml.InputNote.js");
        require("IEHtml.SelecFile");
        require("IEHtml.TextareaMax.js");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetDonneesListe_1 = require("ObjetDonneesListe");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ToucheClavier_1 = require("ToucheClavier");
        const Invocateur_1 = require("Invocateur");
        const ComparateurChaines_1 = require("ComparateurChaines");
        const tag_1 = require("tag");
        const Enumere_CommandeMenu_1 = require("Enumere_CommandeMenu");
        const ObjetMenuContextuel_1 = require("ObjetMenuContextuel");
        const RechercheTexte_1 = require("RechercheTexte");
        const ObjetDonneesListeFlatDesign_1 = require("ObjetDonneesListeFlatDesign");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetWAI_1 = require("ObjetWAI");
        const jsx_1 = require("jsx");
        const Divers_css_1 = require("Divers.css");
        const ObjetDonneesListeFlatDesign_css_1 = require("ObjetDonneesListeFlatDesign.css");
        const IEHtml_Ripple_css_1 = require("IEHtml.Ripple.css");
        const AccessApp_1 = require("AccessApp");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const GlossaireWAI_1 = require("GlossaireWAI");
        const Tooltip_1 = require("Tooltip");
        const Tooltip_module_css_1 = require("Tooltip.module.css");
        const GlossaireListe_1 = require("GlossaireListe");
        const _CONST_largeurMinColonne = 10;
        class ObjetListe extends ObjetIdentite_1.Identite {
            constructor(aParams) {
                super(aParams);
                this.IdPremierElement = this.Nom + '_ObjetListe';
                this.IdEdition = this.Nom + '_Edition';
                this.idZone = this.Nom + '_Zone';
                this.IdZoneTexte = this.Nom + '_ZoneTexte';
                this.idTotaux = this.Nom + '_totaux';
                this.idPiedDeListe = this.Nom + '_piedDeListe';
                this.ids = {
                    zoneFils: this.IdPremierElement,
                    titre: this.Nom + '_titreTout',
                    contenu: this.Nom + '_contenuListe_',
                    colonneDeTri: this.Nom + '_triCol_',
                    curseurTri: this.Nom + '_curseurTri_',
                    survolTitre: this.Nom + '_survolTitre_',
                    cadreSelection: this.Nom + '_cadreSel_',
                    rolloverTitre: this.Nom + '_rolloverTitre_',
                    rolloverContenuLigne: this.Nom + '_rolloverContenuLigne_',
                    rolloverContenuColonne: this.Nom + '_rolloverContenuColonne_',
                    rolloverContenuCellule: this.Nom + '_rolloverContenuCellule_',
                    dragInsertion: this.Nom + '_dragInsertion',
                    surligneur_edition: this.Nom + '_surligneuredition',
                    WAIDescribeTreeGrid: this.Nom + '_descrtreegrid',
                    WAIDescribeTreeGridTotal: this.Nom + '_descrtreegrid_total',
                    WAICelluleEditable: this.Nom + '_celEdit',
                    btnCreation: `${this.Nom}_btnCreation`,
                    WAIGrid: `${this.Nom}_waiGrid`,
                    WAILigneLue: `${this.Nom}_waiLigneLue`,
                    WAILignesContenu: `${this.Nom}_wailignes_cont`
                };
                this._init();
            }
            resetOptions() {
                this._options = {
                    colonnes: null,
                    gestionModificationColonnes: null,
                    messageContenuVide: '',
                    avecFiltresVisibles: false,
                    listeTailles: [],
                    listeTitres: null,
                    hintTitres: null,
                    colonnesCachees: null,
                    colonnesCacheesImpression: null,
                    zoneScrollH: null,
                    avecLigneCreation: false,
                    listeCreations: [],
                    titreCreation: ObjetTraduction_1.GTraductions.getValeur('liste.nouveau'),
                    iconeTitreCreation: false,
                    ariaHasPopupBtnCreation: 'dialog',
                    avecCBToutCocher: false,
                    avecToutSelectionner: true,
                    nonEditable: false,
                    nonEditableSurModeExclusif: false,
                    AvecSuppression: true,
                    ariaDescribedBy: '',
                    parsingSurColonne: -1,
                    scrollHorizontal: false,
                    scrollHorizontalSurLargeurComplete: true,
                    colonnesTriables: false,
                    numeroColonneTriDefaut: undefined,
                    evenementSurTri: null,
                    boutons: [],
                    tailleBoutons: 17,
                    positionBoutons: NSListe.positionBoutons.entete,
                    avecCreationEnBoutonDesignClassique: false,
                    skin: ObjetListe.skin.classique,
                    avecListeNeutre: undefined,
                    couleursListe: (0,
                    AccessApp_1.getApp)().getCouleur().liste,
                    avecReservationPlaceScrollHorizontal: false,
                    hauteurAdapteContenu: false,
                    getHauteurMaxAdapteListe: null,
                    hauteurMaxAdapteContenu: null,
                    avecLigneTotal: false,
                    avecConstructionDynamiqueContenu: true,
                    colonnesSansBordureDroit: [],
                    avecCadreSelection: true,
                    paddingCelluleLR: 8,
                    paddingCelluleTB: 4,
                    hauteurCelluleTitreStandard: ObjetDonneesListe_1.ObjetDonneesListe.hauteurMinCellule,
                    widthTri: 14,
                    heightTri: 8,
                    avecRollover: true,
                    hauteurZoneContenuListeMin: ObjetDonneesListe_1.ObjetDonneesListe.hauteurMinCellule,
                    largeurZoneContenuListeMin: 20,
                    largeurImage: 18,
                    borduresContenu_couleur: null,
                    borduresContenu_top: 1,
                    borduresContenu_bottom: 1,
                    borduresContenu_left: 1,
                    borduresContenu_right: 1,
                    paddingContenu_LR: 0,
                    borduresCellule_couleur: null,
                    borduresCellule_horizontal: 1,
                    borduresCellule_vertical: 1,
                    alternanceCouleurLigneContenu: false,
                    avecCouleurAlternanceParDefaut: false,
                    couleurAlternance0: new _ObjetCouleur_1.ObjectCouleurCellule((0,
                    AccessApp_1.getApp)().getCouleur().blanc,(0,
                    AccessApp_1.getApp)().getCouleur().noir,null),
                    couleurAlternance1: new _ObjetCouleur_1.ObjectCouleurCellule((0,
                    AccessApp_1.getApp)().getCouleur().fond,(0,
                    AccessApp_1.getApp)().getCouleur().noir,null),
                    avecTraitSeparationDeploiementAlternance: false,
                    avecOmbreDroite: false,
                    forcerOmbreScrollTop: false,
                    forcerOmbreScrollBottom: false,
                    avecSelectionLigneSurImpression: true,
                    piedDeListe: null,
                    maxLengthTextareaIgnore: 1000000,
                    delaiSurEditionRecherche: 10,
                    callbackResizeObserverContenu: null
                };
                return this;
            }
            setOptionsListe(aOptions, aAvecActualisation) {
                return this._setOptionsListe(aOptions, aAvecActualisation);
            }
            getOptionsListe() {
                return this._options;
            }
            getDonneesListe() {
                return this.Donnees;
            }
            setDonnees(ADonnees, aLigneSelectionne, aParams) {
                return this._setDonnees(ADonnees, aLigneSelectionne, aParams);
            }
            actualiser(aObjetOuConserverSelection, aSansTriDonnees) {
                const lParametres = {
                    ignorerFocusListe: false,
                    ignorerCalculTri: true
                };
                if (MethodesObjet_1.MethodesObjet.isObject(aObjetOuConserverSelection)) {
                    Object.assign(lParametres, aObjetOuConserverSelection);
                } else {
                    Object.assign(lParametres, {
                        conserverSelection: !!aObjetOuConserverSelection,
                        conserverFocusSelection: !!aObjetOuConserverSelection,
                        sansTriDonnees: aSansTriDonnees
                    });
                }
                this._cache.calculsPreRenduAFaire = true;
                this._actualiser(lParametres);
            }
            effacer(aMessage) {
                this._donneesRecus = false;
                ObjetHtml_1.GHtml.setHtml(this.Nom, aMessage || '&nbsp;', {
                    ignorerScroll: true
                });
                return this;
            }
            surSelection(aNumeroColonne, aNumeroLigne, aParams) {
                return this._surSelection(aNumeroColonne, aNumeroLigne, aParams);
            }
            selectionnerLigne(aParametres) {
                this._cache.lignesSelectionnees_prec = [...this._cache.lignesSelectionnees];
                this._selectionner(Object.assign({
                    colonne: -1,
                    avecEvenementModificationSelection: true
                }, aParametres));
            }
            selectionnerCellule(aParametres) {
                this._cache.lignesSelectionnees_prec = [...this._cache.lignesSelectionnees];
                this._selectionner(Object.assign({
                    avecEvenementModificationSelection: true
                }, aParametres));
            }
            getSelection() {
                if (this._getListeElementsSelection().count() === 0) {
                    return -1;
                }
                return this._cache.selectionCellule.ligne;
            }
            getSelectionCellule() {
                return Object.assign({}, this._cache.selectionCellule);
            }
            getElementSelection() {
                const lListe = this._getListeElementsSelection();
                return lListe.count() > 0 ? lListe.get(0) : null;
            }
            getListeElementsSelection() {
                return this._getListeElementsSelection();
            }
            setListeElementsSelection(aListeElements, aParams) {
                return this._setListeElementsSelection(aListeElements, aParams);
            }
            getTableauCellulesSelection() {
                const lSelections = [];
                this._getCellulesSelection().forEach( (aElement) => {
                    aElement.colonnes.forEach( (aNumeroColonne, aIndex) => {
                        lSelections.push({
                            article: aElement.article,
                            ligne: aElement.ligne,
                            colonne: aNumeroColonne,
                            idColonne: aElement.idsColonnes[aIndex],
                            declarationColonne: this._cache.declColonnesByIds[aElement.idsColonnes[aIndex]]
                        });
                    }
                    );
                }
                );
                return lSelections;
            }
            setTableauCellulesSelection(aListe, aParams) {
                return this._setTableauCellulesSelection(aListe, aParams);
            }
            selectionnerCelluleSuivante(aParametres) {
                return this._selectionnerCelluleSuivante(aParametres);
            }
            scrollTo(aParams) {
                const lParams = Object.assign({
                    ligne: -1,
                    avecScrollTopLigne: true,
                    ecartForce: 0
                }, aParams);
                this._scrollSurLigne({
                    ligne: lParams.ligne,
                    avecScrollTopLigne: lParams.avecScrollTopLigne,
                    ecartForce: lParams.ecartForce
                });
            }
            getArticleDeLigne(aLigne) {
                if (this.Donnees && this.Donnees.Donnees) {
                    return this.Donnees.Donnees.get(aLigne);
                }
                return null;
            }
            getListeArticles() {
                if (this.Donnees && this.Donnees.Donnees) {
                    return this.Donnees.Donnees;
                }
                return new ObjetListeElements_1.ObjetListeElements();
            }
            getListeArticlesCochees() {
                const lListe = new ObjetListeElements_1.ObjetListeElements();
                const lDonneesFlatD = this.estDonneeListeFlatDesign(this.Donnees) ? this.Donnees : null;
                if (lDonneesFlatD) {
                    this.getListeArticles().parcourir( (aArticle, aIndex) => {
                        const lParams = this._getParamsCellule(-1, aIndex);
                        if (lDonneesFlatD._getVisible(aArticle) && lDonneesFlatD.avecCB(lParams) && lDonneesFlatD.getValueCB(lParams)) {
                            lListe.add(aArticle);
                        }
                    }
                    );
                }
                return lListe;
            }
            demarrerEditionSurCellule(aLigne, aColonne) {
                const lElement = ObjetHtml_1.GHtml.getElement(this.getIdCellule(aColonne, aLigne, true));
                if (ObjetHtml_1.GHtml.elementExiste(lElement)) {
                    ObjetHtml_1.GHtml.setFocus(lElement);
                } else if (this._estLigneDansRangeNonConstruitDyn(aLigne)) {
                    this._scrollSurLigne({
                        ligne: aLigne,
                        colonne: aColonne
                    });
                }
                this.surEditionDeb(aColonne, aLigne);
                if (this._cache.timeout_ignorerScrollSortieEdition) {
                    clearTimeout(this._cache.timeout_ignorerScrollSortieEdition);
                    delete this._cache.timeout_ignorerScrollSortieEdition;
                }
                this._cache.timeout_ignorerScrollSortieEdition = setTimeout( () => {
                    delete this._cache.timeout_ignorerScrollSortieEdition;
                }
                , 100);
                return this;
            }
            ajouterElementCreation(aLibelle, aValeurCreation) {
                return this._ajouterElementCreation(aLibelle, aValeurCreation);
            }
            annulerCreation() {
                this._annulerCreation();
            }
            setCreationLigne(aCreationLigneBis) {
                return this._setCreationLigne(aCreationLigneBis);
            }
            surSuppression() {
                return this._surSuppression();
            }
            getIdCellule(aColonne, aLigne, aPourFocus, aPourWAI) {
                const lTab = [this.Nom, aColonne];
                if (aLigne !== null && aLigne !== undefined) {
                    lTab.push(aLigne);
                }
                if (aPourFocus) {
                    lTab.push('div');
                }
                if (aPourWAI) {
                    lTab.push('wai');
                }
                return lTab.join('_');
            }
            getIdColonneDeNumeroColonne(aNumeroColonne) {
                return this._cache.colonnes.listeIds[aNumeroColonne] || '';
            }
            getNumeroColonneDIdColonne(aIdColonne) {
                const lNumero = this._cache.colonnes.listeIds.indexOf(aIdColonne);
                return lNumero >= 0 ? lNumero : -1;
            }
            getRechercheTexte() {
                return this._cache.rechercheTexte.saisie;
            }
            setRechercheTexte(aTexte, aSansTriDonnees) {
                this._setRechercheSaisie(aTexte);
                clearTimeout(this._cache.rechercheTexte.timerSaisie);
                let lParams;
                if (aSansTriDonnees) {
                    lParams = {
                        sansTriDonnees: true
                    };
                }
                if (this._options.delaiSurEditionRecherche >= 0) {
                    this._cache.rechercheTexte.timerSaisie = setTimeout( () => {
                        this._filtreRechercheTexte(lParams);
                    }
                    , this._options.delaiSurEditionRecherche);
                } else {
                    this._filtreRechercheTexte(lParams);
                }
                return this;
            }
            composeImpression(aProportion) {
                return '';
            }
            construireCopieCSV() {}
            getPositionScrollV() {
                const lBackupScroll = this._backupScroll({
                    conserverPositionScroll: true
                });
                return lBackupScroll.scrollTop;
            }
            setPositionScrollV(aPosition) {
                const lBackupScroll = this._backupScroll({
                    conserverPositionScroll: true
                });
                lBackupScroll.scrollTop = aPosition;
                this._setScroll(lBackupScroll);
            }
            getTriCourant() {
                return Object.assign({
                    id: this._triCourant.colonne.map(aColonne => this.getIdColonneDeNumeroColonne(aColonne))
                }, this._triCourant);
            }
            reset() {
                return this._setDonnees(null);
            }
            resize() {}
            surPreResize() {}
            surPostResize() {}
            async setColonneTri(aColonne, aGenre, aNumeroTri) {
                return this._setColonneTri(aColonne, aGenre, aNumeroTri);
            }
            focusSuivant(AId, AOrientation, ADirection) {
                return this._focusSuivant(AId, AOrientation, ADirection);
            }
            free() {
                super.free();
                clearTimeout(this._cache.rechercheTexte.timerSaisie);
                clearTimeout(this._cache.timerKeyPress);
                this._desabonnementResizeObserver();
            }
            _init() {
                this.resetOptions();
                this._cache = {
                    taillesColonne: [],
                    heightConteneur: 0,
                    largeurPage: null,
                    avecPourcentage: false,
                    largeurTotalFixe: 0,
                    largeurBlocFixe: 0,
                    infosZonesColonnes: [],
                    listeCorrespondancesColonnes: [],
                    declColonnesByIds: {},
                    colonnes: {
                        listeIds: [],
                        listeTailles: []
                    },
                    tableauColonnesCachees: [],
                    nbColonnesCachees: 0,
                    reserverPlaceScrollHorizontal: false,
                    calculsPreRenduAFaire: true,
                    calculsTailleColonnesAFaire: true,
                    calculTriAFaire: true,
                    listeNonInitialisee: true,
                    lignesFusionParColonne: {},
                    declarationsColonnes: [],
                    colonnesTri: null,
                    colonnesSansBordureDroit: [],
                    boutons: null,
                    rolloverVisible: false,
                    survoleColTitreTriVisible: -1,
                    lignesVisibles: [],
                    lignesVisiblesSansRechercheTexte: [],
                    strResultRecherche: '',
                    couleursAlternanceParLigne: [],
                    selectionCellule: {
                        ligne: -1,
                        colonne: -1
                    },
                    celluleClicNonShift: {
                        ligne: -1,
                        colonne: -1
                    },
                    lignesSelectionnees: [],
                    lignesSelectionnees_prec: [],
                    editionEnCours: false,
                    editionEnCoursEvenement: false,
                    creationEnCours: false,
                    creationEnCoursEvenement: false,
                    positionCreation: 0,
                    listeValeursCreation: [],
                    numeroColonneCreationEnCours: null,
                    numeroLigneCreationDynamique: null,
                    ouvrirSelecteurFileParLigne: {},
                    positionsCelluleCadreSelection: {},
                    keysControleurTitre: {},
                    keysControleurDonneesListe: {},
                    rechercheTexte: {
                        saisie: '',
                        textesParLigne: null,
                        lignesCachees: [],
                        timerSaisie: null
                    },
                    timerKeyPress: null,
                    collectionFuncConstructCellule: {},
                    refresh: {
                        nbLignes: 10,
                        observer: new IntersectionObserver(this._callbackObserverRefreshContenu.bind(this)),
                        init: () => {
                            const lCacheRef = this._cache.refresh;
                            lCacheRef.structure = [];
                            lCacheRef.mapNodesObs = new WeakMap();
                            lCacheRef.mapRangesExist = new Map();
                            lCacheRef.mapRangesExist.min = Number.MAX_VALUE;
                            lCacheRef.mapRangesExist.max = -1;
                            lCacheRef.node_gab_start = null,
                            lCacheRef.node_gab_end = null,
                            lCacheRef.hauteurMoyenneLigne = 20;
                            lCacheRef.getHeightStructure = (aStructure) => {
                                return aStructure.height < 0 ? lCacheRef.hauteurMoyenneLigne * aStructure.nbLignes : aStructure.height;
                            }
                            ;
                        }
                    }
                };
                this.initCacheStructureWAI();
                this._cache.refresh.init();
                this.optionsInterne = {
                    versionMobile: false
                };
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.modeExclusif, () => {
                    if (this._options.nonEditableSurModeExclusif) {
                        this._actualiser({
                            conserverSelection: true,
                            sansTriDonnees: true
                        });
                    }
                }
                , this);
            }
            recupererDonnees() {
                this._cache.listeNonInitialisee = true;
            }
            _ouvrirFenetreParametrageColonnes() {}
            _preparerBoutons(aParams) {
                this._cache.boutons = [];
                if (this._options.boutons && this._options.boutons.forEach) {
                    this._options.boutons.forEach( (aBouton) => {
                        if (!aBouton) {
                            return;
                        }
                        if (aBouton.getHtml || aBouton.html) {
                            this._cache.boutons.push(aBouton);
                            return;
                        }
                        const lBouton = {
                            event: null,
                            getDisabled: null,
                            getSelection: null,
                            estBoutonPiedFlottant_mobile: false,
                            class: '',
                            title: '',
                            id: this.Nom + '_btnliste_' + this._cache.boutons.length
                        };
                        switch (aBouton.genre) {
                        case ObjetListe.typeBouton.monter:
                            lBouton.class = 'icon_chevron_up';
                            lBouton.title = ObjetTraduction_1.GTraductions.getValeur('liste.HintBoutonMonter');
                            lBouton.getDisabled = () => {
                                if (!this.Donnees || this.getListeElementsSelection().count() !== 1 || this._getNonEditable()) {
                                    return true;
                                }
                                const lParamsCelluleSource = this._getParamsCellule(-1, this.getSelection());
                                const lParamsCelluleDest = this._rechercheDeplacementPrecedenteSuivant(lParamsCelluleSource, false);
                                return !lParamsCelluleDest || !lParamsCelluleDest.article;
                            }
                            ;
                            lBouton.event = () => {
                                const lParamsCelluleSource = this._getParamsCellule(-1, this.getSelection());
                                const lParamsCelluleDest = this._rechercheDeplacementPrecedenteSuivant(lParamsCelluleSource, false);
                                if (lParamsCelluleDest) {
                                    this._surDeplacementLigneSurAutreLigne(lParamsCelluleDest, lParamsCelluleSource);
                                }
                            }
                            ;
                            break;
                        case ObjetListe.typeBouton.descendre:
                            lBouton.class = 'icon_chevron_down';
                            lBouton.title = ObjetTraduction_1.GTraductions.getValeur('liste.HintBoutonDescendre');
                            lBouton.getDisabled = () => {
                                if (!this.Donnees || this.getListeElementsSelection().count() !== 1 || this._getNonEditable()) {
                                    return true;
                                }
                                const lParamsCelluleSource = this._getParamsCellule(-1, this.getSelection());
                                const lParamsCelluleDest = this._rechercheDeplacementPrecedenteSuivant(lParamsCelluleSource, true);
                                return !lParamsCelluleDest || !lParamsCelluleDest.article;
                            }
                            ;
                            lBouton.event = () => {
                                const lParamsCelluleSource = this._getParamsCellule(-1, this.getSelection());
                                const lParamsCelluleDest = this._rechercheDeplacementPrecedenteSuivant(lParamsCelluleSource, true);
                                if (lParamsCelluleDest) {
                                    this._surDeplacementLigneSurAutreLigne(lParamsCelluleDest, lParamsCelluleSource);
                                }
                            }
                            ;
                            break;
                        case ObjetListe.typeBouton.deployer:
                            {
                                if (aBouton.cacherSansDeploiement === true && !this._existeDeploiementDansListe()) {
                                    return false;
                                }
                                lBouton.deploye = null;
                                lBouton.class = 'btn-deploiement-entete defaut';
                                lBouton.title = ObjetTraduction_1.GTraductions.getValeur('liste.HintBoutonDeploiement');
                                lBouton.getDisabled = () => {
                                    return this._avecDeploiementDesactive() || !this._existeDeploiementDansListe();
                                }
                                ;
                                const lGetEstDeploye = (aParam) => {
                                    let lEstDeploye = false;
                                    if (aParam.bouton.deploye === false || aParam.bouton.deploye === true) {
                                        lEstDeploye = aParam.bouton.deploye;
                                    } else {
                                        lEstDeploye = this._getBoutonDeploye();
                                    }
                                    return lEstDeploye;
                                }
                                ;
                                lBouton.getClass = (aParam) => {
                                    return lGetEstDeploye(aParam) ? 'icon_fleche_num_bas' : 'icon_fleche_num';
                                }
                                ;
                                lBouton.getAttrs = (aParam) => {
                                    return {
                                        'aria-expanded': lGetEstDeploye(aParam) ? 'true' : 'false'
                                    };
                                }
                                ;
                                lBouton.event = (aParam) => {
                                    if (aParam.bouton.deploye === false || aParam.bouton.deploye === true) {
                                        aParam.bouton.deploye = !aParam.bouton.deploye;
                                    } else {
                                        aParam.bouton.deploye = !this._getBoutonDeploye();
                                    }
                                    ;if (this.Donnees && this.Donnees.Donnees) {
                                        let lAvecModif = false;
                                        this.Donnees.Donnees.parcourir( (aElement, aLigne) => {
                                            const lParams = this._getParamsCellule(-1, aLigne);
                                            if (this.Donnees.estUnDeploiement(lParams) && this._estLigneVisible(aLigne)) {
                                                if (this.Donnees._estDeploye(aLigne) === aParam.bouton.deploye) {
                                                    return;
                                                }
                                                lAvecModif = true;
                                                this.Donnees.surDeploiement(-1, aLigne, aElement);
                                                if (this.Donnees.avecEvenementDeploiement(lParams)) {
                                                    this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.Deploiement, -1, aLigne), Enumere_EvenementListe_1.EGenreEvenementListe.Deploiement, -1, aLigne);
                                                    this._refreshSelf();
                                                }
                                            }
                                        }
                                        );
                                        if (lAvecModif) {
                                            this._actualiser({
                                                conserverSelection: true,
                                                sansTriDonnees: true,
                                                zonesActualisation: {
                                                    contenu: true
                                                }
                                            });
                                            if (aParam.bouton.deploye === this._getBoutonDeploye()) {
                                                aParam.bouton.deploye = null;
                                            } else {}
                                        }
                                    }
                                }
                                ;
                                break;
                            }
                        case ObjetListe.typeBouton.supprimer:
                            lBouton.class = 'icon_trash';
                            lBouton.title = ObjetTraduction_1.GTraductions.getValeur('liste.supprimer');
                            lBouton.getDisabled = (aParam) => {
                                return !this._avecSuppressionSelectionCourante(this._cache.selectionCellule.ligne, this._cache.selectionCellule.colonne);
                            }
                            ;
                            lBouton.event = (aParam) => {
                                this._surSuppression();
                            }
                            ;
                            break;
                        case ObjetListe.typeBouton.editer:
                            lBouton.class = 'icon_pencil';
                            lBouton.title = ObjetTraduction_1.GTraductions.getValeur('liste.modifier');
                            lBouton.getDisabled = () => {
                                if (this._getNonEditable() || this._cache.editionEnCours || !this.Donnees) {
                                    return true;
                                }
                                const lParams = this._getParamsCellule(this._cache.selectionCellule.colonne, this._cache.selectionCellule.ligne, {
                                    surEdition: true
                                });
                                return !this.Donnees.avecEdition(lParams);
                            }
                            ;
                            lBouton.event = (aParam) => {
                                this.demarrerEditionSurCellule(this._cache.selectionCellule.ligne, this._cache.selectionCellule.colonne);
                            }
                            ;
                            break;
                        case ObjetListe.typeBouton.filtrer:
                            {
                                let lEstFiltreParDefaut = () => {
                                    return !this.estDonneeListeFlatDesign(this.Donnees) || !this.Donnees.estFiltresParDefaut || this.Donnees.estFiltresParDefaut();
                                }
                                ;
                                Object.assign(lBouton, {
                                    class: 'icon_filtre',
                                    event: async (aParams) => {
                                        this._options.avecFiltresVisibles = !this._options.avecFiltresVisibles;
                                        this._actualiser({
                                            conserverSelection: true,
                                            sansTriDonnees: true,
                                            conserverPositionScroll: false
                                        });
                                        ObjetHtml_1.GHtml.setFocus(aParams.node.id, true);
                                    }
                                    ,
                                    getVisible: () => {
                                        return true;
                                    }
                                    ,
                                    getSelection: () => {
                                        return this.avecFiltresVisibles();
                                    }
                                    ,
                                    getDisabled: () => {
                                        if (!this.estDonneeListeFlatDesign(this.Donnees) || !this.Donnees.construireFiltres || !this.Donnees.estFiltresParDefaut) {
                                            return true;
                                        }
                                        if (this.Donnees.getNbrLignes() === 0 && this.Donnees.estFiltresParDefaut()) {
                                            return true;
                                        }
                                        return false;
                                    }
                                    ,
                                    getClass: () => {
                                        if (!lEstFiltreParDefaut()) {
                                            return 'mix-icon_rond i-orange';
                                        }
                                        return '';
                                    }
                                    ,
                                    getTooltip: () => {
                                        return lEstFiltreParDefaut() ? ObjetTraduction_1.GTraductions.getValeur('liste.Filtrer') : ObjetTraduction_1.GTraductions.getValeur('liste.FiltrerActif');
                                    }
                                });
                                break;
                            }
                        case ObjetListe.typeBouton.parametrer:
                            {
                                lBouton.class = 'icon_wrench';
                                lBouton.title = ObjetTraduction_1.GTraductions.getValeur('liste.HintBoutonParametre');
                                lBouton.ariaHasPopup = 'dialog';
                                lBouton.event = (aParam) => {
                                    this._ouvrirFenetreParametrageColonnes();
                                }
                                ;
                                lBouton.getDisabled = function() {
                                    return false;
                                }
                                ;
                                break;
                            }
                        case ObjetListe.typeBouton.exportCSV:
                            if (aParams && aParams.createExportCSV) {
                                aParams.createExportCSV(lBouton);
                            } else {
                                return;
                            }
                            break;
                        case ObjetListe.typeBouton.rechercher:
                            lBouton.class = 'icon_search';
                            lBouton.title = ObjetTraduction_1.GTraductions.getValeur('liste.Rechercher');
                            lBouton.widthInput = 0;
                            lBouton.getDisabled = () => {
                                return this._cache.lignesVisibles.length === 0;
                            }
                            ;
                            lBouton.event = () => {
                                this._creerZoneRechercheTexte(true);
                            }
                            ;
                            break;
                        }
                        Object.assign(lBouton, aBouton);
                        if (!lBouton.class && !lBouton.getClass) {
                            return;
                        }
                        if (!lBouton.event) {
                            return;
                        }
                        this._cache.boutons.push(lBouton);
                    }
                    );
                }
            }
            _getInfosZonesColonnes(aCache) {}
            _construireAffichage() {
                return '';
            }
            construireAffichage(aParamsActualiser) {
                this._cache.survoleColTitreTriVisible = -1;
                this._cache.ouvrirSelecteurFileParLigne = {};
                this._cache.avecWAICocheLigne = false;
                this._cache.gridTotalAccess = {
                    nav: null,
                    ordres: []
                };
                if (!ObjetHtml_1.GHtml.elementExiste(this.Nom)) {
                    return '';
                }
                if (!this._cache.largeurPage && this._cache.avecPourcentage) {
                    return '';
                }
                if (!this.ListeTailles || this.ListeTailles.length === 0) {
                    return '';
                }
                if (this._options.avecListeNeutre === undefined) {
                    this._options.avecListeNeutre = $('#' + this.Nom.escapeJQ()).parents('#' + IEZoneFenetre_1.ZoneFenetre.idZoneFenetre.escapeJQ()).length > 0;
                    this._options.couleursListe = this._options.avecListeNeutre ? (0,
                    AccessApp_1.getApp)().getCouleur().listeNeutre : (0,
                    AccessApp_1.getApp)().getCouleur().liste;
                }
                this._initCacheLignes(aParamsActualiser);
                this.initCacheStructureWAI();
                return this._construireAffichage();
            }
            composeWAICommun() {
                const lGetHtmlDescribeTreeGrid = () => {
                    const T = [];
                    if (this._cache.avecWAICocheLigne) {
                        T.push(IE.jsx.str("span", null, ObjetTraduction_1.GTraductions.getValeur('liste.wai.ModifierCoche')));
                    }
                    return T.join('');
                }
                ;
                return (IE.jsx.str("span", {
                    class: Divers_css_1.StylesDivers.srOnly,
                    "aria-hidden": "true"
                }, IE.jsx.str("span", {
                    class: Divers_css_1.StylesDivers.srOnly,
                    id: this.ids.WAICelluleEditable
                }, ObjetWAI_1.GObjetWAI.getInfo(ObjetWAI_1.EGenreObjet.AvecEdition)), IE.jsx.str("span", {
                    class: Divers_css_1.StylesDivers.srOnly,
                    id: this.ids.WAIDescribeTreeGrid,
                    "ie-html": lGetHtmlDescribeTreeGrid
                }), IE.jsx.str("span", {
                    class: Divers_css_1.StylesDivers.srOnly,
                    id: this.ids.WAIDescribeTreeGridTotal
                }, ObjetTraduction_1.GTraductions.getValeur('liste.total')), IE.jsx.str("span", {
                    class: Divers_css_1.StylesDivers.srOnly,
                    id: this.ids.WAILigneLue
                }, ObjetTraduction_1.GTraductions.getValeur('liste.wai.Lu'))));
            }
            _composeImpression(aProportion) {
                return '';
            }
            _gererModificationsColonnes() {
                this._cache.listeCorrespondancesColonnes = [];
            }
            _backupScroll(aParams) {
                return null;
            }
            _setScroll(aBackupScroll, aSurResizeHeightContenu) {}
            _construireContenuRange(aInfosColonnes, aIndiceRange) {
                return '';
            }
            _controleHeightLigne() {}
            _setStyleCellule(aId, aColonne, aLigne, aSelectionne, aCreation) {
                if (aId) {
                    const lJCellule = ObjetHtml_1.GHtml.estElement(aId) ? $(aId) : $('#' + aId.escapeJQ());
                    if (aSelectionne) {
                        lJCellule.addClass('selected');
                    } else {
                        lJCellule.removeClass('selected');
                    }
                }
            }
            _ouvrirMenuContextuel(aParams) {
                let lId;
                let lRect;
                if (aParams.surLigneCreation) {
                    let lIdLigneCreation = '';
                    if (this._options.avecCreationEnBoutonDesignClassique) {
                        lIdLigneCreation = this.ids.btnCreation;
                    } else {
                        lIdLigneCreation = this._getIdCreation(this._cache.infosZonesColonnes[0] ? this._cache.infosZonesColonnes[0].colonnesVisibles[0] : 0, aParams.ligne);
                        if (!ObjetHtml_1.GHtml.getElement(lIdLigneCreation)) {
                            lIdLigneCreation = this._getIdCreation(this.ListeCreations[0], aParams.ligne);
                        }
                    }
                    lRect = ObjetPosition_1.GPosition.getClientRect(lIdLigneCreation);
                    lId = {
                        x: lRect.x,
                        y: this._options.avecCreationEnBoutonDesignClassique ? lRect.bottom + 5 : lRect.y
                    };
                }
                if (aParams.node) {
                    lRect = ObjetPosition_1.GPosition.getClientRect(aParams.node);
                    lId = {
                        x: lRect.x,
                        y: lRect.bottom + 5
                    };
                } else if (aParams.event && aParams.event.type === 'contextmenu') {
                    lId = {
                        x: aParams.event.pageX + 5,
                        y: aParams.event.pageY + 5
                    };
                }
                const lParametres = Object.assign({
                    id: lId,
                    avecCreation: this._options.avecLigneCreation,
                    nonEditable: this._getNonEditable(),
                    avecSuppression: this._options.AvecSuppression,
                    listeSelection: this._getListeElementsSelection(),
                    tableauSelection: this.getTableauCellulesSelection(),
                    copier: this.optionsInterne.copierCellule,
                    coller: this.optionsInterne.collerCellule,
                    liste: this
                }, aParams);
                ObjetMenuContextuel_1.ObjetMenuContextuel.afficher({
                    pere: this,
                    evenement: this._evenementMenuContextuel.bind(this, lParametres),
                    initCommandes: function(aInstance) {
                        this.Donnees.initialisationObjetContextuel(Object.assign({
                            menuContextuel: aInstance
                        }, lParametres));
                    },
                    affichageSurInitCommandes: true,
                    surKeyPress: (aEvent) => {
                        if (this.Pere && this.Evenement && this.Donnees && this.Donnees.options && this.Donnees.options.avecEvnt_KeyPressListe) {
                            const lResult = this.callback.appel({
                                instance: this,
                                event: aEvent,
                                genreEvenement: Enumere_EvenementListe_1.EGenreEvenementListe.KeyPressListe
                            });
                            this._refreshSelf();
                            return lResult;
                        }
                        return false;
                    }
                    ,
                    surKeyUp: (aEvent) => {
                        if (this.Pere && this.Evenement && this.Donnees && this.Donnees.options && this.Donnees.options.avecEvnt_KeyUpListe) {
                            const lResult = this.callback.appel({
                                instance: this,
                                event: aEvent,
                                genreEvenement: Enumere_EvenementListe_1.EGenreEvenementListe.KeyUpListe
                            });
                            this._refreshSelf();
                            return lResult;
                        }
                        return false;
                    }
                    ,
                    options: {
                        preventScrollSurRestaurationFocus: true
                    }
                });
            }
            _entrerDateCalendrier(aParams) {}
            _testUnitaireGetIdCreation(I, J) {
                return this._getIdCreation(I, J);
            }
            getIdCelluleTotal(aColonne, aLigne, aPourCell) {
                return `${this.Nom}_CelluleTotal_${aColonne}_${aLigne}${aPourCell ? '_cell' : ''}`;
            }
            static initColonne(aPourcentage, aMinPx, aMaxPx) {
                return {
                    valeur: aPourcentage,
                    min: aMinPx,
                    max: aMaxPx
                };
            }
            static getTitreCreation(aTitre) {
                const T = [];
                T.push(`<i class="icon_plus_cercle liste-creation" role="presentation"></i>`);
                T.push('<div class="EspaceGauche InlineBlock AlignementMilieuVertical" style="', ObjetStyle_1.GStyle.composeCouleurTexte((0,
                AccessApp_1.getApp)().getCouleur().texteListeCreation), '">', aTitre, '</div>');
                return T.join('');
            }
            _setRechercheSaisie(aVal) {
                this._cache.rechercheTexte.saisie = aVal || '';
            }
            _setOptionsListe(aOptions, aAvecActualisation) {
                if (aOptions && aOptions.skin) {
                    this._affecterOptionsSkin(aOptions);
                }
                if (aOptions.colonnesCachees) {
                    this._options.colonnesCachees = [];
                }
                $.extend(this._options, aOptions);
                if (aOptions && aOptions.colonnes) {
                    this._cache.declarationsColonnes = [].concat(aOptions.colonnes);
                    this._cache.colonnes.listeIds = [];
                    this._cache.colonnes.listeTailles = [];
                    this._cache.declColonnesByIds = {};
                    const lControleIds = {};
                    let lIndex = 0;
                    for (const aIndex in aOptions.colonnes) {
                        const D = aOptions.colonnes[aIndex];
                        if (!D) {
                            continue;
                        }
                        if (D.id === undefined) {
                            D.id = aIndex.toString();
                        }
                        ;lControleIds[D.id] = true;
                        this._cache.colonnes.listeIds[lIndex] = D.id;
                        this._cache.colonnes.listeTailles[lIndex] = D.taille || 0;
                        this._cache.declColonnesByIds[D.id] = D;
                        lIndex += 1;
                    }
                }
                this._options.couleursListe = this._options.avecListeNeutre ? (0,
                AccessApp_1.getApp)().getCouleur().listeNeutre : (0,
                AccessApp_1.getApp)().getCouleur().liste;
                this._cache.calculsPreRenduAFaire = true;
                this._cache.calculsTailleColonnesAFaire = true;
                if (aAvecActualisation === true) {
                    this._actualiser({
                        conserverSelection: true,
                        sansTriDonnees: true
                    });
                }
                return this;
            }
            _affecterOptionsSkin(aOptions) {
                switch (aOptions.skin) {
                case ObjetListe.skin.classique:
                    break;
                case ObjetListe.skin.alternance:
                    Object.assign(this._options, {
                        alternanceCouleurLigneContenu: true,
                        avecCouleurAlternanceParDefaut: true,
                        avecTraitSeparationDeploiementAlternance: true,
                        avecCadreSelection: false,
                        ignorerCouleurInlineCellule: false,
                        hauteurAdapteContenu: true,
                        nonEditable: true
                    });
                    break;
                case ObjetListe.skin.flatDesign:
                    if (!aOptions.colonnes) {
                        aOptions.colonnes = [{
                            taille: '100%'
                        }];
                    }
                    Object.assign(this._options, {
                        nonEditable: false,
                        AvecSuppression: false,
                        positionBoutons: NSListe.positionBoutons.entete,
                        avecCadreSelection: false,
                        paddingCelluleLR: 1,
                        paddingCelluleTB: 1,
                        borduresCellule_horizontal: 0,
                        borduresCellule_vertical: 0,
                        borduresContenu_top: 0,
                        borduresContenu_bottom: 0,
                        borduresContenu_left: 0,
                        borduresContenu_right: 0,
                        paddingContenu_LR: this.optionsInterne.versionMobile ? 0 : 3,
                        ignorerCouleurInlineCellule: true
                    });
                    break;
                default:
                    ;
                }
            }
            _getValueCBFlatDesign(aLigne, aIgnorerCBDisabled) {
                if (!this.Donnees) {
                    return false;
                }
                const lParams = this._getParamsCellule(-1, aLigne);
                const LDonneesListe = this.Donnees;
                return LDonneesListe.getEtatCocheSelonFils(lParams.article, lParams, (aParamsCellule) => {
                    return !this._cache.rechercheTexte.lignesCachees[aParamsCellule.ligne] && LDonneesListe.avecCB(aParamsCellule) && (!aIgnorerCBDisabled || !LDonneesListe.getDisabledCB(aParamsCellule));
                }
                , aLigne === -1);
            }
            _setValueCBFlatDesign(aParams, aValue, aParentCocheTout) {
                const LDonneesListe = this.Donnees;
                if (!aParams.article && aParams.ligne >= 0) {
                    return false;
                }
                if (aParams.ligne >= 0 && LDonneesListe.getDisabledCB(aParams)) {
                    return false;
                }
                let lLigneCacheeRecherche = !!(aParams.article && this._cache.rechercheTexte.lignesCachees[aParams.ligne]);
                if (aParams.article && (!aParams.article.estUnDeploiement || !LDonneesListe.estCocheSelonFilsSurLigneDeploiement(aParams.article)) && LDonneesListe.avecCB(aParams) && !lLigneCacheeRecherche) {
                    LDonneesListe.setValueCB(aParams, aValue);
                }
                if (!aParams.article || aParentCocheTout || LDonneesListe.estCocheSelonFilsSurLigneDeploiement(aParams.article)) {
                    LDonneesListe.getArrayFilsVisiblesDePere(aParams.article).forEach( (aElementParcours) => {
                        const lParams = Object.assign({}, aParams, aElementParcours);
                        this._setValueCBFlatDesign(lParams, aValue, !aParams.article);
                    }
                    );
                }
            }
            setValueCBFlatDesignEvent(aParams, aValue) {
                const lResult = this._setValueCBFlatDesign(aParams, aValue);
                if (this.Donnees.options.avecEvnt_CB && this.Evenement && lResult !== false) {
                    this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.ModificationCBLigne, -1, aParams.ligne, {
                        listeCochees: this.getListeArticlesCochees()
                    }), Enumere_EvenementListe_1.EGenreEvenementListe.ModificationCBLigne, -1, aParams.ligne);
                    this._refreshSelf();
                }
            }
            _modifierCBLigneFlatDesign(aParams) {
                this.setValueCBFlatDesignEvent(aParams, !this._getValueCBFlatDesign(aParams.ligne, true));
                this._refreshSelf();
            }
            async _clickSurCocheTitre(aColonne) {
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                if (!lDonneesTableau) {
                    return;
                }
                if (this._getNonEditable() || this._cache.editionEnCours) {
                    return;
                }
                const lEtatCoche = lDonneesTableau.getEtatCocheSelonFils(null, this._getParamsCellule(aColonne))
                  , lValeur = lEtatCoche !== ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte
                  , lLignes = lDonneesTableau.getTableauLignesModifieesCocheTitre(aColonne, lValeur);
                let lParams;
                const lListeParamsCellules = [];
                for (let i = 0; i < lLignes.length; i++) {
                    lParams = this._getParamsCellule(aColonne, lLignes[i]);
                    if (lParams.article && lDonneesTableau.avecEdition(lParams) && !lDonneesTableau.editionRefusee(lParams)) {
                        lListeParamsCellules.push(lParams);
                    }
                }
                await lDonneesTableau.surEditionCocheTitre(lListeParamsCellules, lValeur);
                this._actualiser({
                    conserverSelection: true,
                    zonesActualisation: {
                        contenu: true,
                        total: true
                    }
                });
                this.surApresEditionEvenement(this._getParamsCellule(aColonne, -1, {
                    avecModification: true
                }));
                this._refreshSelf();
            }
            _getNonEditable() {
                return !this.Donnees || this._options.nonEditable || (this._options.nonEditableSurModeExclusif && (0,
                AccessApp_1.getApp)().getModeExclusif());
            }
            _isToucheRetourChariot(aEvent) {
                return aEvent && aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot && !aEvent.shiftKey && !aEvent.altKey && !aEvent.ctrlKey;
            }
            _estCurseurEnBorneDeSelection(aElement, aDebut) {
                if (aElement) {
                    if (document.selection) {
                        const LCurseurCourant = document.selection.createRange();
                        const LCurseurElement = aElement.createTextRange();
                        LCurseurElement.collapse(true);
                        return (LCurseurCourant.boundingWidth === 0) && (LCurseurCourant.boundingLeft === LCurseurElement.boundingLeft);
                    }
                    if (aElement.selectionStart !== null && aElement.selectionStart !== undefined && aElement.selectionStart === aElement.selectionEnd) {
                        return aDebut ? aElement.selectionStart === 0 : aElement.selectionStart === aElement.value.length;
                    }
                }
                return false;
            }
            _navigationFlechesClavier(aEvent, aParams) {
                if (!this._estToucheNavigationFlechesClavier(aEvent)) {
                    return;
                }
                if (aEvent.target && aEvent.target.closest(`#${this.Nom.escapeJQ()} .ObjetSaisie`)) {
                    return;
                }
                if (aEvent.target && aEvent.target.matches && aEvent.target.matches('input[type="radio"]') && ToucheClavier_1.ToucheClavierUtil.estToucheFleche(aEvent.which)) {
                    return;
                }
                const lParam = Object.assign({
                    ligne: this._cache.selectionCellule.ligne,
                    colonne: this._cache.selectionCellule.colonne,
                    orientationVerticale: false,
                    sensInverse: false,
                    avecSelection: this.Donnees.options.avecSelectionSurNavigationClavier,
                    entrerEdition: false
                }, aParams);
                switch (aEvent.which) {
                case ToucheClavier_1.ToucheClavier.FlecheHaut:
                    {
                        lParam.sensInverse = true;
                        lParam.orientationVerticale = true;
                        break;
                    }
                case ToucheClavier_1.ToucheClavier.FlecheBas:
                    {
                        lParam.orientationVerticale = true;
                        break;
                    }
                case ToucheClavier_1.ToucheClavier.Debut:
                    {
                        if (aEvent.ctrlKey || this.ListeTailles.length === 1) {
                            lParam.ligne = -1;
                            lParam.sensInverse = false;
                            lParam.orientationVerticale = true;
                        } else {
                            lParam.colonne = -1;
                            lParam.sensInverse = false;
                            lParam.orientationVerticale = false;
                        }
                        break;
                    }
                case ToucheClavier_1.ToucheClavier.Fin:
                    {
                        if (aEvent.ctrlKey || this.ListeTailles.length === 1) {
                            lParam.ligne = this.Donnees.Donnees.count();
                            lParam.sensInverse = true;
                            lParam.orientationVerticale = true;
                        } else {
                            lParam.colonne = this.ListeTailles.length;
                            lParam.sensInverse = true;
                            lParam.orientationVerticale = false;
                        }
                        break;
                    }
                case ToucheClavier_1.ToucheClavier.PageBas:
                    {
                        const lIndexLigneVisible = this._cache.lignesVisibles.indexOf(lParam.ligne);
                        let lLigne = this.Donnees.Donnees.count();
                        if (lIndexLigneVisible >= 0 && lIndexLigneVisible + 11 < this._cache.lignesVisibles.length) {
                            lLigne = this._cache.lignesVisibles[lIndexLigneVisible + 11];
                        }
                        Object.assign(lParam, {
                            orientationVerticale: true,
                            sensInverse: true,
                            ligneEtColonneFixe: true,
                            ligne: lLigne
                        });
                        break;
                    }
                case ToucheClavier_1.ToucheClavier.PageHaut:
                    {
                        const lIndexLigneVisible = this._cache.lignesVisibles.indexOf(lParam.ligne);
                        let lLigne = -1;
                        if (lIndexLigneVisible >= 0 && lIndexLigneVisible - 11 >= 0) {
                            lLigne = this._cache.lignesVisibles[lIndexLigneVisible - 11];
                        }
                        Object.assign(lParam, {
                            orientationVerticale: true,
                            sensInverse: false,
                            ligneEtColonneFixe: true,
                            ligne: lLigne
                        });
                        break;
                    }
                case ToucheClavier_1.ToucheClavier.FlecheGauche:
                    {
                        lParam.sensInverse = true;
                        if (!this._estRoleTreeGrid()) {
                            if (lParam.entrerEdition) {
                                return;
                            }
                            const lParamsCellule = this._getParamsCellule(-1, lParam.ligne);
                            if (this.Donnees.estUnDeploiement(lParamsCellule) && this.Donnees._estDeploye(lParam.ligne)) {
                                this.surDeploiement(aEvent, lParam.colonne, lParam.ligne, true);
                                return;
                            }
                            if (lParamsCellule.article && lParamsCellule.article.pere) {
                                const lStruct = this._cache.structArborescenceLignes[this._cache.lignesVisibles.indexOf(lParamsCellule.ligne)];
                                if (lStruct && lStruct.paramLigneParent) {
                                    Object.assign(lParam, {
                                        ligne: lStruct.paramLigneParent.ligne,
                                        sansRecherche: true
                                    });
                                }
                            } else {
                                return;
                            }
                        }
                        break;
                    }
                case ToucheClavier_1.ToucheClavier.FlecheDroite:
                    {
                        if (!this._estRoleTreeGrid()) {
                            if (lParam.entrerEdition) {
                                return;
                            }
                            const lParamsCellule = this._getParamsCellule(-1, lParam.ligne);
                            if (this.Donnees.estUnDeploiement(lParamsCellule) && !this.Donnees._estDeploye(lParam.ligne)) {
                                this.surDeploiement(aEvent, lParam.colonne, lParam.ligne, true);
                                return;
                            }
                            const lNumeroLigne = this._cache.lignesVisibles[this._cache.lignesVisibles.indexOf(lParamsCellule.ligne) + 1];
                            const lParamsCelluleFils = this._getParamsCellule(-1, lNumeroLigne);
                            if (lParamsCelluleFils.article && lParamsCelluleFils.article.pere === lParamsCellule.article) {
                                Object.assign(lParam, {
                                    ligne: lParamsCelluleFils.ligne,
                                    sansRecherche: true
                                });
                            } else {
                                return;
                            }
                        }
                        break;
                    }
                }
                if (lParam.entrerEdition) {
                    this._selectionnerCelluleSuivante(lParam);
                } else {
                    this._navigationCelluleSuivante(lParam);
                }
            }
            _estToucheNavigationFlechesClavier(aEvent) {
                return !!aEvent && (ToucheClavier_1.ToucheClavierUtil.estToucheFleche(aEvent.which) || aEvent.which === ToucheClavier_1.ToucheClavier.Fin || aEvent.which === ToucheClavier_1.ToucheClavier.Debut || aEvent.which === ToucheClavier_1.ToucheClavier.PageBas || aEvent.which === ToucheClavier_1.ToucheClavier.PageHaut);
            }
            _getLeftCurseurTri(aPositionColonne, aDerniereColonneDeBloc) {
                return aPositionColonne.left + Math.round(aPositionColonne.width / 2 - this._options.widthTri / 2) + (aDerniereColonneDeBloc ? 0 : 1);
            }
            _positionnerCurseurTri(aInfosZonesColonnes, aNode, aNumeroColonne) {
                const lPosition = aInfosZonesColonnes.gabaritColonnesTitre[aNumeroColonne]
                  , lDerniereColonne = aNumeroColonne === aInfosZonesColonnes.colonnesVisibles[aInfosZonesColonnes.colonnesVisibles.length - 1];
                const lNumeroTri = this._triCourant.colonne.indexOf(aNumeroColonne);
                if (!lPosition) {
                    $(aNode).attr('tabindex', '-1').addClass(Divers_css_1.StylesDivers.srOnly);
                } else {
                    $(aNode).attr('tabindex', '0').css('left', this._getLeftCurseurTri(lPosition, lDerniereColonne) + 'px');
                    if (lNumeroTri >= 0) {
                        $(aNode).removeClass(Divers_css_1.StylesDivers.srOnly);
                    }
                }
            }
            _avecBoutonsListeHautScroll() {
                return this._cache.boutons && this._cache.boutons.length > 0 && this._options.positionBoutons === NSListe.positionBoutons.hautScroll;
            }
            _getTabBoutonsEnteteOuPiedFD(aPourEntete) {
                const lTab = [];
                if (this._cache.boutons && this._cache.boutons.length > 0 && this._options.positionBoutons === NSListe.positionBoutons.entete) {
                    this._cache.boutons.forEach( (aBouton, aIndex) => {
                        if (aBouton) {
                            const lPiedMobile = this.optionsInterne.versionMobile && aBouton.estBoutonPiedFlottant_mobile;
                            if ((!aPourEntete && lPiedMobile) || (aPourEntete && !lPiedMobile)) {
                                lTab.push({
                                    bouton: aBouton,
                                    index: aIndex
                                });
                            }
                        }
                    }
                    );
                }
                return lTab;
            }
            _initCacheLignes(aParamsActualiser) {
                const lParamsActualiser = Object.assign({
                    initCacheDyn: true
                }, aParamsActualiser);
                const lCache = this._cache;
                lCache.lignesFusionParColonne = {};
                if (this.Donnees) {
                    this.Donnees.lignesFusionParColonne = lCache.lignesFusionParColonne;
                }
                if (!lParamsActualiser || !lParamsActualiser.estFiltreRechercheTexte) {
                    lCache.rechercheTexte.textesParLigne = null;
                    lCache.rechercheTexte.lignesCachees = [];
                }
                lCache.lignesVisibles = [];
                lCache.lignesVisiblesSansRechercheTexte = [];
                lCache.strResultRecherche = '';
                lCache.structArborescenceLignes = [];
                if (this.ListeTailles && this.Donnees) {
                    for (let J = 0, lNb = this.Donnees.getNbrLignes(); J < lNb; J++) {
                        if (this.Donnees.estVisible(J)) {
                            lCache.lignesVisiblesSansRechercheTexte.push(J);
                            lCache.lignesVisibles.push(J);
                        }
                    }
                    if (lParamsActualiser && lParamsActualiser.estFiltreRechercheTexte) {
                        lCache.lignesVisibles = [];
                        lCache.lignesVisiblesSansRechercheTexte.forEach( (aLigne) => {
                            if (!lCache.rechercheTexte.lignesCachees[aLigne]) {
                                lCache.lignesVisibles.push(aLigne);
                            }
                        }
                        );
                    }
                    const lTabProfondeur = [{
                        level: 0,
                        count: 0
                    }];
                    lCache.lignesVisibles.forEach( (aLigneDonnees) => {
                        const lParamCelluleLigne = this._getParamsCellule(-1, aLigneDonnees);
                        const lStructPrec = lCache.structArborescenceLignes.length > 0 ? lCache.structArborescenceLignes[lCache.structArborescenceLignes.length - 1] : null;
                        let lProfondeur = 1;
                        let lArticleRechercheProfondeur = lParamCelluleLigne.article;
                        while (lArticleRechercheProfondeur && lArticleRechercheProfondeur.pere) {
                            lProfondeur += 1;
                            lArticleRechercheProfondeur = lArticleRechercheProfondeur.pere;
                        }
                        let lInfosProfondeurParent = lTabProfondeur[lProfondeur - 1];
                        if (!lInfosProfondeurParent || (lProfondeur > 1 && lStructPrec && lProfondeur > lStructPrec.level)) {
                            lInfosProfondeurParent = {
                                count: 0,
                                paramsLigne: lStructPrec ? lStructPrec.paramsLigne : null
                            };
                            if (lStructPrec) {
                                lStructPrec.avecFilsVisible = true;
                            }
                            lTabProfondeur[lProfondeur - 1] = lInfosProfondeurParent;
                        }
                        lInfosProfondeurParent.count += 1;
                        lCache.structArborescenceLignes.push({
                            paramsLigne: lParamCelluleLigne,
                            paramLigneParent: lInfosProfondeurParent.paramsLigne,
                            level: lProfondeur,
                            index: lInfosProfondeurParent.count,
                            _count() {
                                return lInfosProfondeurParent.count;
                            }
                        });
                    }
                    );
                    lCache.structArborescenceLignes.forEach( (aStruct) => {
                        aStruct.count = aStruct._count();
                        delete aStruct._count;
                    }
                    );
                }
                const lCacheRef = lCache.refresh;
                if (lParamsActualiser.initCacheDyn) {
                    lCacheRef.init();
                }
                lCacheRef.avecConstructionDynamiqueContenu = this._options.avecConstructionDynamiqueContenu && lCache.lignesVisibles.length > lCacheRef.nbLignes * 5;
                lCacheRef.structure = [];
                this.optionsInterne.initStructureDynamique();
            }
            _estLigneVisible(aNumeroLigne, aParams) {
                return !this._cache.rechercheTexte.lignesCachees[aNumeroLigne] && this.Donnees.estVisible(aNumeroLigne, aParams);
            }
            _estSelectionParCellule(aLigne, aColonne) {
                if (aColonne < 0) {
                    return false;
                }
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                return !!(lDonneesTableau && lDonneesTableau.selectionParCellule(aColonne, lDonneesTableau.Donnees.get(aLigne)));
            }
            _calculerTitres() {
                const _completerCelluleVide = (aLigne, aColonne) => {
                    return this.ListeTitres[aLigne - 1] && this.ListeTitres[aLigne - 1][aColonne] === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche ? TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche : TypeFusionTitreListe_1.TypeFusionTitreListe.FusionHaute;
                }
                ;
                let lNbLignes, iLigne, iColonne, lNumeroColonne;
                const lHintTitres = [];
                if (this._options.colonnes && this._cache.declarationsColonnes && this._cache.declarationsColonnes.length > 0) {
                    this.ListeTitres = null;
                    lNbLignes = 0;
                    for (iColonne = 0; iColonne < this._cache.declarationsColonnes.length; iColonne++) {
                        if (this._cache.declarationsColonnes[iColonne]) {
                            const lDecl = this._cache.declarationsColonnes[iColonne];
                            if (Array.isArray(lDecl.titre)) {
                                lNbLignes = Math.max(lNbLignes, lDecl.titre.length);
                            } else if (lDecl.titre) {
                                lNbLignes = Math.max(lNbLignes, 1);
                            }
                            if (this._cache.declarationsColonnes[iColonne].sansBordureDroite) {
                                if (!this._options.colonnesSansBordureDroit) {
                                    this._options.colonnesSansBordureDroit = [];
                                }
                                this._options.colonnesSansBordureDroit.push(this._cache.declarationsColonnes[iColonne].id);
                            }
                        }
                    }
                    if (lNbLignes > 0) {
                        this.ListeTitres = [];
                        lNumeroColonne = 0;
                        for (iColonne = 0; iColonne < this._cache.declarationsColonnes.length; iColonne++) {
                            if (this._cache.declarationsColonnes[iColonne]) {
                                for (iLigne = 0; iLigne < lNbLignes; iLigne++) {
                                    if (!this.ListeTitres[iLigne]) {
                                        this.ListeTitres[iLigne] = [];
                                    }
                                    if (!lHintTitres[iLigne]) {
                                        lHintTitres[iLigne] = [];
                                    }
                                    const lValeur = this._cache.declarationsColonnes[iColonne].titre;
                                    if (MethodesObjet_1.MethodesObjet.isArray(lValeur)) {
                                        const lValeurTitre = lValeur[iLigne];
                                        if (lValeurTitre !== undefined && lValeurTitre !== null) {
                                            this.ListeTitres[iLigne][lNumeroColonne] = lValeurTitre;
                                        } else {
                                            this.ListeTitres[iLigne][lNumeroColonne] = iLigne === 0 ? lNumeroColonne === 0 ? '' : TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche : _completerCelluleVide.call(this, iLigne, lNumeroColonne);
                                        }
                                    } else {
                                        this.ListeTitres[iLigne][lNumeroColonne] = iLigne === 0 ? lValeur !== undefined && lValeur !== null ? lValeur : lNumeroColonne === 0 ? '' : TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche : _completerCelluleVide.call(this, iLigne, lNumeroColonne);
                                    }
                                    if (MethodesObjet_1.MethodesObjet.isArray(this._cache.declarationsColonnes[iColonne].hint)) {
                                        if (this._cache.declarationsColonnes[iColonne].hint[iLigne]) {
                                            lHintTitres[iLigne][lNumeroColonne] = this._cache.declarationsColonnes[iColonne].hint[iLigne];
                                        }
                                    } else if (this._cache.declarationsColonnes[iColonne].hint) {
                                        lHintTitres[iLigne][lNumeroColonne] = this._cache.declarationsColonnes[iColonne].hint;
                                    }
                                }
                                lNumeroColonne += 1;
                            }
                        }
                    }
                }
                const lDescripteurSkin = {
                    getCouleurFond: null,
                    getCouleurTexte: null,
                    estCoche: false,
                    largeurClasseCssImage: null
                };
                for (iLigne in this.ListeTitres) {
                    for (iColonne in this.ListeTitres[iLigne]) {
                        const lDescripteur = this.ListeTitres[iLigne][iColonne]
                          , lDescripteurModele = Object.assign({}, lDescripteurSkin);
                        if (!lDescripteur) {
                            lDescripteurModele.libelle = '';
                        } else if (MethodesObjet_1.MethodesObjet.isObject(lDescripteur)) {
                            Object.assign(lDescripteurModele, lDescripteur);
                            if (MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(TypeFusionTitreListe_1.TypeFusionTitreListe, lDescripteur.libelle) !== '') {
                                lDescripteurModele.fusion = lDescripteur.libelle;
                            }
                            if (lDescripteurModele.couleurFond) {
                                lDescripteurModele.getCouleurFond = function() {
                                    return this.couleurFond;
                                }
                                ;
                            }
                            if (lDescripteurModele.couleurTexte) {
                                lDescripteurModele.getCouleurTexte = function() {
                                    return this.couleurTexte;
                                }
                                ;
                            }
                            ;if (lDescripteurModele.controleur && MethodesObjet_1.MethodesObjet.isObject(lDescripteurModele.controleur)) {
                                Object.keys(lDescripteurModele.controleur).forEach( (aKey) => {
                                    if (!this._cache.keysControleurTitre[aKey]) {
                                        if (this.controleur[aKey] || this._cache.keysControleurDonneesListe[aKey]) {
                                            return;
                                        }
                                        this._cache.keysControleurTitre[aKey] = true;
                                    }
                                }
                                );
                                $.extend(true, this.controleur, lDescripteurModele.controleur);
                            }
                        } else if (MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(TypeFusionTitreListe_1.TypeFusionTitreListe, lDescripteur) !== '') {
                            lDescripteurModele.fusion = lDescripteur;
                        } else if (MethodesObjet_1.MethodesObjet.isString(lDescripteur)) {
                            const lStrDescripteur = lDescripteur;
                            if ((lStrDescripteur.charAt(0) === '[') && (lStrDescripteur.charAt(lStrDescripteur.length - 1) === ']')) {
                                lDescripteurModele.classeCssImage = lStrDescripteur.substring(1, 1 + lStrDescripteur.length - 2);
                            } else if ((lStrDescripteur.charAt(0) === '{') && (lStrDescripteur.charAt(lStrDescripteur.length - 1) === '}')) {
                                lDescripteurModele.libelleHtml = lStrDescripteur.substring(1, 1 + lStrDescripteur.length - 2);
                            } else {
                                lDescripteurModele.libelle = lStrDescripteur;
                            }
                        } else {
                            lDescripteurModele.libelle = '';
                            IE.log.addLog('_ObjetListe.setOptionsListe : pas de descripteur de colonnes', null, IE.log.genre.Avertissement);
                        }
                        if (!lDescripteurModele.title && lHintTitres && lHintTitres[iLigne] && lHintTitres[iLigne][iColonne]) {
                            lDescripteurModele.title = lHintTitres[iLigne][iColonne];
                        }
                        this.ListeTitres[iLigne][iColonne] = lDescripteurModele;
                    }
                }
            }
            _estRechercheTexteVide() {
                return this._cache.rechercheTexte.saisie.trim() === '';
            }
            _filtreRechercheTexte(aParamsActualiser) {
                const lCache = this._cache;
                const lOldCache = lCache.rechercheTexte.lignesCachees;
                lCache.rechercheTexte.lignesCachees = [];
                const lRechercheVide = this._estRechercheTexteVide();
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                let lAvecContructionCache = false;
                if (!lRechercheVide && !lCache.rechercheTexte.textesParLigne) {
                    this.Donnees.enConstruction_cacheRechercheTexte = true;
                    try {
                        lAvecContructionCache = true;
                        this._initCacheLignes({
                            initCacheDyn: false
                        });
                        lCache.rechercheTexte.textesParLigne = [];
                        lCache.structureWAI.lignes = [];
                        this.construireCacheRechercheTextes();
                    } finally {
                        this.Donnees.enConstruction_cacheRechercheTexte = false;
                    }
                }
                if (!lRechercheVide) {
                    const lTabRecherches = RechercheTexte_1.RechercheTexte.getTabRechercheTexteNormalize(this.getRechercheTexte().enleverEntites());
                    const lIndexsLignesVisibles = [];
                    const lFuncRendrePereArticleVisible = (aLigne) => {
                        const lArticleFils = this.getArticleDeLigne(aLigne);
                        if (lArticleFils && lArticleFils.pere) {
                            for (let lIndiceLigne = aLigne - 1; lIndiceLigne >= 0; lIndiceLigne--) {
                                const lArticleRechereche = this.getArticleDeLigne(lIndiceLigne);
                                if (lArticleRechereche === lArticleFils.pere) {
                                    lCache.rechercheTexte.lignesCachees[lIndiceLigne] = false;
                                    lFuncRendrePereArticleVisible(lIndiceLigne);
                                    return;
                                }
                            }
                        }
                    }
                    ;
                    lCache.rechercheTexte.textesParLigne.forEach( (aInfosLigne) => {
                        const lLigneVisible = RechercheTexte_1.RechercheTexte.trouverRechercheTabTexteNormalize({
                            tabSearch: lTabRecherches,
                            str: aInfosLigne.texte,
                            str_avecEntites: false,
                            strSearch_avecEntites: false
                        });
                        if (!lLigneVisible) {
                            lCache.rechercheTexte.lignesCachees[aInfosLigne.ligne] = true;
                        }
                        if (lLigneVisible && this.Donnees.options.avecPereVisibleSurRechercheTexte && this.Donnees.Donnees) {
                            lFuncRendrePereArticleVisible(aInfosLigne.ligne);
                        }
                    }
                    );
                    lCache.rechercheTexte.textesParLigne.forEach( (aInfosLigne, aIndex) => {
                        if (!lCache.rechercheTexte.lignesCachees[aInfosLigne.ligne]) {
                            lIndexsLignesVisibles.push(aIndex);
                        }
                    }
                    );
                    lCache.rechercheTexte.lignesCachees.forEach( (aCachee, aLigne) => {
                        if (!aCachee) {
                            return;
                        }
                        const lIndice = lCache.lignesVisiblesSansRechercheTexte.indexOf(aLigne);
                        if (lIndice <= 0) {
                            return;
                        }
                        const lLignePrec = lCache.lignesVisiblesSansRechercheTexte[lIndice - 1];
                        lCache.infosZonesColonnes.forEach( (aBloc) => {
                            if (lCache.rechercheTexte.lignesCachees[aLigne]) {
                                aBloc.colonnesVisibles.forEach( (aNumeroColonne) => {
                                    if (lCache.rechercheTexte.lignesCachees[aLigne] && !lCache.rechercheTexte.lignesCachees[lLignePrec] && lDonneesTableau && lDonneesTableau.fusionCelluleAvecLignePrecedente(this._getParamsCellule(aNumeroColonne, aLigne, {
                                        celluleLignePrecedente: this._getParamsCellule(aNumeroColonne, lLignePrec)
                                    }))) {
                                        lCache.rechercheTexte.lignesCachees[aLigne] = undefined;
                                    }
                                }
                                );
                            }
                        }
                        );
                    }
                    );
                    lIndexsLignesVisibles.forEach( (aIndex) => {
                        const lInfosLigneInitiale = lCache.rechercheTexte.textesParLigne[aIndex];
                        if (!lInfosLigneInitiale) {
                            return;
                        }
                        const lFuncBoucle = function(aInc) {
                            let lLigneVisible = lInfosLigneInitiale.ligne;
                            let lIndex = aIndex + (aInc ? 1 : -1);
                            while (lIndex >= 0 && lIndex < lCache.rechercheTexte.textesParLigne.length) {
                                const lInfosLigne = lCache.rechercheTexte.textesParLigne[lIndex];
                                if (!lInfosLigne || !lCache.rechercheTexte.lignesCachees[lInfosLigne.ligne]) {
                                    break;
                                }
                                if (this.Donnees.rechercheTexteForcerLignePrecSuivVisible(this._getParamsCellule(-1, lLigneVisible), this._getParamsCellule(-1, lInfosLigne.ligne))) {
                                    lCache.rechercheTexte.lignesCachees[lInfosLigne.ligne] = undefined;
                                    lLigneVisible = lInfosLigne.ligne;
                                } else {
                                    break;
                                }
                                lIndex += aInc ? 1 : -1;
                            }
                        };
                        lFuncBoucle.call(this, false);
                        lFuncBoucle.call(this, true);
                    }
                    );
                }
                if (lAvecContructionCache || !MethodesObjet_1.MethodesObjet.objetsIdentiques(lCache.rechercheTexte.lignesCachees, lOldCache)) {
                    const lParams = Object.assign(aParamsActualiser || {}, {
                        conserverSelection: true,
                        selections: null,
                        zonesActualisation: {
                            contenu: true
                        },
                        estFiltreRechercheTexte: true,
                        conserverPositionScroll: false
                    });
                    this._actualiser(lParams);
                    const lInput = this._getJConteneurInputRecherche().find('.liste_rechercheTexte input').get(0);
                    if (lInput) {
                        ObjetHtml_1.GHtml.setFocusEdit(lInput);
                    }
                } else {
                    this._surlignageRechercheTexte();
                }
                if (lRechercheVide) {
                    lCache.strResultRecherche = ObjetTraduction_1.GTraductions.getValeur('liste.wai.MsgRechercheNonTrouve');
                } else {
                    this._getJConteneurInputRecherche().find('.liste_rechercheTexte_alerte.hide').removeClass('hide');
                    const lNbLignesResult = lCache.lignesVisibles.length;
                    const lStrRecherche = this.getRechercheTexte();
                    if (lNbLignesResult === 0) {
                        lCache.strResultRecherche = ObjetTraduction_1.GTraductions.getValeur('liste.wai.MsgRechercheNonTrouvePour_S', [lStrRecherche]);
                    } else if (lNbLignesResult === 1) {
                        lCache.strResultRecherche = ObjetTraduction_1.GTraductions.getValeur('liste.wai.MsgRechercheXTrouveePour_DDS', [lNbLignesResult, lCache.lignesVisiblesSansRechercheTexte.length, lStrRecherche]);
                    } else {
                        lCache.strResultRecherche = ObjetTraduction_1.GTraductions.getValeur('liste.wai.MsgRechercheXTrouveesPour_DDS', [lNbLignesResult, lCache.lignesVisiblesSansRechercheTexte.length, lStrRecherche]);
                    }
                }
                this.$refreshSelf();
            }
            construireCacheRechercheTextes() {
                const lCache = this._cache;
                const lCacheRef = lCache.refresh;
                let lStructure = [];
                if (!lCache.refresh.avecConstructionDynamiqueContenu) {
                    lStructure.push({
                        deb: 0,
                        fin: lCache.lignesVisibles.length - 1
                    });
                } else {
                    lStructure = lCacheRef.structure;
                }
                lStructure.forEach( (aStructure, aIndiceRange) => {
                    let lIndiceLigne;
                    let lInfos;
                    let lFragment = IEHtml.outils.createSafeFragment();
                    let lJFragment;
                    try {
                        lCache.infosZonesColonnes.forEach( (aInfosZoneColonnes, aIndex) => {
                            let lDiv = document.createElement('div');
                            lFragment.appendChild(lDiv);
                            lDiv.id = `frag${aIndex}`;
                            const lHtml = this._construireContenuRange(aInfosZoneColonnes, aIndiceRange);
                            $(lDiv).ieHtmlAppend('<div>' + lHtml + '</div>', {
                                controleur: this.controleur
                            });
                            lDiv = null;
                        }
                        );
                        lJFragment = $(lFragment);
                        for (lIndiceLigne = aStructure.deb; lIndiceLigne <= aStructure.fin; lIndiceLigne++) {
                            lInfos = {
                                ligne: lCache.lignesVisibles[lIndiceLigne],
                                texte: ''
                            };
                            lCache.rechercheTexte.textesParLigne.push(lInfos);
                            lCache.infosZonesColonnes.forEach( (aInfosZoneColonnes, aIndex) => {
                                const lTab = [];
                                lFragment.querySelectorAll(`#frag${aIndex} .liste_celluleGrid_${lIndiceLigne + 1} :not(.${Divers_css_1.StylesDivers.srOnly})`).forEach( (aNode) => {
                                    if (aNode.childNodes && aNode.childNodes.length > 0) {
                                        aNode.childNodes.forEach( (aChildNode) => {
                                            if (aChildNode.nodeType === Node.TEXT_NODE) {
                                                const lValue = aChildNode.nodeValue || '';
                                                if (lValue) {
                                                    lTab.push(lValue);
                                                }
                                            }
                                        }
                                        );
                                    }
                                }
                                );
                                lInfos.texte += ' ' + ComparateurChaines_1.ComparateurChaines.normalize(lTab.join(' '));
                            }
                            );
                        }
                    } finally {
                        lJFragment.children().remove();
                        lJFragment.remove();
                        lJFragment = null;
                        lFragment = null;
                    }
                }
                );
            }
            _calculerTailles() {
                this.ListeTailles = this._cache.colonnes.listeTailles || [];
                let lElement, i, lValeur;
                for (i = 0; i < this.ListeTailles.length; i++) {
                    lElement = this.ListeTailles[i];
                    if (lElement && typeof lElement === 'string' && lElement.search && lElement.search(/%/) >= 0) {
                        this.ListeTailles[i] = ObjetListe.initColonne(parseInt(lElement, 10));
                    } else if (lElement && typeof lElement === 'string' && lElement.toLowerCase().endsWith('rem')) {
                        let lTailleRem = parseFloat(lElement.toLowerCase().replace('rem', ''));
                        lTailleRem = isNaN(lTailleRem) ? 0 : lTailleRem;
                        this.ListeTailles[i] = {
                            estREM: true,
                            valeurRem: lElement,
                            valeurPx: Math.max(0, ObjetPosition_1.GPosition.remToPixels(lTailleRem))
                        };
                    } else if (lElement && !MethodesObjet_1.MethodesObjet.isObject(lElement)) {
                        lValeur = parseInt(lElement, 10);
                        this.ListeTailles[i] = Math.max(0, isNaN(lValeur) ? 0 : lValeur);
                    }
                }
            }
            _trierDonnees() {
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                if (lDonneesTableau) {
                    lDonneesTableau.setTriCourantDeListe(this._triCourant);
                }
                this.Donnees.trier();
            }
            _setDonnees(ADonnees, aLigneSelectionne, aParams) {
                this._donneesRecus = true;
                this.Donnees = ADonnees;
                const lControleurDonnees = this.Donnees ? this.Donnees.getControleur(this.Donnees, this) : null;
                if (lControleurDonnees) {
                    Object.keys(lControleurDonnees).forEach( (aKey) => {
                        if (!this._cache.keysControleurDonneesListe[aKey]) {
                            if (this.controleur[aKey] || this._cache.keysControleurTitre[aKey]) {
                                return;
                            }
                            this._cache.keysControleurDonneesListe[aKey] = true;
                        }
                    }
                    );
                    $.extend(true, this.controleur, lControleurDonnees);
                }
                if (this.Donnees) {
                    if (this._options.skin === ObjetListe.skin.flatDesign) {} else {}
                }
                this._cache.listeNonInitialisee = false;
                this._setRechercheSaisie('');
                clearTimeout(this._cache.timerKeyPress);
                this._cache.selectionCellule = {
                    ligne: -1,
                    colonne: -1
                };
                this._cache.celluleClicNonShift = {
                    ligne: -1,
                    colonne: -1
                };
                if (this.Donnees) {
                    this._cache.lignesSelectionnees = new Array(this.Donnees.getNbrLignes());
                    this._cache.lignesSelectionnees_prec = [];
                }
                this._calculsPreRendu();
                if (this.Donnees) {
                    this.Donnees._setParamsListe({
                        liste: this,
                        idWAILigneLue: this.ids.WAILigneLue,
                        versionMobile: this.optionsInterne.versionMobile,
                        getIdsColonnes: () => {
                            return this._cache.colonnes.listeIds;
                        }
                        ,
                        getParams: this._getParamsCellule.bind(this),
                        actualiserListe: (aParams) => {
                            this._actualiser(Object.assign({
                                conserverSelection: true,
                                zonesActualisation: {
                                    contenu: true
                                },
                                ignorerFocusListe: true
                            }, aParams));
                        }
                        ,
                        ouvrirMenuContextuel: this._ouvrirMenuContextuel.bind(this),
                        jsxNodeDeploiementLigne: this.jsxNodeDeploiementLigne.bind(this),
                        jsxGetModelCBLigneFlatDesign: this.jsxGetModelCBLigneFlatDesign.bind(this, this),
                        jsxGetAttrCBLigneFlatDesign: this.jsxGetAttrCBLigneFlatDesign.bind(this)
                    });
                }
                let lSelections = null;
                if (this.Donnees && this.Donnees.Donnees && aLigneSelectionne >= 0 && MethodesObjet_1.MethodesObjet.isNumber(aLigneSelectionne)) {
                    this._cache.selectionCellule.ligne = aLigneSelectionne;
                    this._trierDonnees();
                    lSelections = [{
                        article: this.Donnees.Donnees.get(this._cache.selectionCellule.ligne)
                    }];
                } else if (this.Donnees && this.Donnees.Donnees && aParams && aParams.listeElementsSelection && aParams.listeElementsSelection.count && aParams.listeElementsSelection.count() > 0) {
                    lSelections = [];
                    aParams.listeElementsSelection.parcourir( (aElement) => {
                        lSelections = [{
                            article: aElement
                        }];
                    }
                    );
                    aParams.listeElementsSelection = null;
                    aParams.instancesIdentiquesSelections = false;
                    this._trierDonnees();
                }
                this._actualiser(Object.assign({
                    selections: lSelections,
                    sansTriDonnees: !!lSelections,
                    avecEvenementSelection: !!lSelections && lSelections.length > 0,
                    avecScrollSelection: !!lSelections && lSelections.length > 0,
                    conserverPositionScroll: false
                }, aParams));
                return this;
            }
            _getLargeurPage() {
                const lJElement = $('#' + this.Nom.escapeJQ());
                if (lJElement.html() === '') {
                    lJElement.html('&nbsp;');
                }
                return Math.floor(lJElement.width());
            }
            _calculerColonnes() {
                this._cache.largeurPage = this._getLargeurPage();
                this._cache.colonnesSansBordureDroit = [];
                if (this._options.colonnesSansBordureDroit) {
                    this._options.colonnesSansBordureDroit.forEach( (aElement, aIndex) => {
                        if (aElement === true || aElement === false) {
                            this._cache.colonnesSansBordureDroit[aIndex] = aElement;
                        } else if (MethodesObjet_1.MethodesObjet.isString(aElement)) {
                            this._cache.colonnesSansBordureDroit[this._getNumeroColonneSelonNumeroOuId(aElement)] = true;
                        }
                    }
                    , this);
                }
                this._cache.taillesColonne = this._calculerTaillesColonnes(this._cache);
                this._cache.calculsTailleColonnesAFaire = !this._cache.largeurPage;
            }
            _getNumeroColonneSelonNumeroOuId(aColonne, aAccepteErreur) {
                let lNumeroColonne = aColonne;
                if (MethodesObjet_1.MethodesObjet.isString(aColonne) && this._cache.colonnes.listeIds) {
                    lNumeroColonne = this._cache.colonnes.listeIds.indexOf(aColonne);
                    if (lNumeroColonne < 0) {
                        lNumeroColonne = null;
                    }
                }
                return lNumeroColonne;
            }
            _calculerTri() {
                let lNombreTri = 0, lNumerosColonnesTriDefaut = [], lGenreTriColonneTriDefaut = [], lGenreColonne, lNumeroColonne, lErreurTriCorrigee = false, i;
                function _chercherColonneTriValide(aNumeroColonne, aNumerosColonnesTriDefaut) {
                    let lNumeroColonne = aNumeroColonne;
                    if (!MethodesObjet_1.MethodesObjet.isNumber(lNumeroColonne)) {
                        lNumeroColonne = 0;
                        lErreurTriCorrigee = true;
                    }
                    while (lNumeroColonne >= 0 && (!this._estColonneVisible(lNumeroColonne) || this._cache.colonnesTri[lNumeroColonne] !== true || aNumerosColonnesTriDefaut.includes(lNumeroColonne))) {
                        lNumeroColonne += -1;
                        lErreurTriCorrigee = true;
                    }
                    if (lNumeroColonne < 0) {
                        let lTrouve = false;
                        this._cache.infosZonesColonnes.forEach( (aBloc) => {
                            aBloc.colonnesVisibles.forEach( (aNumeroColonne) => {
                                if (!lTrouve && this._cache.colonnesTri[aNumeroColonne] === true && !aNumerosColonnesTriDefaut.includes(aNumeroColonne)) {
                                    lTrouve = true;
                                    lNumeroColonne = aNumeroColonne;
                                    lErreurTriCorrigee = true;
                                }
                            }
                            );
                        }
                        );
                    }
                    ;return lNumeroColonne;
                }
                if (this._options.colonnesTriables === true) {
                    this._cache.colonnesTri = [];
                    for (i = 0; i < this.ListeTailles.length; i++) {
                        this._cache.colonnesTri[i] = true;
                    }
                } else {
                    this._cache.colonnesTri = [];
                    if (this._options.colonnesTriables && Array.isArray(this._options.colonnesTriables)) {
                        const lCols = this._options.colonnesTriables;
                        this._cache.listeCorrespondancesColonnes.forEach( (aNumeroColonneReelle, aNumeroColonneInitiale) => {
                            if (lCols[aNumeroColonneInitiale] === true || lCols[aNumeroColonneInitiale] === false) {
                                if (aNumeroColonneReelle >= 0) {
                                    this._cache.colonnesTri[aNumeroColonneReelle] = lCols[aNumeroColonneInitiale];
                                }
                            } else if (MethodesObjet_1.MethodesObjet.isString(lCols[aNumeroColonneInitiale])) {
                                lNumeroColonne = this._getNumeroColonneSelonNumeroOuId(lCols[aNumeroColonneInitiale], true);
                                if (lNumeroColonne !== null) {
                                    this._cache.colonnesTri[lNumeroColonne] = true;
                                }
                            }
                        }
                        );
                    }
                    if (this._cache.colonnesTri.length === 0) {
                        this._cache.colonnesTri = null;
                    }
                }
                let lOptionsTriParDefaut = this._options.numeroColonneTriDefaut;
                if (MethodesObjet_1.MethodesObjet.isFunction(lOptionsTriParDefaut)) {
                    lOptionsTriParDefaut = lOptionsTriParDefaut();
                }
                if (this._cache.colonnesTri && this._cache.colonnesTri.length > 0) {
                    if (MethodesObjet_1.MethodesObjet.isArray(lOptionsTriParDefaut)) {
                        lNumerosColonnesTriDefaut = [];
                        for (i = 0; i < lOptionsTriParDefaut.length; i++) {
                            lNumeroColonne = null;
                            const lOptTri = lOptionsTriParDefaut[i];
                            if (MethodesObjet_1.MethodesObjet.isObject(lOptTri)) {
                                if (lOptTri.id) {
                                    lNumeroColonne = this._getNumeroColonneSelonNumeroOuId(lOptTri.id, true);
                                }
                                if (lNumeroColonne === null) {
                                    lNumeroColonne = lOptTri.numero || 0;
                                    lErreurTriCorrigee = true;
                                }
                                lNumeroColonne = lOptTri.numero || 0;
                                lGenreColonne = lOptTri.genre || Enumere_TriElement_1.EGenreTriElement.Croissant;
                            } else {
                                lNumeroColonne = this._getNumeroColonneSelonNumeroOuId(lOptTri, true) || 0;
                                lGenreColonne = Enumere_TriElement_1.EGenreTriElement.Croissant;
                            }
                            lNumeroColonne = _chercherColonneTriValide.call(this, lNumeroColonne, lNumerosColonnesTriDefaut);
                            if (lNumeroColonne >= 0) {
                                lNumerosColonnesTriDefaut.push(lNumeroColonne);
                                lGenreTriColonneTriDefaut.push(lGenreColonne);
                            }
                        }
                        lNombreTri = lNumerosColonnesTriDefaut.length;
                    } else {
                        lNombreTri = 1;
                        lNumeroColonne = null;
                        if (MethodesObjet_1.MethodesObjet.isObject(lOptionsTriParDefaut)) {
                            if (lOptionsTriParDefaut.id) {
                                lNumeroColonne = this._getNumeroColonneSelonNumeroOuId(lOptionsTriParDefaut.id, true) || 0;
                            }
                            if (lNumeroColonne === null) {
                                lNumeroColonne = lOptionsTriParDefaut.numero || 0;
                                lErreurTriCorrigee = true;
                            }
                            lGenreColonne = lOptionsTriParDefaut.genre || Enumere_TriElement_1.EGenreTriElement.Croissant;
                        } else {
                            lNumeroColonne = this._getNumeroColonneSelonNumeroOuId(lOptionsTriParDefaut, true) || 0;
                            lGenreColonne = Enumere_TriElement_1.EGenreTriElement.Croissant;
                        }
                        lNumeroColonne = _chercherColonneTriValide.call(this, parseInt(lNumeroColonne || 0, 10), lNumerosColonnesTriDefaut);
                        lNumerosColonnesTriDefaut = [lNumeroColonne];
                        lGenreTriColonneTriDefaut = [lGenreColonne];
                    }
                }
                this._triCourant = {
                    colonne: [],
                    genre: [],
                    nombreTri: lNombreTri
                };
                for (i = 0; i < lNombreTri; i++) {
                    this._triCourant.colonne[i] = lNumerosColonnesTriDefaut[i];
                    this._triCourant.genre[i] = lGenreTriColonneTriDefaut[i];
                }
                if (lErreurTriCorrigee) {
                    this._setOptionEvenementSurTri();
                }
            }
            _calculerParametresCreation() {
                function _ajouterColonne(aColonne) {
                    const lNumeroColonne = this._getNumeroColonneSelonNumeroOuId(aColonne);
                    if (MethodesObjet_1.MethodesObjet.isNumber(lNumeroColonne)) {
                        if (this._cache.colonnes.listeTailles && (lNumeroColonne < 0 || lNumeroColonne >= this._cache.colonnes.listeTailles.length)) {
                            IE.log.addLog('options.listeCreations [_calculerParametresCreation], la colonne numero ' + aColonne + ' n\'existe pas !');
                        }
                        this.ListeCreations.push(lNumeroColonne);
                    }
                }
                this.ListeCreations = [];
                if (Array.isArray(this._options.listeCreations)) {
                    this._options.listeCreations.forEach(_ajouterColonne, this);
                } else {
                    _ajouterColonne.call(this, this._options.listeCreations);
                }
            }
            _avecLigneCreationTitre() {
                let lAvecLigneCreation = !this._getNonEditable() && this._options.avecLigneCreation && !!this.Donnees;
                if (lAvecLigneCreation && this._cache.infosZonesColonnes.length > 1) {
                    lAvecLigneCreation = false;
                }
                return lAvecLigneCreation;
            }
            _getLargeurPartieScrollV() {
                return Math.max(this._getLargeurScrollV(), this._avecBoutonsListeHautScroll() ? (this._options.tailleBoutons + 1) : 0);
            }
            _getLargeurScrollV() {
                return 0;
            }
            _calculerTaillesColonnes(aCache, aPourImpression) {
                const lTaillesColonne = [];
                if (!this.ListeTailles) {
                    return lTaillesColonne;
                }
                this.ListeTailles.forEach( () => {
                    lTaillesColonne.push({
                        px: 0
                    });
                }
                );
                let i, lTailleRestante, lTaille, lTotalValeurs = 0, lElement, lNumeroColonne;
                const lColonnesPourcent = [];
                aCache.avecPourcentage = false;
                aCache.largeurTotalFixe = 0;
                aCache.largeurTotalCalcule = 0;
                for (i = 0; i < this.ListeTailles.length; i++) {
                    if (this._estColonneVisible(i)) {
                        const lTailleCol = this.ListeTailles[i];
                        const lTailleREM = this.ListeTailles[i];
                        const lTaillePx = this.ListeTailles[i];
                        if (lTailleCol && lTailleCol.valeur && !lTailleREM.estREM) {
                            aCache.avecPourcentage = true;
                            lTotalValeurs += lTailleCol.valeur;
                            lElement = {
                                indice: i,
                                valeur: lTailleCol.valeur,
                                min: Math.max(_CONST_largeurMinColonne, lTailleCol.min ? parseInt(lTailleCol.min + '', 10) : 0),
                                max: lTailleCol.max ? parseInt(lTailleCol.max + '', 10) : 0
                            };
                            lColonnesPourcent.push(lElement);
                            Object.assign(lTaillesColonne[i], lElement, {
                                estPourcent: true
                            });
                            aCache.largeurTotalFixe += lElement.min + 2 * this._options.paddingCelluleLR + 1;
                        } else if (lTailleREM && lTailleREM.estREM) {
                            lTaillesColonne[i].px = lTailleREM.valeurPx;
                            Object.assign(lTaillesColonne[i], lTailleREM);
                            aCache.largeurTotalFixe += lTailleREM.valeurPx + 2 * this._options.paddingCelluleLR + 1;
                        } else {
                            lTaillesColonne[i].px = lTaillePx;
                            aCache.largeurTotalFixe += lTaillePx + 2 * this._options.paddingCelluleLR + 1;
                        }
                    }
                }
                let lTotal = 0;
                lTaillesColonne.forEach( (aCol) => {
                    if (aCol.estPourcent) {
                        aCol.pourcent = Math.floor(aCol.valeur * 100 / lTotalValeurs);
                        lTotal += aCol.pourcent;
                    }
                }
                );
                if (lTotal < 100) {
                    lTaillesColonne.forEach( (aCol) => {
                        if (aCol.estPourcent) {
                            aCol.pourcent += 100 - lTotal;
                            return false;
                        }
                        return true;
                    }
                    );
                }
                aCache.largeurTotalFixe = Math.max(0, aCache.largeurTotalFixe - 1);
                aCache.largeurTotalCalcule = aCache.largeurTotalFixe;
                if (!aCache.largeurPage) {
                    return lTaillesColonne;
                }
                if (aCache.avecPourcentage) {
                    lTailleRestante = aCache.largeurPage - aCache.largeurTotalFixe - this._getDiffLargeurContenu(aPourImpression);
                    lTailleRestante = Math.max(0, lTailleRestante);
                    let lAvecMax = true;
                    while (lAvecMax) {
                        lAvecMax = false;
                        for (i in lColonnesPourcent) {
                            lElement = lColonnesPourcent[i];
                            if (!lElement) {
                                continue;
                            }
                            lTaille = lElement.min + Math.max(0, Math.round(lTailleRestante * lElement.valeur / lTotalValeurs));
                            if (lElement.max && lTaille > lElement.max) {
                                lTaillesColonne[lElement.indice].px = lTaille = lElement.max;
                                lTailleRestante -= lTaille - lElement.min;
                                lTotalValeurs -= lElement.valeur;
                                aCache.largeurTotalCalcule += lTaille - lElement.min;
                                lAvecMax = true;
                                delete lColonnesPourcent[i];
                                break;
                            }
                        }
                    }
                    for (i in lColonnesPourcent) {
                        lElement = lColonnesPourcent[i];
                        if (!lElement) {
                            continue;
                        }
                        lNumeroColonne = lElement.indice;
                        lTaillesColonne[lNumeroColonne].px = lElement.min + Math.max(0, Math.round(lTailleRestante * lElement.valeur / lTotalValeurs));
                        lTailleRestante -= lTaillesColonne[lNumeroColonne].px - lElement.min;
                        lTotalValeurs -= lElement.valeur;
                        aCache.largeurTotalCalcule += lTaillesColonne[lNumeroColonne].px - lElement.min;
                    }
                }
                aCache.largeurBlocFixe = 0;
                aCache.infosZonesColonnes.forEach( (aInfos) => {
                    aInfos.largeurBloc = 0;
                    aInfos.colonnesVisibles.forEach( (aNumeroCol) => {
                        const lTaille = lTaillesColonne[aNumeroCol].px + 2 * this._options.paddingCelluleLR + 1;
                        aInfos.largeurBloc += lTaille;
                        if (aInfos.estBlocFixe) {
                            aCache.largeurBlocFixe += lTaille;
                        }
                    }
                    );
                }
                );
                return lTaillesColonne;
            }
            _getDiffLargeurContenu(aPourImpression) {
                return (aPourImpression ? 0 : this._getLargeurPartieScrollV()) + this._options.borduresContenu_left + this._options.borduresContenu_right + this._options.paddingContenu_LR * 2;
            }
            _calculsPreRendu(aIgnorerCalculTri) {
                const lAvecCalculPreRendu = this._cache.calculsPreRenduAFaire;
                if (lAvecCalculPreRendu) {
                    this._cache.calculsPreRenduAFaire = false;
                    this._gererModificationsColonnes();
                    this._preparerBoutons();
                    this._calculerTailles();
                    this._calculColonnesCachees(this._cache);
                    this._getInfosZonesColonnes(this._cache);
                    this._calculerTitres();
                    this._calculerParametresCreation();
                    if (aIgnorerCalculTri !== true || this._cache.calculTriAFaire) {
                        this._cache.calculTriAFaire = false;
                        this._calculerTri();
                    }
                }
                if (this._cache.calculsTailleColonnesAFaire || lAvecCalculPreRendu) {
                    this._calculerColonnes();
                }
            }
            _actualiser(aParams) {
                const lParams = Object.assign({
                    conserverSelection: false,
                    conserverFocusSelection: false,
                    ignorerFocusListe: true,
                    sansTriDonnees: false,
                    ignorerCalculTri: false,
                    selections: null,
                    instancesIdentiquesSelections: true,
                    avecEvenementSelection: false,
                    avecScrollSelection: false,
                    avecSelectionSurLigneInvisible: false,
                    conserverPositionScroll: true,
                    avecEvenementModificationSelection: true,
                    conserverPositionElement: null
                }, aParams);
                let lZonesActualisation = lParams.zonesActualisation;
                if (this._cache.creationEnCours) {
                    lZonesActualisation = false;
                }
                this._cache.creationEnCours = false;
                this._cache.editionEnCours = false;
                this._cache.editionEnCoursEvenement = false;
                this._cache.positionCreation = 0;
                this._cache.listeValeursCreation = [];
                this._cache.finEditionCreation = null;
                clearTimeout(this._cache.rechercheTexte.timerSaisie);
                this._cache.collectionFuncConstructCellule = {};
                this._nettoyerElementsEditionEnCours();
                if (!ObjetHtml_1.GHtml.elementExiste(this.Nom)) {
                    return;
                }
                let lSelections = null, lIdFocusARestaurer = '', lFocusSurListe;
                if (!lParams.ignorerFocusListe && ObjetHtml_1.GHtml.focusEstDansElement && ObjetHtml_1.GHtml.focusEstDansElement(this.Nom)) {
                    lFocusSurListe = true;
                    lIdFocusARestaurer = this.IdPremierElement;
                }
                let lSelectionsPrecedente = null;
                if (this.Donnees) {
                    this.Donnees.setOptions({
                        nonEditable: this._getNonEditable()
                    });
                    this.Donnees._setParamsListe({
                        avecRechercheTexteEnCours: !this._estRechercheTexteVide()
                    });
                    if (lParams.selections) {
                        lSelections = lParams.selections;
                    } else if (lParams.conserverSelection) {
                        lSelections = this._getCellulesSelection();
                    } else {
                        if (lParams.avecEvenementModificationSelection) {
                            lSelectionsPrecedente = this._getCellulesSelection(true);
                        }
                        this._cache.selectionCellule.ligne = -1;
                        this._cache.selectionCellule.colonne = -1;
                        this._cache.lignesSelectionnees = new Array(this.Donnees.getNbrLignes());
                        this._cache.lignesSelectionnees_prec = [];
                    }
                    if (lParams.sansTriDonnees !== true) {
                        this._trierDonnees();
                    }
                    if (lFocusSurListe && lParams.conserverFocusSelection && this._cache.selectionCellule.ligne >= 0 && this._cache.selectionCellule.colonne >= 0) {
                        lIdFocusARestaurer = this.getIdCellule(this._cache.selectionCellule.colonne, this._cache.selectionCellule.ligne, true);
                    }
                }
                const lBackupScroll = this._backupScroll(lParams);
                this._desabonnementResizeObserver();
                if (!lZonesActualisation) {
                    ObjetHtml_1.GHtml.setHtml(this.Nom, '', {
                        ignorerScroll: true
                    });
                    this._cache.heightConteneur = Math.floor(ObjetPosition_1.GPosition.getClientRect(this.Nom).contentHeight);
                    const lForcerNouveauTri = this.Donnees && this._cache.calculsPreRenduAFaire && lParams.ignorerCalculTri !== true && lParams.sansTriDonnees !== true;
                    this._calculsPreRendu(lParams.ignorerCalculTri);
                    if (lForcerNouveauTri) {
                        this._trierDonnees();
                    }
                }
                let lAvecFiltreRecherche = !lParams.estFiltreRechercheTexte;
                if (lZonesActualisation) {
                    this._actualiserZones(lZonesActualisation, lParams);
                    if (lZonesActualisation.total) {
                        const lJTotalHeader = $(`#${this.Nom.escapeJQ()}${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeTotaleFd}.${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeHeader}`);
                        if (lJTotalHeader.length === 1) {
                            ObjetHtml_1.GHtml.setHtml(lJTotalHeader.get(0), this.construireTotalInterneFD(true, false), {
                                controleur: this.controleur,
                                ignorerScroll: true
                            });
                        }
                        const lJTotalFooter = $(`#${this.Nom.escapeJQ()}${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeTotaleFd}.${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeFooter}`);
                        if (lJTotalFooter.length === 1) {
                            ObjetHtml_1.GHtml.setHtml(lJTotalFooter.get(0), this.construireTotalInterneFD(false, false), {
                                controleur: this.controleur,
                                ignorerScroll: true
                            });
                        }
                    }
                    lAvecFiltreRecherche = lAvecFiltreRecherche && lZonesActualisation.contenu;
                } else {
                    let lCommentaireDebug = '';
                    ObjetHtml_1.GHtml.setHtml(this.Nom, this.construireAffichage(lParams), {
                        controleur: this.controleur,
                        ignorerScroll: true,
                        commentaireHtmlDebug: lCommentaireDebug
                    });
                    this._controleHeightLigne();
                }
                this._refreshContenuDynamique({
                    surInitialisation: true
                });
                if (this._options.piedDeListe && this._options.piedDeListe.getContenu && !lZonesActualisation) {
                    ObjetHtml_1.GHtml.setHtml(this.idPiedDeListe, IE.jsx.str("div", {
                        class: ObjetListeEspaceMobile_css_1.StylesObjetListeEspaceMobile.piedListe,
                        tabindex: "0",
                        style: ObjetStyle_1.GStyle.composeHeight(this._options.piedDeListe.height) + (this.optionsInterne.versionMobile ? '' : ObjetStyle_1.GStyle.composeWidth(this._cache.largeurTotalCalcule + 1))
                    }, this._options.piedDeListe.getContenu()), {
                        controleur: this._options.piedDeListe.controleur || this.controleur,
                        ignorerScroll: true
                    });
                }
                this._setScroll(lBackupScroll);
                this._refreshContenuDynamique({
                    avecBackupScroll: true,
                    refreshRecursif: true,
                    conserverPositionElement: lParams.conserverPositionElement
                });
                this._abonnementResizeObserver();
                if (lIdFocusARestaurer) {
                    if (!ObjetHtml_1.GHtml.elementExiste(lIdFocusARestaurer)) {
                        lIdFocusARestaurer = this.IdPremierElement;
                    }
                    ObjetHtml_1.GHtml.setFocus(lIdFocusARestaurer);
                }
                if (Array.isArray(lSelections)) {
                    this._setCellulesSelection(lSelections, {
                        instancesIdentiques: lParams.instancesIdentiquesSelections,
                        avecEvenement: lParams.avecEvenementSelection,
                        avecScroll: lParams.avecScrollSelection,
                        avecSelectionSurLigneInvisible: lParams.avecSelectionSurLigneInvisible,
                        avecEvenementModificationSelection: lParams.avecEvenementModificationSelection
                    });
                } else if (lParams.avecEvenementModificationSelection && lSelectionsPrecedente && lSelectionsPrecedente.length > 0) {
                    this._surModificationSelectionEvenement(lSelectionsPrecedente);
                }
                if (!this._estRechercheTexteVide() || (lParams.estFiltreRechercheTexte && !lParams.annulerRechercheTexte && !lZonesActualisation)) {
                    this._creerZoneRechercheTexte(!lZonesActualisation);
                } else if (!lParams.estFiltreRechercheTexte || lParams.annulerRechercheTexte) {
                    this._supprimerZoneRechercheTexte();
                }
                if (lAvecFiltreRecherche) {
                    this._filtreRechercheTexte(lParams);
                }
                this._surlignageRechercheTexte();
                this.$refreshSelf();
            }
            _abonnementResizeObserver() {
                this._desabonnementResizeObserver();
                const lListeIdsResizeObs = [];
                this._getTabElementsPourRsizeObserver().forEach( (aElement) => {
                    if (aElement) {
                        lListeIdsResizeObs.push({
                            element: aElement,
                            height: ObjetPosition_1.GPosition.getClientRect(aElement).height
                        });
                    }
                }
                );
                if (lListeIdsResizeObs.length > 0) {
                    this._cache.resizeObserverContenu = new ResizeObserver( (aObservers) => {
                        if (aObservers) {
                            const lAvecActualisation = !lListeIdsResizeObs.every( (aElement, aIndex) => {
                                const lHeight = (aObservers[aIndex] && aObservers[aIndex].contentRect ? (aObservers[aIndex].contentRect.height || 0) : 0);
                                if (lHeight > 0 && (Math.abs(lHeight - aElement.height) > 1)) {
                                    return false;
                                }
                                return true;
                            }
                            );
                            if (lAvecActualisation || this.optionsInterne.versionMobile) {
                                this._cache.positionsCelluleCadreSelection = {};
                                this._actualiserCadreSelection();
                            }
                            if (lAvecActualisation) {
                                this._controleHeightLigne();
                                this._setScroll(this._backupScroll({
                                    conserverPositionScroll: true
                                }), true);
                                if (this._options.callbackResizeObserverContenu) {
                                    this._options.callbackResizeObserverContenu(this);
                                }
                            }
                        }
                    }
                    );
                    lListeIdsResizeObs.forEach( (aElement) => {
                        this._cache.resizeObserverContenu.observe(aElement.element);
                    }
                    );
                }
            }
            _desabonnementResizeObserver() {
                if (this._cache.resizeObserverContenu) {
                    this._cache.resizeObserverContenu.disconnect();
                    this._cache.resizeObserverContenu = null;
                }
            }
            _getHeightCellule(aParamsCellule) {
                return this.Donnees.getHauteurMinCellule(aParamsCellule) || ObjetDonneesListe_1.ObjetDonneesListe.hauteurMinCellule;
            }
            async _afficherMessage(aParamsCellule) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                const LMessage = this.Donnees.getMessage();
                if (LMessage) {
                    await (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                        message: LMessage
                    });
                } else if (this.Donnees.avecEtatSaisie(aParamsCellule)) {
                    this.setEtatSaisie(true);
                }
            }
            surCreationEvenement(I, aParamsSupp) {
                if (this.Donnees) {
                    if (this.Donnees.avecEvenementCreation()) {
                        if (this.Pere && this.Evenement) {
                            const lResult = this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.Creation, I, null, Object.assign({
                                listeValeursCreation: this._cache.listeValeursCreation
                            }, aParamsSupp)), Enumere_EvenementListe_1.EGenreEvenementListe.Creation, I, null);
                            this._refreshSelf();
                            return lResult;
                        }
                    }
                }
            }
            _setOptionEvenementSurTri() {
                if (this._options.evenementSurTri && this._triCourant && this._triCourant.colonne && this._cache.colonnes.listeIds) {
                    const lTabTri = [];
                    for (let i = 0; i < this._triCourant.colonne.length; i++) {
                        lTabTri.push({
                            numero: this._triCourant.colonne[i],
                            id: this._cache.colonnes.listeIds[this._triCourant.colonne[i]],
                            genre: this._triCourant.genre[i]
                        });
                    }
                    this._options.evenementSurTri(lTabTri);
                }
            }
            _construireTri(aInfosZoneColonnes, aNumeroColonne, aIndiceTri) {
                return '';
            }
            async _setColonneTri(aColonne, aGenre, aNumeroTri) {
                const lNumeroTri = aNumeroTri || 0
                  , lNumeroColonne = MethodesObjet_1.MethodesObjet.isString(aColonne) ? this.getNumeroColonneDIdColonne(aColonne) : aColonne
                  , lNumeroAncienTri = this._triCourant.colonne.indexOf(lNumeroColonne);
                if (lNumeroAncienTri >= 0 && lNumeroAncienTri !== lNumeroTri) {
                    this._triCourant.colonne[lNumeroAncienTri] = this._triCourant.colonne[lNumeroTri];
                }
                this._triCourant.genre[lNumeroTri] = (aGenre !== null && aGenre !== undefined) ? aGenre : Enumere_TriElement_1.EGenreTriElement.Croissant;
                this._triCourant.colonne[lNumeroTri] = lNumeroColonne;
                this._setOptionEvenementSurTri();
                this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                    const lJParent = $(`#${this.ids.curseurTri.escapeJQ() + aInfosZoneColonnes.indiceBloc + '_row'}`);
                    lJParent.empty();
                    if (lJParent.length === 1) {
                        aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                            if (this._cache.colonnesTri[aNumeroColonne]) {
                                const lNumeroTriDessin = this._triCourant.colonne.indexOf(aNumeroColonne);
                                const lNode = IEHtml.injectHTMLParams({
                                    element: lJParent.get(0),
                                    html: this._construireTri(aInfosZoneColonnes, aNumeroColonne, lNumeroTriDessin),
                                    controleur: this.controleur
                                });
                                if (lNode && lNumeroTri === lNumeroTriDessin && aInfosZoneColonnes.gabaritColonnesTitre[aNumeroColonne]) {
                                    lNode.focus();
                                }
                            }
                        }
                        );
                    }
                }
                );
                await new Promise( (aResolve) => {
                    setTimeout(aResolve, 0);
                }
                );
                this._actualiser({
                    conserverSelection: true,
                    sansTriDonnees: false,
                    ignorerCalculTri: true,
                    zonesActualisation: {
                        contenu: true
                    }
                });
            }
            _extraireInfosId(aId) {
                if (!aId) {
                    return false;
                }
                const lInfos = {};
                const lIds = aId.split('_');
                if (lIds[lIds.length - 1] === 'div') {
                    lInfos.ligne = parseInt(lIds[lIds.length - 2], 10);
                    lInfos.colonne = parseInt(lIds[lIds.length - 3], 10);
                } else {
                    lInfos.ligne = parseInt(lIds[lIds.length - 1], 10);
                    lInfos.colonne = parseInt(lIds[lIds.length - 2], 10);
                }
                return lInfos;
            }
            _focusSuivant(AId, AOrientation, ADirection) {
                const LIdSuivant = this.getIdNavigationSuivant(AId, AOrientation, ADirection);
                if (LIdSuivant) {
                    ObjetHtml_1.GHtml.setFocus(LIdSuivant);
                    if (this.Donnees.options.avecSelectionSurNavigationClavier) {
                        const lInfos = this._extraireInfosId(LIdSuivant);
                        if (lInfos) {
                            this.selectionnerCellule({
                                ligne: lInfos.ligne,
                                colonne: lInfos.colonne,
                                deselectionnerTout: true,
                                selectionner: true,
                                avecEvenement: true
                            });
                        }
                    }
                }
            }
            _evenementMenuContextuel(aParametres, aLigne) {
                const lParametres = Object.assign({
                    ligneMenu: aLigne,
                    numeroMenu: aLigne ? aLigne.getNumero() : -1,
                    avecActualisation: true
                }, aParametres);
                if (aLigne) {
                    switch (aLigne.getNumero()) {
                    case Enumere_CommandeMenu_1.EGenreCommandeMenu.Creation:
                        if (this._avecLigneCreationUnique) {
                            const LId = this._getIdCreation(-1, -1);
                            ObjetHtml_1.GHtml.setDisplay(LId + '_Creation', false);
                            ObjetHtml_1.GHtml.setDisplay(LId + '_Creation_Edit', true);
                        }
                        this._cache.positionCreation = 0;
                        this.surCreationDeb(false, {
                            origine: 'menucontextuel'
                        });
                        if (aLigne.data) {
                            if (this._cache.listeValeursCreation) {
                                this._cache.listeValeursCreation.data = aLigne.data;
                            }
                        }
                        break;
                    case Enumere_CommandeMenu_1.EGenreCommandeMenu.Edition:
                        this.surEditionDeb(lParametres.colonne, lParametres.ligne);
                        break;
                    case Enumere_CommandeMenu_1.EGenreCommandeMenu.Suppression:
                        this._surSuppression();
                        break;
                    default:
                        {
                            this.Donnees.evenementMenuContextuel(lParametres);
                            if (lParametres.avecActualisation) {
                                this._actualiser({
                                    conserverSelection: true,
                                    zonesActualisation: {
                                        contenu: true,
                                        total: true
                                    }
                                });
                            }
                        }
                    }
                }
            }
            surSelectionEvenement(I, J, aSurClavier, aSurInteractionUtilisateur) {
                const lParams = this._getParamsCellule(I, J);
                if (this.Donnees && (J > -1)) {
                    if (this.Donnees.avecEvenementSelection(lParams)) {
                        if (this.Pere && this.Evenement) {
                            this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.Selection, I, J, {
                                surClavier: aSurClavier,
                                surInteractionUtilisateur: aSurInteractionUtilisateur !== false
                            }), Enumere_EvenementListe_1.EGenreEvenementListe.Selection, I, J);
                        }
                    }
                }
                this._refreshSelf();
                return true;
            }
            _surModificationSelectionEvenement(aSelectionsAncienne, aSurInteractionUtilisateur) {
                if (!this.Donnees || !this.Donnees.options.avecEvnt_ModificationSelection) {
                    return false;
                }
                const lSelectionCourante = this._getCellulesSelection();
                if (aSelectionsAncienne && lSelectionCourante && aSelectionsAncienne.length === lSelectionCourante.length) {
                    const lIdentique = lSelectionCourante.every( (aSelection, aIndex) => {
                        const lSelection = aSelectionsAncienne[aIndex];
                        return aSelection.ligne === lSelection.ligne && aSelection.article === lSelection.article && MethodesObjet_1.MethodesObjet.objetsIdentiques(aSelection.colonnes, lSelection.colonnes);
                    }
                    );
                    if (lIdentique) {
                        return false;
                    }
                }
                if (this.Pere && this.Evenement) {
                    this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.ModificationSelection, -1, -1, {
                        cellulesSelection: lSelectionCourante,
                        surInteractionUtilisateur: !!aSurInteractionUtilisateur
                    }), Enumere_EvenementListe_1.EGenreEvenementListe.ModificationSelection, -1, -1);
                    this._refreshSelf();
                    return true;
                }
                return false;
            }
            _refreshSelf() {
                if (this.Pere && this.Pere instanceof ObjetIdentite_1.Identite && this.Pere.$refresh) {
                    this.Pere.$refresh();
                } else {
                    this.$refreshSelf();
                }
            }
            surSuppressionEvenement(aParams) {
                let lResult = false;
                if (this.Donnees && (aParams.ligne > -1 || (aParams.listeSuppressions && aParams.listeSuppressions.count() > 0))) {
                    if (this.estDonneeListeFlatDesign(this.Donnees)) {
                        return false;
                    }
                    if (this.Donnees.avecEvenementSuppression(aParams)) {
                        if (this.Pere && this.Evenement) {
                            lResult = true;
                            this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.Suppression, aParams.colonne, aParams.ligne, aParams), Enumere_EvenementListe_1.EGenreEvenementListe.Suppression, aParams.colonne, aParams.ligne);
                        }
                    }
                }
                this._refreshSelf();
                return lResult;
            }
            surApresCreationEvenement(aLigne) {
                if (!this.Donnees) {
                    return;
                }
                const lParams = this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.ApresCreation, null, aLigne);
                if (this.Donnees.avecEvenementApresCreation()) {
                    if (this.Pere && this.Evenement) {
                        const lResult = this.callback.appel(lParams, Enumere_EvenementListe_1.EGenreEvenementListe.ApresCreation, null, null);
                        this._refreshSelf();
                        return lResult;
                    }
                }
            }
            surApresErreurCreationEvenement() {
                if (this.Donnees) {
                    if (this.Donnees.avecEvenementApresErreurCreation()) {
                        if (this.Pere && this.Evenement) {
                            const lResult = this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.ApresErreurCreation, null, null), Enumere_EvenementListe_1.EGenreEvenementListe.ApresErreurCreation, null, null);
                            this._refreshSelf();
                            return lResult;
                        }
                    }
                }
            }
            surApresEditionEvenement(aParams) {
                if (this.Donnees) {
                    if (this.estDonneeListeFlatDesign(this.Donnees)) {
                        return;
                    }
                    if (this.Donnees.avecEvenementApresEdition(aParams)) {
                        if (this.Pere && this.Evenement) {
                            this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.ApresEdition, aParams.colonne, aParams.ligne, {
                                avecModification: !!aParams.avecModification
                            }), Enumere_EvenementListe_1.EGenreEvenementListe.ApresEdition, aParams.colonne, aParams.ligne);
                        }
                    }
                }
                this._refreshSelf();
                return true;
            }
            surApresSuppressionEvenement(aParams) {
                if (this.Donnees) {
                    if (this.estDonneeListeFlatDesign(this.Donnees)) {
                        return;
                    }
                    if (this.Donnees.avecEvenementApresSuppression()) {
                        if (this.Pere && this.Evenement) {
                            this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.ApresSuppression, aParams.colonne, aParams.ligne, aParams), Enumere_EvenementListe_1.EGenreEvenementListe.ApresSuppression, aParams.colonne, aParams.ligne);
                        }
                    }
                }
                this._refreshSelf();
            }
            entrerEdition() {
                this._nettoyerElementsEditionEnCours();
                this._setStyleCellule(this.IdCellule, null, null, false, true);
            }
            _getMapHTMLControleTexte(aParams) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                const lControle = this.Donnees.getControleCaracteresInput(aParams);
                let lResult = {};
                if (lControle && lControle.mask) {
                    lResult['ie-mask'] = '/[^' + lControle.mask + ']/i';
                }
                if (lControle && lControle.tailleMax > 0 && lControle.tailleMax < this._options.maxLengthTextareaIgnore) {
                    lResult.maxlength = lControle.tailleMax;
                }
                if (!lResult.maxlength && IEHtml.MAX_LENGTH_Default > 0 && this.Donnees._getTailleTexteMax(aParams) > IEHtml.MAX_LENGTH_Default) {
                    lResult.maxlength = 0;
                }
                return lResult;
            }
            _toString(aValeur) {
                return aValeur + '';
            }
            async _setValueModel(aParams) {
                const lParams = Object.assign({
                    node: null,
                    ligne: -1,
                    colonne: -1,
                    surCreation: false,
                    value: '',
                    estNote: false
                }, aParams);
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                this._cache.avecModificationSaisie = true;
                if (this._fenetreInformationAffichee) {
                    return;
                }
                if (lParams.surCreation) {
                    if (this._messageEnCoursSurCreation) {
                        return;
                    }
                    if (!this._cache.creationEnCours) {
                        return;
                    }
                    lParams.colonne = this._cache.numeroColonneCreationEnCours;
                    lParams.ligne = -1;
                } else {
                    if (!this._cache.editionEnCours) {
                        return;
                    }
                }
                if (lParams.estNote) {
                    this._valeurEnEdition = lParams.value;
                    return;
                }
                this._valeurEnEdition = this._toString(lParams.value);
                const lParamsCellule = this._getParamsCellule(lParams.colonne, lParams.ligne, {
                    surEdition: true,
                    surLigneCreation: lParams.surCreation,
                    surInputSaisie: true
                });
                const lControle = ObjetChaine_1.GChaine.controleTailleTexte({
                    chaine: this._valeurEnEdition,
                    tailleTexteMax: this.Donnees._getTailleTexteMax(lParamsCellule)
                });
                if (!lControle.controleOK) {
                    this._valeurEnEdition = lControle.chaine;
                    this._fenetreInformationAffichee = true;
                    await (0,
                    AccessApp_1.getApp)().getMessage().afficher({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                        message: this.Donnees.getMessageTailleMaximaleSaisie()
                    });
                    this._fenetreInformationAffichee = false;
                    ObjetHtml_1.GHtml.setFocus(lParams.node);
                }
            }
            getIndiceColonneVisibleDeColonne(aColonne) {
                let lNumeroColonneVisible = 0;
                for (const lInfo of this._cache.infosZonesColonnes) {
                    for (const lNumeroColonne of lInfo.colonnesVisibles) {
                        lNumeroColonneVisible += 1;
                        if (lNumeroColonne === aColonne) {
                            return lNumeroColonneVisible;
                        }
                    }
                }
                return lNumeroColonneVisible || 1;
            }
            getAriaLabelInputEdition(aParamsCellule, aSurLigneCreation) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return '';
                }
                let lAriaLabel = this.Donnees.getWAIInputEdition(aParamsCellule);
                if (lAriaLabel.trim() !== '') {
                    lAriaLabel += ' ';
                }
                if (!aSurLigneCreation) {
                    const lIndexLigne = this._cache.lignesVisibles.indexOf(aParamsCellule.ligne);
                    lAriaLabel += `${GlossaireWAI_1.TradGlossaireWAI.ligne} ${lIndexLigne >= 0 ? lIndexLigne + 1 : aParamsCellule.colonne} ${GlossaireWAI_1.TradGlossaireWAI.colonne} ${this.getIndiceColonneVisibleDeColonne(aParamsCellule.colonne)}`;
                }
                return lAriaLabel;
            }
            entrerTexte(aColonne, aLigne, aSurLigneCreation, aTypeCellule, aIgnorerEventsNode, aForcerEnFenetre) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                const lParamsCellule = this._getParamsCellule(aColonne, aLigne, {
                    surEdition: true,
                    surLigneCreation: aSurLigneCreation,
                    surInputSaisie: true
                });
                let LValeur = this.Donnees._getValeur(lParamsCellule)
                  , lClass = '';
                const lEstNote = aTypeCellule === ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Note;
                if (!lEstNote) {
                    LValeur = this._toString(LValeur);
                }
                this._valeurEnEdition = LValeur;
                try {
                    lClass = this.Donnees.getClass(lParamsCellule);
                } catch (e) {
                    lClass = '';
                }
                const lEditionEnFenetre = aForcerEnFenetre || (this.optionsInterne.versionMobile && aSurLigneCreation);
                const lIgnorerEventsNode = lEditionEnFenetre ? true : aIgnorerEventsNode;
                const H = [];
                const lMapAttr = Object.assign({
                    id: this.IdEdition,
                    class: ['Texte10 Liste_Input_Texte', (lClass || ''), lEditionEnFenetre ? 'full-width' : ''],
                    style: {
                        border: lEditionEnFenetre ? null : '0px',
                        minWidth: aSurLigneCreation ? '4rem' : null
                    },
                    'ie-model': this.jsxModeleSaisieTexte.bind(this, this, lParamsCellule, lEstNote, false, lIgnorerEventsNode),
                    'aria-label': this.getAriaLabelInputEdition(lParamsCellule, aSurLigneCreation),
                    autocomplete: lEstNote ? 'off' : false,
                    autocorrect: lEstNote ? 'off' : false,
                    autocapitalize: lEstNote ? 'off' : false,
                    spellcheck: lEstNote ? 'false' : false
                }, this._getMapHTMLControleTexte(lParamsCellule));
                const lHtmlInput = lEstNote ? IE.jsx.str("ie-inputnote", Object.assign({}, lMapAttr)) : IE.jsx.str("input", Object.assign({}, lMapAttr));
                if (lEditionEnFenetre) {
                    this.surEditionTextFenetreAsync({
                        html: lHtmlInput,
                        surCreation: aSurLigneCreation,
                        surInputText: true,
                        colonne: aColonne
                    });
                    return;
                }
                const lHeightCellule = $('#' + this.IdCellule.escapeJQ()).height();
                const lHeight = this._getHeightCellule(lParamsCellule) - 2 * this._options.paddingCelluleTB;
                if (this.optionsInterne.versionMobile) {
                    H.push(IE.jsx.str("div", {
                        style: lHeightCellule ? 'height:' + lHeightCellule + 'px; line-height:' + lHeightCellule + 'px;' : ''
                    }, lHtmlInput));
                } else {
                    H.push(IE.jsx.str("div", {
                        style: `width: 100%; height:${lHeightCellule}px; line-height:${Math.min(lHeight, lHeightCellule)}px;`
                    }, lHtmlInput));
                }
                ObjetHtml_1.GHtml.setHtml(this.IdCellule, H.join(''), {
                    instance: this
                });
            }
            _getInfosZoneColonneDeNumeroColonne(aNumeroColonne) {
                let lInfosZone = null;
                this._cache.infosZonesColonnes.every( (aZone) => {
                    if (aNumeroColonne >= aZone.indiceColonneDebut && aNumeroColonne <= aZone.indiceColonneFin) {
                        lInfosZone = aZone;
                        return false;
                    }
                    return true;
                }
                );
                return lInfosZone || this._cache.infosZonesColonnes[this._cache.infosZonesColonnes.length - 1];
            }
            afficherMarqueurEditionSurCellule(aColonne, aLigne) {
                if (this._options.skin === ObjetListe.skin.flatDesign) {
                    return;
                }
                const lJConteneur = $('#' + this.ids.zoneFils.escapeJQ());
                $('#' + this.ids.surligneur_edition.escapeJQ()).remove();
                const lFunc = () => {
                    const lRectCellule = ObjetPosition_1.GPosition.getClientRect(this.getIdCellule(aColonne, aLigne));
                    const lRectContenur = ObjetPosition_1.GPosition.getClientRect(this.ids.zoneFils);
                    const lInfosZone = this._getInfosZoneColonneDeNumeroColonne(aColonne);
                    const lPremiereColonneBlocFixeDroite = lInfosZone.estBlocFixeDroite && aColonne === lInfosZone.indiceColonneDebut;
                    const lPos = {
                        top: lRectCellule.top - lRectContenur.top - 2,
                        left: lRectCellule.left + (lPremiereColonneBlocFixeDroite ? 1 : 0) - lRectContenur.left - 2,
                        height: lRectCellule.height + 3,
                        width: lRectCellule.width + 3
                    };
                    if (lPos.left + lPos.width > lRectContenur.width) {
                        lPos.width = Math.max(1, lPos.width - (lPos.left + lPos.width - lRectContenur.width + 2));
                    }
                    return lPos;
                }
                ;
                const lPos = lFunc();
                lJConteneur.ieHtmlAppend(IE.jsx.str("div", {
                    id: this.ids.surligneur_edition,
                    class: ObjetListeEspaceMobile_css_1.StylesObjetListeEspaceMobile.liste_surligneur_edition,
                    style: {
                        width: lPos.width,
                        height: lPos.height,
                        top: lPos.top,
                        left: lPos.left
                    }
                }));
                $('#' + this.ids.surligneur_edition.escapeJQ()).data('positionnement', {
                    func: () => {
                        const lPos = lFunc();
                        $('#' + this.ids.surligneur_edition.escapeJQ()).css({
                            left: lPos.left,
                            top: lPos.top
                        });
                    }
                });
            }
            entrerZoneTexte(aColonne, aLigne, aSurLigneCreation, aNumeroLigneCreation, aIgnorerEventsNode, aForcerEnFenetre) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                const lParamsCellule = this._getParamsCellule(aColonne, aLigne, {
                    surEdition: true,
                    surLigneCreation: aSurLigneCreation,
                    surInputSaisie: true,
                    numeroLigneCreation: aNumeroLigneCreation
                });
                this._valeurEnEdition = this._toString(this.Donnees._getValeur(lParamsCellule));
                let lTailleMax = 0;
                const lControle = this.Donnees.getControleCaracteresInput(lParamsCellule);
                if (lControle) {
                    lTailleMax = lControle.tailleMax || 0;
                }
                if (lTailleMax === 0 || !MethodesObjet_1.MethodesObjet.isNumber(lControle.tailleMax)) {
                    lTailleMax = this.Donnees._getTailleTexteMax(lParamsCellule) || 0;
                }
                if (lTailleMax >= this._options.maxLengthTextareaIgnore || !MethodesObjet_1.MethodesObjet.isNumber(lTailleMax)) {
                    lTailleMax = 0;
                }
                const lEditionEnFenetre = aForcerEnFenetre || this.optionsInterne.versionMobile;
                const lIgnorerEventsNode = this.optionsInterne.versionMobile || lEditionEnFenetre ? true : aIgnorerEventsNode;
                const T = [];
                T.push(IE.jsx.str("ie-textareamax", Object.assign({
                    id: this.IdEdition,
                    "ie-autoresize": lEditionEnFenetre,
                    class: "liste_textarea",
                    "ie-model": this.jsxModeleSaisieTexte.bind(this, this, lParamsCellule, false, true, lIgnorerEventsNode)
                }, this._getMapHTMLControleTexte(lParamsCellule), {
                    "ie-compteurmax": lTailleMax > 0 ? lTailleMax : false,
                    "aria-label": this.getAriaLabelInputEdition(lParamsCellule, aSurLigneCreation)
                })));
                const lInfosZone = this._getInfosZoneColonneDeNumeroColonne(aColonne)
                  , lPremiereColonneBlocFixeDroite = lInfosZone.estBlocFixeDroite && aColonne === lInfosZone.indiceColonneDebut
                  , lEstLigneCreationTitre = aSurLigneCreation && !(aNumeroLigneCreation >= 0);
                if (lEditionEnFenetre) {
                    this.surEditionTextFenetreAsync({
                        html: T.join(''),
                        surCreation: aSurLigneCreation,
                        colonne: aColonne
                    });
                    return;
                }
                const lOffset = $('#' + this.IdCellule.escapeJQ()).offset();
                const lJConteneur = $('#' + this.ids.zoneFils.escapeJQ());
                const lOffsetConteneur = lJConteneur.offset();
                const lHeightConteneur = lJConteneur.height();
                const lPositionnement = {
                    width: ObjetPosition_1.GPosition.getWidth(this.IdCellule) + (lInfosZone.dernierBloc && aColonne === lInfosZone.indiceColonneFin ? 1 : 0) + (lPremiereColonneBlocFixeDroite ? -1 : 0),
                    height: Math.max(Math.min(100, lHeightConteneur), ObjetPosition_1.GPosition.getHeight(this.IdCellule) + 1),
                    left: lOffset.left - 1 + (lPremiereColonneBlocFixeDroite ? 1 : 0) - lOffsetConteneur.left,
                    top: lOffset.top + (lEstLigneCreationTitre ? 0 : -1) - lOffsetConteneur.top
                };
                if (lOffset.top - lOffsetConteneur.top + lPositionnement.height >= lHeightConteneur) {
                    lPositionnement.top = Math.max(0, lPositionnement.top - (lOffset.top - lOffsetConteneur.top + lPositionnement.height - lHeightConteneur));
                }
                lJConteneur.ieHtmlAppend(['<div id="' + this.IdZoneTexte + '" class="liste_saisie_textarea" style="', ObjetStyle_1.GStyle.composeWidth(lPositionnement.width), ObjetStyle_1.GStyle.composeHeight(lPositionnement.height), 'top:' + lPositionnement.top + 'px;', 'left:' + lPositionnement.left + 'px;', '">' + T.join('') + '</div>'].join(''), {
                    controleur: this.controleur
                });
            }
            _nettoyerElementsEditionEnCours() {
                $('#' + this.IdZoneTexte.escapeJQ()).remove();
                $('#' + this.ids.surligneur_edition.escapeJQ()).remove();
            }
            _surSelection(aNumeroColonne, aNumeroLigne, aParams) {
                if (this._cache.creationEnCours || this._cache.editionEnCours) {
                    return false;
                }
                if (!this.Donnees) {
                    return false;
                }
                const lParams = Object.assign({
                    avecFocus: true,
                    forcerMonoSelection: false,
                    ctrlKey: false,
                    shiftKey: false,
                    avecEvenementModificationSelection: true,
                    surInteractionUtilisateur: false
                }, aParams);
                this._cache.lignesSelectionnees_prec = [...this._cache.lignesSelectionnees];
                const lSelections = lParams.avecEvenementModificationSelection ? this._getCellulesSelection(true) : null;
                let iLigne, iColonne;
                const lAvecMultiSelection = this.Donnees.avecMultiSelection() && !lParams.forcerMonoSelection
                  , lEstSelectionParCellule = this._estSelectionParCellule(aNumeroLigne, aNumeroColonne)
                  , lMultiSelectionCtrl = lAvecMultiSelection && (!this.Donnees.avecMultiSelectionSurCtrl() || lParams.ctrlKey)
                  , lMultiSelectionShift = lAvecMultiSelection && (!this.Donnees.avecMultiSelectionSurShift() || lParams.shiftKey);
                if (!lMultiSelectionCtrl && !lMultiSelectionShift) {
                    const lParamsCellule = this._getParamsCellule(aNumeroColonne, aNumeroLigne);
                    if (this._etatSelectionCellule({
                        ligne: aNumeroLigne,
                        colonne: aNumeroColonne,
                        cacheSelection: this._cache.lignesSelectionnees_prec
                    }) && this.Donnees._avecDeselection(lParamsCellule) && !lAvecMultiSelection && (lParams.ctrlKey || this.Donnees.options.avecDeselectionMonoSelectionClick)) {
                        this._selectionner({
                            deselectionnerTout: true,
                            selectionner: false,
                            avecEvenementModificationSelection: true
                        });
                        this._cache.selectionCellule.ligne = -1;
                        this._cache.selectionCellule.colonne = -1;
                        this.Donnees._surSelection(aNumeroLigne, aNumeroColonne, false);
                        return;
                    }
                    if (aNumeroColonne === this._cache.selectionCellule.colonne && aNumeroLigne === this._cache.selectionCellule.ligne && !lAvecMultiSelection && this._etatSelectionCellule({
                        ligne: aNumeroLigne,
                        colonne: aNumeroColonne
                    })) {
                        return;
                    }
                    this._cache.selectionCellule.ligne = aNumeroLigne;
                    this._cache.selectionCellule.colonne = aNumeroColonne;
                    this._selectionner({
                        ligne: aNumeroLigne,
                        colonne: aNumeroColonne,
                        deselectionnerTout: true,
                        selectionner: true,
                        _avecVisuCadreSelection: false
                    });
                } else if (lMultiSelectionShift) {
                    if (!this._cache.celluleClicNonShift || this._cache.celluleClicNonShift.ligne < 0 || this._cache.celluleClicNonShift.colonne < 0) {
                        return;
                    }
                    const lMinLigne = Math.min(aNumeroLigne, this._cache.celluleClicNonShift.ligne)
                      , lMaxLigne = Math.max(aNumeroLigne, this._cache.celluleClicNonShift.ligne);
                    if (lEstSelectionParCellule) {
                        const lMinColonne = Math.min(aNumeroColonne, this._cache.celluleClicNonShift.colonne)
                          , lMaxColonne = Math.max(aNumeroColonne, this._cache.celluleClicNonShift.colonne);
                        for (iLigne = 0; iLigne < this._cache.lignesSelectionnees.length; iLigne++) {
                            for (iColonne = 0; iColonne < this.ListeTailles.length; iColonne++) {
                                const lParamsCellule = this._getParamsCellule(iColonne, iLigne);
                                if (iColonne >= lMinColonne && iColonne <= lMaxColonne && iLigne >= lMinLigne && iLigne <= lMaxLigne && this._estLigneVisible(iLigne, {
                                    contexteSelection: true
                                })) {
                                    if (!this._etatSelectionCellule({
                                        ligne: iLigne,
                                        colonne: iColonne
                                    })) {
                                        this._selectionner({
                                            ligne: iLigne,
                                            colonne: iColonne,
                                            selectionner: true,
                                            _avecVisuCadreSelection: false
                                        });
                                    }
                                } else if (this._etatSelectionCellule({
                                    ligne: iLigne,
                                    colonne: iColonne
                                }) && this.Donnees._avecDeselection(lParamsCellule)) {
                                    this._selectionner({
                                        ligne: iLigne,
                                        colonne: iColonne,
                                        selectionner: false,
                                        _avecVisuCadreSelection: false
                                    });
                                }
                            }
                        }
                    } else {
                        for (iLigne = 0; iLigne < this._cache.lignesSelectionnees.length; iLigne++) {
                            const lParamsCellule = this._getParamsCellule(aNumeroColonne, iLigne);
                            if (iLigne >= lMinLigne && iLigne <= lMaxLigne && this._estLigneVisible(iLigne, {
                                contexteSelection: true
                            })) {
                                this._selectionner({
                                    ligne: iLigne,
                                    selectionner: true,
                                    _avecVisuCadreSelection: false
                                });
                            } else if (this._etatSelectionCellule({
                                ligne: iLigne
                            }) && this.Donnees._avecDeselection(lParamsCellule)) {
                                this._selectionner({
                                    ligne: iLigne,
                                    selectionner: false,
                                    _avecVisuCadreSelection: false
                                });
                            }
                        }
                    }
                } else if (lMultiSelectionCtrl) {
                    const lNumeroColonneTraite = lEstSelectionParCellule ? aNumeroColonne : -1;
                    if (this._etatSelectionCellule({
                        ligne: aNumeroLigne,
                        colonne: lNumeroColonneTraite
                    })) {
                        this._selectionner({
                            ligne: aNumeroLigne,
                            colonne: aNumeroColonne,
                            selectionner: false,
                            _avecVisuCadreSelection: false
                        });
                        this._cache.selectionCellule.ligne = -1;
                        this._cache.selectionCellule.colonne = -1;
                    } else {
                        this._selectionner({
                            ligne: aNumeroLigne,
                            colonne: aNumeroColonne,
                            selectionner: true,
                            _avecVisuCadreSelection: false
                        });
                        this._cache.selectionCellule.ligne = aNumeroLigne;
                        this._cache.selectionCellule.colonne = aNumeroColonne;
                    }
                }
                this._actualiserCadreSelection();
                if (lParams.avecFocus) {
                    const lNumeroColonne = aNumeroColonne > -1 ? aNumeroColonne : 0;
                    if (this._estLigneDansRangeNonConstruitDyn(aNumeroLigne)) {
                        this._scrollSurLigne({
                            ligne: aNumeroLigne,
                            colonne: lNumeroColonne
                        });
                    }
                    ObjetHtml_1.GHtml.setFocus(this.getIdCellule(lNumeroColonne, aNumeroLigne, true));
                }
                this.Donnees._surSelection(this._cache.selectionCellule.colonne, this._cache.selectionCellule.ligne, true);
                if (lParams.avecEvenementModificationSelection) {
                    this._surModificationSelectionEvenement(lSelections, lParams.surInteractionUtilisateur);
                }
                return true;
            }
            _celluleAvecBordureDroite(aEstDerniereColonne) {
                return !aEstDerniereColonne && this._options.borduresCellule_horizontal > 0;
            }
            _getFusionColonnesCellule(aParametres) {
                const lFusion = {};
                let lHash = {};
                let lNumeroColonneFusionEnCoursPrec = null, lParamsCellule, lDerniereColonne, lNumeroColonneFusion, lNumeroColonneReferenceFusion = aParametres.colonnesVisibles[0];
                const lTailles = aParametres.tailles || this._cache.taillesColonne;
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                aParametres.colonnesVisibles.forEach( (aNumeroColonne) => {
                    lNumeroColonneFusion = aNumeroColonne;
                    if (this._options.skin !== ObjetListe.skin.flatDesign) {
                        if (aParametres.total) {
                            lParamsCellule = aParametres.getParamsCellule(aNumeroColonne);
                        } else {
                            lParamsCellule = this._getParamsCellule(aNumeroColonne, aParametres.ligne, {
                                colonnesVisibles: aParametres.colonnesVisibles
                            });
                        }
                        if (lDonneesTableau) {
                            if (aParametres.total) {
                                lNumeroColonneFusion = lDonneesTableau.getColonneDeFusionTotal(lParamsCellule);
                            } else {
                                lNumeroColonneFusion = lDonneesTableau.getColonneDeFusion(lParamsCellule);
                            }
                        }
                        if (lNumeroColonneFusion === undefined || lNumeroColonneFusion === null) {
                            lNumeroColonneFusion = aNumeroColonne;
                        } else if (MethodesObjet_1.MethodesObjet.isString(lNumeroColonneFusion)) {
                            lNumeroColonneFusion = this.getNumeroColonneDIdColonne(lNumeroColonneFusion);
                        } else if (!MethodesObjet_1.MethodesObjet.isNumber(lNumeroColonneFusion)) {
                            lNumeroColonneFusion = aNumeroColonne;
                        }
                        if (lNumeroColonneFusion !== aNumeroColonne && !this._estColonneVisible(lNumeroColonneFusion)) {
                            IE.log.addLog('[_getFusionColonnesCellule] la colonne de fusion est invisible');
                            lNumeroColonneFusion = aNumeroColonne;
                        }
                        if (lNumeroColonneFusion !== aNumeroColonne && (lNumeroColonneFusion > aParametres.indiceColonneFin || lNumeroColonneFusion < aParametres.indiceColonneDebut)) {
                            IE.log.addLog('[_getFusionColonnesCellule] la colonne de fusion est hors du bloc');
                            lNumeroColonneFusion = lNumeroColonneFusion > aParametres.indiceColonneFin ? aParametres.indiceColonneFin : aParametres.indiceColonneDebut;
                        }
                    }
                    if (lNumeroColonneFusionEnCoursPrec !== null && lNumeroColonneFusion < lNumeroColonneFusionEnCoursPrec) {
                        IE.log.addLog('[_getFusionColonnesCellule] erreur getColonneDeFusion sur colonne ' + aNumeroColonne);
                        Object.keys(lHash).forEach( (aCle) => {
                            if (lHash[aCle] === lNumeroColonneFusionEnCoursPrec) {
                                lHash[aCle] = parseInt(aCle, 10);
                            }
                        }
                        );
                    }
                    if (lNumeroColonneFusion === aNumeroColonne && aNumeroColonne > 0 && !aParametres.total && lDonneesTableau && lDonneesTableau.fusionCelluleAvecColonnePrecedente(lParamsCellule)) {
                        lNumeroColonneFusion = lNumeroColonneReferenceFusion;
                    } else {
                        lNumeroColonneReferenceFusion = aNumeroColonne;
                    }
                    lHash[aNumeroColonne] = lNumeroColonneFusion;
                    lNumeroColonneFusionEnCoursPrec = lNumeroColonneFusion;
                }
                );
                aParametres.colonnesVisibles.forEach( (aNumeroColonne) => {
                    const lColPrimaire = lHash[aNumeroColonne];
                    if (!lFusion[lColPrimaire]) {
                        lFusion[lColPrimaire] = {
                            nbCol: 0,
                            taille: parseInt(lTailles[lColPrimaire].px + '', 10),
                            debut: lColPrimaire,
                            fin: lColPrimaire,
                            indexCols: [lColPrimaire]
                        };
                    }
                    lFusion[lColPrimaire].nbCol += 1;
                    if (lColPrimaire !== aNumeroColonne) {
                        lDerniereColonne = aParametres.indiceColonneFin === aNumeroColonne && aParametres.dernierBloc;
                        lFusion[lColPrimaire].taille += parseInt(lTailles[aNumeroColonne].px + '', 10) + 2 * this._options.paddingCelluleLR + (this._celluleAvecBordureDroite(lDerniereColonne) ? 1 : 0);
                        lFusion[lColPrimaire].debut = Math.min(aNumeroColonne, lFusion[lColPrimaire].debut);
                        lFusion[lColPrimaire].fin = Math.max(aNumeroColonne, lFusion[lColPrimaire].fin);
                        lFusion[lColPrimaire].indexCols.push(aNumeroColonne);
                    }
                }
                );
                return lFusion;
            }
            setCadreSelectionInterne(aParams, aArrayTraitements) {
                if (!aParams.selection && (!aParams.posCellulePrec || !aParams.posCellulePrec.selection)) {
                    return;
                }
                const lElement = ObjetHtml_1.GHtml.getElement(aParams.idCellule);
                if (lElement) {
                    this._setStyleCellule(lElement, aParams.colonne, aParams.ligne, aParams.selection);
                }
                let lNumeroColonne;
                const lIdSelecCellule = this.ids.cadreSelection + '_sel_' + aParams.ligne + '_' + aParams.colonne;
                let lPositionCache = this._cache.positionsCelluleCadreSelection[aParams.ligne] ? this._cache.positionsCelluleCadreSelection[aParams.ligne][aParams.colonne] : null;
                if (aParams.selection) {
                    if (!this._cache.positionsCelluleCadreSelection[aParams.ligne]) {
                        this._cache.positionsCelluleCadreSelection[aParams.ligne] = {};
                    }
                    if (!this._cache.positionsCelluleCadreSelection[aParams.ligne][aParams.colonne]) {
                        let lParamsCellule;
                        try {
                            const lIndexLigne = this._cache.lignesVisibles.indexOf(aParams.ligne);
                            lParamsCellule = this._getParamsCellule(aParams.colonne, aParams.ligne, {
                                celluleLignePrecedente: lIndexLigne > 0 ? this._getParamsCellule(aParams.colonne, this._cache.lignesVisibles[lIndexLigne - 1]) : null,
                                celluleLigneSuivante: lIndexLigne >= 0 && lIndexLigne + 1 < this._cache.lignesVisibles.length ? this._getParamsCellule(aParams.colonne, this._cache.lignesVisibles[lIndexLigne + 1]) : null
                            });
                        } catch (e) {
                            lParamsCellule = null;
                        }
                        let lModifHeight = 0;
                        const lNode = ObjetHtml_1.GHtml.getElement(aParams.idCellule);
                        if (!lNode) {
                            $('#' + lIdSelecCellule.escapeJQ()).remove();
                            return;
                        }
                        if (!this.optionsInterne.versionMobile) {
                            if (this.Donnees && this._options.borduresCellule_vertical > 0 && lParamsCellule && this.estDonneeListeTableau(this.Donnees) && !this.Donnees.avecBordureBas(lParamsCellule)) {
                                lModifHeight += this._options.borduresCellule_vertical;
                            } else {
                                lModifHeight = ObjetStyle_1.GStyle.getFloatComputedValue(lNode, 'border-bottom-width');
                            }
                        }
                        const lRect = ObjetPosition_1.GPosition.getRect(lNode, true);
                        let lRectScroll = {
                            top: 0,
                            left: 0
                        };
                        const lConteneurSel = ObjetHtml_1.GHtml.getElement(this.ids.cadreSelection + aParams.bloc.indiceBloc);
                        if (lConteneurSel) {
                            lRectScroll = ObjetPosition_1.GPosition.getRect(lConteneurSel, true);
                        }
                        this._cache.positionsCelluleCadreSelection[aParams.ligne][aParams.colonne] = {
                            top: lRect.top - lRectScroll.top,
                            left: lRect.left - lRectScroll.left,
                            height: lRect.height - lModifHeight,
                            width: lRect.width
                        };
                        lPositionCache = this._cache.positionsCelluleCadreSelection[aParams.ligne][aParams.colonne];
                    }
                }
                if (lPositionCache) {
                    lPositionCache.selection = !!aParams.selection;
                }
                if (aParams.selection) {
                    let lBloc;
                    const lFusionLigneIdentique = function(aColonne) {
                        if (!this._cache.lignesFusionParColonne[aColonne + '_' + aParams.ligne] && !this._cache.lignesFusionParColonne[aParams.colonne + '_' + aParams.ligne]) {
                            return true;
                        }
                        if (this._cache.lignesFusionParColonne[lNumeroColonne + '_' + aParams.ligne] && this._cache.lignesFusionParColonne[aParams.colonne + '_' + aParams.ligne] && this._cache.lignesFusionParColonne[aParams.colonne + '_' + aParams.ligne].ligneOrigine === this._cache.lignesFusionParColonne[aParams.colonne + '_' + aParams.ligne].ligneOrigine) {
                            return true;
                        }
                        return false;
                    };
                    const lFusions = this._getFusionColonnesCellule({
                        colonnesVisibles: aParams.bloc.colonnesVisibles,
                        ligne: aParams.ligne,
                        indiceColonneDebut: aParams.bloc.indiceColonneDebut,
                        indiceColonneFin: aParams.bloc.indiceColonneFin,
                        dernierBloc: aParams.bloc.dernierBloc || (!aParams.bloc.dernierBloc && !aParams.bloc.estBlocFixe)
                    });
                    let lIndiceCol = aParams.bloc.colonnesVisibles.indexOf(lFusions[aParams.colonne].debut);
                    lNumeroColonne = aParams.bloc.colonnesVisibles[lIndiceCol - 1];
                    if (lIndiceCol === 0) {
                        lBloc = this._cache.infosZonesColonnes[aParams.bloc.indiceBloc - 1];
                        if (lBloc) {
                            lNumeroColonne = lBloc.colonnesVisibles[lBloc.colonnesVisibles.length - 1];
                        }
                    }
                    const lParamsCellulePrec = this._getParamsCellule(lNumeroColonne, aParams.ligne);
                    lPositionCache.selColPrec = (aParams.bloc.indiceBloc > 0 || aParams.colonne > aParams.bloc.colonnesVisibles[0]) && lFusionLigneIdentique.call(this, lNumeroColonne) && this._etatSelectionCellule({
                        ligne: aParams.ligne,
                        colonne: lNumeroColonne
                    }) && this.Donnees._avecSelection(lParamsCellulePrec);
                    lIndiceCol = aParams.bloc.colonnesVisibles.indexOf(lFusions[aParams.colonne].fin);
                    lNumeroColonne = aParams.bloc.colonnesVisibles[lIndiceCol + 1];
                    if (lIndiceCol >= aParams.bloc.colonnesVisibles.length - 1) {
                        lBloc = this._cache.infosZonesColonnes[aParams.bloc.indiceBloc + 1];
                        if (lBloc) {
                            lNumeroColonne = lBloc.colonnesVisibles[0];
                        }
                    }
                    const lParamsCelluleSuiv = this._getParamsCellule(lNumeroColonne, aParams.ligne);
                    lPositionCache.selColSuivante = (!aParams.bloc.dernierBloc || aParams.colonne < aParams.bloc.colonnesVisibles[aParams.bloc.colonnesVisibles.length - 1]) && lFusionLigneIdentique.call(this, lNumeroColonne) && this._etatSelectionCellule({
                        ligne: aParams.ligne,
                        colonne: lNumeroColonne
                    }) && this.Donnees._avecSelection(lParamsCelluleSuiv);
                    if (aParams.posCellulePrec && aParams.posCellulePrec.selection && aParams.posCellulePrec.selColPrec === lPositionCache.selColPrec && aParams.posCellulePrec.selColSuivante === lPositionCache.selColSuivante) {
                        return;
                    }
                    const lStyle = ObjetStyle_1.GStyle.composeWidth(lPositionCache.width + (lPositionCache.selColPrec ? 1 : 0) + (lPositionCache.selColSuivante ? 1 : 0)) + 'left:' + ((lPositionCache.selColPrec ? -1 : 0)) + 'px;';
                    const lId = this.ids.cadreSelection + aParams.bloc.indiceBloc;
                    $('#' + lIdSelecCellule.escapeJQ()).remove();
                    aArrayTraitements.cacheHTML[lId] = (aArrayTraitements.cacheHTML[lId] || '') + (0,
                    tag_1.tag)('div', {
                        class: 'liste_ligneSelection',
                        id: lIdSelecCellule,
                        style: 'top:' + lPositionCache.top + 'px;' + 'left:' + lPositionCache.left + 'px;'
                    }, !lPositionCache.selColPrec ? (0,
                    tag_1.tag)('div', {
                        class: 'liste_ligneSelection_g',
                        style: ObjetStyle_1.GStyle.composeHeight(lPositionCache.height)
                    }) : '', (0,
                    tag_1.tag)('div', {
                        class: 'liste_ligneSelection_h',
                        style: lStyle
                    }), !lPositionCache.selColSuivante ? (0,
                    tag_1.tag)('div', {
                        class: 'liste_ligneSelection_d',
                        style: 'left:' + (lPositionCache.width - 2) + 'px;' + ObjetStyle_1.GStyle.composeHeight(lPositionCache.height)
                    }) : '', (0,
                    tag_1.tag)('div', {
                        class: 'liste_ligneSelection_b',
                        style: 'top:' + (lPositionCache.height - 2) + 'px;' + lStyle
                    }));
                } else {
                    if (aParams.posCellulePrec && aParams.posCellulePrec.selection) {
                        $('#' + lIdSelecCellule.escapeJQ()).remove();
                    }
                }
            }
            _actualiserCadreSelection() {
                if (this._options.avecCadreSelection) {
                    this._getTraitementsAffichageSelection().forEach( (aTraitement, aIndex, aArray) => {
                        this._setCadreSelection(aTraitement, aIndex, aArray);
                    }
                    );
                }
            }
            _setCadreSelection(aParams, aIndexTraitement, aArrayTraitements) {
                if (aIndexTraitement === 0) {
                    aArrayTraitements.cacheHTML = {};
                }
                this.setCadreSelectionInterne(aParams, aArrayTraitements);
                if (aIndexTraitement >= aArrayTraitements.length - 1) {
                    for (const lKey in aArrayTraitements.cacheHTML) {
                        const lElementBloc = ObjetHtml_1.GHtml.getElement(lKey);
                        if (lElementBloc) {
                            lElementBloc.innerHTML += aArrayTraitements.cacheHTML[lKey];
                        }
                    }
                }
            }
            _etatSelectionCellule(aParametres, aSelectionne) {
                const lParametres = Object.assign({
                    ligne: -1,
                    colonne: -1,
                    cacheSelection: this._cache.lignesSelectionnees
                }, aParametres);
                if (arguments.length > 1) {
                    if (aSelectionne) {
                        const lParamsCellule = this._getParamsCellule(lParametres.colonne, lParametres.ligne);
                        if (lParametres.colonne >= 0 && !this.Donnees._avecSelection(lParamsCellule)) {
                            return;
                        }
                        if (!lParametres.cacheSelection[lParametres.ligne]) {
                            lParametres.cacheSelection[lParametres.ligne] = [];
                        }
                        if (lParametres.colonne < 0) {
                            for (let i = 0; i < this.ListeTailles.length; i++) {
                                lParametres.cacheSelection[lParametres.ligne][i] = true;
                            }
                        } else {
                            lParametres.cacheSelection[lParametres.ligne][lParametres.colonne] = aSelectionne;
                        }
                    } else {
                        if (!lParametres.cacheSelection[lParametres.ligne]) {
                            return;
                        }
                        if (lParametres.colonne < 0) {
                            delete lParametres.cacheSelection[lParametres.ligne];
                            return;
                        }
                        lParametres.cacheSelection[lParametres.ligne][lParametres.colonne] = false;
                        if (lParametres.cacheSelection[lParametres.ligne].every( (aColonne) => {
                            return aColonne !== true;
                        }
                        )) {
                            delete lParametres.cacheSelection[lParametres.ligne];
                        }
                    }
                } else {
                    if (!lParametres.cacheSelection[lParametres.ligne]) {
                        return false;
                    }
                    if (lParametres.colonne < 0) {
                        return !!lParametres.cacheSelection[lParametres.ligne];
                    }
                    return !!lParametres.cacheSelection[lParametres.ligne][lParametres.colonne];
                }
            }
            _getTraitementsAffichageSelection() {
                const lTraitements = [];
                if (!this.Donnees) {
                    return lTraitements;
                }
                this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                    this.Donnees.Donnees.parcourir( (aArticle, aLigne) => {
                        if (this._estLigneVisible(aLigne, {
                            contexteSelection: true
                        })) {
                            aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                                const lPosCellule = this._cache.positionsCelluleCadreSelection[aLigne] && this._cache.positionsCelluleCadreSelection[aLigne][aNumeroColonne] ? this._cache.positionsCelluleCadreSelection[aLigne][aNumeroColonne] : null;
                                const lParamsCellule = this._getParamsCellule(aNumeroColonne, aLigne);
                                const lTraitement = {
                                    bloc: aInfosZoneColonnes,
                                    ligne: aLigne,
                                    colonne: aNumeroColonne,
                                    idCellule: this.getIdCellule(aNumeroColonne, aLigne),
                                    selection: !!this._etatSelectionCellule({
                                        ligne: aLigne,
                                        colonne: aNumeroColonne
                                    }) && !!this.Donnees._avecSelection(lParamsCellule),
                                    posCellulePrec: Object.assign({}, lPosCellule)
                                };
                                lTraitements.push(lTraitement);
                            }
                            );
                        }
                    }
                    );
                }
                );
                return lTraitements;
            }
            _selectionner(aParametres) {
                if (!this.Donnees) {
                    return;
                }
                const lParametres = Object.assign({
                    ligne: -1,
                    colonne: -1,
                    selectionner: true,
                    avecScroll: false,
                    avecEvenement: false,
                    deselectionnerTout: false,
                    avecFocusCellule: false,
                    _avecVisuCadreSelection: true,
                    avecEvenementModificationSelection: false
                }, aParametres);
                let lNumeroColonne = lParametres.colonne;
                let lTrouverLignePourScroll = false;
                const lEstSelectionParCellule = this._estSelectionParCellule(lParametres.ligne, lNumeroColonne);
                const lAvecMultiSelection = this.Donnees.avecMultiSelection();
                const lParamsCellule = this._getParamsCellule(lParametres.colonne, lParametres.ligne);
                const lCelluleAvecSelection = lParametres.ligne >= 0 ? this.Donnees._avecSelection(lParamsCellule) : true;
                const lDonneesTableau = !this.estDonneeListeFlatDesign(this.Donnees) ? this.Donnees : null;
                if (lParametres.selectionner && lEstSelectionParCellule && !lCelluleAvecSelection) {
                    return;
                }
                if (!lEstSelectionParCellule) {
                    lNumeroColonne = -1;
                }
                if (lParametres.selectionner && lParametres.ligne > -1 && !lAvecMultiSelection && !lParametres._surMultiSelectionMiroir) {
                    if (lParametres.deselectionnerTout === false) {
                        lParametres.deselectionnerTout = true;
                    } else if (lParametres.deselectionnerTout && !lCelluleAvecSelection && lParametres.ligne >= 0 && !this.Donnees.options.avecDeselectionSurNonSelectionnable) {
                        lParametres.deselectionnerTout = false;
                    }
                }
                const lSelectionsPrecedente = lParametres.avecEvenementModificationSelection ? this._getCellulesSelection(true) : null;
                if (lParametres.deselectionnerTout) {
                    let lAvecDeselectionCellule = false;
                    for (let lLigne = 0; lLigne < this._cache.lignesSelectionnees.length; lLigne++) {
                        if (lEstSelectionParCellule) {
                            for (let lColonne = 0; lColonne < this.ListeTailles.length; lColonne++) {
                                if (this._etatSelectionCellule({
                                    ligne: lLigne,
                                    colonne: lColonne
                                })) {
                                    if (lLigne !== lParametres.ligne || lColonne !== lNumeroColonne) {
                                        lAvecDeselectionCellule = true;
                                    }
                                    this._selectionner({
                                        ligne: lLigne,
                                        colonne: lColonne,
                                        selectionner: false,
                                        _avecVisuCadreSelection: false
                                    });
                                }
                            }
                        } else {
                            if (this._etatSelectionCellule({
                                ligne: lLigne
                            })) {
                                if (lLigne !== lParametres.ligne) {
                                    lAvecDeselectionCellule = true;
                                }
                                this._selectionner({
                                    ligne: lLigne,
                                    selectionner: false,
                                    _avecVisuCadreSelection: false
                                });
                            }
                        }
                    }
                    if (lAvecDeselectionCellule && lAvecMultiSelection) {
                        this._cache.lignesSelectionnees_prec = [];
                    }
                }
                let lOldlignesSelection = null;
                if (lParametres.ligne > -1) {
                    lOldlignesSelection = [...this._cache.lignesSelectionnees];
                    if (!lParametres.selectionner && lNumeroColonne === -1) {
                        this._etatSelectionCellule({
                            ligne: lParametres.ligne,
                            colonne: lNumeroColonne
                        }, lParametres.selectionner);
                    }
                    this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                        this.Donnees.Donnees.parcourir( (aElementLigne, aLigne) => {
                            if (aElementLigne) {
                                const lEstLigneVisible = this._estLigneVisible(aLigne, {
                                    contexteSelection: true
                                });
                                aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                                    const lParamsCelluleDeColonne = this._getParamsCellule(aNumeroColonne, aLigne);
                                    if (!this._estColonneVisible(aNumeroColonne) || !this.Donnees._avecSelection(lParamsCelluleDeColonne)) {
                                        return;
                                    }
                                    if (lParametres.selectionner && lParametres.ligne === aLigne && !lEstLigneVisible) {
                                        IE.log.addLog('MMh ? selection de ligne invisible ? voir fv');
                                        return;
                                    }
                                    if (lParametres.ligne === aLigne && (lNumeroColonne === -1 || lNumeroColonne === aNumeroColonne)) {
                                        this._etatSelectionCellule({
                                            ligne: lParametres.ligne,
                                            colonne: aNumeroColonne
                                        }, lParametres.selectionner);
                                    } else if (!lEstSelectionParCellule && (!lDonneesTableau || lDonneesTableau.options.avecMultiSelectionSurLigneFusion) && lParametres.ligne !== aLigne && lParametres.colonne >= 0) {
                                        let lAvecModif = false;
                                        let lFusionCellule;
                                        lFusionCellule = this._cache.lignesFusionParColonne[lParametres.colonne + '_' + lParametres.ligne];
                                        if (lFusionCellule && lFusionCellule.lignesCumuls && lFusionCellule.lignesCumuls[aLigne]) {
                                            lAvecModif = true;
                                        }
                                        if (!lAvecModif) {
                                            lFusionCellule = this._cache.lignesFusionParColonne[aNumeroColonne + '_' + aLigne];
                                            if (lFusionCellule && lFusionCellule.lignesCumuls && lFusionCellule.lignesCumuls[lParametres.ligne]) {
                                                lAvecModif = true;
                                            }
                                        }
                                        if (lAvecModif) {
                                            this._etatSelectionCellule({
                                                ligne: aLigne,
                                                colonne: aNumeroColonne
                                            }, lParametres.selectionner);
                                        }
                                    }
                                }
                                );
                            }
                        }
                        );
                    }
                    );
                    if (lParametres.selectionner && !lParametres._surMultiSelectionMiroir) {
                        this._cache.selectionCellule.ligne = lParametres.ligne;
                        this._cache.selectionCellule.colonne = lParametres.colonne;
                    }
                    if (lNumeroColonne < 0 && !lParametres._surMultiSelectionMiroir) {
                        this.Donnees._surSelectionLigne(lParametres.ligne, lParametres.selectionner);
                    }
                }
                if (!lEstSelectionParCellule && lParametres.ligne >= 0 && !lParametres._surMultiSelectionMiroir && this.Donnees.options.avecRechercheSelectionMiroir) {
                    const lParamsCellule = this._getParamsCellule(lParametres.colonne, lParametres.ligne, {
                        selectionner: lParametres.selectionner
                    });
                    if (lParamsCellule.article) {
                        this.Donnees.Donnees.parcourir( (aElement, aLigne) => {
                            if (aLigne !== lParametres.ligne && aElement) {
                                const lParamsCelluleCible = this._getParamsCellule(lParametres.colonne, aLigne, {
                                    estLigneVisible: this._estLigneVisible(aLigne, {
                                        contexteSelection: true
                                    })
                                });
                                if (this.Donnees.estSelectionCibleMiroirDeSelectionSource(lParamsCellule, lParamsCelluleCible)) {
                                    this._selectionner({
                                        ligne: aLigne,
                                        colonne: -1,
                                        selectionner: lParametres.selectionner,
                                        _avecVisuCadreSelection: lParametres._avecVisuCadreSelection,
                                        _surMultiSelectionMiroir: true
                                    });
                                }
                            }
                        }
                        );
                    }
                }
                let lTraitements = null;
                if (this._options.avecCadreSelection && lParametres._avecVisuCadreSelection) {
                    lTraitements = this._getTraitementsAffichageSelection();
                    lTraitements.forEach( (aTraitement, aIndex, aArray) => {
                        this._setCadreSelection(aTraitement, aIndex, aArray);
                    }
                    );
                }
                if (lParametres.ligne > -1) {
                    let lLignePourScroll = Number.MAX_VALUE;
                    let lColonnePourScroll = 0;
                    if (!lTraitements && lOldlignesSelection && (!this._options.avecCadreSelection || (lParametres.selectionner && lParametres.avecScroll))) {
                        lTraitements = this._getTraitementsAffichageSelection();
                    }
                    if (lTraitements) {
                        lTraitements.forEach( (aTraitement) => {
                            const lOldSelec = lOldlignesSelection[aTraitement.ligne] ? !!lOldlignesSelection[aTraitement.ligne][aTraitement.colonne] : false;
                            if (!this._options.avecCadreSelection) {
                                const lElement = ObjetHtml_1.GHtml.getElement(aTraitement.idCellule);
                                if (lElement) {
                                    this._setStyleCellule(lElement, aTraitement.colonne, aTraitement.ligne, aTraitement.selection);
                                }
                            }
                            if (lOldSelec !== aTraitement.selection) {
                                if (lParametres.selectionner && lParametres.avecScroll && aTraitement.ligne < lLignePourScroll) {
                                    lLignePourScroll = aTraitement.ligne;
                                    lColonnePourScroll = aTraitement.colonne;
                                    lTrouverLignePourScroll = true;
                                }
                            }
                        }
                        );
                    }
                    if (lParametres.avecFocusCellule && lParametres.colonne >= 0) {
                        const lIdCellule = this.getIdCellule(lParametres.colonne, lParametres.ligne, true);
                        const lElementFocus = ObjetHtml_1.GHtml.getElement(lIdCellule);
                        if (ObjetHtml_1.GHtml.estElement(lElementFocus)) {
                            ObjetHtml_1.GHtml.setFocus(lElementFocus, true, 0);
                        } else if (this._estLigneDansRangeNonConstruitDyn(lParametres.ligne)) {
                            this._scrollSurLigne({
                                ligne: lParametres.ligne,
                                colonne: lParametres.colonne
                            });
                            ObjetHtml_1.GHtml.setFocus(lIdCellule, true, 0);
                        }
                    }
                    if (lParametres.selectionner && lParametres.avecScroll && lTrouverLignePourScroll) {
                        this._scrollSurLigne({
                            ligne: lLignePourScroll,
                            colonne: lColonnePourScroll
                        });
                    }
                }
                if (lParametres.avecEvenementModificationSelection) {
                    this._surModificationSelectionEvenement(lSelectionsPrecedente);
                }
                if (lParametres.avecEvenement && lParametres.selectionner) {
                    this.surSelectionEvenement(-1, lParametres.ligne, false, false);
                }
                this._refreshSelf();
            }
            _estCellulePrecedemmentSelectionnee(aColonne, aLigne) {
                if (!this._cache.lignesSelectionnees_prec) {
                    return false;
                }
                if (this._etatSelectionCellule({
                    ligne: aLigne,
                    colonne: aColonne,
                    cacheSelection: this._cache.lignesSelectionnees_prec
                })) {
                    return true;
                }
                const lInfosFusion = this._cache.lignesFusionParColonne[aColonne + '_' + aLigne];
                if (lInfosFusion && lInfosFusion.lignesCumuls) {
                    for (const lLigne in lInfosFusion.lignesCumuls) {
                        if (this._etatSelectionCellule({
                            ligne: parseInt(lLigne, 10),
                            colonne: aColonne,
                            cacheSelection: this._cache.lignesSelectionnees_prec
                        })) {
                            return true;
                        }
                    }
                }
                return false;
            }
            _avecEditionApresSelection(aParamsCellule) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return false;
                }
                let lParamsCellule = aParamsCellule;
                let lNumeroColonne = lParamsCellule.colonne;
                if (lNumeroColonne && MethodesObjet_1.MethodesObjet.isString(lNumeroColonne)) {
                    lNumeroColonne = this.getNumeroColonneDIdColonne(lNumeroColonne);
                }
                if (lNumeroColonne < 0 || !MethodesObjet_1.MethodesObjet.isNumber(lNumeroColonne)) {
                    lParamsCellule = this._getParamsCellule(lNumeroColonne, lParamsCellule.ligne, {
                        surEdition: true
                    });
                }
                lParamsCellule.typeValeur = this.Donnees.getTypeValeur(lParamsCellule);
                return this.Donnees.avecEditionApresSelection(lParamsCellule);
            }
            _editionDebSurSelection(aColonne, aLigne, aEvent) {
                if (this._cache.creationEnCours || this._cache.editionEnCours) {
                    return;
                }
                const lParams = this._getParamsCellule(aColonne, aLigne, {
                    surEdition: true
                });
                if (this.evenementSelectionClick(lParams)) {
                    return;
                }
                if (aEvent && (aEvent.type === 'click' || aEvent.type === 'mouseup') && (aEvent.ctrlKey === true || aEvent.shiftKey === true)) {
                    return;
                }
                if (!this._avecEditionApresSelection(lParams) || !this.Donnees._avecSelection(lParams) || this._estCellulePrecedemmentSelectionnee(lParams.colonne, lParams.ligne) || this.Donnees.avecSelecFile(lParams)) {
                    this.surEditionDeb(aColonne, aLigne);
                }
            }
            evenementSelectionClick(aParamsCellule) {
                let lResult = false;
                if (this.Donnees && aParamsCellule.ligne > -1) {
                    if (this.Donnees.avecEvenementSelectionClick(aParamsCellule)) {
                        if (this.Pere && this.Evenement) {
                            lResult = this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.SelectionClick, aParamsCellule.colonne, aParamsCellule.ligne), Enumere_EvenementListe_1.EGenreEvenementListe.SelectionClick, aParamsCellule.colonne, aParamsCellule.ligne);
                            this._refreshSelf();
                        }
                    }
                }
                return lResult;
            }
            _ajouterElementCreation(aLibelle, aValeurCreation) {
                if (aLibelle) {
                    if (this._getNonEditable()) {
                        return;
                    }
                    if (!this._cache.creationEnCours) {
                        this._cache.creationEnCours = true;
                        this._cache.creationEnCoursEvenement = false;
                    }
                    this._cache.listeValeursCreation[-1] = aValeurCreation;
                    if (this._cache.positionCreation === 0) {
                        this._cache.numeroColonneCreationEnCours = this.ListeCreations[this._cache.positionCreation++];
                    }
                    this._surCreation(aLibelle);
                } else {
                    this._annulerCreation();
                }
                return this;
            }
            _surLigneCreationUnique(aSurClick, aLigne, aSurToucheEdition) {
                const lParams = this._getParamsCellule(-1, aLigne, {
                    surCreation: true
                })
                  , lAvecInputFile = this.Donnees && this.Donnees.avecSelecFile(lParams);
                if (lAvecInputFile && this._cache.ouvrirSelecteurFileParLigne[aLigne + '_-1']) {
                    this._cache.ouvrirSelecteurFileParLigne[aLigne + '_-1']();
                    return;
                }
                if (!aSurClick && !aSurToucheEdition) {
                    return;
                }
                const LId = this._getIdCreation(-1, aLigne);
                ObjetHtml_1.GHtml.setDisplay(LId + '_Creation', false);
                ObjetHtml_1.GHtml.setDisplay(LId + '_Creation_Edit', true);
                this.surCreationDeb(false, {
                    numeroLigneCreation: aLigne
                });
            }
            surCreationDeb(ASuivant, aParams) {
                const lParamsCreation = Object.assign({
                    origine: null,
                    numeroLigneCreation: -1,
                    idCellule: null,
                    ignorerEventsNode: false,
                    creationEnFenetre: false
                }, aParams);
                if (this._getNonEditable() || !this.Donnees) {
                    return;
                }
                if (this._cache.positionCreation === 0) {
                    this._cache.listeValeursCreation = [];
                }
                let lInterrompreCreation = false;
                if (!this._cache.creationEnCours || ASuivant) {
                    this._cache.numeroColonneCreationEnCours = this.ListeCreations[this._cache.positionCreation++];
                    const lParams = this._getParamsCellule(this._cache.numeroColonneCreationEnCours, -1, {
                        surLigneCreation: true,
                        surEdition: true
                    });
                    this._cache.creationEnCoursEvenement = this.surCreationEvenement(lParams.colonne);
                    if (this._cache.creationEnCoursEvenement === Enumere_EvenementListe_1.EGenreEvenementListe.Creation) {
                        lInterrompreCreation = true;
                    } else if (lParamsCreation.origine !== 'menucontextuel' && this._cache.positionCreation === 1 && this.Donnees.avecMenuContextuel(lParams)) {
                        this._cache.positionCreation = 0;
                        this._ouvrirMenuContextuel(lParams);
                        lInterrompreCreation = true;
                    }
                    if (lInterrompreCreation) {
                        const LId = this._getIdCreation(-1, lParams.ligne);
                        ObjetHtml_1.GHtml.setDisplay(LId + '_Creation_Edit', false);
                        ObjetHtml_1.GHtml.setDisplay(LId + '_Creation', true);
                        return;
                    }
                    this._surSelection(-1, -1, {
                        avecFocus: false
                    });
                    this._cache.creationEnCours = true;
                    this.IdCellule = lParamsCreation.idCellule || this._getIdCreation(this._colonneCreationUniqueEnErreur() ? 0 : this._cache.numeroColonneCreationEnCours, this._cache.numeroLigneCreationDynamique === null || this._cache.numeroLigneCreationDynamique === undefined ? -1 : this._cache.numeroLigneCreationDynamique);
                    this.entrerEdition();
                    const lType = this.Donnees.getTypeValeur(lParams);
                    switch (lType) {
                    case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.ZoneTexte:
                        this.entrerZoneTexte(lParams.colonne, undefined, true, lParamsCreation.numeroLigneCreation, lParamsCreation.ignorerEventsNode, lParamsCreation.creationEnFenetre);
                        break;
                    default:
                        this.entrerTexte(lParams.colonne, undefined, true, lType, lParamsCreation.ignorerEventsNode, lParamsCreation.creationEnFenetre);
                        break;
                    }
                    if (!this._cache.creationEnCoursEvenement) {
                        ObjetHtml_1.GHtml.setFocusEdit(this.IdEdition);
                        ObjetHtml_1.GHtml.setSelectionEdit(this.IdEdition);
                    }
                }
            }
            _annulerCreation() {
                this.surCreationFin(-1, true);
            }
            surCreationFin(ASelectionLigne, aAnnuler) {
                if (this._cache.creationEnCours) {
                    this._refreshSelf();
                    this._cache.creationEnCours = false;
                    this._cache.creationEnCoursEvenement = false;
                    this._cache.finEditionCreation = null;
                    this._cache.positionCreation = 0;
                    this._cache.listeValeursCreation = [];
                    this._cache.numeroColonneCreationEnCours = null;
                    this._cache.numeroLigneCreationDynamique = null;
                    this._setRechercheSaisie('');
                    this._actualiser();
                    this._surSelection(-1, ASelectionLigne, {
                        avecFocus: false
                    });
                    this.surSelectionEvenement(-1, ASelectionLigne);
                    if (aAnnuler && ASelectionLigne === -1) {
                        ObjetHtml_1.GHtml.setFocus(this.IdPremierElement);
                    } else {
                        ObjetHtml_1.GHtml.setFocus(this.getIdCellule(0, ASelectionLigne, true));
                    }
                    if (ASelectionLigne >= 0) {
                        this.surApresCreationEvenement(ASelectionLigne);
                    } else {
                        this.surApresErreurCreationEvenement();
                    }
                    this._refreshSelf();
                }
            }
            _surCreation(aValeur) {
                if (this._fenetreInformationAffichee) {
                    return;
                }
                if (this._messageEnCoursSurCreation) {
                    return;
                }
                if (!this._cache.creationEnCours) {
                    return;
                }
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                delete this._valeurEnEdition;
                const lColonne = this._cache.numeroColonneCreationEnCours;
                let lLigne = -1
                  , lValeur = aValeur;
                let lParams = this._getParamsCellule(lColonne, lLigne, {
                    surEdition: true,
                    surCreation: true
                });
                if (MethodesObjet_1.MethodesObjet.isString(lValeur) && this.Donnees.avecTrimSurEdition(lParams)) {
                    lValeur = lValeur.trim();
                }
                if (lValeur !== null && lValeur !== undefined && (lValeur !== '' || this.Donnees.autoriserChaineVideSurEdition(lParams))) {
                    this._cache.listeValeursCreation[lColonne] = lValeur;
                    if (this.ListeCreations[this._cache.positionCreation] === null || this.ListeCreations[this._cache.positionCreation] === undefined) {
                        lParams = this._getParamsCellule(-1, -1, {
                            surEdition: true,
                            surCreation: true
                        });
                        lLigne = this.Donnees._surCreation(this._cache.listeValeursCreation, this._cache.numeroLigneCreationDynamique === null || this._cache.numeroLigneCreationDynamique === undefined ? -1 : this._cache.numeroLigneCreationDynamique, lParams);
                        this._messageEnCoursSurCreation = true;
                        try {
                            this._afficherMessage(lParams);
                        } finally {
                            delete this._messageEnCoursSurCreation;
                        }
                    } else {
                        this._cache.creationEnCours = false;
                        this._setStyleCellule(this.IdCellule, lColonne, lLigne, false, true);
                        if (MethodesObjet_1.MethodesObjet.isString(lValeur)) {
                            ObjetHtml_1.GHtml.setHtml(this.IdCellule, lValeur);
                        }
                        this.surCreationDeb(true);
                        return;
                    }
                }
                this.surCreationFin(lLigne);
            }
            _setCreationLigne(aCreationLigneBis) {
                if (aCreationLigneBis < 0 || !MethodesObjet_1.MethodesObjet.isNumber(aCreationLigneBis)) {
                    return;
                }
                this._cache.numeroLigneCreationDynamique = aCreationLigneBis;
                this._actualiser();
                this._surLigneCreationUnique(true, this._cache.numeroLigneCreationDynamique);
                this.surCreationDeb();
            }
            _getParamsCellule(aNumeroColonne, aNumeroLigne, aParamsSupp) {
                var _a;
                const lParams = {
                    ligne: aNumeroLigne,
                    colonne: aNumeroColonne,
                    article: null,
                    idColonne: null,
                    declarationColonne: {},
                    instance: this
                };
                if (lParams.ligne >= 0 && this.Donnees && MethodesObjet_1.MethodesObjet.isNumber(lParams.ligne)) {
                    if (aParamsSupp && aParamsSupp.surTotal) {
                        const lListeTotal = this.estDonneeListeTableau(this.Donnees) ? (_a = this.Donnees) === null || _a === void 0 ? void 0 : _a.getListeLignesTotal() : null;
                        if (lListeTotal) {
                            lParams.article = lListeTotal.get(lParams.ligne);
                        }
                    } else {
                        lParams.article = this.getArticleDeLigne(lParams.ligne);
                    }
                }
                if (lParams.colonne >= 0 && this.Donnees && MethodesObjet_1.MethodesObjet.isNumber(lParams.colonne)) {
                    lParams.idColonne = this.Donnees.getId(lParams.colonne);
                    lParams.declarationColonne = this._cache.declColonnesByIds[lParams.idColonne];
                }
                if (aParamsSupp) {
                    Object.assign(lParams, aParamsSupp);
                }
                return lParams;
            }
            _getParamsCallback(aGenre, I, J, aParamsSupp) {
                return Object.assign({
                    genreEvenement: aGenre,
                    surClavier: false
                }, this._getParamsCellule(I, J, aParamsSupp));
            }
            _surEditionDebutApresConfirmation(aParams) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                const lIdCellule = this.getIdCellule(aParams.colonne, aParams.ligne);
                if (this._cache.ouvrirSelecteurFileParLigne[aParams.ligne + '_' + aParams.colonne] && this.Donnees.avecSelecFile(aParams)) {
                    this._cache.ouvrirSelecteurFileParLigne[aParams.ligne + '_' + aParams.colonne]();
                } else if (this.Donnees.avecEvenementEdition(aParams)) {
                    this._cache.editionEnCoursEvenement = true;
                    this.afficherMarqueurEditionSurCellule(aParams.colonne, aParams.ligne);
                    const lIdCelluleFocus = this.getIdCellule(aParams.colonne, aParams.ligne, true);
                    ObjetHtml_1.GHtml.setFocus(lIdCelluleFocus, true);
                    const lthis = this;
                    $('#' + lIdCelluleFocus.escapeJQ()).one('focusout', () => {
                        $('#' + lIdCelluleFocus.escapeJQ()).one('focusin', () => {
                            if (lthis._cache.editionEnCoursEvenement) {
                                lthis._cache.editionEnCoursEvenement = false;
                                lthis._nettoyerElementsEditionEnCours();
                            }
                        }
                        );
                    }
                    );
                    const lParamsCallback = this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.Edition, aParams.colonne, aParams.ligne);
                    lParamsCallback.actualisationApresEdition = (aIgnorerActualisation) => {
                        if (this.isDestroyed()) {
                            return;
                        }
                        this._finaliserEdition({
                            ligne: aParams.ligne,
                            colonne: aParams.colonne,
                            ignorerActualisation: aIgnorerActualisation
                        });
                    }
                    ;
                    lParamsCallback.ouvrirMenuContextuel = (aParamsPerso) => {
                        this._ouvrirMenuContextuel(Object.assign({
                            id: this.getIdCellule(aParams.colonne, aParams.ligne)
                        }, aParams, aParamsPerso));
                    }
                    ;
                    this.callback.appel(lParamsCallback, Enumere_EvenementListe_1.EGenreEvenementListe.Edition, aParams.colonne, aParams.ligne);
                    this._refreshSelf();
                } else {
                    this._cache.editionEnCours = true;
                    for (let iLigne = 0; iLigne < this._cache.lignesSelectionnees.length; iLigne++) {
                        if (iLigne !== aParams.ligne && this._cache.lignesSelectionnees[iLigne]) {
                            this.selectionnerLigne({
                                ligne: iLigne,
                                selectionner: false,
                                avecEvenementModificationSelection: false
                            });
                        }
                    }
                    this.IdCellule = lIdCellule;
                    this.entrerEdition();
                    this.afficherMarqueurEditionSurCellule(aParams.colonne, aParams.ligne);
                    const lTypeValeur = this.Donnees.getTypeValeur(aParams);
                    switch (lTypeValeur) {
                    case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.ZoneTexte:
                        this.entrerZoneTexte(aParams.colonne, aParams.ligne, false);
                        break;
                    case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Image:
                    case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Icon:
                    case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche:
                        this._surEdition(aParams, 'coche', true);
                        break;
                    case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.DateCalendrier:
                        this._entrerDateCalendrier(aParams);
                        break;
                    default:
                        this.entrerTexte(aParams.colonne, aParams.ligne, false, lTypeValeur);
                        break;
                    }
                    if (![ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche, ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Image, ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Icon, ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.DateCalendrier].includes(lTypeValeur)) {
                        const lElement = ObjetHtml_1.GHtml.getElement(this.IdEdition);
                        if (lElement) {
                            ObjetHtml_1.GHtml.setFocus(lElement);
                            if (lElement.select) {
                                lElement.select();
                            }
                        }
                        if (this.optionsInterne.versionMobile && lTypeValeur === ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Note) {
                            if (lElement && lElement.click) {
                                lElement.click();
                            } else {
                                this._finaliserEdition({
                                    ligne: aParams.ligne,
                                    colonne: aParams.colonne
                                });
                            }
                        }
                    }
                }
            }
            surEditionDeb(aColonne, aLigne) {
                if (this._getNonEditable()) {
                    return;
                }
                this._cache.selectionCellule.ligne = aLigne;
                this._cache.selectionCellule.colonne = aColonne;
                let lParams = this._getParamsCellule(aColonne, aLigne, {
                    surEdition: true
                });
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                let lNumeroColonne = this.Donnees.getColonneTransfertEdition(lParams);
                if (lNumeroColonne && MethodesObjet_1.MethodesObjet.isString(lNumeroColonne)) {
                    lNumeroColonne = this.getNumeroColonneDIdColonne(lNumeroColonne);
                }
                if (MethodesObjet_1.MethodesObjet.isNumber(lNumeroColonne) && lNumeroColonne >= 0) {
                    lParams = this._getParamsCellule(lNumeroColonne, aLigne, {
                        surEdition: true
                    });
                }
                if (lParams.article && !this._cache.editionEnCours && (this.Donnees.avecEdition(lParams) || this.Donnees.avecEvenementEdition(lParams) || this.Donnees.avecSelecFile(lParams))) {
                    this._nettoyerElementsEditionEnCours();
                    if (this.Donnees.editionRefusee(lParams)) {
                        return;
                    }
                    if (this.Donnees._editionConfirmation(lParams)) {
                        (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                            message: this.Donnees.getMessage()
                        }).then( (aGenreAction) => {
                            if (aGenreAction === Enumere_Action_1.EGenreAction.Valider) {
                                this._surEditionDebutApresConfirmation(lParams);
                            }
                        }
                        );
                    } else {
                        this._surEditionDebutApresConfirmation(lParams);
                    }
                }
            }
            _surEdition(aParams, aValeur, aAvecModification, aForcerEvenement) {
                if (this._fenetreInformationAffichee) {
                    return;
                }
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                if (this._cache.editionEnCours || this._cache.editionEnCoursEvenement) {
                    delete this._valeurEnEdition;
                    delete this._cache.avecModificationSaisie;
                    if (!aAvecModification) {
                        this._surEditionFin({
                            ligne: aParams.ligne,
                            colonne: aParams.colonne,
                            avecEvenement: aForcerEvenement,
                            sansTriDonnees: aParams.sansTriDonnees
                        });
                        return;
                    }
                    let lValeur = aValeur;
                    if (MethodesObjet_1.MethodesObjet.isString(lValeur) && this.Donnees.avecTrimSurEdition(aParams)) {
                        lValeur = lValeur.trim();
                    }
                    const lParamsFinEdition = {
                        ligne: aParams.ligne,
                        colonne: aParams.colonne,
                        avecEvenement: true,
                        avecModification: true,
                        sansTriDonnees: aParams.sansTriDonnees
                    };
                    if (((lValeur !== null && lValeur !== undefined) || this.Donnees.getTypeValeur(aParams) === ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.DateCalendrier) && (lValeur !== '' || this.Donnees.autoriserChaineVideSurEdition(aParams))) {
                        aParams.valeur = lValeur;
                        const lFuncAfficherMessage = (aParams) => {
                            if (!this._messageEnCoursDAffichage) {
                                this._messageEnCoursDAffichage = true;
                                this._afficherMessage(aParams);
                                delete this._messageEnCoursDAffichage;
                            }
                        }
                        ;
                        let lResult;
                        const lFinEditionCreation = this._cache.finEditionCreation;
                        this._cache.finEditionCreation = null;
                        try {
                            lResult = this.Donnees._surEdition(aParams);
                        } finally {
                            this._cache.finEditionCreation = lFinEditionCreation;
                        }
                        if (lResult && lResult.then) {
                            return lResult.then( (aError) => {
                                lFuncAfficherMessage(aParams);
                                this._surEditionFin(lParamsFinEdition);
                                if (aError && aError.annulerEdition && aError.enEditionSurCelllule) {
                                    this.demarrerEditionSurCellule(aParams.ligne, aParams.colonne);
                                }
                                return aError;
                            }
                            );
                        }
                        lFuncAfficherMessage(aParams);
                    }
                    this._surEditionFin(lParamsFinEdition);
                }
            }
            _finaliserEdition(aParametres) {
                const lParametres = Object.assign({
                    ligne: -1,
                    colonne: -1,
                    avecEvenement: false,
                    avecModification: false,
                    ignorerActualisation: false,
                    sansTriDonnees: false
                }, aParametres);
                this._cache.editionEnCours = false;
                this._cache.editionEnCoursEvenement = false;
                this._cache.finEditionCreation = null;
                if (this._cache.timeout_ignorerScrollSortieEdition) {
                    clearTimeout(this._cache.timeout_ignorerScrollSortieEdition);
                    delete this._cache.timeout_ignorerScrollSortieEdition;
                }
                this._nettoyerElementsEditionEnCours();
                if (lParametres.ignorerActualisation !== true) {
                    let lEstColonneTriCourant = false;
                    if (this._triCourant.colonne) {
                        this._triCourant.colonne.forEach( (aNumeroColonne) => {
                            if (lParametres.colonne === aNumeroColonne) {
                                lEstColonneTriCourant = true;
                            }
                        }
                        );
                    }
                    const lElementCellule = ObjetHtml_1.GHtml.getElement(this.getIdCellule(lParametres.colonne, lParametres.ligne));
                    const lFuncConstructCellule = this._cache.collectionFuncConstructCellule[lParametres.ligne + '_' + lParametres.colonne];
                    if (lEstColonneTriCourant || !lFuncConstructCellule || !lElementCellule || (this.estDonneeListeTableau(this.Donnees) && this.Donnees.forcerActualisationListeSurEdition(lParametres))) {
                        this._actualiser({
                            conserverSelection: false,
                            zonesActualisation: {
                                contenu: true,
                                total: true
                            },
                            avecEvenementModificationSelection: false,
                            conserverPositionElement: lElementCellule ? {
                                rectCellule: ObjetPosition_1.GPosition.getClientRect(lElementCellule),
                                ligne: lParametres.ligne,
                                colonne: lParametres.colonne
                            } : null,
                            sansTriDonnees: lParametres.sansTriDonnees
                        });
                    } else {
                        ObjetHtml_1.GHtml.setHtml(lElementCellule, lFuncConstructCellule(), {
                            controleur: this.controleur
                        });
                        this._selectionner({
                            deselectionnerTout: true
                        });
                    }
                    this._surSelection(lParametres.colonne, lParametres.ligne, {
                        avecFocus: false
                    });
                    if (lParametres.ligne >= 0 && lParametres.colonne >= 0) {
                        const lElement = ObjetHtml_1.GHtml.getElement(this.getIdCellule(lParametres.colonne, lParametres.ligne, true));
                        if (ObjetHtml_1.GHtml.elementExiste(lElement) && lElement.focus) {
                            try {
                                lElement.focus({
                                    preventScroll: true
                                });
                            } catch (e) {}
                        }
                    } else {
                        ObjetHtml_1.GHtml.setFocus(this.IdPremierElement, true);
                    }
                }
                this._refreshSelf();
                if (lParametres.colonne >= 0 && lParametres.avecEvenement) {
                    this.surApresEditionEvenement(this._getParamsCellule(lParametres.colonne, lParametres.ligne, {
                        avecModification: !!lParametres.avecModification
                    }));
                }
            }
            _surEditionFin(aParams) {
                this._finaliserEdition(Object.assign(aParams, {
                    ignorerActualisation: !this._cache.editionEnCours && !this._cache.editionEnCoursEvenement
                }));
            }
            _surSuppression() {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                const lListeSelections = this._getListeElementsSelection();
                if (this._options.AvecSuppression && !this._getNonEditable() && (this._cache.selectionCellule.ligne > -1 || (lListeSelections && lListeSelections.count() > 0))) {
                    const lParamsCellule = this._getParamsCellule(this._cache.selectionCellule.colonne, this._cache.selectionCellule.ligne, {
                        surSuppression: true
                    });
                    if (this.Donnees._suppressionImpossible(this._cache.selectionCellule.ligne, lListeSelections)) {
                        this._afficherMessage(lParamsCellule);
                    } else if (this.Donnees._suppressionConfirmation(this._cache.selectionCellule.ligne, lListeSelections)) {
                        (0,
                        AccessApp_1.getApp)().getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                            message: this.Donnees.getMessage()
                        }).then( (aGenreAction) => {
                            this.surSuppressionApresConfirmation(lListeSelections, lParamsCellule, aGenreAction);
                        }
                        );
                    } else {
                        this.surSuppressionApresConfirmation(lListeSelections, lParamsCellule, Enumere_Action_1.EGenreAction.Valider);
                    }
                }
            }
            surSuppressionApresConfirmation(aListeSelections, aParamsCellule, AAccepte) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                if (AAccepte === Enumere_Action_1.EGenreAction.Valider) {
                    Object.assign(aParamsCellule, {
                        listeSelections: aListeSelections,
                        listeSuppressions: new ObjetListeElements_1.ObjetListeElements()
                    });
                    if (aListeSelections) {
                        aParamsCellule.listeSuppressions = this.Donnees.getListeSupprimables(aListeSelections, aParamsCellule);
                    }
                    const lAvecEvenement = this.surSuppressionEvenement(aParamsCellule);
                    if (lAvecEvenement && this.Donnees.avecInterruptionSuppression()) {
                        this._cache.selectionCellule.ligne = -1;
                    } else {
                        this._cache.selectionCellule.ligne = this.Donnees._surSuppression(aParamsCellule.ligne, aParamsCellule.listeSuppressions);
                        this._actualiser();
                        if (this.Donnees.avecEtatSaisie(aParamsCellule)) {
                            this.setEtatSaisie(true);
                        }
                    }
                    this.surApresSuppressionEvenement(aParamsCellule);
                }
                ObjetHtml_1.GHtml.setFocus(this.IdPremierElement, true, 0);
            }
            _getIdCreation(I, J) {
                return this.Nom + '_Creation_' + I + (J === null || J === undefined ? '' : '_' + J);
            }
            _getListeElementsSelection() {
                const lSelections = new ObjetListeElements_1.ObjetListeElements();
                if (this._cache.lignesSelectionnees) {
                    for (let i = 0; i < this._cache.lignesSelectionnees.length; i++) {
                        if (this._cache.lignesSelectionnees[i]) {
                            const lElement = this.getArticleDeLigne(i);
                            if (lElement) {
                                lSelections.addElement(lElement);
                            }
                        }
                    }
                }
                return lSelections;
            }
            _getCellulesSelection(aAvecLignesInvisible) {
                const lSelections = [];
                if (this._cache.lignesSelectionnees && this.Donnees) {
                    this._cache.lignesSelectionnees.forEach( (aSelectionLigne, aLigne) => {
                        if (!aAvecLignesInvisible && !this._estLigneVisible(aLigne, {
                            contexteSelection: true
                        })) {
                            return;
                        }
                        let lLigne = null
                          , lAvecSelectionParCelluleSurLigne = false;
                        if (aSelectionLigne && aSelectionLigne.forEach) {
                            aSelectionLigne.forEach( (aSelectionne, aColonne) => {
                                if (aSelectionne && this._estColonneVisible(aColonne)) {
                                    const lParamsCellule = this._getParamsCellule(aColonne, aLigne);
                                    if (this.Donnees._avecSelection(lParamsCellule)) {
                                        if (!lLigne) {
                                            lLigne = {
                                                ligne: aLigne,
                                                article: this.getArticleDeLigne(aLigne),
                                                hashColonnesSelecParCellule: {},
                                                colonnes: [],
                                                idsColonnes: []
                                            };
                                        }
                                        lLigne.hashColonnesSelecParCellule[aColonne] = true;
                                        lLigne.colonnes.push(aColonne);
                                        lLigne.idsColonnes.push(this.getIdColonneDeNumeroColonne(aColonne));
                                        if (!lAvecSelectionParCelluleSurLigne && this._estSelectionParCellule(aLigne, aColonne)) {
                                            lAvecSelectionParCelluleSurLigne = true;
                                        }
                                    }
                                }
                            }
                            );
                        } else if (aSelectionLigne) {}
                        if (lLigne) {
                            if (!lAvecSelectionParCelluleSurLigne) {
                                delete lLigne.hashColonnesSelecParCellule;
                            }
                            lSelections.push(lLigne);
                        }
                    }
                    );
                }
                return lSelections;
            }
            _setCellulesSelection(aListe, aParams) {
                let iColonne, lElement, lElementTrouve, lHashColonnesSelectionnees;
                const lParams = Object.assign({
                    instancesIdentiques: false,
                    avecScroll: false,
                    avecEvenement: false,
                    avecEvenementModificationSelection: true,
                    ajoutSelection: false,
                    funcRecherche: null,
                    avecSelectionSurLigneInvisible: false
                }, aParams);
                const lFuncRecherche = lParams.funcRecherche && MethodesObjet_1.MethodesObjet.isFunction(lParams.funcRecherche) ? lParams.funcRecherche : null;
                const _gererSelection = (aParams, aElementTrouve, aNumeroLigne, aNumeroColonne, aEtatSelec) => {
                    if (!aElementTrouve && aEtatSelec) {
                        if (!aParams.ajoutSelection) {
                            this._selectionner({
                                ligne: aNumeroLigne,
                                colonne: aNumeroColonne,
                                selectionner: false,
                                avecEvenement: aParams.avecEvenement,
                                _avecVisuCadreSelection: false
                            });
                        }
                    } else if (aElementTrouve) {
                        const lEstSelection = aEtatSelec;
                        if (!lEstSelection) {
                            this._selectionner({
                                ligne: aNumeroLigne,
                                colonne: aNumeroColonne,
                                selectionner: true,
                                avecScroll: aParams.avecScroll,
                                deselectionnerTout: aParams.ignorerControleMultiSelection === true ? null : false,
                                avecEvenement: aParams.avecEvenement && !lEstSelection,
                                _avecVisuCadreSelection: false
                            });
                        }
                    }
                }
                ;
                function _trouveIdentique(aElement) {
                    if (aElement && aElement.article && aElement.article === lElement) {
                        lElementTrouve = true;
                        lHashColonnesSelectionnees = aElement.hashColonnesSelecParCellule;
                        return false;
                    }
                    return true;
                }
                function _trouveNumeroGenre(aElement) {
                    if (aElement && aElement.article && aElement.article.egalParNumeroEtGenre(lElement.getNumero(), lElement.getGenre())) {
                        lElementTrouve = aElement;
                        lHashColonnesSelectionnees = aElement.hashColonnesSelecParCellule;
                        return false;
                    }
                    return true;
                }
                function _trouverAvecRecherche(aElement) {
                    if (lFuncRecherche(lElement, aElement.article) === true) {
                        lElementTrouve = true;
                        lHashColonnesSelectionnees = aElement.hashColonnesSelecParCellule;
                        return false;
                    }
                    return true;
                }
                if (!aListe || !Array.isArray(aListe)) {
                    aListe = [];
                }
                const lSelectionsPrecedente = lParams.avecEvenementModificationSelection ? this._getCellulesSelection(true) : null;
                const lFuncs = [];
                for (let lNumeroLigne = this.Donnees.getNbrLignes() - 1; lNumeroLigne >= 0; lNumeroLigne--) {
                    lElement = this.getArticleDeLigne(lNumeroLigne);
                    lElementTrouve = false;
                    lHashColonnesSelectionnees = null;
                    if (lElement && aListe.length > 0 && (lParams.avecSelectionSurLigneInvisible || this._estLigneVisible(lNumeroLigne, {
                        contexteSelection: true
                    }))) {
                        if (lFuncRecherche) {
                            aListe.every(_trouverAvecRecherche);
                        } else if (lParams.instancesIdentiques) {
                            aListe.every(_trouveIdentique);
                        } else {
                            aListe.every(_trouveNumeroGenre);
                        }
                    }
                    let lEtatSelec;
                    const lColonnes = [];
                    if (lHashColonnesSelectionnees) {
                        lEtatSelec = [];
                        for (iColonne = 0; iColonne < this.ListeTailles.length; iColonne++) {
                            if (this._estColonneVisible(iColonne)) {
                                lColonnes.push(iColonne);
                                lEtatSelec.push(this._etatSelectionCellule({
                                    ligne: lNumeroLigne,
                                    colonne: iColonne
                                }));
                            }
                        }
                    } else {
                        lEtatSelec = this._etatSelectionCellule({
                            ligne: lNumeroLigne,
                            colonne: -1
                        });
                    }
                    lFuncs.push({
                        hashColonnesSelectionnees: lHashColonnesSelectionnees,
                        elementTrouve: lElementTrouve,
                        numeroLigne: lNumeroLigne,
                        colonnes: lColonnes,
                        etatSelec: lEtatSelec
                    });
                }
                lFuncs.forEach( (aParam) => {
                    if (aParam.hashColonnesSelectionnees) {
                        aParam.colonnes.forEach( (aColonne) => {
                            _gererSelection(lParams, aParam.elementTrouve && aParam.hashColonnesSelectionnees[aColonne], aParam.numeroLigne, aColonne, aParam.etatSelec[aColonne]);
                        }
                        );
                    } else {
                        _gererSelection(lParams, aParam.elementTrouve, aParam.numeroLigne, -1, aParam.etatSelec);
                    }
                }
                );
                this._actualiserCadreSelection();
                if (lParams.avecEvenementModificationSelection) {
                    this._surModificationSelectionEvenement(lSelectionsPrecedente);
                }
                return this;
            }
            _setTableauCellulesSelection(aListe, aParams) {
                let lIndexTrouve = -1;
                if (!aListe || !Array.isArray(aListe)) {
                    aListe = [];
                }
                this._cache.lignesSelectionnees_prec = [...this._cache.lignesSelectionnees];
                function _trouveIdentique(aCherche, aElement, aIndex) {
                    if (aElement && aCherche && aElement.article && aElement.article === aCherche) {
                        lIndexTrouve = aIndex;
                        return false;
                    }
                    return true;
                }
                const lListe = [];
                if (aListe && Array.isArray(aListe)) {
                    aListe.forEach( (aElement) => {
                        let lLigne = null;
                        if (!aElement.article) {
                            return;
                        }
                        lIndexTrouve = -1;
                        if (!lListe.every(_trouveIdentique.bind(this, aElement.article)) && lIndexTrouve >= 0) {
                            lLigne = lListe[lIndexTrouve];
                        }
                        if (!lLigne) {
                            lLigne = {
                                article: aElement.article
                            };
                        }
                        let lNumeroColonne = -1;
                        if (aElement.idColonne) {
                            lNumeroColonne = this.getNumeroColonneDIdColonne(aElement.idColonne);
                        }
                        if (lNumeroColonne < 0 && aElement.colonne >= 0) {
                            lNumeroColonne = aElement.colonne;
                        }
                        if (lNumeroColonne >= 0) {
                            if (!lLigne.hashColonnesSelecParCellule) {
                                lLigne.hashColonnesSelecParCellule = {};
                            }
                            lLigne.hashColonnesSelecParCellule[lNumeroColonne] = true;
                        }
                        lListe.push(lLigne);
                    }
                    );
                }
                return this._setCellulesSelection(lListe, aParams);
            }
            _setListeElementsSelection(aListeElements, aParams) {
                this._cache.lignesSelectionnees_prec = [...this._cache.lignesSelectionnees];
                if (!aListeElements || !aListeElements.getElementParElement) {
                    aListeElements = new ObjetListeElements_1.ObjetListeElements();
                }
                const lListe = [];
                aListeElements.parcourir( (D) => {
                    lListe.push({
                        article: D
                    });
                }
                );
                return this._setCellulesSelection(lListe, aParams);
            }
            _navigationCelluleSuivante(aParametres) {
                if (!this.Donnees) {
                    return false;
                }
                if (this._cache.finEditionCreation) {
                    const lResultFinEdition = this._cache.finEditionCreation();
                    if (lResultFinEdition && typeof lResultFinEdition === 'object' && 'avecMessagerErreur'in lResultFinEdition && lResultFinEdition.avecMessagerErreur) {
                        return;
                    }
                }
                const lParametres = Object.assign({
                    ligne: this._cache.selectionCellule.ligne,
                    colonne: this._cache.selectionCellule.colonne,
                    orientationVerticale: false,
                    sensInverse: false,
                    ligneEtColonneFixe: false,
                    avecSelection: false,
                    avecCelluleEditable: false,
                    avecFocusCellule: true,
                    forcerNavigationFocus: false,
                    sansRecherche: false
                }, aParametres);
                let lLigne = lParametres.ligne
                  , lColonne = lParametres.colonne
                  , lElement = null;
                let lAvecSelectionOuEdition = false;
                const lNbLignes = this.Donnees.Donnees.count()
                  , lNbColonnes = this.ListeTailles.length;
                let lParamsCellule;
                const lRoleGrid = this._estRoleTreeGrid();
                if (lLigne < 0 || lColonne < 0) {
                    if (lParametres.orientationVerticale) {
                        lLigne = Math.max(lLigne, -1);
                        lColonne = Math.max(lColonne, 0);
                    } else {
                        lLigne = Math.max(lLigne, 0);
                        lColonne = Math.max(lColonne, -1);
                    }
                    lParametres.sensInverse = false;
                }
                while (!lElement) {
                    if (!lParametres.sansRecherche) {
                        if (lParametres.orientationVerticale) {
                            lLigne += lParametres.sensInverse ? -1 : 1;
                            if (lParametres.ligneEtColonneFixe) {} else if (lLigne >= lNbLignes || lLigne < 0) {
                                lLigne = lParametres.sensInverse ? lNbLignes - 1 : 0;
                                lColonne += lParametres.sensInverse ? -1 : 1;
                            }
                        } else {
                            lColonne += lParametres.sensInverse ? -1 : 1;
                            if (lParametres.ligneEtColonneFixe) {} else if (lColonne >= lNbColonnes || lColonne < 0) {
                                lColonne = lParametres.sensInverse ? lNbColonnes - 1 : 0;
                                lLigne += lParametres.sensInverse ? -1 : 1;
                            }
                        }
                    }
                    if (lLigne >= lNbLignes || lColonne >= lNbColonnes || lLigne < 0 || lColonne < 0 || isNaN(lLigne) || isNaN(lColonne)) {
                        break;
                    }
                    lParamsCellule = this._getParamsCellule(lColonne, lLigne);
                    if (this._estColonneVisible(lColonne) && this._estLigneVisible(lLigne)) {
                        lAvecSelectionOuEdition = (lParametres.avecCelluleEditable || !lParametres.avecSelection || this.Donnees._avecSelection(lParamsCellule)) && (!lParametres.avecCelluleEditable || (!this._getNonEditable() && this.estDonneeListeTableau(this.Donnees) && (this.Donnees.avecEdition(lParamsCellule) || this.Donnees.avecEvenementEdition(lParamsCellule))));
                        if (lParametres.forcerNavigationFocus || lAvecSelectionOuEdition) {
                            const lIdCellule = this.getIdCellule(lColonne, lLigne, true);
                            lElement = ObjetHtml_1.GHtml.getElement(lIdCellule);
                            if (!lElement && this._estLigneDansRangeNonConstruitDyn(lLigne)) {
                                this._scrollSurLigne({
                                    ligne: lLigne,
                                    colonne: lColonne
                                });
                                lElement = ObjetHtml_1.GHtml.getElement(lIdCellule);
                            }
                            if (!lElement && lRoleGrid) {
                                const lIdCellulleWAI = this.getIdCellule(lColonne, lLigne, true, true);
                                const lElementWAI = ObjetHtml_1.GHtml.getElement(lIdCellulleWAI);
                                if (lElementWAI) {
                                    const lLigneRef = parseInt(lElementWAI.dataset.fusionrow || '-1');
                                    const lColRef = parseInt(lElementWAI.dataset.fusioncol || '-1');
                                    if (lLigneRef >= 0 && lColRef >= 0 && (lColonne !== lColRef || lLigne !== lLigneRef)) {
                                        let lAccepterNav = true;
                                        if (lParametres.orientationVerticale) {
                                            if (!lParametres.sensInverse && lLigneRef < lLigne) {
                                                lAccepterNav = false;
                                            } else if (lParametres.sensInverse && lLigneRef > lLigne) {
                                                lAccepterNav = false;
                                            }
                                        } else {
                                            if (!lParametres.sensInverse && lColRef < lColonne) {
                                                lAccepterNav = false;
                                            } else if (lParametres.sensInverse && lColRef > lColonne) {
                                                lAccepterNav = false;
                                            }
                                        }
                                        if (lAccepterNav) {
                                            const lElementRef = this.getIdCellule(lColRef, lLigneRef, true);
                                            if (lElementRef) {
                                                lElement = lElementRef;
                                                lColonne = lColRef;
                                                lLigne = lLigneRef;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    if (lParametres.sansRecherche) {
                        break;
                    }
                }
                if (lElement) {
                    if (lParametres.avecSelection && lAvecSelectionOuEdition) {
                        const lAvecFocusCellule = lParametres.avecFocusCellule && [ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.ZoneTexte].indexOf(this.Donnees.getTypeValeur(lParamsCellule)) < 0;
                        this.selectionnerCellule({
                            ligne: lLigne,
                            colonne: lColonne,
                            deselectionnerTout: true,
                            avecFocusCellule: lAvecFocusCellule,
                            avecEvenement: true
                        });
                    } else {
                        ObjetHtml_1.GHtml.setFocus(lElement);
                    }
                    this._cache.selectionCellule = {
                        ligne: lLigne,
                        colonne: lColonne
                    };
                    return true;
                }
                return false;
            }
            _selectionnerCelluleSuivante(aParametres) {
                const lParametres = Object.assign({
                    ligne: this._cache.selectionCellule.ligne,
                    colonne: this._cache.selectionCellule.colonne,
                    orientationVerticale: false,
                    sensInverse: false,
                    avecSelection: true,
                    avecCelluleEditable: false,
                    entrerEdition: false
                }, aParametres);
                if (lParametres.ligne < 0 || lParametres.colonne < 0 || !this.Donnees) {
                    return this;
                }
                if (lParametres.entrerEdition) {
                    lParametres.avecCelluleEditable = true;
                }
                if (this._navigationCelluleSuivante(lParametres) && lParametres.entrerEdition && (lParametres.entrerEdition === true || (MethodesObjet_1.MethodesObjet.isFunction(lParametres.entrerEdition) && lParametres.entrerEdition(this._getParamsCellule(this._cache.selectionCellule.colonne, this._cache.selectionCellule.ligne))))) {
                    this.demarrerEditionSurCellule(this._cache.selectionCellule.ligne, this._cache.selectionCellule.colonne);
                }
                return this;
            }
            estColonneVisibleDIdColonne(aIdColonne) {
                return this._estColonneVisible(this.getNumeroColonneDIdColonne(aIdColonne), this._cache);
            }
            _estColonneVisible(aNumeroColonne, aCache) {
                return aNumeroColonne >= 0 && this.ListeTailles && aNumeroColonne < this.ListeTailles.length && (aCache || this._cache).tableauColonnesCachees[aNumeroColonne] !== true;
            }
            _calculColonnesCachees(aCache) {
                let lColonnesCachees = []
                  , lTabColonnes = this._options.colonnesCachees;
                if (this.Donnees && this.Donnees.enImpression && this._options.colonnesCacheesImpression) {
                    lTabColonnes = this._options.colonnesCacheesImpression;
                }
                if (!MethodesObjet_1.MethodesObjet.isArray(lTabColonnes) && isFinite(lTabColonnes)) {
                    lColonnesCachees.push(lTabColonnes);
                } else if (MethodesObjet_1.MethodesObjet.isArray(lTabColonnes)) {
                    lColonnesCachees = lColonnesCachees.concat(lTabColonnes);
                }
                lColonnesCachees.sort();
                aCache.nbColonnesCachees = 0;
                aCache.tableauColonnesCachees = [];
                aCache.tableauColonnesCacheesOriginal = [];
                if (this.ListeTailles && this.ListeTailles.forEach) {
                    this.ListeTailles.forEach( (aTaille, aIndex) => {
                        let lIdCol;
                        let lNonTrouve = lColonnesCachees.indexOf(aIndex) === -1;
                        if (lNonTrouve && this._cache.colonnes.listeIds) {
                            lIdCol = this._cache.colonnes.listeIds[aIndex];
                            if (lIdCol) {
                                lNonTrouve = lColonnesCachees.indexOf(lIdCol) === -1;
                            }
                        }
                        let lIndexOriginal = aIndex;
                        if (aCache.listeCorrespondancesColonnes && lIdCol) {
                            lIndexOriginal = aCache.listeCorrespondancesColonnes.indexOf(aIndex);
                        }
                        if (lNonTrouve) {
                            aCache.tableauColonnesCachees[aIndex] = false;
                            aCache.tableauColonnesCacheesOriginal[lIndexOriginal] = false;
                        } else {
                            aCache.tableauColonnesCachees[aIndex] = true;
                            aCache.tableauColonnesCacheesOriginal[lIndexOriginal] = true;
                            aCache.nbColonnesCachees++;
                        }
                    }
                    );
                }
            }
            _colonneCreationUniqueEnErreur() {
                return this.ListeCreations.length === 1 && (this.ListeCreations[0] < 0 || this.ListeCreations[0] >= this.ListeTailles.length);
            }
            _deploiementSurCellule(aParams) {
                const lTypeValeur = this.Donnees.getTypeValeur(aParams);
                return this.Donnees.avecDeploiement() && this.Donnees.avecDeploiementSurColonne(aParams) && this.Donnees.estUnDeploiement(aParams) && (lTypeValeur !== ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche);
            }
            surDeploiement(aEvent, aColonne, aLigne, aDeploiementSurImage) {
                if (this._cache.creationEnCours || this._cache.editionEnCours) {
                    return;
                }
                if (this._avecDeploiementDesactive()) {
                    return;
                }
                if (aEvent.type !== 'keyup' && aEvent.which === 2) {
                    return;
                }
                const lParams = this._getParamsCellule(aColonne, aLigne, {
                    surDeploiement: true
                });
                if (!aDeploiementSurImage && !this.Donnees.avecEventDeploiementSurCellule(lParams)) {
                    return;
                }
                if (!aDeploiementSurImage && this.estDonneeListeFlatDesign(this.Donnees) && this.Donnees.options.avecCocheCBSurLigne && this.Donnees.avecCB(lParams)) {
                    return;
                }
                if (this._deploiementSurCellule(lParams)) {
                    this.Donnees.surDeploiement(aColonne, aLigne, lParams.article);
                    this._actualiser({
                        sansTriDonnees: true,
                        conserverSelection: true,
                        conserverFocusSelection: true,
                        ignorerFocusListe: false
                    });
                    if (this.Donnees.avecEvenementDeploiement(lParams)) {
                        this.callback.appel(this._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.Deploiement, aColonne, aLigne), Enumere_EvenementListe_1.EGenreEvenementListe.Deploiement, aColonne, aLigne);
                        this._refreshSelf();
                    }
                    return true;
                }
            }
            _avecSuppressionSelectionCourante(aNumeroLigne, aNumeroColonne) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                const lListe = this._getListeElementsSelection()
                  , lParams = this._getParamsCellule(aNumeroColonne, aNumeroLigne, {
                    listeSelection: lListe,
                    surSuppression: true
                });
                return this._options.AvecSuppression && !this._getNonEditable() && !this._cache.editionEnCours && lListe.count() > 0 && this.Donnees._avecSuppression(lParams);
            }
            _surClickCelluleTotal(event) {
                const lInstance = event.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                if (!lInfos) {
                    return;
                }
                if (event.data.instance.estDonneeListeFlatDesign(lInstance.Donnees)) {
                    return;
                }
                const lParams = lInstance._getParamsCellule(lInfos.colonne, lInfos.ligne, {
                    surTotal: true
                });
                if (lInstance.Donnees && lInstance.Donnees.avecEvenementSelectionClickTotal(lParams)) {
                    if (lInstance.Pere && lInstance.Evenement) {
                        const lParamsCallback = lInstance._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.SelectionClickTotal, lParams.colonne, lParams.ligne, {
                            surTotal: true
                        });
                        lInstance.callback.appel(lParamsCallback, Enumere_EvenementListe_1.EGenreEvenementListe.SelectionClickTotal, lParams.colonne, lParams.ligne);
                    }
                }
            }
            _rechercheDeplacementPrecedenteSuivant(aParamsCelluleSource, aSuivant) {
                let lInc = (aSuivant ? 1 : -1);
                const lIndiceLigne = this._cache.lignesVisibles.indexOf(aParamsCelluleSource.ligne);
                if (lIndiceLigne < 0) {
                    return null;
                }
                let lParamsCelluleDest = this._getParamsCellule(-1, this._cache.lignesVisibles[lIndiceLigne + lInc]);
                while (lParamsCelluleDest && lParamsCelluleDest.article) {
                    if (this.Donnees.autoriserDeplacementElementSurLigne(lParamsCelluleDest, aParamsCelluleSource)) {
                        return lParamsCelluleDest;
                    }
                    lInc += (aSuivant ? 1 : -1);
                    lParamsCelluleDest = this._getParamsCellule(-1, this._cache.lignesVisibles[lIndiceLigne + lInc]);
                }
                return null;
            }
            _surDeplacementLigneSurAutreLigne(aParamsDroppable, aParamsDraggable) {
                if (aParamsDraggable && this.Donnees.surDeplacementElementSurLigne(aParamsDroppable, aParamsDraggable) !== false) {
                    this._actualiser({
                        conserverSelection: false,
                        zonesActualisation: {
                            contenu: true
                        },
                        avecEvenementModificationSelection: false
                    });
                    this.selectionnerLigne({
                        ligne: aParamsDroppable.ligne,
                        avecScroll: true,
                        avecEvenement: true
                    });
                }
            }
            _existeDeploiementDansListe() {
                if (!this.Donnees || !this.Donnees.Donnees) {
                    return false;
                }
                let lAvecDeploiement = false;
                this.Donnees.Donnees.parcourir( (aElement, aLigne) => {
                    const lParams = this._getParamsCellule(-1, aLigne);
                    if (this.Donnees.estUnDeploiement(lParams) && this._estLigneVisible(aLigne) && this.Donnees.estUnDeploiementValide(lParams)) {
                        lAvecDeploiement = true;
                        return false;
                    }
                }
                );
                return lAvecDeploiement;
            }
            _getBoutonDeploye() {
                if (!this.Donnees || !this.Donnees.avecDeploiement() || !this.Donnees.Donnees) {
                    return false;
                }
                let lEstDeploye = false;
                this.Donnees.Donnees.parcourir( (aElement, aLigne) => {
                    const lParams = this._getParamsCellule(-1, aLigne);
                    if (this.Donnees.estUnDeploiement(lParams) && this.Donnees._estDeploye(aLigne) && this._estLigneVisible(aLigne) && this.Donnees.estUnDeploiementValide(lParams)) {
                        lEstDeploye = true;
                        return false;
                    }
                }
                );
                return lEstDeploye;
            }
            avecBoutonCreationDansEntete() {
                return this._options.avecCreationEnBoutonDesignClassique || this._options.skin === ObjetListe.skin.flatDesign;
            }
            _construireBoutonsEntete(aCssWidth) {
                const lAvecBoutonsListeEntete = this._getTabBoutonsEnteteOuPiedFD(true).length > 0;
                const lAvecCBToutCocher = this._options.avecCBToutCocher;
                const lAvecBtnCreation = this.avecBoutonCreationDansEntete() && (!this._options.estBoutonCreationPiedFlottant_mobile || !this.optionsInterne.versionMobile) && this._avecLigneCreationTitre();
                const lHtmlLigneTotale = this._construireTotalFD(true, false);
                const H = [];
                if (lAvecBoutonsListeEntete || this._options.avecCBToutCocher || lAvecBtnCreation) {
                    const _construireBouton = (aBouton, aIndex) => {
                        return IE.jsx.str("ie-btnicon", {
                            "ie-model": this.jsxModeleBoutonListe.bind(this, this, aBouton),
                            "ie-if": aBouton.getVisible ? this.jsxIfBoutonListe.bind(this, aBouton) : false,
                            "ie-class": aBouton.getClass ? this.jsxGetClassBoutonListe.bind(this, aBouton) : false,
                            "ie-attr": aBouton.getAttrs ? this.jsxGetAttrsBoutonListe.bind(this, aBouton) : false,
                            title: aBouton.title ? aBouton.title : '',
                            id: aBouton.id,
                            class: [aBouton.class, aBouton.genre === ObjetListe.typeBouton.deployer ? 'bt-activable' : 'bt-activable bt-large'],
                            "aria-haspopup": aBouton.ariaHasPopup || false
                        });
                    }
                    ;
                    H.push(IE.jsx.str("div", {
                        class: "liste_btnentete",
                        "ie-nodeafter": this.jsxGetNodeAfterToolbar.bind(this),
                        style: aCssWidth ? `width:${aCssWidth}` : false,
                        role: "toolbar",
                        "ie-attr": () => {
                            return {
                                'aria-label': `${this.getAriaLabelListe()} - ${GlossaireListe_1.TradGlossaireListe.wai.toolbar}`
                            };
                        }
                    }, (aTab) => {
                        const lIndexBtnDeployer = this._cache.boutons.findIndex(aBouton => aBouton.genre === ObjetListe.typeBouton.deployer);
                        if (lIndexBtnDeployer >= 0) {
                            const lBoutonDeployer = this._cache.boutons[lIndexBtnDeployer];
                            aTab.push(_construireBouton(lBoutonDeployer, lIndexBtnDeployer));
                        }
                        if (lAvecCBToutCocher) {
                            aTab.push(IE.jsx.str("ie-checkbox", {
                                "ie-model": this.jsxGetModelCBLigneFlatDesign.bind(this, this, -1),
                                "ie-html": this.jsxGetHtmlCBEntete.bind(this),
                                "ie-attr": this.jsxGetAttrCBLigneFlatDesign.bind(this, -1),
                                style: this._options.paddingContenu_LR ? 'padding-left:' + this._options.paddingContenu_LR + 'px;' : false
                            }));
                        }
                        if (lAvecBtnCreation) {
                            aTab.push(IE.jsx.str("ie-bouton", {
                                id: this.ids.btnCreation,
                                "ie-model": this.jsxModeleBtnCreationEntete.bind(this, this),
                                class: "themeBoutonPrimaire",
                                "ie-icon": this._options.iconeTitreCreation,
                                "aria-haspopup": this._options.ariaHasPopupBtnCreation
                            }, this._options.titreCreation));
                        }
                        if (lAvecBoutonsListeEntete) {
                            aTab.push((0,
                            tag_1.tag)('div', {
                                class: 'liste_btnentete_droite',
                                role: 'presentation'
                            }, (aTabBtn) => {
                                this._cache.boutons.forEach( (aBouton, aIndex) => {
                                    if (aBouton.genre === ObjetListe.typeBouton.deployer) {
                                        return;
                                    }
                                    if (this.optionsInterne.versionMobile && aBouton.estBoutonPiedFlottant_mobile) {
                                        return;
                                    }
                                    if (aBouton.getHtml || aBouton.html) {
                                        aTabBtn.push(IE.jsx.str("div", {
                                            "ie-node": this.jsxNodeBtnEnteteLibre.bind(this, aIndex),
                                            role: "presentation"
                                        }));
                                        return;
                                    }
                                    let H = _construireBouton(aBouton, aIndex);
                                    if (aBouton.genre === ObjetListe.typeBouton.rechercher) {
                                        H = IE.jsx.str("div", {
                                            class: "liste_contbtnRechercheEntete",
                                            role: "presentation"
                                        }, H);
                                    }
                                    aTabBtn.push(H);
                                }
                                );
                            }
                            ));
                        }
                    }
                    ));
                }
                if (lHtmlLigneTotale) {
                    H.push(lHtmlLigneTotale);
                }
                return H.join('');
            }
            jsxGetHtmlCBEntete(aNode) {
                if (!this._options.avecCBToutCocher || this._options.avecCBToutCocher === ObjetListe.typeLibelleCocheCBEntete.vide) {
                    return '';
                }
                if (typeof this._options.avecCBToutCocher === 'object' && 'libelle'in this._options.avecCBToutCocher) {
                    return this._options.avecCBToutCocher.libelle || '';
                }
                switch (this._options.avecCBToutCocher) {
                case true:
                case ObjetListe.typeLibelleCocheCBEntete.toutCocher:
                    {
                        return $(aNode).hasClass('is-checked') ? ObjetTraduction_1.GTraductions.getValeur('liste.toutDecocher') : ObjetTraduction_1.GTraductions.getValeur('liste.toutCocher');
                    }
                case ObjetListe.typeLibelleCocheCBEntete.compteurSelec:
                    {
                        const lNb = this.getListeArticlesCochees().count();
                        if (lNb <= 0) {
                            return '';
                        }
                        if (lNb === 1) {
                            return ObjetTraduction_1.GTraductions.getValeur('liste.ElementSelectionne_D', [lNb]);
                        }
                        return ObjetTraduction_1.GTraductions.getValeur('liste.ElementsSelectionnes_D', [lNb]);
                    }
                }
                if (typeof this._options.avecCBToutCocher === 'object' && 'getLibelle'in this._options.avecCBToutCocher) {
                    return this._options.avecCBToutCocher.getLibelle() || '';
                }
            }
            _construireTotalFD(aPourHeader, aTotalDansScroll) {
                const lHtml = this.construireTotalInterneFD(aPourHeader, aTotalDansScroll);
                let lCss = '';
                if (!aTotalDansScroll) {
                    lCss = aPourHeader ? ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeHeader : ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeFooter;
                } else {
                    lCss = ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeHeaderFooterInScroll;
                }
                if (lHtml) {
                    return IE.jsx.str("div", {
                        class: [ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeTotaleFd, lCss],
                        role: "group",
                        "ie-attr": () => {
                            return {
                                'aria-label': this.getAriaLabelListe()
                            };
                        }
                    }, lHtml);
                }
                return '';
            }
            construireTotalInterneFD(aPourHeader, aTotalDansScroll) {
                if (this._options.skin === ObjetListe.skin.flatDesign && this.Donnees && this.estDonneeListeFlatDesign(this.Donnees) && this.Donnees.getTotal && this.Donnees._getLigneTotaleSelectionnableFd) {
                    let lLigneTotale = this.Donnees.getTotal(aPourHeader);
                    if (!lLigneTotale) {
                        this.getListeArticles().parcourir( (aArticle, aIndex) => {
                            const lLigne = this.Donnees._getLigneTotaleSelectionnableFd(aIndex);
                            if (lLigne && !!lLigne.header === !!aPourHeader && lLigne.estVisible) {
                                lLigneTotale = lLigne;
                                return false;
                            }
                        }
                        );
                    }
                    if (lLigneTotale) {
                        if (!!lLigneTotale.totalDansScroll !== aTotalDansScroll) {
                            return '';
                        }
                        const lAvecSelection = lLigneTotale.avecSelection && !!lLigneTotale.article;
                        let lEstSelectionne = false;
                        if (!this.Donnees.enConstruction_cacheRechercheTexte && lAvecSelection) {
                            lEstSelectionne = this._etatSelectionCellule({
                                ligne: lLigneTotale.ligne,
                                colonne: lLigneTotale.colonne
                            });
                        }
                        const lEnRecherche = this.Donnees.enConstruction_cacheRechercheTexte;
                        let lMargin = '';
                        if (!IE.estMobile && !aTotalDansScroll) {
                            lMargin = `0 ${this._options.paddingContenu_LR + this._getLargeurScrollV()}px 0 ${this._options.paddingContenu_LR}px`;
                        }
                        const lFuncAttrTotalFd = () => {
                            const lAttrs = {};
                            if (lAvecSelection) {
                                lAttrs['aria-pressed'] = !!this._etatSelectionCellule({
                                    ligne: lLigneTotale.ligne,
                                    colonne: lLigneTotale.colonne
                                });
                            }
                            return lAttrs;
                        }
                        ;
                        return IE.jsx.str("div", {
                            class: [lAvecSelection ? ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.selectable : '', lEstSelectionne ? ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.selected : '', lAvecSelection && IE.estMobile && !this.Donnees.enConstruction_cacheRechercheTexte ? IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple : ''],
                            style: {
                                margin: lMargin
                            },
                            id: lAvecSelection ? this.getIdCellule(lLigneTotale.colonne, lLigneTotale.ligne) : false,
                            "ie-node": lAvecSelection && !lEnRecherche ? this.jsxNodeTotalFd.bind(this, this, lLigneTotale.ligne, lLigneTotale.colonne) : false,
                            "ie-attr": !lEnRecherche ? lFuncAttrTotalFd : false,
                            tabindex: "0",
                            role: lAvecSelection ? 'button' : false
                        }, (aHtml) => {
                            var _a;
                            aHtml.push(IE.jsx.str("span", {
                                class: [lLigneTotale.avecEtiquette ? ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.totalEtiqu : Divers_css_1.StylesDivers.srOnly]
                            }, ObjetTraduction_1.GTraductions.getValeur('liste.total')));
                            if (lLigneTotale.avecEtiquette) {
                                aHtml.push(IE.jsx.str("div", {
                                    class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.totalEtiquSep
                                }));
                            }
                            aHtml.push(IE.jsx.str("div", {
                                class: ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.totalContent,
                                "aria-label": lLigneTotale.wai || false
                            }, ((_a = lLigneTotale.getHtml) === null || _a === void 0 ? void 0 : _a.call(lLigneTotale)) || ''));
                        }
                        );
                    }
                }
                return '';
            }
            _getJConteneurInputRecherche() {
                return this._options.positionBoutons === NSListe.positionBoutons.entete ? $('#' + this.Nom.escapeJQ() + ' .liste_contbtnRechercheEntete') : $('#' + this.Nom.escapeJQ() + ' .liste_cont_btnscroll');
            }
            _creerZoneRechercheTexte(aAvecFocus) {
                const lJContenur = this._getJConteneurInputRecherche();
                if (lJContenur.find('.liste_rechercheTexte').length === 0) {
                    let lAvecRecherche = false;
                    if (this._cache.boutons) {
                        lAvecRecherche = !!this._cache.boutons.find(aBouton => aBouton.genre === ObjetListe.typeBouton.rechercher);
                    }
                    if (!lAvecRecherche) {
                        return;
                    }
                    const lFuncHtmlRecherche = () => this._cache.strResultRecherche;
                    const H = (IE.jsx.str("div", {
                        class: "liste_rechercheTexte like-input"
                    }, IE.jsx.str("input", {
                        type: "text",
                        "ie-model": this.jsxModelRecherche.bind(this, this),
                        placeholder: ObjetTraduction_1.GTraductions.getValeur('liste.Rechercher'),
                        title: ObjetTraduction_1.GTraductions.getValeur('liste.Rechercher'),
                        "aria-label": ObjetTraduction_1.GTraductions.getValeur('liste.Rechercher'),
                        autocorrect: "off",
                        autocapitalize: "off",
                        spellcheck: "false",
                        class: "browser-default"
                    }), IE.jsx.str("ie-btnicon", {
                        class: "icon_fermeture_widget",
                        "ie-model": this.jsxBtnRechercheTexte.bind(this, this),
                        title: ObjetTraduction_1.GTraductions.getValeur('liste.supprimer')
                    }), IE.jsx.str("div", {
                        role: "alert",
                        class: ['liste_rechercheTexte_alerte', Divers_css_1.StylesDivers.srOnly, 'hide'],
                        "ie-html": lFuncHtmlRecherche,
                        "aria-atomic": "true"
                    })));
                    lJContenur.ieHtmlAppend(H, {
                        controleur: this.controleur
                    });
                }
                if (aAvecFocus) {
                    setTimeout( () => {
                        const lElement = lJContenur.find('.liste_rechercheTexte input').get(0);
                        ObjetHtml_1.GHtml.setFocusEdit(lElement);
                    }
                    , 0);
                }
            }
            _supprimerZoneRechercheTexte() {
                this._getJConteneurInputRecherche().find('.liste_rechercheTexte').remove();
            }
            _annulerRechercheTexte() {
                this._setRechercheSaisie('');
                this._supprimerZoneRechercheTexte();
                const lCacheBouton = this._cache.boutons.find(aBouton => aBouton.genre === ObjetListe.typeBouton.rechercher);
                ObjetHtml_1.GHtml.setFocus(lCacheBouton && lCacheBouton.id ? lCacheBouton.id : this.IdPremierElement);
                this._filtreRechercheTexte({
                    annulerRechercheTexte: true
                });
            }
            _estLigneDansRangeNonConstruitDyn(aNumeroLigne) {
                const lCacheRef = this._cache.refresh;
                if (!lCacheRef.avecConstructionDynamiqueContenu) {
                    return false;
                }
                const lIndexLigneVisible = this._cache.lignesVisibles.indexOf(aNumeroLigne);
                if (lIndexLigneVisible < 0) {
                    return false;
                }
                const lStructureMin = lCacheRef.structure[lCacheRef.mapRangesExist.min];
                const lStructureMax = lCacheRef.structure[lCacheRef.mapRangesExist.max];
                if (lStructureMin && lStructureMax) {
                    return lIndexLigneVisible < lStructureMin.deb || lIndexLigneVisible > lStructureMax.fin;
                }
                return false;
            }
            _getPositionTopLigneDynamiqueEvaluee(aNumeroLigne) {
                const lCacheRef = this._cache.refresh;
                if (!lCacheRef.avecConstructionDynamiqueContenu) {
                    return null;
                }
                const lIndexLigne = this._cache.lignesVisibles.indexOf(aNumeroLigne);
                if (lIndexLigne < 0) {
                    return null;
                }
                let lPosTop_Cellule = ObjetPosition_1.GPosition.getClientRect(lCacheRef.node_gab_start[0]).top;
                for (const lStructure of lCacheRef.structure) {
                    const lHeightStruct = lCacheRef.getHeightStructure(lStructure);
                    if (lIndexLigne > lStructure.fin) {
                        lPosTop_Cellule += lHeightStruct;
                    } else {
                        lPosTop_Cellule += lHeightStruct / (lStructure.fin - lStructure.deb + 1) * (lIndexLigne - lStructure.deb);
                        break;
                    }
                }
                return lPosTop_Cellule;
            }
            _actualiserHeightRanges(aIndiceRange) {
                const lCacheRef = this._cache.refresh;
                let lAvecActualisation = false;
                const lTabIndices = [];
                if (aIndiceRange >= 0) {
                    lTabIndices.push(aIndiceRange);
                } else {
                    for (let lIndice = lCacheRef.mapRangesExist.min; lIndice <= lCacheRef.mapRangesExist.max; lIndice++) {
                        lTabIndices.push(lIndice);
                    }
                }
                for (const lIndice of lTabIndices) {
                    const lRangeConstruit = lCacheRef.mapRangesExist.get(lIndice);
                    const lStructure = lCacheRef.structure[lIndice];
                    if (!lRangeConstruit || !lStructure) {
                        continue;
                    }
                    if (lRangeConstruit.node_start && lRangeConstruit.node_end) {
                        lStructure.height = ObjetPosition_1.GPosition.getClientRect(lRangeConstruit.node_end).top - ObjetPosition_1.GPosition.getClientRect(lRangeConstruit.node_start).bottom;
                        lAvecActualisation = true;
                    }
                }
                if (lAvecActualisation) {
                    let lHeightTotal = 0;
                    let lNbLignesTotal = 0;
                    lCacheRef.structure.forEach( (aStructure) => {
                        if (aStructure.height > 0) {
                            lHeightTotal += aStructure.height;
                            lNbLignesTotal += aStructure.nbLignes;
                        }
                    }
                    );
                    if (lNbLignesTotal > 0) {
                        lCacheRef.hauteurMoyenneLigne = lHeightTotal / lNbLignesTotal;
                    }
                }
            }
            _callbackObserverRefreshContenu(aObservables) {
                let lAvecRefresh = false;
                aObservables.forEach( (aObservable) => {
                    const lVisible = aObservable.intersectionRatio > 0 || aObservable.isIntersecting;
                    const lData = this._cache.refresh.mapNodesObs.get(aObservable.target);
                    if (lData) {
                        if (lVisible) {
                            lAvecRefresh = true;
                        } else {
                            if (!lData.gabarit) {
                                lAvecRefresh = true;
                            }
                        }
                    }
                }
                );
                if (lAvecRefresh) {
                    this._refreshContenuDynamique({
                        avecBackupScroll: this.optionsInterne.versionMobile
                    });
                }
            }
            addContenuSurRefreshDyn(aParams) {
                const lParams = Object.assign({
                    start: false,
                    indices: []
                }, aParams);
                const lCache = this._cache;
                const lCacheRef = lCache.refresh;
                lCache.infosZonesColonnes.forEach( (aInfosZoneColonnes, aIndex) => {
                    const H = [];
                    for (const lIndice of lParams.indices) {
                        H.push(this._construireContenuRange(aInfosZoneColonnes, lIndice));
                    }
                    if (H) {
                        let lNode = lCacheRef.node_gab_end[aIndex];
                        if (lParams.start) {
                            lNode = lCacheRef.node_gab_start[aIndex].nextSibling;
                        }
                        if (!lNode || !lNode.parentNode) {
                            return;
                        }
                        IEHtml.injectHTMLParams({
                            html: H.join(''),
                            element: lNode.parentNode,
                            insererAvantLeNode: lNode,
                            controleur: this.controleur,
                            ignorerScroll: true,
                            clearJSX: true
                        });
                    }
                }
                );
            }
            _getClassRange(aIndiceRange) {
                return `_range_${aIndiceRange}`;
            }
            _refreshContenuDynamique(aParams) {
                const lCache = this._cache;
                const lCacheRef = lCache.refresh;
                if (!lCacheRef.avecConstructionDynamiqueContenu) {
                    return;
                }
                const lParams = Object.assign({
                    surInitialisation: false,
                    avecBackupScroll: false,
                    refreshRecursif: false,
                    conserverPositionElement: null
                }, aParams);
                let lIndiceRangeDebut = lCacheRef.mapRangesExist.min;
                let lIndiceRangeFin = lCacheRef.mapRangesExist.max;
                if (!lCacheRef.mapRangesExist.has(lIndiceRangeDebut) || !lCacheRef.mapRangesExist.has(lIndiceRangeFin)) {
                    return;
                }
                let lRectListe = ObjetPosition_1.GPosition.getClientRect(ObjetHtml_1.GHtml.getElement(this.Nom));
                let lRectListe2 = ObjetPosition_1.GPosition.getClientRect($(`#${this.Nom.escapeJQ()}>.ObjetListe`).get(0));
                if (lRectListe2.height > lRectListe.height) {
                    IE.log.addLog(`_ObjetListe : _refreshContenuDynamique avec overflow visible du contenu (demander  fv) ?`);
                    lRectListe = lRectListe2;
                }
                if (lRectListe.width === 0 || lRectListe.height === 0) {
                    return;
                }
                let lAvecModif = false;
                let lBackupScroll = null;
                if (!lParams.surInitialisation) {
                    if (lParams.avecBackupScroll) {
                        lBackupScroll = this._backupScroll({
                            conserverPositionScroll: true
                        });
                    }
                    const lBorneListeBottom = Math.min(ObjetNavigateur_1.Navigateur.ecranH, lRectListe.bottom);
                    const lBorneListeTop = Math.max(0, lRectListe.top);
                    const lRectStart = ObjetPosition_1.GPosition.getClientRect(lCacheRef.node_gab_start[0]);
                    const lMapIndexVisibles = new Map();
                    let lPos = lRectStart.top;
                    for (let lIndex = 0; lIndex < lCacheRef.structure.length; lIndex++) {
                        const lStructure = lCacheRef.structure[lIndex];
                        const lHeight = lCacheRef.getHeightStructure(lStructure);
                        if (lPos + lHeight > lBorneListeTop && lPos < lBorneListeBottom) {
                            lMapIndexVisibles.set(lIndex, true);
                            if (lIndex > 0) {
                                lMapIndexVisibles.set(lIndex - 1, true);
                            }
                            if (lIndex < lCacheRef.structure.length - 1) {
                                lMapIndexVisibles.set(lIndex + 1, true);
                            }
                        } else if (lPos + lHeight > lBorneListeBottom) {
                            break;
                        }
                        lPos += lHeight;
                    }
                    if (lMapIndexVisibles.size === 0) {
                        lMapIndexVisibles.set(0, true);
                    }
                    const lIndices_suppr = [];
                    for (let lIndiceRange = lIndiceRangeDebut; lIndiceRange <= lIndiceRangeFin; lIndiceRange++) {
                        if (lCacheRef.mapRangesExist.has(lIndiceRange) && !lMapIndexVisibles.has(lIndiceRange)) {
                            lIndices_suppr.push(lIndiceRange);
                        }
                    }
                    if (lIndices_suppr.length > 0) {
                        let lElementFocus = null;
                        if (ObjetHtml_1.GHtml.focusEstDansElement && ObjetHtml_1.GHtml.focusEstDansElement(this.Nom)) {
                            lElementFocus = ObjetHtml_1.GHtml.getElementEnFocus();
                        }
                        lAvecModif = true;
                        const lFindExpr = [];
                        lIndices_suppr.forEach( (aIndexRange) => {
                            lFindExpr.push(`.${this._getClassRange(aIndexRange)}`);
                            this._cache.structureWAI.lignes.forEach( (aLigne, aIndexStruct) => {
                                if (aLigne && aLigne.indiceRange === aIndexRange) {
                                    this._cache.structureWAI.lignes[aIndexStruct] = null;
                                }
                            }
                            );
                        }
                        );
                        for (const lIndex in lCache.infosZonesColonnes) {
                            $(lCacheRef.node_gab_end[lIndex]).parent().find(lFindExpr.join(',')).remove();
                        }
                        if (lElementFocus && !$.contains(document.body, lElementFocus)) {
                            ObjetHtml_1.GHtml.setFocus(this.IdPremierElement);
                        }
                    }
                    const lIndices_ajout_after = [];
                    const lIndices_ajout_before = [];
                    for (const lIndice of lMapIndexVisibles.keys()) {
                        if (lIndice > lIndiceRangeFin) {
                            lIndices_ajout_after.push(lIndice);
                        }
                        if (lIndice < lIndiceRangeDebut) {
                            lIndices_ajout_before.push(lIndice);
                        }
                    }
                    const lFuncSortNumber = (a, b) => a - b;
                    if (lIndices_ajout_after.length > 0) {
                        lAvecModif = true;
                        this.addContenuSurRefreshDyn({
                            indices: lIndices_ajout_after.sort(lFuncSortNumber),
                            start: false
                        });
                    }
                    if (lIndices_ajout_before.length > 0) {
                        lAvecModif = true;
                        this.addContenuSurRefreshDyn({
                            indices: lIndices_ajout_before.sort(lFuncSortNumber),
                            start: true
                        });
                    }
                    if (lAvecModif) {
                        this._controleHeightLigne();
                        this._surlignageRechercheTexte();
                        this.actualiserLignesContenusWAI();
                    }
                }
                if (lAvecModif || lParams.surInitialisation) {
                    lIndiceRangeFin = lCacheRef.mapRangesExist.max;
                    lIndiceRangeDebut = lCacheRef.mapRangesExist.min;
                    let lheight_start = 0;
                    let lHeight_end = 0;
                    lCacheRef.structure.forEach( (aStructure, aIndice) => {
                        const lHeight = lCacheRef.getHeightStructure(aStructure);
                        if (aIndice < lIndiceRangeDebut) {
                            lheight_start += lHeight;
                        } else if (aIndice > lIndiceRangeFin) {
                            lHeight_end += lHeight;
                        }
                    }
                    );
                    for (const lIndex in lCache.infosZonesColonnes) {
                        lCacheRef.observer.unobserve(lCacheRef.node_gab_start[lIndex]);
                        lCacheRef.observer.unobserve(lCacheRef.node_gab_end[lIndex]);
                        lheight_start = Math.max(0, lheight_start);
                        $(lCacheRef.node_gab_start[lIndex]).height(lheight_start);
                        lCacheRef.observer.observe(lCacheRef.node_gab_start[lIndex]);
                        lHeight_end = Math.max(0, lHeight_end);
                        $(lCacheRef.node_gab_end[lIndex]).height(lHeight_end);
                        lCacheRef.observer.observe(lCacheRef.node_gab_end[lIndex]);
                    }
                    if (lBackupScroll) {
                        this._setScroll(lBackupScroll);
                    }
                    this._cache.positionsCelluleCadreSelection = {};
                    this._actualiserCadreSelection();
                }
                let lConserverPositionElement = lParams.conserverPositionElement;
                if (lParams.conserverPositionElement) {
                    const lElementCellule = ObjetHtml_1.GHtml.getElement(this.getIdCellule(lParams.conserverPositionElement.colonne, lParams.conserverPositionElement.ligne));
                    const lBackupScrollElement = this._backupScroll({
                        conserverPositionScroll: true
                    });
                    if (lBackupScrollElement) {
                        let lPos = 0;
                        if (lElementCellule) {
                            lPos = ObjetPosition_1.GPosition.getClientRect(lElementCellule).top;
                            lConserverPositionElement = null;
                        } else if (!lBackupScroll) {
                            lPos = this._getPositionTopLigneDynamiqueEvaluee(lParams.conserverPositionElement.ligne);
                        }
                        const lDiffY = lPos - lParams.conserverPositionElement.rectCellule.top;
                        if (lDiffY !== 0 && lPos !== null) {
                            lBackupScrollElement.scrollTop += lDiffY;
                            this._setScroll(lBackupScrollElement);
                        }
                    }
                }
                if (lAvecModif && lParams.refreshRecursif) {
                    if (lParams.indiceRecursif > 10) {
                        return;
                    }
                    this._refreshContenuDynamique({
                        refreshRecursif: true,
                        indiceRecursif: lParams.indiceRecursif > 0 ? lParams.indiceRecursif + 1 : 1,
                        conserverPositionElement: lConserverPositionElement
                    });
                }
            }
            _scrollSurLigne(aParams) {
                if (this._enResize) {
                    return;
                }
                if (this._cache.lignesVisibles.indexOf(aParams.ligne) < 0) {
                    return;
                }
                const lBackupScroll = this._backupScroll({
                    conserverPositionScroll: true
                });
                if (!lBackupScroll) {
                    return;
                }
                if (!lBackupScroll.elementScrollV) {
                    return;
                }
                const lLigneAConstruire = this._estLigneDansRangeNonConstruitDyn(aParams.ligne);
                let lTopCelluleDansContenu = 0;
                let lHeightCellule = 0;
                const lRectContenuScroll = ObjetPosition_1.GPosition.getClientRect(lBackupScroll.elementScrollV);
                if (lLigneAConstruire) {
                    const lCacheRef = this._cache.refresh;
                    if (!lCacheRef.avecConstructionDynamiqueContenu) {
                        return;
                    }
                    lHeightCellule = lCacheRef.hauteurMoyenneLigne;
                    lTopCelluleDansContenu = this._getPositionTopLigneDynamiqueEvaluee(aParams.ligne);
                } else {
                    let lJCellule = aParams.colonne >= 0 ? $('#' + this.getIdCellule(aParams.colonne, aParams.ligne).escapeJQ()) : null;
                    if (!lJCellule || lJCellule.length === 0) {
                        this._cache.infosZonesColonnes.every( (aBloc) => {
                            return aBloc.colonnesVisibles.every( (aNumeroColonne) => {
                                lJCellule = $('#' + this.getIdCellule(aNumeroColonne, aParams.ligne).escapeJQ());
                                return lJCellule.length === 0;
                            }
                            );
                        }
                        );
                        if (lJCellule.length === 0) {
                            return;
                        }
                    }
                    const lRectCellule = ObjetPosition_1.GPosition.getClientRect(lJCellule.get(0));
                    lHeightCellule = lRectCellule.outerHeight + (aParams.ecartForce * 2 || 0);
                    lTopCelluleDansContenu = lRectCellule.top - lRectContenuScroll.top - (aParams.ecartForce || 0);
                }
                let lDecalageScroll = 0;
                if (lTopCelluleDansContenu < 0) {
                    lDecalageScroll = lTopCelluleDansContenu;
                } else if (lTopCelluleDansContenu > 0 && (aParams.avecScrollTopLigne || lRectContenuScroll.height === 0)) {
                    lDecalageScroll = lTopCelluleDansContenu;
                } else {
                    const lZoneHeight = lRectContenuScroll.contentHeight;
                    if (lTopCelluleDansContenu + lHeightCellule > lZoneHeight && lTopCelluleDansContenu > 0) {
                        lDecalageScroll = lTopCelluleDansContenu + lHeightCellule - lZoneHeight;
                    }
                }
                if (lDecalageScroll !== 0) {
                    lBackupScroll.scrollTop = lBackupScroll.scrollTop + lDecalageScroll;
                    this._setScroll(lBackupScroll);
                    this._refreshContenuDynamique({
                        avecBackupScroll: true,
                        refreshRecursif: true
                    });
                }
                if (lLigneAConstruire) {
                    if (!aParams._appelRecursif) {
                        this._scrollSurLigne(Object.assign({}, aParams, {
                            _appelRecursif: true
                        }));
                        return;
                    }
                    ;
                }
            }
            _construireLignesContenusWAI() {
                return IE.jsx.str(IE.jsx.fragment, null, (aTabLignes) => {
                    this._cache.structureWAI.lignes.forEach( (aStructure, aLigne) => {
                        if (aStructure) {
                            aTabLignes.push(IE.jsx.str("div", {
                                role: "row",
                                "aria-rowindex": aStructure.rowIndex,
                                "aria-owns": aStructure.ids.join(' ').trim()
                            }));
                        }
                    }
                    );
                }
                );
            }
            avecTriColonne() {
                return this.Donnees && this.ListeTitres && !!this._cache.colonnesTri;
            }
            actualiserLignesContenusWAI() {
                const lElement = ObjetHtml_1.GHtml.getElement(this.ids.WAILignesContenu);
                if (lElement) {
                    $(lElement).html(this._construireLignesContenusWAI());
                }
            }
            _avecLigneCreationTitreEnLigne() {
                return !this.optionsInterne.versionMobile && !this.avecBoutonCreationDansEntete() && this._avecLigneCreationTitre();
            }
            avecFiltresVisibles() {
                return !!this._options.avecFiltresVisibles && this.estDonneeListeFlatDesign(this.Donnees) && (this.Donnees.getNbrLignes() > 0 || !this.Donnees.estFiltresParDefaut());
            }
            _construireFiltres() {
                if (this.avecFiltresVisibles() && this.Donnees && this.estDonneeListeFlatDesign(this.Donnees) && this.Donnees._construireFiltres && this._cache.boutons && this._cache.boutons.length > 0) {
                    const lAvecFiltre = !this._cache.boutons.every( (aBouton) => aBouton.genre !== ObjetListe.typeBouton.filtrer);
                    if (lAvecFiltre) {
                        const lRoleGrid = this._estRoleTreeGrid();
                        const lGetNodeFiltres = (aNode) => {
                            const lDonnees = this.Donnees;
                            const lHtml = lDonnees._construireFiltres();
                            if (lHtml) {
                                ObjetHtml_1.GHtml.setHtml(aNode, lHtml);
                            }
                        }
                        ;
                        return (IE.jsx.str("div", {
                            class: "zone-filtres",
                            role: lRoleGrid ? 'row' : 'group',
                            "ie-attr": () => {
                                return {
                                    'aria-label': `${this.getAriaLabelListe()} - ${ObjetTraduction_1.GTraductions.getValeur('liste.Filtrer')}`
                                };
                            }
                        }, IE.jsx.str("div", {
                            "ie-node": lGetNodeFiltres,
                            role: lRoleGrid ? 'treegrid' : 'presentation'
                        })));
                    }
                }
                return '';
            }
            _surEventDownLigne(aParams) {
                if (aParams && aParams.event && aParams.event.target && aParams.event.target.id === this.IdEdition) {
                    return;
                }
                delete this._cache.infosMouseDownCellule_apresFinEdition;
                if (this._cache.finEditionCreation) {
                    if (this.estDonneeListeFlatDesign(this.Donnees)) {
                        return;
                    }
                    const lResultFinEdition = this._cache.finEditionCreation();
                    if (!this.Donnees.options.editionSurSelectionApresFinEdition || (lResultFinEdition && typeof lResultFinEdition === 'object' && 'avecMessagerErreur'in lResultFinEdition && lResultFinEdition.avecMessagerErreur)) {
                        return;
                    }
                    this._cache.infosMouseDownCellule_apresFinEdition = {
                        ligne: aParams.ligne,
                        colonne: aParams.colonne
                    };
                    return;
                }
                if (this._cache.editionEnCoursEvenement) {
                    this._cache.editionEnCoursEvenement = false;
                    this._nettoyerElementsEditionEnCours();
                }
                if (this._estEventSansSelect(aParams.event)) {
                    return;
                }
                if (aParams.gestionShift && !aParams.event.shiftKey) {
                    this._cache.celluleClicNonShift = {
                        ligne: aParams.ligne,
                        colonne: aParams.colonne
                    };
                }
                const lAvecMultiSelection = this.Donnees.avecMultiSelection();
                let lSansSelection = false;
                if (aParams.gestionMultiSelection) {
                    lSansSelection = aParams.event.button === 2 && this._etatSelectionCellule({
                        ligne: aParams.ligne,
                        colonne: aParams.colonne
                    }) && lAvecMultiSelection && (this._getListeElementsSelection().count() > 1 || (this._estSelectionParCellule(aParams.ligne, aParams.colonne) && this.getTableauCellulesSelection().length > 0));
                }
                if (!lSansSelection) {
                    lSansSelection = !this._surSelection(aParams.colonne, aParams.ligne, {
                        ctrlKey: aParams.event.ctrlKey,
                        shiftKey: aParams.event.shiftKey,
                        surInteractionUtilisateur: true
                    });
                    if (aParams.gestionMultiSelection && aParams.event.shiftKey && lAvecMultiSelection && this.Donnees.avecMultiSelectionSurShift()) {
                        aParams.event.preventDefault();
                    }
                }
                if (!aParams.gestionMultiSelection || (!lAvecMultiSelection || (!aParams.event.ctrlKey && !aParams.event.shiftKey))) {
                    if (this.surDeploiement(aParams.event, aParams.colonne, aParams.ligne)) {
                        aParams.event.preventDefault();
                    }
                }
                if (!lSansSelection) {
                    this.surSelectionEvenement(aParams.colonne, aParams.ligne);
                }
            }
            _estEventSansSelect(aEvent) {
                if (aEvent && aEvent.target) {
                    const lNode = ObjetHtml_1.GHtml.getClosestFocusable(aEvent.target);
                    if (lNode && !lNode.classList.contains('liste-cellule-focusable') && !!lNode.closest('.liste-cellule-focusable')) {
                        return true;
                    }
                }
                return false;
            }
            _estRoleTreeGrid() {
                return this._options.skin !== ObjetListe.skin.flatDesign;
            }
            _avecDeploiementDesactive() {
                if (!this.Donnees) {
                    return true;
                }
                if (this.Donnees.options.ignorerDeploiementSurRechercheTexte) {
                    return !this._estRechercheTexteVide();
                }
                return false;
            }
            _surlignageRechercheTexte() {
                if (this._estRechercheTexteVide()) {
                    RechercheTexte_1.RechercheTexte.removeSurlignage($(`#${this.Nom.escapeJQ()}`));
                    return;
                }
                const lRangeLignes = {
                    debut: 0,
                    fin: this._cache.lignesVisibles.length
                };
                if (this._cache.refresh.avecConstructionDynamiqueContenu) {
                    const lCacheRef = this._cache.refresh;
                    lRangeLignes.debut = lCacheRef.structure[lCacheRef.mapRangesExist.min].deb;
                    lRangeLignes.fin = lCacheRef.structure[lCacheRef.mapRangesExist.max].fin + 1;
                }
                let lTabDOM = [];
                for (let iIndice = lRangeLignes.debut; iIndice < lRangeLignes.fin; iIndice++) {
                    const lNumeroLigne = this._cache.lignesVisibles[iIndice];
                    this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                        aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                            const lElement = ObjetHtml_1.GHtml.getElement(this.getIdCellule(aNumeroColonne, lNumeroLigne));
                            if (lElement) {
                                lTabDOM.push(lElement);
                            }
                        }
                        );
                    }
                    );
                }
                if (!RechercheTexte_1.RechercheTexte.surlignage(lTabDOM, this.getRechercheTexte().enleverEntites())) {
                    RechercheTexte_1.RechercheTexte.removeSurlignage($(`#${this.Nom.escapeJQ()}`));
                }
            }
            _getTabElementsPourRsizeObserver() {
                return [];
            }
            _actualiserZones(aZonesActualisation, aParams) {}
            composeIconEtImage(aParamsCellule, aEstIcon) {
                const lValeur = this.Donnees._getValeur(aParamsCellule);
                const lStyle = this.Donnees.getStyle(aParamsCellule);
                const lClass = this.Donnees.getClass(aParamsCellule);
                let lTooltip = this.Donnees.getTooltip(aParamsCellule);
                if (!lTooltip) {
                    lTooltip = GlossaireWAI_1.TradGlossaireWAI.Coche;
                }
                const lClasses = ['liste_contenu_ligne', lValeur, lClass ? ' ' + lClass : ''];
                if (aEstIcon) {
                    lClasses.push('AlignementMilieu');
                    return {
                        html: IE.jsx.str("i", {
                            class: lClasses,
                            style: lStyle || false,
                            role: "presentation"
                        }),
                        tooltip: lTooltip,
                        labelledby: true
                    };
                }
                const lLargeurImage = this._options.largeurImage > 0 ? `width:${this._options.largeurImage}px;` : '';
                return {
                    html: IE.jsx.str("div", {
                        style: "width: 100%",
                        class: "AlignementMilieu"
                    }, IE.jsx.str("div", {
                        class: lClasses,
                        style: lLargeurImage + (lStyle ? ' ' + lStyle : '')
                    }, "\u00A0")),
                    tooltip: lTooltip,
                    labelledby: true
                };
            }
            async surEditionTextFenetreAsync(aParams) {
                const lParams = Object.assign({
                    html: '',
                    surCreation: false,
                    surInputText: false,
                    colonne: -1
                }, aParams);
                let lStrTitre = lParams.surCreation && this._options.titreCreation ? this._options.titreCreation : '';
                if (this.ListeTitres && this.ListeTitres[0]) {
                    const lDescripteurTitre = this.ListeTitres[0][lParams.colonne];
                    let lStr = '';
                    if (lDescripteurTitre) {
                        lStr = lDescripteurTitre.getLibelleHtml ? lDescripteurTitre.getLibelleHtml() : lDescripteurTitre.libelleHtml ? lDescripteurTitre.libelleHtml : lDescripteurTitre.estCoche ? '' : lDescripteurTitre.libelle || '';
                    }
                    if (lStr) {
                        if (lParams.surCreation && this._options.titreCreation) {
                            lStrTitre = lStrTitre + ' - ' + lStr;
                        }
                        if (!lParams.surCreation) {
                            lStrTitre = ObjetTraduction_1.GTraductions.getValeur('liste.modifier') + ' - ' + lStr;
                        }
                    }
                }
                class ObjetFenetreEditionText extends ObjetFenetre_1.ObjetFenetre {
                    constructor(...aParams) {
                        super(...aParams);
                        this.setOptionsFenetre({
                            listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer'), {
                                estValider: true,
                                libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                            }],
                            largeur: 400,
                            titre: lStrTitre,
                            avecCroixFermeture: true,
                            fermerFenetreSurClicHorsFenetre: IE.estMobile,
                            bloquerFocus: IE.estMobile
                        });
                    }
                    composeContenu() {
                        const lGetNode = (aNode) => {
                            ObjetHtml_1.GHtml.setHtml(aNode, IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("label", {
                                for: this.IdEdition,
                                class: Divers_css_1.StylesDivers.srOnly
                            }, lStrTitre), lParams.html), {
                                instance: this.Pere
                            });
                            if (lParams.surInputText) {
                                $(aNode).on('keyup', (aEvent) => {
                                    if (ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent)) {
                                        this.surValidation(1);
                                    }
                                }
                                );
                            }
                        }
                        ;
                        return IE.jsx.str("div", {
                            "ie-node": lGetNode
                        });
                    }
                    surAfficher() {
                        if (lParams.surCreation) {
                            ObjetHtml_1.GHtml.setFocusEdit(this.IdEdition);
                            ObjetHtml_1.GHtml.setSelectionEdit(this.IdEdition);
                        }
                    }
                }
                const lResult = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetreEditionText, {
                    pere: this,
                    initialiser: function(aInstanceFenetre) {
                        aInstanceFenetre.IdEdition = this.IdEdition;
                    }
                }).afficher();
                if (lResult && lResult.bouton && lResult.bouton.estValider) {
                    if (this._cache.finEditionCreation) {
                        this._cache.finEditionCreation();
                    }
                } else {
                    if (lParams.surCreation) {
                        this._annulerCreation();
                        $(`#${this.ids.btnCreation.escapeJQ()}`).trigger('focus');
                    } else {
                        this._surEditionFin({
                            colonne: this._cache.selectionCellule.colonne,
                            ligne: this._cache.selectionCellule.ligne
                        });
                    }
                }
            }
            startNavigationContenu() {
                let lResult = false;
                if (this._cache.selectionCellule.ligne >= 0) {
                    lResult = this._navigationCelluleSuivante({
                        sansRecherche: true,
                        forcerNavigationFocus: true
                    });
                }
                if (!lResult) {
                    lResult = this._navigationCelluleSuivante({
                        ligne: -1,
                        colonne: -1,
                        forcerNavigationFocus: true
                    });
                }
            }
            initCacheStructureWAI() {
                this._cache.structureWAI = {
                    titres: [],
                    lignes: [],
                    totals: []
                };
            }
            estDonneeListeFlatDesign(aDonnees) {
                return !!(this.Donnees && this.Donnees.estFlatDesign);
            }
            estDonneeListeTableau(aDonnees) {
                return !!(this.Donnees && !this.Donnees.estFlatDesign);
            }
            jsxGetClassCellulePere(aParams) {
                return this.Donnees._getClassCelluleConteneur(aParams) || '';
            }
            jsxAttrCellule(aParamsCellule, aRoleGrid) {
                const lAttr = {};
                if (this.Donnees.enConstruction_cacheRechercheTexte) {
                    return lAttr;
                }
                if (this.Donnees._avecSelection(aParamsCellule)) {
                    lAttr['aria-selected'] = !!this._etatSelectionCellule({
                        ligne: aParamsCellule.ligne,
                        colonne: aParamsCellule.colonne
                    });
                }
                if (!aRoleGrid && this.Donnees instanceof ObjetDonneesListeFlatDesign_1.ObjetDonneesListeFlatDesign && this.Donnees.options.avecCocheCBSurLigne && this.Donnees.avecCB(aParamsCellule)) {
                    const lVal = this._getValueCBFlatDesign(aParamsCellule.ligne);
                    lAttr['aria-checked'] = lVal === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Grise ? 'mixed' : this._getValueCBFlatDesign(aParamsCellule.ligne) === true;
                    if (this.Donnees.getDisabledCB(aParamsCellule)) {
                        lAttr['aria-disabled'] = true;
                    } else {
                        lAttr['aria-disabled'] = null;
                        this._cache.avecWAICocheLigne = true;
                    }
                }
                return lAttr;
            }
            jsxGetClassListe() {
                const lClasses = ['skin_' + this._options.skin];
                if (!this.Donnees || this.Donnees.Donnees.count() === 0) {
                    lClasses.push('vide');
                }
                if (this._options.avecOmbreDroite) {
                    lClasses.push('ombre-droite');
                }
                if (this.optionsInterne.getClassListe) {
                    lClasses.push(this.optionsInterne.getClassListe(this));
                }
                if (this.Donnees && this.Donnees.options.racineCss) {
                    lClasses.push(this.Donnees.options.racineCss);
                }
                if (!this._options.avecCadreSelection) {
                    lClasses.push('background-selec');
                }
                return lClasses.join(' ');
            }
            jsxGetAttrListe() {
                var _a, _b;
                const lAttrs = {};
                if ((_b = (_a = (0,
                AccessApp_1.getApp)()).getOptionsDebug) === null || _b === void 0 ? void 0 : _b.call(_a).RGAAForcerResumeTableau) {
                    let lLabel = this.getAriaLabelListe(false);
                    let lClass = Tooltip_module_css_1.StylesTooltip.debugOK;
                    if (!lLabel) {
                        lLabel = '! ObjetListe avec option "ariaLabel" manquante !';
                        lClass = Tooltip_module_css_1.StylesTooltip.debugKO;
                    }
                    lAttrs[Tooltip_1.Tooltip.attrType] = Tooltip_1.Tooltip.Type.default;
                    lAttrs[Tooltip_1.Tooltip.attrClass] = lClass;
                    lAttrs[Tooltip_1.Tooltip.attrText] = lLabel;
                }
                const lDescr = Array.isArray(this._options.ariaDescribedBy) ? this._options.ariaDescribedBy.join(' ') : (this._options.ariaDescribedBy || null);
                if (lDescr) {
                    lAttrs['aria-describedby'] = lDescr;
                    lAttrs.role = 'group';
                }
                return lAttrs;
            }
            getAriaLabelListe(aAvecDefaut=true) {
                let lLabel = '';
                if (this._options.ariaLabel) {
                    lLabel = MethodesObjet_1.MethodesObjet.isFunction(this._options.ariaLabel) ? this._options.ariaLabel() || '' : this._options.ariaLabel;
                }
                if (!lLabel) {
                    lLabel = aAvecDefaut ? this._estRoleTreeGrid() ? GlossaireListe_1.TradGlossaireListe.wai.treegrid : GlossaireListe_1.TradGlossaireListe.wai.tree : '';
                }
                return lLabel.enleverEntites();
            }
            jsxGetNodePremierElement(aInstance, aNode) {
                $(aNode).on({
                    'focusin'() {
                        $(`#${aInstance.Nom.escapeJQ()} .${ObjetListe.SelecteurCss.focusGrid}`).attr('tabindex', '-1');
                    },
                    'focusout'() {
                        $(`#${aInstance.Nom.escapeJQ()} .${ObjetListe.SelecteurCss.focusGrid}`).attr('tabindex', '0');
                    },
                    'focus'(aEvent) {
                        if (!aEvent.relatedTarget) {
                            return;
                        }
                        if (aEvent.relatedTarget && aEvent.relatedTarget !== this && $(this).find(aEvent.relatedTarget).length > 0) {
                            return;
                        }
                        aInstance.startNavigationContenu();
                    }
                });
            }
            jsxGetNodeAfterToolbar(aNode) {
                const lTabElements = ObjetHtml_1.GHtml.getElementsFocusablesDElement(aNode);
                lTabElements.forEach(function(aNode, aIndex) {
                    $(aNode).attr('tabindex', aIndex === 0 ? 0 : -1);
                    $(aNode).on({
                        'keyup.listetoolbar'(aEvent) {
                            if (ToucheClavier_1.ToucheClavierUtil.estToucheFleche(aEvent.which) || aEvent.which === ToucheClavier_1.ToucheClavier.Debut || aEvent.which === ToucheClavier_1.ToucheClavier.Fin) {
                                aEvent.stopImmediatePropagation();
                                let lNav;
                                switch (aEvent.which) {
                                case ToucheClavier_1.ToucheClavier.FlecheGauche:
                                    lNav = ObjetWAI_1.ObjetWAI.ModeRechercheNavigation.prevCycle;
                                    break;
                                case ToucheClavier_1.ToucheClavier.FlecheDroite:
                                    lNav = ObjetWAI_1.ObjetWAI.ModeRechercheNavigation.nextCycle;
                                    break;
                                case ToucheClavier_1.ToucheClavier.Debut:
                                    lNav = ObjetWAI_1.ObjetWAI.ModeRechercheNavigation.first;
                                    break;
                                case ToucheClavier_1.ToucheClavier.Fin:
                                    lNav = ObjetWAI_1.ObjetWAI.ModeRechercheNavigation.last;
                                    break;
                                default:
                                    return;
                                }
                                const lNextNode = ObjetWAI_1.GObjetWAI.getNodeRechercheNavigation(lTabElements, this, lNav);
                                this.setAttribute('tabindex', '-1');
                                if (lNextNode) {
                                    lNextNode.setAttribute('tabindex', '0');
                                    lNextNode.focus();
                                }
                            }
                        },
                        'focusin'(aEvent) {
                            if (lTabElements.includes(aEvent.target)) {
                                aEvent.target.setAttribute('tabindex', '0');
                            }
                        }
                    });
                });
            }
            jsxNodeBtnEnteteLibre(aIndex, aNode) {
                const lElement = this._cache.boutons[aIndex];
                if (lElement && (lElement.getHtml || lElement.html)) {
                    ObjetHtml_1.GHtml.setHtml(aNode, MethodesObjet_1.MethodesObjet.isFunction(lElement.getHtml) ? lElement.getHtml() : lElement.html, {
                        controleur: lElement.controleur
                    });
                }
            }
            jsxModeleBtnCreationEntete(aInstance) {
                const lModele = {
                    event(aEvent, aNode) {
                        if (aInstance.Donnees.avecEvenementCreation()) {
                            aInstance.surCreationEvenement(-1, {
                                nodeBouton: aNode,
                                event: aEvent
                            });
                        } else if (aInstance.ListeCreations && aInstance.ListeCreations.length === 1) {
                            aInstance.surCreationDeb(false, {
                                creationEnFenetre: true
                            });
                        } else {}
                    },
                    getDisabled() {
                        return aInstance._getNonEditable();
                    }
                };
                return lModele;
            }
            jsxModeleBoutonListe(aInstance, aBouton) {
                const lModele = {
                    event(aEvent, aNode) {
                        const lParams = {
                            bouton: aBouton,
                            event: aEvent,
                            liste: aInstance,
                            node: aNode
                        };
                        aBouton.event(lParams);
                    }
                };
                if (aBouton.getDisabled) {
                    lModele.getDisabled = (aNode) => {
                        return aBouton.getDisabled({
                            bouton: aBouton,
                            node: aNode,
                            liste: aInstance
                        });
                    }
                    ;
                }
                if (aBouton.getSelection) {
                    lModele.getSelection = (aNode) => {
                        return aBouton.getSelection({
                            bouton: aBouton,
                            node: aNode,
                            liste: aInstance
                        });
                    }
                    ;
                }
                if (aBouton.getTooltip) {
                    lModele.getTitle = (aNode) => {
                        return aBouton.getTooltip({
                            bouton: aBouton,
                            node: aNode,
                            liste: aInstance
                        });
                    }
                    ;
                }
                return lModele;
            }
            jsxIfBoutonListe(aBouton, aNode) {
                return aBouton.getVisible({
                    bouton: aBouton,
                    node: aNode,
                    liste: this
                });
            }
            jsxGetClassBoutonListe(aBouton, aNode) {
                return aBouton.getClass({
                    bouton: aBouton,
                    node: aNode,
                    liste: this
                });
            }
            jsxGetAttrsBoutonListe(aBouton, aNode) {
                return aBouton.getAttrs({
                    bouton: aBouton,
                    node: aNode,
                    liste: this
                });
            }
            jsxModelRecherche(aInstance) {
                return {
                    getValue() {
                        return aInstance.getRechercheTexte();
                    },
                    setValue(aValue) {
                        aInstance.setRechercheTexte(aValue);
                    },
                    node(aNode) {
                        $(aNode).on({
                            'focusout': function() {
                                if (aInstance._estRechercheTexteVide()) {
                                    aInstance._annulerRechercheTexte();
                                }
                            },
                            'keyup': function(aEvent) {
                                if (aEvent.which === ToucheClavier_1.ToucheClavier.Echap) {
                                    aInstance._annulerRechercheTexte();
                                    aEvent.stopPropagation();
                                    return;
                                }
                            }
                        });
                    }
                };
            }
            jsxBtnRechercheTexte(aInstance) {
                return {
                    event() {
                        aInstance._annulerRechercheTexte();
                    }
                };
            }
            jsxModeleSelecFile(aInstance, aParamsCellule) {
                return {
                    getOptionsSelecFile(aGetSelecFile) {
                        const lOptions = Object.assign({
                            classDrag: 'selecfile_classDrag',
                            classDragHoverSelec: 'selecfile_classDrag_survol'
                        }, aInstance.Donnees.getOptionsSelecFile(aParamsCellule));
                        if (lOptions.eventClick !== false && !aInstance.optionsInterne.versionMobile) {
                            aInstance._cache.ouvrirSelecteurFileParLigne[aParamsCellule.ligne + '_' + aParamsCellule.colonne] = aGetSelecFile();
                        }
                        return lOptions;
                    },
                    addFiles(aParamsFiles) {
                        if (aParamsCellule.surCreation && aInstance.ListeCreations.length === 1) {
                            aParamsFiles.listeFichiers.parcourir( (aFichier) => {
                                aInstance.ajouterElementCreation(aFichier.Libelle, aFichier);
                            }
                            );
                            return true;
                        }
                        return aInstance.Donnees.evenementSurSelecFile(aParamsCellule, aParamsFiles);
                    }
                };
            }
            jsxModeleSaisieTexte(aInstance, aParamsCellule, aEstNote, aEstTextareaMax, aIgnorerEventsNode) {
                return {
                    getValue() {
                        return aInstance._valeurEnEdition;
                    },
                    setValue(aValue, aParams) {
                        aInstance._setValueModel({
                            ligne: aParamsCellule.ligne,
                            colonne: aParamsCellule.colonne,
                            surCreation: !!aParamsCellule.surLigneCreation,
                            node: aParams.node,
                            value: aValue
                        });
                    },
                    getNote() {
                        return aInstance._valeurEnEdition;
                    },
                    setNote(aNote, aNode) {
                        if (aInstance.optionsInterne.versionMobile && aEstNote && aNote === null && aInstance._cache.finEditionCreation) {
                            aInstance._cache.finEditionCreation();
                            return;
                        }
                        aInstance._setValueModel({
                            ligne: aParamsCellule.ligne,
                            colonne: aParamsCellule.colonne,
                            surCreation: !!aParamsCellule.surLigneCreation,
                            node: aNode,
                            value: aNote,
                            estNote: aEstNote
                        });
                        if (aInstance.optionsInterne.versionMobile && aEstNote && aInstance._cache.finEditionCreation) {
                            aInstance._cache.finEditionCreation();
                        }
                    },
                    getOptionsNote() {
                        if (aInstance.Donnees) {
                            return aInstance.Donnees.getOptionsNote(aParamsCellule) || null;
                        }
                    },
                    fromDisplay(aValue) {
                        if (aEstNote) {
                            return aValue;
                        }
                        const lControle = aInstance.Donnees ? aInstance.Donnees.getControleCaracteresInput(aParamsCellule) : null;
                        if (lControle && lControle.fromDisplay) {
                            aValue = lControle.fromDisplay(aParamsCellule.colonne, aParamsCellule.ligne, aValue);
                        }
                        return aValue;
                    },
                    toDisplay(aValue) {
                        if (aEstNote) {
                            return aValue;
                        }
                        const lControle = aInstance.estDonneeListeTableau(aInstance.Donnees) ? aInstance.Donnees.getControleCaracteresInput(aParamsCellule) : null;
                        if (lControle && lControle.toDisplay) {
                            aValue = lControle.toDisplay(aParamsCellule.colonne, aParamsCellule.ligne, aValue);
                        }
                        return aValue;
                    },
                    node(aNode, aMeasure, aContexteCourant) {
                        aInstance._cache.avecModificationSaisie = false;
                        const lDonneesTableau = aInstance.estDonneeListeFlatDesign(aInstance.Donnees) ? null : aInstance.Donnees;
                        const lForceSetNote = aEstNote && aContexteCourant.data.forceExitChange ? () => {
                            const lParamsExit = {};
                            aContexteCourant.data.forceExitChange(lParamsExit);
                            if (lParamsExit.resultValidation && !lParamsExit.resultValidation.estValide) {
                                if (aParamsCellule.surLigneCreation) {
                                    aInstance._annulerCreation();
                                } else {
                                    aInstance._surEditionFin({
                                        colonne: aInstance._cache.selectionCellule.colonne,
                                        ligne: aInstance._cache.selectionCellule.ligne
                                    });
                                    if (lParamsExit.resultValidation.promiseMessageErreur) {
                                        lParamsExit.resultValidation.promiseMessageErreur.then( () => {
                                            aInstance.demarrerEditionSurCellule(aInstance._cache.selectionCellule.ligne, aInstance._cache.selectionCellule.colonne);
                                        }
                                        );
                                        return {
                                            avecMessagerErreur: true
                                        };
                                    }
                                }
                            }
                        }
                        : null;
                        aInstance._cache.finEditionCreation = function() {
                            aInstance._cache.finEditionCreation = null;
                            if (aEstNote && lForceSetNote) {
                                const lResultSetNote = lForceSetNote();
                                if (lResultSetNote) {
                                    return lResultSetNote;
                                }
                            }
                            const lParams = aInstance._getParamsCellule(aParamsCellule.colonne, aParamsCellule.ligne, {
                                surEdition: true
                            });
                            if (aParamsCellule.surLigneCreation) {
                                aInstance._surCreation(aInstance._valeurEnEdition);
                            } else {
                                aInstance._surEdition(lParams, aInstance._valeurEnEdition, aInstance._cache.avecModificationSaisie);
                            }
                        }
                        ;
                        aInstance._cache.finEditionCreation.estCreation = aParamsCellule.surLigneCreation;
                        if (aIgnorerEventsNode) {
                            return;
                        }
                        $(aNode).on({
                            'keydown': function(aEvent) {
                                delete aInstance._cache._keyDownSansNavigationFleche;
                                if (aInstance._isToucheRetourChariot(aEvent) || aEvent.which === ToucheClavier_1.ToucheClavier.Echap || aEvent.which === ToucheClavier_1.ToucheClavier.Tab) {
                                    if (aEstNote && lForceSetNote && aEvent.which !== ToucheClavier_1.ToucheClavier.Echap) {
                                        lForceSetNote();
                                    }
                                    aEvent.stopPropagation();
                                    aEvent.preventDefault();
                                    return false;
                                }
                                if (lDonneesTableau && lDonneesTableau.options.avecNavigationClavierFlechesEnEdition) {
                                    const lNodeName = this.nodeName.toLowerCase();
                                    if ((lNodeName === 'input' || lNodeName === 'textarea') && ((aEvent.which === ToucheClavier_1.ToucheClavier.FlecheGauche && !aInstance._estCurseurEnBorneDeSelection(this, true)) || (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheDroite && !aInstance._estCurseurEnBorneDeSelection(this, false)))) {
                                        aInstance._cache._keyDownSansNavigationFleche = true;
                                    }
                                }
                            },
                            'keyup': function(aEvent) {
                                if (aInstance._isToucheRetourChariot(aEvent) || aEvent.which === ToucheClavier_1.ToucheClavier.Echap || aEvent.which === ToucheClavier_1.ToucheClavier.Tab) {
                                    if (aEvent.which === ToucheClavier_1.ToucheClavier.Echap) {
                                        if (aParamsCellule.surLigneCreation) {
                                            aInstance._annulerCreation();
                                        } else {
                                            aInstance._surEditionFin({
                                                colonne: aInstance._cache.selectionCellule.colonne,
                                                ligne: aInstance._cache.selectionCellule.ligne
                                            });
                                        }
                                    } else {
                                        if (aEstNote && lForceSetNote) {
                                            if (lForceSetNote()) {
                                                return;
                                            }
                                        }
                                        const lParams = aInstance._getParamsCellule(aParamsCellule.colonne, aParamsCellule.ligne, {
                                            surEdition: true
                                        });
                                        let lParamSelecCelluleSuiv = null;
                                        if (lDonneesTableau && lDonneesTableau.options.avecCelluleSuivanteSurFinEdition) {
                                            lParamSelecCelluleSuiv = lDonneesTableau.getParametresSelectionnerCelluleSuivanteFinEdition(lParams);
                                            if (lParamSelecCelluleSuiv.entrerEdition) {
                                                lParams.sansTriDonnees = true;
                                            }
                                        }
                                        const lFuncSuite = () => {
                                            if (aInstance.Donnees.options.avecCelluleSuivanteSurFinEdition) {
                                                aInstance._selectionnerCelluleSuivante(Object.assign(lParams, lParamSelecCelluleSuiv));
                                                if (lParams.sansTriDonnees && !aInstance._cache.editionEnCours && !aInstance._cache.editionEnCoursEvenement) {
                                                    aInstance._actualiser({
                                                        conserverSelection: true,
                                                        zonesActualisation: {
                                                            contenu: true,
                                                            total: true
                                                        },
                                                        avecEvenementModificationSelection: false
                                                    });
                                                }
                                            }
                                        }
                                        ;
                                        if (aParamsCellule.surLigneCreation) {
                                            aInstance._surCreation(aInstance._valeurEnEdition);
                                            lFuncSuite();
                                        } else {
                                            const lResult = aInstance._surEdition(lParams, aInstance._valeurEnEdition, aInstance._cache.avecModificationSaisie, lDonneesTableau.options.avecEvnt_ApresEditionValidationSansModification);
                                            if (lResult && lResult.then) {
                                                lResult.then( (aError) => {
                                                    if (aError && aError.annulerEdition) {} else {
                                                        lFuncSuite();
                                                    }
                                                }
                                                );
                                            } else {
                                                lFuncSuite();
                                            }
                                        }
                                    }
                                    aEvent.stopPropagation();
                                    return false;
                                }
                                if (aInstance._estToucheNavigationFlechesClavier(aEvent)) {
                                    if (lDonneesTableau && lDonneesTableau.options.avecNavigationClavierFlechesEnEdition && !aInstance._cache._keyDownSansNavigationFleche) {
                                        aInstance._navigationFlechesClavier(aEvent, aInstance._getParamsCellule(aParamsCellule.colonne, aParamsCellule.ligne, {
                                            surEdition: true,
                                            node: this,
                                            event: aEvent,
                                            avecCelluleEditable: true,
                                            avecSelection: true,
                                            entrerEdition: true
                                        }));
                                    }
                                    aEvent.stopPropagation();
                                }
                            },
                            'blur focusout': function() {
                                if (!aEstTextareaMax && aInstance._cache.finEditionCreation) {
                                    aInstance._cache.finEditionCreation();
                                }
                            },
                            'focusout_TextareaMax': function() {
                                if (aEstTextareaMax && aInstance._cache.finEditionCreation) {
                                    aInstance._cache.finEditionCreation();
                                }
                            }
                        });
                    }
                };
            }
            jsxNodeDeploiementLigne(aParamsCellule, aNode) {
                const lThis = this;
                $(aNode).eventValidation( (aEvent) => {
                    lThis.surDeploiement(aEvent, aParamsCellule.colonne, aParamsCellule.ligne, true);
                }
                );
            }
            jsxGetModelCBLigneFlatDesign(aInstance, aLigne) {
                return {
                    getValue() {
                        const lResult = aInstance._getValueCBFlatDesign(aLigne);
                        return lResult === true;
                    },
                    getIndeterminate() {
                        return aInstance._getValueCBFlatDesign(aLigne) === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Grise;
                    },
                    setValue(aValue) {
                        if (aLigne >= 0 && aInstance.estDonneeListeFlatDesign(aInstance.Donnees) && aInstance.Donnees.options.avecCocheCBSurLigne) {
                            return;
                        }
                        let lValue = aValue;
                        if (aInstance._getValueCBFlatDesign(aLigne) === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Grise) {
                            lValue = !aInstance._getValueCBFlatDesign(aLigne, true);
                        }
                        aInstance.setValueCBFlatDesignEvent(aInstance._getParamsCellule(-1, aLigne), lValue);
                    },
                    getDisabled() {
                        if (aInstance._getNonEditable()) {
                            return true;
                        }
                        if (aLigne < 0 && (!aInstance._cache.lignesVisibles || aInstance._cache.lignesVisibles.length === 0)) {
                            return true;
                        }
                        if (aLigne >= 0 && aInstance.Donnees.getDisabledCB(aInstance._getParamsCellule(-1, aLigne))) {
                            return true;
                        }
                        return false;
                    }
                };
            }
            jsxGetAttrCBLigneFlatDesign(aLigne, aNode) {
                let lLabel = '';
                if (aLigne < 0) {
                    if (this._options.avecCBToutCocher === ObjetListe.typeLibelleCocheCBEntete.vide) {
                        lLabel = $(aNode).hasClass('is-checked') ? ObjetTraduction_1.GTraductions.getValeur('liste.toutDecocher') : ObjetTraduction_1.GTraductions.getValeur('liste.toutCocher');
                    } else if (this._options.avecCBToutCocher === ObjetListe.typeLibelleCocheCBEntete.compteurSelec && this.getListeArticlesCochees().count() === 0) {
                        lLabel = ObjetTraduction_1.GTraductions.getValeur('liste.toutCocher');
                    }
                } else {
                    lLabel = this._getValueCBFlatDesign(aLigne) === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte ? ObjetTraduction_1.GTraductions.getValeur('liste.wai.DecocherLigne') : ObjetTraduction_1.GTraductions.getValeur('liste.wai.CocherLigne');
                }
                return {
                    'aria-label': lLabel
                };
            }
            jsxGetModelCocheTitreClassique(aInstance, aColonne) {
                return {
                    getValue() {
                        if (aInstance.Donnees) {
                            const lEtatCoche = aInstance.Donnees.getEtatCocheSelonFils(null, aInstance._getParamsCellule(aColonne));
                            if (lEtatCoche === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte) {
                                return true;
                            }
                        }
                        return false;
                    },
                    setValue() {
                        aInstance._clickSurCocheTitre(aColonne);
                    }
                };
            }
            jsxGetAttrCocheTitreClassique(aColonne) {
                let lTitle = '';
                lTitle = ObjetTraduction_1.GTraductions.getValeur('liste.toutCocher');
                if (this.Donnees) {
                    const lEtatCoche = this.Donnees.getEtatCocheSelonFils(null, this._getParamsCellule(aColonne));
                    switch (lEtatCoche) {
                    case ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Aucune:
                        lTitle = ObjetTraduction_1.GTraductions.getValeur('liste.toutCocher');
                        break;
                    case ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte:
                        lTitle = ObjetTraduction_1.GTraductions.getValeur('liste.toutDecocher');
                        break;
                    }
                }
                return {
                    title: lTitle,
                    'aria-label': lTitle
                };
            }
            jsxNodeGabaritRefresh(aStart, aIndiceInfosColonne, aNode) {
                const lCacheRef = this._cache.refresh;
                const lNom = aStart ? 'node_gab_start' : 'node_gab_end';
                if (!lCacheRef[lNom]) {
                    lCacheRef[lNom] = {};
                }
                lCacheRef[lNom][aIndiceInfosColonne] = aNode;
                lCacheRef.observer.observe(aNode);
                lCacheRef.mapNodesObs.set(aNode, {
                    gabarit: true
                });
                const lThis = this;
                $(aNode).on('mousedown', () => {
                    lThis._refreshContenuDynamique();
                }
                );
            }
            jsxNodeObsRange(aStart, aIndiceRange, aIndiceInfosColonnees, aNode) {
                const lCacheRef = this._cache.refresh;
                lCacheRef.observer.observe(aNode);
                lCacheRef.mapNodesObs.set(aNode, {
                    gabarit: false
                });
                let lRange = lCacheRef.mapRangesExist.get(aIndiceRange);
                if (!lRange) {
                    lRange = {};
                    lCacheRef.mapRangesExist.set(aIndiceRange, lRange);
                    lCacheRef.mapRangesExist.min = Math.min(aIndiceRange, lCacheRef.mapRangesExist.min);
                    lCacheRef.mapRangesExist.max = Math.max(aIndiceRange, lCacheRef.mapRangesExist.max);
                }
                if (aIndiceInfosColonnees === 0) {
                    lRange[aStart ? 'node_start' : 'node_end'] = aNode;
                }
                $(aNode).on('destroyed', function() {
                    lCacheRef.mapNodesObs.delete(this);
                    if (aIndiceInfosColonnees === 0) {
                        lCacheRef.mapRangesExist.delete(aIndiceRange);
                        let lMin = Number.MAX_VALUE;
                        let lMax = -1;
                        for (const lKey of lCacheRef.mapRangesExist.keys()) {
                            lMin = Math.min(lKey, lMin);
                            lMax = Math.max(lKey, lMax);
                        }
                        lCacheRef.mapRangesExist.min = lMin;
                        lCacheRef.mapRangesExist.max = lMax;
                    }
                });
                if (lCacheRef.structure[aIndiceRange].height < 0) {
                    this._actualiserHeightRanges(aIndiceRange);
                }
            }
            jsxNodeTotalFd(aInstance, aLigne, aColonne, aNode) {
                $(aNode).on({
                    mousedown(aEvent) {
                        aInstance._surEventDownLigne({
                            event: aEvent,
                            ligne: aLigne,
                            colonne: aColonne
                        });
                    },
                    click() {
                        const lParams = aInstance._getParamsCellule(aColonne, aLigne);
                        if (aInstance.evenementSelectionClick(lParams)) {
                            return;
                        }
                    },
                    keyup(aEvent) {
                        if (ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent)) {
                            aInstance._surSelection(aColonne, aLigne, {
                                surInteractionUtilisateur: true
                            });
                            aInstance.surSelectionEvenement(aColonne, aLigne, true);
                            aInstance._editionDebSurSelection(aColonne, aLigne, aEvent);
                        }
                    }
                });
            }
            jsxNodeAfterCellule(aNode) {
                ObjetHtml_1.GHtml.getElementsFocusablesDElement(aNode, {
                    ignoreAriaHidden: false
                }).forEach( (aNode) => {
                    aNode.setAttribute('tabindex', '-1');
                }
                );
            }
            getEventMapCelluleFocusable() {
                return {
                    focus() {
                        ObjetHtml_1.GHtml.getElementsFocusablesDElement(this).forEach( (aNode) => {
                            aNode.setAttribute('tabindex', '0');
                        }
                        );
                    },
                    blur() {
                        ObjetHtml_1.GHtml.getElementsFocusablesDElement(this).forEach( (aNode) => {
                            aNode.setAttribute('tabindex', '-1');
                        }
                        );
                    }
                };
            }
            getIdBtnTri(aInfosIndiceBloc, aNumeroCol) {
                return this.ids.curseurTri + aInfosIndiceBloc + '_' + aNumeroCol;
            }
            getAttrsWAICellule(aParamsCellule, aParams) {
                if (this.Donnees.enConstruction_cacheRechercheTexte) {
                    return {};
                }
                const lRoleGrid = this._estRoleTreeGrid();
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                let lAriaDescribedByTab = [];
                if (lRoleGrid) {
                    if (!this._getNonEditable() && lDonneesTableau && (lDonneesTableau.avecEdition(aParamsCellule) || lDonneesTableau.avecEvenementEdition(aParamsCellule))) {
                        lAriaDescribedByTab.push(this.ids.WAICelluleEditable);
                    }
                }
                const lAttrs = {
                    tabindex: '-1',
                    'aria-haspopup': this.Donnees.getAriaHasPopup(aParamsCellule) || false,
                    'aria-expanded': aParamsCellule._estDeploiement ? (!!aParamsCellule._estDeploiement.expanded ? 'true' : 'false') : false,
                    'aria-describedby': lAriaDescribedByTab.length > 0 ? lAriaDescribedByTab.join(' ') : false,
                    'aria-label': this.Donnees.getAriaLabel(aParamsCellule) || false
                };
                if (lRoleGrid) {
                    Object.assign(lAttrs, {
                        role: lDonneesTableau && lDonneesTableau.estCelluleWAIRowHeader(aParamsCellule) ? 'rowheader' : 'gridcell',
                        'aria-colspan': (aParams === null || aParams === void 0 ? void 0 : aParams.nombreColonnesFusion) > 1 ? aParams.nombreColonnesFusion : false,
                        'aria-rowspan': (aParams === null || aParams === void 0 ? void 0 : aParams.nombreLignesEnFusion) > 1 ? aParams.nombreLignesEnFusion : false
                    });
                } else {
                    let lStruct = this._cache.structArborescenceLignes[this._cache.lignesVisibles.indexOf(aParamsCellule.ligne)];
                    const lEstUnDeploiement = this.Donnees.estUnDeploiement(aParamsCellule);
                    if (!lStruct) {
                        lStruct = {
                            level: 1,
                            index: 1,
                            count: 1
                        };
                    }
                    Object.assign(lAttrs, {
                        'role': 'treeitem',
                        'aria-level': lStruct.level,
                        'aria-posinset': lStruct.index,
                        'aria-setsize': lStruct.count,
                        'aria-expanded': !aParamsCellule._estDeploiement && (lStruct.avecFilsVisible || lEstUnDeploiement) ? (!!((!lEstUnDeploiement && lStruct.avecFilsVisible) || this.Donnees._estDeploye(aParamsCellule.ligne)) ? 'true' : 'false') : false
                    });
                }
                return lAttrs;
            }
            jsxGetNodeListe(aInstance, aNode) {
                $(aNode).on({
                    'keydown': function(aEvent) {
                        if (aEvent.ctrlKey && String.fromCharCode(aEvent.which).toLowerCase() === 'a' && aInstance._options.avecToutSelectionner && !aEvent.target.closest('input') && !aInstance._cache.editionEnCours && !aInstance._cache.creationEnCours && aInstance.Donnees && aInstance.Donnees.avecMultiSelection()) {
                            for (let iLigne = 0; iLigne < aInstance._cache.lignesSelectionnees.length; iLigne++) {
                                if (!aInstance._etatSelectionCellule({
                                    ligne: iLigne
                                })) {
                                    aInstance.selectionnerLigne({
                                        ligne: iLigne,
                                        selectionner: true,
                                        _avecVisuCadreSelection: false
                                    });
                                }
                            }
                            aInstance._actualiserCadreSelection();
                            aEvent.preventDefault();
                        }
                    },
                    'keypress'(aEvent) {
                        if (aEvent.target.closest('input, textarea') || aEvent.target.closest('.flecheTri')) {
                            return;
                        }
                        aInstance.gererParsingSurEventKey(aEvent);
                        if (aInstance.Pere && aInstance.Evenement && aInstance.Donnees && aInstance.Donnees.options && aInstance.Donnees.options.avecEvnt_KeyPressListe) {
                            const lCallback = function() {
                                aInstance.Evenement.call(aInstance.Pere, {
                                    instance: aInstance,
                                    event: aEvent,
                                    genreEvenement: Enumere_EvenementListe_1.EGenreEvenementListe.KeyPressListe
                                });
                                aInstance._refreshSelf();
                            };
                            if (aInstance.Donnees.options.avecTimeoutEvent_KeyPressListe) {
                                clearTimeout(aInstance._cache.timerKeyPress);
                                aInstance._cache.timerKeyPress = setTimeout( () => {
                                    if (!aInstance.isDestroyed()) {
                                        lCallback();
                                    }
                                }
                                , 0);
                            } else {
                                lCallback();
                            }
                        }
                    },
                    'keyup': function(aEvent) {
                        if (aEvent.target.closest('input, textarea')) {
                            return;
                        }
                        if (ToucheClavier_1.ToucheClavierUtil.estEventSupprimer(aEvent) && aInstance._avecSuppressionSelectionCourante(aInstance._cache.selectionCellule.ligne, aInstance._cache.selectionCellule.colonne)) {
                            aInstance._surSuppression();
                        } else if (aInstance.Pere && aInstance.Evenement && aInstance.Donnees && aInstance.Donnees.options && aInstance.Donnees.options.avecEvnt_KeyUpListe) {
                            aInstance.Evenement.call(aInstance.Pere, {
                                instance: aInstance,
                                event: aEvent,
                                genreEvenement: Enumere_EvenementListe_1.EGenreEvenementListe.KeyUpListe
                            });
                            aInstance._refreshSelf();
                        }
                        if (aInstance._estToucheNavigationFlechesClavier(aEvent)) {
                            aInstance._navigationFlechesClavier(aEvent, {
                                ligneEtColonneFixe: true,
                                forcerNavigationFocus: true
                            });
                            ObjetNavigateur_1.Navigateur.stopperEvenement(aEvent.originalEvent);
                        }
                    },
                    'mousenter': function() {
                        aInstance._cache.mouseOUTListe = false;
                    },
                    'mouseleave': function() {
                        aInstance._cache.mouseOUTListe = true;
                    }
                });
            }
            _surKeyUpCellulePere(aEvent) {
                const lInstance = aEvent.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                if (!lInfos) {
                    return;
                }
                if (lInstance._cache.creationEnCours || lInstance._cache.editionEnCours) {
                    return;
                }
                const lParamsCellule = lInstance._getParamsCellule(lInfos.colonne, lInfos.ligne);
                if ((ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent) || ToucheClavier_1.ToucheClavierUtil.estEventEdition(aEvent)) && lInstance._estEventSansSelect(aEvent)) {
                    return;
                }
                let lBoquerSelection = false;
                if (lInstance.Donnees && lInstance._options.skin === ObjetListe.skin.flatDesign && lInstance.estDonneeListeFlatDesign(lInstance.Donnees) && lInstance.Donnees.avecCB && lInstance.Donnees.avecCB(lParamsCellule) && (ToucheClavier_1.ToucheClavierUtil.estEventEspace(aEvent) || (ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent) && !lInstance.Donnees._avecSelection(lParamsCellule)))) {
                    lInstance._modifierCBLigneFlatDesign(lParamsCellule);
                    lBoquerSelection = true;
                }
                if (ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent) && lInstance._estRoleTreeGrid() && lInstance.surDeploiement(aEvent, lInfos.colonne, lInfos.ligne, true)) {
                    return;
                }
                if (!lBoquerSelection && (ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent) || ToucheClavier_1.ToucheClavierUtil.estEventEdition(aEvent))) {
                    lInstance._surSelection(lInfos.colonne, lInfos.ligne, {
                        surInteractionUtilisateur: true
                    });
                    lInstance.surSelectionEvenement(lInfos.colonne, lInfos.ligne, true);
                }
                if (ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent)) {
                    if (lInstance.surDeploiement(aEvent, lInfos.colonne, lInfos.ligne)) {
                        return;
                    }
                    lInstance._editionDebSurSelection(lInfos.colonne, lInfos.ligne, aEvent);
                }
                if (ToucheClavier_1.ToucheClavierUtil.estEventEdition(aEvent)) {
                    lInstance.surEditionDeb(lInfos.colonne, lInfos.ligne);
                } else if (lInstance._estToucheNavigationFlechesClavier(aEvent)) {
                    lInstance._navigationFlechesClavier(aEvent, Object.assign(lInfos, {
                        ligneEtColonneFixe: true,
                        forcerNavigationFocus: true
                    }));
                    aEvent.stopPropagation();
                }
            }
            gererParsingSurEventKey(event) {}
            construireGridWAI(aAvecTri, aAvecGridTotal) {
                const lNbLignesTitre = this._cache.structureWAI.titres.length || 0;
                const lNbLignesTri = aAvecTri ? 1 : 0;
                const lNbLignesCreation = this._avecLigneCreationTitreEnLigne() ? 1 : 0;
                const lNbLignesTotal = aAvecGridTotal ? this._cache.structureWAI.totals.length : 0;
                const lNbLignesContenus = this._cache.lignesVisibles.length + lNbLignesTitre + lNbLignesTri + lNbLignesCreation;
                const lRowsTitre = this._cache.structureWAI.titres.length > 0 ? IE.jsx.str("div", {
                    role: "rowgroup"
                }, (aTabTitre) => {
                    this._cache.structureWAI.titres.forEach( (aIds, aLigne) => {
                        if ((aIds === null || aIds === void 0 ? void 0 : aIds.ids) && !(aIds === null || aIds === void 0 ? void 0 : aIds.estLigneAIgnorer)) {
                            aTabTitre.push(IE.jsx.str("div", {
                                role: "row",
                                "aria-rowindex": aLigne + 1,
                                "aria-owns": aIds.ids.join(' ')
                            }));
                        }
                    }
                    );
                }
                ) : '';
                return (IE.jsx.str("div", {
                    class: Divers_css_1.StylesDivers.srOnly,
                    role: "treegrid",
                    "aria-rowcount": lNbLignesContenus + lNbLignesTotal,
                    "aria-describedby": this.ids.WAIDescribeTreeGrid,
                    "ie-attr": () => {
                        return {
                            'aria-label': this.getAriaLabelListe(true)
                        };
                    }
                }, lRowsTitre, () => {
                    if (aAvecTri) {
                        return IE.jsx.str("div", {
                            role: "rowgroup"
                        }, IE.jsx.str("div", {
                            role: "row"
                        }, (aTabTri) => {
                            let lIndiceColVisible = 0;
                            this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                                aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                                    lIndiceColVisible += 1;
                                    aTabTri.push(IE.jsx.str("div", {
                                        role: "gridcell",
                                        "aria-colindex": lIndiceColVisible,
                                        "aria-rowindex": 1 + lNbLignesTitre,
                                        "aria-owns": this._cache.colonnesTri[aNumeroColonne] ? this.getIdBtnTri(aInfosZoneColonnes.indiceBloc, aNumeroColonne) : false
                                    }));
                                }
                                );
                            }
                            );
                        }
                        ));
                    }
                }
                , lNbLignesCreation > 0 ? IE.jsx.str("div", {
                    role: "rowgroup"
                }, IE.jsx.str("div", {
                    role: "row",
                    "aria-owns": this._getIdCreation(-1, -1)
                })) : '', IE.jsx.str("div", {
                    role: "rowgroup",
                    id: this.ids.WAILignesContenu
                }, this._construireLignesContenusWAI()), aAvecGridTotal && this._cache.structureWAI.totals.length > 0 ? IE.jsx.str("div", {
                    role: "rowgroup",
                    "aria-labelledby": this.ids.WAIDescribeTreeGridTotal
                }, (aTabLignes) => {
                    this._cache.structureWAI.totals.forEach( (aIdsLigne, aIndex) => {
                        if (aIdsLigne && aIdsLigne.length > 0) {
                            const lNumeroLigne = lNbLignesContenus + aIndex + 1;
                            aTabLignes.push(IE.jsx.str("div", {
                                role: "row",
                                "aria-rowindex": lNumeroLigne,
                                "aria-owns": aIdsLigne.join(' ')
                            }));
                        }
                    }
                    );
                }
                ) : ''));
            }
        }
        exports.ObjetListe = ObjetListe;
        ObjetListe.SelecteurCss = {
            focusGrid: 'liste-focus-grid'
        };
        ObjetListe.typeInterTitre = ObjetDonneesListeFlatDesign_1.ObjetDonneesListeFlatDesign.typeInterTitre;
        ObjetListe.parsingSurColonneTri = Number.MAX_VALUE;
        var NSListe;
        (function(NSListe) {
            let positionBoutons;
            (function(positionBoutons) {
                positionBoutons[positionBoutons["entete"] = 0] = "entete";
                positionBoutons[positionBoutons["hautScroll"] = 1] = "hautScroll";
            }
            )(positionBoutons = NSListe.positionBoutons || (NSListe.positionBoutons = {}));
            let FlecheTri;
            (function(FlecheTri) {
                FlecheTri["principal"] = "principal";
                FlecheTri["secondaire"] = "secondaire";
                FlecheTri["survol"] = "survol";
            }
            )(FlecheTri = NSListe.FlecheTri || (NSListe.FlecheTri = {}));
        }
        )(NSListe || (exports.NSListe = NSListe = {}));
        (function(ObjetListe) {
            let typeLibelleCocheCBEntete;
            (function(typeLibelleCocheCBEntete) {
                typeLibelleCocheCBEntete["toutCocher"] = "toutCocher";
                typeLibelleCocheCBEntete["compteurSelec"] = "compteurSelec";
                typeLibelleCocheCBEntete["vide"] = "vide";
            }
            )(typeLibelleCocheCBEntete = ObjetListe.typeLibelleCocheCBEntete || (ObjetListe.typeLibelleCocheCBEntete = {}));
            let skin;
            (function(skin) {
                skin["classique"] = "classique";
                skin["alternance"] = "alternance";
                skin["flatDesign"] = "flatDesign";
            }
            )(skin = ObjetListe.skin || (ObjetListe.skin = {}));
            let typeBouton;
            (function(typeBouton) {
                typeBouton["monter"] = "monter";
                typeBouton["descendre"] = "descendre";
                typeBouton["deployer"] = "deployer";
                typeBouton["supprimer"] = "supprimer";
                typeBouton["editer"] = "editer";
                typeBouton["exportCSV"] = "exportCSV";
                typeBouton["parametrer"] = "parametrer";
                typeBouton["rechercher"] = "rechercher";
                typeBouton["filtrer"] = "filtrer";
            }
            )(typeBouton = ObjetListe.typeBouton || (ObjetListe.typeBouton = {}));
            ObjetListe.StyleElementInteractifTitreSansTri = 'TitreListeSansTri';
        }
        )(ObjetListe || (exports.ObjetListe = ObjetListe = {}));
    },
    fn: '_objetliste.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetScroll = void 0;
        require("ObjetScroll.module.css");
        exports.StylesObjetScroll = {
            ObjetScroll: 'ObjetScroll-ObjetScroll-bf3d5760',
            vertical: 'ObjetScroll-vertical-3d189ba9',
            horizontal: 'ObjetScroll-horizontal-70b56b85'
        };
    },
    fn: 'objetscroll.module.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetScroll = exports.EGenreScrollEvenement = exports.EGenreScroll = void 0;
        const Callback_1 = require("Callback");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetStyle_1 = require("ObjetStyle");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const IEHtml_DraggableDroppable_css_1 = require("IEHtml.DraggableDroppable.css");
        const ObjetScroll_module_css_1 = require("ObjetScroll.module.css");
        var EGenreScroll;
        (function(EGenreScroll) {
            EGenreScroll[EGenreScroll["Vertical"] = 0] = "Vertical";
            EGenreScroll[EGenreScroll["Horizontal"] = 1] = "Horizontal";
        }
        )(EGenreScroll || (exports.EGenreScroll = EGenreScroll = {}));
        var EGenreScrollEvenement;
        (function(EGenreScrollEvenement) {
            EGenreScrollEvenement[EGenreScrollEvenement["Deplacement"] = 0] = "Deplacement";
            EGenreScrollEvenement[EGenreScrollEvenement["TailleZone"] = 1] = "TailleZone";
            EGenreScrollEvenement[EGenreScrollEvenement["TailleContenu"] = 2] = "TailleContenu";
            EGenreScrollEvenement[EGenreScrollEvenement["TailleScroll"] = 3] = "TailleScroll";
        }
        )(EGenreScrollEvenement || (exports.EGenreScrollEvenement = EGenreScrollEvenement = {}));
        class ObjetScroll extends ObjetIdentite_1.Identite {
            constructor(aNom, aIdent, aPere, aEvenement, aGenre, aEvenementDecalage) {
                super(aNom, aIdent, aPere, aEvenement);
                if (typeof aNom === 'string') {
                    this.Genre = aGenre;
                } else {
                    this.Genre = aNom.genre;
                }
                this.Largeur = ObjetNavigateur_1.Navigateur.getLargeurBarreDeScroll();
                this.tailleScrollPersonnalisee = false;
                this.tailleMin = 22;
                this.Position = 0;
                this.nbLigneScroll = 2;
                this.pas = 0;
                this.callBackDecalage = new Callback_1.Callback(aPere,aEvenementDecalage);
                this.zonesSansScrollTouch = [];
                this.styleSheetDisabled = ObjetStyle_1.GStyle.styleSheetDisabled();
            }
            getLargeur() {
                return this.Largeur;
            }
            setDonnees(...aParams) {
                let lElement;
                this.Position = 0;
                this.Zones = [];
                for (let I = 0; I < aParams.length; I++) {
                    if (ObjetHtml_1.GHtml.elementExiste(this.getIdZone(aParams[I]))) {
                        this.Zones.push(aParams[I]);
                    }
                }
                if (this.Zones.length === 0) {
                    if (aParams.length > 0) {
                        return;
                    } else {
                        this.Zones.push(0);
                    }
                }
                this.TailleZone = this.callback.appel(EGenreScrollEvenement.TailleZone);
                this.TailleContenu = this._getTailleContenu();
                if (!this.TailleZone || this.styleSheetDisabled) {
                    this.TailleZone = this.TailleContenu;
                }
                this.TailleZone = Math.min(this.TailleZone, this.TailleContenu);
                this.TailleZone = Math.max(this.TailleZone, 0);
                this.TailleContenu = Math.max(this.TailleContenu, 0);
                this.tailleScroll = this.TailleZone;
                if (this.tailleScrollPersonnalisee) {
                    this.tailleScroll = Math.max(0, this.callback.appel(EGenreScrollEvenement.TailleScroll, this.TailleZone) || this.TailleZone);
                }
                for (let I = 0; I < this.Zones.length; I++) {
                    this.setTaille(this.getIdZone(this.Zones[I]), this.TailleZone);
                }
                this.Zones.forEach( (aVal) => {
                    $('#' + this.getIdZone(aVal).escapeJQ()).off(this.Genre === EGenreScroll.Vertical ? 'scroll.ObjetScrollV wheel.ObjetScrollV touchmove.ObjetScrollV pointermove.ObjetScrollV pointerdown.ObjetScrollV pointermove.ObjetScrollV' : 'scroll.ObjetScrollH wheel.ObjetScrollH touchmove.ObjetScrollH pointermove.ObjetScrollH pointerdown.ObjetScrollH pointermove.ObjetScrollH');
                }
                );
                if (this.TailleContenu > this.TailleZone) {
                    if (this.pas === 0) {
                        while (this.callback.appel(EGenreScrollEvenement.Deplacement, ++this.pas) === 0 && this.pas < this.TailleContenu) {
                            continue;
                        }
                    }
                    if (this.pas < 3) {
                        this.pas = this.callback.appel(EGenreScrollEvenement.Deplacement, this.pas);
                    }
                    ObjetHtml_1.GHtml.setHtml(this.getIdScroll(), this.compose(), {
                        instance: this
                    });
                    this._avecScrollConstruit = true;
                    if (this.Genre === EGenreScroll.Vertical) {
                        for (let I = 0; I < this.Zones.length; I++) {
                            $('#' + this.getIdZone(this.Zones[I]).escapeJQ()).on('scroll.ObjetScrollV', {
                                instance: this,
                                genre: this.Zones[I]
                            }, (aEvent) => {
                                aEvent.data.instance.actualiser(aEvent.data.genre);
                            }
                            ).on('wheel.ObjetScrollV', {
                                aObjet: this
                            }, this.surMouseWheelV);
                            if (this._estTactile() && this.zonesSansScrollTouch.indexOf(this.Zones[I]) === -1) {
                                $('#' + this.getIdZone(this.Zones[I]).escapeJQ()).on({
                                    'pointerdown.ObjetScrollV': this.surPointerDownV,
                                    'pointermove.ObjetScrollV': this.surPointerMoveV,
                                    'touchmove.ObjetScrollV': this.surTouchMoveV
                                }, {
                                    aObjet: this
                                });
                            }
                        }
                    } else {
                        for (let I = 0; I < this.Zones.length; I++) {
                            $('#' + this.getIdZone(this.Zones[I]).escapeJQ()).on('scroll.ObjetScrollH', {
                                instance: this,
                                genre: this.Zones[I]
                            }, (aEvent) => {
                                aEvent.data.instance.actualiser(aEvent.data.genre);
                            }
                            ).on('wheel.ObjetScrollH', {
                                aObjet: this
                            }, this.surMouseWheelH);
                            if (this._estTactile() && this.zonesSansScrollTouch.indexOf(this.Zones[I]) === -1) {
                                $('#' + this.getIdZone(this.Zones[I]).escapeJQ()).on({
                                    'pointerdown.ObjetScrollH': this.surPointerDownH,
                                    'pointermove.ObjetScrollH': this.surPointerMoveH,
                                    'touchmove.ObjetScrollH': this.surTouchMoveH
                                }, {
                                    aObjet: this
                                });
                            }
                        }
                    }
                } else {
                    if (this._avecScrollConstruit) {
                        this._avecScrollConstruit = false;
                        ObjetHtml_1.GHtml.setHtml(this.getIdScroll(), '');
                    }
                }
                for (let I = 0; I < this.Zones.length; I++) {
                    lElement = ObjetHtml_1.GHtml.getElement(this.getIdZone(this.Zones[I]));
                    if (lElement && lElement.style) {
                        lElement.style.position = 'relative';
                        lElement.style.boxSizing = 'content-box';
                    }
                }
            }
            avecScrollVisible() {
                return this._avecScrollConstruit;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getNodeScroll: function() {
                        $(this.node).on('scroll', function() {
                            const _getPosition = () => {
                                return Math.round(aInstance.Genre === EGenreScroll.Horizontal ? this.scrollLeft : this.scrollTop);
                            }
                            ;
                            if (!aInstance._tickingScroll) {
                                if (window.requestAnimationFrame) {
                                    window.requestAnimationFrame( () => {
                                        aInstance.evenementSurScroll(_getPosition());
                                        delete aInstance._tickingScroll;
                                    }
                                    );
                                } else {
                                    aInstance.evenementSurScroll(_getPosition());
                                }
                            }
                            aInstance._tickingScroll = true;
                        });
                    }
                });
            }
            compose() {
                let LStyleScroll, LStyleContenu;
                const lTailleZone = this.tailleScroll
                  , lTailleContenu = this._getTailleScrollDeTailleContenu(this.TailleContenu);
                if (this.Genre === EGenreScroll.Horizontal) {
                    LStyleScroll = 'width:' + lTailleZone + 'px; height:' + this.Largeur + 'px; min-width:' + this.tailleMin + 'px;';
                    LStyleContenu = 'width:' + lTailleContenu + 'px; height:' + this.Largeur + 'px;';
                } else {
                    LStyleScroll = 'height:' + lTailleZone + 'px; width:' + this.Largeur + 'px; min-height:' + this.tailleMin + 'px;';
                    LStyleContenu = 'height:' + lTailleContenu + 'px; width:' + this.Largeur + 'px;';
                }
                return IE.jsx.str("div", {
                    class: ObjetScroll_module_css_1.StylesObjetScroll.ObjetScroll,
                    style: LStyleScroll,
                    role: "presentation"
                }, IE.jsx.str("div", {
                    id: this.Nom,
                    "ie-node": "getNodeScroll",
                    class: [this.Genre === EGenreScroll.Horizontal ? ObjetScroll_module_css_1.StylesObjetScroll.horizontal : ObjetScroll_module_css_1.StylesObjetScroll.vertical],
                    style: LStyleScroll,
                    tabindex: "-1",
                    role: "presentation"
                }, IE.jsx.str("div", {
                    class: ObjetScroll.StylesSelectScroll.realScroll,
                    style: LStyleContenu,
                    role: "presentation"
                })));
            }
            vider() {
                ObjetHtml_1.GHtml.setDisplay(this.getIdScroll(), false);
            }
            evenementSurScroll(APosition) {
                if (MethodesObjet_1.MethodesObjet.isNumber(APosition)) {
                    APosition = Math.round(APosition);
                }
                const LPosition = this.callback.appel(EGenreScrollEvenement.Deplacement, APosition === null || APosition === undefined ? this.getPosition() : this._getTailleContenuDeTailleScroll(APosition));
                for (let I = 0; I < this.Zones.length; I++) {
                    const lIdZone = this.getIdZone(this.Zones[I]);
                    if (LPosition !== this.getPosition(lIdZone)) {
                        this.setPosition(lIdZone, LPosition);
                    }
                }
                this.callBackDecalage.appel(this.Position - LPosition);
                if (this.Position !== LPosition) {
                    this.setPosition(this.Nom, LPosition);
                }
            }
            actualiser(I) {
                this.setPosition(this.Nom, this.getPosition(this.getIdZone(I)));
            }
            surModificationHeightContenu() {
                if (this.Genre === EGenreScroll.Horizontal || !this.avecScrollVisible()) {
                    return false;
                }
                const lOldTailleContenu = this.TailleContenu;
                const lNewTailleContenu = this._getTailleContenu();
                if (lOldTailleContenu === lNewTailleContenu) {
                    return true;
                }
                if (lNewTailleContenu <= this.TailleZone) {
                    return false;
                }
                this.TailleContenu = lNewTailleContenu;
                const lTailleContenu = this._getTailleScrollDeTailleContenu(this.TailleContenu);
                const lJScroll = $(`#${this.Nom.escapeJQ()}`);
                lJScroll.find(`>.${ObjetScroll.StylesSelectScroll.realScroll}`).css('height', `${lTailleContenu}px`);
                return true;
            }
            _getTailleContenu() {
                let lResult = this.callback.appel(EGenreScrollEvenement.TailleContenu);
                if (!lResult || !MethodesObjet_1.MethodesObjet.isNumber(lResult)) {
                    lResult = this.getTaille(this.getIdContenu(this.Zones[0]));
                }
                return lResult;
            }
            getPosition(aId) {
                const lNom = aId || this.Nom;
                const lElement = ObjetHtml_1.GHtml.getElement(lNom);
                let lPosition = 0;
                if (lElement) {
                    lPosition = this.Genre === EGenreScroll.Horizontal ? lElement.scrollLeft : lElement.scrollTop;
                    if (lNom === this.Nom) {
                        lPosition = this._getTailleContenuDeTailleScroll(lPosition);
                    }
                }
                return lPosition;
            }
            setPosition(ANom, APosition) {
                if (!MethodesObjet_1.MethodesObjet.isNumeric(APosition)) {
                    return false;
                }
                this.Position = APosition;
                const lElement = ObjetHtml_1.GHtml.getElement(ANom);
                if (!lElement) {
                    return;
                }
                if (ANom === this.Nom) {
                    const lPositionScroll = this._getTailleScrollDeTailleContenu(APosition);
                    if (this.Genre === EGenreScroll.Horizontal) {
                        lElement.scrollLeft = lPositionScroll;
                    } else {
                        lElement.scrollTop = lPositionScroll;
                    }
                } else {
                    if (this.Genre === EGenreScroll.Horizontal) {
                        lElement.scrollLeft = APosition;
                    } else {
                        lElement.scrollTop = APosition;
                    }
                }
            }
            getTaille(ANom) {
                return this.Genre === EGenreScroll.Horizontal ? ObjetPosition_1.GPosition.getWidth(ANom) : ObjetPosition_1.GPosition.getHeight(ANom);
            }
            setTaille(ANom, ATaille) {
                return this.Genre === EGenreScroll.Horizontal ? ObjetPosition_1.GPosition.setWidth(ANom, ATaille) : ObjetPosition_1.GPosition.setHeight(ANom, ATaille);
            }
            getIdScroll() {
                return this.Nom + '_Scroll';
            }
            getIdZone(I) {
                let lNomPere = '';
                if (this.Pere && 'getNom'in this.Pere) {
                    lNomPere = this.Pere.getNom();
                } else if (this.Pere) {
                    lNomPere = this.Pere.Nom;
                }
                return lNomPere + '_Zone_' + (I === null || I === undefined ? 0 : I);
            }
            getIdContenu(I) {
                let lNomPere = '';
                if (this.Pere && 'getNom'in this.Pere) {
                    lNomPere = this.Pere.getNom();
                } else if (this.Pere) {
                    lNomPere = this.Pere.Nom;
                }
                return lNomPere + '_Contenu_' + (I === null || I === undefined ? 0 : I);
            }
            scrollTo(aScroll) {
                const lElement = ObjetHtml_1.GHtml.getElement(this.Nom);
                if (lElement) {
                    const lPositionScroll = this._getTailleScrollDeTailleContenu(aScroll);
                    this.evenementSurScroll(lPositionScroll);
                    if (this.Genre === EGenreScroll.Vertical) {
                        lElement.scrollTop = lPositionScroll;
                    } else {
                        lElement.scrollLeft = lPositionScroll;
                    }
                }
            }
            estScrollSurBorne(aSurBorneDebut) {
                const lElement = ObjetHtml_1.GHtml.getElement(this.Nom);
                if (lElement) {
                    const lVert = this.Genre === EGenreScroll.Vertical;
                    if (aSurBorneDebut) {
                        return lVert ? lElement.scrollTop === 0 : lElement.scrollLeft === 0;
                    }
                    return lVert ? lElement.offsetHeight + lElement.scrollTop >= lElement.scrollHeight : lElement.offsetWidth + lElement.scrollLeft >= lElement.scrollWidth;
                }
                return true;
            }
            callbackAppel(...aParams) {
                return this.callback.appel(...aParams);
            }
            scrollToElement(aElement) {
                if (this.TailleContenu <= this.TailleZone) {
                    return;
                }
                let lJElement, e, eleHeight, eleWidth, eleTop = 0, eleLeft = 0, lMaxVisible, lPositionDestination;
                try {
                    lJElement = e = $(aElement);
                } catch (err) {
                    return;
                }
                if (e.length === 0) {
                    return;
                }
                const lTabId = [];
                for (let I = 0; I < this.Zones.length; I++) {
                    lTabId.push(this.getIdZone(this.Zones[I]));
                }
                while (!lTabId.includes(e.get(0).id)) {
                    let lPosElement = e.position();
                    eleTop += lPosElement.top;
                    eleLeft += lPosElement.left;
                    e = e.offsetParent();
                    if (/^body|html$/i.test(e[0].nodeName)) {
                        return;
                    }
                }
                eleTop += e.get(0).scrollTop;
                eleLeft += e.get(0).scrollLeft;
                const lPosition = this.getPosition();
                lMaxVisible = lPosition + this.TailleZone;
                if (this.Genre === EGenreScroll.Vertical) {
                    eleHeight = lJElement.outerHeight();
                    if (eleTop < lPosition) {
                        lPositionDestination = eleTop - this.Largeur;
                    } else if (eleTop + eleHeight > lMaxVisible) {
                        lPositionDestination = eleTop - this.TailleZone + eleHeight + this.Largeur;
                    }
                } else {
                    eleWidth = lJElement.outerWidth();
                    if (eleLeft < lPosition) {
                        lPositionDestination = eleLeft - this.Largeur;
                    } else if (eleLeft + eleWidth > lMaxVisible) {
                        lPositionDestination = eleLeft - this.TailleZone + eleWidth + this.Largeur;
                    }
                }
                if (MethodesObjet_1.MethodesObjet.isNumber(lPositionDestination)) {
                    this.scrollTo(this._getTailleScrollDeTailleContenu(Math.max(0, lPositionDestination)));
                }
                return true;
            }
            _affectationScroll(aElement, aScroll, aVertical, aSurTouch) {
                const lTaille = this._getTailleScrollDeTailleContenu(this.callback.appel(EGenreScrollEvenement.Deplacement, this._getTailleContenuDeTailleScroll(aScroll)));
                const lGetter = aVertical ? 'scrollTop' : 'scrollLeft';
                const lResult = aElement[lGetter] !== lTaille;
                aElement[lGetter] = lTaille;
                if (!$.contains(document, aElement)) {
                    return true;
                }
                if (aSurTouch || aElement[lGetter] !== lTaille) {
                    this.evenementSurScroll(aElement[lGetter]);
                }
                return lResult;
            }
            _blockScrollWheel(aEvent) {
                if (aEvent.ctrlKey || aEvent.shiftKey) {
                    return true;
                }
                if (aEvent.originalEvent.__wheelSurCombo__) {
                    return true;
                }
                return false;
            }
            surMouseWheelV(aEvent) {
                const lInstance = aEvent.data.aObjet;
                if (lInstance.styleSheetDisabled || lInstance._blockScrollWheel(aEvent)) {
                    return;
                }
                if (!lInstance.avecScrollVisible()) {
                    return;
                }
                let lDeltaY = aEvent.originalEvent.deltaY;
                if (isNaN(lDeltaY)) {
                    lDeltaY = 0;
                }
                lDeltaY = lDeltaY > 0 ? Math.min(1, lDeltaY) : Math.max(-1, lDeltaY);
                const lElement = ObjetHtml_1.GHtml.getElement(lInstance.Nom);
                if (lElement && lDeltaY !== 0) {
                    const lScroll = lElement.scrollTop + lInstance.nbLigneScroll * lInstance.pas * Math.round(lDeltaY);
                    lInstance._affectationScroll(lElement, lScroll, true);
                    return false;
                }
                return true;
            }
            surPointerDownV(aEvent) {
                aEvent.data.aObjet.scrollStartPosY = aEvent.pointerType === 'touch' && aEvent.originalEvent.isPrimary ? aEvent.originalEvent.pageY : null;
            }
            surPointerMoveV(aEvent) {
                if (aEvent.data.aObjet.scrollStartPosY === null || aEvent.pointerType !== 'touch' || !aEvent.originalEvent.isPrimary) {
                    return;
                }
                if (aEvent.target && aEvent.target.closest(`.${IEHtml_DraggableDroppable_css_1.StylesIEHtmlDraggableDroppable.ieDraggableHandle}`)) {
                    return;
                }
                const lInstance = aEvent.data.aObjet;
                const lElement = ObjetHtml_1.GHtml.getElement(lInstance.Nom);
                if (lElement) {
                    const lPageY = aEvent.originalEvent.pageY;
                    const lDecalage = lInstance.scrollStartPosY - lPageY;
                    if (Math.abs(lDecalage) >= 1) {
                        const lScroll = lElement.scrollTop + lDecalage;
                        if (lInstance._affectationScroll(lElement, lScroll, true, true)) {
                            lInstance.scrollStartPosY = lPageY;
                        }
                    }
                }
            }
            surTouchMoveV(aEvent) {
                if (aEvent.data.aObjet.scrollStartPosY === null) {
                    return;
                }
                aEvent.originalEvent.preventDefault();
                return false;
            }
            surMouseWheelH(aEvent) {
                const lInstance = aEvent.data.aObjet;
                if (lInstance.styleSheetDisabled || lInstance._blockScrollWheel(aEvent)) {
                    return;
                }
                if (!lInstance.avecScrollVisible()) {
                    return;
                }
                let lDeltaX = aEvent.originalEvent.deltaX;
                if (isNaN(lDeltaX)) {
                    lDeltaX = 0;
                }
                lDeltaX = lDeltaX > 0 ? Math.min(1, lDeltaX) : Math.max(-1, lDeltaX);
                const lElement = ObjetHtml_1.GHtml.getElement(lInstance.Nom);
                if (lElement && lDeltaX !== 0) {
                    const lScroll = lElement.scrollLeft + (lInstance.nbLigneScroll * lInstance.pas * Math.floor(lDeltaX));
                    lInstance._affectationScroll(lElement, lScroll, false);
                    return false;
                }
                return true;
            }
            surPointerDownH(aEvent) {
                const lInstance = aEvent.data.aObjet;
                lInstance.scrollStartPosX = aEvent.pointerType === 'touch' && aEvent.originalEvent.isPrimary ? aEvent.originalEvent.pageX : null;
            }
            surPointerMoveH(aEvent) {
                const lInstance = aEvent.data.aObjet;
                if (lInstance.scrollStartPosX === null || aEvent.pointerType !== 'touch' || !aEvent.originalEvent.isPrimary) {
                    return;
                }
                if (aEvent.target && aEvent.target.closest(`.${IEHtml_DraggableDroppable_css_1.StylesIEHtmlDraggableDroppable.ieDraggableHandle}`)) {
                    return;
                }
                const lElement = ObjetHtml_1.GHtml.getElement(lInstance.Nom);
                if (lElement) {
                    const lPageX = aEvent.originalEvent.pageX;
                    const lDecalage = lInstance.scrollStartPosX - lPageX;
                    if (Math.abs(lDecalage) >= 1) {
                        const lScroll = lElement.scrollLeft + lDecalage;
                        if (lInstance._affectationScroll(lElement, lScroll, false, true)) {
                            lInstance.scrollStartPosX = lPageX;
                        }
                    }
                }
            }
            surTouchMoveH(aEvent) {
                if (aEvent.data.aObjet.scrollStartPosX === null) {
                    return;
                }
                aEvent.originalEvent.preventDefault();
                return false;
            }
            _estTactile() {
                return ObjetNavigateur_1.Navigateur.isTactile;
            }
            _getTailleScrollDeTailleContenu(aValeur) {
                if (!this.tailleScrollPersonnalisee || this.tailleScroll === this.TailleZone || this.tailleScroll <= 0) {
                    return aValeur;
                }
                return Math.round(aValeur * this.tailleScroll / this.TailleZone);
            }
            _getTailleContenuDeTailleScroll(aValeur) {
                if (!this.tailleScrollPersonnalisee || this.tailleScroll === this.TailleZone || this.tailleScroll <= 0) {
                    return aValeur;
                }
                return Math.round(aValeur * this.TailleZone / this.tailleScroll);
            }
        }
        exports.ObjetScroll = ObjetScroll;
        ObjetScroll.StylesSelectScroll = {
            realScroll: 'real-scroll'
        };
    },
    fn: 'objetscroll.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.MoteurSelecteurDate = void 0;
        const ObjetDate_1 = require("ObjetDate");
        class MoteurSelecteurDate {
            constructor(aParams) {
                this.options = {
                    premiereDate: ObjetDate_1.GDate.premiereDate,
                    derniereDate: ObjetDate_1.GDate.derniereDate,
                    premiereDateSaisissable: undefined,
                    afficherPremiereDateSaisissable: true,
                    avecSelectionSemaine: false,
                    joursSemaineValide: null,
                    domaineValide: undefined,
                    joursFeries: null,
                    joursValidesAnnuels: undefined,
                    estJoursValidesAnnuelsSelonPremiereDate: false,
                    joursMarques: undefined,
                    estJoursMarquesSelonPremiereDate: false
                },
                this.setOptions(aParams);
            }
            setOptions(aOptions) {
                Object.assign(this.options, aOptions);
                if (this.options.premiereDate && this.options.derniereDate && this.options.derniereDate < this.options.premiereDate) {
                    this.options.derniereDate = new Date(this.options.premiereDate.getTime());
                }
                if (this.options.premiereDateSaisissable) {
                    this.options.premiereDateSaisissable = this.getDateBornee(this.options.premiereDateSaisissable);
                }
                return this;
            }
            estDateValide(aDate) {
                if (!aDate || !aDate.getDay) {
                    return false;
                }
                if (!this.estDateDansBorne(aDate, true)) {
                    return false;
                }
                if (!this.estJoursSemaineValide(aDate)) {
                    return false;
                }
                if (!IE.Cycles) {
                    return true;
                }
                const lDateDebCycle = IE.Cycles.dateDebutPremierCycle();
                const lNbjours = ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(lDateDebCycle, aDate) + 1;
                if (this.options.joursFeries && this.options.joursFeries.getValeur(lNbjours)) {
                    return false;
                }
                const lNbJoursPremDate = this.options.estJoursValidesAnnuelsSelonPremiereDate ? ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.options.premiereDate, aDate) : ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(lDateDebCycle, aDate) + 1;
                if (this.options.joursValidesAnnuels && !this.options.joursValidesAnnuels.getValeur(lNbJoursPremDate)) {
                    return false;
                }
                if (this.options.domaineValide) {
                    const lNumeroCycle = IE.Cycles.cycleDeLaDate(aDate);
                    if (lNumeroCycle <= 0 || !this.options.domaineValide.getValeur(lNumeroCycle)) {
                        return false;
                    }
                }
                return true;
            }
            getPremiereDateValide() {
                return this.options.premiereDateSaisissable ? this.options.premiereDateSaisissable : this.options.premiereDate;
            }
            estJoursSemaineValide(aDate) {
                const lJour = ObjetDate_1.GDate.getJourDeDate(aDate);
                return this.options.joursSemaineValide ? this.options.joursSemaineValide.getValeur(lJour + 1) : true;
            }
            estDateDansBorne(aDate, aAvecDateValide) {
                const lPremiereDate = aAvecDateValide ? this.getPremiereDateValide() : this.options.premiereDate;
                if (lPremiereDate && ObjetDate_1.GDate.getDifferenceJours(aDate, lPremiereDate) < 0) {
                    return false;
                }
                if (this.options.derniereDate && ObjetDate_1.GDate.getDifferenceJours(aDate, this.options.derniereDate) > 0) {
                    return false;
                }
                return true;
            }
            getDateBornee(aDate, aAvecDateValide) {
                const lPremiereDate = aAvecDateValide ? this.getPremiereDateValide() : this.options.premiereDate;
                if (lPremiereDate && aDate < lPremiereDate && !ObjetDate_1.GDate.estJourEgal(aDate, lPremiereDate)) {
                    return new Date(lPremiereDate.getTime());
                }
                if (this.options.derniereDate && aDate > this.options.derniereDate && !ObjetDate_1.GDate.estJourEgal(aDate, this.options.derniereDate)) {
                    return new Date(this.options.derniereDate.getTime());
                }
                return new Date(aDate.getTime());
            }
            rechercheSuivantValide(aDate, aSensRechercheInverse) {
                if (this.options.avecSelectionSemaine) {
                    return this._getSemaineSuivanteValide(aDate, aSensRechercheInverse, true);
                } else {
                    return this._getJourSuivantValide(aDate, aSensRechercheInverse, true);
                }
            }
            getDateSelonValidite(aDate) {
                if (this.options.derniereDate && aDate > this.options.derniereDate) {
                    return this._getJourSuivantValide(this.options.derniereDate, true) || aDate;
                }
                if (this.options.premiereDate && aDate < this.options.premiereDate) {
                    return this._getJourSuivantValide(this.options.premiereDate, false) || aDate;
                }
                return this._getJourSuivantValide(aDate, false) || aDate;
            }
            _getJourSuivantValide(aDateCourant, aSensRechercheInverse, aAvecIncrement) {
                const lNrJours = aSensRechercheInverse ? -1 : 1;
                let lDateCourant = aAvecIncrement ? ObjetDate_1.GDate.getJourSuivant(aDateCourant, lNrJours) : aDateCourant;
                const lAvecArret = (aSensRechercheInverse && !this.getPremiereDateValide()) || (!aSensRechercheInverse && !this.options.derniereDate);
                let lCompteurArret = 30;
                if (!this.estDateValide(lDateCourant) && this.estDateDansBorne(lDateCourant, true)) {
                    do {
                        lDateCourant = ObjetDate_1.GDate.getJourSuivant(lDateCourant, lNrJours);
                        if (lAvecArret) {
                            lCompteurArret -= 1;
                        }
                    } while (!this.estDateValide(lDateCourant) && this.estDateDansBorne(lDateCourant, true) && lCompteurArret >= 0);
                }
                if (!this.estDateValide(lDateCourant)) {
                    return null;
                } else {
                    return lDateCourant;
                }
            }
            _getSemaineSuivanteValide(aDate, aSensRechercheInverse, aAvecIncrement) {
                let lDateCourant = aDate;
                const lNumeroCycle = IE.Cycles.cycleDeLaDate(lDateCourant);
                const lIncrement = aSensRechercheInverse ? -1 : 1;
                const lAvecArret = (aSensRechercheInverse && !this.getPremiereDateValide()) || (!aSensRechercheInverse && !this.options.derniereDate);
                if (aAvecIncrement) {
                    lDateCourant = aSensRechercheInverse ? IE.Cycles.dateDernierJourOuvreCycle(lNumeroCycle - 1) : IE.Cycles.dateDebutCycle(lNumeroCycle + 1);
                }
                if (!this.estDateValide(lDateCourant) && this.estDateDansBorne(ObjetDate_1.GDate.getJourSuivant(lDateCourant, lIncrement), true)) {
                    do {
                        lDateCourant = ObjetDate_1.GDate.getJourSuivant(lDateCourant, lIncrement);
                    } while (!this.estDateValide(lDateCourant) && this.estDateDansBorne(lDateCourant, true) && !lAvecArret);
                }
                if (!this.estDateValide(lDateCourant)) {
                    return null;
                }
                return this.getDateBornee(lDateCourant, true);
            }
        }
        exports.MoteurSelecteurDate = MoteurSelecteurDate;
    },
    fn: 'moteurselecteurdate.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesInterfaceSelectionDate = void 0;
        require("InterfaceSelectionDate.css");
        exports.StylesInterfaceSelectionDate = {
            InterfaceSelectionDate: 'InterfaceSelectionDate',
            combosContainer: 'combos-container',
            ObjetSaisie: 'ObjetSaisie',
            titreJours: 'titre-jours',
            ouvre: 'ouvre',
            jours: 'jours',
            previousDate: 'previous-date',
            firstSelectableDate: 'first-selectable-date',
            selectedDate: 'selected-date',
            actif: 'actif',
            withMark: 'with-mark',
            currentMonth: 'current-month',
            currentDate: 'current-date',
            bTop: 'b-top',
            bBottom: 'b-bottom',
            bLeft: 'b-left',
            bRight: 'b-right'
        };
    },
    fn: 'interfaceselectiondate.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.InterfaceSelecteurDate = void 0;
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_EvenementObjetSaisie_1 = require("Enumere_EvenementObjetSaisie");
        const Enumere_StructureAffichage_1 = require("Enumere_StructureAffichage");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetInterface_1 = require("ObjetInterface");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const MoteurSelecteurDate_1 = require("MoteurSelecteurDate");
        const ToucheClavier_1 = require("ToucheClavier");
        require("InterfaceSelectionDate.css");
        class InterfaceSelecteurDate extends ObjetInterface_1.ObjetInterface {
            constructor(...aParams) {
                super(...aParams);
                this.ariaLabel = '';
                this.IdContenu = this.Nom + '_Contenu';
                this.nbrLignes = 6;
                this.nbrColonnes = 7;
                this.idJours = this.Nom + '_Jours';
                this.parametres = {
                    listeMois: new ObjetListeElements_1.ObjetListeElements(),
                    indiceMoisCourant: -1
                };
                this.moteurDate = new MoteurSelecteurDate_1.MoteurSelecteurDate();
            }
            setMoteurDate(aMoteurDate) {
                this.moteurDate = aMoteurDate;
            }
            setAriaLabel(aTitre) {
                this.ariaLabel = aTitre;
            }
            setParametresGeneraux() {
                this.GenreStructure = Enumere_StructureAffichage_1.EStructureAffichage.Autre;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    comboMois: {
                        init(aCombo) {
                            aInstance.comboMois = aCombo;
                            aCombo.setOptionsObjetSaisie({
                                longueur: aInstance._avecComboAnnee() ? 80 : 120,
                                avecDesignMobile: IE.estMobile,
                                avecBouton: !IE.estMobile,
                                avecBoutonsPrecSuiv: true,
                                labelWAICellule: ObjetTraduction_1.GTraductions.getValeur('Fenetre_Date.WAI.SelectionMois')
                            });
                        },
                        event: aInstance._eventSurSelecMois.bind(aInstance),
                        getDisabled() {
                            const lListeArticles = aInstance.comboMois.getListeElements();
                            return !lListeArticles || lListeArticles.count() < 2;
                        }
                    },
                    comboAnnee: {
                        init(aCombo) {
                            aInstance.comboAnnee = aCombo;
                            aCombo.setOptionsObjetSaisie({
                                longueur: 40,
                                avecDesignMobile: IE.estMobile,
                                avecBouton: !IE.estMobile,
                                avecBoutonsPrecSuiv: true,
                                labelWAICellule: ObjetTraduction_1.GTraductions.getValeur('Fenetre_Date.WAI.SelectionAnnee')
                            });
                        },
                        event: aInstance._eventSelecAnnee.bind(aInstance),
                        getDisabled() {
                            const lListeArticles = aInstance.comboAnnee.getListeElements();
                            return !lListeArticles || lListeArticles.count() < 2;
                        }
                    }
                });
            }
            construireStructureAffichageAutre() {
                const H = [];
                H.push('<div class="InterfaceSelectionDate" id="', this.IdContenu, '"></div>');
                return H.join('');
            }
            setDonnees(aDate, aAvecDate) {
                if (aAvecDate === undefined) {
                    aAvecDate = true;
                }
                this.dateCourante = ObjetDate_1.GDate.getDateCourante(this.moteurDate.options.bornerDateCourante);
                this.avecDate = (aDate !== null && aDate !== undefined && aAvecDate);
                this.date = this.avecDate ? this.moteurDate.getDateBornee.call(this, aDate) : this.dateCourante;
                const lDateBornee = this.moteurDate.getDateBornee(this.date);
                if (!this._avecComboAnnee()) {
                    this.parametres.listeMois = ObjetDate_1.GDate.getListeMoisAPartirDeDate(this.moteurDate.options.premiereDate, this.moteurDate.options.derniereDate);
                } else {
                    this.parametres.listeMois = this._construireListeMoisDAnnee(lDateBornee.getFullYear());
                }
                ObjetHtml_1.GHtml.setHtml(this.IdContenu, this.composeContenu(), {
                    controleur: this.controleur
                });
                this.afficher();
                if (this.comboAnnee) {
                    this._construireListeAnnees(this.date);
                }
                this.parametres.indiceMoisCourant = this._getIndiceMoisDeDate(this.date);
                this.comboMois.setDonnees(this.parametres.listeMois, this.parametres.indiceMoisCourant);
                $('#' + this.idJours.escapeJQ()).on({
                    focusin: function(event) {
                        const lInfo = _getLigneEtColonne(this);
                        event.data.instance.surSurvol(lInfo.i, lInfo.j, true);
                    },
                    focusout: function(event) {
                        const lInfo = _getLigneEtColonne(this);
                        event.data.instance.surSurvol(lInfo.i, lInfo.j, false);
                    },
                    keyup: function(event) {
                        const lInfo = _getLigneEtColonne(this);
                        event.data.instance._surKeyUp(lInfo.i, lInfo.j, event);
                    },
                    pointerover: function(event) {
                        const lInfo = _getLigneEtColonne(this);
                        event.data.instance.surSurvol(lInfo.i, lInfo.j, true);
                    },
                    pointerout: function(event) {
                        const lInfo = _getLigneEtColonne(this);
                        event.data.instance.surSurvol(lInfo.i, lInfo.j, false);
                    },
                    click: function(event) {
                        const lInfo = _getLigneEtColonne(this);
                        event.data.instance.surSelection(lInfo.i, lInfo.j);
                    }
                }, 'td.date', {
                    instance: this
                });
            }
            composeContenu() {
                if (this.dateCourante === null || this.dateCourante === undefined) {
                    return '';
                }
                const lStrComboAnnee = [];
                if (this._avecComboAnnee()) {
                    lStrComboAnnee.push(IE.jsx.str("ie-combo", {
                        "ie-model": "comboAnnee",
                        class: "combo-selecteur"
                    }));
                }
                const T = [];
                T.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                    class: "combos-container"
                }, IE.jsx.str("ie-combo", {
                    "ie-model": "comboMois",
                    class: "combo-selecteur"
                }), lStrComboAnnee.join('')), IE.jsx.str("div", {
                    id: this.idJours
                })));
                return T.join('');
            }
            composeJour(I, J) {
                const lHtml = [];
                const lDate = ObjetDate_1.GDate.getJourSuivant(this.premierLundiDuMois, I * 7 + J);
                const lPremDateSais = this.moteurDate.getPremiereDateValide();
                const lEstJoursActif = this.estJourActif(I, J);
                const lEstJourCourant = ObjetDate_1.GDate.estJourCourant(lDate, false);
                let lEstDateSelectionnee = false;
                const lId = this.Nom + '_' + I + '_' + J;
                const lIdTD = this.Nom + '_td_' + I + '_' + J;
                let lClass = ['date'];
                if (lEstJoursActif) {
                    lClass.push('actif');
                }
                if (this.estJourDuMois(I, J)) {
                    lClass.push('current-month');
                }
                if (lEstJourCourant) {
                    lClass.push('current-date');
                }
                if (this.avecDate) {
                    if (this.moteurDate.options.avecSelectionSemaine && IE.Cycles ? lEstJoursActif && IE.Cycles.cycleDeLaDate(lDate) === IE.Cycles.cycleDeLaDate(this.date) : ObjetDate_1.GDate.estJourEgal(lDate, this.date)) {
                        lClass.push('selected-date');
                        lEstDateSelectionnee = true;
                    }
                }
                if (ObjetDate_1.GDate.estDateJourAvant(lDate, this.dateCourante)) {
                    lClass.push('previous-date');
                }
                if (this.estJourMarque(lDate)) {
                    lClass.push('with-mark');
                }
                if (this.moteurDate.options.afficherPremiereDateSaisissable && this.moteurDate.options.premiereDateSaisissable && ObjetDate_1.GDate.estJourEgal(lDate, this.moteurDate.options.premiereDateSaisissable) && !ObjetDate_1.GDate.estJourEgal(this.moteurDate.options.premiereDateSaisissable, this.moteurDate.options.premiereDate)) {
                    lClass.push('first-selectable-date');
                }
                if (I === 0) {
                    lClass.push('b-top');
                }
                if (I === this.nbrLignes - 1) {
                    lClass.push('b-bottom');
                }
                if (J === 0) {
                    lClass.push('b-left');
                }
                if (J === this.nbrColonnes - 1) {
                    lClass.push('b-right');
                }
                const lTabIndex = !lPremDateSais || ObjetDate_1.GDate.estJourEgal(lDate, lPremDateSais) || (I === 0 && J === 0 && ObjetDate_1.GDate.getDifferenceJours(lDate, lPremDateSais) > 0) ? '0' : '-1';
                lHtml.push(IE.jsx.str("td", {
                    role: "gridcell",
                    id: lIdTD,
                    class: lClass,
                    tabindex: lTabIndex,
                    "aria-disabled": lEstJoursActif ? false : 'true',
                    "aria-current": lEstJourCourant ? 'date' : false,
                    "aria-selected": lEstDateSelectionnee ? 'true' : 'false',
                    "aria-label": ObjetDate_1.GDate.formatDate(lDate, '%JJJJ %J %MMM %AAAA')
                }, IE.jsx.str("div", null, IE.jsx.str("div", {
                    id: lId
                }, IE.jsx.str("div", null, IE.jsx.str("div", null, ObjetDate_1.GDate.formatDate(lDate, '%J')))))));
                return lHtml.join('');
            }
            surSurvol(I, J, aSurvol) {
                const lId = this.Nom + '_td_' + I + '_' + J;
                if (this.ICourant && this.JCourant && this.JCourant !== -1 && (this.ICourant !== I || this.JCourant !== J)) {
                    this.surSurvol(this.ICourant, this.JCourant, false);
                }
                if (aSurvol) {
                    this.ICourant = I;
                    this.JCourant = J;
                    ObjetHtml_1.GHtml.setFocus(lId);
                }
            }
            surSelection(I, J) {
                if (!this.estJourActif(I, J)) {
                    return;
                }
                if ('surValidation'in this.Pere) {
                    this.Pere.date = ObjetDate_1.GDate.getDateJour(ObjetDate_1.GDate.getJourSuivant(this.premierLundiDuMois, I * 7 + J));
                    this.Pere.surValidation(1, this.mois, this.annee);
                }
            }
            estJourDuMois(I, J) {
                const lDate = ObjetDate_1.GDate.getJourSuivant(this.premierLundiDuMois, I * 7 + J);
                const lMois = lDate.getMonth();
                return lMois === this.mois && this.moteurDate.estDateDansBorne(lDate);
            }
            estJourActif(I, J) {
                return this.estJourValide(I, J);
            }
            estJourValide(I, J) {
                if (!IE.Cycles) {
                    return true;
                }
                const lDate = ObjetDate_1.GDate.getJourSuivant(this.premierLundiDuMois, I * 7 + J);
                return this.moteurDate.estDateValide(lDate);
            }
            estJourSemaineOuvre(J) {
                return this.moteurDate.options.joursSemaineValide ? this.moteurDate.options.joursSemaineValide.getValeur(J + 1) : true;
            }
            estJourMarque(aDate) {
                if (!IE.Cycles) {
                    return false;
                }
                const lNbJours = this.moteurDate.options.estJoursMarquesSelonPremiereDate ? ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.moteurDate.options.premiereDate, aDate) : ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(IE.Cycles.dateDebutPremierCycle(), aDate) + 1;
                return this.moteurDate.options.joursMarques ? this.moteurDate.options.joursMarques.getValeur(lNbJours) : false;
            }
            _avecComboAnnee() {
                return !this.moteurDate.options.premiereDate || !this.moteurDate.options.derniereDate;
            }
            _eventSurSelecMois(aParams) {
                if (aParams.genreEvenement === Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection && aParams.element) {
                    this.parametres.indiceMoisCourant = aParams.indice;
                    this._actualiserSelonMoisCourant(aParams.element);
                }
            }
            _eventSelecAnnee(aParams) {
                if (aParams.genreEvenement === Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection) {
                    this.parametres.listeMois = this._construireListeMoisDAnnee(aParams.element.annee);
                    let lMoisTrouve = false;
                    this.parametres.listeMois.parcourir( (aMoisListe, aIndex) => {
                        if (this.parametres.indiceMoisCourant === aIndex) {
                            lMoisTrouve = true;
                            return false;
                        }
                    }
                    );
                    if (!lMoisTrouve) {
                        this.parametres.indiceMoisCourant = aParams.indice > this.parametres.indiceAnnee ? 0 : this.parametres.listeMois.count() - 1;
                    }
                    this.parametres.indiceAnnee = aParams.indice;
                    this.comboMois.setDonnees(this.parametres.listeMois, this.parametres.indiceMoisCourant);
                }
            }
            _getIndiceMoisDeDate(aDate) {
                const lAnnee = aDate.getFullYear();
                const lMois = aDate.getMonth();
                let lIndice = 0;
                this.parametres.listeMois.parcourir( (D, aIndex) => {
                    if (D.mois === lMois && D.annee === lAnnee) {
                        lIndice = aIndex;
                        return false;
                    }
                }
                );
                return lIndice;
            }
            _actualiserSelonMoisCourant(aArticleMois) {
                this.mois = aArticleMois.mois;
                this.annee = aArticleMois.annee;
                this.premierJourDuMois = ObjetDate_1.GDate.getPremierJourDuMois(aArticleMois.annee, aArticleMois.mois);
                this.premierLundiDuMois = ObjetDate_1.GDate.getPremierLundiDuMois(aArticleMois.annee, aArticleMois.mois);
                this.$refreshSelf();
                this._afficherJoursDeMoisCourant();
            }
            _construireListeMoisDAnnee(aAnnee) {
                let lPremiereDate = ObjetDate_1.GDate.getPremierJourDuMois(aAnnee, 0);
                let lDerniereDate = ObjetDate_1.GDate.getDernierJourDuMois(aAnnee, 11);
                if (this.moteurDate.options.premiereDate && this.moteurDate.options.premiereDate > lPremiereDate) {
                    lPremiereDate = this.moteurDate.options.premiereDate;
                }
                if (this.moteurDate.options.derniereDate && this.moteurDate.options.derniereDate < lDerniereDate) {
                    lDerniereDate = this.moteurDate.options.derniereDate;
                }
                const lListe = ObjetDate_1.GDate.getListeMoisAPartirDeDate(lPremiereDate, lDerniereDate, '%MMMM');
                return lListe;
            }
            _construireListeAnnees(aDate) {
                const lListeAnnees = new ObjetListeElements_1.ObjetListeElements();
                const lAnneeCourante = aDate.getFullYear();
                let lAnneeDebut = lAnneeCourante;
                let lAnneeFin = lAnneeCourante;
                if (this.moteurDate.options.premiereDate) {
                    lAnneeDebut = this.moteurDate.options.premiereDate.getFullYear();
                } else {
                    lAnneeDebut = lAnneeCourante - 100;
                }
                if (this.moteurDate.options.derniereDate) {
                    lAnneeFin = this.moteurDate.options.derniereDate.getFullYear();
                } else {
                    lAnneeFin = lAnneeCourante + 100;
                }
                this.parametres.indiceAnnee = 0;
                for (let lAnnee = lAnneeDebut; lAnnee <= lAnneeFin; lAnnee++) {
                    lListeAnnees.add(ObjetElement_1.ObjetElement.create({
                        Libelle: lAnnee + '',
                        annee: lAnnee
                    }));
                    if (lAnneeCourante === lAnnee) {
                        this.parametres.indiceAnnee = lListeAnnees.count() - 1;
                    }
                }
                this.comboAnnee.setDonnees(lListeAnnees, this.parametres.indiceAnnee);
            }
            _getJourPremierSemaine() {
                return ObjetDate_1.GDate.PremierLundi ? ObjetDate_1.GDate.getJourDeDate(ObjetDate_1.GDate.PremierLundi) : 0;
            }
            _afficherJoursDeMoisCourant() {
                let lHtml = (IE.jsx.str("table", {
                    class: "full-width Texte10 EspaceHaut m-top-l",
                    role: "grid",
                    "aria-label": this.ariaLabel
                }, IE.jsx.str("tr", {
                    class: "titre-jours",
                    role: "row"
                }, (T) => {
                    for (let J = 0; J < this.nbrColonnes; J++) {
                        const lJour = (J + this._getJourPremierSemaine()) % 7;
                        T.push(IE.jsx.str("th", {
                            role: "columnheader",
                            class: this.estJourSemaineOuvre(lJour) ? ' ouvre' : '',
                            "aria-label": ObjetTraduction_1.GTraductions.getValeur('Jours')[lJour]
                        }, ObjetTraduction_1.GTraductions.getValeur('JoursCourt')[lJour]));
                    }
                }
                ), (T) => {
                    for (let I = 0; I < this.nbrLignes; I++) {
                        T.push(IE.jsx.str("tr", {
                            class: "jours",
                            role: "row"
                        }, (aTabJour) => {
                            for (let J = 0; J < this.nbrColonnes; J++) {
                                aTabJour.push(this.composeJour(I, J));
                            }
                        }
                        ));
                    }
                }
                ));
                ObjetHtml_1.GHtml.setHtml(this.idJours, lHtml, true);
            }
            _surKeyUp(I, J, aEvent) {
                if (ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent)) {
                    if (this.estJourValide(I, J)) {
                        this.surSelection(I, J);
                    }
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut && I > 0) {
                    this.surSurvol(I, J, false);
                    this.surSurvol(I - 1, J, true);
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas && I + 1 < this.nbrLignes) {
                    this.surSurvol(I, J, false);
                    this.surSurvol(I + 1, J, true);
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheGauche && J > 0) {
                    this.surSurvol(I, J, false);
                    this.surSurvol(I, J - 1, true);
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheDroite && J + 1 < this.nbrColonnes) {
                    this.surSurvol(I, J, false);
                    this.surSurvol(I, J + 1, true);
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Debut) {
                    this.surSurvol(I, J, false);
                    this.surSurvol(aEvent.ctrlKey ? 0 : I, 0, true);
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Fin) {
                    this.surSurvol(I, J, false);
                    this.surSurvol(aEvent.ctrlKey ? this.nbrLignes - 1 : I, this.nbrColonnes - 1, true);
                }
            }
        }
        exports.InterfaceSelecteurDate = InterfaceSelecteurDate;
        function _getLigneEtColonne(aElement) {
            return {
                i: ObjetHtml_1.GHtml.extraireNombreDId(aElement.id, 1),
                j: ObjetHtml_1.GHtml.extraireNombreDId(aElement.id)
            };
        }
    },
    fn: 'interfaceselecteurdate.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_Date = void 0;
        const InterfaceSelecteurDate_1 = require("InterfaceSelecteurDate");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const MoteurSelecteurDate_1 = require("MoteurSelecteurDate");
        const MethodesObjet_1 = require("MethodesObjet");
        class ObjetFenetre_Date extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    titre: ObjetTraduction_1.GTraductions.getValeur('Fenetre_Date.Titre'),
                    largeur: 330,
                    hauteur: 100,
                    fermerFenetreSurClicHorsFenetre: IE.estMobile,
                    avecTailleSelonContenu: true,
                    avecTailleSelonContenuMobile: true,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')],
                    avecAucuneDate: false
                });
                this.moteurDate = new MoteurSelecteurDate_1.MoteurSelecteurDate();
                this.parametres = {
                    listeMois: new ObjetListeElements_1.ObjetListeElements(),
                    indiceMoisCourant: -1
                };
            }
            composeContenu() {
                const T = [];
                T.push('<div id="', this.getNomInstance(this.identSelecteur), '" class="ContentBox"></div>');
                return T.join('');
            }
            setParametres(aPremierLundi, aPremiereDate, aDerniereDate, aActifJour, aActifSemaine, aJoursFeries, aAvecAucuneDate) {
                this.setOptionsMoteurDate({
                    premiereDate: aPremiereDate,
                    derniereDate: aDerniereDate,
                    joursSemaineValide: aActifJour,
                    domaineValide: aActifSemaine,
                    joursFeries: aJoursFeries
                });
                if (aAvecAucuneDate !== undefined) {
                    this.setOptionsFenetre({
                        avecAucuneDate: aAvecAucuneDate
                    });
                }
            }
            setMoteurDate(aMoteurDate) {
                this.moteurDate = aMoteurDate;
            }
            setOptionsMoteurDate(aOptions) {
                this.moteurDate.setOptions(aOptions);
            }
            setDonnees(aDate) {
                this.afficher();
                this.date = aDate;
                if (this.optionsFenetre.avecAucuneDate) {
                    this.setOptionsFenetre({
                        listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fenetre_Date.AucuneDate')]
                    });
                }
                const lInterface = this.getInstance(this.identSelecteur);
                if (MethodesObjet_1.MethodesObjet.isString(this.optionsFenetre.titre)) {
                    lInterface.setAriaLabel(this.optionsFenetre.titre);
                }
                lInterface.setDonnees(aDate);
            }
            construireInstances() {
                this.identSelecteur = this.add(InterfaceSelecteurDate_1.InterfaceSelecteurDate, null, (aInstance) => {
                    aInstance.setMoteurDate(this.moteurDate);
                }
                );
            }
            setJoursMarques(aJoursMarques) {
                this.moteurDate.setOptions({
                    joursMarques: aJoursMarques
                });
            }
            setPremiereDateSaisissable(aPremiereDateSaisissable, aAfficher) {
                this.moteurDate.setOptions({
                    premiereDateSaisissable: aPremiereDateSaisissable || this.moteurDate.options.premiereDate,
                    afficherPremiereDateSaisissable: aAfficher ? aAfficher : false
                });
            }
            surValidation(aGenreBouton) {
                if (aGenreBouton === -1 || aGenreBouton === 0 || this.moteurDate.estDateDansBorne(this.date)) {
                    this.fermer();
                    this.callback.appel(aGenreBouton, this.date);
                }
            }
        }
        exports.ObjetFenetre_Date = ObjetFenetre_Date;
    },
    fn: 'objetfenetre_date.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ExportBlob = void 0;
        exports.ExportBlob = {
            create(aContenu, aNomFichier, aTypeMime) {
                let lFile = null;
                let lExt = null;
                let lReussite = false;
                if (aTypeMime === 'text/csv') {
                    lFile = ['\ufeff', aContenu];
                    lExt = '.csv';
                } else if (aTypeMime === 'text/xml') {
                    lFile = [aContenu];
                    lExt = '.xml';
                }
                if (lFile) {
                    let lBlob;
                    try {
                        lBlob = new Blob(lFile,{
                            type: aTypeMime
                        });
                    } catch (e1) {
                        try {
                            const BlobBuilder = window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder;
                            if (e1.name === 'TypeError' && window.BlobBuilder) {
                                const bb = new BlobBuilder();
                                bb.append(lFile);
                                lBlob = bb.getBlob(aTypeMime);
                            } else if (e1.name === 'InvalidStateError') {
                                lBlob = new Blob(lFile,{
                                    type: aTypeMime
                                });
                            }
                        } catch (e2) {
                            IE.log.addLog('echec BlobBuilder');
                            return false;
                        }
                    }
                    let lAhref = null;
                    try {
                        lAhref = $('<a href="' + (window.webkitURL || window.URL).createObjectURL(lBlob) + '" download="' + aNomFichier + lExt + '" style="display:none;"></a>');
                    } catch (e) {
                        IE.log.addLog('echec createObjectURL');
                        return false;
                    }
                    $('body').append(lAhref);
                    try {
                        if (window.navigator && window.navigator.msSaveBlob) {
                            window.navigator.msSaveBlob(lBlob, aNomFichier + lExt);
                            lReussite = true;
                        }
                    } catch (e2) {
                        IE.log.addLog('echec msSaveBlob');
                    }
                    if (!lReussite) {
                        try {
                            lAhref.get(0).click();
                            lReussite = true;
                        } catch (e) {}
                    }
                    lAhref.remove();
                } else {}
                return lReussite;
            }
        };
    },
    fn: 'exportblob.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_ParametrageColonnesListe = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetElement_1 = require("ObjetElement");
        const TypeFusionTitreListe_1 = require("TypeFusionTitreListe");
        const ObjetDonneesListe_1 = require("ObjetDonneesListe");
        const _ObjetListe_1 = require("_ObjetListe");
        class ObjetFenetre_ParametrageColonnesListe extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    avecTailleSelonContenu: true,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler'), {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }],
                    addParametresValidation: (aParams) => {
                        const lParametrage = [];
                        if (aParams.bouton.valider) {
                            this.listeColonnes.parcourir( (aElement) => {
                                if (aElement.visible) {
                                    lParametrage.push({
                                        id: aElement.declaration.id
                                    });
                                } else {
                                    lParametrage.push({
                                        id: aElement.declaration.id,
                                        visible: false
                                    });
                                }
                            }
                            );
                        }
                        return {
                            parametrage: lParametrage
                        };
                    }
                });
            }
            construireInstances() {
                const ConstructorObjetListe = this.optionsFenetre.classObjetListe;
                this.identListe = this.add(ConstructorObjetListe, null, (aInstance) => {
                    aInstance.setOptionsListe({
                        colonnes: [{
                            id: colonnes.coche,
                            taille: 20
                        }, {
                            id: colonnes.libelle,
                            taille: 200
                        }],
                        hauteurAdapteContenu: true,
                        hauteurMaxAdapteContenu: 400,
                        boutons: [{
                            genre: _ObjetListe_1.ObjetListe.typeBouton.monter
                        }, {
                            genre: _ObjetListe_1.ObjetListe.typeBouton.descendre
                        }]
                    });
                }
                );
            }
            composeContenu() {
                return ['<div id="' + this.getNomInstance(this.identListe) + '" style="height:100%"></div>'].join('');
            }
            setDonnees(aParams) {
                this.afficher();
                this.listeColonnes = new ObjetListeElements_1.ObjetListeElements();
                const lListeNonTrouve = new ObjetListeElements_1.ObjetListeElements();
                const lTitreFusionGauche = [];
                aParams.declarationColonnes.forEach( (aDeclaration, aIndex) => {
                    const lIndex = _chercherIdColonne(aParams.parametrageColonnes, aDeclaration.id)
                      , lElement = new ObjetElement_1.ObjetElement();
                    lElement.declaration = aDeclaration;
                    lElement.indexDeclaration = aIndex;
                    lElement.visible = true;
                    if (aParams.tableauColonnesCachees && aParams.tableauColonnesCachees[aIndex] === true) {
                        lElement.estCachee = true;
                    }
                    let lTitre = aDeclaration.titre;
                    if (!Array.isArray(lTitre)) {
                        lTitre = [lTitre];
                    }
                    lElement.Libelle = '';
                    lTitre.forEach( (aTitre, aIndex) => {
                        let lLibelle = aTitre;
                        if (MethodesObjet_1.MethodesObjet.isObject(aTitre)) {
                            lLibelle = '';
                            if (aTitre.libelleParametrageColonne) {
                                lLibelle = aTitre.libelleParametrageColonne;
                            } else if (aTitre.libelle) {
                                lLibelle = aTitre.libelle;
                            }
                            ;
                        }
                        if (lLibelle === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionHaute) {
                            return;
                        }
                        if (lLibelle === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche && lTitreFusionGauche[aIndex]) {
                            lLibelle = lTitreFusionGauche[aIndex];
                        }
                        if (MethodesObjet_1.MethodesObjet.isString(lLibelle)) {
                            lTitreFusionGauche[aIndex] = lLibelle;
                            lElement.Libelle += (aIndex > 0 ? ' > ' : '') + lLibelle;
                        }
                    }
                    );
                    if (lIndex >= 0) {
                        lElement.visible = aParams.parametrageColonnes[lIndex].visible !== false;
                        this.listeColonnes.addElement(lElement, lIndex);
                    } else {
                        lListeNonTrouve.addElement(lElement);
                    }
                }
                );
                this.listeColonnes.add(lListeNonTrouve);
                this.getInstance(this.identListe).setDonnees(new DonneesListe_ParametrageColonnesListe(this.listeColonnes));
            }
        }
        exports.ObjetFenetre_ParametrageColonnesListe = ObjetFenetre_ParametrageColonnesListe;
        function _chercherIdColonne(aParametrage, aId) {
            let lIndex = -1;
            if (Array.isArray(aParametrage)) {
                aParametrage.every( (aElement, aIndex) => {
                    if (aElement && aElement.id === aId) {
                        lIndex = aIndex;
                        return false;
                    }
                    return true;
                }
                );
            }
            return lIndex;
        }
        class DonneesListe_ParametrageColonnesListe extends ObjetDonneesListe_1.ObjetDonneesListe {
            constructor(aListe) {
                super(aListe);
                this.setOptions({
                    avecSuppression: false,
                    avecEtatSaisie: false,
                    avecTri: false,
                    avecLigneDroppable: true,
                    avecLigneDraggable: true
                });
            }
            getValeur(aParams) {
                switch (aParams.idColonne) {
                case colonnes.coche:
                    return aParams.article.visible;
                case colonnes.libelle:
                    return aParams.article.getLibelle();
                }
            }
            getTypeValeur(aParams) {
                return aParams.idColonne === colonnes.coche ? ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche : ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Texte;
            }
            getVisible(D) {
                return !!D && !D.estCachee;
            }
            avecEdition(aParams) {
                if (aParams.article && aParams.article.declaration.nonSupprimable) {
                    return false;
                }
                if (aParams.article && aParams.article.visible && aParams.idColonne === colonnes.coche) {
                    let lNbVisibles = 0;
                    this.Donnees.parcourir( (aArticle) => {
                        if (aArticle.visible) {
                            lNbVisibles += 1;
                        }
                    }
                    );
                    if (lNbVisibles < 2) {
                        return false;
                    }
                }
                return aParams.idColonne === colonnes.coche;
            }
            surEdition(aParams, V) {
                aParams.article.visible = V;
            }
            getCouleurCellule(aParams, aCouleurCellule) {
                if (aParams.idColonne === colonnes.libelle) {
                    if (aParams.article.declaration.nonSupprimable) {
                        aCouleurCellule.texte = 'var(--color-red-foncee)';
                    } else if (aParams.article.declaration.nonDeplacable) {
                        aCouleurCellule.texte = 'gray';
                    }
                }
                return aCouleurCellule;
            }
            getClass(aParams) {
                if (aParams.idColonne === colonnes.libelle && aParams.article.declaration.nonDeplacable) {
                    return 'Italique';
                }
            }
            autoriserDeplacementElementSurLigne(aParamsLigneDestination, aParamsSource) {
                const lAutoriserParent = super.autoriserDeplacementElementSurLigne(aParamsLigneDestination, aParamsSource);
                return lAutoriserParent && !aParamsLigneDestination.article.declaration.nonDeplacable && !aParamsSource.article.declaration.nonDeplacable;
            }
            surDeplacementElementSurLigne(aParamsLigneDestination, aParamsSource) {
                this.Donnees.remove(aParamsSource.ligne).insererElement(aParamsSource.article, aParamsLigneDestination.ligne);
            }
        }
        var colonnes;
        (function(colonnes) {
            colonnes["coche"] = "coche";
            colonnes["libelle"] = "libelle";
        }
        )(colonnes || (colonnes = {}));
    },
    fn: 'objetfenetre_parametragecolonnesliste.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesObjetListe = void 0;
        require("ObjetListe.css");
        exports.StylesObjetListe = {
            Liste_Cellule_Vide: 'Liste_Cellule_Vide',
            Liste_Cellule_Blanc: 'Liste_Cellule_Blanc',
            Liste_Cellule_Gris: 'Liste_Cellule_Gris',
            Liste_Cellule_Deploiement: 'Liste_Cellule_Deploiement',
            Liste_Suppression: 'Liste_Suppression',
            Liste_Rouge: 'Liste_Rouge',
            Liste_Cellule_ZoneTexte: 'Liste_Cellule_ZoneTexte',
            ObjetListe: 'ObjetListe',
            conteneurScrollBloc: 'conteneur-scroll-bloc',
            skin_flatDesign: 'skin_flatDesign',
            liste_zone: 'liste_zone',
            conteneurOmbreZone: 'conteneur-ombre-zone',
            ombreTop: 'ombre-top',
            ombreTopDroite: 'ombre-top-droite',
            ombreTopGauche: 'ombre-top-gauche',
            ombre: 'ombre',
            gauche: 'gauche',
            droite: 'droite',
            ombreBottom: 'ombre-bottom',
            liste_btnentete: 'liste_btnentete',
            liste_rechercheTexte: 'liste_rechercheTexte',
            listeTitreZone: 'liste-titre-zone',
            scrollH: 'scroll-h',
            bLeft: 'b-left',
            bRight: 'b-right',
            listeTitreContenu: 'liste-titre-contenu',
            liste_gridTitre: 'liste_gridTitre',
            iecb: 'iecb',
            liste_gridTitre_cel: 'liste_gridTitre_cel',
            bTop: 'b-top',
            liste_gridTitre_celTri: 'liste_gridTitre_cel-tri',
            ligneCreationModele: 'ligne-creation-modele',
            listeCreationEdition: 'liste-creation-edition',
            liste_titreGabLigne: 'liste_titreGabLigne',
            liste_titre_separateur: 'liste_titre_separateur',
            liste_fixed: 'liste_fixed',
            liste_zoneFils: 'liste_zoneFils',
            AvecThemeFond: 'AvecThemeFond',
            listeHeriar: 'liste-heriar',
            liste_celluleGrid: 'liste_celluleGrid',
            voileDropCellule: 'voileDropCellule',
            voileBleuTitre: 'voileBleuTitre',
            conteneurTri_scroll: 'conteneurTri_scroll',
            tri_scroll_contenu: 'tri_scroll_contenu',
            flecheTri: 'flecheTri',
            flecheTriNonSurvol: 'flecheTriNonSurvol',
            liste_conteneur_rollover: 'liste_conteneur_rollover',
            titre: 'titre',
            left: 'left',
            top: 'top',
            center: 'center',
            divLigneCreation: 'divLigneCreation',
            liste_contenu_cellule: 'liste_contenu_cellule',
            liste_cellule_alignVCenter: 'liste_cellule_alignVCenter',
            liste_contenu_cellule_deploiement: 'liste_contenu_cellule_deploiement',
            iconDeploiement: 'iconDeploiement',
            liste_contenu_cellule_contenu: 'liste_contenu_cellule_contenu',
            liste_contenu_ligne: 'liste_contenu_ligne',
            liste_traitSepDeploiement: 'liste_traitSepDeploiement',
            Liste_ZoneTexte: 'Liste_ZoneTexte',
            Liste_Input_Texte: 'Liste_Input_Texte',
            dessinHoverListe: 'dessinHoverListe',
            dessinHoverListe_cadre: 'dessinHoverListe_cadre',
            dessinHoverListe_gauche: 'dessinHoverListe_gauche',
            dessinHoverListe_haut: 'dessinHoverListe_haut',
            dessinHoverListe_bas: 'dessinHoverListe_bas',
            selecfile_classDrag_survol: 'selecfile_classDrag_survol',
            selecfile_classDrag: 'selecfile_classDrag',
            copySVG: 'copySVG',
            ObjetListe_copySVG: 'ObjetListe_copySVG',
            liste_scroll_total: 'liste_scroll_total',
            liste_cellule_total: 'liste_cellule_total',
            bBottom: 'b-bottom',
            liste_surligneur_edition: 'liste_surligneur_edition',
            liste_saisie_textarea: 'liste_saisie_textarea',
            liste_dragInsertion: 'liste_dragInsertion',
            liste_dragInsertion_fg: 'liste_dragInsertion_fg',
            liste_dragInsertion_fd: 'liste_dragInsertion_fd',
            liste_cont_btnscroll: 'liste_cont_btnscroll',
            liste_btnsDroite: 'liste_btnsDroite',
            btnImage: 'btnImage',
            btn_icone_deploiement: 'btn_icone_deploiement',
            btnImageDisable: 'btnImageDisable',
            liste_pagination: 'liste_pagination',
            ObjetListe_Impression: 'ObjetListe_Impression',
            tableConteneur: 'tableConteneur',
            trTitre: 'trTitre',
            trContenu: 'trContenu',
            trTotal: 'trTotal',
            ligneSelectionImp: 'ligneSelectionImp',
            svgTri: 'svg-tri',
            principal: 'principal',
            secondaire: 'secondaire',
            survol: 'survol'
        };
    },
    fn: 'objetliste.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetListeEspace = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const _ObjetListe_1 = require("_ObjetListe");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        const Enumere_TriElement_1 = require("Enumere_TriElement");
        const TypeFusionTitreListe_1 = require("TypeFusionTitreListe");
        const ObjetStyle_2 = require("ObjetStyle");
        const ObjetSupport_1 = require("ObjetSupport");
        const ObjetWAI_1 = require("ObjetWAI");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_Event_1 = require("Enumere_Event");
        const Invocateur_1 = require("Invocateur");
        const ObjetScroll_1 = require("ObjetScroll");
        const ObjetScroll_2 = require("ObjetScroll");
        const ObjetScroll_3 = require("ObjetScroll");
        const ObjetPosition_1 = require("ObjetPosition");
        const Enumere_EvenementListe_1 = require("Enumere_EvenementListe");
        const ObjetDonneesListe_1 = require("ObjetDonneesListe");
        const ObjetMenuContextuel_1 = require("ObjetMenuContextuel");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetFenetre_Date_1 = require("ObjetFenetre_Date");
        const ExportBlob_1 = require("ExportBlob");
        const _ObjetCouleur_1 = require("_ObjetCouleur");
        const ToucheClavier_1 = require("ToucheClavier");
        const ComparateurChaines_1 = require("ComparateurChaines");
        const tag_1 = require("tag");
        const UtilitaireMenuContextuelNatif_1 = require("UtilitaireMenuContextuelNatif");
        const ObjetFenetre_ParametrageColonnesListe_1 = require("ObjetFenetre_ParametrageColonnesListe");
        const IEHtml_1 = require("IEHtml");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const jsx_1 = require("jsx");
        const ObjetDonneesListeFlatDesign_css_1 = require("ObjetDonneesListeFlatDesign.css");
        const ObjetListeEspaceMobile_css_1 = require("ObjetListeEspaceMobile.css");
        const ObjetListe_css_1 = require("ObjetListe.css");
        const Divers_css_1 = require("Divers.css");
        const IEHtmlComposants_1 = require("IEHtmlComposants");
        const GlossaireWAI_1 = require("GlossaireWAI");
        const AccessApp_1 = require("AccessApp");
        const Tooltip_1 = require("Tooltip");
        const _CONST_hauteurImageTri = 4;
        var EGenreZoneScroll;
        (function(EGenreZoneScroll) {
            EGenreZoneScroll[EGenreZoneScroll["contenu"] = 1] = "contenu";
            EGenreZoneScroll[EGenreZoneScroll["titre"] = 2] = "titre";
            EGenreZoneScroll[EGenreZoneScroll["tri"] = 3] = "tri";
            EGenreZoneScroll[EGenreZoneScroll["total"] = 4] = "total";
            EGenreZoneScroll[EGenreZoneScroll["contenuFixe"] = 5] = "contenuFixe";
            EGenreZoneScroll[EGenreZoneScroll["titreFixe"] = 6] = "titreFixe";
            EGenreZoneScroll[EGenreZoneScroll["triFixe"] = 7] = "triFixe";
            EGenreZoneScroll[EGenreZoneScroll["totalFixe"] = 8] = "totalFixe";
            EGenreZoneScroll[EGenreZoneScroll["contenuFixeFin"] = 9] = "contenuFixeFin";
            EGenreZoneScroll[EGenreZoneScroll["titreFixeFin"] = 10] = "titreFixeFin";
            EGenreZoneScroll[EGenreZoneScroll["triFixeFin"] = 11] = "triFixeFin";
            EGenreZoneScroll[EGenreZoneScroll["totalFixeFin"] = 12] = "totalFixeFin";
        }
        )(EGenreZoneScroll || (EGenreZoneScroll = {}));
        let uParseur = ''
          , uTimerParseur = null;
        class ObjetListeEspace extends _ObjetListe_1.ObjetListe {
            constructor(...aParams) {
                super(...aParams);
                Object.assign(this.optionsInterne, {
                    avecModeImpression: true,
                    copierCellule: this._copierCellule.bind(this),
                    collerCellule: this._collerCellule.bind(this),
                    getClassListe: () => {
                        return this._options.hauteurAdapteContenu ? 'hauteur-auto' : '';
                    }
                    ,
                    initStructureDynamique: this._initStructureDynamique.bind(this)
                });
                this.IdPremierElement = this.getIdGridFocus(0);
            }
            composeImpression(aProportion) {
                return this._composeImpression(aProportion);
            }
            construireCopieCSV() {
                ExportBlob_1.ExportBlob.create(this._construireCopieCSV(), 'Export CSV', 'text/csv');
            }
            resize() {
                this._surPreResize();
                this._surPostResize();
            }
            surPreResize() {
                this._surPreResize();
            }
            surPostResize() {
                this._surPostResize();
            }
            _init() {
                super._init();
                if (this.Nom) {
                    if (this.avecEventResizeNavigateur()) {
                        this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurPreResize, this._surPreResize);
                        this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurPostResize, this._surPostResize);
                    }
                    Invocateur_1.Invocateur.abonner(ObjetNavigateur_1.Navigateur.getEventInvocateur('keydown'), this._eventKeyDownApplication, this);
                    Invocateur_1.Invocateur.abonner(ObjetNavigateur_1.Navigateur.getEventInvocateur('keyup') + ' ' + ObjetNavigateur_1.Navigateur.getEventInvocateur('mousemove'), (event) => {
                        if (this._cache.rolloverVisible && !event.ctrlKey) {
                            this._gererRollover(false);
                        }
                    }
                    , this);
                    this.ScrollV = new ObjetScroll_1.ObjetScroll(this.Nom + '.ScrollV',null,this,this._evenementScrollV,ObjetScroll_2.EGenreScroll.Vertical);
                    this.ScrollV.pas = 50;
                    this.ScrollH = new ObjetScroll_1.ObjetScroll(this.Nom + '.ScrollH',null,this,this._evenementScrollH.bind(this),ObjetScroll_2.EGenreScroll.Horizontal);
                    this.ScrollH.pas = 20;
                }
            }
            _ouvrirFenetreParametrageColonnes() {
                ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_ParametrageColonnesListe_1.ObjetFenetre_ParametrageColonnesListe, {
                    pere: this,
                    evenement(aNumeroBouton, aParams) {
                        if (aParams.bouton.valider) {
                            this._cache.parametrageColonnes = aParams.parametrage;
                            this._options.gestionModificationColonnes.setColonnes(aParams.parametrage);
                            this._cache.calculsPreRenduAFaire = true;
                            this._cache.calculsTailleColonnesAFaire = true;
                            this._actualiser({
                                conserverSelection: true,
                                sansTriDonnees: true
                            });
                        }
                    }
                }, {
                    titre: ObjetTraduction_1.GTraductions.getValeur('liste.PersonnaliserListe'),
                    classObjetListe: ObjetListeEspace
                }).setDonnees({
                    declarationColonnes: this._options.colonnes,
                    parametrageColonnes: this._cache.parametrageColonnes,
                    tableauColonnesCachees: this._cache.tableauColonnesCacheesOriginal
                });
            }
            _gererModificationsColonnes() {
                this._cache.listeCorrespondancesColonnes = [];
                if (!this._options.gestionModificationColonnes) {
                    this._cache.colonnes.listeTailles.forEach( (a, aIndex) => {
                        this._cache.listeCorrespondancesColonnes[aIndex] = aIndex;
                    }
                    );
                    return;
                }
                if (!MethodesObjet_1.MethodesObjet.isFunction(this._options.gestionModificationColonnes.getColonnes) || !Array.isArray(this._options.colonnes)) {
                    return;
                }
                this._cache.parametrageColonnes = this._options.gestionModificationColonnes.getColonnes();
                if (!this._cache.parametrageColonnes || !this._cache.parametrageColonnes.length) {
                    this._cache.parametrageColonnes = [];
                    this._cache.colonnes.listeIds.forEach( (aId) => {
                        this._cache.parametrageColonnes.push({
                            id: aId
                        });
                    }
                    );
                }
                const lOriginalIds = [];
                this._options.colonnes.forEach( (aCol, aIndex) => {
                    this._cache.listeCorrespondancesColonnes[aIndex] = -1;
                    lOriginalIds.push(aCol.id);
                }
                );
                this._cache.colonnes.listeIds = [];
                this._cache.colonnes.listeTailles = [];
                this._cache.declarationsColonnes = [];
                this._cache.parametrageColonnes.forEach( (aColonne) => {
                    if (!aColonne) {
                        return;
                    }
                    const lId = aColonne.id;
                    const lDecl = this._cache.declColonnesByIds[lId];
                    if (!lDecl) {
                        return;
                    }
                    if (aColonne.visible === false) {
                        return;
                    }
                    this._cache.declarationsColonnes.push(lDecl);
                    const lNumeroColonne = this._cache.declarationsColonnes.length - 1;
                    this._cache.colonnes.listeIds[lNumeroColonne] = lDecl.id;
                    this._cache.colonnes.listeTailles[lNumeroColonne] = lDecl.taille || 0;
                    this._cache.listeCorrespondancesColonnes[lOriginalIds.indexOf(lDecl.id)] = lNumeroColonne;
                }
                );
                if (this._cache.declarationsColonnes.length === 0 && this._options.colonnes && this._options.colonnes.length > 0) {
                    IE.log.addLog('Aucune colonne visible dans le parametrage');
                    const lDecl = this._cache.declColonnesByIds[this._options.colonnes[0]];
                    this._cache.declarationsColonnes.push(lDecl);
                    this._cache.colonnes.listeIds[0] = lDecl.id;
                    this._cache.colonnes.listeTailles[0] = lDecl.taille || 0;
                    this._cache.listeCorrespondancesColonnes[0] = 0;
                }
            }
            _preparerBoutons() {
                super._preparerBoutons({
                    createExportCSV: (aBouton) => {
                        if (!ObjetSupport_1.Support.supportBlob) {
                            IE.log.addLog('_ObjetListe : bouton exportCSV sans support javascript du Blob => bouton ignor');
                            return;
                        }
                        aBouton.class = 'icon_copier_liste';
                        aBouton.title = ObjetTraduction_1.GTraductions.getValeur('liste.HintCopier');
                        if (!MethodesObjet_1.MethodesObjet.isFunction(aBouton.getNomFichier)) {
                            aBouton.getNomFichier = function() {
                                return ObjetTraduction_1.GTraductions.getValeur('liste.TitreExportCSV');
                            }
                            ;
                        }
                        aBouton.getDisabled = function() {
                            return false;
                        }
                        ;
                        aBouton.event = (aParam) => {
                            ExportBlob_1.ExportBlob.create(this._construireCopieCSV(), aParam.bouton.getNomFichier(), 'text/csv');
                        }
                        ;
                    }
                });
                this.ScrollV.tailleScrollPersonnalisee = this._avecBoutonsListeHautScroll();
            }
            _backupScroll(aParams) {
                if (!aParams.conserverPositionScroll) {
                    return {
                        scrollTop: 0,
                        scrollLeft: 0
                    };
                }
                let lScrollTop = 0;
                let lScrollLeft = 0;
                if (this._cache.avecScrollHorizontal) {
                    lScrollLeft = $('#' + this.ScrollH.getIdZone(EGenreZoneScroll.contenu).escapeJQ()).scrollLeft();
                }
                if (this.ScrollV.avecScrollVisible()) {
                    lScrollTop = ObjetPosition_1.GPosition.getScrollTop(this.ScrollV.getIdZone(EGenreZoneScroll.contenu));
                } else {
                    const lElementScroll = ObjetHtml_1.GHtml.getParentScrollable(this.Nom);
                    if (lElementScroll) {
                        return {
                            elementScrollV: lElementScroll,
                            scrollTop: lElementScroll.scrollTop,
                            scrollLeft: lScrollLeft
                        };
                    }
                }
                return {
                    elementScrollV: ObjetHtml_1.GHtml.getElement(this.ScrollV.getIdZone(EGenreZoneScroll.contenu)),
                    estObjetScroll: true,
                    scrollTop: lScrollTop,
                    scrollLeft: lScrollLeft
                };
            }
            _setScroll(aBackupScroll, aSurResizeHeightContenu) {
                let lUniquementActualisationHeightContenu = false;
                if (aSurResizeHeightContenu) {
                    lUniquementActualisationHeightContenu = this.ScrollV.surModificationHeightContenu();
                }
                if (!lUniquementActualisationHeightContenu) {
                    this.ScrollV.setDonnees(EGenreZoneScroll.contenu, EGenreZoneScroll.contenuFixe, EGenreZoneScroll.contenuFixeFin);
                    if (this._cache.avecScrollHorizontal) {
                        this.ScrollH.setDonnees(EGenreZoneScroll.contenu, EGenreZoneScroll.titre, EGenreZoneScroll.tri, EGenreZoneScroll.total);
                    } else {
                        this.ScrollH.setDonnees(null);
                    }
                    if (aBackupScroll) {
                        if (aBackupScroll.elementScrollV && !aBackupScroll.estObjetScroll) {
                            aBackupScroll.elementScrollV.scrollTop = aBackupScroll.scrollTop;
                        } else {
                            this.ScrollV.scrollTo(aBackupScroll.scrollTop);
                        }
                        if (this._cache.avecScrollHorizontal) {
                            this.ScrollH.scrollTo(aBackupScroll.scrollLeft);
                        }
                    }
                }
                if (this._options.skin === _ObjetListe_1.ObjetListe.skin.flatDesign) {
                    const lClassesOmbre = [];
                    if (!this._cache.ombreTopForce) {
                        lClassesOmbre.push('ombre-top');
                    }
                    if (!this._options.forcerOmbreScrollBottom) {
                        lClassesOmbre.push('ombre-bottom');
                    }
                    if (lClassesOmbre.length > 0) {
                        if (this.ScrollV.avecScrollVisible()) {
                            $(`#${this.idZone.escapeJQ()}`).addClass(lClassesOmbre.join(' '));
                        } else {
                            $(`#${this.idZone.escapeJQ()}`).removeClass(lClassesOmbre.join(' '));
                        }
                    }
                }
                this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                    const lJContenu = $(`#${this.ScrollV.getIdContenu(aInfosZoneColonnes.idScrollContenu).escapeJQ()}`);
                    const lJOmbres = $(`#${(this.ids.contenu + aInfosZoneColonnes.indiceBloc).escapeJQ()} > div.conteneur-ombre-zone > div.ombre`);
                    if (lJOmbres.length > 0 && lJContenu.length === 1) {
                        lJOmbres.height(lJContenu.height()).css({
                            bottom: 'auto'
                        });
                    }
                }
                );
            }
            _construireContenuRange(aInfosColonnes, aIndiceRange) {
                return this.construireContenuListeInterneLignes(aInfosColonnes, aIndiceRange);
            }
            _getTabElementsPourRsizeObserver() {
                return [EGenreZoneScroll.contenu, EGenreZoneScroll.contenuFixe, EGenreZoneScroll.contenuFixeFin].map( (aGenre) => {
                    return ObjetHtml_1.GHtml.getElement(this.ScrollV.getIdContenu(aGenre));
                }
                );
            }
            _getInfosZonesColonnes(aCache) {
                function _addZone(aInfos) {
                    const lInfos = Object.assign({
                        dernierBloc: true,
                        indiceColonneDebut: 0,
                        indiceColonneFin: 0,
                        indiceBloc: aCache.infosZonesColonnes.length,
                        idScrollTri: EGenreZoneScroll.tri,
                        idScrollTitre: EGenreZoneScroll.titre,
                        idScrollContenu: EGenreZoneScroll.contenu,
                        idScrollTotal: EGenreZoneScroll.total,
                        estBlocFixe: false,
                        gabaritColonnesTitre: [],
                        colonnesVisibles: [],
                        largeurBloc: 0,
                        indiceColVisibleDebut: 0
                    }, aInfos);
                    for (let lColonne = lInfos.indiceColonneDebut; lColonne <= lInfos.indiceColonneFin; lColonne++) {
                        if (!aCache.tableauColonnesCachees[lColonne]) {
                            lInfos.colonnesVisibles.push(lColonne);
                        }
                    }
                    if (lInfos.colonnesVisibles.length > 0) {
                        lInfos.indiceColonneDebut = lInfos.colonnesVisibles[0];
                        lInfos.indiceColonneFin = lInfos.colonnesVisibles[lInfos.colonnesVisibles.length - 1];
                        if (aCache.infosZonesColonnes.length > 0) {
                            const lBlocPrec = aCache.infosZonesColonnes[aCache.infosZonesColonnes.length - 1];
                            if (lBlocPrec) {
                                lBlocPrec.dernierBloc = false;
                                lInfos.indiceColVisibleDebut = lBlocPrec.indiceColVisibleDebut + lBlocPrec.colonnesVisibles.length;
                            }
                        }
                        aCache.infosZonesColonnes.push(lInfos);
                        return lInfos;
                    }
                    return null;
                }
                function _rechercheColonneVisible(aNumeroColonne, aRechercheAvant) {
                    let lNumeroColonne = aNumeroColonne;
                    while (lNumeroColonne >= 0 && lNumeroColonne < aCache.tableauColonnesCachees.length) {
                        if (!aCache.tableauColonnesCachees[lNumeroColonne]) {
                            return lNumeroColonne;
                        }
                        lNumeroColonne += (aRechercheAvant ? -1 : 1);
                    }
                    return -1;
                }
                aCache.infosZonesColonnes = [];
                aCache.avecScrollHorizontal = this._options.scrollHorizontal !== false;
                aCache.avecScrollHMultiZonePrevu = this._options.scrollHorizontal && this._options.scrollHorizontal !== true;
                if (!this.ListeTailles) {
                    return;
                }
                let lDerniereColonneFixe = -1;
                let lColonneDebutFixeFin = this.ListeTailles.length - 1;
                let lAvecBlocFixeFin = false;
                let lColScrollDebut = null;
                let lColScrollFin = null;
                if (aCache.avecScrollHorizontal) {
                    let lNumeroColonneAvecScroll = 0;
                    let lNumeroColonneFinScroll = this.ListeTailles.length - 1;
                    lColScrollDebut = this._options.scrollHorizontal;
                    if (typeof this._options.scrollHorizontal === 'object') {
                        if (this._options.scrollHorizontal.debut !== undefined) {
                            lColScrollDebut = this._options.scrollHorizontal.debut;
                        }
                        if (this._options.scrollHorizontal.fin !== undefined) {
                            lColScrollFin = this._options.scrollHorizontal.fin;
                        }
                    }
                    if (MethodesObjet_1.MethodesObjet.isString(lColScrollDebut)) {
                        lNumeroColonneAvecScroll = this.getNumeroColonneDIdColonne(lColScrollDebut);
                    } else if (MethodesObjet_1.MethodesObjet.isNumber(lColScrollDebut) && lColScrollDebut > 0) {
                        lNumeroColonneAvecScroll = lColScrollDebut;
                    }
                    if (lNumeroColonneAvecScroll > 0) {
                        lNumeroColonneAvecScroll = _rechercheColonneVisible(lNumeroColonneAvecScroll, false);
                    }
                    if (MethodesObjet_1.MethodesObjet.isString(lColScrollFin)) {
                        lNumeroColonneFinScroll = this.getNumeroColonneDIdColonne(lColScrollFin);
                    } else if (MethodesObjet_1.MethodesObjet.isNumber(lColScrollFin) && lColScrollFin > 0) {
                        lNumeroColonneFinScroll = lColScrollFin;
                    }
                    if (lNumeroColonneFinScroll > 0) {
                        lNumeroColonneFinScroll = _rechercheColonneVisible(lNumeroColonneFinScroll, true);
                    }
                    if (lNumeroColonneAvecScroll > 0) {
                        lDerniereColonneFixe = lNumeroColonneAvecScroll - 1;
                    }
                    if (lNumeroColonneFinScroll > 1 && lNumeroColonneFinScroll < this.ListeTailles.length - 1 && lNumeroColonneFinScroll > lNumeroColonneAvecScroll) {
                        lColonneDebutFixeFin = lNumeroColonneFinScroll;
                    }
                }
                if (lColonneDebutFixeFin - lDerniereColonneFixe < 2 || lDerniereColonneFixe >= this.ListeTailles.length - 1) {
                    aCache.avecScrollHorizontal = false;
                }
                lAvecBlocFixeFin = lColonneDebutFixeFin < this.ListeTailles.length - 1;
                if (!aCache.avecScrollHorizontal || (lDerniereColonneFixe < 0 && !lAvecBlocFixeFin)) {
                    _addZone({
                        indiceColonneDebut: 0,
                        indiceColonneFin: this.ListeTailles.length - 1
                    });
                    return;
                }
                if (lDerniereColonneFixe >= 0) {
                    _addZone({
                        estBlocFixe: true,
                        indiceColonneDebut: 0,
                        indiceColonneFin: lDerniereColonneFixe,
                        idScrollTri: EGenreZoneScroll.triFixe,
                        idScrollTitre: EGenreZoneScroll.titreFixe,
                        idScrollContenu: EGenreZoneScroll.contenuFixe,
                        idScrollTotal: EGenreZoneScroll.totalFixe
                    });
                }
                _addZone({
                    indiceColonneDebut: lDerniereColonneFixe + 1,
                    indiceColonneFin: lColonneDebutFixeFin
                });
                if (lAvecBlocFixeFin) {
                    _addZone({
                        estBlocFixe: true,
                        estBlocFixeDroite: true,
                        indiceColonneDebut: lColonneDebutFixeFin + 1,
                        indiceColonneFin: this.ListeTailles.length - 1,
                        idScrollTri: EGenreZoneScroll.triFixeFin,
                        idScrollTitre: EGenreZoneScroll.titreFixeFin,
                        idScrollContenu: EGenreZoneScroll.contenuFixeFin,
                        idScrollTotal: EGenreZoneScroll.totalFixeFin
                    });
                }
            }
            _construireAffichage() {
                let lLargeurTable;
                if (!this._cache.largeurTotalCalcule) {
                    lLargeurTable = '100%';
                } else {
                    lLargeurTable = this._getLargeurConteneur() + 'px';
                }
                const lEstTreeGrid = this._estRoleTreeGrid();
                this._cache.gridTotalAccess.nav = null;
                return IE.jsx.str("div", {
                    "ie-node": this.jsxGetNodeListe.bind(this, this),
                    "ie-nodeafter": this.jsxGetNodeAfterListe.bind(this),
                    class: ObjetListeEspaceMobile_css_1.StylesObjetListeEspaceMobile.ObjetListe,
                    "ie-class": this.jsxGetClassListe.bind(this),
                    "ie-attr": this.jsxGetAttrListe.bind(this),
                    style: this._cache.listeNonInitialisee ? ' visibility:hidden' : false
                }, (T) => {
                    const lHtmlEntete = this._construireBoutonsEntete(lLargeurTable);
                    if (lHtmlEntete) {
                        T.push(IE.jsx.str("div", {
                            role: "presentation"
                        }, lHtmlEntete));
                    }
                    this._cache.ombreTopForce = this._options.skin === _ObjetListe_1.ObjetListe.skin.flatDesign && !!(lHtmlEntete || this._options.forcerOmbreScrollTop);
                    const lHtmlPiedDeListe = this._options.piedDeListe ? IE.jsx.str("div", {
                        id: this.idPiedDeListe,
                        class: "liste-pied"
                    }) : '';
                    T.push(IE.jsx.str("div", {
                        id: this.idZone,
                        class: ['liste_zone conteneur-ombre-zone ', (this._cache.ombreTopForce ? ' ombre-top' : ''), (this._options.forcerOmbreScrollBottom ? ' ombre-bottom' : '')],
                        style: `width:${lLargeurTable}`,
                        "data-tooltip-align": Tooltip_1.Tooltip.Align.bottom
                    }, () => {
                        let lResultZone = (IE.jsx.str("div", {
                            id: this.ids.zoneFils,
                            class: "liste_zoneFils NoWrap",
                            role: "presentation"
                        }, (aTabGrid) => {
                            const lAvecTri = this.avecTriColonne();
                            const lAvecGridTotal = this._avecLigneTotal();
                            const lTabTitre = [];
                            this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                                const lConstructionTitre = this._construireTitre(aInfosZoneColonnes, lAvecTri);
                                if (lConstructionTitre) {
                                    lTabTitre.push(lConstructionTitre);
                                }
                            }
                            );
                            const lTabGridVisuel = [];
                            if (lTabTitre.length > 0) {
                                lTabGridVisuel.push(IE.jsx.str("div", {
                                    class: "liste-heriar"
                                }, lTabTitre.join('')));
                            }
                            lTabGridVisuel.push(IE.jsx.str("div", {
                                class: "liste-heriar",
                                role: "presentation"
                            }, (aTab) => {
                                this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                                    aTab.push(this._construireContenuListe(aInfosZoneColonnes));
                                }
                                );
                            }
                            ));
                            if (lAvecGridTotal) {
                                lTabGridVisuel.push(IE.jsx.str("div", {
                                    class: "liste-heriar",
                                    role: "presentation"
                                }, (aTab) => {
                                    this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                                        aTab.push(this._construireLigneTotal(aInfosZoneColonnes));
                                    }
                                    );
                                }
                                ));
                            }
                            let lAvecScrollH = false;
                            this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                                if (!aInfosZoneColonnes.estBlocFixe && this._cache.avecScrollHorizontal && this._cache.reserverPlaceScrollHorizontal) {
                                    lAvecScrollH = true;
                                }
                            }
                            );
                            if (lAvecScrollH) {
                                lTabGridVisuel.push(IE.jsx.str("div", {
                                    class: "liste-heriar",
                                    role: "presentation"
                                }, (aTab) => {
                                    this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                                        if (aInfosZoneColonnes.estBlocFixe) {
                                            aTab.push(IE.jsx.str("div", {
                                                style: {
                                                    width: aInfosZoneColonnes.largeurBloc
                                                }
                                            }));
                                        } else {
                                            aTab.push(IE.jsx.str("div", {
                                                id: this.ScrollH.getIdScroll(),
                                                role: "presentation",
                                                style: ObjetStyle_1.GStyle.composeHeight(this.ScrollH.Largeur) + (this._options.borduresContenu_left > 0 && aInfosZoneColonnes.indiceBloc === 0 ? 'padding-left:' + this._options.borduresContenu_left + 'px;' : '')
                                            }));
                                        }
                                    }
                                    );
                                }
                                ));
                            }
                            if (this._options.skin !== _ObjetListe_1.ObjetListe.skin.flatDesign && lHtmlPiedDeListe) {
                                lTabGridVisuel.push(lHtmlPiedDeListe);
                            }
                            if (lEstTreeGrid) {
                                aTabGrid.push(this.construireGridWAI(lAvecTri, lAvecGridTotal));
                            }
                            aTabGrid.push(lTabGridVisuel.join(''));
                        }
                        ));
                        lResultZone += (IE.jsx.str("div", {
                            class: "liste_cont_btnscroll AlignementGauche InlineBlock AlignementHaut"
                        }, () => {
                            let lResult = '';
                            const lAvecBoutons = this._avecBoutonsListeHautScroll();
                            if (lAvecBoutons) {
                                lResult += (IE.jsx.str("div", {
                                    class: "liste_btnsDroite"
                                }, (aTab) => {
                                    this._cache.boutons.forEach( (aBouton, aIndex) => {
                                        aTab.push(IE.jsx.str("div", {
                                            style: ObjetStyle_1.GStyle.composeWidth(this._options.tailleBoutons + 1) + ObjetStyle_1.GStyle.composeHeight(this._options.tailleBoutons + 1)
                                        }, IE.jsx.str("ie-btnimage", {
                                            "ie-model": this.jsxModeleBoutonListe.bind(this, this, aBouton),
                                            title: aBouton.title || false,
                                            id: aBouton.id,
                                            class: ['btnImageIcon', aBouton.class]
                                        })));
                                    }
                                    );
                                }
                                ));
                            }
                            lResult += IE.jsx.str("div", {
                                id: this.ScrollV.getIdScroll(),
                                class: "AlignementBas",
                                style: ObjetStyle_1.GStyle.composeWidth(this.ScrollV.Largeur) + 'min-height:' + this.ScrollV.tailleMin + 'px;'
                            }, "\u00A0");
                            return lResult;
                        }
                        ));
                        return lResultZone;
                    }
                    ));
                    T.push(this._construireTotalFD(false, false));
                    if (this._options.skin === _ObjetListe_1.ObjetListe.skin.flatDesign && lHtmlPiedDeListe) {
                        T.push(lHtmlPiedDeListe);
                    }
                    T.push(this.composeWAICommun());
                }
                );
            }
            jsxGetNodeAfterListe() {
                const lAvecBoutons = this._avecBoutonsListeHautScroll();
                if (this._options.borduresContenu_top || !lAvecBoutons) {
                    let lTop = (this._zoneContenuAvecTraitHaut() ? this._options.borduresContenu_top : 0) || 0;
                    if (!lAvecBoutons) {
                        let lMax = 0;
                        this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                            lMax = Math.max(lMax, ObjetPosition_1.GPosition.getHeight(this.ids.titre + aInfosZoneColonnes.indiceBloc));
                        }
                        );
                        lTop += lMax;
                    }
                    $('#' + this.ScrollV.getIdScroll().escapeJQ()).css('padding-top', lTop + 'px');
                }
            }
            _getDessinCurseurTri(aParams) {
                const lParams = Object.assign({
                    triCroissant: true,
                    tri: _ObjetListe_1.NSListe.FlecheTri.principal,
                    width: this._options.widthTri,
                    height: this._options.heightTri,
                    top: 0,
                    left: 0
                }, aParams);
                if (lParams.tri === _ObjetListe_1.NSListe.FlecheTri.secondaire) {
                    lParams.width += -2;
                    lParams.height += -1;
                }
                const lWidth = lParams.width + lParams.left;
                const lHeight = lParams.height + lParams.top;
                return (IE.jsx.str("svg", {
                    class: ['svg-tri', lParams.tri],
                    width: lWidth + 'px',
                    height: lHeight + 'px',
                    xmlns: "http://www.w3.org/2000/svg",
                    role: "presentation"
                }, IE.jsx.str("polygon", {
                    points: ObjetChaine_1.GChaine.format(!lParams.triCroissant ? '%4:s,%3:s %1:s,%3:s %2:s,%0:s' : '%4:s,%0:s %1:s,%0:s %2:s,%3:s', [lParams.height - 2 + lParams.top + 1 + 0.5, lParams.width - 2 + lParams.left + 1 + 0.5, (lParams.width - 2) / 2 + lParams.left + 1 + 0.5, lParams.top + 1 + 0.5, lParams.left + 1 + 0.5])
                })));
            }
            _setStyleCellule(aId, aColonne, aLigne, aSelectionne, aCreation) {
                if (!aId) {
                    return;
                }
                super._setStyleCellule(aId, aColonne, aLigne, aSelectionne, aCreation);
                if (this._options.avecCadreSelection || this._options.ignorerCouleurInlineCellule) {
                    return;
                }
                let lJeuxCouleurs;
                if (aCreation && !aSelectionne) {
                    lJeuxCouleurs = this._options.couleursListe.editable;
                } else {
                    lJeuxCouleurs = this._getJeuxCouleur(this._getParamsCellule(aColonne, aLigne), aSelectionne);
                }
                ObjetStyle_1.GStyle.setCouleur(aId, lJeuxCouleurs.getFond(false), lJeuxCouleurs.getTexte(false));
            }
            _actualiserZones(aZonesActualisation, aParamsActualiser) {
                if (aZonesActualisation.contenu) {
                    this._initCacheLignes(aParamsActualiser);
                    this._cache.structureWAI.lignes = [];
                }
                const lFunc = (aCallbackContenu, aCallbackTotal) => {
                    this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                        if (aZonesActualisation.contenu) {
                            const lJTotalDansScroll = $(`#${this.Nom.escapeJQ()} .${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeTotaleFd}.${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeHeaderFooterInScroll}`);
                            if (lJTotalDansScroll.length > 0) {
                                lJTotalDansScroll.remove();
                            }
                            $(ObjetHtml_1.GHtml.getElement(this.getIdGridFocus(aInfosZoneColonnes.indiceBloc))).remove();
                            const lElement = ObjetHtml_1.GHtml.getElement(this.ScrollV.getIdContenu(aInfosZoneColonnes.idScrollContenu));
                            if (lElement) {
                                IEHtml_1.default.injectHTMLParams({
                                    element: lElement,
                                    html: aCallbackContenu ? aCallbackContenu(aInfosZoneColonnes) : '',
                                    controleur: this.controleur,
                                    ignorerScroll: true
                                });
                            }
                        }
                        if (aZonesActualisation.total && this._avecLigneTotal()) {
                            this._cache.structureWAI.totals = [];
                            const lElement = this.ScrollH.getIdZone(aInfosZoneColonnes.idScrollTotal);
                            if (lElement) {
                                ObjetHtml_1.GHtml.setHtml(this.ScrollH.getIdZone(aInfosZoneColonnes.idScrollTotal), aCallbackTotal ? aCallbackTotal(aInfosZoneColonnes) : '', {
                                    controleur: this.controleur,
                                    ignorerScroll: true
                                });
                            }
                        }
                    }
                    );
                }
                ;
                lFunc();
                lFunc( (aInfosZoneColonnes) => {
                    $(`#${this.ids.cadreSelection.escapeJQ() + aInfosZoneColonnes.indiceBloc}`).empty();
                    return this.construireContenuListeInterne(aInfosZoneColonnes);
                }
                , aInfosZoneColonnes => this._construireContenuTotal(aInfosZoneColonnes).html);
                this.actualiserLignesContenusWAI();
                this._controleHeightLigne();
            }
            _controleHeightLigne() {
                if (this._cache.infosZonesColonnes.length < 2) {
                    return;
                }
                if (!this.Donnees || !this.ListeTailles) {
                    return;
                }
                const lTabModif = [];
                const lRangeLignes = {
                    debut: 0,
                    fin: this._cache.lignesVisibles.length
                };
                if (this._cache.refresh.avecConstructionDynamiqueContenu) {
                    const lCacheRef = this._cache.refresh;
                    lRangeLignes.debut = lCacheRef.structure[lCacheRef.mapRangesExist.min].deb;
                    lRangeLignes.fin = lCacheRef.structure[lCacheRef.mapRangesExist.max].fin + 1;
                }
                let iIndice, lNumeroLigne, lHeightMinLigne, lHeightMaxLigne, lHeightIds, lId;
                for (iIndice = lRangeLignes.debut; iIndice < lRangeLignes.fin; iIndice++) {
                    lNumeroLigne = this._cache.lignesVisibles[iIndice];
                    lHeightMinLigne = Number.MAX_VALUE;
                    lHeightMaxLigne = -1;
                    lHeightIds = {};
                    this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                        lId = this.getIdCellule(aInfosZoneColonnes.colonnesVisibles[0], lNumeroLigne);
                        lHeightIds[lId] = $(ObjetHtml_1.GHtml.getElement(this.getIdCellule(aInfosZoneColonnes.colonnesVisibles[0], lNumeroLigne))).height();
                        lHeightMinLigne = Math.min(lHeightIds[lId], lHeightMinLigne);
                        lHeightMaxLigne = Math.max(lHeightIds[lId], lHeightMaxLigne);
                    }
                    );
                    if (lHeightMinLigne < lHeightMaxLigne) {
                        for (lId in lHeightIds) {
                            if (lHeightIds[lId] < lHeightMaxLigne) {
                                lTabModif.push({
                                    id: lId + '_div',
                                    height: lHeightMaxLigne
                                });
                            }
                        }
                    }
                    lHeightIds = null;
                }
                lTabModif.forEach( (aElement) => {
                    ObjetPosition_1.GPosition.setHeight(aElement.id, aElement.height);
                }
                );
            }
            _entrerDateCalendrier(aParams) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return;
                }
                this.fenetreDate = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_Date_1.ObjetFenetre_Date, {
                    pere: this,
                    evenement: this._evenementFenetreDate.bind(this, aParams)
                });
                this.fenetreDate.setOptionsFenetre({
                    callbackApresFermer: () => {
                        delete this.fenetreDate;
                    }
                });
                this.Donnees._initialiserObjetGraphique(aParams, this.fenetreDate);
                this.Donnees._setDonneesObjetGraphique(aParams, this.fenetreDate);
                this.fenetreDate.positionnerSousId(this.IdCellule);
            }
            _initStructureDynamique() {
                const lCacheRef = this._cache.refresh;
                if (!lCacheRef.avecConstructionDynamiqueContenu) {
                    return;
                }
                let lNbLignesRestantes = this._cache.lignesVisibles.length;
                const lRangeLignes = {
                    debut: 0,
                    fin: this._cache.lignesVisibles.length
                };
                let lLigneDebut = 0;
                while (lNbLignesRestantes > 0) {
                    let lNbLignes = lNbLignesRestantes < lCacheRef.nbLignes ? lNbLignesRestantes : lCacheRef.nbLignes;
                    let iIndiceLigne = lLigneDebut;
                    while (iIndiceLigne <= lLigneDebut + lNbLignes - 1 && iIndiceLigne < this._cache.lignesVisibles.length) {
                        const lNumeroLigne = this._cache.lignesVisibles[iIndiceLigne];
                        this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                            const lFusions = this._getFusionColonnesCelluleDeZone(lNumeroLigne, aInfosZoneColonnes);
                            aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                                const lParamsCellule = this._getParamsCellule(aNumeroColonne, lNumeroLigne, {
                                    celluleLignePrecedente: (lNumeroLigne > 0 ? this._getParamsCellule(aNumeroColonne, this._cache.lignesVisibles[iIndiceLigne - 1]) : null),
                                    celluleLigneSuivante: (iIndiceLigne + 1 < lRangeLignes.fin ? this._getParamsCellule(aNumeroColonne, this._cache.lignesVisibles[iIndiceLigne + 1]) : null)
                                });
                                const lNombreLignesEnFusion = this._chercherLignesFusionVertical(lParamsCellule, iIndiceLigne, lRangeLignes, lFusions, aInfosZoneColonnes);
                                if (lNombreLignesEnFusion > 1) {
                                    lNbLignes = Math.min(Math.max(lNbLignes, iIndiceLigne + lNombreLignesEnFusion - lLigneDebut), lNbLignesRestantes);
                                }
                            }
                            );
                        }
                        );
                        iIndiceLigne += 1;
                    }
                    lCacheRef.structure.push({
                        deb: lLigneDebut,
                        fin: lLigneDebut + lNbLignes - 1,
                        nbLignes: lNbLignes,
                        height: -1
                    });
                    lLigneDebut += lNbLignes;
                    lNbLignesRestantes = Math.max(0, lNbLignesRestantes - lNbLignes);
                }
            }
            _getLibelleDraggable(aParamsCellule) {
                let lLibelle = this.Donnees.getLibelleDraggable(aParamsCellule);
                if (!lLibelle) {
                    if (!this.estDonneeListeTableau(this.Donnees)) {
                        return '&nbsp;';
                    }
                    const lEstColonneAutorisee = (aParams) => {
                        const lType = this.Donnees.getTypeValeur(aParams);
                        return [ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche, ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.CocheDeploiement].indexOf(lType) < 0;
                    }
                    ;
                    let lColonne = 0;
                    if (this.estDonneeListeTableau(this.Donnees) && this.Donnees.selectionParCellule(aParamsCellule.colonne, aParamsCellule.article)) {
                        lColonne = aParamsCellule.colonne;
                    } else if (this.ListeCreations && this.ListeCreations.length > 0) {
                        lColonne = this.ListeCreations[0];
                    }
                    const lParams = this._getParamsCellule(lColonne, aParamsCellule.ligne, {
                        surSuppression: true
                    });
                    if (lEstColonneAutorisee(lParams)) {
                        lLibelle = this.Donnees._getValeur(lParams);
                    }
                    if (!lLibelle) {
                        this._cache.infosZonesColonnes.every( (aInfosZoneColonnes) => {
                            return aInfosZoneColonnes.colonnesVisibles.every( (aNumeroColonne) => {
                                const lParams = this._getParamsCellule(aNumeroColonne, aParamsCellule.ligne, {
                                    surSuppression: true
                                });
                                if (lEstColonneAutorisee(lParams)) {
                                    lLibelle = this.Donnees._getValeur(lParams);
                                }
                                return !lLibelle;
                            }
                            );
                        }
                        );
                    }
                }
                if (!lLibelle) {
                    lLibelle = '&nbsp;';
                }
                return lLibelle;
            }
            _eventKeyDownApplication(aEvent) {
                if (this._cache.rolloverVisible && !aEvent.ctrlKey) {
                    this._gererRollover(false);
                } else if (!this._cache.rolloverVisible && aEvent.ctrlKey && !this._cache.mouseOUTListe && this._avecRollover() && MethodesObjet_1.MethodesObjet.isNumber(ObjetNavigateur_1.Navigateur.pointerX) && MethodesObjet_1.MethodesObjet.isNumber(ObjetNavigateur_1.Navigateur.pointerY)) {
                    let lElement = document.elementFromPoint(ObjetNavigateur_1.Navigateur.pointerX, ObjetNavigateur_1.Navigateur.pointerY);
                    if (!lElement) {
                        return;
                    }
                    let lJElement = $(lElement);
                    let lInfos = null;
                    while (lJElement && lJElement.length > 0 && lJElement.parents('#' + this.ScrollV.getIdContenu(EGenreZoneScroll.contenu).escapeJQ()).length > 0) {
                        lElement = lJElement.get(0);
                        if (lElement && lElement.nodeName && lElement.nodeName.toLowerCase() === 'td') {
                            lInfos = this._extraireInfosId(lElement.id);
                            if (lInfos) {
                                break;
                            }
                        }
                        lJElement = lJElement.parent();
                    }
                    if (lInfos) {
                        this._gererRollover(true, lElement, lInfos);
                    }
                }
            }
            _getColonneDePositionEvent(aEvent, aNode, aInfosZonesColonnes) {
                return this._getColonneDePositionLeft(ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent).x, aNode, aInfosZonesColonnes);
            }
            _getColonneDePositionLeft(aPosleft, aNode, aInfosZonesColonnes) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aPosleft)) {
                    return -1;
                }
                let lNumeroColonne = -1;
                const lLeftBorne = Math.max(0, aPosleft - $(aNode).offset().left);
                aInfosZonesColonnes.gabaritColonnesTitre.every( (aPos, aIndex) => {
                    if (aPos && aPos.left >= 0) {
                        if (aPos.left <= lLeftBorne) {
                            lNumeroColonne = aIndex;
                            return aPos.left + aPos.width <= lLeftBorne;
                        }
                    }
                }
                );
                return lNumeroColonne;
            }
            _nodeTableTitrePourTri(aNode, aInfosZonesColonnes) {
                this._cache.survoleColTitreTriVisible = -1;
                const lHeightNode = ObjetPosition_1.GPosition.getHeight(aNode);
                $('#' + (this.ScrollH.getIdZone(aInfosZonesColonnes.idScrollTri) + '_conteneur').escapeJQ()).css('top', (lHeightNode - Math.round(this._options.heightTri) + 1) + 'px');
                const lIdSurvol = this.ids.survolTitre.escapeJQ() + aInfosZonesColonnes.indiceBloc;
                const lStrSelecTrisSurvol = `#${this.Nom.escapeJQ()} .flecheSurvol_${aInfosZonesColonnes.indiceBloc}`;
                $('#' + lIdSurvol).height(lHeightNode);
                $(aNode).on({
                    'click contextmenu': function(aEvent) {
                        aEvent.stopPropagation();
                    },
                    mousemove: function(aEvent) {
                        if (lThis._cache.survoleColTitreTriVisible >= 0) {
                            $('#' + lIdSurvol).hide();
                            $(lStrSelecTrisSurvol).addClass(Divers_css_1.StylesDivers.srOnly);
                        }
                        aEvent.stopPropagation();
                    }
                }, `.${_ObjetListe_1.ObjetListe.StyleElementInteractifTitreSansTri}`);
                const lThis = this;
                $(aNode).on({
                    click: function(aEvent) {
                        const lNumeroColonne = lThis._getColonneDePositionEvent(aEvent, this, aInfosZonesColonnes);
                        if (lNumeroColonne < 0 || !lThis._cache.colonnesTri[lNumeroColonne]) {
                            if (lNumeroColonne < 0) {
                                IE.log.addLog('_nodeTableTitrePourTri => colonne non trouve');
                            }
                            return;
                        }
                        let lGenreTri = Enumere_TriElement_1.EGenreTriElement.Croissant;
                        let lNumeroTri = lThis._triCourant.colonne.indexOf(lNumeroColonne);
                        if (lNumeroTri === -1) {
                            lNumeroTri = 0;
                        }
                        if (lThis._triCourant.colonne[lNumeroTri] === lNumeroColonne) {
                            lGenreTri = lThis._triCourant.genre[lNumeroTri] === Enumere_TriElement_1.EGenreTriElement.Croissant ? Enumere_TriElement_1.EGenreTriElement.Decroissant : Enumere_TriElement_1.EGenreTriElement.Croissant;
                        }
                        lThis.setColonneTri(lNumeroColonne, lGenreTri, lNumeroTri);
                    },
                    contextmenu: function(aEvent) {
                        const lNumeroColonne = lThis._getColonneDePositionEvent(aEvent, this, aInfosZonesColonnes);
                        if (lNumeroColonne < 0) {
                            IE.log.addLog('_nodeTableTitrePourTri => colonne non trouve');
                            return;
                        }
                        if (lThis._cache.colonnesTri[lNumeroColonne]) {
                            lThis.afficherMenuContextuelTri(lNumeroColonne, aEvent);
                        }
                    },
                    mouseleave: function() {
                        if (lThis._cache.survoleColTitreTriVisible >= 0) {
                            $('#' + lIdSurvol).hide();
                            $(lStrSelecTrisSurvol).addClass(Divers_css_1.StylesDivers.srOnly);
                        }
                        lThis._cache.survoleColTitreTriVisible = -1;
                    },
                    mousemove: function(aEvent) {
                        const lNumeroColonne = lThis._getColonneDePositionEvent(aEvent, this, aInfosZonesColonnes);
                        if (lNumeroColonne < 0 || !lThis._cache.colonnesTri[lNumeroColonne]) {
                            if (lThis._cache.survoleColTitreTriVisible < 0) {
                                $('#' + lIdSurvol).hide();
                                $(lStrSelecTrisSurvol).addClass(Divers_css_1.StylesDivers.srOnly);
                            }
                            return;
                        }
                        const lPosition = aInfosZonesColonnes.gabaritColonnesTitre[lNumeroColonne];
                        if (lPosition) {
                            const lAncienneColSurvol = lThis._cache.survoleColTitreTriVisible;
                            lThis._cache.survoleColTitreTriVisible = lNumeroColonne;
                            $('#' + lIdSurvol).show().css({
                                left: lPosition.left + 'px',
                                width: lPosition.width + 'px'
                            });
                            if (lAncienneColSurvol >= 0) {
                                $(`#${lThis.getIdBtnTri(aInfosZonesColonnes.indiceBloc, lAncienneColSurvol).escapeJQ()}.flecheSurvol_${aInfosZonesColonnes.indiceBloc}`).addClass(Divers_css_1.StylesDivers.srOnly);
                            }
                            const lJSelcCurseurTriSurvol = $(`#${lThis.getIdBtnTri(aInfosZonesColonnes.indiceBloc, lNumeroColonne).escapeJQ()}.flecheSurvol_${aInfosZonesColonnes.indiceBloc}`);
                            if (lJSelcCurseurTriSurvol.length > 0) {
                                if (lJSelcCurseurTriSurvol.data('dragEnCours')) {
                                    lJSelcCurseurTriSurvol.addClass(Divers_css_1.StylesDivers.srOnly);
                                } else {
                                    lJSelcCurseurTriSurvol.removeClass(Divers_css_1.StylesDivers.srOnly);
                                }
                            }
                        }
                    }
                });
            }
            _getLigneElementParParseur(aParseur, aColonne) {
                let lLigne = -1;
                let lValeur;
                this._cache.lignesVisibles.every( (aLigne) => {
                    const lParams = this._getParamsCellule(aColonne, aLigne);
                    lValeur = this.Donnees.getValeurPourParsing(lParams);
                    if (lValeur && lValeur.toString) {
                        lValeur = lValeur.toString();
                    }
                    lLigne = aLigne;
                    if (lValeur && ComparateurChaines_1.ComparateurChaines.compare(lValeur, aParseur) >= 0) {
                        return false;
                    }
                    return true;
                }
                );
                return lLigne;
            }
            gererParsingSurEventKey(event) {
                let lColonne = this._options.parsingSurColonne;
                if (lColonne === ObjetListeEspace.parsingSurColonneTri) {
                    if (this._triCourant.nombreTri > 0) {
                        lColonne = this._triCourant.colonne[0];
                    } else {
                        return;
                    }
                } else if (MethodesObjet_1.MethodesObjet.isString(lColonne)) {
                    lColonne = this.getNumeroColonneDIdColonne(lColonne);
                }
                if (lColonne === -1) {
                    return;
                }
                if (!this.Donnees) {
                    return;
                }
                const lCar = ComparateurChaines_1.ComparateurChaines.normalize(String.fromCharCode(event.which));
                if (!event.altKey && !event.ctrlKey && event.which !== 0 && lCar.search(/[a-z0-9 ]/gi) >= 0) {
                    uParseur += lCar;
                    clearTimeout(uTimerParseur);
                    uTimerParseur = setTimeout(this._initParseur, 500);
                    if (!this._estColonneVisible(lColonne)) {
                        return;
                    }
                    const lLigne = this._getLigneElementParParseur(uParseur, lColonne);
                    if (lLigne < 0) {
                        this._initParseur();
                        return;
                    }
                    if (this.Donnees.avecMultiSelection()) {
                        for (let iLigne = 0; iLigne < this._cache.lignesSelectionnees.length; iLigne++) {
                            if (this._etatSelectionCellule({
                                ligne: iLigne
                            })) {
                                this.selectionnerLigne({
                                    ligne: iLigne,
                                    selectionner: false
                                });
                            }
                        }
                    }
                    this._surSelection(lColonne, lLigne, {
                        forcerMonoSelection: true,
                        surInteractionUtilisateur: true
                    });
                    this.surSelectionEvenement(lColonne, lLigne, false);
                } else {
                    this._initParseur();
                }
            }
            _construireCopieCSV() {
                let i, lNumeroLigne, lNumeroColonne, lType, lContenuLigne, lTitresLigne, lLibelle, lContenuValeurs, lValeur;
                const lResult = [];
                let lParamsCellule;
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                const lEstColonneExportee = (aNumeroColonne) => {
                    return this._estColonneVisible(aNumeroColonne) && (!this._cache.declarationsColonnes[aNumeroColonne] || !this._cache.declarationsColonnes[aNumeroColonne].ignorerExportCSV);
                }
                ;
                const lGetValCSV = function(aValue) {
                    if (typeof aValue === 'number') {
                        return aValue;
                    }
                    return '"' + aValue + '"';
                };
                if (this.ListeTitres) {
                    for (lNumeroLigne = 0; lNumeroLigne < this.ListeTitres.length; lNumeroLigne++) {
                        lContenuLigne = [];
                        lTitresLigne = this.ListeTitres[lNumeroLigne];
                        for (lNumeroColonne = 0; lNumeroColonne < this.ListeTailles.length; lNumeroColonne++) {
                            if (lEstColonneExportee(lNumeroColonne)) {
                                lLibelle = '';
                                if (lTitresLigne && lTitresLigne[lNumeroColonne]) {
                                    lLibelle = lTitresLigne[lNumeroColonne].libelleCSV || lTitresLigne[lNumeroColonne].libelle || '';
                                }
                                lContenuLigne.push(lLibelle);
                            }
                        }
                        lResult.push(lContenuLigne.join(';'));
                    }
                }
                if (this.Donnees) {
                    for (i = 0; i < this._cache.lignesVisibles.length; i++) {
                        lNumeroLigne = this._cache.lignesVisibles[i];
                        lContenuLigne = [];
                        for (lNumeroColonne = 0; lNumeroColonne < this.ListeTailles.length; lNumeroColonne++) {
                            if (lEstColonneExportee(lNumeroColonne)) {
                                lParamsCellule = this._getParamsCellule(lNumeroColonne, lNumeroLigne, {
                                    surEdition: false,
                                    surProportion: false,
                                    surExportCSV: true
                                });
                                lType = this.Donnees.getTypeValeur(lParamsCellule);
                                lContenuValeurs = [];
                                switch (lType) {
                                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.CocheDeploiement:
                                    break;
                                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche:
                                    lValeur = this.Donnees._getValeur(lParamsCellule);
                                    if (lValeur === true || lValeur === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte) {
                                        lContenuValeurs.push('X');
                                    } else if (lValeur === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Grise) {
                                        lContenuValeurs.push('P');
                                    } else {
                                        lContenuValeurs.push('');
                                    }
                                    break;
                                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Note:
                                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Texte:
                                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.ZoneTexte:
                                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Image:
                                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Icon:
                                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Html:
                                    lValeur = this.Donnees.getValeurPourAffichage(lParamsCellule);
                                    lContenuValeurs.push(lGetValCSV(lValeur));
                                    break;
                                default:
                                    lContenuValeurs.push(this.Donnees._getValeur(lParamsCellule));
                                    break;
                                }
                                lContenuLigne.push(lContenuValeurs.join(' - '));
                            }
                        }
                        lResult.push(lContenuLigne.join(';'));
                    }
                }
                if (lDonneesTableau && this._avecLigneTotal()) {
                    this._getListeLignesTotal().parcourir( (aArticle, aIndexLigne) => {
                        lContenuLigne = [];
                        for (lNumeroColonne = 0; lNumeroColonne < this.ListeTailles.length; lNumeroColonne++) {
                            if (lEstColonneExportee(lNumeroColonne)) {
                                const lParams = this._getParamsCellule(lNumeroColonne, -1, {
                                    surTotal: true,
                                    surExportCSV: true
                                });
                                if (aArticle) {
                                    lParams.ligne = aIndexLigne;
                                    lParams.article = aArticle;
                                }
                                const lContenuTotal = lDonneesTableau.getContenuTotal(lParams);
                                lContenuLigne.push(lGetValCSV(lContenuTotal));
                            }
                        }
                        lResult.push(lContenuLigne.join(';'));
                    }
                    );
                }
                return ObjetChaine_1.GChaine.enleverEntites(lResult.join('\r\n').replace(/&nbsp;/gi, ''));
            }
            _colonneEnFusionAvecColonnePrecedente(aTitresLigne, aNumeroColonne) {
                var _a, _b;
                let lNumeroColVisiblePrec = aNumeroColonne - 1;
                while (lNumeroColVisiblePrec > 0 && !this._estColonneVisible(lNumeroColVisiblePrec)) {
                    lNumeroColVisiblePrec += -1;
                }
                if (!aTitresLigne || !aTitresLigne[aNumeroColonne] || !aTitresLigne[lNumeroColVisiblePrec]) {
                    return false;
                }
                if (aTitresLigne[aNumeroColonne].fusion === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche) {
                    return true;
                }
                if (aTitresLigne[aNumeroColonne].avecFusionColonne && (((aTitresLigne[aNumeroColonne].libelle || aTitresLigne[aNumeroColonne].libelle === '') && aTitresLigne[aNumeroColonne].libelle === aTitresLigne[lNumeroColVisiblePrec].libelle) || (aTitresLigne[aNumeroColonne].libelleHtml && aTitresLigne[aNumeroColonne].libelleHtml === aTitresLigne[lNumeroColVisiblePrec].libelleHtml) || (aTitresLigne[aNumeroColonne].getLibelleHtml && jsx_1.JSXDictionaryCallbacks.getStrCompare(aTitresLigne[aNumeroColonne].getLibelleHtml()) === jsx_1.JSXDictionaryCallbacks.getStrCompare((_b = (_a = aTitresLigne[lNumeroColVisiblePrec]).getLibelleHtml) === null || _b === void 0 ? void 0 : _b.call(_a))) || (aTitresLigne[aNumeroColonne].classeCssImage && aTitresLigne[aNumeroColonne].classeCssImage === aTitresLigne[lNumeroColVisiblePrec].classeCssImage))) {
                    return true;
                }
                return false;
            }
            _construireTaillesGrid(aInfosZoneColonnes) {
                const lDecalageBordureHDuContenu = this._options.borduresCellule_horizontal - 1;
                const lResult = {
                    width: 0,
                    tabWidth: [],
                    styleGrid: '',
                    gabaritColonne: []
                };
                const lTabStyleTemplate = [];
                aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne, aIndex) => {
                    let lWidthCol = this._cache.taillesColonne[aNumeroColonne].px + lDecalageBordureHDuContenu + 2 * this._options.paddingCelluleLR;
                    if (aIndex < aInfosZoneColonnes.colonnesVisibles.length - 1 || (aInfosZoneColonnes.estBlocFixe && !aInfosZoneColonnes.dernierBloc)) {
                        lWidthCol += 1;
                    }
                    if (aInfosZoneColonnes.estBlocFixeDroite && aNumeroColonne === aInfosZoneColonnes.indiceColonneDebut) {
                        lWidthCol += 1;
                    }
                    lResult.gabaritColonne[aNumeroColonne] = {
                        width: lWidthCol,
                        left: lResult.width + (aInfosZoneColonnes.estBlocFixeDroite ? 1 : 0)
                    };
                    lResult.tabWidth.push({
                        width: lWidthCol,
                        colonne: aNumeroColonne
                    });
                    lTabStyleTemplate.push(lWidthCol + 'px');
                    lResult.width += lWidthCol;
                }
                );
                lResult.styleGrid = lTabStyleTemplate.length > 0 ? 'grid-template-columns:' + lTabStyleTemplate.join(' ') + ';' : '';
                return lResult;
            }
            _construireTri(aInfosZoneColonnes, aNumeroColonne, aIndiceTri) {
                const lTriInactif = aIndiceTri < 0;
                const lTriCroissant = lTriInactif ? true : this._triCourant.genre[aIndiceTri] === Enumere_TriElement_1.EGenreTriElement.Croissant;
                const lAvecDragTri = this._cache.infosZonesColonnes.length < 2;
                return (IE.jsx.str("div", {
                    id: this.getIdBtnTri(aInfosZoneColonnes.indiceBloc, aNumeroColonne),
                    tabindex: "0",
                    "ie-nodeafter": this.jsxGetNodeAfterCurseurTri.bind(this, aNumeroColonne, aIndiceTri, aInfosZoneColonnes.indiceBloc),
                    "ie-draggable": lAvecDragTri && !lTriInactif ? this.jsxDragCurseurTriDraggable.bind(this, aNumeroColonne, aIndiceTri, aInfosZoneColonnes.indiceBloc) : false,
                    class: ['flecheTri', lTriInactif ? `sr-only flecheSurvol_${aInfosZoneColonnes.indiceBloc}` : 'flecheTriNonSurvol AvecMain'],
                    style: {
                        height: this._options.heightTri
                    },
                    role: "button",
                    "aria-pressed": lTriInactif || lTriCroissant ? false : 'true',
                    "aria-haspopup": !lTriInactif && this._triCourant.nombreTri > 1 ? 'true' : false,
                    "ie-tooltiplabel": lTriInactif ? ObjetTraduction_1.GTraductions.getValeur('liste.wai.TrierColonne') : ObjetTraduction_1.GTraductions.getValeur('liste.wai.WAI_Tri_D', aIndiceTri + 1)
                }, this._getDessinCurseurTri({
                    triCroissant: lTriCroissant,
                    tri: lTriInactif ? _ObjetListe_1.NSListe.FlecheTri.survol : aIndiceTri === 0 ? _ObjetListe_1.NSListe.FlecheTri.principal : _ObjetListe_1.NSListe.FlecheTri.secondaire
                })));
            }
            _construireTitre(aInfosZoneColonnes, aAvecTri) {
                const T = [];
                let I;
                const lAvecTri = this.avecTriColonne();
                let iLigne, lTitresLigne, lNumeroDerniereColonneVisible;
                const lTaillesGrid = this._construireTaillesGrid(aInfosZoneColonnes);
                aInfosZoneColonnes.gabaritColonnesTitre = lTaillesGrid.gabaritColonne;
                this._cache.heightLigneTitre = null;
                const lAvecLigneCreation = this._avecLigneCreationTitreEnLigne();
                if (!this.ListeTitres && !lAvecLigneCreation) {
                    return '';
                }
                const lCssTitreZone = ['liste-titre-zone'];
                if (!this.ListeTitres && !lAvecLigneCreation) {
                    lCssTitreZone.push('hide');
                }
                if (this._cache.avecScrollHorizontal) {
                    lCssTitreZone.push('scroll-h');
                }
                if (aInfosZoneColonnes.dernierBloc) {
                    lCssTitreZone.push('b-right');
                }
                if (aInfosZoneColonnes.indiceBloc === 0) {
                    lCssTitreZone.push('b-left');
                }
                const lGetIdTitre = (aLigne, aCol) => {
                    return `${this.Nom}_titrecell_${aLigne}_${aCol}`;
                }
                ;
                let iColonne;
                const lColonnesGabaritCalculFusion = {};
                if (this.ListeTitres) {
                    for (iLigne = 0; iLigne < this.ListeTitres.length; iLigne++) {
                        lTitresLigne = this.ListeTitres[iLigne];
                        const lMaxIndiceCol = Math.min(lTitresLigne.length, aInfosZoneColonnes.indiceColonneFin + 1);
                        lNumeroDerniereColonneVisible = -1;
                        if (aInfosZoneColonnes.dernierBloc || (!aInfosZoneColonnes.dernierBloc && !aInfosZoneColonnes.estBlocFixe)) {
                            for (I = aInfosZoneColonnes.indiceColonneDebut; lTitresLigne && (I < lMaxIndiceCol); I++) {
                                if (!this._colonneEnFusionAvecColonnePrecedente(lTitresLigne, I) && (this._estColonneVisible(I) || this._colonneEnFusionAvecColonnePrecedente(lTitresLigne, I + 1))) {
                                    lNumeroDerniereColonneVisible = I;
                                }
                            }
                        }
                        let lIndiceBasCol = -1;
                        for (let I = aInfosZoneColonnes.indiceColonneDebut; lTitresLigne && (I < lMaxIndiceCol); I++) {
                            const lDescripteurTitre = lTitresLigne[I];
                            const lEstColonneVisible = this._estColonneVisible(I);
                            if (lEstColonneVisible) {
                                lIndiceBasCol += 1;
                            }
                            ;if (((!lDescripteurTitre.fusion && !this._colonneEnFusionAvecColonnePrecedente(lTitresLigne, I)) || (I === aInfosZoneColonnes.indiceColonneDebut && lDescripteurTitre.fusion === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche)) && (lEstColonneVisible || this._colonneEnFusionAvecColonnePrecedente(lTitresLigne, I + 1))) {
                                let lNbCol = lEstColonneVisible ? 1 : 0;
                                let lNbLigne = 1;
                                for (let j = iLigne + 1; j < this.ListeTitres.length; j++) {
                                    if (this.ListeTitres[j][I].fusion !== TypeFusionTitreListe_1.TypeFusionTitreListe.FusionHaute) {
                                        break;
                                    } else {
                                        lNbLigne++;
                                    }
                                }
                                const lId = lGetIdTitre(iLigne, I);
                                for (let iColonne = I + 1; iColonne < lMaxIndiceCol; iColonne++) {
                                    const lEstColonneEnFusionPrec = this._colonneEnFusionAvecColonnePrecedente(lTitresLigne, iColonne);
                                    const lEstColVisibleBoucle = this._estColonneVisible(iColonne);
                                    if (lEstColonneEnFusionPrec) {
                                        if (lEstColVisibleBoucle) {
                                            lNbCol++;
                                        }
                                    } else {
                                        break;
                                    }
                                }
                                if (lNbCol === 0) {
                                    continue;
                                }
                                const lChaineTitre = lDescripteurTitre.libelle;
                                const lClassImage = lDescripteurTitre.classeCssImage;
                                const lAvecChaineHtml = !!(lDescripteurTitre.getLibelleHtml || lDescripteurTitre.libelleHtml);
                                let lNbLignesTexte = 0;
                                if (lChaineTitre && !lClassImage && !lAvecChaineHtml) {
                                    lNbLignesTexte = lDescripteurTitre.nbLignes === 0 ? 0 : lDescripteurTitre.nbLignes > 0 && MethodesObjet_1.MethodesObjet.isNumber(lDescripteurTitre.nbLignes) ? lDescripteurTitre.nbLignes : 1;
                                }
                                const lCouleurFond = lDescripteurTitre.getCouleurFond ? lDescripteurTitre.getCouleurFond(this._options) : null;
                                const lCouleurTexte = lDescripteurTitre.getCouleurTexte ? lDescripteurTitre.getCouleurTexte(this._options) : null;
                                const lCss = ['Titre liste_gridTitre_cel'];
                                if (iLigne > 0) {
                                    lCss.push('b-top');
                                }
                                if (I !== lNumeroDerniereColonneVisible) {
                                    lCss.push('b-right');
                                }
                                if (aInfosZoneColonnes.estBlocFixeDroite && I === aInfosZoneColonnes.indiceColonneDebut) {
                                    lCss.push('b-left');
                                }
                                const lIndiceGridCol = lIndiceBasCol + 1;
                                let lGridColumn = lIndiceGridCol + '';
                                if (lNbCol > 1) {
                                    lGridColumn += ' / ' + (lIndiceGridCol + lNbCol);
                                }
                                let lGridRow = iLigne + 1;
                                let lGridRowStr = (iLigne + 1) + '';
                                if (lNbLigne > 1) {
                                    lGridRowStr += ' / ' + (lGridRow + lNbLigne);
                                }
                                const lIndicColVisible = this.getIndiceColonneVisibleDeColonne(I);
                                if (!this._cache.structureWAI.titres[iLigne]) {
                                    this._cache.structureWAI.titres[iLigne] = {
                                        ids: [],
                                        estLigneAIgnorer: true
                                    };
                                }
                                this._cache.structureWAI.titres[iLigne].ids[lIndicColVisible] = lId;
                                this._cache.structureWAI.titres[iLigne].estLigneAIgnorer = false;
                                const lHtmlSpan = [];
                                for (let lILigneSpan = 0; lILigneSpan < lNbLigne; lILigneSpan++) {
                                    for (let lIColonneSpan = 0; lIColonneSpan < lNbCol; lIColonneSpan++) {
                                        if (lILigneSpan > 0 || lIColonneSpan > 0) {
                                            const lNumLigne = iLigne + lILigneSpan;
                                            const lIndiceColVisibleSpan = lIndicColVisible + lIColonneSpan;
                                            const lIdColBidon = lGetIdTitre(iLigne + lILigneSpan, lIndiceColVisibleSpan) + '_wai';
                                            if (!this._cache.structureWAI.titres[lNumLigne]) {
                                                this._cache.structureWAI.titres[lNumLigne] = {
                                                    ids: [],
                                                    estLigneAIgnorer: true
                                                };
                                            }
                                            ;this._cache.structureWAI.titres[lNumLigne].ids[lIndiceColVisibleSpan] = lIdColBidon;
                                            lHtmlSpan.push(IE.jsx.str("div", {
                                                role: "columnheader",
                                                id: lIdColBidon,
                                                "aria-labelledby": lILigneSpan > 0 ? false : lId
                                            }));
                                        }
                                    }
                                }
                                const lGetClassTriGridTitre = function(aCol) {
                                    return this._triCourant.colonne.includes(I) ? 'liste_gridTitre_cel-tri' : '';
                                }
                                .bind(this, I);
                                let lAriaLabelTitre = '';
                                if (lDescripteurTitre.title) {
                                    lAriaLabelTitre = lDescripteurTitre.title;
                                }
                                let lEstTooltipDyn = false;
                                let lFuncTooltipLabel = null;
                                if (lDescripteurTitre.titleHtml) {
                                    if (MethodesObjet_1.MethodesObjet.isFunction(lDescripteurTitre.titleHtml)) {
                                        lFuncTooltipLabel = lDescripteurTitre.titleHtml;
                                        lEstTooltipDyn = true;
                                    } else if (MethodesObjet_1.MethodesObjet.isString(lDescripteurTitre.titleHtml)) {
                                        lFuncTooltipLabel = () => lDescripteurTitre.titleHtml;
                                    }
                                }
                                const lAttrTitre = lAvecTri ? () => {
                                    let lAriaSort = null;
                                    if (aAvecTri && this._cache.colonnesTri[I]) {
                                        const lNumeroTri = this._triCourant.colonne.indexOf(I);
                                        if (lNumeroTri >= 0) {
                                            const lTriCroissant = this._triCourant.genre[lNumeroTri] === Enumere_TriElement_1.EGenreTriElement.Croissant;
                                            lAriaSort = lTriCroissant ? 'ascending' : 'descending';
                                        } else {
                                            lAriaSort = 'none';
                                        }
                                    }
                                    return {
                                        'aria-sort': lAriaSort
                                    };
                                }
                                : false;
                                const lIdTooltip = lAriaLabelTitre || lFuncTooltipLabel ? `${lId}_tooltip_t` : '';
                                let lHtmlTooltip = '';
                                if (lIdTooltip) {
                                    const lAttrs = {
                                        id: lIdTooltip,
                                        'aria-hidden': 'true',
                                        class: Divers_css_1.StylesDivers.srOnly
                                    };
                                    if (!lEstTooltipDyn && (lAriaLabelTitre || lFuncTooltipLabel)) {
                                        lHtmlTooltip = IE.jsx.str("div", Object.assign({}, lAttrs), lAriaLabelTitre || lFuncTooltipLabel());
                                    } else if (lEstTooltipDyn && lFuncTooltipLabel) {
                                        lHtmlTooltip = IE.jsx.str("div", Object.assign({}, lAttrs, {
                                            class: Divers_css_1.StylesDivers.srOnly,
                                            "ie-html": lFuncTooltipLabel
                                        }));
                                    }
                                }
                                T.push(IE.jsx.str("div", {
                                    id: lId,
                                    "ie-attr": lAttrTitre,
                                    role: "columnheader",
                                    "aria-colspan": lNbCol > 1 ? lNbCol : false,
                                    "aria-rowspan": lNbLigne > 1 ? lNbLigne : false,
                                    class: lCss,
                                    "ie-class": aAvecTri ? lGetClassTriGridTitre : false,
                                    style: this._composePaddingCellule() + 'grid-column:' + lGridColumn + ';' + 'grid-row:' + lGridRowStr + ';' + 'min-height:' + (this._options.hauteurCelluleTitreStandard) + 'px;' + (lCouleurFond ? ObjetStyle_1.GStyle.composeCouleurFond(lCouleurFond) : '') + (lCouleurTexte ? ObjetStyle_1.GStyle.composeCouleurTexte(lCouleurTexte) : ''),
                                    "data-tooltip": lIdTooltip ? Tooltip_1.Tooltip.Type.default : false,
                                    "data-tooltip-id": lIdTooltip || false,
                                    "aria-labelledby": lIdTooltip || false
                                }, () => {
                                    var _a;
                                    const lAvecTitleExistant = !!(lDescripteurTitre.title || lDescripteurTitre.titleHtml);
                                    const lChaineHtml = ((_a = lDescripteurTitre.getLibelleHtml) === null || _a === void 0 ? void 0 : _a.call(lDescripteurTitre)) || lDescripteurTitre.libelleHtml;
                                    let lEstContenuEllipsisCss = lNbLignesTexte > 1;
                                    let lContenuTitre = (lChaineHtml ? lChaineHtml : '');
                                    if (lClassImage) {
                                        lContenuTitre += IE.jsx.str("div", {
                                            class: lClassImage,
                                            style: (lDescripteurTitre.largeurClasseCssImage ? 'width:' + lDescripteurTitre.largeurClasseCssImage + 'px;' : '') + 'margin-left:auto;margin-right:auto;'
                                        }, "\u00A0");
                                    } else {
                                        if (!lChaineHtml) {
                                            if (lDescripteurTitre.estCoche) {
                                                lContenuTitre += IE.jsx.str("ie-checkbox", {
                                                    "ie-model": this.jsxGetModelCocheTitreClassique.bind(this, this, I),
                                                    "ie-attr": this.jsxGetAttrCocheTitreClassique.bind(this, I)
                                                });
                                            } else {
                                                if (lEstContenuEllipsisCss) {
                                                    lContenuTitre += IE.jsx.str("span", {
                                                        class: [Divers_css_1.StylesDivers.ellipsisMultilignes, Divers_css_1.StylesDivers.ellipsisSansHyphens, lAvecTitleExistant ? IEHtmlComposants_1.StylesIEHtmlComposants.ellipsisCancelTitle : ''],
                                                        style: {
                                                            '--clamp-number': lNbLignesTexte !== 2 ? lNbLignesTexte : undefined
                                                        }
                                                    }, lChaineTitre);
                                                } else {
                                                    lContenuTitre += IE.jsx.str("span", null, lChaineTitre);
                                                }
                                            }
                                        }
                                    }
                                    ;return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                                        style: ((lAvecChaineHtml && lDescripteurTitre.ignorerOverflowHidden) || lDescripteurTitre.estCoche) ? false : 'overflow:hidden;',
                                        role: "presentation",
                                        "ie-ellipsis": lNbLignesTexte === 1,
                                        "data-tooltip-disabled": !!lAriaLabelTitre && lNbLignesTexte === 1 ? 'true' : false
                                    }, lContenuTitre, lAriaLabelTitre ? IE.jsx.str("p", {
                                        class: "sr-only"
                                    }, "\u00A0", lAriaLabelTitre) : ''), lHtmlTooltip, lHtmlSpan.length > 0 ? IE.jsx.str("div", {
                                        "aria-hidden": "true",
                                        role: "presentation",
                                        class: Divers_css_1.StylesDivers.srOnly
                                    }, lHtmlSpan.join('')) : '');
                                }
                                ));
                                if (!lColonnesGabaritCalculFusion[I] && lNbCol > 1 && iLigne === this.ListeTitres.length - 1 && aInfosZoneColonnes.gabaritColonnesTitre[I]) {
                                    const lLeft = aInfosZoneColonnes.gabaritColonnesTitre[I].left;
                                    let lWidth = 0;
                                    for (let iColonne = I; iColonne < I + lNbCol; iColonne++) {
                                        lColonnesGabaritCalculFusion[iColonne] = true;
                                        if (aInfosZoneColonnes.gabaritColonnesTitre[iColonne]) {
                                            lWidth += aInfosZoneColonnes.gabaritColonnesTitre[iColonne].width;
                                        }
                                    }
                                    for (iColonne = I; iColonne < I + lNbCol; iColonne++) {
                                        if (aInfosZoneColonnes.gabaritColonnesTitre[iColonne]) {
                                            aInfosZoneColonnes.gabaritColonnesTitre[iColonne] = {
                                                width: lWidth,
                                                left: lLeft
                                            };
                                        }
                                    }
                                }
                            }
                        }
                    }
                    if (this._cache.infosZonesColonnes.length > 1) {
                        for (iLigne = 0; iLigne < this.ListeTitres.length; iLigne++) {
                            T.push(IE.jsx.str("div", {
                                class: "liste_titreGabLigne",
                                style: 'grid-column:1; grid-row:' + (iLigne + 1)
                            }));
                        }
                    }
                }
                const lPaddingLeft = aInfosZoneColonnes.indiceBloc === 0 ? this._options.borduresContenu_left - 1 : 0
                  , lPaddingRight = aInfosZoneColonnes.dernierBloc ? this._options.borduresContenu_right - 1 : 0;
                return (IE.jsx.str("div", {
                    id: this.ids.titre + aInfosZoneColonnes.indiceBloc,
                    style: 'position:relative; ' + (lPaddingLeft > 0 ? 'padding-left:' + lPaddingLeft + 'px;' : '') + (lPaddingRight > 0 ? 'padding-right:' + lPaddingRight + 'px;' : ''),
                    role: "presentation"
                }, IE.jsx.str("div", {
                    id: this.ScrollH.getIdZone(aInfosZoneColonnes.idScrollTitre),
                    class: lCssTitreZone.join(' '),
                    role: "presentation"
                }, IE.jsx.str("div", {
                    class: "liste-titre-contenu",
                    id: this.ScrollH.getIdContenu(aInfosZoneColonnes.idScrollTitre),
                    role: "presentation"
                }, IE.jsx.str("div", {
                    class: "liste_gridTitre",
                    role: "presentation",
                    "ie-node": this._cache.infosZonesColonnes.length > 1 ? this.jsxGetNodeTableTitre.bind(this, aInfosZoneColonnes.indiceBloc) : false,
                    "ie-nodeafter": this.jsxGetNodeAfterTableTitre.bind(this, aInfosZoneColonnes.indiceBloc),
                    style: lTaillesGrid.styleGrid + (lTaillesGrid.width > 0 ? ObjetStyle_1.GStyle.composeWidth(lTaillesGrid.width) : ''),
                    "data-tooltip-align": Tooltip_1.Tooltip.Align.top
                }, T.join('')), lAvecLigneCreation ? this.composeCreation(-1, lTaillesGrid, !!this.ListeTitres) : '', this._avecRollover() ? IE.jsx.str("div", {
                    id: this.ids.rolloverTitre + aInfosZoneColonnes.indiceBloc,
                    class: "liste_conteneur_rollover titre"
                }, IE.jsx.str("div", null)) : '', aAvecTri && ObjetSupport_1.Support.supportPointerEventsNone ? IE.jsx.str("div", {
                    id: this.ids.survolTitre + aInfosZoneColonnes.indiceBloc,
                    class: "voileBleuTitre"
                }) : '')), () => {
                    if (aAvecTri) {
                        return (IE.jsx.str("div", {
                            id: this.ScrollH.getIdZone(aInfosZoneColonnes.idScrollTri) + '_conteneur',
                            class: "conteneurTri_scroll",
                            role: "presentation"
                        }, IE.jsx.str("div", {
                            id: this.ScrollH.getIdZone(aInfosZoneColonnes.idScrollTri),
                            role: "presentation"
                        }, IE.jsx.str("div", {
                            id: this.ScrollH.getIdContenu(aInfosZoneColonnes.idScrollTri),
                            class: "tri_scroll_contenu",
                            role: "presentation",
                            style: `height:${this._options.heightTri}px;${lTaillesGrid.width > 0 ? ObjetStyle_1.GStyle.composeWidth(lTaillesGrid.width) : ''}`
                        }, IE.jsx.str("div", {
                            id: this.ids.curseurTri + aInfosZoneColonnes.indiceBloc + '_row',
                            role: "presentation"
                        }, " ", (aTabTri) => {
                            aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                                if (this._cache.colonnesTri[aNumeroColonne]) {
                                    const lNumeroTri = this._triCourant.colonne.indexOf(aNumeroColonne);
                                    aTabTri.push(this._construireTri(aInfosZoneColonnes, aNumeroColonne, lNumeroTri));
                                }
                            }
                            );
                        }
                        )))));
                    }
                    return '';
                }
                ));
            }
            _getJeuxCouleurNonSelection(aParamsCellule) {
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                let lCouleurs = null;
                if (this._options.alternanceCouleurLigneContenu && this._options.avecCouleurAlternanceParDefaut) {
                    lCouleurs = this._cache.couleursAlternanceParLigne[aParamsCellule.ligne] === true ? this._options.couleurAlternance0 : this._options.couleurAlternance1;
                } else if (this.Donnees.avecEdition(aParamsCellule) && !this._getNonEditable()) {
                    lCouleurs = this._options.alternanceCouleurLigneContenu ? this._cache.couleursAlternanceParLigne[aParamsCellule.ligne] === true ? this._options.couleursListe.editableAlternee1 : this._options.couleursListe.editableAlternee2 : this._options.couleursListe.editable;
                } else {
                    lCouleurs = this._options.alternanceCouleurLigneContenu ? this._cache.couleursAlternanceParLigne[aParamsCellule.ligne] === true ? this._options.couleursListe.nonEditableAlternee1 : this._options.couleursListe.nonEditableAlternee2 : this._options.couleursListe.nonEditable;
                }
                const LCouleurCellule = lDonneesTableau ? lDonneesTableau.getCouleurCellule(aParamsCellule, new _ObjetCouleur_1.ObjectCouleurCellule(lCouleurs.fond,lCouleurs.texte,lCouleurs.bordure)) : null;
                if (LCouleurCellule !== null && LCouleurCellule !== undefined && lDonneesTableau) {
                    switch (LCouleurCellule) {
                    case ObjetDonneesListe_1.ObjetDonneesListe.ECouleurCellule.Blanc:
                        return this._options.couleursListe.editable;
                    case ObjetDonneesListe_1.ObjetDonneesListe.ECouleurCellule.Gris:
                        return this._options.couleursListe.nonEditable;
                    case ObjetDonneesListe_1.ObjetDonneesListe.ECouleurCellule.Deploiement:
                        return this._options.couleursListe.cumul[lDonneesTableau.getNiveauDeploiement(aParamsCellule)];
                    case ObjetDonneesListe_1.ObjetDonneesListe.ECouleurCellule.Fixe:
                        return this._options.couleursListe.colonneFixe;
                    case ObjetDonneesListe_1.ObjetDonneesListe.ECouleurCellule.Total:
                        return this._options.couleursListe.total;
                    default:
                        return LCouleurCellule;
                    }
                } else {
                    return lCouleurs;
                }
            }
            _getJeuxCouleur(aParamsCellule, aEstSelectionne) {
                const lJeuxCouleur = this._getJeuxCouleurNonSelection(aParamsCellule);
                if (aEstSelectionne) {
                    return new _ObjetCouleur_1.ObjectCouleurCellule('','',lJeuxCouleur.bordure);
                }
                return lJeuxCouleur;
            }
            _composePaddingCellule() {
                return ObjetChaine_1.GChaine.format('padding: %spx %spx;', [this._options.paddingCelluleTB, this._options.paddingCelluleLR]);
            }
            _getFusionColonnesCelluleDeZone(aLigne, aInfosZoneColonnes) {
                return this._getFusionColonnesCellule({
                    colonnesVisibles: aInfosZoneColonnes.colonnesVisibles,
                    ligne: aLigne,
                    indiceColonneDebut: aInfosZoneColonnes.indiceColonneDebut,
                    indiceColonneFin: aInfosZoneColonnes.indiceColonneFin,
                    dernierBloc: aInfosZoneColonnes.dernierBloc || (!aInfosZoneColonnes.dernierBloc && !aInfosZoneColonnes.estBlocFixe)
                });
            }
            _fusionCelluleAvecLignePrecedente(aParamsCellule, aFusionColonnes, aInfosZoneColonnes) {
                if (this.estDonneeListeFlatDesign(this.Donnees)) {
                    return false;
                }
                const lAvecFusionLigne = this.Donnees.fusionCelluleAvecLignePrecedente(aParamsCellule);
                if (lAvecFusionLigne && aParamsCellule.celluleLignePrecedente) {
                    const lFusionsLignePrec = this._getFusionColonnesCelluleDeZone(aParamsCellule.celluleLignePrecedente.ligne, aInfosZoneColonnes);
                    if (!lFusionsLignePrec) {
                        return true;
                    }
                    if (!aFusionColonnes[aParamsCellule.colonne] && !lFusionsLignePrec[aParamsCellule.colonne]) {
                        return true;
                    }
                    if (aFusionColonnes[aParamsCellule.colonne] && lFusionsLignePrec[aParamsCellule.colonne] && aFusionColonnes[aParamsCellule.colonne].debut === lFusionsLignePrec[aParamsCellule.colonne].debut && aFusionColonnes[aParamsCellule.colonne].fin === lFusionsLignePrec[aParamsCellule.colonne].fin) {
                        return true;
                    }
                    ;return false;
                }
                return lAvecFusionLigne;
            }
            _chercherLignesFusionVertical(aParamsCellule, aIndiceLigne, aRangeLignes, aFusionColonnes, aInfosZoneColonnes) {
                let lNombreLignesEnFusion = 1;
                let lLigneSuivante;
                let lLignePrecedente;
                let lIndiceFusionLigne;
                if (aIndiceLigne > aRangeLignes.debut && this._fusionCelluleAvecLignePrecedente(aParamsCellule, aFusionColonnes, aInfosZoneColonnes)) {
                    if (aParamsCellule.celluleLignePrecedente && this._estLigneVisible(aParamsCellule.celluleLignePrecedente.ligne)) {
                        return 0;
                    }
                    return 1;
                }
                for (lIndiceFusionLigne = aIndiceLigne + 1; lIndiceFusionLigne < aRangeLignes.fin; lIndiceFusionLigne++) {
                    lLigneSuivante = this._cache.lignesVisibles[lIndiceFusionLigne];
                    lLignePrecedente = this._cache.lignesVisibles[lIndiceFusionLigne - 1];
                    if (this._estLigneVisible(lLignePrecedente) && this._fusionCelluleAvecLignePrecedente(this._getParamsCellule(aParamsCellule.colonne, lLigneSuivante, {
                        celluleLignePrecedente: this._getParamsCellule(aParamsCellule.colonne, lLignePrecedente)
                    }), this._getFusionColonnesCelluleDeZone(lLigneSuivante, aInfosZoneColonnes), aInfosZoneColonnes)) {
                        this._cache.lignesFusionParColonne[aParamsCellule.colonne + '_' + lLigneSuivante] = {
                            ligneOrigine: aParamsCellule.ligne
                        };
                        const lCle = aParamsCellule.colonne + '_' + aParamsCellule.ligne;
                        if (!this._cache.lignesFusionParColonne[lCle]) {
                            this._cache.lignesFusionParColonne[lCle] = {
                                ligneOrigine: aParamsCellule.ligne,
                                lignesCumuls: {}
                            };
                        }
                        this._cache.lignesFusionParColonne[lCle].lignesCumuls[lLigneSuivante] = true;
                        lNombreLignesEnFusion += 1;
                    } else {
                        return lNombreLignesEnFusion;
                    }
                }
                return lNombreLignesEnFusion;
            }
            _hauteurAdapteAuContenu() {
                return !!this._options.hauteurAdapteContenu && (this._cache.lignesVisibles.length > 0 || !!this._options.messageContenuVide);
            }
            _construireCopySVG() {
                return (IE.jsx.str("div", {
                    class: ObjetListe_css_1.StylesObjetListe.copySVG,
                    "aria-hidden": "true"
                }, IE.jsx.str("svg", {
                    xmlns: "http://www.w3.org/2000/svg",
                    width: "100%",
                    height: "100%"
                }, IE.jsx.str("rect", {
                    x: "0",
                    y: "0",
                    width: "100%",
                    height: "100%"
                }))));
            }
            _construireCellule(aParamsCellule, aParams) {
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                const lInfosContenu = this._composeContenuCellule(aParamsCellule, aParams.taille - aParams.indentation);
                const lEstAlignVCenter = lDonneesTableau && lDonneesTableau.alignVCenter(aParamsCellule);
                const lRoleGrid = this._estRoleTreeGrid();
                const lAvecSelecFile = !this._getNonEditable() && this.Donnees.avecSelecFile(aParamsCellule);
                const lAttrs = {
                    id: aParams.id,
                    class: ['liste_contenu_cellule', lEstAlignVCenter ? ' liste_cellule_alignVCenter' : '', 'liste-cellule-focusable'],
                    style: aParams.indentation > 0 ? `padding-left:${aParams.indentation}px;` : false
                };
                let lStrTooltip = '';
                let lIdWAITooltip = '';
                if (!this.Donnees.enConstruction_cacheRechercheTexte) {
                    Object.assign(lAttrs, {
                        'ie-model': lAvecSelecFile ? this.jsxModeleSelecFile.bind(this, this, aParamsCellule) : false,
                        'ie-selecfile': lAvecSelecFile,
                        'ie-attr': this.jsxAttrCellule.bind(this, aParamsCellule, lRoleGrid)
                    });
                    Object.assign(lAttrs, this.getAttrsWAICellule(aParamsCellule, aParams));
                    if (lInfosContenu.tooltip) {
                        lStrTooltip = lInfosContenu.tooltip;
                        lIdWAITooltip = `${this.Nom}_${aParamsCellule.ligne}_${aParamsCellule.colonne}_tooltip_cell`;
                        const lAttrWAi = lInfosContenu.labelledby ? 'aria-labelledby' : 'aria-describedby';
                        Object.assign(lAttrs, {
                            'data-tooltip': Tooltip_1.Tooltip.Type.default,
                            'data-tooltip-id': lIdWAITooltip,
                            [lAttrWAi]: lAttrs[lAttrWAi] ? lIdWAITooltip + ' ' + lAttrs[lAttrWAi] : lIdWAITooltip
                        });
                    }
                    if (lInfosContenu.idsLabel) {
                        let lIds = lInfosContenu.idsLabel;
                        if (lAttrs['aria-labelledby']) {
                            lIds = lAttrs['aria-labelledby'] + ' ' + lIds;
                        }
                        lAttrs['aria-labelledby'] = lIds || false;
                    }
                }
                return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", Object.assign({}, lAttrs, {
                    "ie-nodeafter": !this.Donnees.enConstruction_cacheRechercheTexte ? this.jsxNodeAfterCellule.bind(this) : ''
                }), lInfosContenu.html), this.Donnees.estCelluleCopie(aParamsCellule) ? this._construireCopySVG() : '', aParams.htmlCellulesSpan ? IE.jsx.str("div", {
                    "aria-hidden": "true",
                    role: "presentation",
                    class: Divers_css_1.StylesDivers.srOnly
                }, aParams.htmlCellulesSpan) : '', lStrTooltip ? IE.jsx.str("div", {
                    "aria-hidden": "true",
                    role: "presentation",
                    id: lIdWAITooltip,
                    class: [Divers_css_1.StylesDivers.srOnly]
                }, lStrTooltip.replaceRCToHTML()) : '');
            }
            construireContenuListeInterne(aInfosZoneColonnes) {
                const lCacheRef = this._cache.refresh;
                this._cache.couleursAlternanceParLigne = [];
                this._cache.positionsCelluleCadreSelection = {};
                const lStyleGabarit = {
                    'grid-column': `1/${aInfosZoneColonnes.colonnesVisibles.length + 1}`
                };
                const lTaillesGrid = this._construireTaillesGrid(aInfosZoneColonnes);
                const lPremierBloc = aInfosZoneColonnes.indiceBloc === 0;
                const lEstTreeGrid = this._estRoleTreeGrid();
                return (IE.jsx.str(IE.jsx.fragment, null, this._construireTotalFD(true, true), IE.jsx.str("div", {
                    id: this.getIdGridFocus(aInfosZoneColonnes.indiceBloc),
                    class: ['SansMain', ObjetListe_css_1.StylesObjetListe.liste_fixed, _ObjetListe_1.ObjetListe.SelecteurCss.focusGrid],
                    style: lTaillesGrid.styleGrid + (lTaillesGrid.width > 0 ? ObjetStyle_1.GStyle.composeWidth(lTaillesGrid.width) : ''),
                    role: lEstTreeGrid ? false : 'tree',
                    "ie-attr": lEstTreeGrid ? false : () => {
                        return {
                            'aria-label': this.getAriaLabelListe()
                        };
                    }
                    ,
                    tabindex: lPremierBloc ? '0' : '-1',
                    "ie-node": this.jsxGetNodePremierElement.bind(this, this)
                }, (T) => {
                    if (lCacheRef.avecConstructionDynamiqueContenu) {
                        T.push(IE.jsx.str("div", {
                            "ie-node": this.jsxNodeGabaritRefresh.bind(this, true, aInfosZoneColonnes.indiceBloc),
                            class: "gabarit-refresh",
                            style: lStyleGabarit,
                            role: "presentation"
                        }));
                    }
                    T.push(this.construireContenuListeInterneLignes(aInfosZoneColonnes, 0));
                    if (lCacheRef.avecConstructionDynamiqueContenu) {
                        T.push(IE.jsx.str("div", {
                            "ie-node": this.jsxNodeGabaritRefresh.bind(this, false, aInfosZoneColonnes.indiceBloc),
                            class: "gabarit-refresh",
                            style: lStyleGabarit,
                            role: "presentation"
                        }));
                    }
                }
                ), this._construireTotalFD(false, true)));
            }
            construireContenuListeInterneLignes(aInfosZoneColonnes, aIndiceRange) {
                const T = [];
                let lJeuxCouleurs, lDerniereLigne, lStyleBordures, lCouleurBorduresCellules, lNumeroPremiereColonneFusion, lNumeroDerniereColonneFusion, lDerniereColonne, lNombreColonnesFusion, lPremiereColonne, lNombreLignesEnFusion, lClassLigne, lFusions, lCouleurAlternance = false, lAvecSeparateurDeploiement = false;
                let lErreurFusionLigne = false;
                const lNbColonnesVisibles = aInfosZoneColonnes.colonnesVisibles.length;
                const lNbLignesVisibles = this._cache.lignesVisibles.length;
                const lRoleGrid = this._estRoleTreeGrid();
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                const lDonneesFD = this.estDonneeListeFlatDesign(this.Donnees) ? this.Donnees : null;
                const lNumeroLignesEntete = (this._cache.structureWAI.titres.length || 0) + (this.avecTriColonne() ? 1 : 0) + (this._avecLigneCreationTitreEnLigne() ? 1 : 0);
                if (lNbLignesVisibles === 0 && this._options.messageContenuVide) {
                    T.push(IE.jsx.str("div", {
                        class: ObjetListeEspaceMobile_css_1.StylesObjetListeEspaceMobile.liste_messageVide,
                        style: 'grid-column: 1 / ' + (aInfosZoneColonnes.colonnesVisibles.length + 1),
                        role: lRoleGrid ? 'gridcell' : 'treeitem'
                    }, this._options.messageContenuVide));
                }
                if (!this.Donnees || !this.ListeTailles) {
                    return T.join('');
                }
                const lClasseRange = this._cache.refresh.avecConstructionDynamiqueContenu ? this._getClassRange(aIndiceRange) : '';
                const lRangeLignes = {
                    debut: 0,
                    fin: lNbLignesVisibles
                };
                if (this._cache.refresh.avecConstructionDynamiqueContenu) {
                    const lStructure = this._cache.refresh.structure[aIndiceRange];
                    lRangeLignes.debut = lStructure.deb;
                    lRangeLignes.fin = lStructure.fin + 1;
                }
                const lAvecObserver = this._cache.refresh.avecConstructionDynamiqueContenu && !this.Donnees.enConstruction_cacheRechercheTexte && lRangeLignes.fin > lRangeLignes.debut;
                if (lAvecObserver) {
                    T.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                        class: lClasseRange,
                        role: "presentation",
                        style: 'height:0; grid-column:1/' + (lNbColonnesVisibles + 1) + ';',
                        "ie-nodeafter": this.jsxNodeObsRange.bind(this, true, aIndiceRange, aInfosZoneColonnes.indiceBloc)
                    })));
                }
                let lParamCelluleLigne = null;
                for (let iIndice = lRangeLignes.debut; iIndice < lRangeLignes.fin; iIndice++) {
                    const J = this._cache.lignesVisibles[iIndice];
                    lPremiereColonne = true;
                    lAvecSeparateurDeploiement = false;
                    lParamCelluleLigne = this._getParamsCellule(-1, J);
                    if ((iIndice > 0 || aIndiceRange > 0) && lNbColonnesVisibles === 1 && !this.Donnees.enConstruction_cacheRechercheTexte && lDonneesFD && lDonneesFD.avecSeparateurLigneHautFlatdesign && lDonneesFD.avecSeparateurLigneHautFlatdesign(lParamCelluleLigne, this._getParamsCellule(-1, this._cache.lignesVisibles[iIndice - 1]))) {
                        T.push(IE.jsx.str("hr", {
                            class: [ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.liste_sepligne, lClasseRange],
                            role: "presentation"
                        }));
                    }
                    let lAvecLigneDraggable = !this.Donnees.enConstruction_cacheRechercheTexte && this.Donnees.avecLigneDraggable(lParamCelluleLigne);
                    if (!lAvecLigneDraggable && this._options.AvecSuppression && !this._getNonEditable() && this.Donnees) {
                        if (!ObjetNavigateur_1.Navigateur.isTactile) {
                            this._cache.infosZonesColonnes.every( (aInfosZoneColonnes) => {
                                return aInfosZoneColonnes.colonnesVisibles.every( (aNumeroColonne) => {
                                    const lParamsCellule = this._getParamsCellule(aNumeroColonne, J, {
                                        surSuppression: true
                                    });
                                    lAvecLigneDraggable = lDonneesTableau && lDonneesTableau._avecSuppression(lParamsCellule);
                                    return !lAvecLigneDraggable;
                                }
                                );
                            }
                            );
                        }
                    }
                    lFusions = this._getFusionColonnesCelluleDeZone(J, aInfosZoneColonnes);
                    let lIndiceColonneVisible = 1;
                    aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                        var _a, _b;
                        if (!lFusions[aNumeroColonne] || !lFusions[aNumeroColonne].nbCol) {
                            return;
                        }
                        const lParamsCellule = this._getParamsCellule(aNumeroColonne, J, {
                            celluleLignePrecedente: (J > 0 ? this._getParamsCellule(aNumeroColonne, this._cache.lignesVisibles[iIndice - 1]) : null),
                            celluleLigneSuivante: (iIndice + 1 < lNbLignesVisibles ? this._getParamsCellule(aNumeroColonne, this._cache.lignesVisibles[iIndice + 1]) : null)
                        });
                        if (lPremiereColonne && this._options.alternanceCouleurLigneContenu) {
                            const lResultAlternance = lDonneesTableau && lDonneesTableau.avecAlternanceCouleurLigne(lParamsCellule);
                            if (lResultAlternance === true || lResultAlternance === false) {
                                lCouleurAlternance = lResultAlternance ? !lCouleurAlternance : lCouleurAlternance;
                            } else if (MethodesObjet_1.MethodesObjet.isNumber(lResultAlternance)) {
                                lCouleurAlternance = lResultAlternance % 2 === 0;
                            } else {}
                            if (this.Donnees.estUnDeploiement(lParamsCellule)) {
                                this._cache.couleursAlternanceParLigne[J] = lCouleurAlternance;
                                lAvecSeparateurDeploiement = this._options.avecTraitSeparationDeploiementAlternance && this._options.couleurAlternance0 && !!this._options.couleurAlternance0.fond;
                            } else {
                                this._cache.couleursAlternanceParLigne[J] = lCouleurAlternance;
                            }
                        }
                        lNumeroPremiereColonneFusion = lFusions[aNumeroColonne].debut;
                        lNumeroDerniereColonneFusion = lFusions[aNumeroColonne].fin;
                        lDerniereColonne = aInfosZoneColonnes.indiceColonneFin === lNumeroDerniereColonneFusion && (aInfosZoneColonnes.dernierBloc || (!aInfosZoneColonnes.dernierBloc && !aInfosZoneColonnes.estBlocFixe));
                        let lTaille = lFusions[aNumeroColonne].taille;
                        lNombreColonnesFusion = lFusions[aNumeroColonne].nbCol;
                        if (this._cache.colonnesSansBordureDroit[lNumeroDerniereColonneFusion] && this._celluleAvecBordureDroite(lDerniereColonne)) {
                            lTaille += 1;
                        }
                        lNombreLignesEnFusion = this._chercherLignesFusionVertical(lParamsCellule, iIndice, lRangeLignes, lFusions, aInfosZoneColonnes);
                        lDerniereLigne = (iIndice + lNombreLignesEnFusion) >= lNbLignesVisibles;
                        if (lNombreLignesEnFusion !== 1 && this._cache.infosZonesColonnes.length > 1) {
                            lErreurFusionLigne = true;
                        }
                        if (lNombreLignesEnFusion <= 0) {
                            lIndiceColonneVisible += lNombreColonnesFusion;
                            return;
                        }
                        const lIndiceGridCol = lIndiceColonneVisible;
                        let lGridColumn = lIndiceColonneVisible + '';
                        if (lNombreColonnesFusion > 1) {
                            lGridColumn += ' / ' + (lIndiceGridCol + lNombreColonnesFusion);
                        }
                        const lAriaColIndex = lIndiceColonneVisible + 1;
                        lIndiceColonneVisible += lNombreColonnesFusion;
                        let lGridRowEnd = '';
                        if (lNombreLignesEnFusion > 1) {
                            lGridRowEnd = `span ${lNombreLignesEnFusion}`;
                        }
                        let lCelluleSelectionnee = false;
                        if (!this.Donnees.enConstruction_cacheRechercheTexte && this.Donnees._avecSelection(lParamsCellule)) {
                            lCelluleSelectionnee = this._etatSelectionCellule({
                                ligne: J,
                                colonne: aNumeroColonne
                            });
                        }
                        lJeuxCouleurs = this._getJeuxCouleur(lParamsCellule, this._options.avecCadreSelection ? false : lCelluleSelectionnee);
                        lCouleurBorduresCellules = this._options.borduresCellule_couleur || lJeuxCouleurs.getBordure(false);
                        if (this.Donnees.enConstruction_cacheRechercheTexte) {
                            lStyleBordures = '';
                        } else {
                            lStyleBordures = ((lDerniereLigne && this._hauteurAdapteAuContenu()) || (this._options.borduresCellule_vertical <= 0) || (!(lDonneesTableau === null || lDonneesTableau === void 0 ? void 0 : lDonneesTableau.avecBordureBas(lParamsCellule))) ? '' : ObjetStyle_1.GStyle.composeCouleurBordure(lCouleurBorduresCellules, this._options.borduresCellule_vertical, ObjetStyle_2.EGenreBordure.bas)) + ((this._options.borduresCellule_vertical > 0) && (lDonneesTableau === null || lDonneesTableau === void 0 ? void 0 : lDonneesTableau.avecBordureHaut(lParamsCellule)) ? ObjetStyle_1.GStyle.composeCouleurBordure(lCouleurBorduresCellules, this._options.borduresCellule_vertical, ObjetStyle_2.EGenreBordure.haut) : '') + ((!this._celluleAvecBordureDroite(lDerniereColonne) || this._cache.colonnesSansBordureDroit[lNumeroDerniereColonneFusion]) || (aInfosZoneColonnes.indiceColonneFin !== lNumeroDerniereColonneFusion && !(lDonneesTableau === null || lDonneesTableau === void 0 ? void 0 : lDonneesTableau.avecBordureDroite(lParamsCellule))) ? '' : ObjetStyle_1.GStyle.composeCouleurBordure(lCouleurBorduresCellules, this._options.borduresCellule_horizontal, ObjetStyle_2.EGenreBordure.droite)) + (aInfosZoneColonnes.estBlocFixeDroite && lNumeroPremiereColonneFusion === aInfosZoneColonnes.indiceColonneDebut && this._options.borduresCellule_horizontal > 0 ? ObjetStyle_1.GStyle.composeCouleurBordure(lCouleurBorduresCellules, this._options.borduresCellule_horizontal, ObjetStyle_2.EGenreBordure.gauche) : '');
                        }
                        const lIndentation = lDonneesTableau ? Math.min(lDonneesTableau.getIndentationCellule(lParamsCellule) || 0, lTaille) : 0;
                        let lPadding = lDonneesTableau ? lDonneesTableau.getPadding(lParamsCellule) : false;
                        let lPaddingTB = this._options.paddingCelluleTB;
                        let lPaddingLR = this._options.paddingCelluleLR;
                        if (typeof lPadding === 'number' && lPadding >= 0) {
                            lTaille += 2 * (this._options.paddingCelluleLR - lPadding);
                            lPaddingTB = lPadding;
                            lPaddingLR = lPadding;
                        } else {
                            lPadding = null;
                        }
                        const lHeightCellule = this._getHeightCellule(lParamsCellule);
                        let lAvecMain = !this._getNonEditable() && lDonneesTableau && lDonneesTableau.avecEvenementEdition(lParamsCellule);
                        if (!lAvecMain && !this._getNonEditable()) {
                            const lTypeCellule = this.Donnees.getTypeValeur(lParamsCellule);
                            lAvecMain = lTypeCellule === ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche && this.Donnees.avecEdition(lParamsCellule);
                        }
                        lClassLigne = (lAvecMain ? 'AvecMain ' : '');
                        const LId = this.getIdCellule(aNumeroColonne, J);
                        delete this._cache.ouvrirSelecteurFileParLigne[lParamsCellule.ligne + '_' + lParamsCellule.colonne];
                        const lindiceColVsible = lAriaColIndex - 1 + (aInfosZoneColonnes.indiceColVisibleDebut || 0);
                        const lRowIndex = lNumeroLignesEntete + iIndice + 1;
                        let lTabHtmlCellulesSpan = [];
                        if (lRoleGrid && this._cache.structureWAI.lignes) {
                            const lAddLigneWAI = (aLigne, aRowIndex, aColonne, aId) => {
                                if (!this._cache.structureWAI.lignes[aLigne]) {
                                    this._cache.structureWAI.lignes[aLigne] = {
                                        ids: [],
                                        rowIndex: aRowIndex,
                                        indiceRange: this._cache.refresh.avecConstructionDynamiqueContenu ? aIndiceRange : -1
                                    };
                                }
                                ;this._cache.structureWAI.lignes[aLigne].ids[aColonne] = aId;
                            }
                            ;
                            lAddLigneWAI(iIndice, lRowIndex, lindiceColVsible, this.getIdCellule(aNumeroColonne, J, true));
                            for (let lILigneSpan = 0; lILigneSpan < lNombreLignesEnFusion; lILigneSpan++) {
                                for (let lIColonneSpan = 0; lIColonneSpan < lNombreColonnesFusion; lIColonneSpan++) {
                                    if (lILigneSpan > 0 || lIColonneSpan > 0) {
                                        const lIndexs = lFusions[aNumeroColonne].indexCols;
                                        const lNumLigne = iIndice + lILigneSpan;
                                        const lIndiceColFusion = (_a = lIndexs === null || lIndexs === void 0 ? void 0 : lIndexs[lIColonneSpan]) !== null && _a !== void 0 ? _a : -1;
                                        if (lIndiceColFusion < 0) {
                                            continue;
                                        }
                                        const lIdColSpan = this.getIdCellule(lIndiceColFusion, lNumLigne, true, true);
                                        lAddLigneWAI(lNumLigne, lRowIndex + lILigneSpan, lindiceColVsible + lIColonneSpan, lIdColSpan);
                                        lTabHtmlCellulesSpan.push(IE.jsx.str("div", {
                                            role: "gridcell",
                                            id: lIdColSpan,
                                            "data-fusionrow": J,
                                            "data-fusioncol": aNumeroColonne
                                        }));
                                    }
                                }
                            }
                        }
                        this._cache.collectionFuncConstructCellule[lParamsCellule.ligne + '_' + lParamsCellule.colonne] = this._construireCellule.bind(this, lParamsCellule, {
                            id: this.getIdCellule(aNumeroColonne, J, true),
                            taille: lTaille,
                            indentation: lIndentation,
                            indiceColonneVisible: lindiceColVsible,
                            nombreColonnesFusion: lNombreColonnesFusion,
                            nombreLignesEnFusion: lNombreLignesEnFusion,
                            htmlCellulesSpan: lTabHtmlCellulesSpan.join('')
                        });
                        let lJSXDrop = false;
                        if (!this.Donnees.enConstruction_cacheRechercheTexte && !ObjetNavigateur_1.Navigateur.isTactile && this.Donnees && this.Donnees.avecLigneDroppable(lParamCelluleLigne)) {
                            lJSXDrop = this.jsxDropCelluleDroppable.bind(this, lParamsCellule.ligne, lParamsCellule.colonne);
                        }
                        const lCouleurTexte = lJeuxCouleurs.getTexte(false);
                        const lFocusVisibleContrasted = lCouleurTexte === (0,
                        AccessApp_1.getApp)().getCouleur().blanc || ((_b = lCouleurTexte === null || lCouleurTexte === void 0 ? void 0 : lCouleurTexte.toLowerCase) === null || _b === void 0 ? void 0 : _b.call(lCouleurTexte)) === '#ffffff';
                        T.push(IE.jsx.str("div", {
                            id: LId,
                            role: "presentation",
                            "data-colonne": lParamsCellule.colonne,
                            class: ['liste_celluleGrid', `liste_celluleGrid_${iIndice + 1}`, lCelluleSelectionnee ? 'selected' : '', lClassLigne, lClasseRange, lFocusVisibleContrasted ? Divers_css_1.StylesDivers.focusVisibleContrasted : ''],
                            "ie-class": this.jsxGetClassCellulePere.bind(this, lParamsCellule),
                            style: [tag_1.tag.styleToStr('grid-column', lGridColumn), lGridRowEnd ? tag_1.tag.styleToStr('grid-row-end', lGridRowEnd) : '', tag_1.tag.styleToStr('min-height', (lHeightCellule) + 'px'), this._options.ignorerCouleurInlineCellule ? '' : ObjetStyle_1.GStyle.composeCouleurFond(lJeuxCouleurs.getFond(false)), this._options.ignorerCouleurInlineCellule ? '' : ObjetStyle_1.GStyle.composeCouleurTexte(lCouleurTexte), lStyleBordures, tag_1.tag.styleToStr('padding', lPaddingTB + 'px ' + lPaddingLR + 'px')].join(''),
                            "ie-droppable": lJSXDrop,
                            "ie-draggable-fantome": lAvecLigneDraggable ? this.jsxDragFantomeCellule.bind(this, lParamsCellule.ligne, lParamsCellule.colonne) : false
                        }, this._cache.collectionFuncConstructCellule[lParamsCellule.ligne + '_' + lParamsCellule.colonne]()));
                        lPremiereColonne = false;
                    }
                    );
                    if (lAvecSeparateurDeploiement && !this.Donnees.enConstruction_cacheRechercheTexte) {
                        T.push(IE.jsx.str("div", {
                            class: ['liste_traitSepDeploiement', lClasseRange],
                            style: {
                                'grid-column': '1 / ' + (aInfosZoneColonnes.colonnesVisibles.length + 1),
                                'margin': '1px ' + this._options.paddingCelluleLR + 'px',
                                'background-color': this._options.couleurAlternance0.fond
                            }
                        }));
                    }
                    if (this._cache.numeroLigneCreationDynamique === J && !this.Donnees.enConstruction_cacheRechercheTexte) {
                        T.push('<div class="liste_celluleGrid ' + lClasseRange + '" style="', 'grid-column:', '1 / ', aInfosZoneColonnes.colonnesVisibles.length + 1, ';', '">', this.composeCreation(J, this._construireTaillesGrid(aInfosZoneColonnes)), '</div>');
                    }
                }
                if (lAvecObserver) {
                    T.push(IE.jsx.str("div", {
                        class: lClasseRange,
                        style: 'height:0; grid-column:1/' + (lNbColonnesVisibles + 1),
                        "ie-nodeafter": this.jsxNodeObsRange.bind(this, false, aIndiceRange, aInfosZoneColonnes.indiceBloc),
                        role: "presentation"
                    }));
                }
                ;return T.join('');
            }
            _construireContenuListe(aInfosZoneColonnes) {
                const T = [];
                const lCouleurBorduresContenu = this._options.borduresContenu_couleur || this._options.couleursListe.editable.getBordure(false);
                const lAvecOmbre = this._options.skin !== _ObjetListe_1.ObjetListe.skin.flatDesign;
                const lCss = ['conteneur-scroll-bloc conteneur-ombre-zone'];
                if (lAvecOmbre) {
                    lCss.push('ombre-top');
                    if (!aInfosZoneColonnes.dernierBloc) {
                        lCss.push('ombre-top-droite');
                    }
                    if (aInfosZoneColonnes.indiceBloc > 0) {
                        lCss.push('ombre-top-gauche');
                    }
                }
                T.push('<div id="', this.ids.contenu + aInfosZoneColonnes.indiceBloc, '" role="presentation">', '<div role="presentation"', ' class="' + lCss.join(' ') + '"', ' style="', this._options.borduresContenu_top > 0 ? ObjetStyle_1.GStyle.composeCouleurBordure(lCouleurBorduresContenu, this._options.borduresContenu_top, ObjetStyle_2.EGenreBordure.haut) : '', this._options.borduresContenu_right > 0 && aInfosZoneColonnes.dernierBloc ? ObjetStyle_1.GStyle.composeCouleurBordure(lCouleurBorduresContenu, this._options.borduresContenu_right, ObjetStyle_2.EGenreBordure.droite) : '', this._options.borduresContenu_bottom > 0 && (this._cache.lignesVisibles.length > 0 || !this._hauteurAdapteAuContenu()) ? ObjetStyle_1.GStyle.composeCouleurBordure(lCouleurBorduresContenu, this._options.borduresContenu_bottom, ObjetStyle_2.EGenreBordure.bas) : '', this._options.borduresContenu_left > 0 && aInfosZoneColonnes.indiceBloc === 0 ? ObjetStyle_1.GStyle.composeCouleurBordure(lCouleurBorduresContenu, this._options.borduresContenu_left, ObjetStyle_2.EGenreBordure.gauche) : '', this._options.paddingContenu_LR ? 'padding:0 ' + this._options.paddingContenu_LR + 'px;' : '', '">');
                if (lAvecOmbre) {
                    T.push(this.construireOmbreZoneScroll(aInfosZoneColonnes));
                }
                if (this.ListeTailles) {
                    T.push(IE.jsx.str("div", {
                        id: this.ScrollV.getIdZone(aInfosZoneColonnes.idScrollContenu),
                        style: "overflow:hidden;position:relative;",
                        "ie-node": this.jsxGetNodeScrollContenuParent.bind(this, this),
                        role: "presentation"
                    }, (aHtmlZone) => {
                        const lTaillesGrid = this._construireTaillesGrid(aInfosZoneColonnes);
                        aHtmlZone.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                            id: this.ids.cadreSelection + aInfosZoneColonnes.indiceBloc,
                            class: "liste_conteneurCadreSelection",
                            role: "presentation"
                        }), IE.jsx.str("div", {
                            id: this.ScrollV.getIdContenu(aInfosZoneColonnes.idScrollContenu),
                            role: "presentation",
                            "ie-node": this.jsxGetNodeScrollContenu.bind(this, this),
                            style: lTaillesGrid.width > 0 ? ObjetStyle_1.GStyle.composeWidth(lTaillesGrid.width) : false
                        }, () => {
                            return (aInfosZoneColonnes.indiceBloc === 0 ? this._construireFiltres() : '') + this.construireContenuListeInterne(aInfosZoneColonnes);
                        }
                        )));
                        if (this._avecRollover()) {
                            aHtmlZone.push(IE.jsx.str("div", {
                                id: this.ids.rolloverContenuLigne + aInfosZoneColonnes.indiceBloc,
                                class: "liste_conteneur_rollover left",
                                style: 'left:' + (aInfosZoneColonnes.indiceBloc === 0 ? 0 : -1) + 'px;'
                            }, IE.jsx.str("div", null)));
                            aHtmlZone.push(IE.jsx.str("div", {
                                id: this.ids.rolloverContenuColonne + aInfosZoneColonnes.indiceBloc,
                                class: "liste_conteneur_rollover top"
                            }, IE.jsx.str("div", null)));
                            aHtmlZone.push(IE.jsx.str("div", {
                                id: this.ids.rolloverContenuCellule + aInfosZoneColonnes.indiceBloc,
                                class: "liste_conteneur_rollover center"
                            }, IE.jsx.str("div", null)));
                        }
                    }
                    ));
                } else {
                    T.push(IE.jsx.str("div", {
                        id: this.IdPremierElement,
                        tabindex: "-1",
                        style: "width:100%; height:100%; overflow:auto"
                    }));
                }
                T.push('</div></div>');
                return T.join('');
            }
            _composeImpression(aProportion) {
                var _a, _b;
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                if (this.Donnees) {
                    this.Donnees.enImpression = true;
                }
                try {
                    const lObjetLargeur = {};
                    Invocateur_1.Invocateur.evenement('LargeurZoneImpression', lObjetLargeur);
                    const lCache = {
                        largeurPage: lObjetLargeur.width,
                        avecScrollHorizontal: false
                    };
                    this._calculColonnesCachees(lCache);
                    this._getInfosZonesColonnes(lCache);
                    const lTaillesColonnes = this._calculerTaillesColonnes(lCache, true);
                    const lRatio = (aProportion || 100) / 100;
                    const T = [];
                    let lTaille, lNombreColonnesFusion;
                    const lColonnesVisibles = [];
                    if (this.ListeTailles) {
                        for (let I = 0; I < this.ListeTailles.length; I++) {
                            if (this._estColonneVisible(I, lCache)) {
                                lColonnesVisibles.push(I);
                            }
                        }
                    }
                    const lLigneFixeTailleColonne = function(aTab) {
                        aTab.push('<tr>');
                        lColonnesVisibles.forEach( (aNumeroColonne) => {
                            aTab.push(IE.jsx.str("td", {
                                style: "height:0px;line-height:0px;padding-top: 0px; padding-bottom: 0px;"
                            }, IE.jsx.str("div", {
                                style: lTaillesColonnes[aNumeroColonne].px > 0 ? ObjetStyle_1.GStyle.composeWidth(lTaillesColonnes[aNumeroColonne].px * lRatio + 1) : ''
                            }, "\u00A0")));
                        }
                        );
                        aTab.push('</tr>');
                    };
                    T.push('<table class="ObjetListe_Impression tableConteneur">');
                    if (!this.ListeTitres && this.ListeTailles) {
                        T.push('<tr style="font-size:0px;">');
                        lColonnesVisibles.forEach( (aNumeroColonne) => {
                            T.push(IE.jsx.str("td", {
                                style: 'padding-left:2px; padding-right:3px; height: 0px;' + (lTaillesColonnes[aNumeroColonne].px > 0 ? 'width:' + lTaillesColonnes[aNumeroColonne].px + 'px;' : '')
                            }));
                        }
                        );
                        T.push('</tr>');
                    } else if (this.ListeTitres) {
                        for (let iLigne = 0; iLigne < this.ListeTitres.length; iLigne++) {
                            T.push('<tr class="AlignementMilieu trTitre">');
                            const lTitresLigne = this.ListeTitres[iLigne];
                            for (let I = 0; lTitresLigne && I < lTitresLigne.length; I++) {
                                if (!lTitresLigne[I].fusion && (this._estColonneVisible(I, lCache) || (lTitresLigne[I + 1] && lTitresLigne[I + 1].fusion === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche))) {
                                    let lNbCol = this._estColonneVisible(I, lCache) ? 1 : 0;
                                    let lNbLigne = 1;
                                    let lTailleColonneCourante = lNbCol > 0 ? lTaillesColonnes[I].px * lRatio - 1 : 0;
                                    for (let iColonne = I + 1; iColonne < lTitresLigne.length; iColonne++) {
                                        if (lTitresLigne[iColonne].fusion === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche && this._estColonneVisible(iColonne, lCache)) {
                                            lNbCol++;
                                            lTailleColonneCourante += lTaillesColonnes[iColonne].px * lRatio - 1;
                                        } else if (lTitresLigne[iColonne].fusion === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionGauche && !this._estColonneVisible(iColonne, lCache)) {
                                            continue;
                                        } else {
                                            break;
                                        }
                                    }
                                    if (lNbCol === 0) {
                                        break;
                                    }
                                    for (let j = iLigne + 1; j < this.ListeTitres.length; j++) {
                                        if (this.ListeTitres[j][I] && this.ListeTitres[j][I].fusion === TypeFusionTitreListe_1.TypeFusionTitreListe.FusionHaute) {
                                            lNbLigne += 1;
                                        } else {
                                            break;
                                        }
                                    }
                                    const lColSpan = lNbCol === 1 ? '' : ' colspan="' + lNbCol + '"';
                                    const lRowSpan = lNbLigne === 1 ? '' : ' rowspan="' + lNbLigne + '"';
                                    const lChaineTitre = lTitresLigne[I].libelle;
                                    const lChaineHtml = ((_b = (_a = lTitresLigne[I]).getLibelleHtml) === null || _b === void 0 ? void 0 : _b.call(_a)) || lTitresLigne[I].libelleHtml;
                                    const lAvecTri = this.Donnees && !!this._cache.colonnesTri;
                                    const lEstTriColonne = lAvecTri && this._cache.colonnesTri[I] && (lNbCol === 1) && ((iLigne === this.ListeTitres.length - 1) || (lNbLigne + iLigne === this.ListeTitres.length));
                                    T.push('<th style="font-size:', 1.1 * lRatio, 'rem;', (I === 0 ? 'border-left:#000 1px solid;' : ''), '"' + lRowSpan + lColSpan, '>');
                                    if (lEstTriColonne) {
                                        const lNumeroTri = this._triCourant.colonne.indexOf(I);
                                        const lCarTri = lNumeroTri >= 0 && (this._triCourant.colonne[lNumeroTri] === I) ? this._triCourant.genre[lNumeroTri] === Enumere_TriElement_1.EGenreTriElement.Croissant ? '&#x25BC;' : '&#x25B2;' : '';
                                        const lLeft = lTailleColonneCourante / 2 - 9 / 2;
                                        T.push('<div style="position:relative; top:0px; height:' + lRatio * _CONST_hauteurImageTri + 'px;">', '<div style="position:absolute; z-index:1; top:-1px; left:', lLeft, 'px; font-size:', 0.9 * lRatio, 'rem;line-height:', 0.9 * lRatio, 'rem;">', lCarTri, '</div>', '&nbsp;</div>');
                                    }
                                    T.push(IE.jsx.str("div", {
                                        style: lTailleColonneCourante > 0 ? 'width:' + lTailleColonneCourante + 'px;' : '',
                                        class: !lChaineHtml ? 'ie-ellipsis' : false
                                    }, lChaineHtml ? lChaineHtml : IE.jsx.str("span", null, lChaineTitre)), '</th>');
                                }
                            }
                            T.push('</tr>');
                        }
                    }
                    if (this.ListeTailles && this.Donnees) {
                        const lLignesVisibles = [];
                        for (let J = 0, lNb = this.Donnees.getNbrLignes(); J < lNb; J++) {
                            if (this._estLigneVisible(J)) {
                                lLignesVisibles.push(J);
                            }
                        }
                        for (let iIndice = 0; iIndice < lLignesVisibles.length; iIndice++) {
                            const J = lLignesVisibles[iIndice];
                            const lFusions = this._getFusionColonnesCellule({
                                colonnesVisibles: lColonnesVisibles,
                                ligne: J,
                                indiceColonneDebut: lColonnesVisibles[0],
                                indiceColonneFin: lColonnesVisibles[lColonnesVisibles.length - 1],
                                dernierBloc: true,
                                tailles: lTaillesColonnes
                            });
                            T.push('<tr valign="top" class="trContenu">');
                            let lPremiereColonne = true;
                            lColonnesVisibles.forEach( (aNumeroColonne) => {
                                if (!lFusions[aNumeroColonne] || !lFusions[aNumeroColonne].nbCol) {
                                    return;
                                }
                                const lParamsCellule = this._getParamsCellule(aNumeroColonne, J);
                                lTaille = lFusions[aNumeroColonne].taille * lRatio;
                                lNombreColonnesFusion = lFusions[aNumeroColonne].nbCol;
                                let lIndentation = (lDonneesTableau === null || lDonneesTableau === void 0 ? void 0 : lDonneesTableau.getIndentationCellule(lParamsCellule)) || 0;
                                let lSelection = false;
                                if (this._options.avecSelectionLigneSurImpression && lPremiereColonne && this._etatSelectionCellule({
                                    ligne: J,
                                    colonne: -1
                                })) {
                                    lSelection = true;
                                    lIndentation += 8;
                                }
                                const lInfosContenu = this._composeContenu(Object.assign(lParamsCellule, {
                                    taille: lTaille - lIndentation,
                                    enImpression: true,
                                    surProportion: aProportion,
                                    avecContenuTronque: lDonneesTableau && lDonneesTableau.avecContenuTronque(lParamsCellule)
                                }), this.Donnees.getTypeValeur(lParamsCellule));
                                T.push(IE.jsx.str("td", {
                                    class: lSelection ? 'ligneSelectionImp' : '',
                                    style: 'font-size:' + 1.1 * lRatio + 'rem;' + (lPremiereColonne ? 'border-left:#000 1px solid;' : ''),
                                    colspan: lNombreColonnesFusion > 1 ? lNombreColonnesFusion : false
                                }, IE.jsx.str("div", {
                                    style: (lTaille > 0 ? 'width:' + (lTaille - lIndentation) + 'px;' : '') + (lIndentation > 0 ? 'padding-left:' + lIndentation + 'px;' : '')
                                }, lInfosContenu.html)));
                                lPremiereColonne = false;
                            }
                            );
                            T.push('</tr>');
                        }
                        lLigneFixeTailleColonne(T);
                    }
                    T.push('</table>');
                    if (this._avecLigneTotal() && this.ListeTailles && lDonneesTableau) {
                        T.push(IE.jsx.str("table", {
                            class: "ObjetListe_Impression tableConteneur",
                            style: "margin-top:1em;"
                        }, (aTab) => {
                            const lLignes = (lDonneesTableau ? lDonneesTableau.getListeLignesTotal() : null) || new ObjetListeElements_1.ObjetListeElements().addElement(null);
                            lLignes.parcourir( (aArticle, aIndex) => {
                                aTab.push(IE.jsx.str("tr", {
                                    class: "trTotal"
                                }, (aTab) => {
                                    lColonnesVisibles.forEach( (aNumeroColonne) => {
                                        const lParams = this._getParamsCellule(aNumeroColonne, -1, {
                                            surTotal: true
                                        });
                                        if (aArticle) {
                                            lParams.ligne = aIndex;
                                            lParams.article = aArticle;
                                        }
                                        const lSansBordureDroite = this._cache.colonnesSansBordureDroit[aNumeroColonne];
                                        const lClassTotal = lDonneesTableau ? lDonneesTableau.getClassTotal(lParams) : '';
                                        const lAvecBorduresTotal = lDonneesTableau && lDonneesTableau.avecBordureTotalVisible(lParams);
                                        let lStyleTotal = '';
                                        if (lAvecBorduresTotal) {
                                            lStyleTotal = ObjetStyle_1.GStyle.composeCouleurBordure('#000', 1, (lSansBordureDroite ? 0 : ObjetStyle_2.EGenreBordure.droite) + ObjetStyle_2.EGenreBordure.bas + ObjetStyle_2.EGenreBordure.gauche);
                                        }
                                        const lContenuTotal = lDonneesTableau ? lDonneesTableau.getContenuTotal(lParams) : '';
                                        aTab.push(IE.jsx.str("td", {
                                            style: 'font-size:' + 1.1 * lRatio + 'rem;' + lStyleTotal,
                                            class: lClassTotal
                                        }, IE.jsx.str("div", {
                                            style: ObjetStyle_1.GStyle.composeWidth(lTaillesColonnes[aNumeroColonne].px * lRatio)
                                        }, lContenuTotal ? lContenuTotal : '&nbsp;')));
                                    }
                                    );
                                }
                                ));
                            }
                            );
                            lLigneFixeTailleColonne(aTab);
                        }
                        ));
                    }
                    return T.join('');
                } finally {
                    if (this.Donnees) {
                        this.Donnees.enImpression = false;
                    }
                }
            }
            _avecLigneTotal() {
                const lListeTotal = this.estDonneeListeTableau(this.Donnees) ? this.Donnees.getListeLignesTotal() : null;
                return this._options.avecLigneTotal || (lListeTotal && lListeTotal.count() > 0);
            }
            _getListeLignesTotal() {
                return (this.estDonneeListeTableau(this.Donnees) ? this.Donnees.getListeLignesTotal() : null) || new ObjetListeElements_1.ObjetListeElements().addElement(null);
            }
            _construireContenuTotal(aInfosZoneColonnes) {
                const T = [];
                const lTaillesGrid = this._construireTaillesGrid(aInfosZoneColonnes);
                let lSansBordureDroite = false;
                let lClassTotal = '';
                let lContenuTotal = '';
                let lDerniereColonne = false;
                let lAvecBordureTotalVisible = false;
                let lAvecPremiereBordureGauche = false;
                const lLignes = this._getListeLignesTotal();
                const lNbLignes = lLignes.count();
                const lDonneesTableau = this.estDonneeListeFlatDesign(this.Donnees) ? null : this.Donnees;
                lLignes.parcourir( (aArticle, aIndexLigne) => {
                    if (!this._cache.gridTotalAccess.ordres[aIndexLigne]) {
                        this._cache.gridTotalAccess.ordres[aIndexLigne] = [];
                    }
                    const lTabAcessLigne = this._cache.gridTotalAccess.ordres[aIndexLigne];
                    this._cache.gridTotalAccess.sansArticle = true;
                    let lFusions = null;
                    if (this.Donnees) {
                        lFusions = this._getFusionColonnesCellule({
                            total: true,
                            getParamsCellule: (aNumeroColonne) => {
                                return this._getParamsCellule(aNumeroColonne, -1, {
                                    surTotal: true,
                                    ligne: aIndexLigne,
                                    article: aArticle
                                });
                            }
                            ,
                            colonnesVisibles: aInfosZoneColonnes.colonnesVisibles,
                            indiceColonneDebut: aInfosZoneColonnes.indiceColonneDebut,
                            indiceColonneFin: aInfosZoneColonnes.indiceColonneFin,
                            dernierBloc: aInfosZoneColonnes.dernierBloc || (!aInfosZoneColonnes.dernierBloc && !aInfosZoneColonnes.estBlocFixe)
                        });
                    }
                    let lIndexColonne = 0;
                    aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                        if (lFusions && (!lFusions[aNumeroColonne] || !lFusions[aNumeroColonne].nbCol)) {
                            if (lTabAcessLigne.length > 0) {
                                lTabAcessLigne.push(lTabAcessLigne[lTabAcessLigne.length - 1]);
                            }
                            return;
                        }
                        lTabAcessLigne.push(aNumeroColonne);
                        lIndexColonne += 1;
                        const lParams = this._getParamsCellule(aNumeroColonne, -1, {
                            surTotal: true
                        });
                        if (aArticle) {
                            lParams.ligne = aIndexLigne;
                            lParams.article = aArticle;
                            this._cache.gridTotalAccess.sansArticle = false;
                        }
                        let lStyleTotal = '';
                        let lBordures = 0;
                        let lNbColonnes = 0;
                        if (lDonneesTableau) {
                            lParams.typeCellule = lDonneesTableau.getTypeCelluleTotal(lParams);
                            lSansBordureDroite = this._cache.colonnesSansBordureDroit[lFusions[aNumeroColonne].fin];
                            lDerniereColonne = aInfosZoneColonnes.dernierBloc && aInfosZoneColonnes.indiceColonneFin === lFusions[aNumeroColonne].fin;
                            lClassTotal = lDonneesTableau.getClassTotal(lParams);
                            lAvecBordureTotalVisible = lDonneesTableau.avecBordureTotalVisible(lParams);
                            if (lAvecBordureTotalVisible && !lSansBordureDroite && !lDerniereColonne) {
                                lBordures += ObjetStyle_2.EGenreBordure.droite;
                                lClassTotal += ' b-right';
                            }
                            if (!lAvecBordureTotalVisible && !lDerniereColonne && !this._cache.colonnesSansBordureDroit[lFusions[aNumeroColonne].fin + 1]) {
                                const lParamsColSuivante = this._getParamsCellule(lFusions[aNumeroColonne].fin + 1, -1, {
                                    surTotal: true,
                                    ligne: aIndexLigne,
                                    article: aArticle
                                });
                                lParamsColSuivante.typeCellule = lDonneesTableau.getTypeCelluleTotal(lParamsColSuivante);
                                if (lDonneesTableau.avecBordureTotalVisible(lParamsColSuivante)) {
                                    lBordures += ObjetStyle_2.EGenreBordure.droite;
                                    lClassTotal += ' b-right';
                                }
                            }
                            if (lAvecBordureTotalVisible) {
                                lBordures += ObjetStyle_2.EGenreBordure.bas;
                                lClassTotal += ' b-bottom';
                            }
                            if (!lAvecBordureTotalVisible && aIndexLigne < lNbLignes - 1) {
                                const lParamsLigneSuiv = Object.assign({}, lParams, {
                                    ligne: aIndexLigne + 1,
                                    article: lLignes.get(aIndexLigne + 1)
                                });
                                lParamsLigneSuiv.typeCellule = lDonneesTableau.getTypeCelluleTotal(lParamsLigneSuiv);
                                if (lDonneesTableau.avecBordureTotalVisible(lParamsLigneSuiv)) {
                                    lBordures += ObjetStyle_2.EGenreBordure.bas;
                                    lClassTotal += ' b-bottom';
                                }
                            }
                            if (aInfosZoneColonnes.indiceBloc === 0 && lFusions[aNumeroColonne].debut === 0 && aIndexLigne === 0) {
                                lAvecPremiereBordureGauche = lAvecBordureTotalVisible;
                            }
                            lNbColonnes = lFusions[aNumeroColonne].nbCol;
                            lStyleTotal = this._composePaddingCellule() + `min-height:${this._getHeightCellule(lParams)}px;` + lDonneesTableau._getStyleTotal(lParams) + 'grid-column:' + lIndexColonne + (lNbColonnes > 1 ? ' / ' + (lIndexColonne + lNbColonnes) : '') + ';' + 'grid-row:' + (aIndexLigne + 1) + ';';
                            lContenuTotal = lDonneesTableau.getContenuTotal(lParams);
                            if (lNbColonnes > 1) {
                                lIndexColonne += lNbColonnes - 1;
                            }
                        }
                        const lIdGridCell = this.getIdCelluleTotal(lParams.colonne, lParams.ligne, true);
                        if (!this._cache.structureWAI.totals[aIndexLigne]) {
                            this._cache.structureWAI.totals[aIndexLigne] = [];
                        }
                        this._cache.structureWAI.totals[aIndexLigne].push(lIdGridCell);
                        const lTabHtmlSpan = [];
                        for (let lIColonneSpan = 1; lIColonneSpan < lNbColonnes; lIColonneSpan++) {
                            const lIdColSpan = `${lIdGridCell}_wai_${lIColonneSpan}`;
                            this._cache.structureWAI.totals[aIndexLigne].push(lIdColSpan);
                            lTabHtmlSpan.push(IE.jsx.str("div", {
                                role: "gridcell",
                                id: lIdColSpan
                            }));
                        }
                        const lTaille = (lFusions ? lFusions[aNumeroColonne].taille : this._cache.taillesColonne[aNumeroColonne].px) + (lDerniereColonne || ObjetStyle_2.EGenreBordure.avecBordure(lBordures, ObjetStyle_2.EGenreBordure.droite) ? 0 : 1) + (ObjetStyle_2.EGenreBordure.avecBordure(lBordures, ObjetStyle_2.EGenreBordure.gauche) ? -1 : 0);
                        let lTabIndex = '-1';
                        if (!this._cache.gridTotalAccess.nav) {
                            this._cache.gridTotalAccess.nav = {
                                ligne: lParams.ligne,
                                colonne: lParams.colonne
                            };
                            lTabIndex = '0';
                        } else {
                            if (this._cache.gridTotalAccess.nav.ligne === lParams.ligne && this._cache.gridTotalAccess.nav.colonne === lParams.colonne) {
                                lTabIndex = '0';
                            }
                        }
                        const lGetNodeCelluleTotal = (aNode) => {
                            const lData = {
                                instance: this
                            };
                            const lThis = this;
                            $(aNode).on({
                                click: this._surClickCelluleTotal,
                                focusin() {
                                    var _a, _b;
                                    if (lThis._cache.gridTotalAccess.nav) {
                                        (_a = ObjetHtml_1.GHtml.getElement(lThis.getIdCelluleTotal(lThis._cache.gridTotalAccess.nav.colonne, lThis._cache.gridTotalAccess.nav.ligne, true))) === null || _a === void 0 ? void 0 : _a.setAttribute('tabindex', '-1');
                                    }
                                    lThis._cache.gridTotalAccess.nav = {
                                        ligne: parseInt(this.dataset.row),
                                        colonne: parseInt(this.dataset.col)
                                    };
                                    (_b = ObjetHtml_1.GHtml.getElement(lThis.getIdCelluleTotal(lThis._cache.gridTotalAccess.nav.colonne, lThis._cache.gridTotalAccess.nav.ligne, true))) === null || _b === void 0 ? void 0 : _b.setAttribute('tabindex', '0');
                                }
                            }, lData);
                        }
                        ;
                        const lGetNodeCelluleTotalCell = (aNode) => {
                            $(aNode).on({
                                keyup: (aEvent) => {
                                    this.navigationClavierGridTotal(aEvent);
                                }
                            });
                        }
                        ;
                        T.push(IE.jsx.str("div", {
                            id: this.getIdCelluleTotal(lParams.colonne, lParams.ligne, false),
                            role: "presentation",
                            "data-row": lParams.ligne,
                            "data-col": lParams.colonne,
                            "ie-node": lGetNodeCelluleTotal,
                            class: ['liste_cellule_total', lClassTotal, lParams.typeCellule === ObjetDonneesListe_1.ObjetDonneesListe.typeCelluleTotal.defaut ? Divers_css_1.StylesDivers.focusVisibleContrasted : ''],
                            style: lStyleTotal
                        }, IE.jsx.str("div", {
                            id: lIdGridCell,
                            style: ObjetStyle_1.GStyle.composeWidth(lTaille),
                            role: "gridcell",
                            tabindex: lTabIndex,
                            "data-row": lParams.ligne,
                            "data-col": lParams.colonne,
                            "ie-node": lGetNodeCelluleTotalCell,
                            "aria-colspan": lNbColonnes > 1 ? lNbColonnes : false
                        }, lContenuTotal ? lContenuTotal : '&nbsp;'), lTabHtmlSpan.length > 0 ? IE.jsx.str("div", {
                            "aria-hidden": "true",
                            role: "presentation",
                            class: "sr-only"
                        }, lTabHtmlSpan.join('')) : ''));
                    }
                    );
                }
                );
                const lHtml = (IE.jsx.str("div", {
                    id: this.ScrollH.getIdContenu(aInfosZoneColonnes.idScrollTotal),
                    role: "presentation",
                    class: "liste_scroll_total",
                    style: lTaillesGrid.styleGrid + (lTaillesGrid.width > 0 ? ObjetStyle_1.GStyle.composeWidth(lTaillesGrid.width) : '')
                }, T.join('')));
                return {
                    html: lHtml,
                    avecPremiereBordureGauche: lAvecPremiereBordureGauche,
                    avecDerniereBordureDroite: aInfosZoneColonnes.dernierBloc && lAvecBordureTotalVisible
                };
            }
            _construireLigneTotal(aInfosZoneColonnes) {
                if (!this.ListeTailles) {
                    return '';
                }
                const lTotal = this._construireContenuTotal(aInfosZoneColonnes);
                return (IE.jsx.str("div", {
                    class: this.Donnees ? false : 'hide',
                    style: aInfosZoneColonnes.indiceBloc === 0 ? ObjetStyle_1.GStyle.composeCouleurBordure(lTotal.avecPremiereBordureGauche ? this._options.couleursListe.editable.getBordure(false) : 'transparent', 1, ObjetStyle_2.EGenreBordure.gauche) : '' + aInfosZoneColonnes.dernierBloc ? ObjetStyle_1.GStyle.composeCouleurBordure(lTotal.avecDerniereBordureDroite ? this._options.couleursListe.editable.getBordure(false) : 'transparent', 1, ObjetStyle_2.EGenreBordure.droite) : ''
                }, IE.jsx.str("div", {
                    id: this.idTotaux + aInfosZoneColonnes.indiceBloc,
                    class: "conteneur-ombre-zone"
                }, this.construireOmbreZoneScroll(aInfosZoneColonnes), IE.jsx.str("div", {
                    id: this.ScrollH.getIdZone(aInfosZoneColonnes.idScrollTotal),
                    style: "overflow:hidden;position:relative;"
                }, lTotal.html))));
            }
            construireOmbreZoneScroll(aInfosZoneColonnes) {
                const T = [];
                if (!aInfosZoneColonnes.estBlocFixe) {
                    if (aInfosZoneColonnes.indiceBloc > 0) {
                        T.push(IE.jsx.str("div", {
                            class: "ombre gauche"
                        }));
                    }
                    if (!aInfosZoneColonnes.dernierBloc) {
                        T.push(IE.jsx.str("div", {
                            class: "ombre droite"
                        }));
                    }
                }
                return T.join('');
            }
            composeCreation(aLigne, aTaillesGrid, aAvecTraitHaut) {
                var _a;
                const T = [];
                const LOnKeyUpNav = this.Nom + '.navigationClavier (id); if (Navigateur.isToucheFleche ()) Navigateur.stopperEvenement (event);';
                const lUneSeuleColonneCreation = this.ListeCreations.length === 1;
                let LId;
                const lNbColonnesVisible = lUneSeuleColonneCreation ? 1 : aTaillesGrid.tabWidth.length;
                this._avecLigneCreationUnique = false;
                if (aTaillesGrid.tabWidth.length > 0) {
                    this._avecLigneCreationUnique = true;
                    LId = this._getIdCreation(-1, aLigne);
                    const lParams = this._getParamsCellule(-1, aLigne, {
                        surCreation: true
                    });
                    const lAvecInputFile = this.Donnees && this.Donnees.avecSelecFile(lParams);
                    delete this._cache.ouvrirSelecteurFileParLigne[aLigne + '_-1'];
                    let lNbCol = 0;
                    for (const lInfos of this._cache.infosZonesColonnes) {
                        lNbCol += lInfos.colonnesVisibles.length;
                    }
                    const lNodeSurLigneCreationUnique = (aNode) => {
                        const lThis = this;
                        $(aNode).on({
                            click: function() {
                                lThis._surLigneCreationUnique(true, aLigne);
                            },
                            keyup: function(aEvent) {
                                lThis._surLigneCreationUnique(false, aLigne, ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent) || ToucheClavier_1.ToucheClavierUtil.estEventEdition(aEvent));
                            }
                        });
                    }
                    ;
                    T.push(IE.jsx.str("div", {
                        id: LId + '_Creation',
                        role: "presentation",
                        tabindex: "-1",
                        "ie-node": lNodeSurLigneCreationUnique,
                        class: "ligne-creation-modele",
                        style: aTaillesGrid.width > 0 ? ObjetStyle_1.GStyle.composeWidth(aTaillesGrid.width) : ''
                    }, IE.jsx.str("div", {
                        id: LId,
                        class: this.getClassCreation(),
                        role: "gridcell",
                        tabindex: "0",
                        "aria-rowindex": (((_a = this.ListeTitres) === null || _a === void 0 ? void 0 : _a.length) || 0) + (this.avecTriColonne() ? 1 : 0) + 1,
                        "aria-colindex": 1,
                        "aria-colspan": lNbCol,
                        style: aLigne === -1 ? aAvecTraitHaut ? ObjetStyle_1.GStyle.composeCouleurBordure(this._options.couleursListe.editable.getBordure(false), 1, ObjetStyle_2.EGenreBordure.haut) : '' : ObjetStyle_1.GStyle.composeCouleurBordure(this._options.couleursListe.editable.getBordure(false), 1, ObjetStyle_2.EGenreBordure.bas)
                    }, IE.jsx.str("div", {
                        id: LId + '_div',
                        tabindex: "-1",
                        class: "liste_celluleGrid divLigneCreation",
                        onkeyup: LOnKeyUpNav,
                        "aria-label": ObjetWAI_1.GObjetWAI.getInfo(ObjetWAI_1.EGenreObjet.NouvelElement) + ' ' + ObjetWAI_1.GObjetWAI.getInfo(ObjetWAI_1.EGenreObjet.AvecEdition),
                        "ie-model": lAvecInputFile ? this.jsxModeleSelecFile.bind(this, this, lParams) : false,
                        "ie-selecfile": !!lAvecInputFile,
                        style: this._composePaddingCellule()
                    }, IE.jsx.str("div", {
                        style: `height:${this._getHeightCellule(lParams) - 2 * this._options.paddingCelluleTB}px;`
                    }, IE.jsx.str("div", null, _ObjetListe_1.ObjetListe.getTitreCreation(this._options.titreCreation)))))));
                }
                const lFuncNodeLigneCreation = (aNode) => {
                    $(aNode).eventValidation( () => {
                        this.surCreationDeb(false);
                    }
                    );
                }
                ;
                T.push(IE.jsx.str("div", {
                    id: LId + '_Creation_Edit',
                    tabindex: "-1",
                    "ie-node": lFuncNodeLigneCreation,
                    class: "liste-creation-edition",
                    style: (this._avecLigneCreationUnique ? 'display:none;' : '') + (!lUneSeuleColonneCreation ? aTaillesGrid.styleGrid : '') + (aTaillesGrid.width > 0 ? ObjetStyle_1.GStyle.composeWidth(aTaillesGrid.width) : '')
                }, (aTab) => {
                    let lTaille;
                    aTaillesGrid.tabWidth.every( (aInfosCol, aIndex) => {
                        if ((!lUneSeuleColonneCreation || this.ListeCreations[0] === aInfosCol.colonne || this._colonneCreationUniqueEnErreur())) {
                            lTaille = lNbColonnesVisible === 1 ? aTaillesGrid.width : aInfosCol.width;
                            const lEstDerniereColonne = lNbColonnesVisible === 1 || aIndex === aTaillesGrid.tabWidth.length - 1;
                            const lParams = this._getParamsCellule(aInfosCol.colonne, aLigne, {
                                surCreation: true
                            })
                              , LId = this._getIdCreation(aInfosCol.colonne, aLigne);
                            const lListeBordures = aLigne === -1 ? (aAvecTraitHaut ? ObjetStyle_2.EGenreBordure.haut : 0) + (!lEstDerniereColonne ? ObjetStyle_2.EGenreBordure.droite : 0) : ObjetStyle_2.EGenreBordure.bas + (!lEstDerniereColonne ? ObjetStyle_2.EGenreBordure.droite : 0);
                            aTab.push(IE.jsx.str("div", {
                                id: LId,
                                class: this.getClassCreation() + ' Maigre',
                                role: "presentation",
                                style: this._composePaddingCellule() + (lTaille > 0 ? ObjetStyle_1.GStyle.composeWidth(lTaille) : '') + (lListeBordures > 0 ? ObjetStyle_1.GStyle.composeCouleurBordure(this._options.couleursListe.editable.getBordure(false), 1, lListeBordures) : '')
                            }, IE.jsx.str("div", {
                                id: LId + '_div',
                                tabindex: "-1",
                                role: "presentation",
                                onkeyup: LOnKeyUpNav,
                                style: `height:${this._getHeightCellule(lParams) - 2 * this._options.paddingCelluleTB}px;`,
                                "arial-label": !this._avecLigneCreationUnique ? ObjetWAI_1.GObjetWAI.getInfo(ObjetWAI_1.EGenreObjet.NouvelElement) + ' ' + ObjetWAI_1.GObjetWAI.getInfo(ObjetWAI_1.EGenreObjet.AvecEdition) : false
                            }, ((lNbColonnesVisible === 1)) ? _ObjetListe_1.ObjetListe.getTitreCreation(this._options.titreCreation) : '')));
                            if (lUneSeuleColonneCreation) {
                                return false;
                            }
                        }
                        return true;
                    }
                    );
                }
                ));
                return T.join('');
            }
            _composeCoche(aParams) {
                const lValeur = this.Donnees._getValeur(aParams);
                const lAvecEdition = this.Donnees.avecEdition(aParams);
                if (typeof (lValeur) === 'string' && lValeur !== '') {
                    return IE.jsx.str("div", {
                        role: "checkbox",
                        "aria-checked": "true",
                        "aria-label": GlossaireWAI_1.TradGlossaireWAI.Coche,
                        "aria-disabled": lAvecEdition ? false : 'true',
                        class: lValeur,
                        style: "width:18px; margin:0 auto;"
                    }, "\u00A0");
                }
                if (lValeur === true || lValeur === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte) {
                    return IE.jsx.str("i", {
                        role: "checkbox",
                        "aria-checked": "true",
                        "aria-label": GlossaireWAI_1.TradGlossaireWAI.Coche,
                        "aria-disabled": lAvecEdition ? false : 'true',
                        class: "Image_CocheVerte as-icon m-y-none m-x-top i-large"
                    });
                }
                if (lValeur === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Grise) {
                    return IE.jsx.str("i", {
                        role: "checkbox",
                        "aria-checked": "mixed",
                        "aria-label": GlossaireWAI_1.TradGlossaireWAI.CochePartiel,
                        "aria-disabled": lAvecEdition ? false : 'true',
                        class: "IconCocheGrise as-icon m-y-none m-x-top i-large"
                    });
                }
                if (!lValeur || lValeur === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Aucune) {
                    return IE.jsx.str("div", {
                        style: "width: 18px; height:16px; margin:0 auto;",
                        role: "checkbox",
                        "aria-checked": "false",
                        "aria-label": GlossaireWAI_1.TradGlossaireWAI.Decoche,
                        "aria-disabled": lAvecEdition ? false : 'true'
                    });
                }
                return '';
            }
            _composeContenu(aParamsCellule, aTypeValeur) {
                switch (aTypeValeur) {
                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Image:
                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Icon:
                    {
                        return this.composeIconEtImage(aParamsCellule, aTypeValeur === ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Icon);
                    }
                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche:
                    {
                        return {
                            html: IE.jsx.str("div", {
                                class: "AlignementMilieu",
                                style: "width: 100%;"
                            }, this._composeCoche(aParamsCellule)),
                            tooltip: this.Donnees.getTooltip(aParamsCellule)
                        };
                    }
                case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.CocheDeploiement:
                    {
                        const lEstDeploiement = this.Donnees.estUnDeploiement(aParamsCellule);
                        let lDeploye = false;
                        if (lEstDeploiement) {
                            lDeploye = this.Donnees._estDeploye(aParamsCellule.ligne);
                            aParamsCellule._estDeploiement = {
                                expanded: !!lDeploye
                            };
                        }
                        return {
                            html: lEstDeploiement ? IE.jsx.str("i", {
                                class: [lDeploye ? 'icon_fleche_num_bas' : 'icon_fleche_num', ObjetListe_css_1.StylesObjetListe.iconDeploiement],
                                role: "presentation",
                                "aria-label": ObjetTraduction_1.GTraductions.getValeur('liste.HintBoutonDeploiement')
                            }) : IE.jsx.str("div", {
                                style: "height:13px;"
                            }),
                            tooltip: lEstDeploiement ? ObjetTraduction_1.GTraductions.getValeur('liste.HintBoutonDeploiement') : ''
                        };
                    }
                }
                const lInfosContenu = {
                    html: '',
                    tooltip: ''
                };
                const H = [];
                const lParams = Object.assign(aParamsCellule, {
                    surEdition: false,
                    typeValeur: aTypeValeur
                });
                const lContenuAffichage = this.Donnees._getContenuAffichage(lParams);
                const lClassLigne = (this.Donnees.getClass(lParams) || '') + (lParams.avecContenuTronque ? ' Insecable' : '');
                let lStyle = this.Donnees.getStyle(lParams) || '';
                if (lStyle && lStyle.trim && lStyle.endsWith) {
                    lStyle = lStyle.trim();
                    if (!lStyle.endsWith(';')) {
                        lStyle += ';';
                    }
                }
                if (!this.Donnees.enConstruction_cacheRechercheTexte) {
                    if (lContenuAffichage.tooltip) {
                        if (lContenuAffichage.tooltip.startsWith) {
                            lInfosContenu.tooltip = lContenuAffichage.tooltip;
                        }
                    }
                    lInfosContenu.idsLabel = lContenuAffichage.idsLabel;
                }
                H.push(IE.jsx.str("div", {
                    style: lStyle + (lParams.taille > 0 ? ' width:' + lParams.taille + 'px;overflow:hidden;' : '') + '',
                    class: ['liste_contenu_ligne', lClassLigne ? lClassLigne : ''],
                    "ie-ellipsis": lContenuAffichage.attrOverflow === 'ie-ellipsis' || false
                }, lContenuAffichage.valeur));
                lInfosContenu.html = ObjetChaine_1.GChaine.avecEspaceSiVide(H.join(''));
                return lInfosContenu;
            }
            _composeContenuCellule(aParamsCellule, aLargeur) {
                const H = [];
                let lTaille = aLargeur;
                const lType = this.Donnees.getTypeValeur(aParamsCellule);
                let lHeightContenu = this.Donnees.getHauteurMinContenuCellule(aParamsCellule);
                if (!lHeightContenu) {
                    lHeightContenu = this._getHeightCellule(aParamsCellule) - 2 * this._options.paddingCelluleTB - 1;
                }
                const lStyle = `min-height:${lHeightContenu}px;`;
                let lAvecDeploiement = false;
                if (this._deploiementSurCellule(aParamsCellule) && lType !== ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.CocheDeploiement && this.Donnees.avecImageSurColonneDeploiement(aParamsCellule)) {
                    const lAvecEvent = !this.Donnees.avecEventDeploiementSurCellule(aParamsCellule);
                    const lEstDeploye = this.Donnees._estDeploye(aParamsCellule.ligne);
                    aParamsCellule._estDeploiement = {
                        expanded: !!lEstDeploye
                    };
                    H.push(IE.jsx.str("div", {
                        class: ['liste_contenu_cellule_deploiement', (lAvecEvent ? ' AvecMain' : '')],
                        style: lStyle,
                        "ie-node": (lAvecEvent ? this.jsxNodeDeploiementLigne.bind(this, aParamsCellule) : '')
                    }, IE.jsx.str("i", {
                        class: [lEstDeploye ? 'icon_fleche_num_bas' : 'icon_fleche_num', ObjetListe_css_1.StylesObjetListe.iconDeploiement],
                        role: "presentation",
                        "ie-tooltiplabel": ObjetTraduction_1.GTraductions.getValeur('liste.HintBoutonDeploiement')
                    })));
                    lTaille = lTaille - 13 - 2;
                    lAvecDeploiement = true;
                }
                const lInfosContenu = this._composeContenu(Object.assign(aParamsCellule, {
                    taille: lTaille,
                    avecContenuTronque: this.estDonneeListeTableau(this.Donnees) && this.Donnees.avecContenuTronque(aParamsCellule),
                    avecDeploiementDansCellule: lAvecDeploiement
                }), lType);
                H.push(IE.jsx.str("div", {
                    class: "liste_contenu_cellule_contenu",
                    style: ObjetStyle_1.GStyle.composeWidth(lTaille) + lStyle
                }, lInfosContenu.html));
                lInfosContenu.html = H.join('');
                return lInfosContenu;
            }
            _surPreResize() {
                this._cache.calculsTailleColonnesAFaire = true;
                if (!this._donneesRecus) {
                    return;
                }
                this.ScrollV.vider();
                if (this._cache.avecScrollHorizontal) {
                    this.ScrollH.vider();
                }
                this._enResize = ObjetHtml_1.GHtml.getDisplay(this.Nom);
                if (!this._enResize) {
                    return;
                }
                this._annulerCreation();
                this._finaliserEdition({
                    ignorerActualisation: true
                });
                this._nettoyerElementsEditionEnCours();
                clearTimeout(this._cache.rechercheTexte.timerSaisie);
                ObjetHtml_1.GHtml.setHtml(this.Nom, '&nbsp;', {
                    ignorerScroll: true
                });
            }
            _surPostResize() {
                if (!this._donneesRecus) {
                    return;
                }
                if (this._enResize && this.Actif) {
                    this._actualiser({
                        conserverSelection: true,
                        sansTriDonnees: true
                    });
                }
                delete this._enResize;
            }
            afficherMenuContextuelTri(aColonne, aEvent) {
                const lGetTri = (aNumeroTri) => {
                    let lGenreTri = this._triCourant.genre[aNumeroTri];
                    if (this._triCourant.colonne[aNumeroTri] === aColonne) {
                        lGenreTri = this._triCourant.genre[aNumeroTri] === Enumere_TriElement_1.EGenreTriElement.Croissant ? Enumere_TriElement_1.EGenreTriElement.Decroissant : Enumere_TriElement_1.EGenreTriElement.Croissant;
                    }
                    return lGenreTri;
                }
                ;
                if (this._triCourant.nombreTri > 1) {
                    ObjetMenuContextuel_1.ObjetMenuContextuel.afficher({
                        pere: this,
                        initCommandes: (aInstance) => {
                            for (let i = 0; i < this._triCourant.nombreTri; i++) {
                                aInstance.add(ObjetTraduction_1.GTraductions.getValeur('liste.tri') + ' ' + (i + 1), true, function(aNumeroTri) {
                                    this.setColonneTri(aColonne, lGetTri(aNumeroTri), aNumeroTri);
                                }
                                .bind(this, i), {
                                    imageFormate: true,
                                    image: IE.jsx.str("div", {
                                        style: "margin-left:auto; margin-right:auto; height:9px;",
                                        class: "AlignementMilieu"
                                    }, this._getDessinCurseurTri({
                                        tri: i === 0 ? _ObjetListe_1.NSListe.FlecheTri.principal : _ObjetListe_1.NSListe.FlecheTri.secondaire,
                                        triCroissant: lGetTri(i) === Enumere_TriElement_1.EGenreTriElement.Croissant,
                                        top: 1,
                                        left: 1
                                    }))
                                });
                            }
                        }
                        ,
                        id: aEvent
                    });
                }
            }
            _surDblClickCellule(aEvent) {
                const lInstance = aEvent.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                if (!lInfos) {
                    return;
                }
                const lParams = lInstance._getParamsCellule(lInfos.colonne, lInfos.ligne);
                if (lInstance.Donnees && (lParams.ligne > -1)) {
                    if (lInstance.Donnees.avecEvenementSelectionDblClick(lParams)) {
                        if (lInstance.Pere && lInstance.Evenement) {
                            lInstance.callback.appel(lInstance._getParamsCallback(Enumere_EvenementListe_1.EGenreEvenementListe.SelectionDblClick, lParams.colonne, lParams.ligne), Enumere_EvenementListe_1.EGenreEvenementListe.SelectionDblClick, lParams.colonne, lParams.ligne);
                        }
                    }
                }
            }
            _getHeightListeHorsContenu() {
                let lResult = ObjetPosition_1.GPosition.getHeight(this.ids.titre + '0') + (this._zoneContenuAvecTraitHaut() ? this._options.borduresContenu_top : 0) + this._options.borduresContenu_bottom;
                lResult += this._options.borduresContenu_top + this._options.borduresContenu_bottom;
                if (this._cache.avecScrollHorizontal && this._cache.reserverPlaceScrollHorizontal) {
                    lResult += this.ScrollH.Largeur;
                }
                if (this._options.piedDeListe && this._options.piedDeListe.height > 0) {
                    lResult += this._options.piedDeListe.height + 5;
                }
                if (this._avecLigneTotal()) {
                    lResult += $(ObjetHtml_1.GHtml.getElement(this.idTotaux + '0')).outerHeight(true);
                }
                $(`#${this.Nom.escapeJQ()} .liste_btnentete,\n #${this.Nom.escapeJQ()} .${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeTotaleFd}.${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeFooter},\n #${this.Nom.escapeJQ()} .${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeTotaleFd}.${ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.listeHeader}`).each(function() {
                    const lRect = ObjetPosition_1.GPosition.getClientRect(this);
                    lResult += Math.ceil(lRect.outerHeight);
                });
                return lResult;
            }
            _surMouseDownCellule(aEvent) {
                const lInstance = aEvent.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                delete lInstance._cache.infosMouseDownCellule_apresFinEdition;
                if (!lInfos) {
                    return;
                }
                lInstance._surEventDownLigne({
                    event: aEvent,
                    ligne: lInfos.ligne,
                    colonne: lInfos.colonne,
                    gestionShift: true,
                    gestionMultiSelection: true
                });
            }
            _surMouseUpCellule(aEvent) {
                const lInstance = aEvent.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                const lInfosMouseDown_afe = lInstance._cache.infosMouseDownCellule_apresFinEdition;
                delete lInstance._cache.infosMouseDownCellule_apresFinEdition;
                if (lInstance._estEventSansSelect(aEvent)) {
                    return;
                }
                $(this).find('>article').focus();
                if (!lInfos) {
                    return;
                }
                if (lInfos && lInfosMouseDown_afe && lInfosMouseDown_afe.ligne === lInfos.ligne && lInfosMouseDown_afe.colonne === lInfos.colonne) {
                    lInstance._editionDebSurSelection(lInfos.colonne, lInfos.ligne, aEvent);
                }
            }
            _surContextMenuCellule(aEvent) {
                const lInstance = aEvent.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                if (aEvent.originalEvent) {
                    aEvent.originalEvent.__contextMenuSurContenu__ = true;
                }
                if (!lInfos || !lInstance.Donnees) {
                    return;
                }
                const lParams = lInstance._getParamsCellule(lInfos.colonne, lInfos.ligne, {
                    event: aEvent
                });
                if (lInstance.Donnees.avecMenuContextuel(lParams) && (lInstance.Donnees.options.avecContextMenuSansSelection || lInstance._etatSelectionCellule({
                    ligne: lParams.ligne,
                    colonne: lParams.colonne
                })) && (!UtilitaireMenuContextuelNatif_1.UtilitaireMenuContextuelNatif.accepter(aEvent))) {
                    lInstance._ouvrirMenuContextuel(lParams);
                }
            }
            _getBlocDeNumeroColonne(aNumeroColonne) {
                let lInfosBloc = null;
                for (let lIndiceBloc = 0; lIndiceBloc < this._cache.infosZonesColonnes.length; lIndiceBloc++) {
                    lInfosBloc = this._cache.infosZonesColonnes[lIndiceBloc];
                    if (aNumeroColonne >= lInfosBloc.indiceColonneDebut && aNumeroColonne <= lInfosBloc.indiceColonneFin) {
                        break;
                    }
                }
                return lInfosBloc;
            }
            _afficherRollover(aElement, aLigneColonne) {
                let lPosGabaritColonne = null;
                let lNumeroColonne = aLigneColonne.colonne;
                const lInfosBloc = this._getBlocDeNumeroColonne(aLigneColonne.colonne);
                if (!lInfosBloc) {
                    return;
                }
                while (!lPosGabaritColonne && lNumeroColonne >= lInfosBloc.indiceColonneDebut) {
                    lPosGabaritColonne = lInfosBloc.gabaritColonnesTitre[lNumeroColonne];
                    if (!lPosGabaritColonne) {
                        lNumeroColonne += -1;
                    }
                }
                if (!lPosGabaritColonne) {
                    return;
                }
                const lPosition = ObjetPosition_1.GPosition.getRect(aElement);
                let lWidth = lPosGabaritColonne.width + 1;
                let lWidthBloc;
                const lHeight = lPosition.height;
                let lLeftBloc;
                const lTop = lPosition.top + this.ScrollV.Position;
                const lEstPremiereLigne = aLigneColonne.ligne === this._cache.lignesVisibles[0];
                const lEstPremiereColonne = lInfosBloc.indiceBloc === 0 && lInfosBloc.colonnesVisibles[0] === lNumeroColonne;
                const lEcartColonne = lEstPremiereColonne ? 1 : 0;
                const lEcartLigne = 0;
                let lForcerAffichageBlocPrec;
                let lEstBlocCourant;
                if (lInfosBloc.dernierBloc && lInfosBloc.indiceColonneFin === lNumeroColonne && this._cache.infosZonesColonnes.length > 1) {
                    lWidth += 1;
                }
                for (let lIBloc = 0; lIBloc <= lInfosBloc.indiceBloc; lIBloc++) {
                    lForcerAffichageBlocPrec = lInfosBloc.indiceBloc > 0 && lNumeroColonne === lInfosBloc.indiceColonneDebut && lIBloc === lInfosBloc.indiceBloc - 1;
                    lEstBlocCourant = lIBloc === lInfosBloc.indiceBloc;
                    lLeftBloc = lEstBlocCourant ? lPosGabaritColonne.left - 1 + lEcartColonne : this._cache.infosZonesColonnes[lIBloc].largeurBloc - 1;
                    lWidthBloc = lEstBlocCourant ? lWidth - lEcartColonne : 1;
                    if (lEstBlocCourant || lForcerAffichageBlocPrec) {
                        $('#' + this.ids.rolloverTitre.escapeJQ() + lIBloc).show().css({
                            left: lLeftBloc,
                            width: lWidthBloc
                        });
                    } else {
                        $('#' + this.ids.rolloverTitre.escapeJQ() + lIBloc).hide();
                    }
                    if (lEstPremiereColonne) {
                        $('#' + this.ids.rolloverContenuLigne.escapeJQ() + lIBloc).hide();
                    } else {
                        $('#' + this.ids.rolloverContenuLigne.escapeJQ() + lIBloc).show().css({
                            top: lTop - 1 + lEcartLigne,
                            height: lHeight + 1 - lEcartLigne,
                            width: (lIBloc === 0 && lInfosBloc.indiceBloc > 0 ? this._cache.infosZonesColonnes[lIBloc].largeurBloc + 2 : lLeftBloc) + (lInfosBloc.indiceBloc > 0 ? 1 : 0)
                        });
                    }
                    if (!lEstPremiereLigne && (lEstBlocCourant || lForcerAffichageBlocPrec)) {
                        $('#' + this.ids.rolloverContenuColonne.escapeJQ() + lIBloc).show().css({
                            left: lLeftBloc,
                            height: lTop,
                            width: lWidthBloc
                        });
                    } else {
                        $('#' + this.ids.rolloverContenuColonne.escapeJQ() + lIBloc).hide();
                    }
                    if (lEstBlocCourant || lForcerAffichageBlocPrec) {
                        $('#' + this.ids.rolloverContenuCellule.escapeJQ() + lIBloc).show().css({
                            left: lLeftBloc,
                            top: lTop - 1 + lEcartLigne,
                            height: lHeight + 1 - lEcartLigne,
                            width: lWidthBloc
                        });
                    } else {
                        $('#' + this.ids.rolloverContenuCellule.escapeJQ() + lIBloc).hide();
                    }
                }
                if (!lInfosBloc.dernierBloc && !lInfosBloc.estBlocFixe && lNumeroColonne === lInfosBloc.indiceColonneFin) {
                    const lIndiceBloc = lInfosBloc.indiceBloc + 1;
                    $('#' + this.ids.rolloverTitre.escapeJQ() + lIndiceBloc).show().css({
                        left: -1,
                        width: 0
                    });
                    $('#' + this.ids.rolloverContenuColonne.escapeJQ() + lIndiceBloc).show().css({
                        left: -1,
                        height: lTop,
                        width: 0
                    });
                    $('#' + this.ids.rolloverContenuCellule.escapeJQ() + lIndiceBloc).show().css({
                        left: -1,
                        top: lTop - 1 + lEcartLigne,
                        height: lHeight + 1 - lEcartLigne,
                        width: 0
                    });
                }
                return true;
            }
            _gererRollover(aAfficher, aElement, aLigneColonne) {
                if (aAfficher && this._avecRollover() && aElement && aLigneColonne && this._afficherRollover(aElement, aLigneColonne)) {
                    this._cache.rolloverVisible = true;
                } else if (this._cache.rolloverVisible) {
                    this._cache.rolloverVisible = false;
                    this._cache.infosZonesColonnes.forEach( (aBloc) => {
                        $('#' + this.ids.rolloverTitre.escapeJQ() + aBloc.indiceBloc).hide();
                        $('#' + this.ids.rolloverContenuLigne.escapeJQ() + aBloc.indiceBloc).hide();
                        $('#' + this.ids.rolloverContenuColonne.escapeJQ() + aBloc.indiceBloc).hide();
                        $('#' + this.ids.rolloverContenuCellule.escapeJQ() + aBloc.indiceBloc).hide();
                    }
                    );
                }
            }
            _parcourirCellulesVoileBleu(aParamsCellule, aFunc) {
                this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                    this._cache.lignesVisibles.forEach( (aLigne) => {
                        aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                            const lParamsCelluleCible = this._getParamsCellule(aNumeroColonne, aLigne);
                            if (this.Donnees.estConcerneParSurvolCelluleVisible(lParamsCelluleCible, aParamsCellule)) {
                                const lNode = ObjetHtml_1.GHtml.getElement(this.getIdCellule(aNumeroColonne, aLigne));
                                if (lNode) {
                                    aFunc(lNode);
                                }
                            }
                        }
                        );
                    }
                    );
                }
                );
            }
            _gererHoverSurCellule(aNode, aInfos, aEvent) {
                if (ObjetNavigateur_1.Navigateur.isTactile) {
                    return;
                }
                const lJNodeOrigine = $(aNode);
                const lParamsCellule = this._getParamsCellule(aInfos.colonne, aInfos.ligne);
                if (!(aEvent.ctrlKey && this._avecRollover()) && this.Donnees && this.Donnees.avecSurvolCelluleVisible(lParamsCellule)) {
                    this._parcourirCellulesVoileBleu(lParamsCellule, (aNode) => {
                        $(aNode).addClass('voileBleuCellule');
                        lJNodeOrigine.one('mouseleave', () => {
                            $(aNode).removeClass('voileBleuCellule');
                        }
                        );
                    }
                    );
                }
                if (this.Donnees && this.Donnees.avecDessinHover(lParamsCellule)) {
                    let lAvecElementHaut = false;
                    let lAvecElementBas = false;
                    let lAvecDessinHover = false;
                    const lClassDessinHover = 'dessinHoverListe';
                    this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                        const lNodeZone = ObjetHtml_1.GHtml.getElement(ObjetHtml_1.GHtml.getElement(this.ids.contenu + aInfosZoneColonnes.indiceBloc));
                        const lViewHeight = $(lNodeZone).height();
                        this._cache.lignesVisibles.forEach( (aLigne) => {
                            aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                                const lParamsCelluleCible = this._getParamsCellule(aNumeroColonne, aLigne);
                                if (this.Donnees.estConcerneParDessinHover(lParamsCelluleCible, lParamsCellule)) {
                                    let lDirection;
                                    const lNode = ObjetHtml_1.GHtml.getElement(this.getIdCellule(aNumeroColonne, aLigne));
                                    if (lNode) {
                                        lDirection = ObjetDonneesListe_1.ObjetDonneesListe.TypeDirectionElementSurvolCellule.droite;
                                        if (lParamsCelluleCible.colonne < lParamsCellule.colonne) {
                                            lDirection = ObjetDonneesListe_1.ObjetDonneesListe.TypeDirectionElementSurvolCellule.gauche;
                                        }
                                        const lJNode = $(lNode);
                                        const lPosition = lJNode.position();
                                        const lHeightCellule = lJNode.height();
                                        if (lPosition.top + lHeightCellule / 2 < 0) {
                                            lDirection = ObjetDonneesListe_1.ObjetDonneesListe.TypeDirectionElementSurvolCellule.haut;
                                        } else if (lPosition.top + lHeightCellule / 2 > lViewHeight) {
                                            lDirection = ObjetDonneesListe_1.ObjetDonneesListe.TypeDirectionElementSurvolCellule.bas;
                                        }
                                    } else {
                                        if (aLigne < aInfos.ligne) {
                                            lDirection = ObjetDonneesListe_1.ObjetDonneesListe.TypeDirectionElementSurvolCellule.haut;
                                        } else if (aLigne > aInfos.ligne) {
                                            lDirection = ObjetDonneesListe_1.ObjetDonneesListe.TypeDirectionElementSurvolCellule.bas;
                                        } else {
                                            return;
                                        }
                                    }
                                    let lConteneur = null;
                                    switch (lDirection) {
                                    case ObjetDonneesListe_1.ObjetDonneesListe.TypeDirectionElementSurvolCellule.haut:
                                        if (!lAvecElementHaut) {
                                            lConteneur = lNodeZone;
                                            lAvecElementHaut = true;
                                        }
                                        break;
                                    case ObjetDonneesListe_1.ObjetDonneesListe.TypeDirectionElementSurvolCellule.bas:
                                        if (!lAvecElementBas) {
                                            lConteneur = lNodeZone;
                                            lAvecElementBas = true;
                                        }
                                        break;
                                    default:
                                        lConteneur = lNode;
                                    }
                                    if (lConteneur !== null) {
                                        lParamsCelluleCible.node = lConteneur;
                                        lParamsCelluleCible.direction = lDirection;
                                        lParamsCelluleCible.classHover = lClassDessinHover;
                                        ObjetHtml_1.GHtml.addHtml(lConteneur, this.Donnees.construireHtmlHover(lParamsCelluleCible));
                                        lAvecDessinHover = true;
                                    }
                                }
                            }
                            );
                        }
                        );
                    }
                    );
                    if (lAvecDessinHover) {
                        const lNom = this.Nom.escapeJQ();
                        lJNodeOrigine.one('mouseleave', () => {
                            $('#' + lNom + ' .' + lClassDessinHover).remove();
                        }
                        );
                    }
                }
            }
            _surMouseEnterOverCellule(aEvent) {
                const lInstance = aEvent.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                if (!lInfos || !lInstance.Donnees) {
                    return;
                }
                if (aEvent.type === 'mouseenter') {
                    lInstance._gererHoverSurCellule(this, lInfos, aEvent);
                }
                lInstance._gererRollover(aEvent.ctrlKey && aEvent.type === 'mouseover', this, lInfos);
            }
            _surClickCellule(aEvent) {
                const lInstance = aEvent.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                if (!lInfos) {
                    return;
                }
                if (lInstance._estEventSansSelect(aEvent)) {
                    return;
                }
                lInstance._editionDebSurSelection(lInfos.colonne, lInfos.ligne, aEvent);
                if (lInstance.Donnees && lInstance.estDonneeListeFlatDesign(lInstance.Donnees) && lInstance.Donnees.options.avecCocheCBSurLigne) {
                    const lParamsCellule = lInstance._getParamsCellule(lInfos.colonne, lInfos.ligne);
                    if (lInstance.Donnees.avecCB(lParamsCellule)) {
                        lInstance._modifierCBLigneFlatDesign(lParamsCellule);
                    }
                }
            }
            _surKeyDownCellule(event) {
                const lInstance = event.data.instance;
                const lInfos = lInstance._extraireInfosId(this.id);
                if (!lInfos) {
                    return;
                }
                if (!lInstance._cache.creationEnCours && !lInstance._cache.editionEnCours && event.ctrlKey && !event.shiftKey) {
                    const lCar = String.fromCharCode(event.which).toLowerCase();
                    if (lCar === 'c') {
                        lInstance._copierCellule(lInstance._getParamsCellule(lInfos.colonne, lInfos.ligne));
                    } else if (lCar === 'v') {
                        lInstance._collerCellule(lInstance._getParamsCellule(lInfos.colonne, lInfos.ligne));
                    }
                }
            }
            _copierCellule(aParamsCellule) {
                if (this.Donnees && aParamsCellule && this.Donnees.surCopier(aParamsCellule)) {
                    this._cache.infosZonesColonnes.forEach( (aInfosZoneColonnes) => {
                        this._cache.lignesVisibles.forEach( (aLigne) => {
                            aInfosZoneColonnes.colonnesVisibles.forEach( (aNumeroColonne) => {
                                const lParamsCelluleCible = this._getParamsCellule(aNumeroColonne, aLigne);
                                const lNode = ObjetHtml_1.GHtml.getElement(this.getIdCellule(aNumeroColonne, aLigne));
                                if (lNode) {
                                    const lJNodeSVG = $(lNode).find('.copySVG');
                                    if (this.Donnees.estCelluleCopie(lParamsCelluleCible)) {
                                        if (lJNodeSVG.length === 0) {
                                            ObjetHtml_1.GHtml.addHtml(lNode, this._construireCopySVG());
                                        }
                                    } else if (lJNodeSVG.length > 0) {
                                        lJNodeSVG.remove();
                                    }
                                }
                            }
                            );
                        }
                        );
                    }
                    );
                }
            }
            _collerCellule(aParamsCellule) {
                if (this.Donnees && aParamsCellule) {
                    this.Donnees.surColler(aParamsCellule);
                }
            }
            _getLargeurConteneur() {
                this._cache.reserverPlaceScrollHorizontal = false;
                let lLargeur = this._cache.largeurTotalCalcule + this._getDiffLargeurContenu();
                if (this._cache.avecScrollHorizontal) {
                    this._cache.reserverPlaceScrollHorizontal = this._options.avecReservationPlaceScrollHorizontal || lLargeur > this._cache.largeurPage;
                    lLargeur = Math.max(this._cache.largeurBlocFixe, Math.min(lLargeur, this._cache.largeurPage));
                }
                return lLargeur;
            }
            getClassCreation() {
                return 'FondBlanc';
            }
            _zoneContenuAvecTraitHaut() {
                return !(this.ListeTitres && !this._avecLigneCreationTitreEnLigne());
            }
            _surDeplacementScroll() {
                if (!this._cache.timeout_ignorerScrollSortieEdition) {
                    if (this._cache.finEditionCreation) {
                        if (!this._cache.finEditionCreation.estCreation) {
                            this._cache.finEditionCreation();
                        }
                    } else {
                        this._nettoyerElementsEditionEnCours();
                    }
                } else {
                    const lJSurligneur = $('#' + this.ids.surligneur_edition.escapeJQ());
                    if (lJSurligneur.length > 0) {
                        const lData = lJSurligneur.data('positionnement');
                        if (lData && lData.func) {
                            lData.func();
                        }
                    }
                }
                $(`#${this.Nom.escapeJQ()} .liste_dragInsertion`).remove();
            }
            _evenementScrollV(aGenre, aScrollTop) {
                switch (aGenre) {
                case ObjetScroll_3.EGenreScrollEvenement.Deplacement:
                    this._surDeplacementScroll();
                    return aScrollTop;
                case ObjetScroll_3.EGenreScrollEvenement.TailleZone:
                    {
                        const lHeightListeHorsContenu = this._getHeightListeHorsContenu();
                        if (this._hauteurAdapteAuContenu()) {
                            aScrollTop = $(ObjetHtml_1.GHtml.getElement(this.ScrollV.getIdContenu(EGenreZoneScroll.contenu))).outerHeight();
                            let lHeightMaxListe = null;
                            if (MethodesObjet_1.MethodesObjet.isFunction(this._options.getHauteurMaxAdapteListe)) {
                                lHeightMaxListe = this._options.getHauteurMaxAdapteListe(this.Nom);
                            }
                            if (MethodesObjet_1.MethodesObjet.isNumber(lHeightMaxListe)) {
                                aScrollTop = Math.min(aScrollTop, lHeightMaxListe - lHeightListeHorsContenu);
                            } else if (this._options.hauteurMaxAdapteContenu > 0 && MethodesObjet_1.MethodesObjet.isNumber(this._options.hauteurMaxAdapteContenu)) {
                                aScrollTop = Math.min(aScrollTop, this._options.hauteurMaxAdapteContenu);
                            } else if (this._options.hauteurAdapteContenu !== Infinity && this._cache.heightConteneur > 0 && !this._options.hauteurMaxAdapteContenu) {
                                aScrollTop = Math.min(aScrollTop, this._cache.heightConteneur - lHeightListeHorsContenu);
                            }
                        } else {
                            aScrollTop = this._cache.heightConteneur - lHeightListeHorsContenu;
                        }
                        if (this._options.hauteurZoneContenuListeMin === -1) {
                            if (this._cache.lignesVisibles.length > 0) {
                                aScrollTop = Math.max(aScrollTop, $('#' + this.getIdCellule(0, 0).escapeJQ()).outerHeight());
                            }
                        } else {
                            aScrollTop = Math.max(aScrollTop, this._options.hauteurZoneContenuListeMin);
                        }
                        return Math.ceil(aScrollTop);
                    }
                case ObjetScroll_3.EGenreScrollEvenement.TailleContenu:
                    if (!this._hauteurAdapteAuContenu()) {
                        const lHauteurContenu = ObjetPosition_1.GPosition.getHeight(this.ScrollV.getIdContenu(EGenreZoneScroll.contenu));
                        if (this.ScrollV.TailleZone > lHauteurContenu) {
                            aScrollTop = this.ScrollV.TailleZone;
                        } else {
                            aScrollTop = lHauteurContenu - 1;
                        }
                    }
                    return Math.ceil(aScrollTop);
                case ObjetScroll_3.EGenreScrollEvenement.TailleScroll:
                    return Math.ceil(Math.max(this.ScrollV.tailleMin, this.ScrollV.TailleZone + ObjetPosition_1.GPosition.getHeight(this.ScrollV.getIdZone(EGenreZoneScroll.titre)) + 1 - (this._avecBoutonsListeHautScroll() ? (this._options.tailleBoutons + 1) * this._cache.boutons.length : 0) - this._options.borduresContenu_bottom));
                }
            }
            _getLargeurMaxZone() {
                return this._cache.largeurPage - this._getDiffLargeurContenu();
            }
            _evenementScrollH(aGenre, aScrollLeft) {
                switch (aGenre) {
                case ObjetScroll_3.EGenreScrollEvenement.Deplacement:
                    this._surDeplacementScroll();
                    return aScrollLeft;
                case ObjetScroll_3.EGenreScrollEvenement.TailleContenu:
                    return aScrollLeft;
                case ObjetScroll_3.EGenreScrollEvenement.TailleZone:
                    {
                        let lTaille = this._cache.largeurTotalCalcule;
                        const lTailleMax = this._getLargeurMaxZone();
                        let lInc;
                        if (lTaille > lTailleMax) {
                            if (this._options.scrollHorizontalSurLargeurComplete) {
                                lTaille = lTailleMax - this._cache.largeurBlocFixe;
                            } else {
                                lTaille = 0;
                                this._cache.infosZonesColonnes.forEach( (aInfos) => {
                                    if (aInfos.estBlocFixe) {
                                        return;
                                    }
                                    aInfos.colonnesVisibles.every( (aNumeroColonne) => {
                                        lInc = this._cache.taillesColonne[aNumeroColonne].px + 2 * this._options.paddingCelluleLR + 1;
                                        if (lTaille + lInc > lTailleMax - this._cache.largeurBlocFixe) {
                                            return false;
                                        }
                                        lTaille += lInc;
                                        return true;
                                    }
                                    );
                                }
                                );
                                if (lTaille === 0) {
                                    lTaille = lTailleMax - this._cache.largeurBlocFixe;
                                } else {
                                    lTaille -= 1;
                                }
                            }
                        }
                        return Math.max(lTaille, this._options.largeurZoneContenuListeMin);
                    }
                }
            }
            _avecRollover() {
                return !!(this._options.avecRollover && ObjetSupport_1.Support.supportPointerEventsNone && this.ListeTitres);
            }
            _initParseur() {
                uParseur = '';
                clearTimeout(uTimerParseur);
            }
            _evenementFenetreDate(aParams, aGenreBouton, aDate) {
                if (aGenreBouton === -1) {
                    if (aParams.ligne === null || aParams.ligne === undefined) {
                        this.surCreationFin(-1);
                    } else {
                        this._surEditionFin({
                            colonne: aParams.colonne,
                            ligne: aParams.ligne
                        });
                    }
                } else {
                    const lValeur = aGenreBouton === 1 ? this.Donnees.getChaineDeDate(aDate, aParams) : null;
                    if (aParams.ligne === null || aParams.ligne === undefined) {
                        this._surCreation(lValeur);
                    } else {
                        this._surEdition(aParams, lValeur, true);
                    }
                }
            }
            getIdGridFocus(aIndiceBloc) {
                return `${this.Nom}_grid_${aIndiceBloc}`;
            }
            _nettoyerElementsEditionEnCours() {
                super._nettoyerElementsEditionEnCours();
                if (this.fenetreDate) {
                    this.fenetreDate.fermer();
                    delete this.fenetreDate;
                }
            }
            _getLargeurScrollV() {
                return this.ScrollV ? this.ScrollV.Largeur : 0;
            }
            navigationClavierGridTotal(aEvent) {
                var _a, _b, _c, _d, _e, _f;
                if (this._estToucheNavigationFlechesClavier(aEvent)) {
                    aEvent.stopPropagation();
                    const lNav = this._cache.gridTotalAccess.nav;
                    const lNavLigneCorrige = Math.max(0, lNav.ligne);
                    const lOrdres = this._cache.gridTotalAccess.ordres;
                    switch (aEvent.which) {
                    case ToucheClavier_1.ToucheClavier.FlecheGauche:
                        {
                            const lCols = lOrdres[lNavLigneCorrige];
                            if (lCols) {
                                const lIndice = lCols.indexOf(lNav.colonne);
                                if (lIndice > 0) {
                                    (_a = ObjetHtml_1.GHtml.getElement(this.getIdCelluleTotal(lCols[lIndice - 1], lNav.ligne, true))) === null || _a === void 0 ? void 0 : _a.focus();
                                }
                            }
                            break;
                        }
                    case ToucheClavier_1.ToucheClavier.FlecheDroite:
                        {
                            const lCols = lOrdres[lNavLigneCorrige];
                            if (lCols) {
                                let lIndice = lCols.indexOf(lNav.colonne);
                                let lTrouve = false;
                                while (lIndice >= 0 && lIndice < lCols.length - 1 && !lTrouve) {
                                    lIndice += 1;
                                    if (lCols[lIndice] > lNav.colonne) {
                                        (_b = ObjetHtml_1.GHtml.getElement(this.getIdCelluleTotal(lCols[lIndice], lNav.ligne, true))) === null || _b === void 0 ? void 0 : _b.focus();
                                        lTrouve = true;
                                    }
                                }
                            }
                            break;
                        }
                    case ToucheClavier_1.ToucheClavier.FlecheBas:
                        {
                            const lCols = lOrdres[lNavLigneCorrige];
                            if (lNavLigneCorrige < lOrdres.length - 1) {
                                let lIndiceCol = lCols.indexOf(lNav.colonne);
                                const lColsSuiv = lOrdres[lNavLigneCorrige + 1];
                                lIndiceCol = Math.min(lIndiceCol, lColsSuiv.length - 1);
                                (_c = ObjetHtml_1.GHtml.getElement(this.getIdCelluleTotal(lColsSuiv[lIndiceCol], lNavLigneCorrige + 1, true))) === null || _c === void 0 ? void 0 : _c.focus();
                            }
                            break;
                        }
                    case ToucheClavier_1.ToucheClavier.FlecheHaut:
                        {
                            const lCols = lOrdres[lNavLigneCorrige];
                            if (lNavLigneCorrige > 0) {
                                let lIndiceCol = lCols.indexOf(lNav.colonne);
                                const lColsPrec = lOrdres[lNavLigneCorrige - 1];
                                lIndiceCol = Math.min(lIndiceCol, lColsPrec.length - 1);
                                (_d = ObjetHtml_1.GHtml.getElement(this.getIdCelluleTotal(lColsPrec[lIndiceCol], lNavLigneCorrige - 1, true))) === null || _d === void 0 ? void 0 : _d.focus();
                            }
                            break;
                        }
                    case ToucheClavier_1.ToucheClavier.Debut:
                        {
                            const lCols = lOrdres[lNavLigneCorrige];
                            if (lCols) {
                                let lIndiceCol = lCols.indexOf(lNav.colonne);
                                let lLigne = lNav.ligne;
                                if (aEvent.ctrlKey) {
                                    const lColsDebut = lOrdres[0];
                                    lLigne = 0;
                                    lIndiceCol = Math.min(lIndiceCol, lColsDebut.length - 1);
                                } else {
                                    lIndiceCol = 0;
                                }
                                if (lIndiceCol >= 0) {
                                    (_e = ObjetHtml_1.GHtml.getElement(this.getIdCelluleTotal(lCols[lIndiceCol], lLigne, true))) === null || _e === void 0 ? void 0 : _e.focus();
                                    aEvent.preventDefault();
                                }
                            }
                            break;
                        }
                    case ToucheClavier_1.ToucheClavier.Fin:
                        {
                            const lCols = lOrdres[lNavLigneCorrige];
                            if (lCols) {
                                let lIndiceCol = lCols.indexOf(lNav.colonne);
                                let lLigne = lNav.ligne;
                                if (aEvent.ctrlKey) {
                                    lLigne = lOrdres.length - 1;
                                    const lColsFin = lOrdres[lLigne];
                                    lIndiceCol = Math.min(lIndiceCol, lColsFin.length - 1);
                                } else {
                                    lIndiceCol = lCols.length - 1;
                                }
                                if (lIndiceCol < lCols.length) {
                                    (_f = ObjetHtml_1.GHtml.getElement(this.getIdCelluleTotal(lCols[lIndiceCol], lLigne, true))) === null || _f === void 0 ? void 0 : _f.focus();
                                    aEvent.preventDefault();
                                }
                            }
                            break;
                        }
                    }
                }
            }
            jsxGetNodeScrollContenuParent(aInstance, aNode) {
                $(aNode).on({
                    contextmenu: function(event) {
                        if (event.originalEvent && '__contextMenuSurContenu__'in event.originalEvent && event.originalEvent.__contextMenuSurContenu__) {
                            return;
                        }
                        const lParams = aInstance._getParamsCellule(null, -2, {
                            surFondListe: true
                        });
                        if (aInstance.Donnees.avecMenuContextuel(lParams) && (!UtilitaireMenuContextuelNatif_1.UtilitaireMenuContextuelNatif.accepter(event))) {
                            aInstance._ouvrirMenuContextuel(lParams);
                        }
                    }
                });
            }
            jsxGetNodeScrollContenu(aInstance, aNode) {
                const lEventMapCelluleTd = {
                    mousedown: aInstance._surMouseDownCellule,
                    mouseup: aInstance._surMouseUpCellule,
                    click: aInstance._surClickCellule,
                    dblclick: aInstance._surDblClickCellule,
                    keyup: aInstance._surKeyUpCellulePere,
                    keydown: aInstance._surKeyDownCellule,
                    contextmenu: aInstance._surContextMenuCellule,
                    mouseenter: aInstance._surMouseEnterOverCellule,
                    mouseover: aInstance._surMouseEnterOverCellule
                };
                Object.assign(lEventMapCelluleTd, this.getEventMapCelluleFocusable());
                const lData = {
                    instance: aInstance
                };
                $(aNode).on(lEventMapCelluleTd, 'div.liste_celluleGrid:not(:has(.Liste_Input_Texte))', lData).on('mouseleave', () => {
                    aInstance._gererRollover(false);
                }
                );
            }
            jsxGetNodeTableTitre(aIndiceBloc, aNode) {
                const lThis = this;
                if (this._cache.infosZonesColonnes.length > 1) {
                    $(aNode).find('.liste_titreGabLigne').each(function(aIndexLigne) {
                        if (!lThis._cache.heightLigneTitre) {
                            lThis._cache.heightLigneTitre = {};
                        }
                        if (!lThis._cache.heightLigneTitre[aIndexLigne]) {
                            lThis._cache.heightLigneTitre[aIndexLigne] = {
                                min: Number.MAX_VALUE,
                                max: -1
                            };
                        }
                        const lInfosLigne = lThis._cache.heightLigneTitre[aIndexLigne];
                        const lHeight = $(this).height();
                        lInfosLigne[aIndiceBloc] = lHeight;
                        lInfosLigne.min = Math.min(lHeight, lInfosLigne.min);
                        lInfosLigne.max = Math.max(lHeight, lInfosLigne.max);
                    });
                }
            }
            jsxGetNodeAfterTableTitre(aIndiceBloc, aNode) {
                const lThis = this;
                if (this._cache.heightLigneTitre) {
                    $(aNode).find('.liste_titreGabLigne').each(function(aIndexLigne) {
                        const lInfosLigne = lThis._cache.heightLigneTitre[aIndexLigne];
                        if (lInfosLigne && lInfosLigne[aIndiceBloc] < lInfosLigne.max) {
                            $(this).height(lInfosLigne.max);
                        }
                    });
                }
                const lInfos = this._cache.infosZonesColonnes[aIndiceBloc];
                if (this._cache.colonnesTri) {
                    this._nodeTableTitrePourTri(aNode, lInfos);
                }
            }
            jsxGetNodeAfterCurseurTri(aNumeroColonne, aNumeroTri, aIndiceBloc, aNode) {
                const lInfos = this._cache.infosZonesColonnes[aIndiceBloc];
                this._positionnerCurseurTri(lInfos, aNode, aNumeroColonne);
                const lTriActif = aNumeroTri >= 0;
                const lThis = this;
                if (lTriActif) {
                    $(aNode).on({
                        contextmenu: function(aEvent) {
                            lThis.afficherMenuContextuelTri(lThis._triCourant.colonne[aNumeroTri], aEvent);
                        }
                    });
                } else {
                    $(aNode).on({
                        focus() {
                            $(this).removeClass(Divers_css_1.StylesDivers.srOnly);
                        },
                        blur() {
                            $(this).addClass(Divers_css_1.StylesDivers.srOnly);
                        }
                    });
                }
                $(aNode).eventValidation(function(aEvent) {
                    if ($(this).data('dragEnCours')) {
                        return;
                    }
                    if (aNumeroTri >= 0 && lThis._triCourant.nombreTri > 1 && aEvent.type === 'keyup') {
                        lThis.afficherMenuContextuelTri(lThis._triCourant.colonne[aNumeroTri], aEvent);
                    } else {
                        const lGenreTri = lTriActif && lThis._triCourant.genre[aNumeroTri] === Enumere_TriElement_1.EGenreTriElement.Croissant ? Enumere_TriElement_1.EGenreTriElement.Decroissant : Enumere_TriElement_1.EGenreTriElement.Croissant;
                        lThis._setColonneTri(aNumeroColonne, lGenreTri, lTriActif ? aNumeroTri : 0);
                    }
                });
            }
            jsxDragCurseurTriDraggable(aColonne, aNumeroTri, aIndiceBloc, aNode) {
                const lIdCurseurTriSurvol = `#${this.getIdBtnTri(aIndiceBloc, aColonne).escapeJQ()}.flecheSurvol_${aIndiceBloc}`;
                const lThis = this;
                return {
                    start(aParamsDrag) {
                        $(aParamsDrag.node).data('dragEnCours', true);
                        $(lIdCurseurTriSurvol).data('dragEnCours', true);
                    },
                    drag(aParamsDrag) {
                        const lNumeroColonne = lThis._getColonneDePositionLeft(aParamsDrag.pos.x, ObjetHtml_1.GHtml.getElement(lThis.ScrollH.getIdContenu(EGenreZoneScroll.tri)), lThis._cache.infosZonesColonnes[aIndiceBloc]);
                        aParamsDrag.numeroColonneTri = lNumeroColonne;
                        const lRectContainer = ObjetPosition_1.GPosition.getClientRect(ObjetHtml_1.GHtml.getElement(lThis.ScrollH.getIdZone(EGenreZoneScroll.tri)));
                        let lLeft = aParamsDrag.pos.x - lRectContainer.left - aParamsDrag.rect.width / 2;
                        lLeft = Math.max(lLeft, 0);
                        lLeft = Math.min(lLeft, lRectContainer.width - aParamsDrag.rect.width);
                        $(aParamsDrag.node).css({
                            left: lLeft
                        });
                    },
                    stop(aParamsDrag) {
                        $(aParamsDrag.node).data('dragEnCours', null);
                        $(lIdCurseurTriSurvol).data('dragEnCours', null);
                        if (aParamsDrag.numeroColonneTri < 0 || !lThis._cache.colonnesTri[aParamsDrag.numeroColonneTri]) {
                            return;
                        }
                        lThis._setColonneTri(aParamsDrag.numeroColonneTri, lThis._triCourant.genre[aNumeroTri], aNumeroTri);
                    }
                };
            }
            jsxDragFantomeCellule(aLigne, aColonne) {
                const lThis = this;
                return {
                    getIdZone() {
                        return lThis.idZone;
                    },
                    start(aParamsDrag) {
                        if (lThis._cache.finEditionCreation) {
                            lThis._cache.finEditionCreation();
                            return false;
                        }
                        const lParamsCellule = lThis._getParamsCellule(aColonne, aLigne, {
                            draggable: true
                        });
                        Object.assign(aParamsDrag.data, {
                            estObjetListe: true,
                            instance: lThis,
                            avecSuppression: lThis._avecSuppressionSelectionCourante(lParamsCellule.ligne, lParamsCellule.colonne),
                            libelle: lThis._getLibelleDraggable(lParamsCellule)
                        }, lParamsCellule);
                    },
                    drag: function(aParamsDrag) {
                        const lData = aParamsDrag.data;
                        lData.horsZoneSuppression = false;
                        if (!lData.droppableCourant && lData.avecSuppression && aParamsDrag.horsZone) {
                            lData.horsZoneSuppression = true;
                        }
                    },
                    stop: function(aParamsDrag) {
                        const lData = aParamsDrag.data;
                        if (lData) {
                            if (lData.horsZoneSuppression) {
                                lThis._surSuppression();
                            } else {
                                ObjetHtml_1.GHtml.setFocus(lThis.getIdCellule(lData.colonne, lData.ligne, true));
                            }
                        }
                    }
                };
            }
            jsxDropCelluleDroppable(aLigne, aColonne) {
                const lParamsCellule = this._getParamsCellule(-1, aLigne);
                const lThis = this;
                return {
                    accept(aParamsDrop) {
                        const lData = aParamsDrop.drag.data;
                        const lElement = $(aParamsDrop.drag.node);
                        return lData && lThis.Donnees.autoriserDeplacementElementSurLigne(lParamsCellule, Object.assign({
                            jDraggable: lElement
                        }, lData));
                    },
                    over(aParamsDrop) {
                        const lData = aParamsDrop.drag.data;
                        lData.getHtmlDetailsDraggable = function() {
                            return lThis.Donnees.getHtmlDetailsDraggableOver(lParamsCellule, lData);
                        }
                        ;
                        lData.celluleDroppableHover = {
                            ligne: aLigne,
                            colonne: aColonne
                        };
                        lData.droppableCourant = aParamsDrop.drop.node;
                        IEHtml_1.default.refresh(true);
                        lThis._parcourirCellulesVoileBleu(lParamsCellule, (aNode) => {
                            $(aNode).addClass('voileDropCellule');
                        }
                        );
                        const lEstPremiereLigne = lParamsCellule.ligne === lThis._cache.lignesVisibles[0];
                        const lEstDerniereLigne = lParamsCellule.ligne === lThis._cache.lignesVisibles[lThis._cache.lignesVisibles.length - 1];
                        if (lThis.Donnees.options.dragNDropLigneInsertion) {
                            const lJConteneur = $('#' + lThis.ids.zoneFils.escapeJQ());
                            const lRect = ObjetPosition_1.GPosition.getClientRect(aParamsDrop.drop.node);
                            let lTop = lRect.top + (lParamsCellule.ligne < lData.ligne ? -1 : lRect.height) - ObjetPosition_1.GPosition.getClientRect(lJConteneur.get(0)).top - 1;
                            if (lEstPremiereLigne) {
                                lTop += 2;
                            } else if (lEstDerniereLigne) {
                                lTop += -2;
                            }
                            lJConteneur.ieHtmlAppend([IE.jsx.str("div", {
                                id: lThis.ids.dragInsertion + lParamsCellule.ligne,
                                class: "liste_dragInsertion",
                                style: {
                                    top: lTop
                                }
                            }, IE.jsx.str("div", {
                                class: "liste_dragInsertion_fg"
                            }), IE.jsx.str("div", {
                                class: "liste_dragInsertion_fd"
                            }))].join(''));
                        }
                        const lIgnorerScroll = (lEstPremiereLigne && lThis.ScrollV.estScrollSurBorne(true)) || (lEstDerniereLigne && lThis.ScrollV.estScrollSurBorne(false));
                        if (!lIgnorerScroll) {
                            setTimeout( () => {
                                lThis.scrollTo({
                                    ligne: lParamsCellule.ligne,
                                    avecScrollTopLigne: false,
                                    ecartForce: 10
                                });
                            }
                            , 50);
                        }
                    },
                    out(aParamsDrop) {
                        const lData = aParamsDrop.drag.data;
                        let lLigneDroppableChange = true;
                        if (lData.celluleDroppableHover && lData.celluleDroppableHover.ligne === aLigne) {
                            if (lData.celluleDroppableHover.colonne === aColonne) {
                                lData.celluleDroppableHover = null;
                            } else {
                                lLigneDroppableChange = false;
                            }
                        }
                        if (lLigneDroppableChange) {
                            lThis._parcourirCellulesVoileBleu(lParamsCellule, (aNode) => {
                                $(aNode).removeClass('voileDropCellule');
                            }
                            );
                            if (lThis.Donnees.options.dragNDropLigneInsertion) {
                                $('#' + (lThis.ids.dragInsertion + lParamsCellule.ligne).escapeJQ()).remove();
                            }
                            if (lData.droppableCourant === aParamsDrop.drop.node) {
                                lData.droppableCourant = null;
                                lData.getHtmlDetailsDraggable = null;
                            }
                            IEHtml_1.default.refresh();
                        }
                    },
                    drop(aParamsDrop) {
                        const lData = aParamsDrop.drag.data;
                        lThis._parcourirCellulesVoileBleu(lParamsCellule, (aNode) => {
                            $(aNode).removeClass('voileDropCellule');
                        }
                        );
                        if (lData) {
                            if (lThis.Donnees.options.dragNDropLigneInsertion) {
                                $('#' + (lThis.ids.dragInsertion + lParamsCellule.ligne).escapeJQ()).remove();
                            }
                            const lElement = $(aParamsDrop.drag.node);
                            lThis._surDeplacementLigneSurAutreLigne(lParamsCellule, Object.assign({
                                jDraggable: lElement
                            }, lData));
                        }
                    }
                };
            }
        }
        exports.ObjetListeEspace = ObjetListeEspace;
    },
    fn: 'objetliste_espace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetListe = void 0;
        const _ObjetListe_1 = require("_ObjetListe");
        const ObjetListe_Mobile_1 = require("ObjetListe_Mobile");
        const ObjetListe_Espace_1 = require("ObjetListe_Espace");
        class _ObjetListe extends _ObjetListe_1.ObjetListe {
        }
        exports.ObjetListe = _ObjetListe;
        if (IE.estMobile) {
            exports.ObjetListe = _ObjetListe = ObjetListe_Mobile_1.ObjetListe_Mobile;
        } else {
            exports.ObjetListe = _ObjetListe = ObjetListe_Espace_1.ObjetListeEspace;
        }
    },
    fn: 'objetliste.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.DonneesListe_SelectionRessource = void 0;
        const ObjetStyle_1 = require("ObjetStyle");
        const ObjetDonneesListe_1 = require("ObjetDonneesListe");
        const AccessApp_1 = require("AccessApp");
        class DonneesListe_SelectionRessource extends ObjetDonneesListe_1.ObjetDonneesListe {
            constructor(aDonnees) {
                super(aDonnees);
                this.setOptions({
                    avecSuppression: false,
                    avecDeploiement: true,
                    avecEtatSaisie: false
                });
            }
            avecEdition(aParams) {
                return aParams.colonne === 0 && !aParams.article.nonEditable;
            }
            getColonneTransfertEdition(aParams) {
                if (!this.avecSelection(aParams) && !this.avecEdition(aParams)) {
                    return 0;
                }
            }
            avecEvenementApresEdition(aParams) {
                return true;
            }
            surEdition(aParams, V) {
                switch (aParams.colonne) {
                case 0:
                    if (aParams.article.estUnDeploiement) {
                        this.Donnees.parcourir( (aFils) => {
                            if (aFils.pere === aParams.article) {
                                aFils.selectionne = V;
                            }
                        }
                        );
                    } else {
                        aParams.article.selectionne = V;
                    }
                    break;
                }
            }
            getValeur(aParams) {
                switch (aParams.colonne) {
                case 0:
                    if (aParams.article.estUnDeploiement) {
                        return this.getEtatCocheSelonFils(aParams.article, aParams);
                    }
                    return aParams.article.selectionne;
                case 1:
                    return aParams.article.getLibelle();
                }
                return '';
            }
            getTypeValeur(aParams) {
                switch (aParams.colonne) {
                case 0:
                    return ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche;
                case 1:
                    return ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Texte;
                }
                return ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Texte;
            }
            getStyle(aParams) {
                switch (aParams.colonne) {
                case 1:
                    return aParams.article.getActif() ? '' : ObjetStyle_1.GStyle.composeCouleurTexte((0,
                    AccessApp_1.getApp)().getCouleur().rouge);
                }
                return '';
            }
            getClass(aParams) {
                switch (aParams.colonne) {
                case 1:
                    return this._options && this._options.getClassRessource ? this._options.getClassRessource(aParams.article) : aParams.article && aParams.article.estUnDeploiement ? 'Gras' : '';
                }
                return '';
            }
            getCouleurCellule(aParams) {
                if (aParams.article.estUnDeploiement && aParams.colonne !== 0) {
                    return ObjetDonneesListe_1.ObjetDonneesListe.ECouleurCellule.Deploiement;
                }
            }
            getTooltip(aParams) {
                switch (aParams.colonne) {
                case 1:
                    return this._options && this._options.getHintRessource ? this._options.getHintRessource(aParams.article) : '';
                }
                return '';
            }
            getVisible(D) {
                if (!this._options || !this._options.filtres) {
                    return true;
                }
                let lVisible = true;
                for (const i in this._options.filtres) {
                    const lFiltre = this._options.filtres[i];
                    lVisible = lVisible && lFiltre.filtre(D, lFiltre.checked);
                    if (!lVisible) {
                        D.selectionne = false;
                        return false;
                    }
                }
                return lVisible;
            }
            avecImageSurColonneDeploiement(aParams) {
                return aParams.colonne === 1;
            }
            getIndentationCellule(aParams) {
                if (aParams.colonne === 1) {
                    return this.getIndentationCelluleSelonParente(aParams);
                }
                return 0;
            }
        }
        exports.DonneesListe_SelectionRessource = DonneesListe_SelectionRessource;
    },
    fn: 'donneesliste_selectionressource.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.DonneesListe_SelectionRessource_fd = void 0;
        const ObjetDonneesListeFlatDesign_1 = require("ObjetDonneesListeFlatDesign");
        const AccessApp_1 = require("AccessApp");
        class DonneesListe_SelectionRessource_fd extends ObjetDonneesListeFlatDesign_1.ObjetDonneesListeFlatDesign {
            constructor(aDonnees) {
                super(aDonnees);
                this.setOptions({
                    avecBoutonActionLigne: false,
                    avecCB: true,
                    avecCocheCBSurLigne: true,
                    avecSelection: false
                });
            }
            getValueCB(aParams) {
                return aParams.article.selectionne;
            }
            setValueCB(aParams, aValue) {
                aParams.article.selectionne = aValue;
            }
            getDisabledCB(aParams) {
                return aParams.article.nonEditable;
            }
            estLigneOff(aParams) {
                return aParams.article.nonEditable;
            }
            getStyle(aParams) {
                return aParams.article.getActif() ? '' : `color:${(0,
                AccessApp_1.getApp)().getCouleur().rouge};`;
            }
            getClass(aParams) {
                return this._options && this._options.getClassRessource ? this._options.getClassRessource(aParams.article) : '';
            }
            getTooltip(aParams) {
                return this._options && this._options.getHintRessource ? this._options.getHintRessource(aParams.article) : '';
            }
            getVisible(D) {
                if (!this._options || !this._options.filtres) {
                    return true;
                }
                let lVisible = true;
                for (const i in this._options.filtres) {
                    const lFiltre = this._options.filtres[i];
                    lVisible = lVisible && lFiltre.filtre(D, lFiltre.checked);
                    if (!lVisible) {
                        D.selectionne = false;
                        return false;
                    }
                }
                return lVisible;
            }
        }
        exports.DonneesListe_SelectionRessource_fd = DonneesListe_SelectionRessource_fd;
    },
    fn: 'donneesliste_selectionressource_fd.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_SelectionRessource = void 0;
        const GUID_1 = require("GUID");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_EvenementListe_1 = require("Enumere_EvenementListe");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetListe_1 = require("ObjetListe");
        const DonneesListe_SelectionRessource_1 = require("DonneesListe_SelectionRessource");
        const DonneesListe_SelectionRessource_fd_1 = require("DonneesListe_SelectionRessource_fd");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetTri_1 = require("ObjetTri");
        class ObjetFenetre_SelectionRessource extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    largeur: 350,
                    hauteur: 500,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Valider')]
                });
                this.indexBtnValider = 0;
                const lId = GUID_1.GUID.getId();
                this.idConteneurFiltre = lId + '_Cfiltre';
                this.classFiltres = GUID_1.GUID.getClassCss();
                this._options = {
                    selectionObligatoire: false,
                    autoriseEltAucun: false,
                    listeElementsAPositionnerEnPremier: null,
                    filtres: null,
                    gestionCumulRessource: null,
                    avecBoutonRechercher: true,
                    triListe: null,
                    avecCocheRessources: true,
                    getClassRessource: null,
                    getHintRessource: null,
                    optionsDonneesListe: null,
                    avecBarreTitre: true,
                    listeFlatDesign: false,
                    selectionCumul: null,
                    optionsListe: null
                };
            }
            getOptions() {
                return this._options;
            }
            setOptionsFenetreSelectionRessource(aOptions) {
                $.extend(this._options, aOptions);
            }
            setSelectionObligatoire(aValeur) {
                this.setOptionsFenetreSelectionRessource({
                    selectionObligatoire: aValeur
                });
            }
            estSelectionObligatoire() {
                return this._options.selectionObligatoire;
            }
            setAutoriseEltAucun(aValeur) {
                this.setOptionsFenetreSelectionRessource({
                    autoriseEltAucun: aValeur
                });
            }
            setListeElementsAPositionnerEnPremier(aValeur) {
                this.setOptionsFenetreSelectionRessource({
                    listeElementsAPositionnerEnPremier: aValeur
                });
            }
            setDonnees(aParam) {
                if (aParam.titre) {
                    this.setOptionsFenetre({
                        titre: aParam.titre
                    });
                }
                ;this.listeRessourcesSelectionnees = aParam.listeRessourcesSelectionnees;
                this.genreRessource = aParam.genreRessource;
                this.construireListeRessource(aParam.listeRessources, aParam.listeRessourcesSelectionnees);
                this._initialiserListe(this.getInstance(this.identListe));
                this.afficher();
                this._construireFiltres();
                if (!this.optionsFenetre.avecTailleSelonContenu) {
                    this.surFixerTaille();
                }
                this._actualiserListe();
                if (this.optionsFenetre.avecTailleSelonContenu) {
                    this.positionnerFenetre();
                }
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    cbFiltre: {
                        getValue(aIndice) {
                            const lFiltre = aInstance._options.filtres[aIndice];
                            return lFiltre.checked;
                        },
                        setValue(aIndice, aValue) {
                            aInstance._mettreAJourFiltre(aIndice, aValue);
                        }
                    }
                });
            }
            _construireFiltres() {
                if (!this._options.filtres || this._options.filtres.length === 0) {
                    return;
                }
                const T = [];
                if (this._options.filtres) {
                    for (const i in this._options.filtres) {
                        const lFiltre = this._options.filtres[i];
                        T.push(IE.jsx.str("div", null, IE.jsx.str("ie-checkbox", {
                            "ie-model": 'cbFiltre(' + i + ')'
                        }, lFiltre.libelle)));
                    }
                }
                ObjetHtml_1.GHtml.setHtml(this.idConteneurFiltre, T.join(''), {
                    instance: this
                });
                ObjetHtml_1.GHtml.setDisplay(this.idConteneurFiltre, true);
            }
            _mettreAJourFiltre(aNumeroFiltre, aChecked) {
                const lFiltre = this._options.filtres[aNumeroFiltre];
                lFiltre.checked = aChecked;
                if (lFiltre.callbackChecked) {
                    lFiltre.callbackChecked(aChecked);
                }
                this._actualiserListe();
            }
            forcerMajListeSelection() {
                this._majListeSelection();
            }
            surValidation(ANumeroBouton) {
                if (ANumeroBouton === this.indexBtnValider) {
                    this._majListeSelection();
                }
                this.fermer();
                this.callback.appel(this.genreRessource, this.listeRessourcesSelectionnees, ANumeroBouton, null);
            }
            construireInstances() {
                this.identListe = this.add(ObjetListe_1.ObjetListe, this._evenementSurListe, this._initialiserListe);
            }
            composeContenu() {
                return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                    class: "flex-contain cols full-height"
                }, IE.jsx.str("div", {
                    id: this.idConteneurFiltre,
                    class: "fix-bloc p-bottom",
                    style: "display:none"
                }), IE.jsx.str("div", {
                    id: this.getNomInstance(this.identListe),
                    class: "fluid-bloc"
                })));
            }
            construireListeRessource(aListeRessources, aListeRessourcesSelectionnees) {
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                if (aListeRessources) {
                    let lRessource;
                    const lNbr = aListeRessources.count();
                    for (let i = 0; i < lNbr; i++) {
                        const lElt = aListeRessources.get(i);
                        if ((this._options.autoriseEltAucun || lElt.existeNumero()) && !lElt.nePasAfficher) {
                            if (this._options.gestionCumulRessource) {
                                this._options.gestionCumulRessource(lElt, this.listeRessources);
                            }
                            if (lElt.estUnDeploiement) {
                                lRessource = lElt;
                            } else {
                                lRessource = MethodesObjet_1.MethodesObjet.dupliquer(lElt, true);
                                const lEltResSel = aListeRessourcesSelectionnees.getElementParElement(lRessource);
                                if (lEltResSel) {
                                    lRessource.selectionne = true;
                                    lRessource.avecReponse = !!lEltResSel.avecReponse;
                                    lRessource.nonModifiable = !!lEltResSel.nonModifiable;
                                    lRessource.nonEditable = !!lEltResSel.nonEditable;
                                } else {
                                    lRessource.selectionne = false;
                                }
                            }
                            this.listeRessources.addElement(lRessource);
                        }
                    }
                }
                if (this._options.triListe) {
                    this.listeRessources.setTri(this._options.triListe);
                } else {
                    this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                }
                this.listeRessources.trier();
            }
            _initialiserListe(aInstance) {
                const lOptions = {
                    ariaLabel: this.optionsFenetre.titre
                };
                if (this._options.listeFlatDesign) {
                    Object.assign(lOptions, {
                        skin: ObjetListe_1.ObjetListe.skin.flatDesign,
                        avecCBToutCocher: !!(this._options.avecCocheRessources && this._options.selectionCumul !== false)
                    });
                } else {
                    Object.assign(lOptions, {
                        colonnes: [{
                            taille: 20,
                            titre: this._options.avecBarreTitre && this._options.avecCocheRessources && this._options.selectionCumul !== false ? {
                                estCoche: true
                            } : ''
                        }, {
                            taille: '100%',
                            titre: this._options.avecBarreTitre ? ObjetTraduction_1.GTraductions.getValeur('Nom') : null
                        }]
                    });
                }
                if (this._options.optionsListe) {
                    $.extend(lOptions, this._options.optionsListe);
                }
                aInstance.setOptionsListe(lOptions);
            }
            _evenementSurListe(aParametres) {
                switch (aParametres.genreEvenement) {
                case Enumere_EvenementListe_1.EGenreEvenementListe.ModificationCBLigne:
                case Enumere_EvenementListe_1.EGenreEvenementListe.ApresEdition:
                    {
                        this.setBoutonActif(this.indexBtnValider, !this._options.selectionObligatoire || this._nbRessourcesCochees() > 0);
                        break;
                    }
                }
            }
            _creerObjetDonneesListe() {
                return this._options.listeFlatDesign ? new DonneesListe_SelectionRessource_fd_1.DonneesListe_SelectionRessource_fd(this.listeRessources) : new DonneesListe_SelectionRessource_1.DonneesListe_SelectionRessource(this.listeRessources);
            }
            _actualiserListe() {
                this.setBoutonActif(this.indexBtnValider, !this._options.selectionObligatoire || this._nbRessourcesCochees() > 0);
                const lDonneesListe = this._creerObjetDonneesListe();
                lDonneesListe._options = this._options;
                if (this._options.optionsDonneesListe) {
                    lDonneesListe.setOptions(this._options.optionsDonneesListe);
                }
                const lBoutons = [];
                if (this._options.avecBoutonRechercher) {
                    lBoutons.push({
                        genre: ObjetListe_1.ObjetListe.typeBouton.rechercher
                    });
                }
                if (this._options.gestionCumulRessource) {
                    lBoutons.push({
                        genre: ObjetListe_1.ObjetListe.typeBouton.deployer
                    });
                }
                this.getInstance(this.identListe).setOptionsListe({
                    boutons: lBoutons
                }).setDonnees(lDonneesListe);
                if (this.optionsFenetre.avecTailleSelonContenu) {
                    this.positionnerFenetre();
                    this.setCoordonnees();
                }
            }
            _nbRessourcesCochees() {
                let lNombre = 0;
                for (let i = 0, lNb = this.listeRessources.count(); i < lNb; i++) {
                    if (this.listeRessources.get(i).selectionne) {
                        lNombre++;
                    }
                }
                return lNombre;
            }
            _getNbRessourcesSelectionnables() {
                let lCompteur = 0;
                for (let i = 0, lNb = this.listeRessources.count(); i < lNb; i++) {
                    if (!this.listeRessources.get(i).estUnDeploiement) {
                        lCompteur++;
                    }
                }
                return lCompteur;
            }
            _majListeSelection() {
                this.listeRessourcesSelectionnees.vider();
                const lHashCache = new Map();
                const lNb = this.listeRessources.count();
                for (let i = 0; i < lNb; i++) {
                    const lRessource = this.listeRessources.get(i);
                    const lCle = lRessource.getCleHash();
                    if (lRessource.selectionne && !lRessource.estUnDeploiement && !lHashCache.has(lCle)) {
                        this.listeRessourcesSelectionnees.addElement(MethodesObjet_1.MethodesObjet.dupliquer(lRessource));
                        lHashCache.set(lCle, true);
                    }
                }
            }
        }
        exports.ObjetFenetre_SelectionRessource = ObjetFenetre_SelectionRessource;
    },
    fn: 'objetfenetre_selectionressource.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_SelectionClasseGroupe = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetFenetre_SelectionRessource_1 = require("ObjetFenetre_SelectionRessource");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetTri_1 = require("ObjetTri");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const ObjetListe_1 = require("ObjetListe");
        const ObjetDonneesListeFlatDesign_1 = require("ObjetDonneesListeFlatDesign");
        class ObjetFenetre_SelectionClasseGroupe extends ObjetFenetre_SelectionRessource_1.ObjetFenetre_SelectionRessource {
            constructor(...aParams) {
                super(...aParams);
                this.avecCumul = false;
                this.setOptionsFenetre({
                    listeBoutons: [{
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Annuler'),
                        theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire
                    }, {
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider'),
                        theme: Type_ThemeBouton_1.TypeThemeBouton.primaire
                    }],
                    largeur: 450,
                    hauteur: 700
                });
                this.setOptionsFenetreSelectionRessource({
                    avecBarreTitre: true,
                    optionsListe: {
                        nonEditable: false,
                        avecCelluleEditableTriangle: false,
                        boutons: [{
                            genre: ObjetListe_1.ObjetListe.typeBouton.rechercher
                        }]
                    }
                });
                this.setSelectionObligatoire(true);
                this.indexBtnValider = 1;
            }
            setAvecCumul(aAvecCumul) {
                this.avecCumul = aAvecCumul;
            }
            setDonnees(aParam) {
                this.listeRessourcesSelectionnees = aParam.listeRessourcesSelectionnees;
                this.genreRessource = Enumere_Ressource_1.EGenreRessource.Classe;
                if (this.avecCumul) {
                    this._construireListeRessourceAvecCumul(aParam.listeRessources, aParam.listeRessourcesSelectionnees);
                } else {
                    this.construireListeRessource(aParam.listeRessources, aParam.listeRessourcesSelectionnees);
                }
                if (aParam.titre) {
                    this.setOptionsFenetre({
                        titre: aParam.titre
                    });
                } else {
                    this.setOptionsFenetre({
                        titre: ObjetTraduction_1.GTraductions.getValeur('fenetreSelectionClasseGroupe.titreClasses')
                    });
                }
                this.afficher();
                this._actualiserListe();
                if (aParam.genreRessource) {
                    this.genreRessource = aParam.genreRessource;
                }
            }
            _initialiserListe(aInstance) {
                const lColonnes = [{
                    id: '',
                    taille: '100%'
                }];
                let lOptions = {
                    colonnes: lColonnes,
                    skin: ObjetListe_1.ObjetListe.skin.flatDesign,
                    avecCBToutCocher: !!this._options.avecCocheRessources,
                    forcerOmbreScrollBottom: true,
                    ariaLabel: () => {
                        return this.optionsFenetre.titre;
                    }
                };
                if (this._options.optionsListe) {
                    $.extend(lOptions, this._options.optionsListe);
                }
                aInstance.setOptionsListe(lOptions);
            }
            _actualiserListe() {
                this.setBoutonActif(this.indexBtnValider, !this.estSelectionObligatoire() || this._nbRessourcesCochees() > 0);
                this.getInstance(this.identListe).setDonnees(new DonneesListe_SelectionClasseGroupe(this.listeRessources));
            }
            _construireListeRessourceAvecCumul(aListeRessources, aListeRessourcesSelectionnees) {
                let lCumulGroupe = new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Groupes'),0,Enumere_Ressource_1.EGenreRessource.Groupe);
                lCumulGroupe.estDeploye = false;
                lCumulGroupe.estUnDeploiement = true;
                lCumulGroupe.setActif(true);
                let lListeCumul = new ObjetListeElements_1.ObjetListeElements()
                  , lAvecGroupe = false;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                for (let i = 0; i < aListeRessources.count(); i++) {
                    if (aListeRessources.get(i).existeNumero()) {
                        let lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aListeRessources.get(i));
                        if (lRessource.getGenre() === Enumere_Ressource_1.EGenreRessource.Groupe) {
                            lAvecGroupe = true;
                            lRessource.pere = lCumulGroupe;
                        } else {
                            let lNiveau = lListeCumul.get(lListeCumul.getIndiceParNumeroEtGenre(lRessource.niveau.getNumero()));
                            if (!lNiveau) {
                                lNiveau = new ObjetElement_1.ObjetElement(lRessource.niveau.getLibelle(),lRessource.niveau.getNumero(),0);
                                lNiveau.estUnDeploiement = true;
                                lNiveau.estDeploye = false;
                                lListeCumul.addElement(lNiveau);
                            }
                            lRessource.pere = lNiveau;
                        }
                        const lRessourceTrouve = aListeRessourcesSelectionnees.getElementParElement(lRessource);
                        lRessource.selectionne = !!(lRessourceTrouve && lRessourceTrouve.getEtat() !== Enumere_Etat_1.EGenreEtat.Suppression);
                        this.listeRessources.addElement(lRessource);
                    }
                }
                if (lAvecGroupe) {
                    this.listeRessources.addElement(lCumulGroupe);
                }
                for (let i = 0; i < lListeCumul.count(); i++) {
                    this.listeRessources.addElement(lListeCumul.get(i));
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.init( (D) => {
                    return D.getGenre() === Enumere_Ressource_1.EGenreRessource.Groupe;
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return D.pere ? D.pere.getLibelle() : D.getLibelle();
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return !!D.pere;
                }
                ), ObjetTri_1.ObjetTri.init('Libelle')]);
                this.listeRessources.trier();
            }
        }
        exports.ObjetFenetre_SelectionClasseGroupe = ObjetFenetre_SelectionClasseGroupe;
        class DonneesListe_SelectionClasseGroupe extends ObjetDonneesListeFlatDesign_1.ObjetDonneesListeFlatDesign {
            constructor(ADonnees) {
                super(ADonnees);
                this.setOptions({
                    avecSelection: false,
                    avecTri: false,
                    avecCB: true,
                    avecEvnt_CB: true,
                    avecCocheCBSurLigne: true,
                    avecDeploiement: true,
                    avecEvnt_Deploiement: true,
                    avecEventDeploiementSurCellule: true,
                    avecBoutonActionLigne: false
                });
            }
            getDisabledCB(aParams) {
                let D = aParams.article;
                return !!D.nonEditable;
            }
            getValueCB(aParams) {
                return aParams.article ? aParams.article.selectionne : false;
            }
            setValueCB(aParams, aValue) {
                aParams.article.selectionne = aValue;
            }
            getTitreZonePrincipale(aParams) {
                let D = aParams.article;
                return D.getLibelle();
            }
            desactiverIndentationParente() {
                return true;
            }
        }
    },
    fn: 'objetfenetre_selectionclassegroupe.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.DonneesListe_SelectionPublic = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetDonneesListeFlatDesign_1 = require("ObjetDonneesListeFlatDesign");
        const ObjetDonneesListe_1 = require("ObjetDonneesListe");
        class DonneesListe_SelectionPublic extends ObjetDonneesListeFlatDesign_1.ObjetDonneesListeFlatDesign {
            constructor(aDonnees) {
                aDonnees.parcourir( (D) => {
                    if (!D.estUnDeploiement && D.selectionne && D.pere) {
                        D.pere.selectionne = true;
                    }
                }
                );
                super(aDonnees);
                this.setOptions({
                    avecSelection: false,
                    avecTri: false,
                    avecCB: true,
                    avecEvnt_CB: true,
                    avecCocheCBSurLigne: true,
                    avecEvnt_Deploiement: true,
                    avecEventDeploiementSurCellule: true,
                    avecBoutonActionLigne: false
                });
                this._cacheDoublonArticles = null;
            }
            avecSelection(aParams) {
                var _a;
                if ((_a = this._options.listeRessourceDesactiver) === null || _a === void 0 ? void 0 : _a.getElementParNumero(aParams.article.getNumero())) {
                    return false;
                }
                return super.avecSelection(aParams) && !aParams.article.estUnDeploiement;
            }
            getDisabledCB(aParams) {
                var _a;
                let D = aParams.article;
                if ((_a = this._options.listeRessourceDesactiver) === null || _a === void 0 ? void 0 : _a.getElementParNumero(aParams.article.getNumero())) {
                    return true;
                }
                return D.avecReponse || D.nonModifiable || D.refusMess || (D.estUnDeploiement && !(this._options && this._options.selectionCumul));
            }
            getValueCB(aParams) {
                if (this._options.avecMonoSelectionSurResponsablesAvecRencontreSeparee && this._options.avecInformationEleveDansListeResponsable) {
                    if (aParams.article.avecRencontresSepareesDesResponsables && aParams.article.estUnDeploiement) {
                        const lFils = this.getArrayFilsVisiblesDePere(aParams.article);
                        return lFils.filter(aFils => 'selectionne'in aFils.article && aFils.article.selectionne).length === 1;
                    }
                }
                return aParams.article ? aParams.article.selectionne : false;
            }
            avecCB(aParams) {
                if (this._options.avecMonoSelectionDeFamille) {
                    const lEstUnDeploimentClasse = ('__sansClasse__'in aParams.article) && aParams.article.getGenre() === 0 && aParams.article.estUnDeploiement;
                    const lEstUnDeploimentGroupe = ('__sans__'in aParams.article) && aParams.article.getGenre() === 9 && aParams.article.estUnDeploiement;
                    return super.avecCB(aParams) && !lEstUnDeploimentClasse && !lEstUnDeploimentGroupe;
                }
                return super.avecCB(aParams);
            }
            estCocheSelonFilsSurLigneDeploiement(aArticle) {
                if (this._options.avecMonoSelectionSurResponsablesAvecRencontreSeparee && this._options.avecInformationEleveDansListeResponsable) {
                    if (!!aArticle.avecRencontresSepareesDesResponsables && aArticle.estUnDeploiement) {
                        return false;
                    }
                }
                return super.estCocheSelonFilsSurLigneDeploiement(aArticle);
            }
            setValueCB(aParams, aValue) {
                aParams.article.selectionne = aValue;
                if (this._options.avecInformationEleveDansListeResponsable) {
                    if (aParams.article.eleves && aParams.article.pere) {
                        aParams.article.eleves.parcourir(aEleve => {
                            if (aEleve.getNumero() === aParams.article.pere.getNumero()) {
                                aParams.article.eleveConcerne = aValue ? aEleve : undefined;
                            }
                        }
                        );
                    }
                }
                if (this._options.avecMonoSelectionDeFamille) {
                    this.handleMonoSelectionDeFamille(aParams);
                }
                this.gestionCacheDoublon(aParams.article, aValue);
                if (this._options.avecMonoSelectionSurResponsablesAvecRencontreSeparee) {
                    this.handleRencontresSepararees(aParams, aValue);
                }
            }
            gestionCacheDoublon(aArticle, aValue) {
                if (this._options.avecCacheDoublonArticles) {
                    if (!this._cacheDoublonArticles) {
                        this._cacheDoublonArticles = {};
                        this.Donnees.parcourir( (aElt) => {
                            const lKey = _getKeyCache(aElt);
                            if (!this._cacheDoublonArticles[lKey]) {
                                this._cacheDoublonArticles[lKey] = [];
                            }
                            this._cacheDoublonArticles[lKey].push(aElt);
                        }
                        );
                    }
                    const lTab = this._cacheDoublonArticles[_getKeyCache(aArticle)];
                    if (lTab && lTab.forEach) {
                        lTab.forEach( (aElement) => {
                            var _a, _b, _c;
                            if (this._options.avecInformationEleveDansListeResponsable) {
                                if ((aArticle === null || aArticle === void 0 ? void 0 : aArticle.pere) && ((_a = aArticle === null || aArticle === void 0 ? void 0 : aArticle.pere) === null || _a === void 0 ? void 0 : _a.getNumero()) === ((_c = (_b = aElement === null || aElement === void 0 ? void 0 : aElement.pere) === null || _b === void 0 ? void 0 : _b.getNumero) === null || _c === void 0 ? void 0 : _c.call(_b))) {
                                    aElement.selectionne = aArticle.selectionne;
                                }
                                return;
                            }
                            aElement.selectionne = aValue;
                        }
                        );
                    }
                }
            }
            handleRencontresSepararees(aParams, aValue) {
                var _a, _b, _c, _d, _e, _f, _g;
                if (!((_b = (_a = aParams.article) === null || _a === void 0 ? void 0 : _a.pere) === null || _b === void 0 ? void 0 : _b.avecRencontresSepareesDesResponsables) && !((_c = aParams.article) === null || _c === void 0 ? void 0 : _c.avecRencontresSepareesDesResponsables)) {
                    return;
                }
                if (!this._options.avecInformationEleveDansListeResponsable) {
                    return;
                }
                const lEleveAvecRencontresSepareesDesResponsables = ((_e = (_d = aParams.article) === null || _d === void 0 ? void 0 : _d.pere) === null || _e === void 0 ? void 0 : _e.avecRencontresSepareesDesResponsables) ? aParams.article.pere : aParams.article;
                const lResponsables = this.getArrayFilsVisiblesDePere(lEleveAvecRencontresSepareesDesResponsables);
                let lResponsablePreferentiel = null;
                for (let i = 0; i < lResponsables.length; i++) {
                    const lResponsable = lResponsables[i].article;
                    const lEstResponsablePreferentiel = (_g = (_f = lResponsable === null || lResponsable === void 0 ? void 0 : lResponsable.listeNumElevesResponsablePreferentiel) === null || _f === void 0 ? void 0 : _f.includes(lEleveAvecRencontresSepareesDesResponsables.getNumero())) !== null && _g !== void 0 ? _g : false;
                    if (lEstResponsablePreferentiel) {
                        lResponsablePreferentiel = lResponsable;
                    }
                    lResponsable.selectionne = false;
                    this.gestionCacheDoublon(lResponsable, false);
                }
                if (!aValue) {
                    return;
                }
                const lEstSelectionSurResponsable = lEleveAvecRencontresSepareesDesResponsables.getNumero() !== aParams.article.getNumero();
                if (lEstSelectionSurResponsable) {
                    aParams.article.selectionne = true;
                    this.gestionCacheDoublon(aParams.article, true);
                    return;
                }
                if (!!lResponsablePreferentiel) {
                    lResponsablePreferentiel.selectionne = true;
                    this.gestionCacheDoublon(lResponsablePreferentiel, true);
                } else {
                    lResponsables[0].article.selectionne = true;
                    this.gestionCacheDoublon(lResponsables[0].article, true);
                }
            }
            handleMonoSelectionDeFamille(aParams) {
                const lPere = aParams.article.pere;
                if (!lPere && aParams.article.estUnDeploiement) {
                    return;
                }
                this.Donnees.parcourir( (aElt) => {
                    if (aElt.selectionne && aElt.pere) {
                        if (aElt.pere.getNumero() !== lPere.getNumero()) {
                            aElt.selectionne = false;
                        }
                    }
                }
                );
            }
            getTitreZonePrincipale(aParams) {
                var _a, _b;
                let D = aParams.article;
                let lLibelleMatieres = '';
                if (!D.estUnDeploiement && D.pere && D.eleves) {
                    const lEleve = D.eleves.getElementParNumero(D.pere.getNumero());
                    if (lEleve && lEleve.matieres) {
                        lLibelleMatieres = '<div>' + lEleve.matieres.getTableauLibelles().join(', ') + '</div>';
                    }
                }
                let lIconDetaches = '';
                if (this._options.avecIconElevesDetaches && !D.estUnDeploiement && D.estElevesDetachesDuCours) {
                    lIconDetaches = IE.jsx.str("i", {
                        class: "icon_eleve_detache EspaceGauche EspaceDroite",
                        role: "img",
                        "aria-label": ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.EleveDetache')
                    });
                }
                let lLibelle = (this._options && this._options.avecIndicationDiscussionInterdit && D.discussionInterdit ? '<span style="line-height: 18px; vertical-align: middle;">' + D.getLibelle() + '</span><div style="float:right;" class="EspaceGauche Image_MessagerieBloquee AlignementMilieuVertical" title="' + ObjetTraduction_1.GTraductions.getValeur('Messagerie.HintReponseDicussionInterdite') + '"></div>' : ((D.libelleAffichage !== null) && (D.libelleAffichage !== undefined) ? D.libelleAffichage : D.getLibelle())) + lIconDetaches + lLibelleMatieres;
                if (D.listeNumElevesResponsablePreferentiel) {
                    if (D.listeNumElevesResponsablePreferentiel.includes((_b = (_a = D.pere) === null || _a === void 0 ? void 0 : _a.getNumero) === null || _b === void 0 ? void 0 : _b.call(_a))) {
                        lLibelle = `${lLibelle} (${ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.Preferentiel')})`;
                    }
                }
                if (D.refusMess) {
                    lLibelle = `${lLibelle} - ${ObjetTraduction_1.GTraductions.getValeur('Messagerie.RefuseDiscussions')}`;
                }
                return lLibelle;
            }
            getInfosSuppZonePrincipale(aParams) {
                if (this._options && this._options.getInfosSuppZonePrincipale) {
                    return this._options.getInfosSuppZonePrincipale(aParams);
                }
                return '';
            }
            getZoneMessage(aParams) {
                if (this._options && this._options.getZoneMessage) {
                    return this._options.getZoneMessage(aParams);
                }
                return '';
            }
            getTooltip(aParams) {
                if (this._options && this._options.getHintRessource) {
                    return this._options.getHintRessource(aParams.article);
                }
                return '';
            }
            getClass(aParams) {
                if (this._options && this._options.getClassRessource) {
                    return this._options.getClassRessource(aParams.article);
                }
                return '';
            }
            getVisible(D) {
                let lVisible = true;
                if (this._options && this._options.filtres) {
                    for (const i in this._options.filtres) {
                        const lFiltre = this._options.filtres[i];
                        lVisible = lVisible && lFiltre.filtre(D, lFiltre.checked);
                        if (!lVisible) {
                            D.selectionne = false;
                            return false;
                        }
                    }
                }
                if (this.options && this.options.funcFiltreVisible) {
                    if (D.estUnDeploiement) {
                        lVisible = this.avecFilsVisibleDePere(D);
                    } else {
                        lVisible = this.options.funcFiltreVisible(D, this.Donnees);
                    }
                    if (!lVisible) {
                        return false;
                    }
                }
                if (this._options && this._options.avecFiltreSelonAcceptRdv) {
                    if (D.estUnDeploiement) {
                        lVisible = this.avecFilsVisibleDePere(D);
                    } else {
                        lVisible = D.acceptRdv;
                    }
                    if (!lVisible) {
                        return false;
                    }
                }
                if (this._options && this._options.avecFiltreAucunAccesEspace) {
                    if (D.estUnDeploiement) {
                        lVisible = this.avecFilsVisibleDePere(D);
                    } else {
                        lVisible = (D.accesParEspace === true);
                    }
                    if (!lVisible) {
                        return false;
                    }
                }
                if (D.estDirEnseignant === true) {
                    lVisible = false;
                    if (this._options && this._options.avecDirEnseignant === true) {
                        lVisible = true;
                    }
                }
                return lVisible;
            }
            construireFiltres() {
                if (!this.options.funcFiltreVisible || !this.options.htmlFiltre) {
                    return '';
                }
                return this.options.htmlFiltre();
            }
            estFiltresParDefaut() {
                if (!this.options.funcFiltreVisible || !this.options.filtreParDefaut) {
                    return true;
                }
                return this.options.filtreParDefaut();
            }
            reinitFiltres() {
                if (this.options.funcFiltreVisible && this.options.reinitFiltres) {
                    this.options.reinitFiltres();
                }
            }
            getEtatCocheSelonFils(aElementPere, aParams, aMethodeAvecEdition, aPourCocheTout) {
                const lEtat = super.getEtatCocheSelonFils(aElementPere, aParams, aMethodeAvecEdition, aPourCocheTout);
                if (this._options.avecMonoSelectionSurResponsablesAvecRencontreSeparee) {
                    if (aElementPere.avecRencontresSepareesDesResponsables) {
                        if (lEtat === ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Grise) {
                            return ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte;
                        }
                    }
                }
                return lEtat;
            }
        }
        exports.DonneesListe_SelectionPublic = DonneesListe_SelectionPublic;
        function _getKeyCache(aElement) {
            return `${aElement.getNumero()}___${aElement.getGenre()}`;
        }
    },
    fn: 'donneesliste_selectionpublic.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_SelectionPublic = exports.TypeGenreCumulSelectionPublic = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_EvenementObjetSaisie_1 = require("Enumere_EvenementObjetSaisie");
        const ObjetFenetre_SelectionRessource_1 = require("ObjetFenetre_SelectionRessource");
        const ObjetListe_1 = require("ObjetListe");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetHtml_1 = require("ObjetHtml");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const DonneesListe_SelectionPublic_1 = require("DonneesListe_SelectionPublic");
        const ComparateurChaines_1 = require("ComparateurChaines");
        var TypeGenreCumulSelectionPublic;
        (function(TypeGenreCumulSelectionPublic) {
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["sans"] = 0] = "sans";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["classe"] = 1] = "classe";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["initial"] = 2] = "initial";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["nomEleves"] = 3] = "nomEleves";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["lieuEnseignement"] = 4] = "lieuEnseignement";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["attendusEnCours"] = 5] = "attendusEnCours";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["respDelegues"] = 6] = "respDelegues";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["famille"] = 7] = "famille";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["servicesPeriscolaire"] = 8] = "servicesPeriscolaire";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["groupe"] = 9] = "groupe";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["presentielEleve"] = 10] = "presentielEleve";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["fonction"] = 11] = "fonction";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["projetsAccompagnement"] = 12] = "projetsAccompagnement";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["nomElevesClasse"] = 13] = "nomElevesClasse";
            TypeGenreCumulSelectionPublic[TypeGenreCumulSelectionPublic["nomElevesGroupe"] = 14] = "nomElevesGroupe";
        }
        )(TypeGenreCumulSelectionPublic || (exports.TypeGenreCumulSelectionPublic = TypeGenreCumulSelectionPublic = {}));
        class ObjetFenetre_SelectionPublic extends ObjetFenetre_SelectionRessource_1.ObjetFenetre_SelectionRessource {
            constructor(...aParams) {
                super(...aParams);
                this.idMessage = this.Nom + '_message';
                this.setOptionsFenetre({
                    largeur: 400,
                    hauteur: 650,
                    listeBoutons: [{
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Annuler'),
                        theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire
                    }, {
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider'),
                        theme: Type_ThemeBouton_1.TypeThemeBouton.primaire
                    }],
                    listeBoutonsInactifs: [],
                    masquerListeSiVide: true
                });
                this.setSelectionObligatoire(true);
                this.indexBtnValider = 1;
                this.listeRessourcesSelectionneesAvecInfoEleve = null;
                this.donnees = {
                    listeCumuls: null,
                    cumulActif: null
                };
                this._options = {
                    afficherUtilisateurCourant: true,
                    selectionCumul: true,
                    avecIndicationDiscussionInterdit: false,
                    avecFiltreDelegues: false,
                    estDeploye: false,
                    avecElevesDetaches: false,
                    avecBoutonRechercher: true,
                    avecCacheDoublonArticles: true,
                    avecInformationEleveDansListeResponsable: false,
                    avecMonoSelectionDeFamille: false,
                    avecMonoSelectionSurResponsablesAvecRencontreSeparee: false,
                    avecFiltreSelonAcceptRdv: false,
                    avecFiltreAucunAccesEspace: false,
                    avecDirEnseignant: false
                };
            }
            estPourPrimaire() {
                return false;
            }
            setOptions(aOptions) {
                this.setOptionsFenetreSelectionRessource(aOptions);
                return this;
            }
            getGenreCumul() {
                return this.donnees.cumulActif ? this.donnees.cumulActif.getGenre() : TypeGenreCumulSelectionPublic.sans;
            }
            setGenreCumulActif(aGenreCumul) {
                if (aGenreCumul) {
                    let lCumulDepuisListe = null;
                    if (!!this.donnees.listeCumuls) {
                        lCumulDepuisListe = this.donnees.listeCumuls.getElementParGenre(aGenreCumul);
                    }
                    if (!lCumulDepuisListe) {
                        lCumulDepuisListe = new ObjetElement_1.ObjetElement('',0,aGenreCumul,0);
                    }
                    this.setCumulActif(lCumulDepuisListe);
                }
            }
            setCumulActif(aCumul) {
                this.donnees.cumulActif = aCumul;
            }
            setListeCumuls(aListeCumuls) {
                this.donnees.listeCumuls = aListeCumuls;
            }
            construireInstances() {
                this.identListe = this.add(ObjetListe_1.ObjetListe, this._evenementSurListe, this._initialiserListe);
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    comboCumul: {
                        init(aCombo) {
                            aInstance.comboCumul = aCombo;
                            aCombo.setOptionsObjetSaisie({
                                longueur: 160,
                                texteEdit: ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.Cumul.Label')
                            });
                        },
                        event(aParams) {
                            if (aParams.genreEvenement === Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection) {
                                aInstance.setCumulActif(aParams.element);
                                aInstance.forcerMajListeSelection();
                                aInstance.actualiserAffichage();
                            }
                        }
                    }
                });
            }
            composeContenu() {
                const lClasseCombo = ['PetitEspaceBas'];
                if (!IE.estMobile) {
                    lClasseCombo.push('GrandEspaceGauche');
                }
                return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                    class: "flex-contain cols full-height"
                }, IE.jsx.str("div", {
                    class: "m-top-l fix-bloc",
                    id: this.idConteneurFiltre,
                    style: "display:none"
                }), IE.jsx.str("div", {
                    class: "fix-bloc"
                }, IE.jsx.str("ie-combo", {
                    "ie-model": "comboCumul",
                    class: lClasseCombo.join(' '),
                    style: "display:none"
                })), IE.jsx.str("div", {
                    id: this.getNomInstance(this.identListe),
                    class: "fluid-bloc"
                }), IE.jsx.str("div", {
                    style: "display:none",
                    class: "Espace",
                    id: this.idMessage
                }, ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.AucunDestinataire'))));
            }
            setDonnees(aParam) {
                this.titre = aParam.titre;
                this.estGenreRessourceDUtilisateurConnecte = aParam.estGenreRessourceDUtilisateurConnecte;
                this._options.avecIndicationDiscussionInterdit = aParam.avecIndicationDiscussionInterdit;
                this.listeRessourcesT = aParam.listeRessources;
                this.listeRessourcesSelectionnees = aParam.listeRessourcesSelectionnees;
                this.genreRessource = aParam.genreRessource;
                this.parametresFiltre = aParam.parametresFiltre;
                this.listeNiveauxResponsabilite = aParam.listeNiveauxResponsabilite;
                if (this._options.avecInformationEleveDansListeResponsable) {
                    this.listeRessourcesSelectionneesAvecInfoEleve = new ObjetListeElements_1.ObjetListeElements();
                }
                this._formatterDonneesSelonOptions();
                const lBoutons = [];
                if (this._options.avecBoutonRechercher) {
                    lBoutons.push({
                        genre: ObjetListe_1.ObjetListe.typeBouton.rechercher
                    });
                }
                if (this.parametresFiltre) {
                    lBoutons.push({
                        genre: ObjetListe_1.ObjetListe.typeBouton.filtrer
                    });
                }
                if (this.getGenreCumul() !== TypeGenreCumulSelectionPublic.sans) {
                    lBoutons.push({
                        genre: ObjetListe_1.ObjetListe.typeBouton.deployer
                    });
                }
                this.getInstance(this.identListe).setOptionsListe({
                    avecCBToutCocher: !!this._options.avecCocheRessources,
                    boutons: lBoutons,
                    nonEditable: false,
                    avecCelluleEditableTriangle: false,
                    avecFiltresVisibles: !!aParam.avecFiltresVisibles,
                    messageContenuVide: this._options && this._options.avecFiltreSelonAcceptRdv ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.AucunAccepteRdv') : ''
                });
                this.actualiserAffichage();
                if (this.donnees.listeCumuls && this.donnees.listeCumuls.count() > 0) {
                    let lIndice = 0;
                    if (this.estPourPrimaire()) {
                        if (this.donnees.cumulActif) {
                            const lIndiceActif = this.donnees.listeCumuls.getIndiceParElement(this.donnees.cumulActif);
                            if (lIndiceActif > 0) {
                                lIndice = lIndiceActif;
                            }
                        }
                    }
                    this.comboCumul.setDonnees(this.donnees.listeCumuls, lIndice);
                    $('#' + this.comboCumul.getNom().escapeJQ()).show();
                } else {
                    $('#' + this.comboCumul.getNom().escapeJQ()).hide();
                }
                if (this._options.avecFiltreDelegues) {
                    $('#' + this.comboCumul.getNom().escapeJQ()).hide();
                }
            }
            _formatterDonneesSelonOptions() {
                const lSelf = this;
                const lNumeroUtilisateur = GEtatUtilisateur.getUtilisateur().getNumero();
                this.listeRessourcesT.parcourir( (D) => {
                    if (lSelf._options.afficherUtilisateurCourant === false && lSelf.estGenreRessourceDUtilisateurConnecte && D.getNumero() === lNumeroUtilisateur) {
                        D.nePasAfficher = true;
                    } else {
                        delete D.nePasAfficher;
                    }
                }
                );
            }
            actualiserAffichage() {
                switch (this.getGenreCumul()) {
                case TypeGenreCumulSelectionPublic.sans:
                    this.construireListeRessource(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.classe:
                    this._construireListeRessourceAvecCumulClasse(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.initial:
                    this._construireListeRessourceAvecCumulInitial(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.nomEleves:
                    this._construireListeRessourceAvecCumulEleves(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.lieuEnseignement:
                    this._construireListeRessourceAvecCumulLieuEnseignement(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.attendusEnCours:
                    this._construireListeRessourceAvecCumulAttendusEnCours(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.respDelegues:
                    this._construireListeRessourceAvecCumulRespDelegues(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.famille:
                    {
                        const lFamilleConcernee = this.donnees.cumulActif ? this.donnees.cumulActif.famille : null;
                        this._construireListeRessourceAvecCumulFamille(this.listeRessourcesT, this.listeRessourcesSelectionnees, lFamilleConcernee);
                        break;
                    }
                case TypeGenreCumulSelectionPublic.servicesPeriscolaire:
                    {
                        this._construireListeRessourceAvecCumulServicePeriscolaire(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                        break;
                    }
                case TypeGenreCumulSelectionPublic.groupe:
                    this._construireListeRessourceAvecCumulGroupe(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.presentielEleve:
                    {
                        this._construireListeRessourceAvecCumulPresentielEleve(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                        break;
                    }
                case TypeGenreCumulSelectionPublic.fonction:
                    {
                        this._construireListeRessourceAvecCumulFonction(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                        break;
                    }
                case TypeGenreCumulSelectionPublic.projetsAccompagnement:
                    {
                        this._construireListeRessourceAvecCumulProjAcc(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                        break;
                    }
                case TypeGenreCumulSelectionPublic.nomElevesClasse:
                    this._construireListeRessourceAvecCumulElevesClasse(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                case TypeGenreCumulSelectionPublic.nomElevesGroupe:
                    this._construireListeRessourceAvecCumulElevesGroupe(this.listeRessourcesT, this.listeRessourcesSelectionnees);
                    break;
                default:
                    ;break;
                }
                if (this._options.autoriseEltAucun && this._options.listeElementsAPositionnerEnPremier) {
                    if (this._options.listeElementsAPositionnerEnPremier.count() > 0) {
                        this._options.listeElementsAPositionnerEnPremier.parcourir( (aElement, aIndex) => {
                            this.listeRessources.insererElement(aElement, aIndex);
                        }
                        );
                    }
                }
                if (this.titre) {
                    this.setOptionsFenetre({
                        titre: this.titre
                    });
                }
                this.afficher();
                this._construireFiltres();
                this._actualiserListe();
            }
            surValidation(ANumeroBouton) {
                if (ANumeroBouton === this.indexBtnValider) {
                    this._majListeSelection();
                    if (this._options.avecInformationEleveDansListeResponsable) {
                        this._formatListeRessourcesSelectionneesAvecInfoEleve(this.listeRessourcesSelectionnees);
                    }
                }
                this.fermer();
                this.callback.appel(this.genreRessource, this.listeRessourcesSelectionnees, ANumeroBouton, this.listeRessourcesSelectionneesAvecInfoEleve);
            }
            _majListeSelection() {
                this.listeRessourcesSelectionnees.vider();
                const lHashCache = new Map();
                const lNb = this.listeRessources.count();
                for (let i = 0; i < lNb; i++) {
                    const lRessource = this.listeRessources.get(i);
                    let lCle = this.getCleHashElementAvecInformationEleveDansResponsable(lRessource);
                    if (lRessource.selectionne && !lRessource.estUnDeploiement && (!lHashCache.has(lCle) || !this._options.avecCacheDoublonArticles)) {
                        this.listeRessourcesSelectionnees.addElement(MethodesObjet_1.MethodesObjet.dupliquer(lRessource));
                        lHashCache.set(lCle, true);
                    }
                }
            }
            _formatListeRessourcesSelectionneesAvecInfoEleve(aListe) {
                this.listeRessourcesSelectionneesAvecInfoEleve.vider();
                const lListe = aListe;
                const lListeEleves = new Set();
                for (let i = 0; i < lListe.count(); i++) {
                    const lRessource = lListe.get(i);
                    if (!lRessource.eleves) {
                        continue;
                    }
                    const lEleveConcerne = lRessource.eleveConcerne || lRessource.pere;
                    const lObjetElementRessource = new ObjetElement_1.ObjetElement(lRessource.getLibelle(),lRessource.getNumero(),lRessource.getGenre());
                    if (lEleveConcerne) {
                        if (lListeEleves.has(lEleveConcerne.getNumero())) {
                            const lRessourceSelectionnee = this.listeRessourcesSelectionneesAvecInfoEleve.getElementParFiltre(aRessource => aRessource.eleveConcerne && aRessource.eleveConcerne.getNumero() === lEleveConcerne.getNumero());
                            if (lRessourceSelectionnee && lRessourceSelectionnee.responsables) {
                                lRessourceSelectionnee.responsables.add(lObjetElementRessource);
                            }
                        } else {
                            const lRessourceSelectionnee = ObjetElement_1.ObjetElement.create({
                                eleveConcerne: MethodesObjet_1.MethodesObjet.dupliquer(lEleveConcerne),
                                responsables: new ObjetListeElements_1.ObjetListeElements().add(lObjetElementRessource)
                            });
                            this.listeRessourcesSelectionneesAvecInfoEleve.add(lRessourceSelectionnee);
                            lListeEleves.add(lEleveConcerne.getNumero());
                        }
                    }
                }
            }
            _initialiserListe(aInstance) {
                let lOptions = {
                    skin: ObjetListe_1.ObjetListe.skin.flatDesign,
                    avecCBToutCocher: !!this._options.avecCocheRessources,
                    ariaLabel: () => (MethodesObjet_1.MethodesObjet.isFunction(this.optionsFenetre.titre) ? this.optionsFenetre.titre() : this.optionsFenetre.titre) || ''
                };
                if (this._options.optionsListe) {
                    $.extend(lOptions, this._options.optionsListe);
                }
                aInstance.setOptionsListe(lOptions);
            }
            _actualiserListe() {
                this.setBoutonActif(this.indexBtnValider, !this.estSelectionObligatoire() || this._nbRessourcesCochees() > 0);
                const lDonneesListe = new DonneesListe_SelectionPublic_1.DonneesListe_SelectionPublic(this.listeRessources);
                if (this.parametresFiltre) {
                    lDonneesListe.setOptions(this.parametresFiltre);
                }
                lDonneesListe._options = this._options;
                lDonneesListe._options.avecIconElevesDetaches = this._options.avecElevesDetaches;
                if (this._options.listeRessourceDesactiver) {
                    lDonneesListe._options.listeRessourceDesactiver;
                }
                if (this._options.optionsDonneesListe) {
                    lDonneesListe.setOptions(this._options.optionsDonneesListe);
                }
                if (this.listeRessources.count() > 0 || !this.optionsFenetre.masquerListeSiVide) {
                    this.getInstance(this.identListe).setDonnees(lDonneesListe);
                    if (this._options.forcerDeploiementSurElementSelectionne) {
                        this.forcerDeploiementSurElementSelectionne();
                    }
                } else {
                    ObjetHtml_1.GHtml.setDisplay(this.idMessage, true);
                    ObjetHtml_1.GHtml.setDisplay(this.getNomInstance(this.identListe), false);
                }
            }
            getCleHashElementAvecInformationEleveDansResponsable(aElement) {
                let lCle = aElement.getCleHash();
                if (this._options.avecInformationEleveDansListeResponsable) {
                    if ('pere'in aElement) {
                        return `${lCle}_${aElement.pere.getCleHash()}`;
                    }
                    if ('eleveConcerne'in aElement) {
                        return `${lCle}_${aElement.eleveConcerne.getCleHash()}`;
                    }
                }
                return lCle;
            }
            forcerDeploiementSurElementSelectionne() {}
            _construireListeRessourceAvecCumulClasse(aListeRessources, aListeRessourcesSelectionnees) {
                const lCumulGroupe = new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.SansClasse'),0,0);
                lCumulGroupe.estDeploye = this._options.estDeploye || false;
                lCumulGroupe.estUnDeploiement = true;
                lCumulGroupe.__sansClasse__ = true;
                lCumulGroupe.setActif(true);
                const lListeCumulClasses = new ObjetListeElements_1.ObjetListeElements();
                const lListeCumulClassesMN = new ObjetListeElements_1.ObjetListeElements();
                let lAvecGroupe = false;
                const lCacheRessSelec = new Map();
                aListeRessourcesSelectionnees.parcourir( (aElement) => {
                    if (aElement && aElement.existe()) {
                        lCacheRessSelec.set(aElement.getCleHash(), aElement);
                    }
                }
                );
                const lAjouterRessourceALaListe = (aRessource, aPere) => {
                    const lMaRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                    lMaRessource.pere = aPere;
                    const lEltResSel = lCacheRessSelec.get(aRessource.getCleHash());
                    if (lEltResSel) {
                        lMaRessource.selectionne = true;
                        lMaRessource.avecReponse = !!lEltResSel.avecReponse;
                        aRessource.nonModifiable = !!lEltResSel.nonModifiable;
                    } else {
                        lMaRessource.selectionne = false;
                    }
                    this.listeRessources.addElement(lMaRessource);
                }
                ;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                for (let i = 0, lNbr = aListeRessources.count(); i < lNbr; i++) {
                    if (aListeRessources.get(i).existeNumero()) {
                        const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aListeRessources.get(i));
                        const lCleMap = lRessource.getCleHash();
                        if (!lRessource.classes || lRessource.classes.count() === 0) {
                            lAvecGroupe = true;
                            lRessource.pere = lCumulGroupe;
                            const lEltResSel = lCacheRessSelec.get(lCleMap);
                            if (lEltResSel) {
                                lRessource.selectionne = true;
                                lRessource.avecReponse = !!lEltResSel.avecReponse;
                                lRessource.nonModifiable = !!lEltResSel.nonModifiable;
                            } else {
                                lRessource.selectionne = false;
                            }
                            this.listeRessources.addElement(lRessource);
                        } else {
                            for (let j = 0, lNbr2 = lRessource.classes.count(); j < lNbr2; j++) {
                                const lClasse = lRessource.classes.get(j);
                                let lNiveau = lListeCumulClasses.get(lListeCumulClasses.getIndiceParNumeroEtGenre(lClasse.getNumero()));
                                if (!lNiveau) {
                                    const lSansClasse = !lClasse.getLibelle();
                                    lNiveau = new ObjetElement_1.ObjetElement(lClasse.getLibelle() || ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.SansClasse'),lClasse.getNumero(),0);
                                    lNiveau.estUnDeploiement = true;
                                    lNiveau.estDeploye = this._options.estDeploye || false;
                                    if (lClasse.estClasseMN) {
                                        lNiveau.estClasseMN = true;
                                    }
                                    lNiveau.__sansClasse__ = lSansClasse;
                                    lListeCumulClasses.addElement(lNiveau);
                                }
                                if (lClasse.estClasseMN && lClasse.classesNiv) {
                                    lClasse.classesNiv.parcourir(aNiv => {
                                        let lClasseNiv = lListeCumulClassesMN.get(lListeCumulClassesMN.getIndiceParNumeroEtGenre(aNiv.getNumero()));
                                        if (!lClasseNiv) {
                                            lClasseNiv = ObjetElement_1.ObjetElement.create({
                                                Libelle: aNiv.getLibelle(),
                                                Numero: aNiv.getNumero(),
                                                Genre: 0,
                                                estUnDeploiement: true,
                                                estDeploye: this._options.estDeploye || false,
                                                __sansClasse__: !aNiv.getLibelle(),
                                                pere: lNiveau
                                            });
                                            lListeCumulClassesMN.add(lClasseNiv);
                                        }
                                        lAjouterRessourceALaListe(lRessource, lClasseNiv);
                                    }
                                    );
                                } else {
                                    lAjouterRessourceALaListe(lRessource, lNiveau);
                                }
                            }
                        }
                    }
                }
                if (lAvecGroupe) {
                    this.listeRessources.addElement(lCumulGroupe);
                }
                for (let i = 0, lNbr = lListeCumulClasses.count(); i < lNbr; i++) {
                    this.listeRessources.addElement(lListeCumulClasses.get(i));
                }
                for (let i = 0, lNbr = lListeCumulClassesMN.count(); i < lNbr; i++) {
                    this.listeRessources.addElement(lListeCumulClassesMN.get(i));
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init( (D) => {
                    return !D.__sansClasse__;
                }
                ), ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulGroupe(aListeRessources, aListeRessourcesSelectionnees) {
                const lCumulGroupe = new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.SansGroupe'),0,TypeGenreCumulSelectionPublic.groupe);
                lCumulGroupe.estDeploye = this._options.estDeploye || false;
                lCumulGroupe.estUnDeploiement = true;
                lCumulGroupe.__sans__ = true;
                lCumulGroupe.setActif(true);
                const lListeCumul = new ObjetListeElements_1.ObjetListeElements();
                let lAvecGroupe = false;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                let lEltResSel;
                for (let i = 0, lNbr = aListeRessources.count(); i < lNbr; i++) {
                    if (aListeRessources.get(i).existeNumero()) {
                        const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aListeRessources.get(i));
                        if (!lRessource.groupes || lRessource.groupes.count() === 0) {
                            lAvecGroupe = true;
                            lRessource.pere = lCumulGroupe;
                            lEltResSel = aListeRessourcesSelectionnees.getElementParElement(lRessource);
                            if (lEltResSel) {
                                lRessource.selectionne = true;
                                lRessource.avecReponse = !!lEltResSel.avecReponse;
                                lRessource.nonModifiable = !!lEltResSel.nonModifiable;
                            } else {
                                lRessource.selectionne = false;
                            }
                            this.listeRessources.addElement(lRessource);
                        } else {
                            for (let j = 0, lNbr2 = lRessource.groupes.count(); j < lNbr2; j++) {
                                const lMaRessource = MethodesObjet_1.MethodesObjet.dupliquer(lRessource);
                                let lNiveau = lListeCumul.get(lListeCumul.getIndiceParNumeroEtGenre(lRessource.groupes.getNumero(j)));
                                if (!lNiveau) {
                                    const lSansClasse = !lRessource.groupes.getLibelle(j);
                                    lNiveau = new ObjetElement_1.ObjetElement(lRessource.groupes.getLibelle(j) || ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.SansGroupe'),lRessource.groupes.getNumero(j),TypeGenreCumulSelectionPublic.groupe);
                                    lNiveau.estUnDeploiement = true;
                                    lNiveau.estDeploye = this._options.estDeploye || false;
                                    lNiveau.__sans__ = lSansClasse;
                                    lListeCumul.addElement(lNiveau);
                                }
                                lMaRessource.pere = lNiveau;
                                lEltResSel = aListeRessourcesSelectionnees.getElementParElement(lRessource);
                                if (lEltResSel) {
                                    lMaRessource.selectionne = true;
                                    lMaRessource.avecReponse = !!lEltResSel.avecReponse;
                                    lRessource.nonModifiable = !!lEltResSel.nonModifiable;
                                } else {
                                    lMaRessource.selectionne = false;
                                }
                                this.listeRessources.addElement(lMaRessource);
                            }
                        }
                    }
                }
                if (lAvecGroupe) {
                    this.listeRessources.addElement(lCumulGroupe);
                }
                for (let i = 0, lNbr = lListeCumul.count(); i < lNbr; i++) {
                    this.listeRessources.addElement(lListeCumul.get(i));
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init( (D) => {
                    return !D.__sans__;
                }
                ), ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulInitial(aListeRessources, aListeRessourcesSelectionnees) {
                const lCumulGroupe = new ObjetElement_1.ObjetElement(' ',0,0);
                lCumulGroupe.estDeploye = this._options.estDeploye || false;
                lCumulGroupe.estUnDeploiement = true;
                lCumulGroupe.setActif(true);
                lCumulGroupe.__sansInitiale__ = true;
                const lListeCumul = new ObjetListeElements_1.ObjetListeElements();
                let lAvecGroupe = false;
                const lCacheRessSelec = new Map();
                aListeRessourcesSelectionnees.parcourir( (aElement) => {
                    if (aElement && aElement.existe()) {
                        lCacheRessSelec.set(aElement.getCleHash(), aElement);
                    }
                }
                );
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                for (let i = 0, lNbr = aListeRessources.count(); i < lNbr; i++) {
                    if (aListeRessources.get(i).existeNumero()) {
                        const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aListeRessources.get(i));
                        if (!lRessource.ini) {
                            lAvecGroupe = true;
                            lRessource.pere = lCumulGroupe;
                        } else {
                            let lNiveau = null;
                            lListeCumul.parcourir( (aRessource) => {
                                if (lRessource.ini && ComparateurChaines_1.ComparateurChaines.egal(lRessource.ini, aRessource.getLibelle())) {
                                    lNiveau = aRessource;
                                    return false;
                                }
                            }
                            );
                            if (!lNiveau) {
                                lNiveau = new ObjetElement_1.ObjetElement(lRessource.ini.toUpperCase(),ObjetElement_1.ObjetElement.getNumeroCreation(),0);
                                lNiveau.estUnDeploiement = true;
                                lNiveau.estDeploye = this._options.estDeploye || false;
                                lListeCumul.addElement(lNiveau);
                            }
                            lRessource.pere = lNiveau;
                        }
                        const lEltResSel = lCacheRessSelec.get(lRessource.getCleHash());
                        if (lEltResSel) {
                            lRessource.selectionne = true;
                            lRessource.avecReponse = !!lEltResSel.avecReponse;
                            lRessource.nonModifiable = !!lEltResSel.nonModifiable;
                        } else {
                            lRessource.selectionne = false;
                        }
                        this.listeRessources.addElement(lRessource);
                    }
                }
                if (lAvecGroupe) {
                    this.listeRessources.addElement(lCumulGroupe);
                }
                for (let i = 0, lNbr = lListeCumul.count(); i < lNbr; i++) {
                    this.listeRessources.addElement(lListeCumul.get(i));
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.init( (D) => {
                    return D.pere ? !!D.pere.__sansInitiale__ : !!D.__sansInitiale__;
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return D.pere ? D.pere.getLibelle() : D.getLibelle();
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return !!D.pere;
                }
                ), ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulPresentielEleve(aListeRessources, aListeRessourcesSelectionnees) {}
            _construireListeRessourceAvecCumulFonction(aListeRessources, aListeRessourcesSelectionnees) {
                const lListeRessources = new ObjetListeElements_1.ObjetListeElements();
                let lTestElmAucuneExiste = false;
                if (aListeRessources && aListeRessources.count() > 0) {
                    const lCumulAucun = new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.sansFonction'),0,-1,1);
                    lCumulAucun.estUnDeploiement = true;
                    lCumulAucun.estDeploye = false;
                    aListeRessources.parcourir( (aRessource) => {
                        const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                        if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                            lRessource.selectionne = true;
                        }
                        if (lRessource.fonction) {
                            let lCumulFonction = lListeRessources.getElementParElement(lRessource.fonction);
                            if (!lCumulFonction) {
                                lCumulFonction = lRessource.fonction;
                                lCumulFonction.estUnDeploiement = true;
                                lCumulFonction.estDeploye = false;
                                lListeRessources.add(lCumulFonction);
                            }
                            const lRessourceDupliquee = MethodesObjet_1.MethodesObjet.dupliquer(lRessource);
                            lRessourceDupliquee.pere = lCumulFonction;
                            lListeRessources.addElement(lRessourceDupliquee);
                        } else {
                            lTestElmAucuneExiste = lTestElmAucuneExiste || !!lListeRessources.getElementParElement(lCumulAucun);
                            if (!lTestElmAucuneExiste) {
                                lListeRessources.add(lCumulAucun);
                            }
                            lRessource.pere = lCumulAucun;
                            lListeRessources.addElement(lRessource);
                        }
                    }
                    );
                    this.listeRessources = lListeRessources;
                    this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                    this.listeRessources.trier();
                }
            }
            _construireListeRessourceAvecCumulEleves(aListeRessources, aListeRessourcesSelectionnees) {
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                aListeRessources.parcourir( (aRessource) => {
                    if (aRessource.eleves) {
                        aRessource.eleves.parcourir( (aEleve) => {
                            let lCumulEleve = this.listeRessources.getElementParElement(aEleve);
                            if (!lCumulEleve) {
                                lCumulEleve = MethodesObjet_1.MethodesObjet.dupliquer(aEleve);
                                this.listeRessources.addElement(lCumulEleve);
                                lCumulEleve.estUnDeploiement = true;
                                lCumulEleve.estDeploye = this._options.estDeploye || false;
                            }
                            const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                            if (aEleve.niveauResponsabilite) {
                                lRessource.afficherResponsabilite = true;
                                lRessource.niveauResponsabilite = MethodesObjet_1.MethodesObjet.dupliquer(aEleve.niveauResponsabilite);
                            }
                            this.listeRessources.addElement(lRessource);
                            lRessource.pere = lCumulEleve;
                            let lEltResSel = this.getElementDansListeRessourcesSelectionnees(aListeRessourcesSelectionnees, lRessource);
                            lRessource.selectionne = !!lEltResSel;
                            if (lEltResSel) {
                                lRessource.avecReponse = !!lEltResSel.avecReponse;
                                lRessource.nonModifiable = !!lEltResSel.nonModifiable;
                            }
                        }
                        );
                    }
                }
                );
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]).trier();
            }
            getElementDansListeRessourcesSelectionnees(aListeRessourcesSelectionnees, aRessource) {
                var _a, _b;
                if (this._options.avecInformationEleveDansListeResponsable) {
                    const lNumeroEleve = ((_a = aRessource === null || aRessource === void 0 ? void 0 : aRessource.eleveConcerne) === null || _a === void 0 ? void 0 : _a.getNumero()) || ((_b = aRessource === null || aRessource === void 0 ? void 0 : aRessource.pere) === null || _b === void 0 ? void 0 : _b.getNumero());
                    if (lNumeroEleve) {
                        return aListeRessourcesSelectionnees.getElementParFiltre(aRessourceSelectionnee => {
                            var _a, _b;
                            const lEstLaMemeRessource = aRessourceSelectionnee.getNumero() === aRessource.getNumero();
                            const lConcerneLeMemeEleve = [(_a = aRessourceSelectionnee === null || aRessourceSelectionnee === void 0 ? void 0 : aRessourceSelectionnee.pere) === null || _a === void 0 ? void 0 : _a.getNumero(), (_b = aRessourceSelectionnee === null || aRessourceSelectionnee === void 0 ? void 0 : aRessourceSelectionnee.eleveConcerne) === null || _b === void 0 ? void 0 : _b.getNumero()].includes(lNumeroEleve);
                            return lEstLaMemeRessource && lConcerneLeMemeEleve;
                        }
                        );
                    }
                }
                return aListeRessourcesSelectionnees.getElementParElement(aRessource);
            }
            _construireListeRessourceAvecCumulRespDelegues(aListeRessources, aListeRessourcesSelectionnees) {
                const lEstDeployeParDefaut = this._options.estDeploye || false;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                aListeRessources.parcourir( (aCumul) => {
                    if (aCumul.listeResp.count() > 0) {
                        const lCumul = new ObjetElement_1.ObjetElement(aCumul.getLibelle());
                        lCumul.estUnDeploiement = true;
                        lCumul.estDeploye = lEstDeployeParDefaut;
                        this.listeRessources.addElement(lCumul);
                        aCumul.listeResp.parcourir( (aRessource) => {
                            const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                            if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                                lRessource.selectionne = true;
                            }
                            if (lRessource.delegueDesClasses) {
                                lRessource.setLibelle(lRessource.getLibelle() + ' (' + lRessource.delegueDesClasses + ')');
                            }
                            lRessource.pere = lCumul;
                            this.listeRessources.addElement(lRessource);
                        }
                        );
                    }
                }
                );
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulServicePeriscolaire(aListeRessources, aListeRessourcesSelectionnees) {
                const lEstDeployeParDefaut = this._options.estDeploye || false;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                let lTestElmAucuneExiste = false;
                if (aListeRessources && (aListeRessources.count() > 0)) {
                    const lCumulAucun = new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.CumulServicePeriscolaire.Sans'),0,-1,1);
                    lCumulAucun.estUnDeploiement = true;
                    lCumulAucun.estDeploye = false;
                    aListeRessources.parcourir( (aRessource) => {
                        if (!!aRessource.listeServicesPeriscolaire && (aRessource.listeServicesPeriscolaire.count() > 0)) {
                            aRessource.listeServicesPeriscolaire.parcourir( (aServicePeriscolaire) => {
                                let lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                                if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                                    lRessource.selectionne = true;
                                }
                                let lCumulSP = this.listeRessources.getElementParElement(aServicePeriscolaire);
                                if (!lCumulSP) {
                                    lCumulSP = MethodesObjet_1.MethodesObjet.dupliquer(aServicePeriscolaire);
                                    this.listeRessources.addElement(lCumulSP);
                                    lCumulSP.estUnDeploiement = true;
                                    lCumulSP.estDeploye = lEstDeployeParDefaut;
                                }
                                lRessource.pere = lCumulSP;
                                this.listeRessources.addElement(lRessource);
                            }
                            );
                        } else {
                            let lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                            if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                                lRessource.selectionne = true;
                            }
                            lTestElmAucuneExiste = lTestElmAucuneExiste || !!this.listeRessources.getElementParElement(lCumulAucun);
                            if (!lTestElmAucuneExiste) {
                                this.listeRessources.add(lCumulAucun);
                            }
                            lRessource.pere = lCumulAucun;
                            this.listeRessources.addElement(lRessource);
                        }
                    }
                    );
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulProjAcc(aListeRessources, aListeRessourcesSelectionnees) {
                const lEstDeployeParDefaut = this._options.estDeploye || false;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                let lTestElmAucuneExiste = false;
                if (aListeRessources && (aListeRessources.count() > 0)) {
                    const lCumulAucun = new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.CumulProjetsAccompagnement.Sans'),0,-1,1);
                    lCumulAucun.estUnDeploiement = true;
                    lCumulAucun.estDeploye = false;
                    aListeRessources.parcourir( (aRessource) => {
                        if (!!aRessource.listeProjetsAcc && (aRessource.listeProjetsAcc.count() > 0)) {
                            aRessource.listeProjetsAcc.parcourir( (aProjetAcc) => {
                                let lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                                if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                                    lRessource.selectionne = true;
                                }
                                let lCumulSP = this.listeRessources.getElementParElement(aProjetAcc);
                                if (!lCumulSP) {
                                    lCumulSP = MethodesObjet_1.MethodesObjet.dupliquer(aProjetAcc);
                                    this.listeRessources.addElement(lCumulSP);
                                    lCumulSP.estUnDeploiement = true;
                                    lCumulSP.estDeploye = lEstDeployeParDefaut;
                                }
                                lRessource.pere = lCumulSP;
                                this.listeRessources.addElement(lRessource);
                            }
                            );
                        } else {
                            let lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                            if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                                lRessource.selectionne = true;
                            }
                            lTestElmAucuneExiste = lTestElmAucuneExiste || !!this.listeRessources.getElementParElement(lCumulAucun);
                            if (!lTestElmAucuneExiste) {
                                this.listeRessources.add(lCumulAucun);
                            }
                            lRessource.pere = lCumulAucun;
                            this.listeRessources.addElement(lRessource);
                        }
                    }
                    );
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulFamille(aListeRessources, aListeRessourcesSelectionnees, aFamilleConcernee) {
                const lListeRessources = new ObjetListeElements_1.ObjetListeElements();
                let lTestElmAucuneExiste = false;
                if (aListeRessources && aListeRessources.count() > 0) {
                    const lCumulAucun = new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.CumulFamille.SansRubrique'),0,-1,1);
                    lCumulAucun.estUnDeploiement = true;
                    lCumulAucun.estDeploye = false;
                    aListeRessources.parcourir( (aRessource) => {
                        const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                        if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                            lRessource.selectionne = true;
                        }
                        let lAppartientAAuMoinsUneSousFamille = false;
                        if (lRessource.listeFamilles) {
                            const lFamilleTrouvee = lRessource.listeFamilles.getElementParElement(aFamilleConcernee);
                            if (lFamilleTrouvee && lFamilleTrouvee.listeSousFamilles && lFamilleTrouvee.listeSousFamilles.count() > 0) {
                                lAppartientAAuMoinsUneSousFamille = true;
                                lFamilleTrouvee.listeSousFamilles.parcourir( (aSousFamille) => {
                                    let lCumulSousFamille = lListeRessources.getElementParElement(aSousFamille);
                                    if (!lCumulSousFamille) {
                                        lCumulSousFamille = aSousFamille;
                                        lCumulSousFamille.estUnDeploiement = true;
                                        lCumulSousFamille.estDeploye = false;
                                        lListeRessources.add(lCumulSousFamille);
                                    }
                                    if (lListeRessources.getElementParElement(lRessource)) {
                                        const lRessourceDupliquee = MethodesObjet_1.MethodesObjet.dupliquer(lRessource);
                                        lRessourceDupliquee.pere = lCumulSousFamille;
                                        lListeRessources.addElement(lRessourceDupliquee);
                                    } else {
                                        lRessource.pere = lCumulSousFamille;
                                        lListeRessources.addElement(lRessource);
                                    }
                                }
                                );
                            }
                        }
                        if (!lAppartientAAuMoinsUneSousFamille) {
                            lTestElmAucuneExiste = lTestElmAucuneExiste || !!lListeRessources.getElementParElement(lCumulAucun);
                            if (!lTestElmAucuneExiste) {
                                lListeRessources.add(lCumulAucun);
                            }
                            lRessource.pere = lCumulAucun;
                            lListeRessources.addElement(lRessource);
                        }
                    }
                    );
                    this.listeRessources = lListeRessources;
                    this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                    this.listeRessources.trier();
                }
            }
            _construireListeRessourceAvecCumulAttendusEnCours(aListeRessources, aListeRessourcesSelectionnees) {
                const lThis = this;
                const lEstDeployeParDefaut = this._options.estDeploye || false;
                const lGenresCumuls = {
                    detaches: 0,
                    attendus: 1
                };
                const lListeCumulsPossibles = new ObjetListeElements_1.ObjetListeElements();
                lListeCumulsPossibles.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.CumulAttendusEnCours.Detaches'),lGenresCumuls.detaches,-1,1));
                lListeCumulsPossibles.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.CumulAttendusEnCours.Attendus'),lGenresCumuls.attendus,-1,2));
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                aListeRessources.parcourir( (aRessource) => {
                    const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                    if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                        lRessource.selectionne = true;
                    }
                    let lPere;
                    if (!!lRessource.estElevesDetachesDuCours) {
                        lPere = lListeCumulsPossibles.getElementParNumero(lGenresCumuls.detaches);
                    } else {
                        lPere = lListeCumulsPossibles.getElementParNumero(lGenresCumuls.attendus);
                    }
                    lPere.estUnDeploiement = true;
                    lPere.estDeploye = lEstDeployeParDefaut;
                    lRessource.pere = lPere;
                    lThis.listeRessources.addElement(lRessource);
                }
                );
                lListeCumulsPossibles.parcourir( (aCumul) => {
                    if (aCumul.estUnDeploiement) {
                        lThis.listeRessources.addElement(aCumul);
                    }
                }
                );
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulLieuEnseignement(aListeRessources, aListeRessourcesSelectionnees) {
                const lThis = this;
                const lEstDeployeParDefaut = this._options.estDeploye || false;
                const LieuEnseignement = {
                    ALEtablissement: 0,
                    ALaMaison: 1
                };
                const lListeCumulsPossibles = new ObjetListeElements_1.ObjetListeElements();
                lListeCumulsPossibles.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.CumulLieuEnseignement.Etablissement'),LieuEnseignement.ALEtablissement));
                lListeCumulsPossibles.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.CumulLieuEnseignement.ALaMaison'),LieuEnseignement.ALaMaison));
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                aListeRessources.parcourir( (aRessource) => {
                    const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aRessource);
                    if (!!aListeRessourcesSelectionnees.getElementParElement(aRessource)) {
                        lRessource.selectionne = true;
                    }
                    let lPere;
                    if (!!lRessource.estEnEnseignementADistance) {
                        lPere = lListeCumulsPossibles.getElementParNumero(LieuEnseignement.ALaMaison);
                    } else {
                        lPere = lListeCumulsPossibles.getElementParNumero(LieuEnseignement.ALEtablissement);
                    }
                    lPere.estUnDeploiement = true;
                    lPere.estDeploye = lEstDeployeParDefaut;
                    lRessource.pere = lPere;
                    lThis.listeRessources.addElement(lRessource);
                }
                );
                lListeCumulsPossibles.parcourir( (aCumul) => {
                    if (aCumul.estUnDeploiement) {
                        lThis.listeRessources.addElement(aCumul);
                    }
                }
                );
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulElevesClasse(aListeRessources, aListeRessourcesSelectionnees) {}
            _construireListeRessourceAvecCumulElevesGroupe(aListeRessources, aListeRessourcesSelectionnees) {}
        }
        exports.ObjetFenetre_SelectionPublic = ObjetFenetre_SelectionPublic;
    },
    fn: 'objetfenetre_selectionpublic.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_SelectionPublic_PN = void 0;
        const ObjetFenetre_SelectionPublic_1 = require("ObjetFenetre_SelectionPublic");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const TypeGenreNiveauResponsabilite_1 = require("TypeGenreNiveauResponsabilite");
        const Enumere_EvenementListe_1 = require("Enumere_EvenementListe");
        const TypeGenreNiveauResponsabilite_2 = require("TypeGenreNiveauResponsabilite");
        const AccessApp_1 = require("AccessApp");
        class ObjetFenetre_SelectionPublic_PN extends ObjetFenetre_SelectionPublic_1.ObjetFenetre_SelectionPublic {
            constructor(...aParams) {
                super(...aParams);
                this.applicationSco = (0,
                AccessApp_1.getApp)();
                this.etatUtilisateurSco = this.applicationSco.getEtatUtilisateur();
                this.avecFiltreSurProfs = ![Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant].includes(GEtatUtilisateur.GenreEspace);
            }
            estPourPrimaire() {
                return this.etatUtilisateurSco.pourPrimaire();
            }
            setDonnees(aParam) {
                this._construireFiltresListe(aParam);
                super.setDonnees(aParam);
            }
            forcerDeploiementSurElementSelectionne() {
                const lElements = this.listeRessources.getListeElements(aElem => aElem.selectionne);
                lElements.parcourir( (aElement) => {
                    const lIndice = this.listeRessources.getIndiceExisteParElement(aElement);
                    if (MethodesObjet_1.MethodesObjet.isNumeric(lIndice)) {
                        if (aElement.pere && aElement.pere.estUnDeploiement) {
                            aElement.pere.estDeploye = true;
                        }
                        this.getInstance(this.identListe).actualiser();
                        this.getInstance(this.identListe).selectionnerLigne({
                            ligne: lIndice,
                            avecEvenementModificationSelection: false,
                            avecScroll: true
                        });
                    }
                }
                );
            }
            _evenementSurListe(aParametres) {
                switch (aParametres.genreEvenement) {
                case Enumere_EvenementListe_1.EGenreEvenementListe.Selection:
                    {
                        if (aParametres.article.estUnDeploiement) {
                            return;
                        }
                        const lRessource = this.listeRessources.getElementParNumero(aParametres.article.getNumero());
                        if (lRessource && !lRessource.estUnDeploiement) {
                            this.listeRessourcesSelectionnees.vider();
                            this.listeRessourcesSelectionnees.add(lRessource);
                            this.validationAuto();
                        }
                        break;
                    }
                default:
                    super._evenementSurListe(aParametres);
                }
            }
            validationAuto() {
                this.fermer();
                this.callback.appel(this.genreRessource, this.listeRessourcesSelectionnees, this.indexBtnValider, this.listeRessourcesSelectionneesAvecInfoEleve);
            }
            _construireListeRessourceAvecCumulPresentielEleve(aListeRessources, aListeRessourcesSelectionnees) {
                const lEstDeployeParDefaut = this._options.estDeploye || false;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                let lCumulPresent;
                let lCumulAbsent;
                let lNbPresents = 0;
                let lNbAbsents = 0;
                aListeRessources.parcourir( (aEleve) => {
                    const lEleve = MethodesObjet_1.MethodesObjet.dupliquer(aEleve);
                    this.listeRessources.add(lEleve);
                    if (!!aListeRessourcesSelectionnees.getElementParElement(lEleve)) {
                        lEleve.selectionne = true;
                    }
                    let lCumul;
                    if (lEleve.estAbsent) {
                        if (!lCumulAbsent) {
                            lCumulAbsent = ObjetElement_1.ObjetElement.create({
                                Numero: 0,
                                estUnDeploiement: true,
                                estDeploye: lEstDeployeParDefaut,
                                cumulAbsent: false
                            });
                            this.listeRessources.add(lCumulAbsent);
                        }
                        lCumul = lCumulAbsent;
                        lNbAbsents++;
                    } else {
                        if (!lCumulPresent) {
                            lCumulPresent = ObjetElement_1.ObjetElement.create({
                                Numero: 0,
                                estUnDeploiement: true,
                                estDeploye: lEstDeployeParDefaut,
                                cumulAbsent: false
                            });
                            this.listeRessources.add(lCumulPresent);
                        }
                        lCumul = lCumulPresent;
                        lNbPresents++;
                    }
                    lEleve.pere = lCumul;
                }
                );
                if (lCumulPresent) {
                    lCumulPresent.setLibelle(ObjetTraduction_1.GTraductions.getValeur('Messagerie.Filtre_AbsencePresenceEleve_SansAbsence_S', [lNbPresents]));
                    if (!lCumulAbsent) {
                        lCumulPresent.estDeploye = true;
                    }
                }
                if (lCumulAbsent) {
                    lCumulAbsent.setLibelle(ObjetTraduction_1.GTraductions.getValeur('Messagerie.Filtre_AbsencePresenceEleve_AvecAbsence_S', [lNbAbsents]));
                    if (!lCumulPresent) {
                        lCumulAbsent.estDeploye = true;
                    }
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init('cumulAbsent'), ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]).trier();
            }
            _construireListeRessourceAvecCumulElevesClasse(aListeRessources, aListeRessourcesSelectionnees) {
                const lCumulGroupe = ObjetElement_1.ObjetElement.create({
                    Libelle: ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.SansClasse'),
                    Numero: 0,
                    Genre: 0,
                    estDeploye: this._options.estDeploye || false,
                    estUnDeploiement: true,
                    __sansClasse__: true
                });
                lCumulGroupe.setActif(true);
                const lCacheRessSelec = new Map();
                aListeRessourcesSelectionnees.parcourir( (aElement) => {
                    if (aElement && aElement.existe()) {
                        let lCle = this.getCleHashElementAvecInformationEleveDansResponsable(aElement);
                        lCacheRessSelec.set(lCle, aElement);
                    }
                }
                );
                let lAvecGroupe = false;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                const lListeCumulClasse = new ObjetListeElements_1.ObjetListeElements();
                const lListeCumulEleve = new ObjetListeElements_1.ObjetListeElements();
                for (let i = 0; i < aListeRessources.count(); i++) {
                    const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aListeRessources.get(i));
                    if (!lRessource.existeNumero() || !lRessource.eleves) {
                        continue;
                    }
                    for (let i = 0; i < lRessource.eleves.count(); i++) {
                        const lEleve = MethodesObjet_1.MethodesObjet.dupliquer(lRessource.eleves.get(i));
                        let lCumulEleve = lListeCumulEleve.getElementParElement(lEleve);
                        if (!lCumulEleve) {
                            lCumulEleve = MethodesObjet_1.MethodesObjet.dupliquer(lEleve);
                            lCumulEleve.estUnDeploiement = true;
                            lCumulEleve.estDeploye = this._options.estDeploye || false;
                            if (!lRessource.classes || lRessource.classes.count() === 0) {
                                lAvecGroupe = true;
                                lCumulEleve.pere = lCumulGroupe;
                            } else if (lEleve.classe) {
                                const lClasse = lEleve.classe;
                                let lNiveau = lListeCumulClasse.getElementParNumero(lClasse.getNumero());
                                if (!lNiveau) {
                                    const lSansClasse = !lClasse.getLibelle();
                                    lNiveau = ObjetElement_1.ObjetElement.create({
                                        Libelle: lClasse.getLibelle() || ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.SansClasse'),
                                        Numero: lClasse.getNumero(),
                                        Genre: 0,
                                        estUnDeploiement: true,
                                        estDeploye: this._options.estDeploye || false,
                                        __sansClasse__: lSansClasse
                                    });
                                    if (lClasse.estClasseMN) {
                                        lNiveau.estClasseMN = true;
                                    }
                                    lListeCumulClasse.addElement(lNiveau);
                                }
                                lCumulEleve.pere = lNiveau;
                                if (lClasse.estClasseMN && lClasse.classesNiv) {
                                    lCumulEleve.classesNiv = lClasse.classesNiv;
                                }
                            }
                            lListeCumulEleve.addElement(lCumulEleve);
                        }
                        const lCopieRessource = MethodesObjet_1.MethodesObjet.dupliquer(lRessource);
                        lCopieRessource.pere = lCumulEleve;
                        lCopieRessource.estDeploye = this._options.estDeploye || false;
                        let lEltSelec = lCacheRessSelec.get(this.getCleHashElementAvecInformationEleveDansResponsable(lCopieRessource));
                        lCopieRessource.selectionne = !!lEltSelec;
                        if (lEltSelec) {
                            lCopieRessource.avecReponse = !!lEltSelec.avecReponse;
                            lCopieRessource.nonModifiable = !!lEltSelec.nonModifiable;
                        }
                        this.listeRessources.add(lCopieRessource);
                    }
                }
                if (lAvecGroupe) {
                    this.listeRessources.addElement(lCumulGroupe);
                }
                for (let i = 0, lNbr = lListeCumulClasse.count(); i < lNbr; i++) {
                    this.listeRessources.addElement(lListeCumulClasse.get(i));
                }
                for (let i = 0, lNbr = lListeCumulEleve.count(); i < lNbr; i++) {
                    this.listeRessources.addElement(lListeCumulEleve.get(i));
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init( (D) => {
                    return !D.__sansClasse__;
                }
                ), ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireListeRessourceAvecCumulElevesGroupe(aListeRessources, aListeRessourcesSelectionnees) {
                const lCumulSansGroupe = ObjetElement_1.ObjetElement.create({
                    Libelle: ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.SansGroupe'),
                    Numero: 0,
                    Genre: ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.groupe,
                    estDeploye: this._options.estDeploye || false,
                    estUnDeploiement: true,
                    __sans__: true
                });
                lCumulSansGroupe.setActif(true);
                const lCacheRessSelec = new Map();
                aListeRessourcesSelectionnees.parcourir( (aElement) => {
                    if (aElement && aElement.existe()) {
                        let lCle = this.getCleHashElementAvecInformationEleveDansResponsable(aElement);
                        lCacheRessSelec.set(lCle, aElement);
                    }
                }
                );
                const lAjouterRessource = (aParams) => {
                    let lCumulEleve = lListeCumulEleve.getElementParFiltre( (aElem) => {
                        return aElem.getNumero() === aParams.eleve.getNumero() && aElem.pere && aElem.pere === aParams.cumulGroupe;
                    }
                    );
                    if (!lCumulEleve) {
                        lCumulEleve = MethodesObjet_1.MethodesObjet.dupliquer(aParams.eleve);
                        lCumulEleve.estUnDeploiement = true;
                        lCumulEleve.estDeploye = !!this._options.estDeploye;
                        lCumulEleve.pere = aParams.cumulGroupe;
                        lListeCumulEleve.addElement(lCumulEleve);
                    }
                    const lCopieRessource = MethodesObjet_1.MethodesObjet.dupliquer(aParams.responsable);
                    lCopieRessource.pere = lCumulEleve;
                    lCopieRessource.estDeploye = !!this._options.estDeploye;
                    let lEltSelec = lCacheRessSelec.get(this.getCleHashElementAvecInformationEleveDansResponsable(lCopieRessource));
                    lCopieRessource.selectionne = !!lEltSelec;
                    this.listeRessources.add(lCopieRessource);
                }
                ;
                let lAvecCumulSansGroupe = false;
                this.listeRessources = new ObjetListeElements_1.ObjetListeElements();
                const lListeCumulGroupe = new ObjetListeElements_1.ObjetListeElements();
                const lListeCumulEleve = new ObjetListeElements_1.ObjetListeElements();
                for (let i = 0; i < aListeRessources.count(); i++) {
                    const lRessource = MethodesObjet_1.MethodesObjet.dupliquer(aListeRessources.get(i));
                    if (!lRessource.existeNumero() || !lRessource.eleves) {
                        continue;
                    }
                    for (let i = 0; i < lRessource.eleves.count(); i++) {
                        const lEleve = MethodesObjet_1.MethodesObjet.dupliquer(lRessource.eleves.get(i));
                        if (!lEleve.groupes || lEleve.groupes.count() === 0) {
                            lAvecCumulSansGroupe = true;
                            lAjouterRessource({
                                cumulGroupe: lCumulSansGroupe,
                                eleve: lEleve,
                                responsable: lRessource
                            });
                        } else {
                            for (let j = 0, lNbr2 = lEleve.groupes.count(); j < lNbr2; j++) {
                                const lGroupe = MethodesObjet_1.MethodesObjet.dupliquer(lEleve.groupes.get(j));
                                let lCumulGroupe = lListeCumulGroupe.getElementParNumero(lGroupe.getNumero());
                                if (!lCumulGroupe) {
                                    const lSansClasse = !lEleve.groupes.getLibelle(j);
                                    lCumulGroupe = ObjetElement_1.ObjetElement.create({
                                        Libelle: lEleve.groupes.getLibelle(j) || ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.SansGroupe'),
                                        Numero: lEleve.groupes.getNumero(j),
                                        Genre: ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.groupe,
                                        estUnDeploiement: true,
                                        estDeploye: !!this._options.estDeploye,
                                        __sans__: lSansClasse
                                    });
                                    lListeCumulGroupe.addElement(lCumulGroupe);
                                }
                                lAjouterRessource({
                                    cumulGroupe: lCumulGroupe,
                                    eleve: lEleve,
                                    responsable: lRessource
                                });
                            }
                        }
                    }
                }
                if (lAvecCumulSansGroupe) {
                    this.listeRessources.addElement(lCumulSansGroupe);
                }
                for (let i = 0, lNbr = lListeCumulGroupe.count(); i < lNbr; i++) {
                    this.listeRessources.addElement(lListeCumulGroupe.get(i));
                }
                for (let i = 0, lNbr = lListeCumulEleve.count(); i < lNbr; i++) {
                    this.listeRessources.addElement(lListeCumulEleve.get(i));
                }
                this.listeRessources.setTri([ObjetTri_1.ObjetTri.initRecursif('pere', [ObjetTri_1.ObjetTri.init( (D) => {
                    return !D.__sans__;
                }
                ), ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')])]);
                this.listeRessources.trier();
            }
            _construireFiltresListe(aParam) {
                const lEvnFiltre = () => {
                    this.getInstance(this.identListe).actualiser();
                }
                ;
                if (aParam.genreRessource === Enumere_Ressource_1.EGenreRessource.Enseignant && this.avecFiltreSurProfs) {
                    let lProfsPrincipaux = false;
                    let lProfsTuteurs = false;
                    const lParamsFiltre = {
                        funcFiltreVisible: (aArticle) => {
                            const lAvecProfsPrincipaux = lProfsPrincipaux && aArticle.estProfPrincipal;
                            const lAvecProfsTuteurs = lProfsTuteurs && aArticle.estProfTuteur;
                            return lAvecProfsPrincipaux || lAvecProfsTuteurs || (!lProfsPrincipaux && !lProfsTuteurs);
                        }
                        ,
                        htmlFiltre: () => {
                            const lJSXFiltreProfPrincipaux = () => {
                                return {
                                    getValue: () => {
                                        return lProfsPrincipaux;
                                    }
                                    ,
                                    setValue: (aValue) => {
                                        lProfsPrincipaux = aValue;
                                        lEvnFiltre();
                                    }
                                };
                            }
                            ;
                            const lJSXFiltreTuteurs = () => {
                                return {
                                    getValue: () => {
                                        return lProfsTuteurs;
                                    }
                                    ,
                                    setValue: (aValue) => {
                                        lProfsTuteurs = aValue;
                                        lEvnFiltre();
                                    }
                                };
                            }
                            ;
                            const H = [];
                            H.push('<fieldset>');
                            H.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("legend", null, ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.filtreAfficher')), IE.jsx.str("div", {
                                class: "m-top-l"
                            }, IE.jsx.str("ie-checkbox", {
                                "ie-model": lJSXFiltreProfPrincipaux.bind(this)
                            }, this.estPourPrimaire() ? ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.filtreProfReferents') : ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.filtreProfPrincipaux')))));
                            if (!this.estPourPrimaire()) {
                                H.push(IE.jsx.str("div", {
                                    class: "m-top-l"
                                }, IE.jsx.str("ie-checkbox", {
                                    "ie-model": lJSXFiltreTuteurs.bind(this)
                                }, ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.filtreProfTuteurs'))));
                            }
                            H.push('</fieldset>');
                            return H.join('');
                        }
                        ,
                        filtreParDefaut: () => {
                            return !lProfsPrincipaux && !lProfsTuteurs;
                        }
                        ,
                        reinitFiltres: () => {
                            lProfsPrincipaux = false;
                            lProfsTuteurs = false;
                            lEvnFiltre();
                        }
                    };
                    aParam.parametresFiltre = lParamsFiltre;
                    return;
                }
                if (aParam.genreRessource === Enumere_Ressource_1.EGenreRessource.Eleve && this.etatUtilisateurSco.getUtilisateur().getGenre() === Enumere_Ressource_1.EGenreRessource.Enseignant && this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.communication.toutesClasses)) {
                    let lUniquementEnseigne = false;
                    const lParamsFiltre = {
                        funcFiltreVisible: (aArticle) => {
                            return !lUniquementEnseigne || !!aArticle.enseigne;
                        }
                        ,
                        htmlFiltre: () => {
                            const lJSXCheckboxUniquementElevesEnseignes = () => {
                                return {
                                    getValue: () => {
                                        return lUniquementEnseigne;
                                    }
                                    ,
                                    setValue: (aValue) => {
                                        lUniquementEnseigne = aValue;
                                        lEvnFiltre();
                                    }
                                };
                            }
                            ;
                            const H = [];
                            H.push(IE.jsx.str("ie-checkbox", {
                                "ie-model": lJSXCheckboxUniquementElevesEnseignes.bind(this)
                            }, ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.FiltreUniquementElevesEnseigne')));
                            return H.join('');
                        }
                        ,
                        filtreParDefaut: () => {
                            return !lUniquementEnseigne;
                        }
                        ,
                        reinitFiltres: () => {
                            lUniquementEnseigne = false;
                            lEvnFiltre();
                        }
                    };
                    aParam.parametresFiltre = lParamsFiltre;
                }
                if (aParam.genreRessource === Enumere_Ressource_1.EGenreRessource.Responsable && aParam.listeNiveauxResponsabilite && (aParam.listeNiveauxResponsabilite.count() > 1)) {
                    const llisteNiveauxResponsabilite = aParam.listeNiveauxResponsabilite;
                    const lParamsFiltre = {
                        funcFiltreVisible: (aArticle) => {
                            let lVisible = false;
                            if (aArticle.getGenre() !== Enumere_Ressource_1.EGenreRessource.Responsable) {
                                return true;
                            }
                            if (this._options.avecInformationEleveDansListeResponsable) {
                                const lEleveDuResponsable = aArticle.eleves && aArticle.eleves.getElementParNumero(aArticle.pere.getNumero());
                                if (lEleveDuResponsable && lEleveDuResponsable.niveauResponsabilite) {
                                    const lNivResponsablilite = llisteNiveauxResponsabilite.getElementParElement(lEleveDuResponsable.niveauResponsabilite);
                                    if (lNivResponsablilite) {
                                        lVisible = 'actif'in lNivResponsablilite ? lNivResponsablilite.actif : true;
                                    }
                                }
                            } else if (aArticle.niveauResponsabilite) {
                                llisteNiveauxResponsabilite.parcourir( (aNiveauResponsabilite) => {
                                    if (aNiveauResponsabilite.getGenre() === aArticle.niveauResponsabilite.getGenre()) {
                                        lVisible = aNiveauResponsabilite.actif === undefined ? true : aNiveauResponsabilite.actif;
                                        return false;
                                    }
                                }
                                );
                            }
                            return lVisible;
                        }
                        ,
                        htmlFiltre: () => {
                            const lJSXCheckboxNiveauResponsabilite = (aNiveauResponsabilite) => {
                                return {
                                    getValue: () => {
                                        let lActif = false;
                                        if (aNiveauResponsabilite) {
                                            if (aNiveauResponsabilite.actif === undefined) {
                                                aNiveauResponsabilite.actif = TypeGenreNiveauResponsabilite_1.TypeGenreNiveauResponsabiliteUtil.estFiltreParDefautActif(aNiveauResponsabilite.getGenre());
                                            }
                                            lActif = aNiveauResponsabilite.actif;
                                        }
                                        return lActif;
                                    }
                                    ,
                                    setValue: (aValue) => {
                                        if (aNiveauResponsabilite) {
                                            aNiveauResponsabilite.actif = aValue;
                                        }
                                        lEvnFiltre();
                                    }
                                };
                            }
                            ;
                            const H = [];
                            llisteNiveauxResponsabilite.parcourir( (aNiveauResponsabilite, aIndex) => {
                                const lClass = [];
                                const lEstEspaceParent = [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent].includes(GEtatUtilisateur.GenreEspace);
                                const lEstAutreContacts = aNiveauResponsabilite.getGenre() === TypeGenreNiveauResponsabilite_2.TypeGenreNiveauResponsabilite.gnrContact;
                                if (lEstEspaceParent && lEstAutreContacts) {
                                    return;
                                }
                                if (aIndex < llisteNiveauxResponsabilite.count() - 1) {
                                    lClass.push('p-bottom');
                                }
                                H.push(IE.jsx.str("div", {
                                    class: lClass
                                }, IE.jsx.str("ie-checkbox", {
                                    "ie-model": lJSXCheckboxNiveauResponsabilite.bind(this, aNiveauResponsabilite)
                                }, aNiveauResponsabilite.getLibelle())));
                            }
                            );
                            return H.join('');
                        }
                        ,
                        filtreParDefaut: () => {
                            let lFilteDef = true;
                            llisteNiveauxResponsabilite.parcourir( (aNiveauResponsabilite) => {
                                if (lFilteDef) {
                                    if (TypeGenreNiveauResponsabilite_1.TypeGenreNiveauResponsabiliteUtil.estFiltreParDefautActif(aNiveauResponsabilite.getGenre())) {
                                        lFilteDef = aNiveauResponsabilite.actif;
                                    } else {
                                        lFilteDef = !aNiveauResponsabilite.actif;
                                    }
                                    if (!lFilteDef) {
                                        return false;
                                    }
                                }
                            }
                            );
                            return lFilteDef;
                        }
                        ,
                        reinitFiltres: () => {
                            llisteNiveauxResponsabilite.parcourir( (aNiveauResponsabilite) => {
                                aNiveauResponsabilite.actif = TypeGenreNiveauResponsabilite_1.TypeGenreNiveauResponsabiliteUtil.estFiltreParDefautActif(aNiveauResponsabilite.getGenre());
                            }
                            );
                            lEvnFiltre();
                        }
                    };
                    aParam.parametresFiltre = lParamsFiltre;
                    if (!('avecFiltresVisibles'in aParam)) {
                        aParam.avecFiltresVisibles = true;
                    }
                }
            }
        }
        exports.ObjetFenetre_SelectionPublic_PN = ObjetFenetre_SelectionPublic_PN;
    },
    fn: 'objetfenetre_selectionpublic_pn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesUtilitaireMessagerie = void 0;
        require("UtilitaireMessagerie.css");
        exports.StylesUtilitaireMessagerie = {
            utilMessParticipants: 'utilMessParticipants',
            transfert: 'transfert',
            participants_public: 'participants_public',
            icone: 'icone',
            utilMess_dest: 'utilMess_dest',
            destRefus: 'dest-refus',
            utilMess_texte: 'utilMess_texte',
            utilMess_etiquette: 'utilMess_etiquette',
            utilMess_etiquette_liste: 'utilMess_etiquette_liste',
            sansEtiquette: 'sans-etiquette',
            utilMess_conteneur_visu_messages: 'utilMess_conteneur_visu_messages',
            avecMaxHeight: 'avecMaxHeight',
            utilMess_visu_messages: 'utilMess_visu_messages',
            emetteur: 'emetteur',
            message_titre: 'message_titre',
            aparte: 'aparte',
            message_titre_droite: 'message_titre_droite',
            btnImage: 'btnImage',
            messageBtnDest: 'message-btn-dest',
            visu_contenu: 'visu_contenu',
            visu_signale: 'visu_signale',
            ieBouton: 'ieBouton',
            visu_transfert: 'visu_transfert',
            visu_transfert_indent: 'visu_transfert_indent',
            listeMessagerie_messConfirm: 'listeMessagerie_messConfirm',
            messagerieTitreBandeauMessage: 'messagerie-titre-bandeau-message',
            iconTitre: 'icon-titre',
            titre: 'titre',
            listeDestinataires: 'liste-destinataires',
            messagerieSelecEtiquette: 'messagerie-selec-etiquette'
        };
    },
    fn: 'utilitairemessagerie.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreDiscussion = void 0;
        var TypeGenreDiscussion;
        (function(TypeGenreDiscussion) {
            TypeGenreDiscussion[TypeGenreDiscussion["GD_Discussion"] = 0] = "GD_Discussion";
            TypeGenreDiscussion[TypeGenreDiscussion["GD_ContactVS"] = 1] = "GD_ContactVS";
            TypeGenreDiscussion[TypeGenreDiscussion["GD_Conversation"] = 2] = "GD_Conversation";
            TypeGenreDiscussion[TypeGenreDiscussion["GD_Alerte"] = 3] = "GD_Alerte";
            TypeGenreDiscussion[TypeGenreDiscussion["GD_Harcelement"] = 4] = "GD_Harcelement";
        }
        )(TypeGenreDiscussion || (exports.TypeGenreDiscussion = TypeGenreDiscussion = {}));
    },
    fn: 'typegenrediscussion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeOrigineCreationEtiquetteMessageUtil = exports.TypeOrigineCreationEtiquetteMessage = void 0;
        var TypeOrigineCreationEtiquetteMessage;
        (function(TypeOrigineCreationEtiquetteMessage) {
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Utilisateur"] = 0] = "OCEM_Utilisateur";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Reception"] = 1] = "OCEM_Pre_Reception";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Archive"] = 2] = "OCEM_Pre_Archive";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Envoye"] = 3] = "OCEM_Pre_Envoye";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Brouillon"] = 4] = "OCEM_Pre_Brouillon";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Poubelle"] = 5] = "OCEM_Pre_Poubelle";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Signalement"] = 6] = "OCEM_Pre_Signalement";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Expl_Bleu"] = 7] = "OCEM_Expl_Bleu";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Expl_Vert"] = 8] = "OCEM_Expl_Vert";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Expl_Rouge"] = 9] = "OCEM_Expl_Rouge";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_CarnetLiaison"] = 10] = "OCEM_Pre_CarnetLiaison";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Alerte"] = 11] = "OCEM_Pre_Alerte";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_ContactVS"] = 12] = "OCEM_Pre_ContactVS";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Conversation"] = 13] = "OCEM_Pre_Conversation";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_InvisiblePlageDesactivee"] = 14] = "OCEM_Pre_InvisiblePlageDesactivee";
            TypeOrigineCreationEtiquetteMessage[TypeOrigineCreationEtiquetteMessage["OCEM_Pre_Harcelement"] = 15] = "OCEM_Pre_Harcelement";
        }
        )(TypeOrigineCreationEtiquetteMessage || (exports.TypeOrigineCreationEtiquetteMessage = TypeOrigineCreationEtiquetteMessage = {}));
        const TypeOrigineCreationEtiquetteMessageUtil = {
            estEtiquettePerso(aGenreEtiquette) {
                return TypeOrigineCreationEtiquetteMessageUtil.tabEtiquetesPersos.indexOf(aGenreEtiquette) >= 0;
            },
            tabEtiquetesPersos: [TypeOrigineCreationEtiquetteMessage.OCEM_Utilisateur, TypeOrigineCreationEtiquetteMessage.OCEM_Expl_Bleu, TypeOrigineCreationEtiquetteMessage.OCEM_Expl_Vert, TypeOrigineCreationEtiquetteMessage.OCEM_Expl_Rouge]
        };
        exports.TypeOrigineCreationEtiquetteMessageUtil = TypeOrigineCreationEtiquetteMessageUtil;
    },
    fn: 'typeoriginecreationetiquettemessage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeHttpReponseMessage = void 0;
        var TypeHttpReponseMessage;
        (function(TypeHttpReponseMessage) {
            TypeHttpReponseMessage[TypeHttpReponseMessage["rm_Envoi"] = 0] = "rm_Envoi";
            TypeHttpReponseMessage[TypeHttpReponseMessage["rm_EnvoiATous"] = 1] = "rm_EnvoiATous";
            TypeHttpReponseMessage[TypeHttpReponseMessage["rm_Relance"] = 2] = "rm_Relance";
            TypeHttpReponseMessage[TypeHttpReponseMessage["rm_EnvoiATousSaufParentEleve"] = 3] = "rm_EnvoiATousSaufParentEleve";
            TypeHttpReponseMessage[TypeHttpReponseMessage["rm_RelanceATousSaufParentEleve"] = 4] = "rm_RelanceATousSaufParentEleve";
            TypeHttpReponseMessage[TypeHttpReponseMessage["rm_ClotureAlerte"] = 5] = "rm_ClotureAlerte";
        }
        )(TypeHttpReponseMessage || (exports.TypeHttpReponseMessage = TypeHttpReponseMessage = {}));
    },
    fn: 'typehttpreponsemessage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteListeRessourcesPourCommunication = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetRequeteListeRessourcesPourCommunication extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        exports.ObjetRequeteListeRessourcesPourCommunication = ObjetRequeteListeRessourcesPourCommunication;
        CollectionRequetes_1.Requetes.inscrire('ListeRessourcesPourCommunication', ObjetRequeteListeRessourcesPourCommunication);
    },
    fn: 'objetrequetelisteressourcespourcommunication.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.getCumulPourFenetrePublic = void 0;
        const ObjetFenetre_SelectionPublic_1 = require("ObjetFenetre_SelectionPublic");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const getCumulPourFenetrePublic = function(aGenre, aChecked, aNombre) {
            switch (aGenre) {
            case Enumere_Ressource_1.EGenreRessource.Eleve:
                return aChecked === true ? ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.initial : ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.classe;
            case Enumere_Ressource_1.EGenreRessource.Responsable:
                return aNombre > 200 ? ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.initial : ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.sans;
            case Enumere_Ressource_1.EGenreRessource.Classe:
            case Enumere_Ressource_1.EGenreRessource.Enseignant:
            case Enumere_Ressource_1.EGenreRessource.Personnel:
            case Enumere_Ressource_1.EGenreRessource.MaitreDeStage:
            case Enumere_Ressource_1.EGenreRessource.InspecteurPedagogique:
                return ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.sans;
            default:
                ;return;
            }
        };
        exports.getCumulPourFenetrePublic = getCumulPourFenetrePublic;
    },
    fn: 'utilitairefenetreselectionpublic.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteListeDiffusion = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetRequeteListeDiffusion extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        exports.ObjetRequeteListeDiffusion = ObjetRequeteListeDiffusion;
        CollectionRequetes_1.Requetes.inscrire('ListeDiffusion', ObjetRequeteListeDiffusion);
    },
    fn: 'objetrequetelistediffusion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_Liste = void 0;
        const Enumere_EvenementListe_1 = require("Enumere_EvenementListe");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetListe_1 = require("ObjetListe");
        const IEHtml_1 = require("IEHtml");
        class ObjetFenetre_Liste extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.modeActivationBtnValider = {
                    surModification: 1,
                    auMoinsUnEltSelectionne: 2,
                    toujoursActifs: 3,
                    autre: 4
                };
                this.valeurFiltre = false;
                this.fermerSurValidation = true;
                this.setOptionsFenetre({
                    modeActivationBtnValider: this.modeActivationBtnValider.surModification,
                    avecVerificationLigneSelectionne: false
                });
            }
            construireInstances() {
                this.identListe = this.add(ObjetListe_1.ObjetListe, this.evenementSurListe, this.initialiserListe);
            }
            verifierActivationBtnValider(aBouton) {
                return false;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    fenetreBtn: {
                        getDisabled: function(aBoutonRepeat) {
                            if (aInstance.optionsFenetre.modeActivationBtnValider === aInstance.modeActivationBtnValider.autre) {
                                return !aInstance.verifierActivationBtnValider(aBoutonRepeat);
                            }
                            if (aInstance.optionsFenetre.modeActivationBtnValider === aInstance.modeActivationBtnValider.toujoursActifs) {
                                return false;
                            }
                            if ((aInstance.optionsFenetre.modeActivationBtnValider === aInstance.modeActivationBtnValider.auMoinsUnEltSelectionne) && (aBoutonRepeat.element.index === 1)) {
                                let lDisabled = true;
                                aInstance.getInstance(aInstance.identListe).getListeArticles().parcourir( (aArticle) => {
                                    if (aArticle.cmsActif) {
                                        lDisabled = false;
                                        return false;
                                    }
                                }
                                );
                                return lDisabled;
                            } else {
                                return aInstance.optionsFenetre.listeBoutonsInactifs[aBoutonRepeat.element.index] === true;
                            }
                        }
                    },
                    filtre: {
                        visible: function() {
                            return aInstance.paramsListe ? !!aInstance.paramsListe.callbckFiltre : false;
                        },
                        check: {
                            getValue: function() {
                                return aInstance.valeurFiltre;
                            },
                            setValue: function(aValue) {
                                aInstance._evenementSurCB(aValue);
                            }
                        },
                        label: function() {
                            return aInstance.paramsListe && aInstance.paramsListe.labelFiltre ? aInstance.paramsListe.labelFiltre : '';
                        }
                    }
                });
            }
            initialiserListe(aInstance) {
                var _a, _b;
                const lOptions = {
                    listeCreations: this.paramsListe.creations !== null ? this.paramsListe.creations : undefined,
                    avecLigneCreation: this.paramsListe.avecLigneCreation !== null ? this.paramsListe.avecLigneCreation : undefined,
                    titreCreation: this.paramsListe.titreCreation !== null ? this.paramsListe.titreCreation : undefined
                };
                if (Array.isArray(this.paramsListe.tailles)) {
                    lOptions.colonnes = [];
                    this.paramsListe.tailles.forEach( (aVal) => {
                        lOptions.colonnes.push({
                            taille: aVal
                        });
                    }
                    );
                }
                if (Array.isArray(this.paramsListe.titres)) {
                    this.paramsListe.titres.forEach( (aVal, aIndex) => {
                        if (lOptions.colonnes[aIndex]) {
                            lOptions.colonnes[aIndex].titre = aVal;
                        }
                    }
                    );
                }
                if (Array.isArray(this.paramsListe.hintTitres)) {
                    this.paramsListe.hintTitres.forEach( (aVal, aIndex) => {
                        if (lOptions.colonnes[aIndex]) {
                            lOptions.colonnes[aIndex].hint = aVal;
                        }
                    }
                    );
                }
                aInstance.setOptionsListe(lOptions);
                if (this.paramsListe.colonnesCachees) {
                    aInstance.setOptionsListe({
                        colonnesCachees: this.paramsListe.colonnesCachees
                    });
                }
                if (this.paramsListe.editable !== undefined) {
                    aInstance.setOptionsListe({
                        nonEditable: !this.paramsListe.editable
                    });
                }
                if (this.paramsListe.optionsListe) {
                    aInstance.setOptionsListe(this.paramsListe.optionsListe);
                }
                aInstance.setOptionsListe({
                    ariaLabel: (_b = (_a = this.paramsListe.optionsListe) === null || _a === void 0 ? void 0 : _a.ariaLabel) !== null && _b !== void 0 ? _b : ( () => {
                        return this.optionsFenetre.titre;
                    }
                    )
                });
            }
            setDonnees(aObjetDonneesListe, aAvecValidation, aLigneSelectionnee, aParamsSetDonneesListe) {
                this.afficher();
                this.avecValidation = aAvecValidation;
                this.setBoutonActif(1, false);
                if (this.avecValidation) {
                    this.setBoutonVisible(1, false);
                }
                this.getInstance(this.identListe).setDonnees(aObjetDonneesListe, aLigneSelectionnee, aParamsSetDonneesListe);
                if (!!this.paramsListe && this.paramsListe.optionsListe && this.paramsListe.optionsListe.hauteurAdapteContenu) {
                    this.positionnerFenetre();
                }
            }
            actualiserListe(aConserverSelection, aActivationBouton) {
                this.getInstance(this.identListe).actualiser(aConserverSelection);
                if (aActivationBouton) {
                    this.setBoutonActif(1, aActivationBouton);
                }
            }
            annulerCreation() {
                this.getInstance(this.identListe).annulerCreation();
            }
            composeContenu() {
                const T = [];
                T.push(`<div class="flex-contain cols full-size flex-gap-l">`);
                T.push(`  <div class="fix-bloc m-left-s" ie-display="filtre.visible"><ie-checkbox ie-model="filtre.check" ie-html="filtre.label"></ie-checkbox></div>`);
                T.push(`  <div class="fluid-bloc" id="${this.getNomInstance(this.identListe)}"></div>`);
                T.push(`</div>`);
                return T.join('');
            }
            evenementSurListe(aParametres) {
                switch (aParametres.genreEvenement) {
                case Enumere_EvenementListe_1.EGenreEvenementListe.Selection:
                case Enumere_EvenementListe_1.EGenreEvenementListe.SelectionClick:
                    if (this.optionsFenetre.modeActivationBtnValider !== this.modeActivationBtnValider.autre) {
                        this.setBoutonActif(1, (aParametres.ligne !== -1) || !this.optionsFenetre.avecVerificationLigneSelectionne);
                    }
                    if (this.avecValidation) {
                        this.surValidation(1);
                    }
                    break;
                case Enumere_EvenementListe_1.EGenreEvenementListe.SelectionDblClick:
                    this.surValidation(1);
                    break;
                case Enumere_EvenementListe_1.EGenreEvenementListe.Suppression:
                    if (this.optionsFenetre.modeActivationBtnValider !== this.modeActivationBtnValider.autre) {
                        this.setBoutonActif(1, false);
                    }
                    break;
                case Enumere_EvenementListe_1.EGenreEvenementListe.Creation:
                    if (this.paramsListe.avecLigneCreation) {
                        if (this.paramsListe.callbckCreation) {
                            this.changementListe = true;
                            return this.paramsListe.callbckCreation(aParametres.colonne, aParametres.ligne);
                        }
                    }
                    break;
                case Enumere_EvenementListe_1.EGenreEvenementListe.ApresCreation:
                    if (this.optionsFenetre.modeActivationBtnValider !== this.modeActivationBtnValider.autre) {
                        this.setBoutonActif(1, true);
                    }
                    break;
                case Enumere_EvenementListe_1.EGenreEvenementListe.ApresEdition:
                    this.setBoutonActif(1, true);
                    break;
                case Enumere_EvenementListe_1.EGenreEvenementListe.Edition:
                    if (this.paramsListe.callbckEdition) {
                        this.changementListe = true;
                        return this.paramsListe.callbckEdition(aParametres);
                    }
                    break;
                case Enumere_EvenementListe_1.EGenreEvenementListe.ModificationCBLigne:
                    this.setBoutonActif(1, true);
                    break;
                case Enumere_EvenementListe_1.EGenreEvenementListe.ApresSuppression:
                    this.setBoutonActif(1, true);
                    break;
                }
                if ([Enumere_EvenementListe_1.EGenreEvenementListe.Creation, Enumere_EvenementListe_1.EGenreEvenementListe.Edition, Enumere_EvenementListe_1.EGenreEvenementListe.ApresEdition, Enumere_EvenementListe_1.EGenreEvenementListe.Suppression, Enumere_EvenementListe_1.EGenreEvenementListe.ApresSuppression, Enumere_EvenementListe_1.EGenreEvenementListe.ModificationCBLigne].includes(aParametres.genreEvenement)) {
                    this.changementListe = true;
                }
            }
            surValidation(aNumeroBouton) {
                const lMaSelection = this.getInstance(this.identListe).getSelection();
                if (this.fermerSurValidation) {
                    this.fermer();
                }
                if (this.optionsFenetre.callback) {
                    this.optionsFenetre.callback(aNumeroBouton, lMaSelection, this.changementListe);
                }
                this.callback.appel(aNumeroBouton, lMaSelection, this.changementListe);
                IEHtml_1.default.refresh();
            }
            _evenementSurCB(aValue) {
                this.valeurFiltre = !!aValue;
                if (this.paramsListe.callbckFiltre) {
                    this.paramsListe.callbckFiltre(this.valeurFiltre, this);
                }
            }
            setFermerSurValidation(aFermer) {
                this.fermerSurValidation = aFermer;
            }
            setListeElementsSelection(aListeElements) {
                this.getInstance(this.identListe).setListeElementsSelection(aListeElements);
            }
            getListe() {
                return this.getInstance(this.identListe);
            }
        }
        exports.ObjetFenetre_Liste = ObjetFenetre_Liste;
    },
    fn: 'objetfenetre_liste.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_SelectionListeDiffusion = void 0;
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetFenetre_Liste_1 = require("ObjetFenetre_Liste");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetListe_1 = require("ObjetListe");
        const AccessApp_1 = require("AccessApp");
        class ObjetFenetre_SelectionListeDiffusion extends ObjetFenetre_Liste_1.ObjetFenetre_Liste {
            constructor(...aParams) {
                super(...aParams);
                this.appSco = (0,
                AccessApp_1.getApp)();
                this.uniquementMesListes = this.appSco.parametresUtilisateur.get('listeDiffusion.uniquementMesListes') || false;
                this.setOptionsFenetre({
                    modale: true,
                    titre: ObjetTraduction_1.GTraductions.getValeur('listeDiffusion.titre'),
                    largeur: 300,
                    hauteur: 470,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler'), ObjetTraduction_1.GTraductions.getValeur('Valider')]
                });
            }
            initialiserListe(aInstance) {
                aInstance.setOptionsListe({
                    ariaLabel: this.optionsFenetre.titre,
                    skin: ObjetListe_1.ObjetListe.skin.flatDesign
                });
            }
            composeContenu() {
                const lcbLesMiens = () => {
                    return {
                        getValue: () => {
                            return this.appSco.parametresUtilisateur.get('listeDiffusion.uniquementMesListes');
                        }
                        ,
                        setValue: (aValue) => {
                            this.evenementSurCB(aValue);
                        }
                    };
                }
                ;
                return (IE.jsx.str("div", {
                    class: "flex-contain cols full-size"
                }, IE.jsx.str("div", {
                    class: "fix-bloc p-all-l"
                }, IE.jsx.str("ie-checkbox", {
                    "ie-model": lcbLesMiens
                }, ObjetChaine_1.GChaine.insecable(ObjetTraduction_1.GTraductions.getValeur('listeDiffusion.lesMiens')))), IE.jsx.str("div", {
                    class: "fluid-bloc",
                    id: this.getNomInstance(this.identListe)
                })));
            }
            evenementSurCB(aValue) {
                this.uniquementMesListes = !!aValue;
                this.appSco.parametresUtilisateur.set('listeDiffusion.uniquementMesListes', this.uniquementMesListes);
                if (this.getInstance(this.identListe) && this.getInstance(this.identListe).getDonneesListe()) {
                    this.getInstance(this.identListe).getDonneesListe().setUniquementMesListes(this.uniquementMesListes);
                    this.getInstance(this.identListe).actualiser(true, false);
                }
            }
        }
        exports.ObjetFenetre_SelectionListeDiffusion = ObjetFenetre_SelectionListeDiffusion;
    },
    fn: 'objetfenetre_selectionlistediffusion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.DonneesListe_SelectionDiffusion = void 0;
        const AccessApp_1 = require("AccessApp");
        const ObjetDonneesListeFlatDesign_1 = require("ObjetDonneesListeFlatDesign");
        class DonneesListe_SelectionDiffusion extends ObjetDonneesListeFlatDesign_1.ObjetDonneesListeFlatDesign {
            constructor(aDonnees) {
                super(aDonnees);
                this.uniquementMesListes = (0,
                AccessApp_1.getApp)().parametresUtilisateur.get('listeDiffusion.uniquementMesListes') || false;
                this.setOptions({
                    avecCB: true,
                    avecCocheCBSurLigne: true,
                    avecBoutonActionLigne: false,
                    avecEvnt_Selection: true
                });
            }
            setUniquementMesListes(aUniquementMesListes) {
                this.uniquementMesListes = aUniquementMesListes;
            }
            getVisible(D) {
                return !this.uniquementMesListes || D.estAuteur;
            }
            getValueCB(aParams) {
                return aParams.article ? !!aParams.article.cmsActif : false;
            }
            setValueCB(aParams, aValue) {
                aParams.article.cmsActif = aValue;
            }
        }
        exports.DonneesListe_SelectionDiffusion = DonneesListe_SelectionDiffusion;
    },
    fn: 'donneesliste_selectiondiffusion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireMessagerie = UtilitaireMessagerie;
        require("UtilitaireMessagerie.css");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetStyle_1 = require("ObjetStyle");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetTri_1 = require("ObjetTri");
        const TypeGenreDiscussion_1 = require("TypeGenreDiscussion");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const TypeOrigineCreationEtiquetteMessage_1 = require("TypeOrigineCreationEtiquetteMessage");
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const Enumere_Action_1 = require("Enumere_Action");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const TypeHttpReponseMessage_1 = require("TypeHttpReponseMessage");
        const ObjetSupport_1 = require("ObjetSupport");
        const TypeStatutConnexion_1 = require("TypeStatutConnexion");
        const tag_1 = require("tag");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const UtilitaireUrl_1 = require("UtilitaireUrl");
        const ObjetRequeteListePublics_1 = require("ObjetRequeteListePublics");
        const ObjetRequeteListeRessourcesPourCommunication_1 = require("ObjetRequeteListeRessourcesPourCommunication");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetFenetre_SelectionPublic_1 = require("ObjetFenetre_SelectionPublic");
        const ObjetFenetre_SelectionPublic_PN_1 = require("ObjetFenetre_SelectionPublic_PN");
        const UtilitaireFenetreSelectionPublic_1 = require("UtilitaireFenetreSelectionPublic");
        const Cache_1 = require("Cache");
        const ObjetRequeteListeDiffusion_1 = require("ObjetRequeteListeDiffusion");
        const ObjetFenetre_SelectionListeDiffusion_1 = require("ObjetFenetre_SelectionListeDiffusion");
        const DonneesListe_SelectionDiffusion_1 = require("DonneesListe_SelectionDiffusion");
        const MethodesObjet_1 = require("MethodesObjet");
        const GUID_1 = require("GUID");
        const jsx_1 = require("jsx");
        const ObjetNavigateur_1 = require("ObjetNavigateur");
        const Divers_css_1 = require("Divers.css");
        const C_TailleObjetMessage = 200;
        function UtilitaireMessagerie() {}
        UtilitaireMessagerie.palierNbMessages = 20;
        UtilitaireMessagerie.C_TailleObjetMessage = C_TailleObjetMessage;
        UtilitaireMessagerie.getDiscussion = function(aParam) {
            const H = [];
            let J;
            const lParams = Object.assign({
                listeMessages: null,
                controleur: null,
                pere: null,
                callbackCommandesMessage: null,
                callbackBtnSignalantPourSupp: null,
                callbackAfficherSuivants: null
            }, aParam);
            const lGUIDSyntheseVocale = GUID_1.GUID.getId();
            const lControleur = {};
            let lAvecCommandes = false;
            if (lParams.callbackCommandesMessage && lParams.controleur && !GApplication.droits.get(ObjetDroitsPN_1.TypeDroits.communication.discussionInterdit)) {
                lAvecCommandes = true;
                Object.assign(lControleur, {
                    lireTexte: function(aIndice) {
                        const lResult = [];
                        const lMessage = lParams.listeMessages.get(aIndice);
                        const lNextIndice = aIndice > 0 ? aIndice - 1 : undefined;
                        if (lMessage.estUnAparte) {
                            lResult.push(ObjetTraduction_1.GTraductions.getValeur('Messagerie.HintSousDiscussion'));
                        }
                        const lChaine = UtilitaireMessagerie.getLibelleParticipantsSyntheseVocale(lParams.pere, lMessage, this.node);
                        lResult.push(lChaine);
                        if (lMessage.messageSignale) {
                            lResult.push(lMessage.messageSignale + '. ');
                        }
                        if (lMessage.contenu) {
                            let lContenu;
                            if (lMessage.estHTML) {
                                const lJNode = $(lMessage.contenu);
                                lContenu = lJNode.text() || lJNode.val();
                            } else {
                                lContenu = lMessage.contenu.enleverEntites();
                            }
                            lResult.push(lContenu + '. ');
                        }
                        if (lMessage.listeDocumentsJoints && lMessage.listeDocumentsJoints.count() > 0) {
                            lResult.push((lMessage.listeDocumentsJoints.getTableauLibelles().length > 1 ? ObjetTraduction_1.GTraductions.getValeur('Messagerie.DocumentsJoints') : ObjetTraduction_1.GTraductions.getValeur('Messagerie.DocumentJoint')), ' : ', lMessage.listeDocumentsJoints.getTableauLibelles().join(', '));
                        }
                        if (lMessage.listeMessagesPourContexte) {
                            const lNbMessagsContexte = lMessage.listeMessagesPourContexte.count();
                            for (J = lNbMessagsContexte - 1; J >= 0; J--) {
                                const lMessagePourContexte = lMessage.listeMessagesPourContexte.get(J);
                                let lArrDocs = [];
                                if (lMessagePourContexte.listeDocumentsJoints && lMessagePourContexte.listeDocumentsJoints.count() > 0) {
                                    lArrDocs = lArrDocs.concat(lMessagePourContexte.listeDocumentsJoints.getTableauLibelles());
                                }
                                if (lArrDocs.length > 0) {
                                    lResult.push((lArrDocs.length > 1 ? ObjetTraduction_1.GTraductions.getValeur('Messagerie.DocumentsJoints') : ObjetTraduction_1.GTraductions.getValeur('Messagerie.DocumentJoint')), ' : ', lArrDocs.join(', '));
                                }
                            }
                        }
                        const lID = lGUIDSyntheseVocale + aIndice.toString();
                        const lObj = {
                            text: lResult.join(' '),
                            idCourant: lID
                        };
                        if (lNextIndice !== undefined) {
                            lObj.idSuivant = lGUIDSyntheseVocale + lNextIndice.toString();
                        }
                        return lObj;
                    },
                    nodeCommande: function(aIndice) {
                        $(this.node).on('contextmenu', function(aEvent) {
                            const lNodeCopie = $(this).find('.visu_contenu').get(0);
                            lParams.callbackCommandesMessage({
                                indice: aIndice,
                                messageVisu: lParams.listeMessages.get(aIndice),
                                event: aEvent,
                                elementCibleCopie: lNodeCopie,
                                surMenuContextuel: true
                            });
                        });
                    },
                    btnCommande: {
                        event: function(aIndice, aEvent) {
                            const lNodeCopie = $(this.node).closest('li.message').find('.visu_contenu').get(0);
                            lParams.callbackCommandesMessage({
                                node: this.node,
                                indice: aIndice,
                                messageVisu: lParams.listeMessages.get(aIndice),
                                event: aEvent,
                                elementCibleCopie: lNodeCopie
                            });
                        }
                    }
                });
            }
            if (lParams.callbackAfficherSuivants) {
                Object.assign(lControleur, {
                    onview: function(aNbMessages, aVisible) {
                        if (aVisible) {
                            lParams.callbackAfficherSuivants(aNbMessages);
                            return false;
                        }
                    },
                    lienAfficherSuivants: function(aNbMessages) {
                        $(this.node).eventValidation( () => {
                            lParams.callbackAfficherSuivants(aNbMessages);
                        }
                        );
                    }
                });
            }
            if (lParams.controleur) {
                lParams.controleur.__visuMessage__ = lControleur;
            }
            const lNbMessages = aParam.listeMessages.count();
            if (lParams.callbackAfficherSuivants && aParam.nbMessagesTotal > 0 && lNbMessages < aParam.nbMessagesTotal) {
                H.push('<div style="padding-top:5px;"', ObjetHtml_1.GHtml.composeAttr('ie-visibility-observer', '__visuMessage__.onview', [lNbMessages + UtilitaireMessagerie.palierNbMessages]), '>');
                if (lNbMessages + UtilitaireMessagerie.palierNbMessages < aParam.nbMessagesTotal) {
                    H.push('<div style="padding-top:5px; text-align:center;">', '<a tabindex="-1"', ObjetHtml_1.GHtml.composeAttr('ie-node', '__visuMessage__.lienAfficherSuivants', [lNbMessages + UtilitaireMessagerie.palierNbMessages]), ' class="LienAccueil AvecMain">', ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('Messagerie.AfficherMessagesSuivants_D'), [Math.min(UtilitaireMessagerie.palierNbMessages, aParam.nbMessagesTotal - lNbMessages)]), '</a>', '</div>');
                }
                H.push('</div>');
            }
            H.push((0,
            tag_1.tag)('ul', {
                class: 'utilMess_visu_messages'
            }, (H) => {
                for (let I = lNbMessages - 1; I >= 0; I--) {
                    const lMessage = aParam.listeMessages.get(I);
                    H.push((0,
                    tag_1.tag)('li', {
                        class: ['AvecSelectionTexte', 'message', (lMessage.brouillon ? 'brouillon' : ''), (lMessage.emetteur ? 'emetteur' : ''), (lMessage.estUnAparte ? 'aparte' : '')],
                        'tabindex': 0,
                        'ie-synthesevocale': tag_1.tag.funcAttr('__visuMessage__.lireTexte', I),
                        'ie-node': lAvecCommandes ? tag_1.tag.funcAttr('__visuMessage__.nodeCommande', I) : ''
                    }, (H) => {
                        if (lMessage.estUnAparte) {
                            H.push(IE.jsx.str("i", {
                                class: "aparte icon_sous_discussion",
                                title: ObjetTraduction_1.GTraductions.getValeur('Messagerie.HintSousDiscussion')
                            }));
                        }
                        const lLibelleParticipants = UtilitaireMessagerie.getLibelleParticipants(lMessage, false, aParam.btnModel);
                        const lMessageTitreDroite = (IE.jsx.str("div", {
                            class: "message_titre_droite"
                        }, lMessage.libelleDate, IE.jsx.str("div", null, UtilitaireMessagerie.dessinListeEtiquettes(lMessage.listeEtiquettes, true))));
                        const lBtnCommande = [];
                        if (lAvecCommandes) {
                            lBtnCommande.push(IE.jsx.str("ie-btnicon", {
                                "ie-model": '__visuMessage__.btnCommande(' + I + ')',
                                class: "icon_ellipsis_vertical noSpeechSynthesis",
                                title: ObjetTraduction_1.GTraductions.getValeur('liste.BtnAction'),
                                "aria-haspopup": "menu"
                            }));
                        }
                        H.push(IE.jsx.str("div", {
                            class: "message_titre"
                        }, lLibelleParticipants, lMessageTitreDroite, lBtnCommande.join('')));
                        let lJsxModelBoutonSignalantSupp;
                        if (lMessage.estSignalantPourSuppr && lParams.callbackBtnSignalantPourSupp && lParams.controleur) {
                            lJsxModelBoutonSignalantSupp = (aIndice) => {
                                return {
                                    event: () => {
                                        const lMessageVisu = lParams.listeMessages.get(aIndice);
                                        if (lMessageVisu && lMessageVisu.messConfirmSupp) {
                                            GApplication.getMessage().afficher({
                                                type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                                                message: lMessageVisu.messConfirmSupp
                                            }).then( (aGenreAction) => {
                                                if (aGenreAction === Enumere_Action_1.EGenreAction.Valider) {
                                                    lParams.callbackBtnSignalantPourSupp({
                                                        commande: 'supprimerMessageGraphe',
                                                        message: lMessageVisu
                                                    });
                                                }
                                            }
                                            );
                                        }
                                    }
                                    ,
                                    getDisabled: () => {
                                        return GApplication.droits.get(ObjetDroitsPN_1.TypeDroits.estEnConsultation);
                                    }
                                };
                            }
                            ;
                        }
                        H.push((0,
                        tag_1.tag)('div', {
                            class: ['visu_contenu', lMessage.estHTML ? Divers_css_1.StylesDivers.tinyView : '']
                        }, lMessage.messageSignale ? IE.jsx.str("div", {
                            class: "visu_signale"
                        }, lMessage.messageSignale) : '', lMessage.estHTML ? lMessage.contenu : ObjetChaine_1.GChaine.replaceRCToHTML(lMessage.contenu), lJsxModelBoutonSignalantSupp ? IE.jsx.str("ie-bouton", {
                            "ie-model": lJsxModelBoutonSignalantSupp.bind(this, I),
                            class: Type_ThemeBouton_1.TypeThemeBouton.neutre
                        }, ObjetTraduction_1.GTraductions.getValeur('Messagerie.BoutonSupprimerGraphe')) : ''));
                        if (lMessage.listeDocumentsJoints && lMessage.listeDocumentsJoints.count() > 0) {
                            H.push(_construirePJs(lMessage));
                        }
                        if (lMessage.listeMessagesPourContexte) {
                            const lNbMessagsContexte = lMessage.listeMessagesPourContexte.count();
                            H.push('<hr/>');
                            for (J = lNbMessagsContexte - 1; J >= 0; J--) {
                                const lMessagePourContexte = lMessage.listeMessagesPourContexte.get(J);
                                H.push((0,
                                tag_1.tag)('div', {
                                    class: 'visu_transfert'
                                }, (H) => {
                                    H.push(UtilitaireMessagerie.getLibelleParticipants(lMessagePourContexte, true, aParam.btnModel));
                                    const lClass = lMessage.estMessageTransferant || lMessage.estSignalantPourSuppr || !lMessagePourContexte.emetteur ? 'visu_transfert_indent' : '';
                                    H.push(IE.jsx.str("div", {
                                        class: [lClass, Divers_css_1.StylesDivers.tinyView]
                                    }, lMessagePourContexte.contenu));
                                    if (lMessagePourContexte.listeDocumentsJoints && lMessagePourContexte.listeDocumentsJoints.count() > 0) {
                                        H.push(IE.jsx.str("div", {
                                            class: lClass
                                        }, _construirePJs(lMessagePourContexte)));
                                    }
                                    if (J > 0) {
                                        H.push('<hr/>');
                                    }
                                }
                                ));
                            }
                        }
                        let lLibelleSupplementaireDuMessage = null;
                        if (!!lMessage.estCarnetLiaison && !!lMessage.avecDirecteur) {
                            lLibelleSupplementaireDuMessage = '<span class="Image_CocheVerte as-icon InlineBlock AlignementHaut"></span><span class="PetitEspaceGauche">' + ObjetTraduction_1.GTraductions.getValeur('MessagerieCarnetLiaison.DirecteurAjoute') + '</span>';
                        }
                        if (!!lLibelleSupplementaireDuMessage) {
                            const lStyles = ['position: absolute;', 'right: 5px;', 'bottom: 0;', 'background-color: #FFF;', 'border: solid 1px #E4E4E4;', 'border-radius: 1em;', 'padding: 0 5px;', 'transform: translateY(50%);', 'height: 1.5em;', 'line-height: 1.5em;'];
                            H.push('<div style="', lStyles.join(''), '">', lLibelleSupplementaireDuMessage, '</div>');
                        }
                    }
                    ));
                }
            }
            ));
            return H.join('');
        }
        ;
        UtilitaireMessagerie.estMessageNonEditable = function(aMessage) {
            return !aMessage || aMessage.ferme || aMessage.estSorti || aMessage.estSignalantContenu || aMessage.estSignalantPourSuppr || (!aMessage.estUneDiscussion && aMessage.pere && UtilitaireMessagerie.estMessageNonEditable(UtilitaireMessagerie.getDiscussionRacine(aMessage)));
        }
        ;
        function _construirePJs(aMessage) {
            return UtilitaireUrl_1.UtilitaireUrl.construireListeUrls(aMessage.listeDocumentsJoints);
        }
        UtilitaireMessagerie.getLibelleObjetDiscussion = function(aDiscussion) {
            const H = [];
            if ((aDiscussion !== null) && (aDiscussion !== undefined)) {
                H.push((aDiscussion.profondeur ? '' : aDiscussion.objet + '&nbsp;') + '(' + aDiscussion.nombreMessages + ')');
            }
            return H.join('');
        }
        ;
        UtilitaireMessagerie.getTitreFenetreDeMessage = function(aMessage) {
            if (aMessage && aMessage.objet) {
                let lStrPublic = '';
                if (aMessage.nbPublic > 1) {
                    lStrPublic = ObjetTraduction_1.GTraductions.getValeur('Messagerie.NParticipants', [aMessage.nbPublic]);
                } else if (aMessage.public) {
                    lStrPublic = aMessage.public;
                }
                return aMessage.objet + (lStrPublic ? ` - ${lStrPublic}` : '');
            }
            return '';
        }
        ;
        UtilitaireMessagerie.getLibelleDiscussionAccessible = function(aDiscussion) {
            const H = [];
            if (aDiscussion) {
                H.push(UtilitaireMessagerie.getLibelleObjetDiscussion(aDiscussion));
                H.push('&nbsp;-&nbsp;' + aDiscussion.libelleDate);
            }
            return H.join('');
        }
        ;
        UtilitaireMessagerie.getDetailDiscussionAccessible = function(aDiscussion) {
            const H = [];
            if (aDiscussion) {
                if (aDiscussion.public) {
                    H.push('<div>', aDiscussion.public, '</div>');
                } else {}
                if (aDiscussion.documentsJoints) {
                    H.push('<div>', aDiscussion.documentsJoints, '</div>');
                }
            }
            return H.join('');
        }
        ;
        UtilitaireMessagerie.getLibelleParticipants = function(aMessage, aPourVisuTransfert=false, aBtnModel) {
            const H = [];
            if (aMessage.estMessageTransferant) {
                H.push('<div>', aMessage.nbTransfert > 1 ? ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('Messagerie.NMessagestransferes'), [aMessage.nbTransfert]) : ObjetTraduction_1.GTraductions.getValeur('Messagerie.1Messagetransfere'), '</div>');
            } else {
                H.push('<div class="utilMessParticipants', (aPourVisuTransfert ? ' transfert' : ''), '">');
                if (aMessage.brouillon) {
                    H.push('<div style="', ObjetStyle_1.GStyle.composeCouleurTexte('red'), '">[', ObjetTraduction_1.GTraductions.getValeur('Messagerie.Brouillon'), ']</div>');
                    if (aPourVisuTransfert) {
                        H.push('<div>&nbsp;' + aMessage.libelleDate + '</div>');
                    }
                } else {
                    if (aMessage.estCarnetLiaison) {
                        H.push('<div ie-ellipsis style="max-width:250px;">', aMessage.public_gauche, '</div>');
                    } else {
                        const lAvecBtn = aBtnModel && aMessage.nbPublic > 1;
                        H.push(aMessage.public_gauche ? '<span class="participants_public" ' + (aMessage.hint_gauche && !IE.estMobile ? ObjetHtml_1.GHtml.composeAttr('ie-hint', ObjetChaine_1.GChaine.replaceRCToHTML(aMessage.hint_gauche)) : '') + ' ie-ellipsis >' + aMessage.public_gauche + '</span>' : IE.jsx.str("ie-btnicon", {
                            class: "icon_intervenants message-btn-dest",
                            "ie-model": lAvecBtn ? (0,
                            jsx_1.jsxFuncAttr)(aBtnModel, [aMessage.getNumero(), true]) : false,
                            "aria-haspopup": lAvecBtn ? 'dialog' : false,
                            "aria-label": lAvecBtn ? ObjetTraduction_1.GTraductions.getValeur('Messagerie.WAI_AfficherPart') : false,
                            "ie-hint": !IE.estMobile && lAvecBtn ? (0,
                            jsx_1.jsxFuncAttr)(aBtnModel + '.hintPublic', [aMessage.getNumero(), true]) : false
                        }));
                        H.push(IE.jsx.str("i", {
                            class: ['icone', 'icon_fleche_droite'],
                            "aria-label": ObjetTraduction_1.GTraductions.getValeur('A'),
                            role: "img"
                        }, " "));
                        if (aMessage.public_droite) {
                            H.push('<span class="participants_public"' + (aMessage.hint_droite && !IE.estMobile ? ObjetHtml_1.GHtml.composeAttr('ie-hint', ObjetChaine_1.GChaine.replaceRCToHTML(aMessage.hint_droite)) : '') + ' ie-ellipsis >' + aMessage.public_droite + ' </span>');
                        } else {
                            if (!aMessage.brouillon && aMessage.nbPublic > 1) {
                                H.push(IE.jsx.str("ie-btnicon", {
                                    class: "icon_intervenants message-btn-dest",
                                    "aria-label": ObjetTraduction_1.GTraductions.getValeur('Messagerie.WAI_AfficherDest'),
                                    "ie-model": lAvecBtn ? (0,
                                    jsx_1.jsxFuncAttr)(aBtnModel, [aMessage.getNumero(), false]) : false,
                                    "aria-haspopup": lAvecBtn ? 'dialog' : false,
                                    "ie-hint": !IE.estMobile && lAvecBtn ? (0,
                                    jsx_1.jsxFuncAttr)(aBtnModel + '.hintPublic', [aMessage.getNumero(), false]) : false
                                }));
                            }
                        }
                    }
                    if (aPourVisuTransfert) {
                        H.push('<div class="regular m-left-l">' + aMessage.libelleDate + '</div>');
                    }
                }
                if (aPourVisuTransfert) {
                    H.push(UtilitaireMessagerie.dessinListeEtiquettes(aMessage.listeEtiquettes, true));
                }
                H.push('</div>');
            }
            return H.join('');
        }
        ;
        UtilitaireMessagerie.getLibelleParticipantsSyntheseVocale = function(aInstance, aMessage, aNode) {
            const H = [];
            if (aMessage.estMessageTransferant) {
                H.push(aMessage.nbTransfert > 1 ? ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('Messagerie.NMessagestransferes'), [aMessage.nbTransfert]) : ObjetTraduction_1.GTraductions.getValeur('Messagerie.1Messagetransfere'));
            } else {
                if (aMessage.brouillon) {
                    H.push(ObjetTraduction_1.GTraductions.getValeur('Messagerie.Brouillon') + '. ');
                    H.push(aMessage.libelleDate + '. ');
                } else {
                    if (aMessage.estCarnetLiaison) {
                        H.push(aMessage.public_gauche + '. ');
                    } else {
                        if (aMessage.public_gauche) {
                            H.push(aMessage.public_gauche);
                        }
                        H.push(ObjetTraduction_1.GTraductions.getValeur('A'));
                        if (aMessage.public_droite) {
                            H.push(aMessage.public_droite + '. ');
                        } else {
                            if (!aMessage.brouillon && aMessage.nbPublic > 1) {
                                const lPublicD = ObjetTraduction_1.GTraductions.getValeur('Messagerie.NDestinataires', [aMessage.nbPublic]);
                                H.push(lPublicD + '. ');
                            }
                        }
                    }
                    H.push(aMessage.libelleDate + '. ');
                }
            }
            return H.join(' ');
        }
        ;
        async function getListePublicMessagePromise(aInstance, aNumeroMessage, aEstPublicParticipant, aEstDestinatairesReponse) {
            const lParams = {
                message: new ObjetElement_1.ObjetElement('',aNumeroMessage),
                estPublicParticipant: aEstPublicParticipant,
                estDestinatairesReponse: aEstDestinatairesReponse
            };
            const lReponse = await new ObjetRequeteSaisiePublicMessage(aInstance).setOptions({
                avecControleModeExclusif: false,
                messageDetail: ''
            }).lancerRequete(lParams);
            if (lReponse.genreReponse !== ObjetRequeteJSON_1.EGenreReponseSaisie.succes) {
                return;
            }
            let lListeDest = lReponse.JSONReponse.listeDest;
            if (!lListeDest && lReponse.JSONRapportSaisie && lReponse.JSONRapportSaisie.listeDest) {
                lListeDest = lReponse.JSONRapportSaisie.listeDest;
                lListeDest.avecConnection = true;
            }
            if (lListeDest) {
                lListeDest.setTri([ObjetTri_1.ObjetTri.init('Genre'), ObjetTri_1.ObjetTri.init('Position')]).trier();
            }
            return lListeDest;
        }
        UtilitaireMessagerie.afficherFenetreDestinatairesDeMessage = async function(aNumeroMessage, aEstPublicParticipant, aEstDestinatairesReponse) {
            const lListeDest = await getListePublicMessagePromise(this, aNumeroMessage, aEstPublicParticipant, aEstDestinatairesReponse);
            if (!lListeDest || lListeDest.count() === 0) {
                return;
            }
            const lHtml = IE.jsx.str("ul", {
                class: "liste-destinataires"
            }, (aTab) => {
                lListeDest.parcourir( (aDest) => {
                    const lLibelleSupp = UtilitaireMessagerie.getStrHintDetailDePublic(aDest);
                    aTab.push(IE.jsx.str("li", null, lListeDest.avecConnection ? UtilitaireMessagerie.contruirePublicConnecte(aDest, lLibelleSupp) : aDest.getLibelle() + lLibelleSupp));
                }
                );
            }
            );
            ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_1.ObjetFenetre, {
                pere: this
            }, {
                titre: aEstPublicParticipant ? ObjetTraduction_1.GTraductions.getValeur('Messagerie.NParticipants', [lListeDest.count()]) : ObjetTraduction_1.GTraductions.getValeur('Messagerie.ListeDestinataires'),
                largeur: 450,
                hauteur: !IE.estMobile ? 200 : null,
                hauteurMaxContenu: !IE.estMobile ? 600 : null,
                avecScroll: !IE.estMobile,
                fermerFenetreSurClicHorsFenetre: true,
                listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')]
            }).afficher(lHtml);
        }
        ;
        UtilitaireMessagerie.getStrHintPublicMessagePromise = async function(aInstance, aNumeroMessage, aEstPublicParticipant, aEstDestinatairesReponse, aNode) {
            const lKey = 'strHint' + !!aEstPublicParticipant;
            if (aNode) {
                const lData = $(aNode).data(lKey);
                if (lData) {
                    return lData;
                }
            }
            const lListePublics = await getListePublicMessagePromise(aInstance, aNumeroMessage, aEstPublicParticipant, aEstDestinatairesReponse);
            let lStr = '&nbsp;';
            if (lListePublics) {
                const lTab = [];
                lListePublics.parcourir( (aPublic) => {
                    let lLibelleSupp = UtilitaireMessagerie.getStrHintDetailDePublic(aPublic);
                    if (lListePublics.avecConnection) {
                        lTab.push(UtilitaireMessagerie.contruirePublicConnecte(aPublic, lLibelleSupp));
                    } else {
                        lTab.push(aPublic.getLibelle() + lLibelleSupp);
                    }
                }
                );
                lStr = lTab.join(lListePublics.avecConnection ? '' : '<br>');
                const lNb = lListePublics.count();
                if (lNb > 0) {
                    let lStrParticipants;
                    if (aEstPublicParticipant) {
                        lStrParticipants = ObjetTraduction_1.GTraductions.getValeur('Messagerie.NParticipants', [lNb]);
                    } else if (lNb > 1) {
                        lStrParticipants = ObjetTraduction_1.GTraductions.getValeur('Messagerie.NDestinataires', [lNb]);
                    } else {
                        lStrParticipants = ObjetTraduction_1.GTraductions.getValeur('Messagerie.NDestinataire', [lNb]);
                    }
                    lStr = IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("b", null, lStrParticipants), IE.jsx.str("br", null), lStr);
                }
            }
            if (aNode) {
                $(aNode).data(lKey, lStr);
            }
            return lStr;
        }
        ;
        UtilitaireMessagerie.getStrHintDetailDePublic = function(aPublic) {
            let lLibelle = '';
            if (aPublic.estSorti) {
                lLibelle += '&nbsp;<i class="icon_sortir_reintegrer_conversation" style="font-size:1.1em;"></i>&nbsp;' + ObjetTraduction_1.GTraductions.getValeur('Messagerie.Retire');
            }
            if (aPublic.refusMess) {
                lLibelle = ` - ${ObjetTraduction_1.GTraductions.getValeur('Messagerie.RefuseDiscussions')}`;
            }
            return lLibelle;
        }
        ;
        UtilitaireMessagerie.getIndiceDiscussion = function(aListeMessagerie, aMessage) {
            if (aMessage && aMessage.listePossessionsMessages) {
                for (let I = 0; I < aMessage.listePossessionsMessages.count(); I++) {
                    const lPossessionMessage = aMessage.listePossessionsMessages.get(I);
                    for (let J = 0; J < aListeMessagerie.count(); J++) {
                        const lDiscussion = aListeMessagerie.get(J);
                        for (let K = 0; K < lDiscussion.listePossessionsMessages.count(); K++) {
                            if ((lPossessionMessage.getNumero() === lDiscussion.listePossessionsMessages.getNumero(K)) && (aMessage.estUneDiscussion === lDiscussion.estUneDiscussion) && ((aMessage.pere && lDiscussion.pere) || ((!aMessage.pere || aMessage.deDossierVS || aMessage.deRechercheStage) && !lDiscussion.pere))) {
                                return J;
                            }
                        }
                    }
                }
            }
            return null;
        }
        ;
        UtilitaireMessagerie.getIndiceDiscussionDeMessageVisu = function(aListeMessagerie, aMessageVisu) {
            if (!aMessageVisu || !aMessageVisu.possessionMessage || !aListeMessagerie) {
                return;
            }
            const lNumeroPossessionMessage = aMessageVisu.possessionMessage.existeNumero() ? aMessageVisu.possessionMessage : new ObjetElement_1.ObjetElement('',aMessageVisu.getNumero());
            const lMessage = new ObjetElement_1.ObjetElement();
            lMessage.listePossessionsMessages = new ObjetListeElements_1.ObjetListeElements();
            lMessage.listePossessionsMessages.addElement(lNumeroPossessionMessage);
            lMessage.estUneDiscussion = false;
            lMessage.pere = true;
            return UtilitaireMessagerie.getIndiceDiscussion(aListeMessagerie, lMessage);
        }
        ;
        UtilitaireMessagerie.getIndicePere = function(aListeMessagerie, aMessage) {
            if (aMessage.indicePere >= 0) {
                return this.getIndicePere(aListeMessagerie, aListeMessagerie.get(aMessage.indicePere));
            } else {
                return aMessage.indice;
            }
        }
        ;
        UtilitaireMessagerie.getDiscussionRacine = function(aMessage) {
            if (aMessage.pere) {
                return UtilitaireMessagerie.getDiscussionRacine(aMessage.pere);
            } else {
                return aMessage;
            }
        }
        ;
        UtilitaireMessagerie.estEgal = function(aMessage1, aMessage2) {
            if (aMessage1 && aMessage2) {
                if (aMessage1.estUneDiscussion && aMessage2.estUneDiscussion) {
                    return aMessage1.profondeur === aMessage2.profondeur && aMessage1.objet === aMessage2.objet && aMessage1.listePossessionsMessages.count() === aMessage2.listePossessionsMessages.count() && (aMessage1.listePossessionsMessages.count() === 0 || aMessage1.listePossessionsMessages.getNumero(0) === aMessage2.listePossessionsMessages.getNumero(0));
                } else if (!aMessage1.estUneDiscussion && !aMessage2.estUneDiscussion) {
                    return aMessage1.getNumero() === aMessage2.getNumero();
                }
            }
            return false;
        }
        ;
        UtilitaireMessagerie.avecPossessionPartageeEntreMessages = function(aMessage1, aMessage2) {
            let lResult = false;
            if (aMessage1 && aMessage2 && aMessage1.listePossessionsMessages && aMessage2.listePossessionsMessages) {
                aMessage1.listePossessionsMessages.parcourir( (aPossession) => {
                    if (aMessage2.listePossessionsMessages.getElementParElement(aPossession)) {
                        lResult = true;
                        return false;
                    }
                }
                );
            }
            return lResult;
        }
        ;
        UtilitaireMessagerie.dessinCouleurEtiquette = function(aEtiquette) {
            if (!aEtiquette.couleur) {
                return '';
            }
            return ['<div class="utilMess_etiquette" style="', ObjetStyle_1.GStyle.composeCouleur(aEtiquette.couleur, GCouleur.getCouleurCorrespondance(aEtiquette.couleur)), '"', ' title="', ObjetChaine_1.GChaine.toTitle(aEtiquette.getLibelle()), '">', aEtiquette.abr || '', '</div>'].join('');
        }
        ;
        UtilitaireMessagerie.dessinListeEtiquettes = function(aListeEtiquettes, aAvecEspaceGaucheDebut=false) {
            if (!aListeEtiquettes || !aListeEtiquettes.parcourir) {
                return '';
            }
            const H = [];
            aListeEtiquettes.parcourir( (aEtiquette, aIndex) => {
                const lHtml = UtilitaireMessagerie.dessinCouleurEtiquette(aEtiquette);
                if (lHtml) {
                    H.push('<div class="InlineBlock AlignementMilieuVertical Maigre', (aAvecEspaceGaucheDebut && aIndex === 0 ? ' PetitEspaceGauche' : ''), (aIndex < aListeEtiquettes.count() - 1 ? ' PetitEspaceDroit' : ''), '">', lHtml, '</div>');
                }
            }
            );
            return H.join('');
        }
        ;
        UtilitaireMessagerie.estMessageVisuChat = function(aMessageVisu) {
            if (aMessageVisu) {
                if (aMessageVisu.estChat) {
                    return true;
                }
                switch (aMessageVisu.getGenre()) {
                case TypeGenreDiscussion_1.TypeGenreDiscussion.GD_ContactVS:
                case TypeGenreDiscussion_1.TypeGenreDiscussion.GD_Conversation:
                case TypeGenreDiscussion_1.TypeGenreDiscussion.GD_Alerte:
                    return true;
                }
            }
            return false;
        }
        ;
        UtilitaireMessagerie.contruirePublicConnecte = function(aPublic, aLibelleSupp, aAvecStatutConexion=true) {
            if (!aPublic) {
                return '';
            }
            return ['<div class="utilMess_dest', (aPublic.refusMess ? ' dest-refus' : ''), '">', (aPublic.refusMess ? '' : '<i class="' + TypeStatutConnexion_1.TypeGenreStatutConnexionUtil.getClassIcon(aPublic.statutConnexion) + '" aria-hidden="true"></i>'), '<div class="utilMess_texte" ie-ellipsis>', aPublic.getLibelle(), aAvecStatutConexion ? (0,
            tag_1.tag)('label', '&nbsp;-&nbsp;' + UtilitaireMessagerie.contruirePublicConnecteStatutConnexion(aPublic)) : '', aLibelleSupp || '', '</div>', '</div>'].join('');
        }
        ;
        UtilitaireMessagerie.contruirePublicConnecteStatutConnexion = function(aPublic) {
            if (!aPublic) {
                return '';
            }
            return aPublic.refusMess ? ObjetTraduction_1.GTraductions.getValeur('Messagerie.RefuseDiscussions') : TypeStatutConnexion_1.TypeGenreStatutConnexionUtil.toLibelle(aPublic.statutConnexion);
        }
        ;
        UtilitaireMessagerie.getIconeDEtiquette = function(aEtiquette) {
            if (!aEtiquette || !aEtiquette.getGenre) {
                return '';
            }
            const lPrimParent = GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.PrimParent || GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.Mobile_PrimParent;
            if (aEtiquette.toutes) {
                return lPrimParent ? 'icon_discussion_cours' : 'icon_inbox';
            }
            if (aEtiquette.enCours) {
                return 'icon_discussion_cours';
            }
            if (aEtiquette.estFiltreDiscussionMesEleves) {
                return 'icon_utilisateur';
            }
            switch (aEtiquette.getGenre()) {
            case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Archive:
                return 'icon_archiver_discussion';
            case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Alerte:
                return 'icon_alerte_ppms';
            case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_ContactVS:
                return 'icon_conversation_contact_vie_sco';
            case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Conversation:
                return 'icon_conversation_cours';
            case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Brouillon:
                return 'icon_brouillon_discussion';
            case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle:
                return 'icon_trash';
            case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_CarnetLiaison:
                return 'icon_carnet_liaison';
            case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Harcelement:
                return 'icon_stop_harcelement';
            }
            return '';
        }
        ;
        UtilitaireMessagerie.construireImageEtiquette = function(aEtiquette) {
            const lResult = {
                icone: '',
                avecCompteurNonLu: true
            };
            const lIcone = UtilitaireMessagerie.getIconeDEtiquette(aEtiquette);
            if (lIcone) {
                lResult.icone = IE.jsx.str("i", {
                    class: lIcone,
                    role: "presentation"
                });
            }
            if (TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessageUtil.estEtiquettePerso(aEtiquette.getGenre())) {
                lResult.icone = (IE.jsx.str("div", {
                    class: "utilMess_etiquette utilMess_etiquette_liste",
                    role: "presentation",
                    style: {
                        'background-color': aEtiquette.couleur,
                        'color': GCouleur.getCouleurCorrespondance(aEtiquette.couleur)
                    }
                }, aEtiquette.abr || ''));
                lResult.estImage = true;
            }
            if (aEtiquette.getGenre() === TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Brouillon || aEtiquette.getGenre() === TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle) {
                lResult.avecCompteurNonLu = false;
            }
            return lResult;
        }
        ;
        UtilitaireMessagerie.getNbNonlusDEtiquette = function(aEtiquette, aListeMessagerie) {
            let lNb = 0;
            if (aListeMessagerie && aEtiquette) {
                aListeMessagerie.parcourir( (D) => {
                    if (UtilitaireMessagerie.estDiscussionVisibleSelonEtiquette(D, aEtiquette)) {
                        if (D.estUneDiscussion && D.profondeur === 0) {
                            lNb += D.nbNonLus || 0;
                        }
                    }
                }
                );
            }
            return lNb;
        }
        ;
        UtilitaireMessagerie.getIconeMessage = function(aMessage) {
            const lMessage = UtilitaireMessagerie.getDiscussionRacine(aMessage);
            let lResult = aMessage.estDiscussionEleve ? 'icon_utilisateur' : 'icon_discussion_cours';
            if (lMessage && lMessage.listeEtiquettes && lMessage.listeEtiquettes.count() > 0) {
                lMessage.listeEtiquettes.parcourir( (aEtiquette) => {
                    const lIcone = UtilitaireMessagerie.getIconeDEtiquette(aEtiquette);
                    if (lIcone) {
                        lResult = lIcone;
                        return false;
                    }
                }
                );
            }
            return lResult;
        }
        ;
        UtilitaireMessagerie.estDiscussionVisibleSelonEtiquette = function(aDiscussion, aEtiquette) {
            if (!aEtiquette) {
                return true;
            }
            if (aEtiquette.nonSelectionnable) {
                return false;
            }
            let lExclusions = [];
            let lAvecEtiquettes = [];
            let lEtiquetteFiltre = null;
            let lVisible = true;
            const lEstPrimParent = GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.PrimParent || GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.Mobile_PrimParent;
            if (aEtiquette.toutes) {
                lExclusions = [TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle];
                if (lEstPrimParent) {
                    lExclusions.push(TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_CarnetLiaison);
                }
            } else if (aEtiquette.enCours) {
                lExclusions = [TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle, TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Archive, TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Alerte, TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_ContactVS, TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Conversation];
            } else if (aEtiquette.estFiltreDiscussionMesEleves) {
                if (!aDiscussion.estDiscussionEleve) {
                    return false;
                }
                lExclusions = [TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle];
            } else if (aEtiquette.estSansEtiquette) {
                lExclusions = [...TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessageUtil.tabEtiquetesPersos, TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle];
            } else if (TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessageUtil.estEtiquettePerso(aEtiquette.getGenre())) {
                lExclusions = [TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle];
                lEtiquetteFiltre = aEtiquette;
            } else {
                switch (aEtiquette.getGenre()) {
                case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_CarnetLiaison:
                case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Archive:
                case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Conversation:
                case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Alerte:
                case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_ContactVS:
                case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Harcelement:
                    lExclusions = [TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle];
                    lEtiquetteFiltre = aEtiquette;
                    break;
                case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Brouillon:
                    lAvecEtiquettes = [TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Brouillon];
                    lExclusions = [TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle];
                    break;
                case TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle:
                    lExclusions = [];
                    lAvecEtiquettes = [TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_Poubelle];
                    break;
                default:
                    ;
                }
            }
            lExclusions.forEach( (aGenreExclu) => {
                aDiscussion.listeEtiquettes.parcourir( (D) => {
                    if (D.getGenre() === aGenreExclu) {
                        lVisible = false;
                        return false;
                    }
                }
                );
            }
            );
            if (lVisible && lEtiquetteFiltre) {
                lVisible = false;
                aDiscussion.listeEtiquettes.parcourir( (D) => {
                    if (lEtiquetteFiltre.getNumero() === D.getNumero()) {
                        lVisible = true;
                        return false;
                    }
                }
                );
                if (lVisible && lEstPrimParent && lEtiquetteFiltre.getGenre() === TypeOrigineCreationEtiquetteMessage_1.TypeOrigineCreationEtiquetteMessage.OCEM_Pre_CarnetLiaison) {
                    if (!!aDiscussion.contexte && !!lEtiquetteFiltre.contexte) {
                        lVisible = aDiscussion.contexte.getNumero() === lEtiquetteFiltre.contexte.getNumero();
                    }
                }
            }
            if (lVisible) {
                lAvecEtiquettes.forEach( (aGenreEtiquette) => {
                    lVisible = false;
                    aDiscussion.listeEtiquettes.parcourir( (D) => {
                        if (D.getGenre() === aGenreEtiquette) {
                            lVisible = true;
                            return false;
                        }
                    }
                    );
                }
                );
            }
            if (lVisible && aDiscussion.pere) {
                lVisible = UtilitaireMessagerie.estDiscussionVisibleSelonEtiquette(aDiscussion.pere, aEtiquette);
            }
            return lVisible;
        }
        ;
        UtilitaireMessagerie.getEtiquetteInitSelonMessage = function(aListeEtiquettes, aEtiquetteOriginal, aAvecSelecteurEtiquette, aMessageSelectionne) {
            let lEtiquette = aEtiquetteOriginal;
            if (!aListeEtiquettes) {
                return lEtiquette;
            }
            if (lEtiquette) {
                lEtiquette = aListeEtiquettes.getElementParNumero(lEtiquette.getNumero());
            }
            let lEtiquetteToutes = null;
            aListeEtiquettes.parcourir( (D) => {
                if (D.toutes) {
                    lEtiquetteToutes = D;
                    return false;
                }
            }
            );
            if (!lEtiquette) {
                lEtiquette = lEtiquetteToutes;
                if (aAvecSelecteurEtiquette && GApplication.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussionAvancee)) {
                    aListeEtiquettes.parcourir( (D) => {
                        if (D.enCours) {
                            lEtiquette = D;
                            return false;
                        }
                    }
                    );
                }
            }
            if (lEtiquette && aAvecSelecteurEtiquette && lEtiquette.enCours && aMessageSelectionne && lEtiquetteToutes && !UtilitaireMessagerie.estDiscussionVisibleSelonEtiquette(aMessageSelectionne, lEtiquette)) {
                lEtiquette = lEtiquetteToutes;
            }
            if (lEtiquette && aAvecSelecteurEtiquette && aMessageSelectionne && !UtilitaireMessagerie.estDiscussionVisibleSelonEtiquette(aMessageSelectionne, lEtiquette)) {
                aListeEtiquettes.parcourir( (D) => {
                    if (!D.enCours && !D.toutes && UtilitaireMessagerie.estDiscussionVisibleSelonEtiquette(aMessageSelectionne, D)) {
                        lEtiquette = D;
                        return false;
                    }
                }
                );
            }
            return lEtiquette;
        }
        ;
        UtilitaireMessagerie.getGenreReponse = function(aGenre, aAvecInclureParentsEleves) {
            if (aGenre === TypeHttpReponseMessage_1.TypeHttpReponseMessage.rm_EnvoiATousSaufParentEleve && aAvecInclureParentsEleves) {
                return TypeHttpReponseMessage_1.TypeHttpReponseMessage.rm_EnvoiATous;
            }
            if (aGenre === TypeHttpReponseMessage_1.TypeHttpReponseMessage.rm_RelanceATousSaufParentEleve && aAvecInclureParentsEleves) {
                return TypeHttpReponseMessage_1.TypeHttpReponseMessage.rm_Relance;
            }
            return aGenre;
        }
        ;
        UtilitaireMessagerie.estGenreDestinataireAutorise = function(aGenreRessource) {
            const lApp = GApplication;
            switch (aGenreRessource) {
            case Enumere_Ressource_1.EGenreRessource.Eleve:
                return lApp.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussionEleves);
            case Enumere_Ressource_1.EGenreRessource.Responsable:
                return lApp.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussionParents);
            case Enumere_Ressource_1.EGenreRessource.Enseignant:
                return lApp.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussionProfesseurs);
            case Enumere_Ressource_1.EGenreRessource.Personnel:
                return lApp.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussionPersonnels);
            default:
                ;
            }
            return false;
        }
        ;
        UtilitaireMessagerie.interdireReponseParentEleve = () => {
            return [Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve].includes(GEtatUtilisateur.GenreEspace);
        }
        ;
        UtilitaireMessagerie.unMessageContientLeDirecteur = function(aListeMessages) {
            let result = false;
            if (!!aListeMessages) {
                aListeMessages.parcourir( (D) => {
                    if (D.avecDirecteur) {
                        result = true;
                        return false;
                    }
                }
                );
            }
            return result;
        }
        ;
        UtilitaireMessagerie.avecEditionHtmlMessage = function() {
            return GApplication.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussionAvancee);
        }
        ;
        UtilitaireMessagerie.avecEditeurTiny = function() {
            return ObjetNavigateur_1.Navigateur.withContentEditable && ObjetSupport_1.Support.contentEditable && UtilitaireMessagerie.avecEditionHtmlMessage();
        }
        ;
        UtilitaireMessagerie.avecAjoutPieceJointeMessage = function() {
            return ObjetSupport_1.Support.avecSupportFileUpload && ![Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve].includes(GEtatUtilisateur.GenreEspace);
        }
        ;
        UtilitaireMessagerie.getListeDestCarnetLiaisonDElevePrimParent = function(aNumeroEleve) {
            const lEleve = GEtatUtilisateur.Identification.ListeRessources.getElementParNumero(aNumeroEleve);
            if (!lEleve || !lEleve.destinatairesCarnetLiaison) {
                return new ObjetListeElements_1.ObjetListeElements();
            }
            return lEleve.destinatairesCarnetLiaison;
        }
        ;
        UtilitaireMessagerie.getBrouillonDefaut = function() {
            const lBrouillon = new ObjetElement_1.ObjetElement();
            lBrouillon.contenu = '';
            lBrouillon.objet = '';
            lBrouillon.listeFichiers = new ObjetListeElements_1.ObjetListeElements();
            return lBrouillon;
        }
        ;
        UtilitaireMessagerie.avecListeDiffusionSelonEspace = function() {
            return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Mobile_Administrateur, Enumere_Espace_1.EGenreEspace.PrimDirection, Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Mobile_Etablissement, Enumere_Espace_1.EGenreEspace.PrimMairie, Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie].indexOf(GEtatUtilisateur.GenreEspace) >= 0;
        }
        ;
        UtilitaireMessagerie.getLibelleSuppListePublics = function(aArticle) {
            const H = [];
            if (aArticle) {
                switch (aArticle.getGenre()) {
                case Enumere_Ressource_1.EGenreRessource.Enseignant:
                    if (aArticle.estPrincipal) {
                        H.push(`<p><i role="presentation" class="icon_star m-right-s"></i>${ObjetTraduction_1.GTraductions.getValeur('Messagerie.ProfPrincipal')}</p>`);
                    }
                    if (aArticle.estTuteur) {
                        H.push(`<p><i role="presentation" class="icon_star m-right-s"></i>${ObjetTraduction_1.GTraductions.getValeur('Messagerie.Tuteur')}</p>`);
                    }
                    if (aArticle.listeRessources) {
                        H.push(aArticle.listeRessources.getTableauLibelles().join('<br>'));
                    }
                    break;
                case Enumere_Ressource_1.EGenreRessource.Personnel:
                    if (aArticle.estMonCpe) {
                        H.push(`<p><i role="presentation" class="icon_star m-right-s"></i>${ObjetTraduction_1.GTraductions.getValeur('Messagerie.monCPE')}</p>`);
                    }
                    if (aArticle.fonction) {
                        H.push(`<p>${aArticle.fonction.getLibelle()}</p>`);
                    }
                    break;
                case Enumere_Ressource_1.EGenreRessource.Eleve:
                case Enumere_Ressource_1.EGenreRessource.Responsable:
                    if (aArticle.classesNiv) {
                        H.push(`<p>${aArticle.classesNiv.getTableauLibelles().join(', ')}</p>`);
                    }
                    break;
                }
            }
            return H.join('');
        }
        ;
        UtilitaireMessagerie.getLibelleSuppListePublicsGenreCumulFonction = (aArticle) => {
            if (aArticle) {
                switch (aArticle.getGenre()) {
                case Enumere_Ressource_1.EGenreRessource.Personnel:
                    if (aArticle.estMonCpe) {
                        return `<p class="m-bottom"><i role="presentation" class="icon_star m-right-s"></i>${ObjetTraduction_1.GTraductions.getValeur('Messagerie.monCPE')}</p>`;
                    }
                    break;
                }
                return '';
            }
        }
        ;
        UtilitaireMessagerie.selectionnerListePublics = async (aParams) => {
            const lParams = Object.assign({
                instance: null,
                genreRessource: null,
                avecIndicationDiscussionInterdit: true,
                listeRessourcesSelectionnees: new ObjetListeElements_1.ObjetListeElements(),
                uniquementAjouterDest: false,
                listeRessourcesInvisibles: null,
                estAlertePPMS: false
            }, aParams);
            let lDonnees;
            let lListeRessources;
            const lGenreRessource = lParams.genreRessource;
            if (GApplication.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussionAvancee)) {
                lDonnees = await new ObjetRequeteListePublics_1.ObjetRequeteListePublics(lParams.instance).lancerRequete({
                    pourMessagerie: true,
                    genres: [lParams.genreRessource],
                    sansFiltreSurEleve: GApplication.droits.get(ObjetDroitsPN_1.TypeDroits.communication.toutesClasses),
                    avecFonctionPersonnel: true
                });
                lListeRessources = lDonnees.listePublic;
            } else {
                const lParametresRequete = {
                    onglet: new ObjetElement_1.ObjetElement('',0,lParams.genreRessource),
                    filtreElement: GEtatUtilisateur.getMembre()
                };
                if ([Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent].includes(GEtatUtilisateur.GenreEspace) && lParams.genreRessource === Enumere_Ressource_1.EGenreRessource.Responsable) {
                    $.extend(lParametresRequete, {
                        filtreElement: new ObjetElement_1.ObjetElement('',0,6)
                    });
                }
                lDonnees = await new ObjetRequeteListeRessourcesPourCommunication_1.ObjetRequeteListeRessourcesPourCommunication(lParams.instance).lancerRequete(lParametresRequete);
                lListeRessources = lDonnees.listeRessourcesPourCommunication;
                if ([Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel].includes(lGenreRessource)) {
                    lListeRessources = lListeRessources.getListeElements( (D) => {
                        return D.avecDiscussion === true;
                    }
                    );
                }
            }
            if (lParams.uniquementAjouterDest) {
                if (lParams.listeRessourcesInvisibles) {
                    lListeRessources = lListeRessources.getListeElements( (aElement) => {
                        return !lParams.listeRessourcesInvisibles.getElementParNumero(aElement.getNumero());
                    }
                    );
                }
                if (lListeRessources.count() === 0) {
                    let lMessage = '';
                    switch (lParams.genreRessource) {
                    case Enumere_Ressource_1.EGenreRessource.Enseignant:
                        lMessage = ObjetTraduction_1.GTraductions.getValeur('Messagerie.TousLesProfesseursDejaDestinataires');
                        break;
                    case Enumere_Ressource_1.EGenreRessource.Personnel:
                        lMessage = ObjetTraduction_1.GTraductions.getValeur('Messagerie.TousLesPersonnelsDejaDestinataires');
                        break;
                    case Enumere_Ressource_1.EGenreRessource.Eleve:
                        lMessage = ObjetTraduction_1.GTraductions.getValeur('Messagerie.TousLesElevesDejaDestinataires');
                        break;
                    case Enumere_Ressource_1.EGenreRessource.Responsable:
                        lMessage = ObjetTraduction_1.GTraductions.getValeur('Messagerie.TousLesResponsablesDejaDestinataires');
                        break;
                    default:
                        ;
                    }
                    await GApplication.getMessage().afficher({
                        message: lMessage
                    });
                    return null;
                }
            }
            let lGenreCumul = (0,
            UtilitaireFenetreSelectionPublic_1.getCumulPourFenetrePublic)(lParams.genreRessource, lDonnees.checked, lListeRessources.count());
            let lEstCasRespToResp = false;
            if ([Enumere_Ressource_1.EGenreRessource.Responsable].includes(lGenreRessource) && ([Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent].includes(GEtatUtilisateur.GenreEspace))) {
                lEstCasRespToResp = true;
                lGenreCumul = ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.respDelegues;
            }
            let lListeCumuls = new ObjetListeElements_1.ObjetListeElements();
            if (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Eleve || (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Responsable && !lEstCasRespToResp)) {
                lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.Classe'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.classe,0));
                lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.Groupe'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.groupe,1));
                lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.Alphabetique'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.initial,2));
                if (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Responsable) {
                    lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.NomDesEleves'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.nomEleves));
                }
                if (lDonnees.listeServicesPeriscolaire) {
                    lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.ServicesPeriscolaire'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.servicesPeriscolaire));
                }
                if (lDonnees.listeProjetsAcc) {
                    lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.ProjetsAccompagnement'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.projetsAccompagnement));
                }
                if (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Eleve && lListeRessources && lListeRessources.count() > 0 && MethodesObjet_1.MethodesObjet.isBoolean(lListeRessources.get(0).estAbsent)) {
                    lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Messagerie.Filtre_AbsencePresenceEleve'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.presentielEleve));
                }
                if (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Eleve || lGenreRessource === Enumere_Ressource_1.EGenreRessource.Responsable) {
                    if (lDonnees.listeFamilles) {
                        lDonnees.listeFamilles.parcourir( (aFamille) => {
                            const lFiltreFamille = new ObjetElement_1.ObjetElement(aFamille.getLibelle(),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.famille);
                            lFiltreFamille.famille = aFamille;
                            lListeCumuls.addElement(lFiltreFamille);
                        }
                        );
                    }
                }
            } else if ((lGenreRessource === Enumere_Ressource_1.EGenreRessource.Enseignant) && [Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Mobile_Tuteur].includes(GEtatUtilisateur.GenreEspace) && (GEtatUtilisateur.Identification.ListeRessources.count() > 1)) {
                lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.NomDesEleves'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.nomEleves));
            } else if (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Personnel) {
                lListeCumuls.add(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.Cumul.Aucun'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.sans,0));
                lListeCumuls.add(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.Fonction'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.fonction,1));
            }
            if (lDonnees.listeNiveauxResponsabilite) {
                lParams.listeNiveauxResponsabilite = lDonnees.listeNiveauxResponsabilite;
            }
            return UtilitaireMessagerie.fenetreSelectionnerListePublics(Object.assign({
                listeRessources: lListeRessources,
                listeCumuls: lListeCumuls,
                genreCumul: lGenreCumul
            }, lParams));
        }
        ;
        UtilitaireMessagerie.fenetreSelectionnerListePublics = async (aParams) => {
            const lParams = Object.assign({
                instance: null,
                genreRessource: null,
                listeRessources: new ObjetListeElements_1.ObjetListeElements(),
                listeRessourcesSelectionnees: new ObjetListeElements_1.ObjetListeElements(),
                avecIndicationDiscussionInterdit: false,
                uniquementAjouterDest: false,
                listeCumuls: null,
                genreCumul: null,
                estAlertePPMS: false
            }, aParams);
            return await new Promise( (aResolve) => {
                const lInstance = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(lParams.estAlertePPMS ? ObjetFenetre_SelectionPublic_1.ObjetFenetre_SelectionPublic : ObjetFenetre_SelectionPublic_PN_1.ObjetFenetre_SelectionPublic_PN, {
                    pere: lParams.instance,
                    evenement: function(aGenre, aListe, aNumeroBouton) {
                        if (aNumeroBouton === 1) {
                            aResolve(aListe);
                        } else {
                            aResolve(null);
                        }
                    }
                });
                lInstance.setOptionsFenetreSelectionRessource({
                    avecCocheRessources: true,
                    afficherUtilisateurCourant: !lParams.uniquementAjouterDest
                });
                if (lParams.listeCumuls && lParams.listeCumuls.count() > 0) {
                    lInstance.setListeCumuls(lParams.listeCumuls);
                }
                if (lParams.genreCumul) {
                    lInstance.setGenreCumulActif(lParams.genreCumul);
                }
                lInstance.setOptions({
                    getInfosSuppZonePrincipale(aParams) {
                        return UtilitaireMessagerie[lInstance.getGenreCumul() !== ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.fonction ? 'getLibelleSuppListePublics' : 'getLibelleSuppListePublicsGenreCumulFonction'](aParams.article);
                    }
                });
                lInstance.setSelectionObligatoire(false);
                lInstance.setDonnees({
                    listeRessources: lParams.listeRessources,
                    listeRessourcesSelectionnees: lParams.listeRessourcesSelectionnees,
                    genreRessource: lParams.genreRessource,
                    avecIndicationDiscussionInterdit: lParams.avecIndicationDiscussionInterdit,
                    titre: Enumere_Ressource_1.EGenreRessourceUtil.getTitreFenetreSelectionRessource(lParams.genreRessource),
                    listeNiveauxResponsabilite: lParams.listeNiveauxResponsabilite
                });
            }
            );
        }
        ;
        UtilitaireMessagerie.selectionnerListeDiffusions = (aInstance) => {
            let lListeDiffusions = null;
            if (Cache_1.GCache && Cache_1.GCache.general.existeDonnee('listeDiffusion_messagerie')) {
                lListeDiffusions = Cache_1.GCache.general.getDonnee('listeDiffusion_messagerie');
            }
            return Promise.resolve().then( () => {
                if (!lListeDiffusions) {
                    return new ObjetRequeteListeDiffusion_1.ObjetRequeteListeDiffusion(aInstance).lancerRequete({
                        pourMessagerie: true
                    }).then( (aJSON) => {
                        if (aJSON && aJSON.liste) {
                            lListeDiffusions = aJSON.liste;
                            if (Cache_1.GCache) {
                                Cache_1.GCache.general.setDonnee('listeDiffusion_messagerie', lListeDiffusions);
                            }
                        }
                    }
                    );
                }
            }
            ).then( () => {
                return new Promise( (aResolve) => {
                    if (!lListeDiffusions) {
                        return null;
                    }
                    lListeDiffusions.parcourir( (aElement) => {
                        aElement.cmsActif = false;
                    }
                    );
                    ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_SelectionListeDiffusion_1.ObjetFenetre_SelectionListeDiffusion, {
                        pere: aInstance,
                        evenement: (aGenreBouton) => {
                            let lListeDiffusionsSelection = new ObjetListeElements_1.ObjetListeElements();
                            if (aGenreBouton === 1) {
                                lListeDiffusionsSelection = lListeDiffusions.getListeElements( (aElement) => !!aElement.cmsActif);
                            }
                            aResolve(lListeDiffusionsSelection);
                        }
                    }).setDonnees(new DonneesListe_SelectionDiffusion_1.DonneesListe_SelectionDiffusion(lListeDiffusions), false);
                }
                );
            }
            );
        }
        ;
        UtilitaireMessagerie.avecListeDestinatairesProfsStatique = function() {
            return [Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve].includes(GEtatUtilisateur.GenreEspace);
        }
        ;
        UtilitaireMessagerie.getListeDestProfsDiscussionPrimEleveFormat = () => {
            let lListe = null;
            const lListeDest = GEtatUtilisateur.getUtilisateur().listeDestProfsDiscussionPrimEleve;
            if (lListeDest) {
                lListe = MethodesObjet_1.MethodesObjet.dupliquer(lListeDest);
                lListe.setTri([ObjetTri_1.ObjetTri.init('estPrincipal', -1), ObjetTri_1.ObjetTri.init('Position')]).trier().parcourir( (aProf) => {
                    if (!aProf.estPrincipal && aProf.listeRessources && aProf.listeRessources.count() > 0 && aProf.listeRessources.getTableauLibelles) {
                        aProf.setLibelle(`${aProf.getLibelle()} (${aProf.listeRessources.getTableauLibelles().join(', ')})`);
                    }
                }
                );
            }
            return lListe;
        }
        ;
        UtilitaireMessagerie.getLibelleRaccourciMessPrimEleve = () => {
            const lListeDest = GEtatUtilisateur.getUtilisateur().listeDestProfsDiscussionPrimEleve;
            if (lListeDest && lListeDest.count() > 0) {
                return lListeDest.count() > 1 ? ObjetTraduction_1.GTraductions.getValeur('Messagerie.EcrireUnMessage') : ObjetTraduction_1.GTraductions.getValeur('Messagerie.EcrireUnMessageA_S', [lListeDest.getLibelle(0)]);
            }
            return '';
        }
        ;
        UtilitaireMessagerie.composeMettreEnCopie = (aParams) => {
            const H = [];
            H.push('<fieldset class="Gras">');
            H.push('<legend>', ObjetTraduction_1.GTraductions.getValeur('fenetreCommunication.mettreEnCopie'), '</legend>');
            if (aParams && aParams.avecDirection) {
                H.push('<div><ie-checkbox ie-model="cbDestinataireDirecteur" class="m-left-xl m-top-l">', ObjetTraduction_1.GTraductions.getValeur('fenetreCommunication.directionEcole'), '</ie-checkbox></div>');
            }
            if (aParams && aParams.avecEnseigantDEleve) {
                H.push('<div><ie-checkbox ie-model="cbDestinataireEnseignant" class="m-left-xl m-top-l">', ObjetTraduction_1.GTraductions.getValeur('fenetreCommunication.enseignantDEleve'), '</ie-checkbox></div>');
            }
            H.push('</fieldset>');
            return H.join('');
        }
        ;
        UtilitaireMessagerie.creerDiscussionAvecMairie = (aObjetFenetre, aInstance) => {
            if (!UtilitaireMessagerie.controleMessagerieDesactivee()) {
                return;
            }
            const lFenetreMessage = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(aObjetFenetre, {
                pere: aInstance
            });
            lFenetreMessage.setOptionsFenetre({
                titre: ObjetTraduction_1.GTraductions.getValeur('fenetreCommunication.nouveauMessageMairie')
            });
            lFenetreMessage.setDonnees({
                ListeRessources: GEtatUtilisateur.Identification.ressource.destinatairePersonnelsMairie,
                listeSelectionnee: new ObjetListeElements_1.ObjetListeElements(),
                genreRessource: Enumere_Ressource_1.EGenreRessource.Personnel,
                message: {
                    destinataireMairie: true
                }
            });
        }
        ;
        UtilitaireMessagerie.controleMessagerieDesactivee = () => {
            const lDroits = GApplication.droits;
            if (!lDroits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussion)) {
                GApplication.getMessage().afficher({
                    message: ObjetTraduction_1.GTraductions.getValeur('Messagerie.DiscussionsDesactivees')
                });
                return false;
            }
            if (lDroits.get(ObjetDroitsPN_1.TypeDroits.communication.discussionDesactiveeSelonHoraire)) {
                GApplication.getMessage().afficher({
                    message: lDroits.get(ObjetDroitsPN_1.TypeDroits.communication.messageDiscussionDesactiveeSelonHoraire)
                });
                return false;
            }
            return true;
        }
        ;
        class ObjetRequeteSaisiePublicMessage extends ObjetRequeteJSON_1.ObjetRequeteSaisie {
        }
        CollectionRequetes_1.Requetes.inscrire('SaisiePublicMessage', ObjetRequeteSaisiePublicMessage);
    },
    fn: 'utilitairemessagerie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireListePublics = UtilitaireListePublics;
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        function UtilitaireListePublics() {}
        UtilitaireListePublics.getLibelleSuppListePublics = (aArticle, aOptions={}) => {
            const lOptions = Object.assign({
                avecProfPrincipal: false,
                avecTuteur: false,
                avecListeRessource: false,
                avecReferentHarcelement: true,
                avecMonCpe: true,
                avecFonction: true
            }, aOptions);
            const H = [];
            if (aArticle) {
                switch (aArticle.getGenre()) {
                case Enumere_Ressource_1.EGenreRessource.Enseignant:
                    if (lOptions.avecProfPrincipal && aArticle.estPrincipal) {
                        H.push(`<p><i role="presentation" class="icon_star m-right-s"></i>${ObjetTraduction_1.GTraductions.getValeur('Messagerie.ProfPrincipal')}</p>`);
                    }
                    if (lOptions.avecTuteur && aArticle.estTuteur) {
                        H.push(`<p><i role="presentation" class="icon_star m-right-s"></i>${ObjetTraduction_1.GTraductions.getValeur('Messagerie.Tuteur')}</p>`);
                    }
                    if (lOptions.avecListeRessource && aArticle.listeRessources) {
                        H.push(aArticle.listeRessources.getTableauLibelles().join('<br>'));
                    }
                    break;
                case Enumere_Ressource_1.EGenreRessource.Personnel:
                    if (lOptions.avecMonCpe && aArticle.estMonCpe) {
                        H.push(`<p><i role="presentation" class="icon_star m-right-s"></i>${ObjetTraduction_1.GTraductions.getValeur('Messagerie.monCPE')}</p>`);
                    }
                    if (lOptions.avecFonction && aArticle.fonction) {
                        H.push(`<p>${aArticle.fonction.getLibelle()}</p>`);
                    }
                    break;
                case Enumere_Ressource_1.EGenreRessource.Eleve:
                case Enumere_Ressource_1.EGenreRessource.Responsable:
                    if (aArticle.classesNiv) {
                        H.push(`<p>${aArticle.classesNiv.getTableauLibelles().join(', ')}</p>`);
                    }
                }
            }
            return H.join('');
        }
        ;
    },
    fn: 'utilitairelistepublics.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.MoteurDestinatairesPN = void 0;
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const TypeGenreInternetIndividu_1 = require("TypeGenreInternetIndividu");
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const ObjetRequeteListePublics_1 = require("ObjetRequeteListePublics");
        const ObjetFenetre_SelectionClasseGroupe_1 = require("ObjetFenetre_SelectionClasseGroupe");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetFenetre_SelectionPublic_1 = require("ObjetFenetre_SelectionPublic");
        const ObjetFenetre_SelectionPublic_PN_1 = require("ObjetFenetre_SelectionPublic_PN");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetElement_1 = require("ObjetElement");
        const UtilitaireMessagerie_1 = require("UtilitaireMessagerie");
        const UtilitaireListePublics_1 = require("UtilitaireListePublics");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const AccessApp_1 = require("AccessApp");
        const jsx_1 = require("jsx");
        class MoteurDestinatairesPN {
            constructor() {
                this.applicationSco = (0,
                AccessApp_1.getApp)();
            }
            estGenrePublicEntite(aParam) {
                if ((aParam.donnee === null) || (aParam.donnee === undefined)) {
                    return false;
                }
                const lGenresPublicEntite = aParam.donnee.genresPublicEntite;
                switch (aParam.genreRessource) {
                case Enumere_Ressource_1.EGenreRessource.Responsable:
                    return lGenresPublicEntite.contains(TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_ParentEleve) || lGenresPublicEntite.contains(TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Parent);
                default:
                    return lGenresPublicEntite.contains(_toInternetIndividu.call(this, aParam.genreRessource));
                }
            }
            setGenrePublicEntite(aParam) {
                if ((aParam.donnee === null) || (aParam.donnee === undefined)) {
                    return;
                }
                const lGenresPublicEntite = aParam.donnee.genresPublicEntite;
                const lRelatifEleve = (aParam.genreRessource === Enumere_Ressource_1.EGenreRessource.Responsable) ? (aParam.valeur === true ? true : this.estRelatifEleve(aParam)) : null;
                const lGII = _toInternetIndividu.call(this, aParam.genreRessource, lRelatifEleve);
                const lEstCoche = lGenresPublicEntite.contains(lGII);
                if (lEstCoche) {
                    lGenresPublicEntite.remove(lGII);
                } else {
                    lGenresPublicEntite.add(lGII);
                }
                aParam.donnee.avecModificationPublic = true;
            }
            estRelatifEleve(aParam) {
                if ((aParam.donnee === null) || (aParam.donnee === undefined)) {
                    return;
                }
                const lGenresPublicEntite = aParam.donnee.genresPublicEntite;
                switch (aParam.genreRessource) {
                case Enumere_Ressource_1.EGenreRessource.Responsable:
                    if (lGenresPublicEntite.contains(TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_ParentEleve)) {
                        return true;
                    }
                    if (lGenresPublicEntite.contains(TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Parent)) {
                        return false;
                    }
                    break;
                }
                return null;
            }
            setChoixParMembre(aParam) {
                if ((aParam.donnee === null) || (aParam.donnee === undefined)) {
                    return;
                }
                const lGenresPublicEntite = aParam.donnee.genresPublicEntite;
                switch (aParam.genreRessource) {
                case Enumere_Ressource_1.EGenreRessource.Responsable:
                    lGenresPublicEntite.add(_toInternetIndividu.call(this, aParam.genreRessource, aParam.choixParMembre));
                    lGenresPublicEntite.remove(_toInternetIndividu.call(this, aParam.genreRessource, !aParam.choixParMembre));
                    aParam.donnee.avecModificationPublic = true;
                    break;
                }
            }
            getDonneesPublic(aParam) {
                const lGenreRessource = aParam.genreRessource;
                const lEstResponsableAResponsable = [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent].includes(GEtatUtilisateur.GenreEspace);
                const lParams = {
                    genres: [lGenreRessource],
                    sansFiltreSurEleve: this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.communication.toutesClasses) || (aParam.forcerSansFiltreSurEleve === true),
                    entreResponsables: lEstResponsableAResponsable,
                    avecFonctionPersonnel: true,
                    avecInfoRencontresSepareesDesResponsables: !!aParam.avecInfoRencontresSepareesDesResponsables,
                    eleve: aParam.eleve,
                    avecInfoResponsablePreferentiel: !!aParam.avecInfoResponsablePreferentiel,
                    avecUniquementResponsableDelegue: lGenreRessource === Enumere_Ressource_1.EGenreRessource.Responsable && aParam.avecUniquementResponsableDelegue,
                    avecEmail: !!aParam.avecEmail,
                    avecUniquementEmail: !!aParam.avecUniquementEmail,
                    estCtxModeleActualite: !!aParam.estCtxModeleActualite
                };
                if (lEstResponsableAResponsable) {
                    lParams['avecFiltreDelegues'] = true;
                }
                return new ObjetRequeteListePublics_1.ObjetRequeteListePublics(this,aParam.clbck ? aParam.clbck.bind(this) : null).lancerRequete(lParams);
            }
            getTitreSelectRessource(aParam) {
                const lGenreRessource = aParam.genreRessource;
                return Enumere_Ressource_1.EGenreRessourceUtil.getTitreFenetreSelectionRessource(lGenreRessource, aParam.singulier);
            }
            ouvrirModaleSelectionRessource(aParam) {
                const lModaleSelect = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_SelectionClasseGroupe_1.ObjetFenetre_SelectionClasseGroupe, {
                    pere: this,
                    evenement: function(aGenreRessource, aListeRessourcesSelect, aNumeroBouton) {
                        if (aNumeroBouton === 1) {
                            const lEntitesAutreGenre = aParam.donnee.listePublicEntite.getListeElements( (aElt) => {
                                return aElt.getGenre() !== aGenreRessource;
                            }
                            );
                            aParam.donnee.listePublicEntite = lEntitesAutreGenre;
                            aParam.donnee.listePublicEntite.add(MethodesObjet_1.MethodesObjet.dupliquer(aListeRessourcesSelect));
                            aParam.donnee.avecModificationPublic = true;
                            aParam.clbck();
                        }
                    }
                });
                const lGenreRessource = aParam.genreRessource;
                const lAvecClasse = lGenreRessource === Enumere_Ressource_1.EGenreRessource.Classe;
                const lListeClassesGroupes = this.applicationSco.getEtatUtilisateur().getListeClasses({
                    avecClasse: lAvecClasse,
                    avecGroupe: lGenreRessource === Enumere_Ressource_1.EGenreRessource.Groupe,
                    uniquementClasseEnseignee: [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Mobile_Professeur].includes(GEtatUtilisateur.GenreEspace) ? !this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.communication.toutesClasses) : false
                });
                const lTitre = lGenreRessource === Enumere_Ressource_1.EGenreRessource.Classe ? ObjetTraduction_1.GTraductions.getValeur('fenetreSelectionClasseGroupe.titreClasses') : ObjetTraduction_1.GTraductions.getValeur('fenetreSelectionClasseGroupe.titreGroupes');
                lModaleSelect.setSelectionObligatoire(false);
                lModaleSelect.setAvecCumul(lAvecClasse);
                lModaleSelect.setDonnees({
                    listeRessources: lListeClassesGroupes,
                    listeRessourcesSelectionnees: MethodesObjet_1.MethodesObjet.dupliquer(aParam.donnee.listePublicEntite),
                    genreRessource: lGenreRessource,
                    titre: lTitre
                });
            }
            ouvrirModaleSelectionPublic(aParam) {
                const lAvecFiltreDelegues = [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent].includes(GEtatUtilisateur.GenreEspace) && aParam.genreRessource === Enumere_Ressource_1.EGenreRessource.Responsable;
                aParam = Object.assign({
                    avecCoche: true,
                    avecFiltreDelegues: lAvecFiltreDelegues
                }, aParam);
                this.getDonneesPublic({
                    genreRessource: aParam.genreRessource,
                    forcerSansFiltreSurEleve: aParam.forcerSansFiltreSurEleve,
                    avecUniquementEmail: aParam.avecUniquementEmail,
                    avecEmail: aParam.avecEmail,
                    eleve: aParam.eleve,
                    avecUniquementResponsableDelegue: aParam.avecUniquementResponsableDelegue,
                    estCtxModeleActualite: aParam.estCtxModeleActualite
                }).then( (aDonnees) => {
                    this.openModaleSelectPublic({
                        listePublicDonnee: aParam.listePublicDonnee,
                        clbck: aParam.clbck,
                        titre: this.getTitreSelectRessource({
                            genreRessource: aParam.genreRessource,
                            singulier: !aParam.avecCoche
                        }),
                        genreRessource: aParam.genreRessource,
                        listeRessources: aDonnees.listePublic,
                        listeRessourcesSelectionnees: aParam.listePublicDonnee.getListeElements( (aElt) => {
                            return aElt.getGenre() === aParam.genreRessource;
                        }
                        ),
                        listeServicesPeriscolaire: aParam.listeServicesPeriscolaire,
                        listeProjetsAcc: aParam.listeProjetsAcc,
                        listeFamilles: aDonnees.listeFamilles,
                        listeNiveauxResponsabilite: aDonnees.listeNiveauxResponsabilite,
                        avecCoche: aParam.avecCoche,
                        avecFiltreDelegues: aParam.avecFiltreDelegues,
                        avecFiltreSelonAcceptRdv: aParam.avecFiltreSelonAcceptRdv,
                        avecDirEnseignant: aParam.avecDirEnseignant,
                        listeRessourceDesactiver: aParam.listeRessourceDesactiver
                    });
                }
                );
            }
            automatiserSelectionPublic(aParam) {
                this.getDonneesPublic({
                    genreRessource: aParam.genreRessource,
                    clbck: (aDonnees) => {
                        const lListeComplet = aDonnees.listePublic;
                        if (aParam.donnee.listePublicIndividu.count() === 0) {
                            if (lListeComplet.count() === 1) {
                                aParam.donnee.listePublicIndividu = lListeComplet.getListeElements();
                                aParam.donnee.avecModificationPublic = true;
                                aParam.clbck();
                            }
                        }
                    }
                });
            }
            openModaleSelectPublic(aParam) {
                const lGenreRessource = aParam.genreRessource;
                const lAvecCoche = 'avecCoche'in aParam ? aParam.avecCoche : true;
                const lValeurParDefautAvecFiltreDelegues = aParam.genreRessource === Enumere_Ressource_1.EGenreRessource.Responsable && [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent].includes(GEtatUtilisateur.GenreEspace);
                const lAvecFiltreDelegues = 'avecFiltreDelegues'in aParam ? aParam.avecFiltreDelegues : lValeurParDefautAvecFiltreDelegues;
                const lModaleSelect = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_SelectionPublic_PN_1.ObjetFenetre_SelectionPublic_PN, {
                    pere: this,
                    evenement: function(aGenreRessource, aListeRessourcesSelect, aNumeroBouton) {
                        if (aNumeroBouton === 1) {
                            const lPublicAutresGenres = aParam.listePublicDonnee.getListeElements( (aElt) => {
                                return aElt.getGenre() !== aGenreRessource;
                            }
                            );
                            aParam.listePublicDonnee = lPublicAutresGenres;
                            aParam.listePublicDonnee.add(MethodesObjet_1.MethodesObjet.dupliquer(aListeRessourcesSelect));
                            aParam.clbck({
                                listePublicDonnee: aParam.listePublicDonnee,
                                avecModificationPublic: true
                            });
                        }
                    }
                }, {
                    titre: aParam.titre
                });
                const lListeCumuls = new ObjetListeElements_1.ObjetListeElements();
                switch (lGenreRessource) {
                case Enumere_Ressource_1.EGenreRessource.Eleve:
                case Enumere_Ressource_1.EGenreRessource.Responsable:
                    {
                        lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('destinataires.Cumul.Classe'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.classe,0));
                        lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('destinataires.Cumul.Groupe'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.groupe,1));
                        lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('destinataires.Cumul.Alphabetique'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.initial,2));
                        if (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Responsable) {
                            lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('destinataires.Cumul.NomDesEleves'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.nomEleves));
                        }
                        if (aParam.listeServicesPeriscolaire) {
                            lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('destinataires.Cumul.ServicesPeriscolaire'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.servicesPeriscolaire));
                        }
                        if (aParam.listeProjetsAcc) {
                            lListeCumuls.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.ProjetsAccompagnement'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.projetsAccompagnement));
                        }
                        if (aParam.listeFamilles) {
                            aParam.listeFamilles.parcourir( (aFamille) => {
                                const lFiltreFamille = new ObjetElement_1.ObjetElement(aFamille.getLibelle(),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.famille);
                                lFiltreFamille.famille = aFamille;
                                lListeCumuls.addElement(lFiltreFamille);
                            }
                            );
                        }
                        lModaleSelect.setListeCumuls(lListeCumuls);
                        lModaleSelect.setGenreCumulActif(ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.classe);
                        lModaleSelect.setOptions({
                            getInfosSuppZonePrincipale(aParams) {
                                return UtilitaireListePublics_1.UtilitaireListePublics.getLibelleSuppListePublics(aParams.article);
                            }
                        });
                        break;
                    }
                case Enumere_Ressource_1.EGenreRessource.Personnel:
                    lListeCumuls.add(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionPublic.Cumul.Aucun'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.sans,0));
                    lListeCumuls.add(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('actualites.Cumul.Fonction'),0,ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.fonction,1));
                    lModaleSelect.setListeCumuls(lListeCumuls);
                    lModaleSelect.setGenreCumulActif(ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.fonction);
                    lModaleSelect.setOptions({
                        getInfosSuppZonePrincipale(aParams) {
                            return lModaleSelect.getGenreCumul() !== ObjetFenetre_SelectionPublic_1.TypeGenreCumulSelectionPublic.fonction ? UtilitaireMessagerie_1.UtilitaireMessagerie.getLibelleSuppListePublics(aParams.article) : '';
                        }
                    });
                    break;
                case Enumere_Ressource_1.EGenreRessource.Enseignant:
                    lModaleSelect.setOptions({
                        getInfosSuppZonePrincipale(aParams) {
                            return UtilitaireListePublics_1.UtilitaireListePublics.getLibelleSuppListePublics(aParams.article);
                        }
                    });
                    break;
                }
                lModaleSelect.setListeCumuls(lListeCumuls);
                lModaleSelect.setOptions({
                    avecCocheRessources: true,
                    selectionObligatoire: false,
                    filtres: [],
                    avecBarreTitre: false,
                    estDeploye: false,
                    avecFiltreDelegues: lAvecFiltreDelegues,
                    avecFiltreSelonAcceptRdv: aParam.avecFiltreSelonAcceptRdv,
                    avecFiltreAucunAccesEspace: aParam.avecFiltreAucunAccesEspace !== null && aParam.avecFiltreAucunAccesEspace !== undefined ? aParam.avecFiltreAucunAccesEspace : false,
                    avecDirEnseignant: aParam.avecDirEnseignant
                });
                lModaleSelect.setOptionsFenetreSelectionRessource({
                    listeRessourceDesactiver: aParam.listeRessourceDesactiver
                });
                if (!lAvecCoche) {
                    lModaleSelect.setOptionsFenetreSelectionRessource({
                        optionsDonneesListe: {
                            avecCB: false,
                            avecSelection: true,
                            avecEvnt_Selection: true
                        },
                        avecCocheRessources: false
                    });
                    lModaleSelect.setOptionsFenetre({
                        listeBoutons: [{
                            libelle: ObjetTraduction_1.GTraductions.getValeur('Fermer'),
                            theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire
                        }]
                    });
                }
                lModaleSelect.setDonnees({
                    listeRessources: aParam.listeRessources,
                    listeRessourcesSelectionnees: aParam.listeRessourcesSelectionnees,
                    genreRessource: aParam.genreRessource,
                    titre: aParam.titre,
                    listeNiveauxResponsabilite: aParam.listeNiveauxResponsabilite
                });
            }
            construireHtmlDestRespToResp(aParam) {
                const H = [];
                H.push('<div ie-node="', aParam.node, '()" class="itemDest flex-contain conteneurIcon">');
                H.push(IE.jsx.str("i", {
                    role: "presentation",
                    class: "icon_group"
                }));
                H.push('<div class="strIcon">', ObjetTraduction_1.GTraductions.getValeur('destinataires.respDesClasses'), ' <span class="strNumber" id="', aParam.idCompteur, '"> (0) </span></div>');
                H.push(IE.jsx.str("i", {
                    role: "presentation",
                    class: "icon_angle_right"
                }));
                H.push('</div>');
                return H.join('');
            }
            construireHtmlDestPrimaireRespClasses(aParam) {
                const H = [];
                H.push('<div ie-node="', aParam.node, '(', Enumere_Ressource_1.EGenreRessource.Classe, ')" class="itemDest flex-contain conteneurIcon">');
                H.push(IE.jsx.str("i", {
                    role: "presentation",
                    class: "icon_group"
                }));
                H.push('<div class="strIcon">', ObjetTraduction_1.GTraductions.getValeur('destinataires.respDesClasses'), ' <span class="strNumber" id="', aParam.idCompteur, '"> (0) </span></div>');
                H.push(IE.jsx.str("i", {
                    role: "presentation",
                    class: "icon_angle_right"
                }));
                H.push('</div>');
                return H.join('');
            }
            construireHtmlDestPrimaireResponsables(aParam) {
                var _a;
                return _construireHtmlSelectionDeRessource.call(this, {
                    node: aParam.node,
                    genreRessource: Enumere_Ressource_1.EGenreRessource.Responsable,
                    strRessource: ObjetTraduction_1.GTraductions.getValeur('destinataires.responsables'),
                    idCompteur: aParam.idCompteur,
                    ariaLabel: (_a = aParam.ariaLabel) !== null && _a !== void 0 ? _a : ObjetTraduction_1.GTraductions.getValeur('WAI.SelectionResponsable')
                });
            }
            construireHtmlDestPrimaireProfs(aParam) {
                var _a;
                return _construireHtmlSelectionDeRessource.call(this, {
                    node: aParam.node,
                    genreRessource: Enumere_Ressource_1.EGenreRessource.Enseignant,
                    strRessource: ObjetTraduction_1.GTraductions.getValeur('destinataires.professeurs'),
                    idCompteur: aParam.idCompteur,
                    ariaLabel: (_a = aParam.ariaLabel) !== null && _a !== void 0 ? _a : ObjetTraduction_1.GTraductions.getValeur('WAI.SelectionProfesseur')
                });
            }
            construireHtmlDestPrimairePersonnels(aParam) {
                var _a;
                return _construireHtmlSelectionDeRessource.call(this, {
                    node: aParam.node,
                    genreRessource: Enumere_Ressource_1.EGenreRessource.Personnel,
                    strRessource: ObjetTraduction_1.GTraductions.getValeur('destinataires.personnels'),
                    idCompteur: aParam.idCompteur,
                    ariaLabel: (_a = aParam.ariaLabel) !== null && _a !== void 0 ? _a : ObjetTraduction_1.GTraductions.getValeur('WAI.SelectionPersonnel')
                });
            }
            construireHtmlDestPrimaireDirecteur(aParam) {
                const H = [];
                H.push('<ie-checkbox class="itemDest" ie-model="', aParam.node, '()">', aParam.str, '</ie-checkbox>');
                return H.join('');
            }
            surSelectEntitesPrimaireRespClasses(aParam) {
                if (!this.applicationSco.getEtatUtilisateur().pourPrimaire()) {
                    return;
                }
                const lDonnee = aParam.donnee;
                const lNbClasses = lDonnee.listePublicEntite.getListeElements( (D) => {
                    return D.getGenre() === Enumere_Ressource_1.EGenreRessource.Classe;
                }
                ).getNbrElementsExistes();
                const lEstCoche = lDonnee.genresPublicEntite.contains(TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Parent);
                if (lNbClasses > 0) {
                    if (!lEstCoche) {
                        lDonnee.genresPublicEntite.add(TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Parent);
                    }
                } else {
                    if (lEstCoche) {
                        lDonnee.genresPublicEntite.remove(TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Parent);
                    }
                }
            }
        }
        exports.MoteurDestinatairesPN = MoteurDestinatairesPN;
        function _toInternetIndividu(aGenreRessource, aRelatifEleve) {
            switch (aGenreRessource) {
            case Enumere_Ressource_1.EGenreRessource.Enseignant:
                return TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Professeur;
            case Enumere_Ressource_1.EGenreRessource.Eleve:
                return TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Eleve;
            case Enumere_Ressource_1.EGenreRessource.Responsable:
                return (aRelatifEleve ? TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_ParentEleve : TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Parent);
            case Enumere_Ressource_1.EGenreRessource.MaitreDeStage:
                return TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_MaitreDeStageEleve;
            case Enumere_Ressource_1.EGenreRessource.Personnel:
                return TypeGenreInternetIndividu_1.TypeGenreInternetIndividu.InternetIndividu_Personnel;
            }
        }
        function _construireHtmlSelectionDeRessource(aParam) {
            return (IE.jsx.str("ie-btnselecteur", {
                class: "m-bottom-l",
                "ie-model": "getSelectRessource",
                "aria-label": aParam.ariaLabel,
                "ie-node": (0,
                jsx_1.jsxFuncAttr)(aParam.node, [aParam.genreRessource])
            }, aParam.strRessource, IE.jsx.str("span", {
                class: "strNumber",
                id: aParam.idCompteur
            })));
        }
    },
    fn: 'moteurdestinatairespn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.MoteurMailTo = void 0;
        const UtilitaireEmail_1 = require("UtilitaireEmail");
        const ObjetChaine_1 = require("ObjetChaine");
        class MoteurMailTo {
            constructor(aParametres) {
                this.listeAdresses = [];
                this.parametres = Object.assign({
                    separateur: ';',
                    longueurMax: 2000,
                    prefixeLien: 'mailto:'
                }, aParametres);
                this.longueurTotale = this.parametres.prefixeLien.length;
            }
            ajouterAdresseEmail(aAdresse) {
                let result = false;
                if (!!aAdresse && aAdresse.length > 0) {
                    if (UtilitaireEmail_1.TUtilitaireEmail.estValide(aAdresse)) {
                        const lAdresseSansEntites = ObjetChaine_1.GChaine.enleverEntites(aAdresse);
                        if (this.listeAdresses.indexOf(lAdresseSansEntites) === -1) {
                            let lLongueurNouvelleAdresse = lAdresseSansEntites.length;
                            if (this.listeAdresses.length > 1) {
                                lLongueurNouvelleAdresse += this.parametres.separateur.length;
                            }
                            if (this.longueurTotale + lLongueurNouvelleAdresse < this.parametres.longueurMax) {
                                result = true;
                                this.longueurTotale += lLongueurNouvelleAdresse;
                                this.listeAdresses.push(lAdresseSansEntites);
                            }
                        }
                    }
                }
                return result;
            }
            toString() {
                return this.parametres.prefixeLien + this.listeAdresses.join(this.parametres.separateur);
            }
        }
        exports.MoteurMailTo = MoteurMailTo;
    },
    fn: 'moteurmailto.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_EnvoiEMail = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const AccessApp_1 = require("AccessApp");
        require("ObjetFenetre_DepotDocument.css");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const ObjetTraduction_2 = require("ObjetTraduction");
        const Divers_css_1 = require("Divers.css");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const MoteurDestinatairesPN_1 = require("MoteurDestinatairesPN");
        const MethodesObjet_1 = require("MethodesObjet");
        const MoteurMailTo_1 = require("MoteurMailTo");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const Enumere_Espace_1 = require("Enumere_Espace");
        class ObjetFenetre_EnvoiEMail extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.applicationSco = (0,
                AccessApp_1.getApp)();
                this.etatUtilisateurSco = this.applicationSco.getEtatUtilisateur();
                this.objetParametres = this.applicationSco.getObjetParametres();
                this.destinataires = new Map();
                this.setOptionsFenetre({
                    avecTailleSelonContenu: true,
                    largeur: 400,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler'), TradObjetFenetre_EnvoiEMail.validerEtRediger],
                    titre: TradObjetFenetre_EnvoiEMail.titre,
                });
                this.moteurDestinatairesPN = new MoteurDestinatairesPN_1.MoteurDestinatairesPN();
                this.genreRessources = ObjetFenetre_EnvoiEMail.getGenreRessources();
                this.initDestinataires();
            }
            surSelectionSelecteur(aGenreRessource) {
                this.moteurDestinatairesPN.ouvrirModaleSelectionPublic({
                    genreRessource: aGenreRessource,
                    listePublicDonnee: this.destinataires.get(aGenreRessource),
                    avecCoche: true,
                    avecEmail: true,
                    avecUniquementEmail: true,
                    clbck: (aParam) => {
                        this.destinataires.set(aGenreRessource, aParam.listePublicDonnee);
                    }
                });
            }
            initDestinataires() {
                this.genreRessources.forEach(aGenre => {
                    this.destinataires.set(aGenre, new ObjetListeElements_1.ObjetListeElements());
                }
                );
            }
            composeContenu() {
                if (!this.genreRessources) {
                    return '';
                }
                return (IE.jsx.str("div", {
                    class: [Divers_css_1.StylesDivers.flexContain, Divers_css_1.StylesDivers.cols, Divers_css_1.StylesDivers.flexGap]
                }, this.genreRessources.map(aGenre => this.composeSelecteur(aGenre))));
            }
            jsxModelBtnSelecteur(aGenre) {
                return {
                    event: () => {
                        this.surSelectionSelecteur(aGenre);
                    }
                    ,
                    getLibelle: () => this.getLibelleSelecteur(aGenre),
                    getIcone: () => {
                        return '';
                    }
                    ,
                    getDisabled: () => {
                        return !ObjetFenetre_EnvoiEMail.avecDroitCommunicationGenreRessource(aGenre);
                    }
                };
            }
            composeSelecteur(aGenre) {
                return IE.jsx.str("ie-btnselecteur", {
                    "ie-model": this.jsxModelBtnSelecteur.bind(this, aGenre),
                    "aria-haspopup": "dialog",
                    "aria-label": this.getLibelleRessource(aGenre)
                });
            }
            getLibelleSelecteur(aGenre) {
                const lDestinataires = this.destinataires.get(aGenre);
                if (!lDestinataires) {
                    return '';
                }
                const lCompteur = lDestinataires.count();
                return `${this.getLibelleRessource(aGenre)} (${lCompteur})`;
            }
            getLibelleRessource(aGenre) {
                switch (aGenre) {
                case Enumere_Ressource_1.EGenreRessource.Eleve:
                    return ObjetTraduction_1.GTraductions.getValeur('destinataires.eleves');
                case Enumere_Ressource_1.EGenreRessource.Responsable:
                    return ObjetTraduction_1.GTraductions.getValeur('destinataires.responsables');
                case Enumere_Ressource_1.EGenreRessource.Personnel:
                    return ObjetTraduction_1.GTraductions.getValeur('destinataires.personnels');
                case Enumere_Ressource_1.EGenreRessource.Enseignant:
                    return ObjetTraduction_1.GTraductions.getValeur('destinataires.professeurs');
                default:
                    ;return '';
                }
            }
            static avecDroitCommunicationGenreRessource(aGenreRessource) {
                const lApp = (0,
                AccessApp_1.getApp)();
                if (!lApp.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussion)) {
                    return false;
                }
                return ObjetFenetre_EnvoiEMail.estGenreRessourceAutorisePourGenreEspace(aGenreRessource) && ObjetFenetre_EnvoiEMail.estGenreEspaceAutorisePourGenreRessource(aGenreRessource);
            }
            static avecAuMoinsUnTypeDeDestinatairesPossible() {
                return ObjetFenetre_EnvoiEMail.getGenreRessources().length > 0;
            }
            static estGenreEspaceAutorisePourGenreRessource(aGenreRessource, aGenreEspace=GEtatUtilisateur.GenreEspace) {
                const lApp = (0,
                AccessApp_1.getApp)();
                const lEtatUtil = lApp.getEtatUtilisateur();
                switch (aGenreRessource) {
                case Enumere_Ressource_1.EGenreRessource.Classe:
                    return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(aGenreEspace) && lEtatUtil.getListeClasses({
                        avecClasse: true,
                        uniquementClasseEnseignee: true
                    }).count() > 0;
                case Enumere_Ressource_1.EGenreRessource.Eleve:
                    return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(aGenreEspace);
                case Enumere_Ressource_1.EGenreRessource.Enseignant:
                    return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.PrimDirection, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur].includes(aGenreEspace);
                case Enumere_Ressource_1.EGenreRessource.Personnel:
                    return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Eleve].includes(aGenreEspace);
                case Enumere_Ressource_1.EGenreRessource.Responsable:
                    return ([Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(aGenreEspace));
                default:
                    return false;
                }
            }
            static estGenreRessourceAutorisePourGenreEspace(aGenreRessource, aGenreEspace=GEtatUtilisateur.GenreEspace) {
                switch (aGenreEspace) {
                case Enumere_Espace_1.EGenreEspace.PrimProfesseur:
                    return [Enumere_Ressource_1.EGenreRessource.Eleve, Enumere_Ressource_1.EGenreRessource.Responsable, Enumere_Ressource_1.EGenreRessource.Enseignant].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.Professeur:
                    return [Enumere_Ressource_1.EGenreRessource.Eleve, Enumere_Ressource_1.EGenreRessource.Responsable, Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel, Enumere_Ressource_1.EGenreRessource.MaitreDeStage].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.Etablissement:
                    return [Enumere_Ressource_1.EGenreRessource.Eleve, Enumere_Ressource_1.EGenreRessource.Responsable, Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.Administrateur:
                    return [Enumere_Ressource_1.EGenreRessource.Eleve, Enumere_Ressource_1.EGenreRessource.Responsable, Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.PrimDirection:
                    return [Enumere_Ressource_1.EGenreRessource.Eleve, Enumere_Ressource_1.EGenreRessource.Responsable, Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.Parent:
                    return [Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.Accompagnant:
                    return [Enumere_Ressource_1.EGenreRessource.Responsable, Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.PrimParent:
                    return [Enumere_Ressource_1.EGenreRessource.Enseignant].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.PrimAccompagnant:
                    return [Enumere_Ressource_1.EGenreRessource.Enseignant].includes(aGenreRessource);
                case Enumere_Espace_1.EGenreEspace.Tuteur:
                    return [Enumere_Ressource_1.EGenreRessource.Responsable, Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel].includes(aGenreRessource);
                default:
                    return false;
                }
            }
            surValidation(ANumeroBouton) {
                if (ANumeroBouton === 1) {
                    const lMoteurMailTo = new MoteurMailTo_1.MoteurMailTo();
                    let lAvecEmail = false;
                    this.destinataires.forEach(aListe => {
                        aListe.parcourir(aElement => {
                            if ('email'in aElement && MethodesObjet_1.MethodesObjet.isString(aElement.email)) {
                                lAvecEmail = true;
                                lMoteurMailTo.ajouterAdresseEmail(aElement.email);
                            } else {}
                        }
                        );
                    }
                    );
                    if (!lAvecEmail) {
                        GApplication.getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                            message: TradObjetFenetre_EnvoiEMail.messageErreurDestinataires
                        });
                        return;
                    }
                    const lLink = document.createElement('a');
                    lLink.setAttribute('href', lMoteurMailTo.toString());
                    lLink.click();
                }
                super.surValidation(ANumeroBouton);
            }
            static getGenreRessources() {
                return [Enumere_Ressource_1.EGenreRessource.Eleve, Enumere_Ressource_1.EGenreRessource.Responsable, Enumere_Ressource_1.EGenreRessource.Enseignant, Enumere_Ressource_1.EGenreRessource.Personnel].filter(aGenre => ObjetFenetre_EnvoiEMail.avecDroitCommunicationGenreRessource(aGenre));
            }
        }
        exports.ObjetFenetre_EnvoiEMail = ObjetFenetre_EnvoiEMail;
        const TradObjetFenetre_EnvoiEMail = ObjetTraduction_2.TraductionsModule.getModule('ObjetFenetre_EnvoiEMail', {
            titre: '',
            messageErreurDestinataires: '',
            validerEtRediger: ''
        });
    },
    fn: 'objetfenetre_envoiemail.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetEtatUtilisateur_Espace = void 0;
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_GenreImpression_1 = require("Enumere_GenreImpression");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetEtatUtilisateur_1 = require("ObjetEtatUtilisateur");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeDomaine_1 = require("TypeDomaine");
        const Enumere_Connexion_1 = require("Enumere_Connexion");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const ObjetFenetre_EnvoiEMail_1 = require("ObjetFenetre_EnvoiEMail");
        class ObjetEtatUtilisateur_Espace extends ObjetEtatUtilisateur_1.ObjetEtatUtilisateur {
            constructor(aGenreEspace) {
                super(aGenreEspace);
                this.widgets = [];
                this.parametresSco = [];
                this._indiceProgressionSelection = 0;
                this._domaineConsultation = new TypeDomaine_1.TypeDomaine();
                this.setGenreConnexion = (aGenreConnexion) => {
                    this.genreConnexion = this.GenreEspace === Enumere_Espace_1.EGenreEspace.Professeur ? aGenreConnexion : Enumere_Connexion_1.EGenreConnexion.Normale;
                    if (this.applicationSco.acces.estConnexionCAS() || this.applicationSco.acces.estConnexionCookie()) {
                        this.genreConnexion = Enumere_Connexion_1.EGenreConnexion.Normale;
                    }
                    if (this.applicationSco.getOptionsEspaceLocal()) {
                        this.applicationSco.getOptionsEspaceLocal().setGenreConnexion(aGenreConnexion);
                    }
                }
                ;
                this.genreConnexion = Enumere_Connexion_1.EGenreConnexion.Normale;
                this.page = {};
            }
            initialiserEtatsParDefaut() {
                this.Aide = true;
            }
            initialiser() {
                this.initialiserEtatsParDefaut();
                this.setSemaineSelectionnee(IE.Cycles.cycleCourant());
                this.setDomaineSelectionne(new TypeDomaine_1.TypeDomaine().setValeur(true, IE.Cycles.cycleCourant()));
            }
            getAvecSaisie() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimDirection, Enumere_Espace_1.EGenreEspace.PrimAccompagnant].includes(GEtatUtilisateur.GenreEspace);
            }
            avecCommunication() {
                let lEstEspaceAvecCommunication = false;
                if ([Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Accompagnant].includes(this.GenreEspace)) {
                    lEstEspaceAvecCommunication = true;
                }
                if (this.GenreEspace === Enumere_Espace_1.EGenreEspace.Professeur && this.genreConnexion === Enumere_Connexion_1.EGenreConnexion.Allegee) {
                    lEstEspaceAvecCommunication = false;
                }
                const lAvecDiscussion = this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussion) && !this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.communication.discussionInterdit);
                const lAvecInfoSondage = this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.actualite.avecSaisieActualite);
                const lAvecDepotCasierIntervenant = this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.casierNumerique.avecSaisieDocumentsCasiersIntervenant);
                const lAvecDepotCasierResponsable = this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.casierNumerique.avecSaisieDocumentsCasiersResponsable);
                const lAvecRedirectionOngletEleves = this.estOngletAutorise(Enumere_Onglet_1.EGenreOnglet.ListeEleves);
                const lAvecRedirectionOngletResponsables = this.estOngletAutorise(Enumere_Onglet_1.EGenreOnglet.ListeResponsables);
                const lAvecRedirectionOngletProfs = this.estOngletAutorise(Enumere_Onglet_1.EGenreOnglet.ListeProfesseurs);
                const lAvecRedirectionOngletEquipePeda = this.estOngletAutorise(Enumere_Onglet_1.EGenreOnglet.EquipePedagogique);
                const lAvecRedirectionOngletPersonnels = this.estOngletAutorise(Enumere_Onglet_1.EGenreOnglet.ListePersonnels);
                const lAvecEnvoiEmail = ObjetFenetre_EnvoiEMail_1.ObjetFenetre_EnvoiEMail.avecAuMoinsUnTypeDeDestinatairesPossible();
                return lEstEspaceAvecCommunication && (lAvecDiscussion || lAvecInfoSondage || lAvecDepotCasierIntervenant || lAvecDepotCasierResponsable || lAvecRedirectionOngletEleves || lAvecRedirectionOngletResponsables || lAvecRedirectionOngletProfs || lAvecRedirectionOngletEquipePeda || lAvecRedirectionOngletPersonnels || lAvecEnvoiEmail);
            }
            avecFenetreKiosque() {
                return this.avecKiosque && [Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.PrimEleve].includes(GEtatUtilisateur.GenreEspace);
            }
            avecKiosque() {
                return this.autorisationKiosque && [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimEleve].includes(GEtatUtilisateur.GenreEspace);
            }
            avecImports() {
                return false;
            }
            avecFicheEtablissement() {
                let lEtablissement;
                let lAvecInfo = false;
                if (this.listeInformationsEtablissements) {
                    if ([Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur].includes(GEtatUtilisateur.GenreEspace)) {
                        if (!!this.getMembre().Etablissement) {
                            lEtablissement = this.listeInformationsEtablissements.getElementParNumero(this.getMembre().Etablissement.getNumero());
                            if (!!lEtablissement && lEtablissement.avecInformations) {
                                lAvecInfo = true;
                            }
                        }
                    } else {
                        for (let i = 0, lNbr = this.listeInformationsEtablissements.count(); i < lNbr; i++) {
                            lEtablissement = this.listeInformationsEtablissements.get(i);
                            if (lEtablissement.avecInformations) {
                                lAvecInfo = true;
                            }
                        }
                    }
                }
                return lAvecInfo;
            }
            getSemaineSelectionnee() {
                return this.SemaineSelectionnee;
            }
            setSemaineSelectionnee(aSemaine) {
                if (this.SemaineSelectionnee !== aSemaine) {
                    this.DomaineSelectionne = new TypeDomaine_1.TypeDomaine().setValeur(true, aSemaine);
                }
                this.SemaineSelectionnee = aSemaine;
            }
            getDomaineSelectionne() {
                return this.DomaineSelectionne && this.DomaineSelectionne.dupliquer ? this.DomaineSelectionne.dupliquer() : new TypeDomaine_1.TypeDomaine();
            }
            setDomaineSelectionne(aDomaine) {
                if (aDomaine && this.DomaineSelectionne && !aDomaine.estVide() && !aDomaine.egal(this.DomaineSelectionne)) {
                    this.SemaineSelectionnee = aDomaine.getPremierePosition();
                }
                this.DomaineSelectionne = aDomaine.dupliquer();
            }
            setGenreRessource(aGenreRessource) {
                this.genreRessourceSelectionne = aGenreRessource;
            }
            getGenreRessource() {
                return this.genreRessourceSelectionne;
            }
            resetGenreRessource() {
                this.genreRessourceSelectionne = null;
            }
            setPageCourante(aInstancePage) {
                super.setPageCourante(aInstancePage);
                this.EtatImpression = Enumere_GenreImpression_1.EGenreImpression.Aucune;
            }
            getNiveau() {
                return this.Navigation.Niveau;
            }
            setNiveau(aNiveau) {
                this.Navigation.Niveau = aNiveau;
            }
            setNavigationDate(aDate) {
                this.Navigation.Date = aDate;
            }
            getNavigationDate() {
                return this.Navigation.Date;
            }
            setNavigationCours(aCours) {
                this.Navigation.cours = aCours;
            }
            getNavigationCours() {
                return this.Navigation.cours;
            }
            getTriDevoirs() {
                return this.Navigation.triDevoirs;
            }
            inverserTriDevoirs() {
                this.Navigation.triDevoirs = !this.Navigation.triDevoirs;
            }
            getModeAffichageTimeLine() {
                if ((this.Navigation.modeAffichageTimeLine !== null) && (this.Navigation.modeAffichageTimeLine !== undefined)) {
                    return this.Navigation.modeAffichageTimeLine;
                } else {
                    return undefined;
                }
            }
            setModeAffichageTimeLine(aMode) {
                this.Navigation.modeAffichageTimeLine = aMode;
            }
            getDateDebutTimeLineCDT() {
                if ((this.Navigation.dateDebutTimeLineCDT !== null) && (this.Navigation.dateDebutTimeLineCDT !== undefined)) {
                    return this.Navigation.dateDebutTimeLineCDT;
                } else {
                    return undefined;
                }
            }
            setDateDebutTimeLineCDT(aDate) {
                this.Navigation.dateDebutTimeLineCDT = aDate;
            }
            getUniquementMesIncidents() {
                return this.Navigation.uniquementMesIncidents !== false;
            }
            setUniquementMesIncidents(aBoolean) {
                this.Navigation.uniquementMesIncidents = aBoolean;
            }
            getUniquementNonRegle() {
                return this.Navigation.uniquementNonRegle !== false;
            }
            setUniquementNonRegle(aBoolean) {
                this.Navigation.uniquementNonRegle = aBoolean;
            }
            getNrIncidentSelectionne() {
                return this.Navigation.nrIncidentSelectionne;
            }
            setNrIncidentSelectionne(aNumeroSelectionne) {
                this.Navigation.nrIncidentSelectionne = aNumeroSelectionne;
            }
            getNrPunitionSelectionnee() {
                return this.Navigation.nrPunitionSelectionnee;
            }
            setNrPunitionSelectionnee(aNumeroSelectionnee) {
                this.Navigation.nrPunitionSelectionnee = aNumeroSelectionnee;
            }
            getFiltreSurveillances() {
                return this.Navigation.filtreSurveillances === undefined ? 1 : this.Navigation.filtreSurveillances;
            }
            setFiltreSurveillances(aValeur) {
                this.Navigation.filtreSurveillances = aValeur;
            }
            getAvecCoursAnnule() {
                if (this.getAvecChoixCoursAnnule()) {
                    return !!this.applicationSco.parametresUtilisateur.get('EDT.afficherCoursAnnules');
                }
                return this.Navigation.avecCoursAnnule;
            }
            setAvecCoursAnnule(aAvecCoursAnnule) {
                if (this.getAvecChoixCoursAnnule()) {
                    this.applicationSco.parametresUtilisateur.set('EDT.afficherCoursAnnules', aAvecCoursAnnule);
                } else {
                    this.Navigation.avecCoursAnnule = aAvecCoursAnnule;
                }
            }
            getAfficherListeElevesEDT() {
                return !!this.applicationSco.parametresUtilisateur.get('EDT.afficherListeEleves');
            }
            setAfficherListeElevesEDT(aAfficher) {
                this.applicationSco.parametresUtilisateur.set('EDT.afficherListeEleves', !!aAfficher);
            }
            getAvecChoixCoursAnnule() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Academie, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(GEtatUtilisateur.GenreEspace);
            }
            getGenreOngletPere() {
                this.genreOngletPere = this.listeOnglets.getElementParGenre(this.genreOnglet);
                return this.genreOngletPere && this.genreOngletPere.onglet ? this.genreOngletPere.onglet.Genre : null;
            }
            getLibelleOnglet(aGenreOnglet) {
                const lOnglet = this.listeOnglets.getElementParGenre(aGenreOnglet ? aGenreOnglet : this.genreOnglet);
                return lOnglet ? lOnglet.getLibelle() : '';
            }
            getLibelleLongOnglet(aGenreOnglet) {
                const lOnglet = this.listeOnglets.getElementParGenre(aGenreOnglet ? aGenreOnglet : this.genreOnglet);
                return lOnglet ? (lOnglet.libelleLong ? lOnglet.libelleLong : lOnglet.getLibelle()) : '';
            }
            ongletEstVisible(aGenreOnglet) {
                let lOngletVisible = false;
                this.listeOnglets.parcourir( (D) => {
                    if (D.Genre === aGenreOnglet && D.Visible && D.Actif && !D.estUnOnglet) {
                        lOngletVisible = true;
                        return false;
                    }
                }
                );
                return lOngletVisible;
            }
            getDomainePresence(aElementRessource) {
                const lOnglet = this.getOnglet();
                if (!lOnglet.domaineDePresenceRessources) {
                    return null;
                }
                const lElement = lOnglet.domaineDePresenceRessources.getElementParNumeroEtGenre(aElementRessource.getNumero(), aElementRessource.getGenre());
                if (lElement) {
                    return lElement.domaineDePresence;
                } else {
                    return null;
                }
            }
            setDomainePresence(aElementRessource, aDomainePresence) {
                const lOnglet = this.getOnglet();
                if (!lOnglet.domaineDePresenceRessources) {
                    lOnglet.domaineDePresenceRessources = new ObjetListeElements_1.ObjetListeElements();
                }
                let lElement = lOnglet.domaineDePresenceRessources.getElementParNumeroEtGenre(aElementRessource.getNumero(), aElementRessource.getGenre());
                if (!lElement) {
                    lElement = MethodesObjet_1.MethodesObjet.dupliquer(aElementRessource, true);
                    lOnglet.domaineDePresenceRessources.addElement(lElement);
                }
                lElement.domaineDePresence = aDomainePresence;
            }
            getOnglet(aGenreOnglet) {
                const lGenreOnglet = aGenreOnglet ? aGenreOnglet : this.getGenreOnglet();
                if (!this.getMembre().tableauOnglets) {
                    this.getMembre().tableauOnglets = [];
                }
                if (!this.getMembre().tableauOnglets[lGenreOnglet]) {
                    this.getMembre().tableauOnglets[lGenreOnglet] = {};
                }
                return this.getMembre().tableauOnglets[lGenreOnglet];
            }
            avecOngletPeriode() {
                return !([Enumere_Onglet_1.EGenreOnglet.Evaluation, Enumere_Onglet_1.EGenreOnglet.FicheBrevet, Enumere_Onglet_1.EGenreOnglet.SaisieAppreciationDeFinDeStage, Enumere_Onglet_1.EGenreOnglet.SuiviPluriannuel, Enumere_Onglet_1.EGenreOnglet.LivretScolaire_Fiche, Enumere_Onglet_1.EGenreOnglet.Saisie_CarnetCorrespondance].includes(this.getGenreOnglet()));
            }
            getListeSalles() {
                return this.listeSalles;
            }
            setListeSalles(aListeSalles) {
                this.listeSalles = aListeSalles;
            }
            getOngletListePeriodes() {
                return this.listePeriodes;
            }
            setOngletListePeriodes(aListePeriodes) {
                this.listePeriodes = aListePeriodes;
            }
            setOngletPeriodeParDefaut(aPeriodeParDefaut) {
                this.periodeParDefaut = aPeriodeParDefaut;
            }
            getOngletPeriodeParDefaut() {
                return this.periodeParDefaut;
            }
            getServiceDePilier() {
                const lPilier = this.Navigation.getRessource(Enumere_Ressource_1.EGenreRessource.Pilier);
                return lPilier && lPilier.estPilierLVE ? this.Navigation.getRessource(Enumere_Ressource_1.EGenreRessource.Service) : null;
            }
            getPeriode() {
                return this.avecOngletPeriode() ? this.listePeriodes.getElementParNumeroEtGenre(this.Navigation.getNumeroRessource(Enumere_Ressource_1.EGenreRessource.Periode), this.Navigation.getGenreRessource(Enumere_Ressource_1.EGenreRessource.Periode)) : null;
            }
            getIndiceDateSaisieAbsence(aDate) {
                const lListeDatesSaisieAbsence = this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.absences.listeDatesSaisieAbsence);
                const lDate = aDate ? aDate : this.getNavigationDate();
                if (lDate) {
                    for (let I = 0; lListeDatesSaisieAbsence && (I < lListeDatesSaisieAbsence.count()); I++) {
                        const lDateSaisieAbsence = lListeDatesSaisieAbsence.get(I);
                        if (ObjetDate_1.GDate.estJourEgal(lDateSaisieAbsence.Date, lDate)) {
                            return I;
                        }
                    }
                }
                return -1;
            }
            setListeRessources(aListeRessources) {
                this.Identification.setListeRessources(aListeRessources);
            }
            getIndiceProgressionSelection() {
                return this._indiceProgressionSelection;
            }
            setIndiceProgressionSelection(aIndice) {
                this._indiceProgressionSelection = aIndice;
            }
            getLibelleImpression(aMessage, aAvecPeriode, aAvecClasse, aAvecEleve, aAvecMatiere, aAvecProfesseur) {
                let lLibelle = aMessage;
                if (aAvecPeriode) {
                    lLibelle += ' (' + this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Periode) + ')';
                }
                if (aAvecClasse) {
                    let lGenreRessource = this.Navigation.getGenreRessource(Enumere_Ressource_1.EGenreRessource.Classe);
                    let lLibelleRessource = this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Classe);
                    if (lGenreRessource === null || lGenreRessource === undefined) {
                        lGenreRessource = Enumere_Ressource_1.EGenreRessource.Classe;
                        lLibelleRessource = this.Identification.getLibelleClasse();
                    }
                    lLibelle += ' / ' + (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Classe ? ObjetTraduction_1.GTraductions.getValeur('Classe') : ObjetTraduction_1.GTraductions.getValeur('Groupe')) + ' : ' + lLibelleRessource;
                }
                if (aAvecEleve) {
                    let lLibelleEleve = this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Eleve);
                    if (lLibelleEleve === null || lLibelleEleve === undefined) {
                        lLibelleEleve = this.getMembre().getLibelle();
                    }
                    lLibelle += ' / ' + ObjetTraduction_1.GTraductions.getValeur('Eleve') + ' : ' + lLibelleEleve;
                }
                if (aAvecMatiere) {
                    lLibelle += ' / ' + ObjetTraduction_1.GTraductions.getValeur('Matiere') + ' : ' + this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Matiere);
                }
                if (aAvecProfesseur) {
                    lLibelle += ' / ' + ObjetTraduction_1.GTraductions.getValeur('Professeur') + ' : ' + this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Enseignant);
                }
                return lLibelle;
            }
            avecParametrageWidget() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(this.GenreEspace);
            }
            setParametres(aParametres) {
                this.parametresSco[this.getGenreOnglet()] = aParametres;
            }
            getParametres() {
                return this.parametresSco[this.getGenreOnglet()];
            }
            getAcces() {
                const lMembre = this.getMembre();
                if (lMembre && lMembre.acces) {
                    return lMembre.acces;
                }
                return {
                    autorise: true,
                    autoriseSurDate: true,
                    dateDebut: null,
                    dateFin: null
                };
            }
            setTriListe(aParams) {
                return super.setTriListe($.extend({
                    onglet: this.getGenreOnglet()
                }, aParams));
            }
        }
        exports.ObjetEtatUtilisateur_Espace = ObjetEtatUtilisateur_Espace;
    },
    fn: 'objetetatutilisateur_espace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetEtatUtilisateurEleve = void 0;
        const ObjetEtatUtilisateur_Espace_1 = require("ObjetEtatUtilisateur_Espace");
        const ObjetDate_1 = require("ObjetDate");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        class ObjetEtatUtilisateurEleve extends ObjetEtatUtilisateur_Espace_1.ObjetEtatUtilisateur_Espace {
            getOngletListePeriodes() {
                return this.getOnglet().listePeriodes;
            }
            getOngletListePaliers() {
                return this.getOnglet().listePaliers;
            }
            getOngletPeriodeParDefaut() {
                const lPeriode = this.Navigation.getRessource(Enumere_Ressource_1.EGenreRessource.Periode);
                return lPeriode ? lPeriode : this.getOnglet().periodeParDefaut;
            }
            getPeriode() {
                return this.page && this.page.periode ? this.page.periode : this.getOngletPeriodeParDefaut();
            }
            getDate() {
                return this.page && this.page.Date ? this.page.Date : ObjetDate_1.GDate.getDateCourante();
            }
        }
        exports.ObjetEtatUtilisateurEleve = ObjetEtatUtilisateurEleve;
    },
    fn: 'objetetatutilisateur.eleve.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplicationScoEspace = void 0;
        require("NamespaceIE.js");
        require("DeclarationJQuery.js");
        require("DeclarationPagesErreurSco.js");
        require("DeclarationCurseurPN.js");
        require("DeclarationGeogebra.js");
        require("Theme_Modele.css");
        require("Couleurs.css");
        require("Divers.css");
        require("Styles.css");
        require("Texte.css");
        require("SurFocus.css");
        require("communEspace.css");
        require("Page.css");
        require("Widget.css");
        require("ObjetNavigateur.js");
        const ObjetApplicationSco_1 = require("ObjetApplicationSco");
        require("Parametres.js");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const CommunicationProduit_1 = require("CommunicationProduit");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const UtilitaireMenuContextuelNatif_1 = require("UtilitaireMenuContextuelNatif");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        require("DeclarationTinyInitEspacesDefer.js");
        const InterfaceConnexionEspace_1 = require("InterfaceConnexionEspace");
        const ObjetEtatUtilisateurInscription = require("ObjetEtatUtilisateur.Professeur.js");
        const ObjetEtatUtilisateurEleve = require("ObjetEtatUtilisateur.Eleve.js");
        const ObjetEtatUtilisateurAccomp = require("ObjetEtatUtilisateur.Eleve.js");
        const ObjetEtatUtilisateurPersonnel = require("ObjetEtatUtilisateur.Personnel.js");
        const ObjetEtatUtilisateurProf = require("ObjetEtatUtilisateur.Professeur.js");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        class ObjetApplicationScoEspace extends ObjetApplicationSco_1.ObjetApplicationSco {
            constructor() {
                super();
            }
            getEtatUtilisateur() {
                return GEtatUtilisateur;
            }
            getInterfaceEspace() {
                return GInterface;
            }
            initialisation(aParametres) {
                UtilitaireMenuContextuelNatif_1.UtilitaireMenuContextuelNatif.desactiverSurElement($(document));
                const lPageInscription = '?page={"Onglet":' + Enumere_Onglet_1.EGenreOnglet.InscriptionsEtablissement + '}';
                if (decodeURI(window.location.search) === lPageInscription) {
                    const lpage = window.location.pathname;
                    history.replaceState(null, '', lpage);
                }
                try {
                    this.setCommunication(new CommunicationProduit_1.CommunicationProduit(aParametres.genreEspace,aParametres.numeroSession));
                    let lClassEtatUtilisateur = null;
                    switch (aParametres.genreEspace) {
                    case Enumere_Espace_1.EGenreEspace.Inscription:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurInscription.ObjetEtatUtilisateurProfesseur;
                        break;
                    case Enumere_Espace_1.EGenreEspace.Parent:
                    case Enumere_Espace_1.EGenreEspace.Eleve:
                    case Enumere_Espace_1.EGenreEspace.Entreprise:
                    case Enumere_Espace_1.EGenreEspace.PrimParent:
                    case Enumere_Espace_1.EGenreEspace.PrimEleve:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurEleve.ObjetEtatUtilisateurEleve;
                        break;
                    case Enumere_Espace_1.EGenreEspace.Tuteur:
                    case Enumere_Espace_1.EGenreEspace.Accompagnant:
                    case Enumere_Espace_1.EGenreEspace.PrimAccompagnant:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurAccomp.ObjetEtatUtilisateurEleve;
                        break;
                    case Enumere_Espace_1.EGenreEspace.Etablissement:
                    case Enumere_Espace_1.EGenreEspace.Administrateur:
                    case Enumere_Espace_1.EGenreEspace.PrimPeriscolaire:
                    case Enumere_Espace_1.EGenreEspace.PrimMairie:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurPersonnel.ObjetEtatUtilisateurPersonnel;
                        break;
                    case Enumere_Espace_1.EGenreEspace.PrimDirection:
                    case Enumere_Espace_1.EGenreEspace.Professeur:
                    case Enumere_Espace_1.EGenreEspace.Academie:
                    case Enumere_Espace_1.EGenreEspace.PrimProfesseur:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurProf.ObjetEtatUtilisateurProfesseur;
                        break;
                    default:
                        ;
                    }
                    global.GEtatUtilisateur = new lClassEtatUtilisateur(aParametres.genreEspace);
                    global.GEtatUtilisateur.premierChargement = true;
                } catch (e) {
                    window.messageErreur('Erreur sur initialisation de "GCommunication"');
                }
            }
            async initialisationApresParametres(aParametres) {
                super.initialisationApresParametres(aParametres);
                this.getEtatUtilisateur().initialiser();
                const lInterface = global.GInterface = new InterfaceConnexionEspace_1.InterfaceConnexionEspace({
                    nomComplet: 'GInterface',
                    estRacine: true
                });
                lInterface.initialiser();
                if (this.acces.estConnexionCAS() || this.acces.estConnexionCookie()) {
                    lInterface.traiterEvenementValidation(this.acces.utilisateur.identifiant, this.acces.utilisateur.password, true);
                } else if ((!this.getDemo()) && (GEtatUtilisateur.GenreEspace !== Enumere_Espace_1.EGenreEspace.Commun) && this.optionsDebug && this.optionsDebug.identificationAuto && this.optionsDebug.getLogin() && this.optionsDebug.getMdp()) {
                    lInterface.traiterEvenementValidation(this.optionsDebug.getLogin(), this.optionsDebug.getMdp());
                    IE.log.addLog('Tentative connexion automatique DEBUG');
                }
                await DeferLoadingScript_1.deferLoadingScript.loadAsync(['defer'], {
                    eventIO: false
                });
                this._finLoadingScript();
            }
            afficherEspaceApresAuthentification(aParametres) {
                if (this._scriptsCharges) {
                    this._afficherEspaceApresAuthentification(aParametres);
                } else {
                    this._authentification = aParametres;
                    if (!DeferLoadingScript_1.deferLoadingScript.afficherPatience()) {
                        this._afficherEspaceApresAuthentification(aParametres);
                    }
                }
            }
            _finLoadingScript() {
                this._scriptsCharges = true;
                if (this._authentification) {
                    this._afficherEspaceApresAuthentification(this._authentification);
                }
            }
            async _afficherEspaceApresAuthentification(aParametres) {
                try {
                    if (GInterface && GInterface.free) {
                        GInterface.free();
                    }
                    const MultiObjetInterfaceEspace = await Promise.resolve().then( () => require('InterfaceEspace'));
                    if (!MultiObjetInterfaceEspace) {
                        throw new Error(`Erreur await import('InterfaceEspace')`);
                    }
                    const lInterfaceEspace = GInterface = new MultiObjetInterfaceEspace.ObjetInterfaceEspace({
                        nomComplet: 'GInterface',
                        estRacine: true
                    });
                    lInterfaceEspace.setDonnees(aParametres.libelle, aParametres.listeRessource);
                    this.getCommunication().activerPolling();
                    if (this.avecGestionModeExclusif()) {
                        if (this.getModeExclusif()) {
                            this.entreeModeExclusif();
                        }
                    }
                    lInterfaceEspace.focusAuDebut();
                } catch (e) {
                    if (window.messageErreur) {
                        window.messageErreur('apresAuthentification/' + e);
                    }
                    UtilitaireDeconnexion_1.UtilitaireDeconnexion.deconnexionEchecChargement();
                }
                if (aParametres.message) {
                    GApplication.getMessage().afficher({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                        message: aParametres.message
                    });
                }
            }
        }
        exports.ObjetApplicationScoEspace = ObjetApplicationScoEspace;
    },
    fn: 'objetapplicationscoespace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesImage = void 0;
        require("Image.css");
        exports.StylesImage = {
            Image_IconePdf: 'Image_IconePdf',
            Image_RecapVS_AbsenceCours: 'Image_RecapVS_AbsenceCours',
            Image_RecapVS_AbsenceRepas: 'Image_RecapVS_AbsenceRepas',
            Image_RecapVS_AbsenceInternat: 'Image_RecapVS_AbsenceInternat',
            Image_RecapVS_Retard: 'Image_RecapVS_Retard',
            Image_PortraitSilhouette: 'Image_PortraitSilhouette',
            Image_Icone_LogoBox: 'Image_Icone_LogoBox',
            Image_Icone_LogoDropBox: 'Image_Icone_LogoDropBox',
            Image_Icone_LogoGoogleDrive: 'Image_Icone_LogoGoogleDrive',
            Image_Icone_LogoOneDrive: 'Image_Icone_LogoOneDrive',
            Image_Icone_LogoDigiposte: 'Image_Icone_LogoDigiposte',
            Image_Icone_LogoCloudPronote: 'Image_Icone_LogoCloudPronote',
            Image_Icone_LogoPentila: 'Image_Icone_LogoPentila',
            iconCloudLogoBase64: 'icon-cloud-logoBase64',
            Image_Kiosque_ListeCahierTexte: 'Image_Kiosque_ListeCahierTexte',
            Image_Kiosque_ListeDevoir: 'Image_Kiosque_ListeDevoir',
            Image_Icone_BtnOneDrive: 'Image_Icone_BtnOneDrive',
            Image_Icone_BtnOneNote: 'Image_Icone_BtnOneNote',
            Color_RecapVS_NonLue: 'Color_RecapVS_NonLue',
            Color_RecapVS_Lue: 'Color_RecapVS_Lue',
            Image_DossierComportement_Ferme: 'Image_DossierComportement_Ferme',
            Image_MrFicheFenetre: 'Image_MrFicheFenetre',
            Image_PostIt: 'Image_PostIt',
            Image_PostItVide: 'Image_PostItVide',
            Image_PostIt_Trombone: 'Image_PostIt_Trombone',
            Image_VerrouNoirPetit: 'Image_VerrouNoirPetit',
            Image_Dll_VerrouPetit: 'Image_Dll_VerrouPetit',
            Image_Dll_VerrouRougeBarre: 'Image_Dll_VerrouRougeBarre',
            Image_Dll_VerrouJauneBarre: 'Image_Dll_VerrouJauneBarre',
            Image_AppelFait: 'Image_AppelFait',
            Image_Diode_Actif: 'Image_Diode_Actif',
            Image_Diode_Inactif: 'Image_Diode_Inactif',
            Image_CocheVerte: 'Image_CocheVerte',
            Image_FormatArch: 'Image_FormatArch',
            Image_FormatImg: 'Image_FormatImg',
            Image_FormatInconnu: 'Image_FormatInconnu',
            Image_FormatPDF: 'Image_FormatPDF',
            Image_FormatSon: 'Image_FormatSon',
            Image_FormatTexte: 'Image_FormatTexte',
            Image_FormatVideo: 'Image_FormatVideo',
            Image_FormatExcel: 'Image_FormatExcel',
            Image_FormatPPT: 'Image_FormatPPT',
            Image_FormatGGB: 'Image_FormatGGB',
            Image_DestinataireCourrier: 'Image_DestinataireCourrier',
            Image_AccesRestreint: 'Image_AccesRestreint',
            Image_AbsenceOuverte: 'Image_AbsenceOuverte',
            Image_AbsenceFermee: 'Image_AbsenceFermee',
            Image_Bas: 'Image_Bas',
            Image_FlecheBas: 'Image_FlecheBas',
            Image_FlecheHaut: 'Image_FlecheHaut',
            Image_FlecheBas_Blanc: 'Image_FlecheBas_Blanc',
            SansImage_Devoir_Personalise: 'SansImage_Devoir_Personalise',
            Image_VerrouPeriodeActiveGris: 'Image_VerrouPeriodeActiveGris',
            Image_Retailler: 'Image_Retailler',
            Image_Deploiement: 'Image_Deploiement',
            Image_FermetureDeploiement: 'Image_FermetureDeploiement',
            Image_Deploiement_Inactif: 'Image_Deploiement_Inactif',
            Image_FermetureDeploiement_Inactif: 'Image_FermetureDeploiement_Inactif',
            Image_Destinataire_Email_Actif: 'Image_Destinataire_Email_Actif',
            Image_FlecheSortie: 'Image_FlecheSortie',
            Image_HachureCoursSuperpose: 'Image_HachureCoursSuperpose',
            Image_HachureCoursSuperposeDiag: 'Image_HachureCoursSuperposeDiag',
            Image_IndisponibiliteEtablissement: 'Image_IndisponibiliteEtablissement',
            Image_IconeClientPN: 'Image_IconeClientPN',
            Image_IconeClientEDT: 'Image_IconeClientEDT',
            Image_IconeRelaisPN: 'Image_IconeRelaisPN',
            Image_IconeRelaisEDT: 'Image_IconeRelaisEDT',
            Image_Icone_PNET_PN: 'Image_Icone_PNET_PN',
            Image_Icone_PNET_EDT: 'Image_Icone_PNET_EDT',
            Image_ModeExclusif: 'Image_ModeExclusif',
            Image_ModeExclusifVerrouille: 'Image_ModeExclusifVerrouille',
            Image_CurseurDeTri_Haut: 'Image_CurseurDeTri_Haut',
            Image_CurseurDeTri_Bas: 'Image_CurseurDeTri_Bas',
            Image_IconeTravailAFaire: 'Image_IconeTravailAFaire',
            Image_Attention: 'Image_Attention',
            Image_ColorPicker: 'Image_ColorPicker',
            Image_SliderCouleur: 'Image_SliderCouleur',
            Image_CouleurSelection: 'Image_CouleurSelection',
            Image_CouleurIndicateur: 'Image_CouleurIndicateur',
            Image_QCM_ImagePourListe: 'Image_QCM_ImagePourListe',
            ImageBoutonTrouQCM: 'ImageBoutonTrouQCM',
            Image_QCM_DrapeauRessenti: 'Image_QCM_DrapeauRessenti',
            Image_Dll_Attention: 'Image_Dll_Attention',
            Image_RetourBandeau: 'Image_RetourBandeau',
            Image_Messagerie_Groupe: 'Image_Messagerie_Groupe',
            Image_DevoirRefait: 'Image_DevoirRefait',
            Image_EvolutionHausse: 'Image_EvolutionHausse',
            Image_EvolutionStable: 'Image_EvolutionStable',
            Image_EvolutionBaisse: 'Image_EvolutionBaisse',
            Image_CopierListe: 'Image_CopierListe',
            Image_StickerDispense: 'Image_StickerDispense',
            Image_VisaEtablissement: 'Image_VisaEtablissement',
            Image_VisaInspecteur: 'Image_VisaInspecteur',
            Image_Vu: 'Image_Vu',
            Image_DeploiementBandeau: 'Image_DeploiementBandeau',
            Image_CroixFermer: 'Image_CroixFermer',
            Image_PassageAuSuivantPourBandeau: 'Image_PassageAuSuivantPourBandeau',
            Image_PassageAuPrecedentPourBandeau: 'Image_PassageAuPrecedentPourBandeau',
            Image_Icone_QCM: 'Image_Icone_QCM',
            Image_PublierSuivi: 'Image_PublierSuivi',
            Image_Colonne_HP_IconeHebergement: 'Image_Colonne_HP_IconeHebergement',
            Image_MessagerieBloquee: 'Image_MessagerieBloquee',
            Image_OuvrirCalendrier: 'Image_OuvrirCalendrier',
            Image_PaletteDesCouleurs: 'Image_PaletteDesCouleurs',
            Image_IconeFinanceur: 'Image_IconeFinanceur',
            Image_IconeHebergeur: 'Image_IconeHebergeur',
            Image_IconePerceveur: 'Image_IconePerceveur',
            Hachure: 'Hachure',
            Image_Casier_Corrige: 'Image_Casier_Corrige',
            Image_CourrierEnvoye: 'Image_CourrierEnvoye',
            Image_CourrierNonEnvoye: 'Image_CourrierNonEnvoye',
            Image_CourrierErreur: 'Image_CourrierErreur',
            Image_CourrierSpam: 'Image_CourrierSpam',
            IconCocheGrise: 'IconCocheGrise',
            asIcon: 'as-icon',
            icoRed: 'ico-red',
            icoGreen: 'ico-green',
            logoEspaceEdt: 'logo-espace-edt',
            wrapperConnectConteneur: 'wrapper-connect-conteneur',
            espaceEdt: 'espace-edt',
            blocConnexionWrapper: 'bloc-connexion-wrapper',
            bgEspacePrimaire: 'bg-espace-primaire',
            illustrationContainer: 'illustration-container',
            espacePrimaire: 'espace-primaire',
            illusRond: 'illus-rond',
            logoPronotePrimaire: 'logo-pronote-primaire',
            bgEspaceHyperplanning: 'bg-espace-hyperplanning',
            ObjetBandeauEspace: 'ObjetBandeauEspace',
            espaceHyperplanning: 'espace-hyperplanning',
            illusHyperplanning: 'illus-hyperplanning',
            listeCreation: 'liste-creation',
            sizeInherit: 'size-inherit',
            iCenter: 'i-center',
            iTop: 'i-top',
            testColor: 'test-color',
            iTopSpe: 'i-top-spe',
            iLarge: 'i-large',
            iSmall: 'i-small',
            mixILarge: 'mix-i-large',
            iRed: 'i-red',
            iOrange: 'i-orange',
            iGreen: 'i-green',
            iGrey: 'i-grey',
            iBlue: 'i-blue',
            hasText: 'has-text',
            iecb: 'iecb',
            asChips: 'as-chips',
            mixIcon_fermeture_widget: 'mix-icon_fermeture_widget',
            iconsideIcon_fermeture_widget: 'iconside-icon_fermeture_widget',
            mixIcon_ok: 'mix-icon_ok',
            iconsideIcon_ok: 'iconside-icon_ok',
            mixIcon_remove: 'mix-icon_remove',
            iconsideIcon_remove: 'iconside-icon_remove',
            mixIcon_lock: 'mix-icon_lock',
            iconsideIcon_lock: 'iconside-icon_lock',
            mixIcon_unlock: 'mix-icon_unlock',
            iconsideIcon_unlock: 'iconside-icon_unlock',
            mixIcon_asterisk: 'mix-icon_asterisk',
            iconsideIcon_asterisk: 'iconside-icon_asterisk',
            mixIcon_question: 'mix-icon_question',
            iconsideIcon_question: 'iconside-icon_question',
            mixIcon_exclamation: 'mix-icon_exclamation',
            iconsideIcon_exclamation: 'iconside-icon_exclamation',
            mixIcon_exclamation_sign: 'mix-icon_exclamation_sign',
            iconsideIcon_exclamation_sign: 'iconside-icon_exclamation_sign',
            mixIcon_info_widget: 'mix-icon_info_widget',
            iconsideIcon_info_widget: 'iconside-icon_info_widget',
            mixIcon_arobase: 'mix-icon_arobase',
            iconsideIcon_arobase: 'iconside-icon_arobase',
            mixIcon_piece_jointe: 'mix-icon_piece_jointe',
            iconsideIcon_piece_jointe: 'iconside-icon_piece_jointe',
            mixIcon_user: 'mix-icon_user',
            iconsideIcon_user: 'iconside-icon_user',
            mixIcon_info_sondage_publier: 'mix-icon_info_sondage_publier',
            iconsideIcon_info_sondage_publier: 'iconside-icon_info_sondage_publier',
            mixIcon_info_sondage_non_publier: 'mix-icon_info_sondage_non_publier',
            iconsideIcon_info_sondage_non_publier: 'iconside-icon_info_sondage_non_publier',
            mixIcon_pastille_evaluation: 'mix-icon_pastille_evaluation',
            iconsideIcon_pastille_evaluation: 'iconside-icon_pastille_evaluation',
            mixIcon_ne_pas_deranger: 'mix-icon_ne_pas_deranger',
            iconsideIcon_ne_pas_deranger: 'iconside-icon_ne_pas_deranger',
            mixIcon_radio_off: 'mix-icon_radio_off',
            iconsideIcon_radio_off: 'iconside-icon_radio_off',
            mixIcon_plus: 'mix-icon_plus',
            iconsideIcon_plus: 'iconside-icon_plus',
            mixIcon_link: 'mix-icon_link',
            iconsideIcon_link: 'iconside-icon_link',
            mixIcon_star: 'mix-icon_star',
            iconsideIcon_star: 'iconside-icon_star',
            mixIcon_repeat: 'mix-icon_repeat',
            iconsideIcon_repeat: 'iconside-icon_repeat',
            mixIcon_refresh: 'mix-icon_refresh',
            iconsideIcon_refresh: 'iconside-icon_refresh',
            mixIcon_resize_vertical: 'mix-icon_resize_vertical',
            iconsideIcon_resize_vertical: 'iconside-icon_resize_vertical',
            mixIcon_resize_horizontal: 'mix-icon_resize_horizontal',
            iconsideIcon_resize_horizontal: 'iconside-icon_resize_horizontal',
            mixIcon_arrow_left: 'mix-icon_arrow_left',
            iconsideIcon_arrow_left: 'iconside-icon_arrow_left',
            mixIcon_arrow_right: 'mix-icon_arrow_right',
            iconsideIcon_arrow_right: 'iconside-icon_arrow_right',
            mixIcon_arrow_up: 'mix-icon_arrow_up',
            iconsideIcon_arrow_up: 'iconside-icon_arrow_up',
            mixIcon_arrow_down: 'mix-icon_arrow_down',
            iconsideIcon_arrow_down: 'iconside-icon_arrow_down',
            mixIcon_cle: 'mix-icon_cle',
            iconsideIcon_cle: 'iconside-icon_cle',
            mixIcon_vs: 'mix-icon_vs',
            iconsideIcon_vs: 'iconside-icon_vs',
            mixIcon_time: 'mix-icon_time',
            iconsideIcon_time: 'iconside-icon_time',
            mixIcon_cog: 'mix-icon_cog',
            iconsideIcon_cog: 'iconside-icon_cog',
            mixIcon_competence_absent: 'mix-icon_competence_absent',
            iconsideIcon_competence_absent: 'iconside-icon_competence_absent',
            mixIcon_entreprise: 'mix-icon_entreprise',
            iconsideIcon_entreprise: 'iconside-icon_entreprise',
            mixIcon_reply: 'mix-icon_reply',
            iconsideIcon_reply: 'iconside-icon_reply',
            mixIcon_edit: 'mix-icon_edit',
            iconsideIcon_edit: 'iconside-icon_edit',
            mixIcon_search: 'mix-icon_search',
            iconsideIcon_search: 'iconside-icon_search',
            mixIcon_eleve: 'mix-icon_eleve',
            iconsideIcon_eleve: 'iconside-icon_eleve',
            mixIcon_edt_permanence: 'mix-icon_edt_permanence',
            iconsideIcon_edt_permanence: 'iconside-icon_edt_permanence',
            mixIcon_alternance: 'mix-icon_alternance',
            iconsideIcon_alternance: 'iconside-icon_alternance',
            mixIcon_percent: 'mix-icon_percent',
            iconsideIcon_percent: 'iconside-icon_percent',
            mixIcon_list: 'mix-icon_list',
            iconsideIcon_list: 'iconside-icon_list',
            mixIcon_bell: 'mix-icon_bell',
            iconsideIcon_bell: 'iconside-icon_bell',
            mixIcon_livret_competence: 'mix-icon_livret_competence',
            iconsideIcon_livret_competence: 'iconside-icon_livret_competence',
            mixIcon_medkit: 'mix-icon_medkit',
            iconsideIcon_medkit: 'iconside-icon_medkit',
            mixIcon_sens_interdit: 'mix-icon_sens_interdit',
            iconsideIcon_sens_interdit: 'iconside-icon_sens_interdit',
            mixIcon_fiche_t_vide: 'mix-icon_fiche_t_vide',
            iconsideIcon_fiche_t_vide: 'iconside-icon_fiche_t_vide',
            mixIcon_bullhorn: 'mix-icon_bullhorn',
            iconsideIcon_bullhorn: 'iconside-icon_bullhorn',
            mixIcon_ballon_foot: 'mix-icon_ballon_foot',
            iconsideIcon_ballon_foot: 'iconside-icon_ballon_foot',
            mixIcon_comment_vide: 'mix-icon_comment_vide',
            iconsideIcon_comment_vide: 'iconside-icon_comment_vide',
            mixIcon_rond: 'mix-icon_rond',
            iconsideIcon_rond: 'iconside-icon_rond',
            mixIcon_lien_entrepartie: 'mix-icon_lien_entrepartie',
            iconsideIcon_lien_entrepartie: 'iconside-icon_lien_entrepartie',
            mixIcon_fiche_cours_partage: 'mix-icon_fiche_cours_partage',
            iconsideIcon_fiche_cours_partage: 'iconside-icon_fiche_cours_partage',
            mixIcon_envoyer: 'mix-icon_envoyer',
            iconsideIcon_envoyer: 'iconside-icon_envoyer',
            iconText: 'icon-text'
        };
    },
    fn: 'image.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("Image.css");
    },
    fn: 'declarationimagecp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesImageEspacesCP = void 0;
        require("ImageEspacesCP.css");
        exports.StylesImageEspacesCP = {
            Image_IconeDS: 'Image_IconeDS'
        };
    },
    fn: 'imageespacescp.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationImageCP.js");
        require("ImageEspacesCP.css");
    },
    fn: 'declarationimageespacescp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesImageSco = void 0;
        require("ImageSco.css");
        exports.StylesImageSco = {
            image_centrale_notification: 'image_centrale_notification',
            Image_CommandeKiosque: 'Image_CommandeKiosque',
            Image_CoursExportPNCoursRouge: 'Image_CoursExportPNCoursRouge',
            Image_CoursExportPNCoursOrange: 'Image_CoursExportPNCoursOrange',
            Image_SystemeReserverSalle: 'Image_SystemeReserverSalle',
            Image_SystemeReserverMateriel: 'Image_SystemeReserverMateriel',
            Image_SystemeAlerte: 'Image_SystemeAlerte',
            Image_NotificationAlerte: 'Image_NotificationAlerte',
            Image_Ajout1Etat: 'Image_Ajout1Etat',
            Image_TAF_Public: 'Image_TAF_Public',
            Image_TAF_Duree: 'Image_TAF_Duree',
            Image_Trombone: 'Image_Trombone',
            Image_Publie: 'Image_Publie',
            Image_NonPublie: 'Image_NonPublie',
            Image_PublieEnAttente: 'Image_PublieEnAttente',
            Image_Publie_Grise: 'Image_Publie_Grise',
            Image_NonPublie_Grise: 'Image_NonPublie_Grise',
            Image_Verrou: 'Image_Verrou',
            Image_VerrouFait: 'Image_VerrouFait',
            Image_TAF_Niveau: 'Image_TAF_Niveau',
            Image_EvaluationTresInsatisfait: 'Image_EvaluationTresInsatisfait',
            Image_EvaluationInsatisfait: 'Image_EvaluationInsatisfait',
            Image_EvaluationSatisfait: 'Image_EvaluationSatisfait',
            Image_EvaluationTresSatisfait: 'Image_EvaluationTresSatisfait',
            Image_EvaluationTresInsatisfaitListe: 'Image_EvaluationTresInsatisfaitListe',
            Image_EvaluationInsatisfaitListe: 'Image_EvaluationInsatisfaitListe',
            Image_EvaluationSatisfaitListe: 'Image_EvaluationSatisfaitListe',
            Image_EvaluationTresSatisfaitListe: 'Image_EvaluationTresSatisfaitListe',
            Image_Punition_RealiseNon: 'Image_Punition_RealiseNon',
            Image_Punition_RealiseOuNon: 'Image_Punition_RealiseOuNon',
            Image_Punition_Realise: 'Image_Punition_Realise',
            Image_Punition_RealiseProgramme: 'Image_Punition_RealiseProgramme',
            Image_CDT_Editeurs: 'Image_CDT_Editeurs',
            Image_Casier: 'Image_Casier',
            Image_Logo_BriefMe: 'Image_Logo_BriefMe',
            Image_Logo_BriefMe_AvecGranularite: 'Image_Logo_BriefMe_AvecGranularite',
            Image_Logo_Generation5: 'Image_Logo_Generation5',
            Image_Logo_Generation5_AvecGranularite: 'Image_Logo_Generation5_AvecGranularite',
            Image_Logo_Universalis: 'Image_Logo_Universalis',
            Image_Logo_Universalis_AvecGranularite: 'Image_Logo_Universalis_AvecGranularite',
            Image_Logo_EDUCLEVER: 'Image_Logo_EDUCLEVER',
            Image_Logo_EDUCLEVER_AvecGranularite: 'Image_Logo_EDUCLEVER_AvecGranularite',
            Image_Logo_EDULIB: 'Image_Logo_EDULIB',
            Image_Logo_EDULIB_AvecGranularite: 'Image_Logo_EDULIB_AvecGranularite',
            Image_Logo_LIVRESCOLAIRE: 'Image_Logo_LIVRESCOLAIRE',
            Image_Logo_LIVRESCOLAIRE_AvecGranularite: 'Image_Logo_LIVRESCOLAIRE_AvecGranularite',
            Image_Logo_EDUCARTE: 'Image_Logo_EDUCARTE',
            Image_Logo_EDUCARTE_AvecGranularite: 'Image_Logo_EDUCARTE_AvecGranularite',
            Image_Logo_BBM: 'Image_Logo_BBM',
            Image_Logo_BBM_AvecGranularite: 'Image_Logo_BBM_AvecGranularite',
            Image_Logo_PearlTrees: 'Image_Logo_PearlTrees',
            Image_Logo_PearlTrees_AvecGranularite: 'Image_Logo_PearlTrees_AvecGranularite',
            Image_Logo_PopLab: 'Image_Logo_PopLab',
            Image_Logo_PopLab_AvecGranularite: 'Image_Logo_PopLab_AvecGranularite',
            Image_Logo_MadMagz_AvecGranularite: 'Image_Logo_MadMagz_AvecGranularite',
            Image_Logo_MadMagz: 'Image_Logo_MadMagz',
            Image_Logo_Sondo_AvecGranularite: 'Image_Logo_Sondo_AvecGranularite',
            Image_Logo_Sondo: 'Image_Logo_Sondo',
            Image_Logo_ShortEdition_AvecGranularite: 'Image_Logo_ShortEdition_AvecGranularite',
            Image_Logo_ShortEdition: 'Image_Logo_ShortEdition',
            Image_Logo_Wiloki: 'Image_Logo_Wiloki',
            Image_Logo_Wiloki_AvecGranularite: 'Image_Logo_Wiloki_AvecGranularite',
            Image_Logo_EDUMEDIA: 'Image_Logo_EDUMEDIA',
            Image_Logo_EDUMEDIA_AvecGranularite: 'Image_Logo_EDUMEDIA_AvecGranularite',
            Image_Logo_Jeulin: 'Image_Logo_Jeulin',
            Image_Logo_Jeulin_AvecGranularite: 'Image_Logo_Jeulin_AvecGranularite',
            Image_AppelNonFait: 'Image_AppelNonFait',
            Image_AppelVerrouFait: 'Image_AppelVerrouFait',
            Image_AppelVerrouNonFait: 'Image_AppelVerrouNonFait',
            Image_CahierDeTexte6Etats: 'Image_CahierDeTexte6Etats',
            Image_CahierDeTexte_Verrouille6Etats: 'Image_CahierDeTexte_Verrouille6Etats',
            Image_CahierDeTexte: 'Image_CahierDeTexte',
            Image_CahierDeTexte_Verrouille: 'Image_CahierDeTexte_Verrouille',
            Image_ListeCommentaire: 'Image_ListeCommentaire',
            Image_DonneesMembre: 'Image_DonneesMembre',
            Image_IconeMoins: 'Image_IconeMoins',
            Image_IconePlus: 'Image_IconePlus',
            Image_IconeEvaluation: 'Image_IconeEvaluation',
            Image_IconeAP: 'Image_IconeAP',
            Image_IconeEPI: 'Image_IconeEPI',
            Image_CoursVirtuelCDT: 'Image_CoursVirtuelCDT',
            Image_ColonneTransportScolaire: 'Image_ColonneTransportScolaire',
            Image_CoursExportSTSNonExportable: 'Image_CoursExportSTSNonExportable',
            Image_STSPartiellementExportable: 'Image_STSPartiellementExportable',
            Image_CoursExportExportableConditions: 'Image_CoursExportExportableConditions',
            Image_CoursExportSTSExportable: 'Image_CoursExportSTSExportable',
            Image_Attention: 'Image_Attention',
            Image_MessagerieRepondre: 'Image_MessagerieRepondre',
            Image_CommandeRecherche: 'Image_CommandeRecherche',
            Image_SigmaAbsence: 'Image_SigmaAbsence',
            Image_SigmaRetard: 'Image_SigmaRetard',
            Image_OrdonnerElmtProgrammes: 'Image_OrdonnerElmtProgrammes',
            Image_OptionOrdonnerPourListe: 'Image_OptionOrdonnerPourListe',
            Image_DiagAffEleTGris: 'Image_DiagAffEleTGris',
            asIcon: 'as-icon',
            Image_DiagAbsClasse: 'Image_DiagAbsClasse',
            Image_DiagStageEleve: 'Image_DiagStageEleve',
            Image_DiagEleveExclu: 'Image_DiagEleveExclu',
            Image_PointBleuEnRelief: 'Image_PointBleuEnRelief',
            Image_PointGrisEnRelief: 'Image_PointGrisEnRelief',
            Image_TravailDonnePourCours: 'Image_TravailDonnePourCours',
            Image_SaisieCompetenceDevoir: 'Image_SaisieCompetenceDevoir',
            Image_BtnPDF: 'Image_BtnPDF',
            Image_Realise: 'Image_Realise',
            Image_RealiseNon: 'Image_RealiseNon',
            Image_RealiseProgramme: 'Image_RealiseProgramme',
            Image_RealiseOuNon: 'Image_RealiseOuNon',
            Image_IconePunition: 'Image_IconePunition',
            Image_CreationCompteCloudIndex: 'Image_CreationCompteCloudIndex',
            Image_AssociationCompteCloudIndex: 'Image_AssociationCompteCloudIndex',
            Image_AlerteMiseAJourPRN: 'Image_AlerteMiseAJourPRN',
            Image_AlerteMiseAJourPRM: 'Image_AlerteMiseAJourPRM',
            Image_CoursPrevus: 'Image_CoursPrevus',
            Image_StickerALaMaison: 'Image_StickerALaMaison',
            Image_Partenaire_Canope: 'Image_Partenaire_Canope',
            Image_Partenaire_Canope_2022: 'Image_Partenaire_Canope_2022',
            Image_DiodeVerte: 'Image_DiodeVerte',
            Image_DiodeGrise: 'Image_DiodeGrise'
        };
    },
    fn: 'imagesco.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationImageEspacesCP.js");
        require("ImageSco.css");
    },
    fn: 'declarationimagesco.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("ImageEspacesHebergementPN.css");
    },
    fn: 'imageespaceshebergementpn.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const LottiePatience_1 = require("LottiePatience");
        require("ImageEspacesHebergementPN.css");
        LottiePatience_1.LottiePatience.setUrl('./images/loadingPR_PRM.json   ');
    },
    fn: 'declarationimageespaceshebergementpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesImagePN = void 0;
        require("ImagePN.css");
        exports.StylesImagePN = {
            Image_No_Data: 'Image_No_Data'
        };
    },
    fn: 'imagepn.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationimageconnexionpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationimagefaviconpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesLogoPN = void 0;
        require("LogoPN.css");
        exports.StylesLogoPN = {
            Image_Logo_Pronote: 'Image_Logo_Pronote',
            Image_Logo_Pronote_AppliMobile: 'Image_Logo_Pronote_AppliMobile',
            LogoPrimPortail_Bandeau: 'LogoPrimPortail_Bandeau',
            logo_pronote: 'logo_pronote',
            primaire: 'primaire'
        };
    },
    fn: 'logopn.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("LogoPN.css");
    },
    fn: 'declarationimagelogopn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationImageSco.js");
        require("DeclarationImageEspacesHebergementPN.js");
        require("ImagePN.css");
        require("DeclarationImageConnexionPN.js");
        require("DeclarationImageFaviconPN.js");
        require("DeclarationImageLogoPN.js");
    },
    fn: 'declarationimagepn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationcollectivite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const MethodesObjet_1 = require("MethodesObjet");
        const GImageConnexion = require("ObjetImageConnexion");
        const imagesConnexion = require("imagesconnexion");
        try {
            if (imagesConnexion && MethodesObjet_1.MethodesObjet.isFunction(imagesConnexion.imagesConnexion)) {
                imagesConnexion.imagesConnexion(GImageConnexion);
            }
        } catch (e) {}
    },
    fn: 'declarationimagesconnexiondynamiques.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.StylesImagesQCM = void 0;
        require("ImagesQCM.css");
        exports.StylesImagesQCM = {
            Image_QCM_Association: 'Image_QCM_Association',
            Image_QCM_ChoixMultiple: 'Image_QCM_ChoixMultiple',
            Image_QCM_ChoixUnique: 'Image_QCM_ChoixUnique',
            Image_QCM_ReponseNumerique: 'Image_QCM_ReponseNumerique',
            Image_QCM_ReponseASaisir: 'Image_QCM_ReponseASaisir',
            Image_QCM_TexteATrou_Liste: 'Image_QCM_TexteATrou_Liste',
            Image_QCM_TexteATrou_Listes: 'Image_QCM_TexteATrou_Listes',
            Image_QCM_TexteATrou_Saisie: 'Image_QCM_TexteATrou_Saisie',
            Image_QCM_ReponseEpellation: 'Image_QCM_ReponseEpellation',
            Image_QCM_CocheVerte: 'Image_QCM_CocheVerte',
            uiInputText: 'ui-input-text',
            tox: 'tox',
            mceContainer: 'mce-container'
        };
    },
    fn: 'imagesqcm.css.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplicationPNEspace = void 0;
        const ObjetApplicationScoEspace_1 = require("ObjetApplicationScoEspace");
        require("DeclarationImagePN.js");
        require("DeclarationCollectivite.js");
        require("DeclarationImagesConnexionDynamiques.js");
        require("ImagesQCM.css");
        const AccessApp_1 = require("AccessApp");
        global.Start = function(aParam) {
            (0,
            AccessApp_1.setApp)(new ObjetApplicationPNEspace());
            GApplication.lancer(aParam);
        }
        ;
        class ObjetApplicationPNEspace extends ObjetApplicationScoEspace_1.ObjetApplicationScoEspace {
            constructor() {
                super();
            }
        }
        exports.ObjetApplicationPNEspace = ObjetApplicationPNEspace;
    },
    fn: 'objetapplicationpnespace.js'
});
;
